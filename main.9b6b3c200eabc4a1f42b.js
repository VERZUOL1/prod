webpackJsonp([9],[,,,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Icons=void 0;var r=a(97),i=n(r),l=a(849),o=n(l);t.default=o.default,t.Icons=i.default},,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t){return Math.ceil(V.default.duration(new Date(e)-new Date(t)).asWeeks())}function o(e){return e.format("DD MMM YY")}function s(e){return e?(0,V.default)(e).format("YYYY-MM-DD"):null}function u(e){return(0,ee.default)(e,function(e,t){return"target_num_patients"===t||"fpfv_fpft"===t?parseInt(e,10):"fp"===t||"target_lpft"===t?s(e):e})}function d(e){return e?V.default.isMoment(e)?e.clone():V.default.utc(new Date(e),["YYYY-MM-DD","DD-MM-YYYY","DD MMM YYYY","D MMM YY",V.default.ISO_8601]):null}function c(e){switch(e){case 4:return"Pessimistic enrollment";case 3:return"Optimistic enrollment";case 2:return"Enrollment";case 1:return"Screening";case 0:default:return"SIV"}}function f(e){var t={};return e&&e.filter(function(e){return!e.disabled}).forEach(function(e){e.locations.forEach(function(a){a.countries.forEach(function(a){t[a.id]?t[a.id].push((0,H.default)(e,"locations")):t[a.id]=[(0,H.default)(e,"locations")]})})}),t}function p(e){return e?F({},e,{fp:d(e.fp),end_date:d(e.end_date),updated:d(e.updated),updatedAt:d(e.updatedAt),createdAt:d(e.createdAt),approvedAt:d(e.approvedAt),last_optimisation_date:e.last_optimisation_date?(0,V.default)(e.last_optimisation_date):null,adjusted_createdAt:d(e.adjusted_createdAt)}):null}function h(e,t){return e&&V.default.isMoment(e)?e:e&&"string"==typeof e?d(e):(e||0===e)&&t?t.clone().add(e,"d"):null}function v(e){return{actual_patient_allocation:e.actual_patient_allocation,actual_num_sites:e.actual_num_sites,actual_date:e.actual_date?d(e.actual_date):null,actual_f_lpft:e.actual_f_lpft?d(e.actual_f_lpft):null,actual_fsiv:e.actual_fsiv?d(e.actual_fsiv):null,actual_fpfv:e.actual_fpfv?d(e.actual_fpfv):null,actual_fpft:e.actual_fpft?d(e.actual_fpft):null,actual_lpfv:e.actual_lpfv?d(e.actual_lpfv):null,actual_25_si:e.actual_25_si?d(e.actual_25_si):null,actual_50_si:e.actual_50_si?d(e.actual_50_si):null,actual_90_si:e.actual_90_si?d(e.actual_90_si):null,actual_screened:e.actual_screened||[],actual_siv:e.actual_siv||[],actual_randomized:e.actual_randomized||[],q75_actual_randomized:e.q75_actual_randomized||[],q25_actual_randomized:e.q25_actual_randomized||[],actual_sas:e.actual_sas||0===e.actual_sas?+e.actual_sas:null,actual_randomisation_rate:e.actual_randomization_rate?+e.actual_randomization_rate:null,actual_overallocation:e.actual_overallocation?e.actual_overallocation:0,original_f_lpft:e.original_f_lpft?d(e.original_f_lpft):null}}function m(e,t,a){if(!e)return null;var n=d(a||e.fp),r=f(e.events),i=f(e.adjusted_events);return e.countries.map(function(a){var l=null,o=null,s=void 0,u=void 0,d=void 0;return t?(l=a.fpfv,o=a.fsiv):(l=h(a.fpfv,e.fp),o=h(a.fsiv,e.fp),s=h(a["25_si"],e.fp),u=h(a["50_si"],e.fp),d=h(a["90_si"],e.fp)),F({},a,{events:r[a.country_id]||[],location:a.country_name,region:a.region_name,randomisation_rate:a.randomisation_rate&&+a.randomisation_rate,fpfv_fpft:e.fpfv_fpft,fpfv:l,fsiv:o,"25_si":s,"50_si":u,"90_si":d,uncertainty:a.uncertainty?+a.uncertainty:null},v(a),{adjusted_events:i[a.country_id]||[],adjusted_patient_allocation:a.adjusted_patient_allocation,adjusted_num_sites:a.adjusted_num_sites,adjusted_randomisation_rate:a.adjusted_randomisation_rate,adjusted_fpfv_fpft:e.fpfv_fpft,adjusted_25_si:h(a.adjusted_25_si,n),adjusted_50_si:h(a.adjusted_50_si,n),adjusted_90_si:h(a.adjusted_90_si,n),adjusted_fsiv:h(a.adjusted_fsiv,n),adjusted_fpfv:h(a.adjusted_fpfv,n),hasAdjustedOrigin:e.hasAdjustedOrigin})})}function _(e,t){return e instanceof V.default?l(e,t):+e}function E(e,t,a){if("rollup"!==e.type||a)return null;var n=le.CELL_TO_PARAMETER_UNCERTAINTY[t],r=e.uncertaintyUnavailableFields.filter(function(e){return e===t}).length>0;return e.parameter_uncertainty?r?"N/A":e.parameter_uncertainty[n]:"N/A"}function g(e,t,a){var n=e;if(n&&t){(t.isImpact||"IMPACT"===t.origin)&&(n=(0,ie.generateMissingValuesForImpactScenarioCountries)(n,t.fp,t.end_date));var r=(t.status===ue.SCENARIO_STATUS.APPROVED||t.status===ue.SCENARIO_STATUS.PREV_APPROVED)&&t.updated&&t.updated.isSameOrBefore(d("02-11-2018")),i=n.map(function(e){var a=null;if(e.isImpact||"IMPACT"===t.origin)a=(0,ie.calculateImpactCurvesData)(t.fp,t.end_date,e,t.fpfv_fpft,"IMPACT"===t.origin);else{var n=null!==t.source_scenario_id||null!==t.adjust_source_cohort_id&&void 0!==t.adjust_source_cohort_id;a=Ee(t.fp,t.end_date,e,t.fpfv_fpft,n,t.study_id+"-"+(t.scenario_id?t.scenario_id+"-"+t.id:t.id)+"-"+e.country_id,r,t.approvedData)}return F({},e,a)});try{var l=(0,re.calculateTableData)(i,t.fp,t,a);return t.approvedData&&(l=(0,_e.default)(l,t)),null!==t.source_scenario_id&&(l=(0,ve.default)(l,t,e,a,"adjusted_",t.target_num_patients)),t.approvedData&&!t.approvedData.daily||(l=(0,ve.default)(l,t,e,a,"",(0,Y.default)(t,"approvedData.target_num_patients",t.target_num_patients))),l}catch(e){return console.log(e),[]}}return[]}function y(e,t,a){var n=(0,Y.default)(a,"is_imported",!1);return(t.role!==se.default.PLAYGROUND||!n)&&t.role!==se.default.READONLY&&!(t.role===se.default.ADMIN&&!n&&!e.state.isOwner)&&!e.is_archived&&e.status!==ue.SCENARIO_STATUS.APPROVED&&e.status!==ue.SCENARIO_STATUS.PREV_APPROVED&&(e.state.isOwner||t.role===se.default.ADMIN)}function S(e,t){if(!t.length)return e;if(!e.length)return t;var a=e.reduce(function(e,a){var n=(0,W.default)(a),r=t.find(function(e){return e.name===a.name});return r&&(n.countries=(0,Z.default)(n.countries.concat(r.countries),["name"])),e.push(n),e},[]);return(0,Z.default)((0,Q.default)([].concat(i(a),i(t)),"name"),["id"])}function b(e,t,a,n,r){var i=e.find(function(e){return e.name.toLowerCase()===a.name.toLowerCase()});if(i){var l=i.countries.find(function(e){return e.name.toLowerCase()===n.name.toLowerCase()});l?(r.patients_min=l.patients_min,r.patients=l.patients,r.patients_max=l.patients_max,r.isOverridden=l.isOverridden,i.countries=i.countries.filter(function(e){return e.name.toLowerCase()!==n.name.toLowerCase()})):t.length&&b(t,[],a,n,r)}else t.length&&b(t,[],a,n,r)}function C(e,t){var a=e.countries;1===a.length||a.find(function(e){return"Unspecified country"===e.name})||(a=[ge(e.id)].concat(a));var n=a.find(function(e){return e.name===t.country_name});n&&(n.isSelected=!0)}function O(e,t,a,n,r){var i=ue.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION,l=ue.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION_MIN,o=ue.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION_MAX,s=ue.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK,u={id:t.platform_country_id||"fpo_"+t.country_id,name:t.country_name,isSelected:!0,region_id:e,disabled:!1,patients:t[""+r+i],patients_min:t[""+r+l],patients_max:t[""+r+o],platform_country_id:t.platform_country_id,unlock:t.unlock,constraint:t.constraint,isOverridden:t.overrideList.includes(i)&&t[""+r+s]&&!t[""+r+s].includes(i)},d=n.find(function(e){return e.name===t.region_name});if(d)d.countries.push(u);else{var c=a.find(function(e){return e.name===t.region_name}),f=1===c.countries.length,p=(0,H.default)(c,"countries");p.isCountryRegion=f,p.countries=[u],n.push(p)}}function T(e,t,a){var n=t.map(function(e){var t=e.countries.map(function(e){return F({},e,{platform_country_id:e.id})});return F({},e,{countries:t})}),r=(0,W.default)(n),i=(0,W.default)(n),l=[],o=[],s=[],u=[],d=[],c=a?"adjusted_":"";return e.countries.forEach(function(t){if("INCLUDE"===t.constraint){var a=r.find(function(e){return e.name===t.region_name});C(a,t),O(a.id,t,r,l,c)}else if("EXCLUDE"===t.constraint){var f=i.find(function(e){return e.name===t.region_name});C(f,t),O(f.id,t,i,o,c)}else{var p=n.find(function(e){return e.name===t.region_name});O(p.id,t,n,s,c)}null!==e.source_scenario_id&&(0,pe.default)(t)&&(u.push(t),d.push(t))}),{includeCountries:l,excludeCountries:o,otherCountries:s,initialIncludedRegionsCountries:r,initialExcludedRegionsCountries:i,disabledIncludedCountries:u,disabledExcludedCountries:d}}function R(e,t,a){var n=t.map(function(e){var t=e.countries.map(function(e){return F({},e,{platform_country_id:e.id})});return F({},e,{countries:t})}),r=(0,W.default)(n),i=[];return e.countries.forEach(function(e){var t=r.find(function(t){return t.name===e.region_name});1===t.countries.length||t.countries.find(function(e){return"Unspecified country"===e.name})||(t.countries=[ge(t.id)].concat(t.countries));var l=t.countries.find(function(t){return t.name===e.country_name});l&&(l.isSelected=!0);var o=(0,pe.default)(e),s=a?"adjusted_":"",u={id:e.platform_country_id,name:e.country_name,isSelected:!0,region_id:t.id,disabled:!1,patients:e[s+"patient_allocation"]||null,sites:e[s+"num_sites"],platform_country_id:e.platform_country_id,hasActuals:o},d=i.find(function(t){return t.name===e.region_name});if(d)d.countries.push(u);else{var c=n.find(function(t){return t.name===e.region_name}),f=1===c.countries.length,p=(0,H.default)(c,"countries");p.isCountryRegion=f,p.countries=[u],i.push(p)}}),i}function A(e,t,a){return e.map(function(e){return{id:e.id,name:e.name,rank:e.rank,locations:R(e,t,a),trigger:{trigger_type:e.trigger_type,start_date:e.fp&&e.fp.isValid()?(0,V.default)(e.fp).format("YYYY-MM-DD"):null,num_patients:e.target_num_patients,num_patients_abs:e.num_patients_abs,start_milestone:e.start_milestone,source_cohort_id:e.source_cohort_id}}})}function I(){return new Set(["fsiv","25_si","50_si","90_si","fpfv"])}function w(e,t,a){var n=I(),i=[];return e.forEach(function(e){var t=F({},e);if(t.fieldName=t.fieldName?t.fieldName.replace("adjusted_",""):t.fieldName,n.has(t.fieldName)){var a=h(e.fieldValue);t.fieldValue=a&&e.fp?(0,V.default)(a.format("LL")).diff((0,V.default)(e.fp.format("LL")),"d"):null}i.push(t)}),i.reduce(function(e,n){var i=e.findIndex(function(e){return a?e.countryName===n.countryName&&e.regionName===n.regionName&&e.overrideId===n.overrideId&&e.cohortId===n.cohortId:e.countryName===n.countryName&&e.regionName===n.regionName&&e.overrideId===n.overrideId}),l=e;if(-1===i?(l.push((0,H.default)(n,["fieldName","fieldValue"])),i=l.length-1,l[i].values=[r({},n.fieldName,n.fieldValue)]):l[i].values.push(r({},n.fieldName,n.fieldValue)),!n.overrideId){var o=null;t.reduce(function(e,t){var a=t.countries.find(function(e){return e.name===n.countryName});return a&&(o=a.id),e},null),Object.assign(l[i],{countryPlatformId:o,regionName:n.regionName})}return l},[])}function N(e){var t=(0,Y.default)(e,"nerve_job_status");return t===ce.default.QUEUED||t===ce.default.RUNNING}function D(e,t,a,n){var l=n,o=Object.keys(a);return{cohorts:t.map(function(t){if(t.id!==e)return t;var n=t.countries.map(function(n){if(!o.includes(String(n.country_id)))return n;var s=a[n.country_id],u=s.reduce(function(e,t){return F({},e,r({},t.fieldName,t.newValue))},n);return s.forEach(function(a){var n=l.findIndex(function(t){return null!==u.override_id?t.overrideId===u.override_id&&t.fieldName===a.fieldName:t.cohortId===e&&t.countryName===u.country_name&&t.regionName===u.region_name&&t.fieldName===a.fieldName});if(n>-1){var r=l[n];l.splice(n,1),l=[].concat(i(l),[F({},r,{fieldValue:a.newValue})])}else l.push({overrideId:u.override_id,countryName:u.location,regionName:u.region,fieldName:a.fieldName,fieldValue:a.newValue,oldValue:a.oldValue,fp:t.fp,cohortId:e})}),u});return F({},t,{countries:n,state:F({},t.state,{isDirty:!0})})}),dataToSave:l}}function P(e,t,a,n){var l=n,o=Object.keys(a);return{countries:t.map(function(t){if(!o.includes(String(t.country_id)))return t;var n=a[t.country_id],s=n.reduce(function(e,t){return F({},e,r({},t.fieldName,t.newValue))},t);return n.forEach(function(t){var a=l.findIndex(function(e){return null!==s.override_id?e.overrideId===s.override_id&&e.fieldName===t.fieldName:e.countryName===s.country_name&&e.regionName===s.region_name&&e.fieldName===t.fieldName});if(a>-1){var n=l[a];l.splice(a,1),l=[].concat(i(l),[F({},n,{fieldValue:t.newValue})])}else l.push({overrideId:s.override_id,countryName:s.location,regionName:s.region,fieldName:t.fieldName,fieldValue:t.newValue,oldValue:t.oldValue,fp:e})}),s}),dataToSave:l}}function L(e,t,a,n,i){var l=i;return{cohorts:t.map(function(t){if(t.id!==e)return t;var i=!1,o=t.countries.map(function(e){if(!a.includes(e.country_id))return e;var t=l.filter(function(t){return t.overrideId===e.override_id&&t.fieldName===n});return l=(0,K.default)(l,t,function(e,t){return e.overrideId===t.overrideId&&e.fieldName===t.fieldName}),i||(i=l.some(function(t){return t.overrideId===e.override_id})),t.reduce(function(e,t){return F({},e,r({},t.fieldName,t.oldValue))},e)});return F({},t,{countries:o,state:F({},t.state,{isDirty:i})})}),dataToSave:l}}function M(e,t,a,n){return{ignoreGenericData:!(arguments.length>4&&void 0!==arguments[4])||arguments[4],fsiv:null,"25_si":null,"50_si":null,"90_si":null,fpfv:null,num_sites:"",overrideList:[],override_id:null,patient_allocation:"",randomisation_rate:"",curves:[[],[],[]],actual_overallocation:0,sas:"",screening_failure:null,region:t,regionHasSingleCountry:n,region_id:a,region_name:t,country_id:"Unspecified country"===e?e+"-"+t+"-"+t:e+"-"+a+"-"+t,location:e,country_name:e,adjusted_num_sites:null,adjusted_patient_allocation:null,adjusted_25_si:null,adjusted_50_si:null,adjusted_90_si:null,adjusted_fpfv:null,adjusted_fsiv:null,adjusted_randomisation_rate:null,adjusted_sas:null,adjusted_screening_failure:null,adjusted_invalids:[],unlock:[]}}function k(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=n?"adjusted_":"",l=["patient_allocation","patient_allocation_min","patient_allocation_max","num_sites","sas","25_si","50_si","90_si","fpfv","fsiv","screening_failure","randomisation_rate"],o={cohort_id:t.cohort_id,constraint:t.constraint,overrideList:t.overrideList,unlock:t.unlock,historical_reference_data_by_studies:t.historical_reference_data_by_studies,historical_reference_data_by_indication:t.historical_reference_data_by_indication};l.forEach(function(e){void 0!==t[e]&&(o[""+i+e]=t[e])});var s=Object.assign(a,o);return r&&(s[i+"fsiv"]&&(s[i+"fsiv"]=e.fp.clone().add(s[i+"fsiv"],"w")),s[i+"fpfv"]&&(s[i+"fpfv"]=e.fp.clone().add(s[i+"fpfv"],"w")),s[i+"25_si"]&&(s[i+"25_si"]=e.fp.clone().add(s[i+"25_si"],"w")),s[i+"50_si"]&&(s[i+"50_si"]=e.fp.clone().add(s[i+"50_si"],"w")),s[i+"90_si"]&&(s[i+"90_si"]=e.fp.clone().add(s[i+"90_si"],"w"))),s}function x(e,t,a,n){if(!n)return!1;var r=le.FIELDS[e],i=t[a]&&t[a][r]||[],l=i.filter(function(e){return null!==e&&e>=0}).length>0;return"rollup"!==t.type&&!l}function j(e){return new Set(["japan","us","china"]).has(e.toLowerCase())}Object.defineProperty(t,"__esModule",{value:!0}),t.createUnspecifiedCountry=void 0;var F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.getDurationInWeeks=l,t.formatDate=o,t.prepareToStudyEditFormat=s,t.prepareForComparison=u,t.getMomentDate=d,t.getCurveName=c,t.prepareCountriesEvents=f,t.prepareScenarioObject=p,t.prepareCountryActualData=v,t.prepareScenarioCountriesObject=m,t.getParamShift=_,t.getParameterUncertainty=E,t.getScenarioCalculatedData=g,t.isEditableScenario=y,t.mergeLocations=S,t.changeRegionsCountries=b,t.updateInitialRegionsCountries=C,t.updateRegionsCountries=O,t.prepareLocationsData=T,t.prepareCohortLocations=R,t.prepareCohortsData=A,t.getDateFields=I,t.prepareDataToSaveOverrides=w,t.isOptimizing=N,t.updateCohortCountriesData=D,t.updateCountriesData=P,t.revertCohortCountriesData=L,t.getNewCountryObject=M,t.mergeCountryParameters=k,t.isCellDimmed=x,t.isSingleCountry=j;var U=a(11),V=n(U),B=a(81),H=n(B),G=a(12),Y=n(G),z=a(40),W=n(z),q=a(641),K=n(q),X=a(644),Z=n(X),J=a(645),Q=n(J),$=a(1791),ee=n($),te=a(1107),ae=n(te),ne=a(136),re=a(201),ie=a(334),le=a(85),oe=a(135),se=n(oe),ue=a(10),de=a(42),ce=n(de),fe=a(518),pe=n(fe),he=a(512),ve=n(he),me=a(1101),_e=n(me),Ee=(0,ae.default)(ne.calculateCurvesData),ge=t.createUnspecifiedCountry=function(e){return{id:"unspecifiedCountry_"+e,name:"Unspecified country",region_id:e,isSelectedAsRegion:!1,isSelected:!1}}},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROLLUP="ROLLUP",t.REGION="REGION",t.COUNTRY="COUNTRY",t.UNSPECIFIED_COUNTRY="Unspecified country",t.UNDO_HISTORY_LENGTH=11,t.SCENARIO_DATA_TYPE={ROLLUP:"rollup",REGION:"region",COUNTRY:"country"},t.SCENARIO_STATUS={APPROVED:"APPROVED",PREV_APPROVED:"PREV. APPROVED",OPEN:"OPEN"},t.SIDEBAR_BUTTONS={EVENT:"EVENT",DUPLICATE:"DUPLICATE",NOTES:"NOTES",COHORTS:"COHORTS",SAVE:"SAVE",EXPORT:"EXPORT",EDIT:"EDIT",OPTIMISE:"OPTIMISE",APPROVE:"APPROVE"},t.ENROLMENT_TABLE_FIELDS_LIST={PATIENT_ALLOCATION:"patient_allocation",PATIENT_ALLOCATION_MIN:"patient_allocation_min",PATIENT_ALLOCATION_MAX:"patient_allocation_max",NUM_SITES:"num_sites",SAS:"sas",SI_25:"25_si",SI_50:"50_si",SI_90:"90_si",RANDOMISATION_RATE:"randomisation_rate",SCREENING_FAILURE:"screening_failure",FPFV:"fpfv",FSIV:"fsiv",UNLOCK:"unlock"},t.ADJUSTED_COUNTRY_DATA_FIELDS=["adjusted_25_si","adjusted_50_si","adjusted_90_si","adjusted_events","adjusted_fpfv","adjusted_fpp_fpfv","adjusted_fpfv_lpfv","adjusted_fpfv_fpft","adjusted_fsiv","adjusted_num_sites","adjusted_patient_allocation","adjusted_patient_allocation_min","adjusted_patient_allocation_max","adjusted_randomisation_rate","adjusted_sas","adjusted_screening_failure","adjusted_unlock","adjusted_lpft","adjusted_curves","adjusted_fpft","adjusted_overallocatedData","cohort_id","constraint","country_id","country_name","id","adjusted_lockedFields","name","adjusted_overrideList","override_id","platform_country_id","region","regionHasSingleCountry","region_id","region_name","scenario_id","location","ignore_aggregation","actualTimeseriesSnapshot"],t.APPROVED_COUNTRY_DATA_FIELDS=["25_si","50_si","90_si","events","fpfv","fpp_fpfv","fpfv_lpfv","fpfv_fpft","fsiv","num_sites","patient_allocation","patient_allocation_min","patient_allocation_max","randomisation_rate","sas","screening_failure","unlock","lpft","curves","fpft","overallocatedData","cohort_id","constraint","country_id","country_name","id","lockedFields","name","overrideList","override_id","platform_country_id","region","regionHasSingleCountry","region_id","region_name","scenario_id","location"],t.COUNTRY_DATA_FIELDS=["25_si","50_si","90_si","events","fpfv","fpfv_fpft","fpfv_lpfv","fsiv","num_sites","patient_allocation","patient_allocation_min","patient_allocation_max","randomisation_rate","sas","screening_failure","unlock","lpft","overrideList"],t.SCENARIO_DASHBOARD_DATA_FIELDS=["fpfv_lpfv","num_sites","patient_allocation","lpft","overallocatedData"],t.SCENARIO_DASHBOARD_APPROVED_DATA_FIELDS=["fpfv_lpfv","num_sites","patient_allocation","lpft","fpfv","fpft","fpfv_fpft","lpfv","fsiv","overallocatedData","curves","type","actual_curves","actual_date","actual_f_lpft","actual_fsiv","actual_fpfv","actual_fpft","actual_lpfv"],t.COUNTRY_COMMON_FIELDS=["actualTimeseriesSnapshot","cohort_id","constraint","country_id","country_name","id","lockedFields","name","original_f_lpft","overrideList","override_id","platform_country_id","region","regionHasSingleCountry","region_id","region_name","scenario_id","ignoreGenericData","ignore_aggregation","onlyActuals","ignoreAdjustedData","country_sites_approval_status"],t.MULTI_EDIT_TYPE={EDIT:"edit",UNLOCK:"unlock"},t.WORKER_MESSAGE_TYPES={RESULT:"RESULT",ERROR:"ERROR",IN_PROGRESS:"IN_PROGRESS",COMPLETED:"COMPLETED"},t.SCENARIO_VIEWER={SET_FIELD_VALUE:"[SCENARIO VIEWER] SET_FIELD_VALUE",SET_VALUES:"SET_VALUES"},t.default="Global Rollup"},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GET_PLATFORM_STUDIES="GET_PLATFORM_STUDIES",t.IMPORT_PLATFORM_STUDY="IMPORT_PLATFORM_STUDY",t.GET_PLATFOTM_REGIONS="GET_PLATFOTM_REGIONS",t.GET_AVAILABLE_STUDIES="GET_AVAILABLE_STUDIES",t.GET_STUDY_OPTIONS="GET_STUDY_OPTIONS",t.GET_REGIONS_COUNTRIES="GET_REGIONS_COUNTRIES",t.GET_HISTORICAL_STUDIES="GET_HISTORICAL_STUDIES",t.TOGGLE_HISTORICAL_STUDY="TOGGLE_HISTORICAL_STUDY",t.SORT_HISTORICAL_DATA="SORT_HISTORICAL_DATA",t.FILTER_HISTORICAL_DATA="FILTER_HISTORICAL_DATA",t.APPLY_HISTORICAL_STUDIES_CHANGES="APPLY_HISTORICAL_STUDIES_CHANGES",t.CLEAR_HISTORICAL_DATA="CLEAR_HISTORICAL_DATA",t.GET_HISTORICAL_DATA="GET_HISTORICAL_DATA",t.GET_STUDY_DASHBOARD_DATA="GET_STUDY_DASHBOARD_DATA",t.UPDATE_STUDY_SCENARIO_FULL_DATA="UPDATE_STUDY_SCENARIO_FULL_DATA",t.ADD_STUDY_SCENARIO="ADD_STUDY_SCENARIO",t.GET_STUDIES="GET_STUDIES",t.GET_STUDY_BY_ID="GET_STUDY_BY_ID",t.CREATE_NEW_STUDY="CREATE_NEW_STUDY",t.DELETE_STUDY="DELETE_STUDY",t.CREATE_NEW_STUDY_AND_SCENARIO="CREATE_NEW_STUDY_AND_SCENARIO",t.UPDATE_STUDY_OWNER="UPDATE_STUDY_OWNER",t.UPDATE_STUDY="UPDATE_STUDY",t.GET_COUNTRY_SITES="GET_COUNTRY_SITES",t.GET_COUNTRY_SITE="GET_COUNTRY_SITE",t.SORT_SITES_DATA="SORT_SITES_DATA",t.GET_UNKNOWN_STUDIES="GET_UNKNOWN_STUDIES",t.GET_STUDY_SCENARIOS_LIST="GET_STUDY_SCENARIOS_LIST",t.STUDIES_SET_FILTER_VALUE="STUDIES_SET_FILTER_VALUE",t.STUDIES_SET_SORTING_ORDER="STUDIES_SET_SORTING_ORDER",t.STUDIES_COLLAPSE_SECTIONS="STUDIES_COLLAPSE_SECTIONS",t.GET_STUDY_SCENARIOS_TO_COMPARE="GET_STUDY_SCENARIOS_TO_COMPARE",t.GET_SCENARIO_VIEWER_DATA="GET_SCENARIO_VIEWER_DATA",t.FETCH_ACTUALS_DATA="FETCH_ACTUALS_DATA",t.FETCH_AGGREGATED_ACTUALS_DATA="FETCH_AGGREGATED_ACTUALS_DATA",t.ADD_SCENARIO_TO_CACHE="ADD_SCENARIO_TO_CACHE",t.CLEAR_SCENARIO_CACHE="CLEAR_SCENARIO_CACHE",t.ADD_SCENARIO="ADD_SCENARIO",t.REMOVE_SCENARIO="REMOVE_SCENARIO",t.GET_SCENARIO="GET_SCENARIO",t.GET_IMPACT_SCENARIO="GET_IMPACT_SCENARIO",t.UPDATE_SCENARIO="UPDATE_SCENARIO",t.OPTIMISE_SCENARIO="OPTIMISE_SCENARIO",t.ARCHIVE_SCENARIO="ARCHIVE_SCENARIO",t.UNARCHIVE_SCENARIO="UNARCHIVE_SCENARIO",t.REMOVE_SCENARIO_COUNTRY="REMOVE_SCENARIO_COUNTRY",t.SHARE_SCENARIO="SHARE_SCENARIO",t.EXPORT_SCENARIO_DATA="EXPORT_SCENARIO_DATA",t.UPDATE_SCENARIO_PREDICTIONS="UPDATE_SCENARIO_PREDICTIONS",t.ADD_COHORT_COUNTRY="ADD_COHORT_COUNTRY",t.DELETE_COHORT_COUNTRY="DELETE_COHORT_COUNTRY",t.CHANGE_COHORT_COUNTRY="CHANGE_COHORT_COUNTRY",t.CHANGE_COHORT_COUNTRIES="CHANGE_COHORT_COUNTRIES",t.CHANGE_ENABLE_SAVE_STATE="[SCENARIO VIEWER] CHANGE_ENABLE_SAVE_STATE",t.REVERT_COHORT_CONTRY="REVERT_COHORT_CONTRY",t.RESTORE_UNSAVED_DATA="RESTORE_UNSAVED_DATA",t.RESET_UNSAVED_DATA="RESET_UNSAVED_DATA",t.COPY_COUNTRY_DATA="COPY_COUNTRY_DATA",t.PASTE_COUNTRY_DATA="PASTE_COUNTRY_DATA",t.ADD_SCENARIO_NOTE="ADD_SCENARIO_NOTE",t.ADD_IMPACT_SCENARIO_NOTE="ADD_IMPACT_SCENARIO_NOTE",t.GET_SCENARIO_NOTES="GET_SCENARIO_NOTES",t.GET_IMPACT_SCENARIO_NOTES="GET_IMPACT_SCENARIO_NOTES",t.ADD_COUNTRY_SITES_NOTE="ADD_COUNTRY_SITES_NOTE",t.GET_SCENARIO_COUNTRY_NOTES="GET_SCENARIO_COUNTRY_NOTES",t.GET_SCENARIO_EVENTS="GET_SCENARIO_EVENTS",t.GET_SCENARIO_COHORT_EVENTS="GET_SCENARIO_COHORT_EVENTS",t.APPLY_SCENARIO_EVENTS_CHANGES="APPLY_SCENARIO_EVENTS_CHANGES",t.ADD_NEW_EVENT="ADD_NEW_EVENT",t.UPDATE_EVENT="UPDATE_EVENT",t.DUPLICATE_EVENT="DUPLICATE_EVENT",t.REMOVE_EVENT="REMOVE_EVENT",t.SORT_EVENTS="SORT_EVENTS",t.TOGGLE_GROUP_EVENTS_BY_TYPE="TOGGLE_GROUP_EVENTS_BY_TYPE",t.APPLY_DISABLE_EVENT="APPLY_DISABLE_EVENT",t.BATCH_OVERRIDE_FIELD_UPDATE="BATCH_OVERRIDE_FIELD_UPDATE",t.UNLOCK_COUNTRY="UNLOCK_COUNTRY",t.GET_PARAMETERS_BY_COUNTRY_SCENARIO="GET_PARAMETERS_BY_COUNTRY_SCENARIO",t.ADD_COUNTRY_TO_THE_REDUX_COUNTRY_LIST="ADD_COUNTRY_TO_THE_REDUX_COUNTRY_LIST",t.REMOVE_COUNTRY_FROM_THE_REDUX_COUNTRY_LIST="REMOVE_COUNTRY_FROM_THE_REDUX_COUNTRY_LIST",t.VALIDATE_STUDY_ID="VALIDATE_STUDY_ID",t.VALIDATE_SCENARIO_NAME="VALIDATE_SCENARIO_NAME",t.GET_AVAILABLE_USERS="GET_AVAILABLE_USERS",t.GET_COUNTRY_USERS="GET_COUNTRY_USERS",t.SET_COUNTRY_TO_USER="SET_COUNTRY_TO_USER",t.REMOVE_COUNTRY_FROM_USER="REMOVE_COUNTRY_FROM_USER",t.GET_USER_DETAILS="GET_USER_DETAILS",t.CLOSE_MISSING_INDICATOR_DIALOG="CLOSE_MISSING_INDICATOR_DIALOG",t.SCENARIO_JOB_STATUS_CHANGED="SCENARIO_JOB_STATUS_CHANGED",t.LOGIN="LOGIN",t.FORBIDDEN_ERROR="FORBIDDEN_ERROR",t.NOT_FOUND_ERROR="NOT_FOUND_ERROR",t.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",t.ODA_API_ERROR="ODA_API_APPROVE_ERROR",t.SESSION_EXPIRED="SESSION_EXPIRED",t.BAD_REQUEST="BAD_REQUEST",t.UPDATE_SCENARIO_JOB_STATUS="UPDATE_SCENARIO_JOB_STATUS",t.UPDATE_STUDY_SCENARIO_JOB_STATUS="UPDATE_STUDY_SCENARIO_JOB_STATUS",t.CHECK_JOB_STATUS="CHECK_JOB_STATUS",t.ROUTER_LOCATION_CHANGE="@@router/LOCATION_CHANGE",t.GET_APPLICATION_METADATA="GET_APPLICATION_METADATA",t.UNDO_LAST_ACTION="UNDO_LAST_ACTION",t.REDO_LAST_ACTION="REDO_LAST_ACTION",t.ADD_HISTORY_STEP="ADD_HISTORY_STEP",t.RESTORE_SCENARIO_DATA="RESTORE_SCENARIO_DATA",t.CONTEXT_HELP_PAGE_LIST="CONTEXT_HELP_PAGE_LIST",t.CONTEXT_HELP_PAGE="CONTEXT_HELP_PAGE",t.IS_SHOW_CONTEXT_HELP="IS_SHOW_CONTEXT_HELP",t.SHOW_NOTIFICATION="SHOW_NOTIFICATION",t.HIDE_NOTIFICATION="HIDE_NOTIFICATION",t.SUCCESS="SUCCESS",t.ERROR="ERROR",t.SET_SITES_FILTER="SET_SITES_FILTER",t.SET_STUDIES_FILTER="SET_STUDIES_FILTER",t.SET_METRICS_FILTER="SET_METRICS_FILTER",t.HANDLE_SITES_SORT="HANDLE_SITES_SORT",t.TOGGLE_TABLE_VIEW="TOGGLE_TABLE_VIEW",t.TOGGLE_INTERNAL_SITES_VIEW="TOGGLE_INTERNAL_SITES_VIEW",t.TOGGLE_EXTERNAL_SITES_VIEW="TOGGLE_EXTERNAL_SITES_VIEW",t.UPDATE_SITES="UPDATE_SITES",t.SITE_ACTION="SITE_ACTION",t.ADD_SITE_HISTORY_STEP="ADD_SITE_HISTORY_STEP",t.UNDO_SITE_ACTION="UNDO_SITE_ACTION",t.REDO_SITE_ACTION="REDO_SITE_ACTION",t.RESET_SITES="RESET_SITES",t.TOGGLE_INITIAL_SITES_SELECTION="TOGGLE_INITIAL_SITES_SELECTION",t.GET_EDITABLE_SITES_COUNTRIES="GET_EDITABLE_SITES_COUNTRIES",t.CHANGE_COUNTRY_SITES_STATUS="CHANGE_COUNTRY_SITES_STATUS",t.SET_SITE_METRICS_FILTER="SET_SITE_METRICS_FILTER",t.SET_SITE_MILESTONES_FILTER="SET_SITE_MILESTONES_FILTER",t.GET_COUNTRY_MANAGER="GET_COUNTRY_MANAGER",t.GET_CSMS="GET_CSMS",t.GET_CSM_SCENARIOS="GET_CSM_SCENARIOS",t.CSM_USER_SELECT="CSM_USER_SELECT",t.SITE_EDIT_REASON="SITE_EDIT_REASON",t.EXPORT_COUNTRY_SITES_SELECTION="[SITES] EXPORT_COUNTRY_SITES_SELECTION",t.TOGGLE_RAW_TABLE_VIEW_STATE="[SITES] TOGGLE_RAW_TABLE_VIEW_STATE",t.TOGGLE_OTHER_TABLE_VIEW_STATE="[SITES] TOGGLE_OTHER_TABLE_VIEW_STATE",t.TOGGLE_EXTERNAL_TABLE_VIEW_STATE="[SITES] TOGGLE_EXTERNAL_TABLE_VIEW_STATE",t.TOGGLE_SELECTED_TABLE_VIEW_STATE="[SITES] TOGGLE_SELECTED_TABLE_VIEW_STATE",t.SEARCH_SITES_VALUE_ACTION="[SITES] SEARCH_SITES_VALUE_ACTION",t.SET_ACTIVE_SITES_PAGE="[SITES] SET_ACTIVE_SITES_PAGE",t.SET_ACTIVE_PAGES="[SITES] SET_ACTIVE_PAGES",t.SEARCH_FOR_SITES="[SITES] SEARCH_FOR_SITES",t.ADD_SELECTED_SITE="[SITES] ADD_SELECTED_SITE",t.SCENARIO_SITE_SELECTION_STATUS="SCENARIO_SITE_SELECTION_STATUS",t.GET_SITES_HEALTH="[SITES] GET_SITES_HEALTH"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(192),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CellGroup=t.textSortTable=t.SortTypes=t.SortHeaderCell=t.Row=t.Cell=t.Column=t.FlexTable=void 0;var r=a(924),i=n(r),l=a(489),o=n(l),s=a(314),u=n(s),d=a(490),c=n(d),f=a(488),p=n(f),h=a(926),v=n(h);t.default=i.default,t.FlexTable=i.default,t.Column=o.default,t.Cell=u.default,t.Row=c.default,t.SortHeaderCell=v.default,t.SortTypes=h.SortTypes,t.textSortTable=h.textSortTable,t.CellGroup=p.default},,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Gutter=t.Grid=t.Row=t.Col=void 0,a(2156);var r=a(842),i=n(r),l=a(844),o=n(l),s=a(845),u=n(s),d=a(843),c=n(d);t.Col=i.default,t.Row=o.default,t.Grid=u.default,t.Gutter=c.default,t.default=u.default},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ACTIVE:"ACTIVE",PLANNED:"PLANNED"};t.DATE_FORMAT="DD MMM YYYY",t.PHASE=[{id:1,name:"I"},{id:2,name:"II"},{id:3,name:"III"},{id:4,name:"IV"}],t.STUDY_PARAMS=["fp","target_lpft","therapeutic_area","indication","phase","target_num_patients","fpfv_fpft"],t.STUDY_FILTERS=["inclusion","exclusion"],t.default=n},,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(498),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=(0,o.useParams)(),t=e.id,a=e.scenarioId,n=e.countryId,r=e.siteId;return(0,s.useMemo)(function(){return{match:{params:{id:t,scenarioId:a,countryId:n,siteId:r}}}},[t,a,n,r])}function i(e,t){var a=(0,s.useState)((0,p.getLocalStorageItem)(e,t)),n=l(a,2),r=n[0],i=n[1];return[r,function(t){try{var a=t instanceof Function?t(r):t;i(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(e){console.log(e)}}]}Object.defineProperty(t,"__esModule",{value:!0}),t.getRouteMatch=void 0;var l=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=r,t.useLocalStorage=i;var o=a(16),s=a(0),u=a(129),d=n(u),c=a(45),f=n(c),p=a(35),h=function(e,t,a,n){return{match:{params:{id:e,scenarioId:t,countryId:a,siteId:n}}}},v=(0,d.default)(h,f.default);t.getRouteMatch=function(e){var t=e.match.params,a=t.id,n=t.scenarioId,r=t.countryId,i=t.siteId;return v(a,n,r,i)}},,function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return function(t){t((0,R.fetchApi)(N.GET_STUDIES,I.GET_STUDIES,"GET",null,{signal:e})).catch(function(e){return e})}}function i(e){return function(t){t((0,R.fetchApi)(N.CREATE_STUDY,I.CREATE_NEW_STUDY,"POST",e)).then(function(){return t((0,O.push)("/studies"))}).catch(function(e){return e})}}function l(e){var t=(0,D.getMomentDate)(e.scenario.fp),a=(0,D.getMomentDate)(e.scenario.end_date),n=C({},e,{scenario:C({},e.scenario,{fp:t.startOf("day").add(t.utcOffset()/60,"hours").utc(),end_date:a.startOf("day").add(a.utcOffset()/60,"hours").utc()})});return function(t){return t((0,R.fetchApi)(N.CREATE_STUDY_AND_SCENARIO,I.CREATE_NEW_STUDY_AND_SCENARIO,"POST",n)).then(function(a){return t((0,O.push)("/studies/"+a.studyId+"/scenarios/"+a.scenarioId+(e.scenario.cohorts?"/cohorts":"")))})}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments[2];return function(n){var r=t&&{archived:!0};return n((0,R.fetchApi)(N.STUDY_BY_ID.replace(/:id/,e),{type:I.GET_STUDY_BY_ID,isArchivedScenarios:t},"GET",r,{signal:a})).catch(function(e){return e})}}function s(e,t){return function(a){a((0,R.fetchApi)(N.PLAIN_STUDY_BY_ID.replace(/:id/,e),I.GET_STUDY_BY_ID,"GET",null,{signal:t})).catch(function(e){return e})}}function u(e){return function(t){t((0,R.fetchApi)(N.STUDY_BY_ID.replace(/:id/,e),I.GET_STUDY_BY_ID)).then(function(a){var n=a.scenarios[0].id;t((0,O.push)("/studies/"+e+"/scenarios/"+n))}).catch(function(e){return e})}}function d(e,t){var a={};return t.forEach(function(e,t){a["id_"+t]=e}),function(t){t((0,R.fetchApi)(N.GET_STUDY_SCENARIOS.replace(/:studyId/,e),I.GET_STUDY_SCENARIOS_TO_COMPARE,"GET",a)).catch(function(e){return e})}}function c(e){return function(t){return t((0,R.fetchApi)(N.DELETE_STUDY.replace(/:id/,e),{type:I.DELETE_STUDY,id:e},"DELETE"))}}function f(e,t,a){return t((0,R.fetchApi)(N.VALIDATE_STUDY_UNIQUE,I.VALIDATE_STUDY_ID,"POST",{study_id:e.study_id,id:a.study.id})).then(function(e){"valid"!==e.result&&setTimeout(function(){t((0,T.stopAsyncValidation)(a.form,e))},0)}).catch(function(e){return e})}function p(e,t,a){return{type:I.UPDATE_STUDY_SCENARIO_JOB_STATUS,scenarioId:e,studyId:t,jobStatus:a}}function h(e,t){return function(a){return a((0,R.fetchApi)(N.UPDATE_STUDY.replace(/:id/,e),{type:I.UPDATE_STUDY,studyId:e},"PUT",{study:t}))}}function v(){return function(e){return e({type:I.CLOSE_MISSING_INDICATOR_DIALOG})}}function m(e){return{type:I.STUDIES_SET_FILTER_VALUE,filterValue:e}}function _(e){return{type:I.STUDIES_COLLAPSE_SECTIONS,section:e}}function E(e,t){return{type:I.STUDIES_SET_SORTING_ORDER,section:e,column:t}}function g(e){return function(t){return t((0,R.fetchApi)(""+N.ALIGN_STUDY_PARAMS_WITH_IMPACT.replace(/:studyId/,e),{type:I.UPDATE_STUDY,studyId:e},"PUT"))}}function y(){return function(e){return e((0,R.fetchApi)(N.UNKNOWN_STUDIES,{type:I.GET_UNKNOWN_STUDIES}))}}function S(e,t,a){return{type:I.GET_STUDY_DASHBOARD_DATA,studyId:e,isArchived:t,forceUpdate:a}}function b(e){return function(t){return t((0,R.fetchApi)(""+N.STUDY_SCENARIOS_LIST.replace(/:studyId/,e),{type:I.GET_STUDY_SCENARIOS_LIST,studyId:e}))}}Object.defineProperty(t,"__esModule",{value:!0});var C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.getStudies=r,t.createNewStudy=i,t.createNewStudyAndScenario=l,t.getStudy=o,t.getPlainStudy=s,t.getStudyAndRedirect=u,t.getStudyScenariosToCompare=d,t.deleteStudy=c,t.validateStudyName=f,t.updateStudyScenarioJobStatus=p,t.updateStudy=h,t.closeMissingIndicationError=v,t.setFilterValue=m,t.setCollapsedSection=_,t.setSortingOrder=E,t.alignStudyParamsWithImpact=g,t.getUnknownStudies=y,t.getStudyDashboardData=S,t.getStudyScenariosList=b;var O=a(19),T=a(71),R=a(48),A=a(13),I=n(A),w=a(50),N=n(w),D=a(8)},,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(Object.prototype.hasOwnProperty.call(e,"ownStudyConstraints"))return Z({},e,{study:{}});var a=["target_num_patients","target_lpft"],n=void 0;return t?(a.push("fp"),n=(0,Q.default)(e,"end_date")):n=(0,Q.default)(e,"fp","end_date"),e.end_date&&(n.target_lpft=e.end_date.startOf("day").add(e.end_date.utcOffset()/60,"hours").utc()),Z({},(0,Q.default)(n,a),{study:(0,ee.default)(n,a)})}function i(e,t,a){return function(n){return n((0,le.fetchApi)(se.CREATE_NEW_SCENARIO.replace(":studyId",e.id),ie.ADD_SCENARIO,"POST",r(t,a))).then(function(a){return n((0,ne.push)("/studies/"+e.id+"/scenarios/"+a.id+(t.cohorts?"/cohorts":"")))})}}function l(e,t,a,n,r,i){return function(l){return l((0,le.fetchApi)(se.DUPLICATE_SCENARIO.replace(/:scenarioId/,e),{type:ie.ADD_SCENARIO,refreshScenarioCache:!0,meta:{notification:{trigger:ie.SUCCESS,message:"Successfully duplicated scenario"}}},"POST",{newName:t,targetStudyId:a,recalculateWithActualParams:n,confirmActualStudyParams:r,exactAdjustedCopy:i}))}}function o(e,t,a,n,r){return function(i){var l=a?{scenarioName:t,cohortsOffset:a,recalculateWithActualParams:n,confirmActualStudyParams:r}:{scenarioName:t,recalculateWithActualParams:n,confirmActualStudyParams:r};return i((0,le.fetchApi)(se.CREATE_ADJUSTMENT_SCENARIO.replace(/:scenarioId/,e),{type:ie.ADD_SCENARIO,meta:{notification:{trigger:ie.SUCCESS,message:"Successfully created adjusted scenario"}}},"POST",l))}}function s(e,t){return function(a){return a((0,le.fetchApi)(se.DUPLICATE_IMPACT_SCENARIO.replace(/:studyId/,e),ie.ADD_SCENARIO,"POST",t))}}function u(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments[3];return function(r){var i=a&&{simplified:!0};return r((0,le.fetchApi)(""+se.GET_SCENARIO.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:ie.GET_SCENARIO,studyId:e,scenarioId:t},"GET",i,{signal:n})).catch(function(e){return e})}}function d(e){return{type:ie.RESTORE_UNSAVED_DATA,payload:e}}function c(){return{type:ie.RESET_UNSAVED_DATA}}function f(e,t){return function(a){return a((0,le.fetchApi)(se.GET_IMPACT_SCENARIO.replace(/:id/,e),{type:ie.GET_IMPACT_SCENARIO,studyId:e},"GET",null,{signal:t})).catch(function(e){return e})}}function p(e){return function(t){return t((0,le.fetchApi)(se.GET_SCENARIO_WITH_LOCATIONS.replace(/:id/,e),{type:ie.GET_SCENARIO,scenarioId:e})).catch(function(e){return e})}}function h(e,t){return function(a){return a((0,le.fetchApi)(""+se.SCENARIO_COUNTRY.replace(/:id/,e),{type:ie.REMOVE_SCENARIO_COUNTRY,scenarioId:e,countryIds:t},"DELETE",{countryIds:t}))}}function v(e,t,a,n,r){return function(i,l){var o=(0,ae.default)(l(),"scenarios["+a+"]",[]),s=(0,ae.default)(o,"name","");return i((0,le.fetchApi)(se.SAVE_PLAYGROUND.replace(/:id/,a),{type:ie.BATCH_OVERRIDE_FIELD_UPDATE,studyId:t,scenarioId:a,refreshSitesData:n,meta:{notification:{trigger:ie.SUCCESS,message:'Successfully saved data for scenario "'+s+'"'}}},"PUT",{overridesList:e,predictedValues:r}))}}function m(e,t,a,n){return function(r,i){var l=(0,ae.default)(i(),"scenarios["+a+"]",[]),o=(0,ae.default)(l,"name","");return r((0,le.fetchApi)(se.SAVE_COHORT.replace(/:scenarioId/,a).replace(/:cohortId/,n),{type:ie.BATCH_OVERRIDE_FIELD_UPDATE,studyId:t,scenarioId:a,meta:{notification:{trigger:ie.SUCCESS,message:'Successfully saved data for scenario "'+o+'"'}}},"PUT",{overridesList:e}))}}function _(e,t,a){return function(n){return n((0,le.fetchApi)(se.COHORT_COUNTRY.replace(/:scenarioId/,e).replace(/:cohortId/,t),{type:ie.REMOVE_SCENARIO_COUNTRY,scenarioId:e,countryIds:a},"DELETE",{countryIds:a}))}}function E(e,t,a){return function(n){return n((0,le.fetchApi)(""+se.UPDATE_SCENARIO.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:ie.UPDATE_SCENARIO,studyId:e,scenarioId:t},"PUT",r(a)))}}function g(e,t,a,n){return function(r,i){var l=(0,ae.default)(i(),"scenarios["+t+"]",{}),o=(0,ae.default)(l,"name","");return r((0,le.fetchApi)(se.APPROVE_SCENARIO.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:ie.UPDATE_SCENARIO,studyId:e,scenarioId:t,clearScenarioCache:!0,refreshScenarioCache:!0,meta:{notification:{trigger:ie.SUCCESS,message:'Successfully approved scenario "'+o+'"'}}},"PUT",{approvedData:a,predictedValues:n}))}}function y(e,t,a){return function(n){return n((0,le.fetchApi)(se.CREATE_APPROVED_SCENARIO_SNAPSHOT.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:ie.UPDATE_SCENARIO,studyId:e,scenarioId:t,refreshScenarioCache:!0},"PUT",{approvedData:a}))}}function S(e){return function(t){return t((0,le.fetchApi)(se.OPTIMISE_SCENARIO.replace(/:scenarioId/,e),{type:ie.OPTIMISE_SCENARIO,scenarioId:e},"POST"))}}function b(e,t){return function(a,n){var r=(0,ae.default)(n(),"study["+e+"].scenarios",[]),i=(0,ae.default)(r.find(function(e){return e.id===t}),"name","");return a((0,le.fetchApi)(se.ARCHIVE_SCENARIO.replace(/:scenarioId/,t),{type:ie.ARCHIVE_SCENARIO,studyId:e,scenarioId:t,meta:{notification:{trigger:ie.SUCCESS,message:'Successfully archived scenario "'+i+'"'}}},"POST",{is_archived:!0}))}}function C(e,t){return function(a,n){var r=(0,ae.default)(n(),"study["+e+"].scenarios",[]),i=(0,ae.default)(r.find(function(e){return e.id===t}),"name","");return a((0,le.fetchApi)(se.ARCHIVE_SCENARIO.replace(/:scenarioId/,t),{type:ie.UNARCHIVE_SCENARIO,studyId:e,scenarioId:t,meta:{notification:{trigger:ie.SUCCESS,message:'Successfully unarchived scenario "'+i+'"'}}},"DELETE",{is_archived:!1}))}}function O(e,t,a,n){return function(r){return r((0,le.fetchApi)(se.GET_PARAMETERS_BY_COUNTRY_SCENARIO.replace(/:studyId/,e).replace(/:scenarioId/,t).replace(/:countryId/,a).replace(/:regionName/,n),{type:ie.GET_PARAMETERS_BY_COUNTRY_SCENARIO,scenarioId:t,countryId:a},"GET"))}}function T(e,t,a,n){return function(r){return r((0,le.fetchApi)(se.GET_PARAMETERS_BY_COUNTRY_COHORT.replace(/:studyId/,e).replace(/:cohortId/,t).replace(/:countryId/,a).replace(/:regionName/,n),{type:ie.GET_PARAMETERS_BY_COUNTRY_SCENARIO,cohortId:t,countryId:a},"GET"))}}function R(e,t){return{type:ie.ADD_COUNTRY_TO_THE_REDUX_COUNTRY_LIST,scenarioId:e,country:t}}function A(e,t,a,n){return function(r){return r((0,le.fetchApi)(se.SHARE_SCENARIO.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:ie.SHARE_SCENARIO,studyId:e,scenarioId:t,meta:{notification:{trigger:ie.SUCCESS,message:"Scenario was successfully "+(n?"unshared":"shared")}}},"POST",{sharedWith:a,unshare:n}))}}function I(e,t,a){return{type:ie.REMOVE_COUNTRY_FROM_THE_REDUX_COUNTRY_LIST,scenarioId:e,country:a,regionId:t}}function w(e,t,a){return{type:ie.UPDATE_SCENARIO_JOB_STATUS,scenarioId:e,studyId:t,jobStatus:a}}function N(e,t){return function(a){return a((0,le.fetchApi)(se.UPDATE_STUDY_OWNER.replace(/:studyId/,e),{type:ie.UPDATE_STUDY_OWNER,studyId:e,newOwnerId:t,forceUpdate:!0,meta:{notification:{trigger:ie.SUCCESS,message:"Study owner was changed successfully"}}},"PUT",{newOwnerId:t}))}}function D(e,t,a,n){return{type:ie.CHANGE_COHORT_COUNTRY,scenarioId:e,cohortId:t,countryId:a,payload:n}}function P(e,t,a){return{type:ie.CHANGE_COHORT_COUNTRIES,scenarioId:e,cohortId:t,payload:a}}function L(e,t,a,n){return{type:ie.REVERT_COHORT_CONTRY,scenarioId:e,cohortId:t,countryId:a,fieldName:n}}function M(e,t,a){return{type:ie.ADD_COHORT_COUNTRY,scenarioId:e,cohortId:t,payload:a}}function k(e,t,a){return{type:ie.DELETE_COHORT_COUNTRY,scenarioId:e,cohortId:t,payload:a}}function x(e){return{type:ie.CHANGE_ENABLE_SAVE_STATE,payload:e}}function j(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{type:ie.GET_SCENARIO_VIEWER_DATA,studyId:e,scenarioId:t,allConstraints:a,clearScenarioCache:n}}function F(e,t){return{type:ie.GET_SCENARIO_VIEWER_DATA,studyId:e,scenarioId:t,fetchFullStudyData:!0}}function U(e,t){return{type:ie.EXPORT_SCENARIO_DATA,studyId:e,scenarioId:t}}function V(e){return{type:ie.UNDO_LAST_ACTION,scenarioId:e}}function B(e){return{type:ie.REDO_LAST_ACTION,scenarioId:e}}function H(e){return{type:ie.RESTORE_SCENARIO_DATA,payload:e}}function G(e,t,a){return{type:ie.COPY_COUNTRY_DATA,scenarioId:e,cohortId:t,countryId:a}}function Y(e,t,a){return{type:ie.PASTE_COUNTRY_DATA,scenarioId:e,cohortId:t,countryId:a}}function z(e,t,a,n){return function(r){return r((0,le.fetchApi)(""+se.CONFIRM_ACTUAL_STUDY_PARAMS.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:a?"":ie.UPDATE_SCENARIO,studyId:e,scenarioId:t},"PUT",n))}}function W(e,t){return function(a,n){var r=(0,ae.default)(n(),"study["+e+"].scenarios",[]),i=(0,ae.default)(r.find(function(e){return e.id===t}),"name");return a((0,le.fetchApi)(""+se.REMOVE_SCENARIO.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:ie.REMOVE_SCENARIO,studyId:e,scenarioId:t,meta:{notification:{trigger:ie.SUCCESS,message:'Successfully deleted scenario "'+i+'"'}}},"DELETE"))}}function q(e,t){return function(a){return a((0,le.fetchApi)(""+se.VALIDATE_SCENARIO_UNIQUE.replace(/:studyId/,e),{type:ie.VALIDATE_SCENARIO_NAME},"POST",{newName:t})).catch(function(e){return e})}}function K(e,t,a){return a.isNewStudy?new Promise(function(){}):t((0,le.fetchApi)(""+se.VALIDATE_SCENARIO_UNIQUE.replace(/:studyId/,a.studyNumId),{type:ie.VALIDATE_SCENARIO_NAME},"POST",{newName:e.name})).then(function(e){e.value&&setTimeout(function(){t((0,re.stopAsyncValidation)(a.form,{name:"Please enter a unique scenario ID"}))},0)}).catch(function(e){return e})}function X(e,t,a){return function(n){return n((0,le.fetchApi)(""+se.UPDATE_SCENARIO_PREDICTIONS.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:ie.UPDATE_SCENARIO_PREDICTIONS},"PUT",Z({},a))).catch(function(e){return e})}}Object.defineProperty(t,"__esModule",{value:!0});var Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=i,t.duplicateScenario=l,t.createAdjustmentScenario=o,t.duplicateImpactScenario=s,t.getScenario=u,t.restoreUnsavedData=d,t.resetUnsavedData=c,t.getImpactScenario=f,t.getScenarioWithLocations=p,t.removeScenarioCountry=h,t.saveOverrides=v,t.saveCohortOverrides=m,t.removeCohortCountry=_,t.updateScenario=E,t.approveScenario=g,t.createApprovedSnapshot=y,t.optimiseScenario=S,t.archiveScenario=b,t.unarchiveScenario=C,t.getParametersByScenarioAndCountry=O,t.getParametersByCohortAndCountry=T,t.addCountryToTheCountryList=R,t.shareScenario=A,t.removeCountryFromCountriesList=I,t.updateScenarioJobStatus=w,t.setNewStudyOwner=N,t.changeCohortCountryData=D,t.changeCohortCountriesData=P,t.revertCohortCountryData=L,t.addCohortCountry=M,t.deleteCohortCountry=k,t.changeCohortEnableSave=x,t.getScenarioViewerData=j,t.getScenarioViewerDataWithFullStudy=F,t.exportScenarioData=U,t.undoLastAction=V,t.redoLastAction=B,t.restoreScenarioData=H,t.onCopy=G,t.onPaste=Y,t.confirmActualStudyParams=z,t.removeScenario=W,t.validateScenarioNameOnEdit=q,t.validateScenarioNameOnCreate=K,t.updateScenarioPredictions=X;var J=a(81),Q=n(J),$=a(54),ee=n($),te=a(12),ae=n(te),ne=a(19),re=a(71),ie=a(13),le=a(48),oe=a(50),se=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(oe)},function(e,t,a){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ASC",a="ASC"===t;return function(t,n){return t[e]<n[e]?a?-1:1:t[e]>n[e]?a?1:-1:0}}function r(e){return e>999?(e/1e3).toFixed(1)+"k":e}function i(e){return 0===["/compare","/new","/edit","/historical","/events"].filter(function(t){return-1!==e.indexOf(t)}).length}function l(){var e=!1;try{if(Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject)return!1;var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(t){return e}return e}function o(e){return"number"==typeof e}function s(e){var t=function(e){return e.split("").map(function(e){return e+String.fromCharCode(173)}).join("")};return Array.isArray(e)?e.map(function(e){return"string"==typeof e?t(e):e}):t(e)}function u(e,t,a){var n=void 0;switch(e){case"MINI_CHART":n=d.STICKY_PARAMS.miniChartPosition;break;case"TABLE_CONTROL":n=d.STICKY_PARAMS.historicalBenchmarkPosition;break;case"TABLE":n=d.STICKY_PARAMS.tableHeaderPosition;break;case"FILTER":n=d.STICKY_PARAMS.locationsFilterPosition;break;case"ALERTS":n=d.STICKY_PARAMS.alertsPosition;break;default:n=0}return t&&(n+=d.STICKY_PARAMS.alertsHeight),a&&(n-=d.STICKY_PARAMS.miniChartHeight),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,t.kFormatter=r,t.isDisplayBrand=i,t.isSupportPassive=l,t.isNumber=o,t.skypeToCallPrevent=s,t.getStickyPosition=u;var d=a(1068)},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=t.saveState=t.loadState=t.removeParamItemStorage=t.setParamItemStorage=t.deleteLocalStorageItem=t.setLocalStorageItem=t.getLocalStorageItem=t.getParamItemStorage=t.addToStorage=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(96),l=function(e){return null===localStorage.getItem(e)};t.addToStorage=function(e,t){if(l(e))localStorage.setItem(e,JSON.stringify([t]));else{var a=JSON.parse(localStorage.getItem(e));a.map(function(e){return e.id}).includes(t.id)||localStorage.setItem(e,JSON.stringify(a.concat(t)))}return JSON.parse(localStorage.getItem(e))},t.getParamItemStorage=function(e,t,a){var n=null;return l(e)||JSON.parse(localStorage.getItem(e)).forEach(function(e){e.id===t&&(n=e[a])}),n},t.getLocalStorageItem=function(e,t){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(e){return console.log(e),t}},t.setLocalStorageItem=function(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(e){console.log(e)}},t.deleteLocalStorageItem=function(e){try{window.localStorage.removeItem(e)}catch(e){console.log(e)}},t.setParamItemStorage=function(e,t,a,i){if(!l(e)){var o=JSON.parse(localStorage.getItem(e)).map(function(e){return e.id===t?r({},e,n({},a,i)):e});return localStorage.setItem(e,JSON.stringify(o)),o}return null},t.removeParamItemStorage=function(e,t){if(!l(e)){var a=JSON.parse(localStorage.getItem(e)).filter(function(e){return e.id!==t});return localStorage.setItem(e,JSON.stringify(a)),a}return null},t.loadState=function(e){try{var t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t,i.dateDeserializer)}catch(e){return void console.log(e)}},t.saveState=function(e,t){try{var a=JSON.stringify(t);localStorage.setItem(e,a)}catch(e){console.log(e)}},t.resetState=function(e){try{localStorage.removeItem(e)}catch(e){console.log(e)}}},,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionButton=t.PopupDialog=void 0;var r=a(922),i=n(r),l=a(487),o=n(l);t.default=i.default,t.PopupDialog=i.default,t.ActionButton=o.default},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={RUNNING:"running",QUEUED:"queued",FAILED:"failed",FINISHED:"finished"};t.default=n},,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ContextHelpButton=void 0;var r=a(795),i=n(r),l=a(794),o=n(l);t.ContextHelpButton=o.default,t.default=i.default},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCENARIO_EVENT_TYPES={SCREENING_RANDOMIZATION_PAUSE_BY_DATE:"SCREENING_RANDOMIZATION_PAUSE_BY_DATE",SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS:"SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS",SCREENING_RATE_BY_DATE:"SCREENING_RATE_BY_DATE",SCREENING_FAILURE_BY_DATE:"SCREENING_FAILURE_BY_DATE"},t.EVENT_STATE={NEW:"NEW",UPDATED:"UPDATED",DELETED:"DELETED"},t.OPERATION_TYPE={DECREASE_BY:"DECREASE_BY",INCREASE_BY:"INCREASE_BY"},t.EVENT_STATUS={ACTIVE:"ACTIVE",PENDING:"PENDING",COMPLETED:"COMPLETED"}},,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t,a,n,i){var l=e,s={method:t||"GET"},d=a?Object.assign({},a):{};return d.req_timestamp=(new Date).getTime(),"GET"===s.method?(l=Object.keys(d).reduce(function(e,t){return Object.prototype.hasOwnProperty.call(d,t)?""+e+t+"="+encodeURIComponent(d[t])+"&":e},l+"?"),l=l.substring(0,l.length-1),s.headers={Accept:"application/json","Content-Type":"application/json"}):d instanceof FormData?s={method:"post",body:d}:(s.body=JSON.stringify(d),s.headers={Accept:"application/json","Content-Type":"application/json"}),i&&(s=o({},s,i)),n&&(s.headers=o({},s.headers,r({},"OAM_REMOTE_USER",n))),s.credentials="same-origin",fetch(l,s).then(function(e){var t=e.headers.get("Content-Type");if(e.ok&&200===e.status)return/text\/plain/.test(t)?e.text():/application\/json/.test(t)?e.json():e.body;var a={status:e.status||500,message:e.statusText,statusText:e.statusText,response:e};return/application\/json/.test(t)?e.json().then(function(t){return a.message=t.message||e.statusText,Promise.resolve({response:o({},t,{statusText:e.statusText}),error:a})}):Promise.reject(a)}).then(function(e){if(e.error){var t={status:e.error.status,statusText:e.error.statusText,message:e.error.message,response:e.response};return Promise.reject(t)}return(0,u.default)(e)?e:{value:e}}).catch(function(e){if(void 0===e.status&&e.name&&"AbortError"!==e.name)return Promise.reject({status:302,message:"",statusText:""});var t=e;return e.status&&5===e.status.toString()[0]&&(t.message="Sorry, server is unavailable. Please, try again later"),Promise.reject(t)})}function l(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n=arguments[3],r=arguments[4],l={};return"string"==typeof t?l.type=t:l=o({},t),function(t,s){t(o({},l,{type:"REQUEST_"+l.type}));var u=s(),p=u.auth&&u.auth.user&&u.auth.user.id;return i(e,a,n,p,r).then(function(e){return t(o({},l,{type:"SUCCESS_"+l.type,payload:e})),e},function(e){return 401===e.status?(t((0,d.SignOut)()),t((0,c.default)())):500===e.status?t((0,f.internalServerError)("Internal Server Error!")):404===e.status?t((0,f.notFoundError)(e.message||"Not Found Error")):403===e.status?t((0,f.forbiddenError)(e.message||"Forbidden Error")):503===e.status?t((0,f.ODAError)(e.message||"ODA API Server Error")):302===e.status?t((0,f.sessionExpired)()):400===e.status&&t((0,f.badRequestError)(e.message||"Request error")),t(o({},l,{type:"ERROR_"+l.type,payload:e})),Promise.reject(e)})}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.fetchApiNative=i,t.fetchApi=l,a(2302),a(760);var s=a(1790),u=n(s),d=a(460),c=n(d),f=a(131)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CellGroup=t.textSortTable=t.SortTypes=t.SortHeaderCell=t.Row=t.Cell=t.Column=void 0;var r=a(840),i=n(r),l=a(839),o=n(l),s=a(235),u=n(s),d=a(477),c=n(d),f=a(838),p=n(f),h=a(841),v=n(h);t.default=i.default,t.Column=o.default,t.Cell=u.default,t.Row=c.default,t.SortHeaderCell=v.default,t.SortTypes=h.SortTypes,t.textSortTable=h.textSortTable,t.CellGroup=p.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return"/api/v1"+e};t.AUTO_LOGIN_STATUS=n("/autologin"),t.PLATFORM_STUDIES=n("/platform/studies"),t.CHECK_UPDATES=n("/studies/checkJobStatus"),t.PLATFORM_STUDIES_IMPORT=n("/platform/studies/import"),t.PLATFORM_REGIONS=n("/platform/regions"),t.HISTORICAL_STUDIES=n("/historical/:studyId"),t.HISTORICAL_DATA=n("/historical/:studyId/data"),t.COUNTRY_SITES=n("/studies/:studyId/scenarios/:scenarioId/sites/byCountry/:countryId"),t.SEARCH_FOR_SITES=n("/studies/:studyId/scenarios/:scenarioId/sites/:countryId/search"),t.UPDATE_COUNTRIES_SITES=n("/studies/:studyId/scenarios/:scenarioId/sites"),t.COUNTRY_SITE=n("/studies/:studyId/scenarios/:scenarioId/sites/:siteId"),t.GET_EDITABLE_SITES_COUNTRIES=n("/studies/:studyId/scenarios/:scenarioId/editable-countries"),t.COUNTRY_MANAGER=n("/studies/:studyId/scenarios/:scenarioId/country/:countryId/country-site-manager"),t.CSMS=n("/studies/:studyId/csms"),t.SITE_EDIT_REASON=n("/site-edit-reason"),t.CSM_SCENARIOS=n("/studies/:studyId/csms/:userId/scenarios"),t.CHANGE_COUNTRY_SITES_STATUS=n("/override/:overrideId/sites/countryApproveStatus"),t.CHANGE_COUNTRIES_SITES_STATUS=n("/studies/:studyId/scenarios/:scenarioId/sites-status"),t.SCENARIO_SITE_SELECTION_STATUS=n("/studies/:studyId/scenarios/:scenarioId/scenario-sites-selection-status"),t.STUDY_OPTIONS=n("/platform/study/options"),t.STUDY_BY_ID=n("/studies/:id"),t.PLAIN_STUDY_BY_ID=n("/studies/:id/plain"),t.STUDY_SCENARIOS_DETAILS=n("/studies/:id/scenarios-details"),t.FETCH_ACTUALS_DATA_BY_COUNTRIES_IDS=n("/studies/:id/actuals"),t.FETCH_AGGREGATED_ACTUALS_DATA_BY_COUNTRIES_IDS=n("/studies/:id/aggregated-actuals"),t.DELETE_STUDY=n("/studies/:id"),t.CREATE_STUDY=n("/studies"),t.UPDATE_STUDY=n("/studies/:id/edit"),t.UPDATE_STUDY_OWNER=n("/studies/:studyId/updateOwner"),t.CREATE_STUDY_AND_SCENARIO=n("/studies/new/scenarios/new"),t.UNKNOWN_STUDIES=n("/unknown-studies"),t.GET_STUDY_SCENARIOS=n("/studies/:studyId/scenarios"),t.STUDY_SCENARIOS_LIST=n("/studies/:studyId/scenarios-list"),t.DUPLICATE_SCENARIO=n("/scenarios/:scenarioId/duplicate"),t.DUPLICATE_IMPACT_SCENARIO=n("/studies/:studyId/duplicate/impact"),t.CREATE_ADJUSTMENT_SCENARIO=n("/scenarios/:scenarioId/createAdjustment"),t.GET_STUDIES=n("/studies"),t.CREATE_NEW_SCENARIO=n("/studies/:studyId/scenarios/new"),t.UPDATE_SCENARIO=n("/studies/:studyId/scenarios/:scenarioId"),t.UPDATE_SCENARIO_PREDICTIONS=n("/studies/:studyId/scenarios/:scenarioId/predictions"),t.REMOVE_SCENARIO=n("/scenarios/:scenarioId"),t.OPTIMISE_SCENARIO=n("/oda/scenarios/:scenarioId"),t.ARCHIVE_SCENARIO=n("/scenarios/:scenarioId/archive"),t.APPROVE_SCENARIO=n("/studies/:studyId/scenarios/:scenarioId/approve"),t.CREATE_APPROVED_SCENARIO_SNAPSHOT=n("/studies/:studyId/scenarios/:scenarioId/approved-snapshot"),t.CONFIRM_ACTUAL_STUDY_PARAMS=n("/studies/:studyId/scenarios/:scenarioId/confirm-study-params"),t.ALIGN_STUDY_PARAMS_WITH_IMPACT=n("/studies/:studyId/align-study-params"),t.GET_SCENARIO=n("/studies/:studyId/scenarios/:scenarioId"),t.GET_SCENARIO_WITH_LOCATIONS=n("/scenarios/:id/edit_locations"),t.GET_IMPACT_SCENARIO=n("/scenarios/impact/:id"),t.SCENARIO_COUNTRY=n("/scenarios/:id/country/"),t.COHORT_COUNTRY=n("/scenarios/:scenarioId/cohorts/:cohortId/country/"),t.SCENARIO_REGION=n("/scenarios/:id/region/"),t.SAVE_PLAYGROUND=n("/scenarios/:id/override/batchUpdate"),t.SAVE_COHORT=n("/scenarios/:scenarioId/cohorts/:cohortId/override/batchUpdate"),t.VALIDATE_STUDY_UNIQUE=n("/studies/validate_study_unique"),t.VALIDATE_SCENARIO_UNIQUE=n("/studies/:studyId/scenarios/validate_scenario_unique"),t.GET_PARAMETERS_BY_COUNTRY_SCENARIO=n("/studies/:studyId/byScenarioCountry/:scenarioId/:countryId/:regionName"),t.GET_PARAMETERS_BY_COUNTRY_COHORT=n("/studies/:studyId/byCohortCountry/:cohortId/:countryId/:regionName"),t.GET_AVAILABLE_USERS=n("/users"),t.GET_COUNTRY_USERS=n("/countryUsers"),t.SET_COUNTRY_USER=n("//countryUser/addCountry"),t.UNLINK_COUNTRY_USER=n("//countryUser/removeCountry"),t.SHARE_SCENARIO=n("/studies/:studyId/scenarios/:scenarioId/share"),t.SCENARIO_NOTE=n("/scenarios/:scenarioId/notes"),t.SCENARIO_COUNTRY_NOTE=n("/scenarios/:scenarioId/countries/:countryId/notes"),t.IMPACT_SCENARIO_NOTE=n("/scenarios/impact/:impactScenarioId/notes"),t.SCENARIO_EVENTS=n("/study/:studyId/scenarios/:scenarioId/events"),t.APPLY_SCENARIO_EVENTS=n("/scenarios/:scenarioId/events/apply_changes"),t.APPLY_DISABLE_EVENT_API=n("/scenarios/:scenarioId/event/:eventId/:isDisabled"),t.SCENARIO_COHORT_EVENTS=n("/study/:studyId/scenarios/:scenarioId/cohort/:cohortId/events"),t.APPLY_SCENARIO_COHORT_EVENTS=n("/scenarios/:scenarioId/cohort/:cohortId/events/apply_changes"),t.USER_DETAILS=n("/user-details/:userId"),t.GET_USER=n("/getUser"),t.LOGOUT=n("/logout"),t.APPLICATION_METADATA=n("/app/metadata"),t.CONTEXT_HELP_DATA=n("/context-help"),t.GET_STUDY_SCENARIOS_COUNT=n("/scenarios-count/"),t.SITES_HEALTH=n("/sites-health")},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getStudyLoadingProgress=t.getStudyScenariosCount=t.getApprovedScenario=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(641),o=n(l),s=a(12),u=n(s),d=a(47),c=a(63),f=a(42),p=n(f),h=a(10),v=a(20),m=n(v),_={preparedScenarios:[],approvedScenarios:[],optimisingScenarios:[],errorScenarios:[],showScenarioWarningColumn:!1},E=(0,d.createSelector)([c.getStudyData],function(e){if(!e)return _;var t=!1,a=e.scenarios.sort(function(e,t){return e.updated>t.updated?-1:e.updated<t.updated?1:0}).map(function(a){(0,u.default)(a,"studyParamsWarning.showStudyParamsWarning")&&(t=!0);var n=null!==a.source_scenario_id,r=a.status===h.SCENARIO_STATUS.APPROVED,l=(0,u.default)(a,"cohorts",[]).length>0,o=void 0,s=void 0;if(n){var d=e.scenarios.find(function(e){return e.status===h.SCENARIO_STATUS.APPROVED});o=(0,u.default)(d,"fullData[0].lpft"),s="Compared to P/LPFT"}else r&&e.state.status===m.default.ACTIVE&&!l?(o=(0,u.default)(a,"fullData[0].actual_f_lpft"),s="Compared to F/LPFT"):r&&e.state.status===m.default.ACTIVE&&l?(o=null,s=null):(o=a.end_date,s="Compared to T/LPFT");return i({},a,{targetDate:o,tooltipData:s})}),n=a.filter(function(e){return e.status===h.SCENARIO_STATUS.APPROVED}),l=(0,o.default)(a,n),s=l.filter(function(e){return e.nerve_job_status===p.default.QUEUED||e.nerve_job_status===p.default.RUNNING}),d=l.filter(function(e){return e.nerve_job_status===p.default.FAILED});return{preparedScenarios:[].concat(r(d),r(s),r((0,o.default)((0,o.default)(l,s),d))),approvedScenarios:n,optimisingScenarios:s,errorScenarios:d,showScenarioWarningColumn:t}});t.getApprovedScenario=(0,d.createSelector)(c.getStudyData,function(e){return e.scenarios.filter(function(e){return e.status===h.SCENARIO_STATUS.APPROVED})[0]}),t.getStudyScenariosCount=(0,d.createSelector)(c.getStudyData,function(e){return(0,u.default)(e,"scenarios",[]).length+(0,u.default)(e,"archivedCount")}),t.getStudyLoadingProgress=(0,d.createSelector)([c.getRouteParams,function(e){return e.study.progress}],function(e,t){return t&&t[+e.id]?t[+e.id]:null}),t.default=E},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e){return e.find(function(e){return e.type.toUpperCase()===d.ROLLUP})||{}}function i(e,t,a,n,r,i,l){return e&&e.includes(l)&&(n&&r||!n&&null!==i&&!a)&&t&&!t.includes(l)}function l(e,t){var a=Object.assign({},t),r=Object.keys(a);return r.forEach(function(e){var t=[].concat(n(a[e]));r.push.apply(r,n(t.map(function(t){return t===d.UNSPECIFIED_COUNTRY?e+"_"+t:t})))}),Object.entries(e).filter(function(e){return e[1].location===d.UNSPECIFIED_COUNTRY?r.includes(e[1].region_name+"_"+e[1].country_name):r.includes(e[1].location||e[1].country_name)}).map(function(e){return e[1]}).concat(e[0])}Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.getStudyParamsWarning=t.getFilteredTableData=t.getFilteredData=t.getTableHeaderPosition=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.getGlobalRollupData=r,t.isOverriden=i,t.filterMultiColumnBeforeApply=l;var s=a(11),u=function(e){return e&&e.__esModule?e:{default:e}}(s),d=a(10),c=a(8);t.getTableHeaderPosition=function(e,t,a){var n=e;return t&&(n+=a),n},t.getFilteredData=function(e,t){return e.find(function(e){return e.location===t.name&&e.type===t.type.toLowerCase()&&(!t.subject||e.region===t.subject)})||e.find(function(e){return e.type.toUpperCase()===d.ROLLUP})},t.getFilteredTableData=function(e,t,a,r,i){var l=[];if(l.push(t),a.type===d.REGION){var s=e.filter(function(e){return e.location===a.name||e.region_name===a.name});l=[].concat(n(l),n(s))}else if(a.type===d.COUNTRY){var u=e.find(function(e){return e.location===a.name&&e.type.toUpperCase()===d.COUNTRY&&(!a.subject||e.region===a.subject)}),c=e.find(function(e){return e.location===u.region_name});l=[].concat(n(l),[c,u])}else l=r?[o({type:"multiediting"},i,{overrideList:[]})].concat(n(e)):e;return l},t.getStudyParamsWarning=function(e,t){if(!e||!t)return{showStudyParamsWarning:!1,showWarningOnDuplicate:!1};if(t.approvedData||t.study_level_data){var a=t.approvedData||t.study_level_data,n=t.approvedData,r=a.fp,i=a.target_lpft,l=a.fpfv_fpft,o=a.target_num_patients,s=a.therapeutic_area,d=a.indication;r=(0,c.getMomentDate)(r),i=(0,c.getMomentDate)(i);var f=e.fp,p=e.target_lpft,h=e.fpfv_fpft,v=e.target_num_patients,m=e.therapeutic_area,_=e.indication;f=(0,c.getMomentDate)(f),p=(0,c.getMomentDate)(p);var E=!1,g=!1,y=[];return l!==h&&(y.push("fpfvFpft"),E=!0,g=!0),f&&u.default.isMoment(f)&&f.isValid()&&r&&u.default.isMoment(r)&&r.isValid()&&f.isSame(r)||(y.push("fp"),E=!0,g=!0),p&&u.default.isMoment(p)&&p.isValid()&&i&&u.default.isMoment(i)&&i.isValid()&&p.isSame(i)||(y.push("tLpft"),E=!0),d&&_&&d.toLowerCase()!==_.toLowerCase()&&(y.push("indication"),E=!0),s&&m&&s.toLowerCase()!==m.toLowerCase()&&(y.push("therapeutic_area"),E=!0),o!==v&&(y.push("target_num_patients"),E=!0),{showWarningOnDuplicate:g&&!!n,showStudyParamsWarning:E,approvedParams:{fp:r,tLpft:i,fpfvFpft:l,target_num_patients:o,indication:d,therapeutic_area:s},currentParams:{fp:f,tLpft:p,fpfvFpft:h,target_num_patients:v,indication:_,therapeutic_area:m},invalidFields:y}}return{showStudyParamsWarning:!1,showWarningOnDuplicate:!1}},t.noop=function(){}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getImpactScenarioCountriesList=t.isImpactDataAvailable=t.getScenarioAlerts=t.isScenarioEditable=t.getScenarioViewerTableRows=t.getUserAccessDetails=t.getSelectedCountryData=t.getScenarioViewerMultiEditValues=t.getScenarioViewerFilter=t.getScenarioRedoLength=t.getScenarioUndoLength=t.getScenarioCalculatedFullData=t.getScenarioFullData=t.getActiveCountry=t.getScenarioNotesCount=t.getScenarioNotesFromStore=t.getPlatformRegionsList=t.getPlatformRegionsFromStore=t.getScenarioCountries=t.isScenarioDataExist=t.getScenarioData=void 0;var i=a(47),l=a(12),o=n(l),s=a(646),u=n(s),d=a(8),c=a(55),f=n(c),p=a(52),h=a(35),v=a(63),m=a(10),_=a(42),E=n(_),g=a(328),y=a(756),S=[],b=[],C=[],O=t.getScenarioData=(0,i.createSelector)([v.getRouteParams,function(e){return e.scenarios}],function(e,t){return t[e.scenarioId]||null}),T=(t.isScenarioDataExist=(0,i.createSelector)([O,function(e){return e.scenarios.dirtyDataFor}],function(e,t){return!!e&&(!(null!==t||!e)||t&&e.id===t)}),t.getScenarioCountries=(0,i.createSelector)(O,function(e){return e?e.countries:b})),R=t.getPlatformRegionsFromStore=function(e){return e.platform.regions||S},A=(t.getPlatformRegionsList=(0,i.createSelector)(R,function(e){return e}),t.getScenarioNotesFromStore=function(e,t){return e.notes[t]||C}),I=(t.getScenarioNotesCount=(0,i.createSelector)(A,function(e){return e.length}),function(e,t){return t.match.params.countryId}),w=(t.getActiveCountry=(0,i.createSelector)([T,I],function(e,t){return e.find(function(e){return+e.platform_country_id==+t})}),t.getScenarioFullData=(0,i.createSelector)([T,O],function(e,t){return(0,d.getScenarioCalculatedData)(e,t).filter(function(e){return!e.onlyActuals&&"Unspecified country"!==e.location})}),t.getScenarioCalculatedFullData=(0,i.createSelector)([T,O],function(e,t){return(0,d.getScenarioCalculatedData)(e,t)})),N=(t.getScenarioUndoLength=function(e){return(0,o.default)(e,"scenarios.past",[]).length},t.getScenarioRedoLength=function(e){return(0,o.default)(e,"scenarios.future",[]).length},t.getScenarioViewerFilter=function(e){return e.scenarios.filter}),D=t.getScenarioViewerMultiEditValues=function(e){return e.scenarios.multiEditValues},P=(t.getSelectedCountryData=(0,i.createSelector)([w,N],function(e,t){return e.find(function(e){return e.location===t.name&&e.type===t.type.toLowerCase()&&(!t.subject||e.region===t.subject)})||e.find(function(e){return e.type.toUpperCase()===m.ROLLUP})}),t.getUserAccessDetails=(0,i.createSelector)([function(e){return e.auth.user},v.getStudyData,O],function(e,t,a){return(0,f.default)(e,t,a)}));t.getScenarioViewerTableRows=(0,i.createSelector)([w,N,function(e){return e.scenarios.multiEditView},D],function(e,t,a,n){return(0,p.getFilteredTableData)(e,e[0],t,a,n)}),t.isScenarioEditable=(0,i.createSelector)([P,function(e){return e.scenarios.historicalView},function(e){return e.scenarios.multiEditView}],function(e,t,a){return e.isEditable&&!t&&!a}),t.getScenarioAlerts=(0,i.createSelector)([v.getStudyData,O,P,function(e){return e.auth.user},g.getStudyChanged,function(e,t,a){return a}],function(e,t,a,n,r){var i=a.optimizingStatus,l=t.studyParamsWarning,s=(0,o.default)((0,h.getLocalStorageItem)("fpo-failed-scenario-job",{}),t.id,[]),u=!s.includes(n.id)&&t.nerve_job_status===E.default.FAILED,d=(0,o.default)((0,h.getLocalStorageItem)("fpo-changed-study-params",{}),e.id,{closedBy:[],updatedAt:null,updatedBy:null}),c=r.includes(e.id)&&e.is_imported&&!d.closedBy.includes(n.id),f=(0,o.default)(l,"showStudyParamsWarning",!1);return i||u||c||!!f}),t.isImpactDataAvailable=(0,i.createSelector)([v.getRouteParams,function(e){return e.impactScenarios}],function(e,t){return!!(0,o.default)(t,e.id)}),t.getImpactScenarioCountriesList=(0,i.createSelector)([v.getRouteParams,function(e){return e.impactScenarios},T],function(e,t,a){function n(e){return e.reduce(function(e,t){var a=t.region_name;return e[a]?e[a]=[].concat(r(e[a]),[t]):e[a]=[t],e},{})}var i=(0,o.default)(t,e.id);if(!i)return y.EMPTY_ARRAY;var l=i.countries.map(function(e){return e.country_id}),s=a.reduce(function(e,t){return t.onlyActuals||e.push(t.platform_country_id),e},[]),d=u.default.apply(void 0,[s].concat(r(l))),c=u.default.apply(void 0,[l].concat(r(s)));return{extra:n(a.filter(function(e){return d.includes(e.platform_country_id)})),missing:n(i.countries.filter(function(e){return c.includes(e.country_id)}))}})},,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=(0,u.default)(e,"nerve_job_status");return t===f.default.QUEUED||t===f.default.RUNNING}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return e.role!==h.default.READONLY&&(e.role!==h.default.PLAYGROUND||!t||!t.is_imported)&&(t&&t.state.isOwner||e.role===h.default.ADMIN)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=(0,u.default)(t,"is_imported");if(!e||!(0,u.default)(t,"state.status")&&n||!(0,u.default)(t,"state.isOwner")&&!1===n)return new _;var r=i(a),o=t;t&&!t.state&&(o.state={});var s=a&&a.state.isOwner,c=s&&e.role!==h.default.READONLY||e.role===h.default.ADMIN,p=l(e,o),v=o&&a&&o.state.status===m.default.ACTIVE&&a.status!==d.SCENARIO_STATUS.APPROVED&&(null!==a.source_scenario_id||"IMPACT"===a.origin),E=a&&o&&(s&&e.role!==h.default.READONLY||p)&&!a.is_archived&&a.status!==d.SCENARIO_STATUS.APPROVED&&a.status!==d.SCENARIO_STATUS.PREV_APPROVED&&!r&&(o.state.status!==m.default.ACTIVE||v),g=a&&o&&p&&!a.is_archived&&a.status!==d.SCENARIO_STATUS.APPROVED&&a.status!==d.SCENARIO_STATUS.PREV_APPROVED&&a.nerve_job_status!==f.default.RUNNING&&a.nerve_job_status!==f.default.QUEUED&&(o.state.status!==m.default.ACTIVE||v),y=a&&o&&a.status!==d.SCENARIO_STATUS.APPROVED&&a.status!==d.SCENARIO_STATUS.PREV_APPROVED&&a.nerve_job_status!==f.default.RUNNING&&a.nerve_job_status!==f.default.QUEUED&&o.state.status!==m.default.ACTIVE||a&&o&&!a.is_archived&&a.status!==d.SCENARIO_STATUS.APPROVED&&a.status!==d.SCENARIO_STATUS.PREV_APPROVED&&s&&a.nerve_job_status!==f.default.RUNNING&&a.nerve_job_status!==f.default.QUEUED&&o.state.status!==m.default.ACTIVE,S=o&&a&&"ACTIVE"===o.state.status&&a.status===d.SCENARIO_STATUS.APPROVED,b=a&&o&&(s||a.state.isShared||e.role===h.default.ADMIN)&&(o.state.status!==m.default.ACTIVE||v||S)&&!a.isImpact,C=o&&a&&o.is_imported&&!a.isImpact,O=o&&o.state.status===m.default.ACTIVE,T=o&&!o.is_imported,R=!O&&!T;return new _(E,g,y,v,r,S,b,C,O,c,p,e.role,T,R,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.AccessList=void 0,t.isOptimizing=i,t.default=o;var s=a(12),u=n(s),d=a(10),c=a(42),f=n(c),p=a(135),h=n(p),v=a(20),m=n(v),_=t.AccessList=function e(t,a,n,i,l,o,s,u,d,c,f,p,v,m,_){switch(r(this,e),this.optimizingStatus=l||!1,this.isAdjusted=i||!1,this.isActiveApprovedPlan=o||!1,this.isTracking=d||!1,this.isUserHasScenarioFullControl=c||!1,this.isUserHasStudyFullControl=f||!1,p){case h.default.ADMIN:this.isPlaygroundUser=!1,this.isAdmin=!0,this.isRegularUser=!1,this.isReadonlyUser=!1,this.userCanViewTrackingStudy=!0,this.userCanViewPlanningStudy=!0,this.userCanViewPlaygroundStudy=!0,this.userCanCreateNewScenario=v||m,this.userCanCreateNewPlayGroundScenario=!0,this.userCanCreateNewPlannedScenario=!0,this.isDuplicateAvailable=s||!1,this.isEditable=t||!1,this.isApprovable=a||!1,this.canBeOptimised=n||!1,this.isShareAvailable=u||!1,this.canManageSites=!0;break;case h.default.USER:this.isPlaygroundUser=!1,this.isAdmin=!1,this.isRegularUser=!0,this.isReadonlyUser=!1,this.userCanViewTrackingStudy=!0,this.userCanViewPlanningStudy=!0,this.userCanViewPlaygroundStudy=!0,this.userCanCreateNewScenario=v||m,this.userCanCreateNewPlayGroundScenario=!0,this.userCanCreateNewPlannedScenario=!0,this.isDuplicateAvailable=s||!1,this.isEditable=t&&_,this.isApprovable=a,this.canBeOptimised=n&&_,this.isShareAvailable=u&&_,this.canManageSites=!1;break;case h.default.READONLY:this.isPlaygroundUser=!1,this.isAdmin=!1,this.isRegularUser=!1,this.isReadonlyUser=!0,this.userCanViewTrackingStudy=!0,this.userCanViewPlanningStudy=!0,this.userCanViewPlaygroundStudy=!1,this.userCanCreateNewScenario=!1,this.userCanCreateNewPlayGroundScenario=!1,this.userCanCreateNewPlannedScenario=!1,this.isDuplicateAvailable=!1,this.isEditable=!1,this.isApprovable=!1,this.canBeOptimised=!1,this.isShareAvailable=!1,this.canManageSites=!1;break;case h.default.COUNTRY_USER:this.isPlaygroundUser=!1,this.isAdmin=!1,this.isRegularUser=!1,this.isReadonlyUser=!0,this.userCanViewTrackingStudy=!0,this.userCanViewPlanningStudy=!0,this.userCanViewPlaygroundStudy=!1,this.userCanCreateNewScenario=!1,this.userCanCreateNewPlayGroundScenario=!1,this.userCanCreateNewPlannedScenario=!1,this.isDuplicateAvailable=!1,this.isEditable=!1,this.isApprovable=!1,this.canBeOptimised=!1,this.isShareAvailable=!1,this.canManageSites=!0;break;default:this.isPlaygroundUser=!0,this.isAdmin=!1,this.isRegularUser=!1,this.isReadonlyUser=!1,this.userCanViewTrackingStudy=!0,this.userCanViewPlanningStudy=!0,this.userCanViewPlaygroundStudy=!0,this.userCanCreateNewScenario=v,this.userCanCreateNewPlayGroundScenario=!0,this.userCanCreateNewPlannedScenario=!1,this.isDuplicateAvailable=v&&s,this.isEditable=v&&_&&t,this.isApprovable=v&&a&&_,this.canBeOptimised=v&&n,this.isShareAvailable=v&&u&&_,this.canManageSites=!1}}},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(452),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(781),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var a=(0,re.getRouteMatch)(t),n=a.match.params.id,r=(0,oe.getStudyData)(e,a),i=(0,C.default)(r,["impactStudyParams","fp","target_lpft","therapeutic_area","indication","target_num_patients","fpfv_fpft","phase"]),l=he(i),o=l.invalidFields;return u({id:+n,study:r,activeUser:e.auth.user,invalidFields:o},(0,ue.default)(e,a),{metadata:ve(e.auth.user,r)})}Object.defineProperty(t,"__esModule",{value:!0}),t.COLLECTION_TYPES=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),h=n(p),v=a(11),m=n(v),_=a(7),E=a(16),g=a(19),y=a(12),S=n(y),b=a(54),C=n(b),O=a(45),T=n(O),R=a(129),A=n(R),I=a(17),w=a(320),N=n(w),D=a(932),P=n(D),L=a(939),M=n(L),k=a(1096),x=n(k),j=a(1080),F=n(j),U=a(1021),V=n(U),B=a(134),H=n(B),G=a(496),Y=n(G),z=a(1095),W=n(z),q=a(1094),K=n(q),X=a(58),Z=n(X),J=a(44),Q=a(6),$=a(55),ee=n($),te=a(334),ae=a(111),ne=a(106),re=a(28),ie=a(30),le=a(33),oe=a(63),se=a(51),ue=n(se),de=a(10),ce=a(20),fe=n(ce);a(2239);var pe=t.COLLECTION_TYPES={APPROVED:"approved",PREPARED:"prepared"},he=(0,A.default)(ne.getMisalignedDetails,function(e,t){return(0,T.default)(e,t)}),ve=(0,A.default)(ee.default),me=function(e){function t(e){i(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.unarchiveScenario=function(e){a.props.unarchiveScenario(a.props.id,e)},a.handleScenarioParamsWarningClose=function(){a.setState({isScenarioParamsWarningShown:!1,selectedScenario:null})},a.handleWarningIconClick=function(e){a.setState({isScenarioParamsWarningShown:!0,selectedScenario:e})},a.compareScenariosLink=function(){var e="";return a.state.markedScenarios.forEach(function(t){e+="scenario="+t+"&"}),e},a.navigateViewCsmsList=function(){a.props.push("/studies/"+a.props.id+"/csms")},a.handleRowClick=function(e){e.cohorts&&e.cohorts.length?a.props.navigateToScenarioCohortsViewer(e.study_id,e.id):e.isImpact?a.props.navigateToImpactScenario(e.study_id):a.props.navigateToScenarioViewer(e.study_id,e.id)},a.handleRowClickApproved=function(e,t){var n=a.props.approvedScenarios,r=u({},n[t]);r.calculating||a.handleRowClick(r)},a.handleRowClickPrepared=function(e,t){var n=a.props.preparedScenarios,r=u({},n[t]);r.calculating||a.handleRowClick(r)},a.state={isDuplicateScenarioDialogShown:!1,isShareScenarioDialogShown:!1,selectedScenario:null,markedScenarios:[],apiError:!1,isChangeOwnerDialogShown:!1,isStudyChangedDialogClose:!1,isRemoveDialogShown:!1},a.handleDuplicateScenarioClick=a.handleDuplicateScenarioClick.bind(a),a.handleDuplicateScenarioDialogClose=a.handleDuplicateScenarioDialogClose.bind(a),a.handleDuplicateScenarioDialogSubmit=a.handleDuplicateScenarioDialogSubmit.bind(a),a.handleScenarioCheckboxClick=a.handleScenarioCheckboxClick.bind(a),a.handleShareScenarioClick=a.handleShareScenarioClick.bind(a),a.handleShareScenarioDialogClose=a.handleShareScenarioDialogClose.bind(a),a.archiveScenario=a.archiveScenario.bind(a),a.handleChangeOwnerClick=a.handleChangeOwnerClick.bind(a),a.handleEditStudyLevelClick=a.handleEditStudyLevelClick.bind(a),a.handleChangeOwnerDialogClose=a.handleChangeOwnerDialogClose.bind(a),a.handleRemoveScenario=a.handleRemoveScenario.bind(a),a.handleRemoveScenarioDialogClose=a.handleRemoveScenarioDialogClose.bind(a),a.handleRemoveScenarioSubmit=a.handleRemoveScenarioSubmit.bind(a),a}return o(t,e),d(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.study;t&&!1===(0,S.default)(t,"state",{}).isOwner&&!1===(0,S.default)(t,"is_imported")&&this.props.replace("/")}},{key:"handleDuplicateScenarioClick",value:function(e){var t=this.props.study,a=(0,S.default)(t,"scenarios",[]).find(function(t){return t.id===e});a&&this.setState({isDuplicateScenarioDialogShown:!0,selectedScenario:a})}},{key:"handleShareScenarioClick",value:function(e){var t=this.props.study,a=(0,S.default)(t,"scenarios",[]).find(function(t){return t.id===e});a&&this.setState({isShareScenarioDialogShown:!0,selectedScenario:a})}},{key:"handleShareScenarioDialogClose",value:function(){this.setState({isShareScenarioDialogShown:!1,selectedScenario:null})}},{key:"handleDuplicateScenarioDialogClose",value:function(){this.setState({isDuplicateScenarioDialogShown:!1,selectedScenario:null})}},{key:"handleRemoveScenario",value:function(e){var t=this.props.study,a=(0,S.default)(t,"scenarios",[]).find(function(t){return t.id===e});a&&this.setState({isRemoveDialogShown:!0,selectedScenario:a})}},{key:"handleRemoveScenarioDialogClose",value:function(){this.setState({isRemoveDialogShown:!1,selectedScenario:null})}},{key:"handleRemoveScenarioSubmit",value:function(){this.props.removeScenario(this.state.selectedScenario.study_id,this.state.selectedScenario.id),this.handleRemoveScenarioDialogClose()}},{key:"handleDuplicateScenarioDialogSubmit",value:function(e,t,a,n,r){var i=this,l=this.state.selectedScenario,o=this.props.study,s=l.cohorts.length,u=(l&&l.status===de.SCENARIO_STATUS.APPROVED||l&&l.status===de.SCENARIO_STATUS.PREV_APPROVED)&&o.state.status===fe.default.ACTIVE;new Promise(function(d){if(l.isImpact){var c=(0,te.prepareImpactScenarioData)(l);return c.name=e,d(i.props.duplicateImpactScenario(o.id,c))}if(r){var f=void 0;return s&&(f=(0,ae.getCohortsFpOffsets)(l)),d(i.props.createAdjustmentScenario(l.id,e,f,a,n))}return d(i.props.duplicateScenario(l.id,e,t,a,n,u))}).then(function(e){var a=e.id;i.props.push("/studies/"+(t||i.props.id)+"/scenarios/"+a+"/"+(s?"cohorts":""))}).catch(function(e){400===e.status&&i.setState({apiError:{message:e.message,statusText:e.statusText,status:e.status}})}),this.handleDuplicateScenarioDialogClose()}},{key:"handleScenarioCheckboxClick",value:function(e){var t=this.state.markedScenarios,a=t.find(function(t){return t===e});void 0!==a?this.setState({markedScenarios:t.filter(function(e){return e!==a})}):this.setState({markedScenarios:[].concat(r(t),[e])})}},{key:"handleChangeOwnerClick",value:function(){this.setState({isChangeOwnerDialogShown:!0})}},{key:"handleEditStudyLevelClick",value:function(){var e=this.props;(0,e.navigateToStudyLevelEdit)(e.id)}},{key:"handleChangeOwnerDialogClose",value:function(){this.setState({isChangeOwnerDialogShown:!1})}},{key:"archiveScenario",value:function(e){this.props.archiveScenario(this.props.id,e,!0)}},{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.study,n=e.activeUser,r=e.approvedScenarios,i=e.optimisingScenarios,l=e.showScenarioWarningColumn,o=e.invalidFields,s=e.metadata,u=this.state,d=u.markedScenarios,c=u.isDuplicateScenarioDialogShown,p=u.isShareScenarioDialogShown,h=u.isChangeOwnerDialogShown,v=u.isScenarioParamsWarningShown,_=u.selectedScenario,E=u.isRemoveDialogShown;if(!a||t||!1===(0,S.default)(a,"state",{}).isOwner&&!1===(0,S.default)(a,"is_imported"))return f.default.createElement(H.default,null);var g=r.find(function(e){return e.status===de.SCENARIO_STATUS.APPROVED}),y=(0,S.default)(g,"studyParamsWarning",{showWarningOnDuplicate:!1}),b=a.state.status===fe.default.PLANNED&&a.is_imported&&0===r.length&&(0,m.default)().diff(a.fp,"w")>=12,C="study-dashboard--";return a.state.status?C+="ACTIVE"===a.state.status?"tracking":"planning":C+=a.is_imported?"na":"playground",f.default.createElement("div",{className:"study-scenarios-container"},f.default.createElement(W.default,{studyId:this.props.id,compareScenariosLink:this.compareScenariosLink,markedScenarios:d,handleChangeOwnerClick:this.handleChangeOwnerClick,handleEditStudyLevelClick:this.handleEditStudyLevelClick}),f.default.createElement(I.Grid,null,f.default.createElement(I.Row,null,f.default.createElement(I.Col,{offset:1,width:11},f.default.createElement(Z.default,null,f.default.createElement(M.default,{studyId:this.props.id,title:a.study_id,patientsNumber:a.target_num_patients,studyStatus:a.state.status,endDate:a.target_lpft,fp:a.fp,fpfvFpft:a.fpfv_fpft,studyOwner:a.state.owner_name,showCsmsLink:a.is_imported,onNavigateViewCsmsList:this.navigateViewCsmsList})))),f.default.createElement(Z.default,null,f.default.createElement(K.default,{study:a,studyParamsWarning:y,invalidFields:o,metadata:s,showApproveAbsenceWarning:b,onStudyChangedDialogClose:this.onStudyChangedDialogClose})),f.default.createElement(I.Row,null,f.default.createElement(I.Col,{offset:1,width:11},f.default.createElement(Z.default,null,f.default.createElement(x.default,{dataType:pe.APPROVED,studyId:this.props.id,key:1,headerHeight:50,markedScenarios:d,activeUser:n,handleRowClick:this.handleRowClickApproved,handleScenarioCheckboxClick:this.handleScenarioCheckboxClick,handleShareScenarioClick:this.handleShareScenarioClick,handleDuplicateScenarioClick:this.handleDuplicateScenarioClick,handleArchiveScenario:this.archiveScenario,handleUnarchiveScenario:this.unarchiveScenario,onWarningIconClick:this.handleWarningIconClick,showScenarioWarningColumn:l})))),i&&i.length>0?f.default.createElement(I.Row,{style:{marginTop:"8px"}},f.default.createElement(I.Col,{offset:1,width:11},f.default.createElement("div",{className:"scenario-optimization-status-bar narrow"},Q.Icons.ARROW_RIGHT_SQUARE_FILLED,f.default.createElement("span",{className:"dash"}),Q.Icons.CIRCLE_FILLED_LARGE,f.default.createElement("span",{className:"message"},"Running optimization")))):f.default.createElement(I.Row,null),f.default.createElement(I.Row,null,f.default.createElement(I.Col,{offset:1,width:11},f.default.createElement(Z.default,null,f.default.createElement(x.default,{dataType:pe.PREPARED,studyId:this.props.id,key:2,markedScenarios:d,activeUser:n,headerHeight:0,handleRowClick:this.handleRowClickPrepared,handleScenarioCheckboxClick:this.handleScenarioCheckboxClick,handleShareScenarioClick:this.handleShareScenarioClick,handleDuplicateScenarioClick:this.handleDuplicateScenarioClick,handleArchiveScenario:this.archiveScenario,handleUnarchiveScenario:this.unarchiveScenario,onWarningIconClick:this.handleWarningIconClick,removeScenario:this.handleRemoveScenario,showScenarioWarningColumn:l}))))),p&&f.default.createElement(Z.default,{hidden:!0},f.default.createElement(F.default,{studyId:a.id,scenario:_||{},isShown:p,onClose:this.handleShareScenarioDialogClose})),f.default.createElement(P.default,{scenarioName:_?_.name:"",isShown:E,onClose:this.handleRemoveScenarioDialogClose,onSubmit:this.handleRemoveScenarioSubmit}),f.default.createElement(Z.default,{hidden:!0},f.default.createElement(N.default,{showMissingCountriesWarning:!0,study:a,scenario:_,isAdjusted:_&&null!==_.source_scenario_id,isApproved:_&&_.status===de.SCENARIO_STATUS.APPROVED,isPrevApproved:_&&_.status===de.SCENARIO_STATUS.PREV_APPROVED,isShown:c,onClose:this.handleDuplicateScenarioDialogClose,onSubmit:this.handleDuplicateScenarioDialogSubmit,showCreateAdjustedOption:(_&&_.status===de.SCENARIO_STATUS.APPROVED||_&&_.status===de.SCENARIO_STATUS.PREV_APPROVED)&&a.state.status===fe.default.ACTIVE})),h&&f.default.createElement(Z.default,{hidden:!0},f.default.createElement(V.default,{studyId:a.id,isShown:h,onClose:this.handleChangeOwnerDialogClose})),(0,S.default)(_,"studyParamsWarning.showStudyParamsWarning",null)&&f.default.createElement(Z.default,{hidden:!0},f.default.createElement(Y.default,{metadata:s,study:a,scenario:_,studyId:a.id,scenarioId:_.id,scenarioName:_.name,data:_.studyParamsWarning,status:_.status,isShown:v,onClose:this.handleScenarioParamsWarningClose})),f.default.createElement(J.ContextHelpButton,{page:C}))}}]),t}(c.Component);me.propTypes={activeUser:h.default.object.isRequired,duplicateScenario:h.default.func.isRequired,duplicateImpactScenario:h.default.func.isRequired,createAdjustmentScenario:h.default.func.isRequired,archiveScenario:h.default.func.isRequired,push:h.default.func.isRequired,replace:h.default.func.isRequired,id:h.default.number.isRequired,study:h.default.shape({id:h.default.number,study_id:h.default.string,indication:h.default.string,therapeutic_area:h.default.string,scenarios:h.default.array,plain:h.default.bool}),navigateToScenarioViewer:h.default.func.isRequired,navigateToStudyLevelEdit:h.default.func.isRequired,navigateToImpactScenario:h.default.func.isRequired,navigateToScenarioCohortsViewer:h.default.func.isRequired,isLoading:h.default.bool,approvedScenarios:h.default.array,preparedScenarios:h.default.array,optimisingScenarios:h.default.array,showScenarioWarningColumn:h.default.bool,removeScenario:h.default.func.isRequired,invalidFields:h.default.array,metadata:h.default.object.isRequired,unarchiveScenario:h.default.func.isRequired},me.defaultProps={study:null,isLoading:!1,studies:null,approvedScenarios:[],preparedScenarios:[],optimisingScenarios:[],errorScenarios:[],invalidFields:[],showScenarioWarningColumn:!1};var _e={navigateToScenarioViewer:function(e,t){return(0,g.push)("/studies/"+e+"/scenarios/"+t)},navigateToImpactScenario:function(e){return(0,g.push)("/studies/"+e+"/scenarios/impact/"+e)},navigateToScenarioCohortsViewer:function(e,t){return(0,g.push)("/studies/"+e+"/scenarios/"+t+"/cohorts")},navigateToStudyLevelEdit:function(e){return(0,g.push)("/studies/"+e+"/edit")},getStudy:ie.getStudy,duplicateScenario:le.duplicateScenario,archiveScenario:le.archiveScenario,unarchiveScenario:le.unarchiveScenario,createAdjustmentScenario:le.createAdjustmentScenario,duplicateImpactScenario:le.duplicateImpactScenario,removeScenario:le.removeScenario,push:g.push,replace:g.replace};t.default=(0,E.withRouter)((0,_.connect)(s,_e)(me))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getMetadata=t.getStudiesIds=t.getScenarioData=t.getScenarioFromStore=t.getStudyData=t.getPlatformRegions=t.getRouteParams=void 0;var r=a(47),i=a(12),l=n(i),o=a(129),s=n(o),u=a(45),d=n(u),c=a(20),f=n(c),p=a(55),h=n(p),v=[],m=function(e){return e.match.params},_=(0,s.default)(m,d.default),E=t.getRouteParams=function(e,t){return _(t)},g=(t.getPlatformRegions=function(e){return e.platform.regions},(0,r.createSelector)([E,function(e){return e.study}],function(e,t){return t[+e.id]?t[+e.id]:null})),y=t.getStudyData=(0,r.createSelector)(g,function(e){return e}),S=t.getScenarioFromStore=function(e,t){return e.scenarios[t.match.params.scenarioId]||null},b=(t.getScenarioData=(0,r.createSelector)(S,function(e){return e}),function(e){return(0,l.default)(e,"studies.studies",v)}),C=(t.getStudiesIds=(0,r.createSelector)(b,function(e){return e.filter(function(e){return e.state.status!==f.default.ACTIVE}).map(function(e){return e.id})}),function(e){return e.auth.user});t.getMetadata=(0,r.createSelector)([y,C],function(e,t){return(0,h.default)(t,e)})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(465),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioViewerState=void 0;var r=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a(0),l=n(i),o=a(7),s=a(1075),u=n(s),d=a(1059),c=n(d),f=a(1070),p=n(f),h=a(1071),v=n(h),m=a(1067),_=n(m),E=a(1076),g=n(E),y=a(1077),S=n(y),b=a(1074),C=n(b),O=a(1069),T=n(O),R=a(1065),A=n(R),I=a(1073),w=n(I),N=a(28),D=n(N),P=a(10),L=a(53),M=a(63),k=a(33);a(2235);var x=t.ScenarioViewerState=l.default.createContext(null),j=function(){var e=(0,o.useDispatch)(),t=(0,i.useReducer)(w.default,I.initialState),a=r(t,2),n=a[0],s=a[1],d=(0,D.default)(),f=d.match.params.scenarioId,h=(0,o.useSelector)(function(e){return(0,M.getStudyData)(e,d)}),m=(0,o.useSelector)(function(e){return(0,L.getScenarioData)(e,d)}),E=(0,o.useSelector)(function(e){return(0,L.getScenarioCalculatedFullData)(e,d)}),y=(0,o.useSelector)(function(e){return(0,L.getScenarioAlerts)(e,d,n.key)}),b=(0,o.useSelector)(function(e){return(0,L.getUserAccessDetails)(e,d)}),O=(0,o.useSelector)(function(e){return e.auth.user}),R=(0,o.useSelector)(function(e){return(0,L.getPlatformRegionsList)(e,d)}),N=(0,o.useSelector)(function(e){return(0,L.getSelectedCountryData)(e,d)}),j=(0,o.useSelector)(function(e){return(0,L.getScenarioViewerTableRows)(e,d)}),F=(0,o.useSelector)(function(e){return(0,L.isScenarioEditable)(e,d)}),U=(0,o.useSelector)(function(e){return e.errors.sessionExpired||e.errors.internalServer}),V=(0,o.useSelector)(function(e){return+e.scenarios.persisted==+f});return(0,i.useEffect)(function(){return function(){e((0,k.resetUnsavedData)())}},[e]),l.default.createElement("div",{className:"scenario-page-container screenshot-container"},l.default.createElement(x.Provider,{value:{state:n,setState:s,study:h,scenario:m,showAlert:y,activeUser:O,platformRegions:R,fullData:E,selectedCountryData:N,metadata:b,isEditable:F,tableData:j,requirePageRefresh:U,isPersisted:V,globalData:E[0]}},l.default.createElement(u.default,null),l.default.createElement(C.default,null),l.default.createElement(c.default,{globalRollupData:E[0],fullData:E,scenario:m,study:h,isAdjusted:null!==m.source_scenario_id,isApproved:m.status===P.SCENARIO_STATUS.APPROVED}),l.default.createElement(A.default,null),l.default.createElement(p.default,null),l.default.createElement(v.default,null),l.default.createElement(_.default,null),l.default.createElement(g.default,null),l.default.createElement(S.default,null),l.default.createElement(T.default,null)))};t.default=j},,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WARNING="Warning",t.MULTI_COLUMN_EDIT="Multi column edit",t.REMOVE_USER_CONSTRAINTS="Remove user constraints",t.MISMATCHED_SCENARIO_DETAILS="Mismatched scenario details",t.MISMATCHED_STUDY_DETAILS="Mismatched study details",t.CLOSE="Close",t.CANCEL="Cancel",t.REMOVE="Remove",t.CONFIRM="Confirm",t.ADD="Add",t.CONTINUE="Continue",t.YES_CONTINUE="Yes, continue",t.OK="OK",t.OPTIMIZE="Optimize",t.ALIGN_SCENARIO_WITH_STUDY_PARAMETERS="Align scenario with study parameters",t.ALIGN_AUTOMATICALLY="Align automatically",t.ALIGN_IN_EDITOR="Align in editor",t.CORRECT_INVALID_DATA="Please correct or remove the invalid data.",t.UNLOCK_USER_CONSTRAINTS_BY_COLUMN="User constraints will be removed from every selected row\n in this view.",t.APPLY_MULTIEDIT_DATA="These values will be applied to every selected country row in this view.",t.OPTIMIZE_WARNING="Optimizing this scenario will give you new forecasts in both the table and chart.\n      Footprint optimizer will keep all your changes and apply these constraints to the forecasts.",t.REMOVE_SCENARIO_WARNING="This scenario will be permanently deleted.",t.CHANGING_HISTORIC_DATA="You are changing Historic Data",t.CONFIRM_TO_CONTINUE="Are you sure you want to continue?",t.CONFIRM_TO_APPROVE="Are you sure you want to approve this scenario?",t.MISSED_THINGS="Some things you might have missed:",t.DONT_HAVE_ACCESS_TO_VIEW_PAGE="You do not have access to view this page",t.SELECTED_SITES="Selected sites",t.VIEW_NOT_SELECTED_SITES="Other internal sites",t.VIEW_EXTERNAL_SITES="Other new sites",t.VIEW_RAW_SITES="Other, not recommended",t.OTHER_INTERNAL_SITES_EXP="Sites with Novartis experience (historical data available) -\n currently not selected in this scenario",t.OTHER_NEW_SITES_EXP="Sites without Novartis experience (external sites, no historical data available) -\n currently not selected in this scenario",t.OTHER_SITES_EXP="Not recommended sites due to insufficient data"},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DropdownSelectFilterable=t.DropdownOption=void 0;var r=a(804),i=n(r),l=a(802),o=n(l),s=a(803),u=n(s);t.DropdownOption=o.default,t.DropdownSelectFilterable=u.default,t.default=i.default},,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e){switch(e){case g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS:return{id:m.default.generate(),event_type:e,name:"",state:g.EVENT_STATE.NEW,status:g.EVENT_STATUS.PENDING,patients:"",duration:"",start_after:"",locations:[]};case g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE:return{id:m.default.generate(),event_type:e,name:"",status:g.EVENT_STATUS.PENDING,state:g.EVENT_STATE.NEW,start_date:null,end_date:null,locations:[]};case g.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE:case g.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE:default:return{id:m.default.generate(),event_type:e,name:"",state:g.EVENT_STATE.NEW,status:g.EVENT_STATUS.PENDING,operation_value:"",operation:g.OPERATION_TYPE.INCREASE_BY,start_date:null,end_date:null,locations:[]}}}function o(e){switch(e){case g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE:return 1;case g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS:return 2;case g.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE:return 3;case g.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE:default:return 4}}function s(e){var t;return e.reduce(function(e,t){switch(t.status){case g.EVENT_STATUS.ACTIVE:e[t.type].inProgress+=1;break;case g.EVENT_STATUS.PENDING:e[t.type].pending+=1;break;case g.EVENT_STATUS.COMPLETED:default:e[t.type].completed+=1}return e[t.type].total+=1,e},(t={},i(t,g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),i(t,g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS,{inProgress:0,pending:0,completed:0,total:0}),i(t,g.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),i(t,g.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),t))}function u(e,t){if(!t)return y.Icons.EVENT;switch(e){case g.EVENT_STATUS.ACTIVE:return y.Icons.STAR_IN_PROGRESS;case g.EVENT_STATUS.COMPLETED:return y.Icons.STAR_COMPLETED;case g.EVENT_STATUS.PENDING:default:return y.Icons.STAR_PENDING}}function d(e,t,a){switch(e.event_type){case g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS:var n=!0;if(t&&t.countries){var i=a?a.countries:t.countries,l=[];e.locations.forEach(function(e){l.push.apply(l,r(e.countries.map(function(e){return e.id})))});var o=Math.min.apply(Math,r(i.filter(function(e){return l.includes(e.country_id)}).map(function(e){return t.source_scenario_id?e.adjusted_patient_allocation:e.patient_allocation})));(t.target_num_patients&&e.patients>t.target_num_patients||e.patients>o)&&(n=!1)}return e.name.length>0&&n&&e.patients>0&&""!==e.duration&&e.duration>=0&&""!==e.start_after&&e.start_after>=0&&e.locations.length>0;case g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE:return e.name.length>0&&e.start_date&&e.end_date&&e.locations.length>0&&(0,S.getMomentDate)(e.start_date).isSameOrAfter(t.fp)&&(0,S.getMomentDate)(e.end_date).isSameOrAfter(t.fp);case g.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE:case g.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE:default:return e.name.length>0&&e.operation_value>0&&e.start_date&&e.end_date&&e.locations.length>0&&(0,S.getMomentDate)(e.start_date).isSameOrAfter(t.fp)&&(0,S.getMomentDate)(e.end_date).isSameOrAfter(t.fp)}}function c(e,t,a){var n=a.countries,r=t.reduce(function(e,t){var a=t.countries.length,r=1===a,i=t.countries.reduce(function(e,a){return n.find(function(e){return e.platform_country_id===a.id})&&e.push(h({},a,{platform_country_id:a.id,region_name:t.name})),e},[]);return n.find(function(e){return"Unspecified country"===e.country_name&&e.region_name===t.name})&&i.push({id:"unspecifiedCountry_"+t.id,platform_country_id:null,name:"Unspecified country",region_id:t.id,isSelectedAsRegion:!1,isSelected:!1}),i.length>0&&e.push(h({},t,{isCountryRegion:r,initialLength:a,countries:i})),e},[]),i=(0,E.default)(r);return e.locations.forEach(function(e){e.countries.forEach(function(t){var a=i.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()}),n=a?a.countries.find(function(e){return e.name.toLowerCase()===t.name.toLowerCase()}):null;n&&(n.isSelected=!0)})}),i}function f(e){var t=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE}),a=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS}),n=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE}),i=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE});return[].concat(r(t),r(a),r(n),r(i))}function p(e,t,a,n){var i=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE}),l=i.reduce(function(e,a){return a[t]?("start_date"===t&&(a[t]=(0,S.getMomentDate)(a[t])),e.type1sortable.push(a)):e.type1NonSortable.push(a),e},{type1sortable:[],type1NonSortable:[]}),o=l.type1sortable,s=l.type1NonSortable,u=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS}),d=u.reduce(function(e,t){return t.patients?e.type2sortable.push(t):e.type2NonSortable.push(t),e},{type2sortable:[],type2NonSortable:[]}),c=d.type2sortable,f=d.type2NonSortable,p=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE}),h=p.reduce(function(e,a){return a[t]?("start_date"===t&&(a[t]=(0,S.getMomentDate)(a[t])),e.type3sortable.push(a)):e.type3NonSortable.push(a),e},{type3sortable:[],type3NonSortable:[]}),v=h.type3sortable,m=h.type3NonSortable,_=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE}),E=_.reduce(function(e,a){return a[t]?("start_date"===t&&(a[t]=(0,S.getMomentDate)(a[t])),e.type4sortable.push(a)):e.type4NonSortable.push(a),e},{type4sortable:[],type4NonSortable:[]}),y=E.type4sortable,b=E.type4NonSortable;return n?(i=[].concat(r(o.sort((0,C.default)(t,a))),r(s)),u=[].concat(r(c.sort((0,C.default)("patients",a))),r(f)),p=[].concat(r(v.sort((0,C.default)(t,a))),r(m)),_=[].concat(r(y.sort((0,C.default)(t,a))),r(b)),[].concat(r(i),r(u),r(p),r(_))):[].concat(r([].concat(r(o),r(v),r(y)).sort((0,C.default)(t,a))),r(c.sort((0,C.default)("patients",a))),r(s),r(f),r(m),r(b))}Object.defineProperty(t,"__esModule",{value:!0});var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.getNewEventByType=l,t.getEventType=o,t.getEventsStat=s,t.getEventIcon=u,t.validateByType=d,t.prepareLocationsData=c,t.sortEvents=f,t.sortEventsByField=p;var v=a(56),m=n(v),_=a(40),E=n(_),g=a(46),y=a(6),S=a(8),b=a(34),C=n(b)},,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(953),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(961),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(801),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FILTER_BY={INDICATION:"INDICATION",STUDIES:"STUDIES"},t.UNCERTAINTY={LOW:"LOW",MEDIUM:"MEDIUM",HIGH:"HIGH"},t.LABELS={patient_allocation:"Patients",num_sites:"Sites",fsiv:"FP to FSIV",sas:"SAS","25_si":"FP to 25%SI","50_si":"FP to 50%SI","90_si":"FP to 90%SI",fpfv:"SIV to FPFV",randomisation_rate:"RR",screening_failure:"SF%"},t.FIELDS={num_sites:"num_sites",patient_allocation:"num_patients",fsiv:"fp_fsiv",sas:"sas","25_si":"si_25","50_si":"si_50","90_si":"si_90",fpfv:"fsiv_fpfv",randomisation_rate:"randomisation_rate",screening_failure:"screening_failure"},t.CELL_TO_PARAMETER_UNCERTAINTY={fsiv:"fsiv",sas:"sas","25_si":"si_25","50_si":"si_50","90_si":"si_90",fpfv:"fpfv",randomisation_rate:"randomisation_rate",screening_failure:"screen_failure_rate"},t.PERCENTAGE_COLUMNS=["screening_failure","sas"]},,,,,,,,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){var n=t.countries.reduce(function(e,t){var n=(0,h.getMomentDate)((0,p.default)(t,"actualTimeseriesSnapshot.actual_date",a.clone()));return!e||n>e?n:e},null),r=n?n.diff(a,"w")+1:1;Object.values(e).map(function(e){var t=e;return t.curves=t.curves.map(function(e){return e.reduce(function(e,t){if(0===e.length)e.push(t);else{var a=e[e.length-1];if(a[0]===t[0]){var n=e[e.length-2];n&&n[0]===a[0]||a[1]===t[1]||e.push(t)}else e.push(t)}return e},[]).reduce(function(e,t){var a=e.day,n=e.arr,i=t[0],l=n[n.length-1]?n[n.length-1][1]:0;if(i===r){for(var o=0;o<=6;o+=1)n.push([a+=1,t[1]]);e.week=i,e.day=a}else if(e.week!==i){for(var s=0;s<=6;s+=1)s<=5?n.push([a+=1,l]):n.push([a+=1,t[1]]);e.week=i,e.day=a}else n.push([e.day,t[1]]);return e},{day:0,arr:[],week:0}).arr}),t.fpfv_lpfv*=7,t.fpfv_fpft*=7,t.fpp_fpfv*=7,t})}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=t.extractApprovedData=t.getFormattedDate=t.serializeScenarioData=t.deserializeScenarioData=t.dateDeserializer=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(40),o=n(l),s=a(81),u=n(s),d=a(54),c=n(d),f=a(12),p=n(f),h=a(8),v=a(10),m=a(20),_=["fsiv","25_si","50_si","90_si","fpfv","lpft","fpft","original_f_lpft","actual_date","actual_f_lpft","actual_fsiv","actual_fpfv","actual_fpft","actual_lpfv","lpfv","target_lpft","createdAt","updated","updatedAt","end_date","scenarioStartDate","fp"],E=function(e){var t=e;if(e){var a=e.toString(),n=a.indexOf(".");if(n>0){var r=a.substring(0,n),i=a.substring(n,a.length);t=r+(i&&i.length>3?i.substring(0,3)+"...":i)}}return t},g=t.dateDeserializer=function(e,t){return-1!==_.indexOf(e)?(0,h.getMomentDate)(t):t},y=t.deserializeScenarioData=function(e){try{var t=e.approved_data_snapshot,a=(0,h.getMomentDate)(t.fp),n=(0,h.getMomentDate)(t.target_lpft),i=t.fpfv_fpft,l=t.therapeutic_area,s=t.indication,u=t.target_num_patients;if(e.cohorts&&e.cohorts.length>0){var d=JSON.parse(t.aggregatedGlobalData,g);!t.daily&&d&&r({"_Global Rollup":d},e,a);var c=JSON.parse(t.cohorts,g);return c=c.map(function(e){var a=(0,o.default)(e);return a.fp=(0,h.getMomentDate)(e.fp),a.end_date=(0,h.getMomentDate)(e.end_date),a.fpfv_fpft=i,a.therapeutic_area=l,a.indication=s,a.target_num_patients=u,!t.daily&&a.fullData&&r(a.fullData,a,a.fp),a}),{aggregatedGlobalData:d,cohorts:c,fp:a,target_lpft:n,fpfv_fpft:i,therapeutic_area:l,indication:s,target_num_patients:u,daily:t.daily}}if(t.fullData){var f=JSON.parse(t.fullData,g);return!t.daily&&f&&r(f,e,a),{fullData:f,fp:a,target_lpft:n,fpfv_fpft:i,therapeutic_area:l,indication:s,target_num_patients:u,daily:t.daily}}throw new Error("No snapshot available - scenarioId: "+e.name+";\n     scenarioName: "+e.name+"; status: "+e.status)}catch(e){return console.log(e),null}};t.serializeScenarioData=function(e,t,a){try{if(t.cohorts&&t.cohorts.length>0){var n=t.cohorts.map(function(e){var a=e.fullData.map(function(e){var a=(0,c.default)(e,t.source_scenario_id?v.ADJUSTED_COUNTRY_DATA_FIELDS:v.APPROVED_COUNTRY_DATA_FIELDS);return void 0!==a.region_id&&void 0===a.country_name&&(a.region_name=a.location),Object.keys(a).reduce(function(e,t){var n=i({},e);return n[t.replace("adjusted_","")]=a[t],n},{})}).reduce(function(e,t){return e[(void 0!==t.country_name?t.region_name:"")+"_"+t.location]=t,e},{});return i({},e,{fullData:a})});return{daily:!0,aggregatedGlobalData:JSON.stringify((0,c.default)(t.aggregatedGlobalData,v.APPROVED_COUNTRY_DATA_FIELDS)),cohorts:JSON.stringify(n),fp:t.fp,target_lpft:t.end_date,target_num_patients:e.target_num_patients,fpfv_fpft:e.fpfv_fpft,therapeutic_area:e.therapeutic_area,indication:e.indication}}var r=a.map(function(e){var a=(0,c.default)(e,t.source_scenario_id?v.ADJUSTED_COUNTRY_DATA_FIELDS:v.APPROVED_COUNTRY_DATA_FIELDS);return void 0!==a.region_id&&void 0===a.country_name&&(a.region_name=a.location),Object.keys(a).reduce(function(e,t){var n=i({},e);return n[t.replace("adjusted_","")]=a[t],n},{})}).reduce(function(e,t){return e[(void 0!==t.country_name?t.region_name:"")+"_"+t.location]=t,e},{});return{daily:!0,fullData:JSON.stringify(r),fp:t.fp,target_lpft:t.end_date,target_num_patients:e.target_num_patients,fpfv_fpft:e.fpfv_fpft>=0?e.fpfv_fpft:14,therapeutic_area:e.therapeutic_area,indication:e.indication}}catch(e){return console.log(e),null}},t.getFormattedDate=function(e){var t=(0,h.getMomentDate)(e);return t?t.format(m.DATE_FORMAT):""},t.default=E,t.extractApprovedData=function(e){if(e&&e.approved_data_snapshot){var t=y(e);if(t)return i({},(0,u.default)(e,"approved_data_snapshot"),{approvedData:t,approved_fp:t.fp,approved_end_date:t.target_lpft,approved_fpfv_fpft:t.fpfv_fpft,approved_target_num_patients:t.target_num_patients,cohorts:e.cohorts.map(function(e){var a=t.cohorts.find(function(t){return t.name===e.name});return a?i({},e,{approved_fp:a.fp,approved_end_date:a.end_date}):e})})}return e},t.formatDate=function(e,t){var a=(0,h.getMomentDate)(e);return a?a.format(t):"n/a"}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s={isNegative:o.default.bool},u={isNegative:!1},d=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{fill:"#000",d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}))),c=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{stroke:"#000",strokeWidth:"2",d:"M20.999 19.864L20.99 5c0-.551-.446-1-.99-1H4c-.548 0-1 .452-1 1v10c0 .548.452 1 1 1h12.362l4.637 3.864z"}),i.default.createElement("path",{fill:"#000",d:"M6 7h12v2H6zM6 11h12v2H6z"}))),f=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M0 0h24v24H0z"}),i.default.createElement("path",{fill:"#000",d:"M16.5 13c-1.2 0-3.07.34-4.5 1-1.43-.67-3.3-1-4.5-1C5.33 13 1 14.08 1\n          16.25V19h22v-2.75c0-2.17-4.33-3.25-6.5-3.25zm-4 4.5h-10v-1.25c0-.54 2.56-1.75 5-1.75s5 1.21 5 1.75v1.25zm9\n          0H14v-1.25c0-.46-.2-.86-.52-1.22.88-.3 1.96-.53 3.02-.53 2.44 0 5 1.21 5 1.75v1.25zM7.5 12c1.93 0 3.5-1.57\n          3.5-3.5S9.43 5 7.5 5 4 6.57 4 8.5 5.57 12 7.5 12zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9\n          5.5c1.93 0 3.5-1.57 3.5-3.5S18.43 5 16.5 5 13 6.57 13 8.5s1.57 3.5 3.5 3.5zm0-5.5c1.1 0 2 .9 2 2s-.9\n          2-2 2-2-.9-2-2 .9-2 2-2z"}))),p=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12.5 6H11v6l4.75 2.85.75-1.23-4-2.37V6zM12 2a9 9 0 0 0-9 9c0 4.97 4.02 9 9 9a9 9 0 0 0 0-18zm0\n        16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})),h=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"#9d9d9d",fillRule:"evenodd"},i.default.createElement("path",{d:"M10 19h3v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5h4.286c.786 0 1.428.675 1.428\n          1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2s.893-2 2-2 2 .893 2 2-.893 2-2 2z"}),i.default.createElement("path",{d:"M18 19h3v3H11v-3h3v-5h-1.571V8.5c0-.825.642-1.5 1.428-1.5h4.286c.786 0 1.428.675 1.428\n          1.5V14H18v5zM16 6c-1.107 0-2-.893-2-2s.893-2 2-2 2 .893 2 2-.893 2-2 2z"}))),v=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#9d9d9d",fillRule:"evenodd",d:"M16.53 11.06L15.47 10l-4.88 4.88-2.12-2.12-1.06 1.06L10.59 17l5.94-5.94zM19 3h-1V1h-2v2H8V1H6v2H5c-1.11\n        0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"})),m=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M0 0h24v24H0z"}),i.default.createElement("path",{fill:"#000",d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))),_=i.default.createElement("svg",{width:"48px",height:"24px",viewBox:"0 0 48 24"},i.default.createElement("g",{stroke:"#9d9d9d"},i.default.createElement("line",{x1:"2",y1:"12",x2:"46",y2:"12",strokeWidth:2}),i.default.createElement("line",{x1:"40",y1:"6",x2:"46",y2:"12",strokeWidth:2}),i.default.createElement("line",{x1:"40",y1:"18",x2:"46",y2:"12",strokeWidth:2}))),E=i.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{stroke:"#9d9d9d"},i.default.createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12",strokeWidth:2}),i.default.createElement("line",{x1:"16",y1:"6",x2:"22.5",y2:"12.5",strokeWidth:2}),i.default.createElement("line",{x1:"16",y1:"18",x2:"22.5",y2:"11.5",strokeWidth:2}))),g=i.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{stroke:"#000000"},i.default.createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12",strokeWidth:2}),i.default.createElement("line",{x1:"2",y1:"12",x2:"9",y2:"6",strokeWidth:2}),i.default.createElement("line",{x1:"2",y1:"12",x2:"9",y2:"18",strokeWidth:2}))),y=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5\n          4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})),S=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M14.5 15h-.79l-.28-.27A6.471 6.471 0 0 0 15 10.5 6.5 6.5 0 1 0 8.5 17c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L19.49 20l-4.99-5zm-6 0C6.01 15 4 12.99 4 10.5S6.01 6 8.5 6 13 8.01 13 10.5 10.99 15 8.5 15zM15 2h8l-3 5v2l-2 1V6.984L15 2z"})),b=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"#000",fillRule:"evenodd"},i.default.createElement("path",{fillRule:"nonzero",d:"M14.5 15h-.79l-.28-.27A6.471 6.471 0 0 0 15 10.5 6.5 6.5 0 1 0 8.5\n          17c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L19.49 20l-4.99-5zm-6\n          0C6.01 15 4 12.99 4 10.5S6.01 6 8.5 6 13 8.01 13 10.5 10.99 15 8.5 15z"}),i.default.createElement("path",{d:"M20 5V2h-2v3h-3v2h3v3h2V7h3V5h-3z"}))),C=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"21",viewBox:"0 0 23 21"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M-1 0h24v24H-1z"}),i.default.createElement("path",{fill:"#000",d:"M2 3C.9 3 0 3.9 0 5v12c0 1.1.9 2 2 2h5v2h8v\n      -2h5c1.1 0 1.99-.9 1.99-2l.006-7L22 3H2zm0 14V5h10V3h10v8h-2v6H2zm11-9H7v2h6V8zm5 4H7v2h11v\n      -2zM4 8v2h2V8H4zm2 4v2H4v-2h2zm15.704-7.044l.96.745c.08.071.107.188.053.287l-.897 1.55c-.062.1\n      -.179.135-.278.1l-1.12-.45c-.224.18-.484.324-.753.44l-.17 1.184a.23.23 0 0 1-.225.188h-1.793a.223.223 0 0 1\n      -.224-.188l-.17-1.184a3.067 3.067 0 0 1-.763-.44l-1.111.45c-.108.035-.224 0-.278-.1l-.897-1.55a.233.233 0 0\n      1 .054-.287l.95-.745a3.504 3.504 0 0 1 0-.878l-.95-.744a.222.222 0 0 1-.054-.287l.897-1.551c.063-.099.18\n      -.135.278-.099l1.111.448c.234-.179.494-.322.763-.439l.17-1.183a.23.23 0 0 1 .224-.189h1.793c.108 0\n      .206.081.215.189l.17 1.183c.279.108.53.26.763.44l1.112-.449c.107-.036.224 0 .277.099l.897 1.55a.233.233 0 0 1\n      -.054.288l-.95.744c.027.143.036.287.036.44 0 .152-.018.295-.036.438zm-3.326.906c.744 0 1.344-.6 1.344-1.345 0\n      -.744-.6-1.345-1.344-1.345-.745 0-1.345.601-1.345 1.345s.6 1.345 1.345 1.345z"}))),O=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"18",viewBox:"0 0 22 18"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M-1-3h24v24H-1z"}),i.default.createElement("path",{fill:"#000",d:"M20 0H2C.9 0 0 .9 0 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L22 2c0-1.1-.9-2-2-2zm0 14H2V2h18v12zM4 5v2h2V5H4zm2 4H4v2h2V9z"}),i.default.createElement("path",{fill:"#000",d:"M7 5v2h6V5H7zm2 4H7v2h2v1h2V8H9v1zm9 2V9h-6v2h6zm-2-3V7h2V5h-2V4h-2v4h2z"}))),T=i.default.createElement("svg",{style:{width:"18px",height:"18px"},version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 563.43 563.43"},i.default.createElement("path",{d:"M280.79,314.559c83.266,0,150.803-67.538,150.803-150.803S364.055,13.415,280.79,13.415S129.987,80.953,\n        129.987,163.756 S197.524,314.559,280.79,314.559z M280.79,52.735c61.061,0,111.021,49.959,111.021,\n        111.021S341.851,274.776,280.79,274.776 s-111.021-49.959-111.021-111.021S219.728,52.735,280.79,52.735z"}),i.default.createElement("path",{d:"M19.891,550.015h523.648c11.102,0,19.891-8.789,\n        19.891-19.891c0-104.082-84.653-189.198-189.198-189.198H189.198 C85.116,340.926,0,425.579,0,530.124C0,541.226,\n        8.789,550.015,19.891,550.015z M189.198,380.708h185.034 c75.864,0,138.313,56.436,148.028,129.524H41.17C50.884,\n        437.607,113.334,380.708,189.198,380.708z"})),R=i.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{fill:"#000",d:"M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9\n          1.99-2L23 5c0-1.1-.9-2-2-2zm0 14H3V5h18v12zm-2-9H8v2h11V8zm0 4H8v2h11v-2zM7 8H5v2h2V8zm0 4H5v2h2v-2z"}))),A=i.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#9d9d9d",fillRule:"evenodd",d:"M9 11H7v2h2v-2zm3 3h-2v2h2v-2zm3 2v2h2v-2h-2zm0-5h2v2h-2v-2zm4-7h-1V2h-2v2H8V2H6v2H5c-1.11\n        0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"})),I=i.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24","data-test":"globe-btn"},i.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93\n        6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91\n        3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14\n        1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0\n        1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12\n        19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91\n        3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07\n        1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2\n        0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"})),w=i.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),N=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#9d9d9d",fillRule:"evenodd",d:"M9.31 17l2.44-2.44L14.19 17l1.06-1.06-2.44-2.44 2.44-2.44L14.19 10l-2.44 2.44L9.31 10l-1.06 1.06 2.44\n        2.44-2.44 2.44L9.31 17zM19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9\n        2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"})),D=i.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41\n                12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0\n                18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})),P=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"#000",fillRule:"evenodd"},i.default.createElement("path",{d:"M16 20.377V21h6v-6.623l-2 2V19h-2v-.623l-2 2zm0-10.692V3h6v.685l-2 2V5h-2v2.685l-2 2zm-7 7V3h6v7.685l-2 2V5h-2v9.685l-2 2zM3 21H2V3h6v18H3zm1-2h2V5H4v14zM22.8 9.793a.678.678 0 0 1 0 .96L20.555 13 18 10.446l2.246-2.247a.678.678 0 0 1 .96 0l1.595 1.594zM10 18.468L17.468 11 20 13.532 12.532 21H10v-2.532z"}))),L=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",style:{background:"#fff"},viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"#000",fillRule:"evenodd"},i.default.createElement("path",{fillRule:"nonzero",d:"M2 4h10v2H2V4zm2 4h8v2H4V8zm4 4h4v2H8v-2z"}),i.default.createElement("path",{d:"M16 2v16.17l-2.59-2.58L12 17l5 5 5-5-1.41-1.41L18 18.17V2z"}))),M=i.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M15.755 8.817l1.428 1.414-4.996 4.952-5.004-4.946 1.432-1.418 3.586 3.55z"})),k=i.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M15.755 15.183l1.428-1.414-4.996-4.952-5.004 4.946 1.432 1.418 3.586-3.55z"})),x=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",style:{background:"#fff"},viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"#000",fillRule:"evenodd"},i.default.createElement("path",{fillRule:"nonzero",d:"M2 20h10v-2H2v2zm2-4h8v-2H4v2zm4-4h4v-2H8v2z"}),i.default.createElement("path",{d:"M16 22V5.83l-2.59 2.58L12 7l5-5 5 5-1.41 1.41L18 5.83V22z"}))),j=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},i.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M8.6 7.4L10 6l6 6-6 6-1.4-1.4 4.6-4.6z"})),F=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},i.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m16,16.6l-1.4,1.4l-6,-6l6,-6l1.4,1.4l-4.6,4.6l4.6,4.6z"})),U=i.default.createElement("svg",{width:"20",height:"18",viewBox:"0 0 20 18"},i.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M10 4V0H0v18h20V4H10zM4 16H2v-2h2v2zm0-4H2v-2h2v2zm0-4H2V6h2v2zm0-4H2V2h2v2zm4\n      12H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V6h2v2zm0-4H6V2h2v2zm10\n      12h-8v-2h2v-2h-2v-2h2V8h-2V6h8v10zm-2-8h-2v2h2V8zm0 4h-2v2h2v-2z"})),V=i.default.createElement("div",{width:"24",height:"24",style:{padding:"2px"}},i.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M-3-3h24v24H-3z"}),i.default.createElement("path",{d:"M-3-3h24v24H-3z"}),i.default.createElement("path",{fill:"#000",d:"M0 14v2h6v-2H0zM0 2v2h10V2H0zm10 16v-2h8v-2h-8v-2H8v6h2zM4\n          6v2H0v2h4v2h2V6H4zm14 4V8H8v2h10zm-6-4h2V4h4V2h-4V0h-2v6z"})))),B=i.default.createElement("svg",{className:"icon-more-horiz",width:"24px",height:"24px",viewBox:"0 0 24 24","data-test":"more-btn"},i.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.default.createElement("g",{fill:"#000000"},i.default.createElement("path",{d:"M6,10 C4.9,10 4,10.9 4,12 C4,13.1 4.9,14 6,14 C7.1,14 8,13.1 8,12 C8,10.9 7.1,10 6,10 L6,10 Z M18,10\n          C16.9,10 16,10.9 16,12 C16,13.1 16.9,14 18,14 C19.1,14 20,13.1 20,12 C20,10.9 19.1,10 18,10 L18,10 Z M12,10\n          C10.9,10 10,10.9 10,12 C10,13.1 10.9,14 12,14 C13.1,14 14,13.1 14,12 C14,10.9 13.1,10 12,10 L12,10 Z"})))),H=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24","data-test":"duplicate-btn"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M-1-2h24v24H-1z"}),i.default.createElement("path",{fill:"#000",d:"M6 4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h4v2h6v-2h\n        4c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H6zm14 12H6V6h14v10zm-2-8h\n          -7v2h7V8zm0 4h-7v2h7v-2zM8 8v2h2V8H8zm0 4h2v2H8v-2zM2 0h16v2H2v12H0V2C0 .9.9 0 2 0z"}))),G=function(e){var t=e.isNegative;return i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M-1-2h24v24H-1z"}),i.default.createElement("path",{fill:t?"#FFF":"#000",d:"M6 4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h4v2h6v-2h\n        4c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H6zm14 12H6V6h14v10zm-2-8h\n          -7v2h7V8zm0 4h-7v2h7v-2zM8 8v2h2V8H8zm0 4h2v2H8v-2zM2 0h16v2H2v12H0V2C0 .9.9 0 2 0z"})))};G.propTypes=s,G.defaultProps=u;var Y=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24","data-test":"edit-btn"},i.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.default.createElement("polygon",{points:"0 0 24 0 24 24 0 24"}),i.default.createElement("path",{fill:"#000000",d:"M3,17.25 L3,21 L6.75,21 L17.81,9.94 L14.06,6.19 L3,\n          17.25 L3,17.25 Z M20.71,7.04 C21.1,6.65 21.1,6.02 20.71,\n          5.63 L18.37,3.29 C17.98,2.9 17.35,2.9 16.96,3.29 L15.13,\n          5.12 L18.88,8.87 L20.71,7.04 L20.71,7.04 Z"}))),z=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"21",viewBox:"0 0 22 21","data-test":"create-new-scenario"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M-1 0h24v24H-1z"}),i.default.createElement("path",{fill:"#000",d:"M2 3C.9 3 0 3.9 0 5v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2l.006-7L22 3H2zm0\n          14V5h9V3h11v6h-2v8H2zm12-9H7v2h7V8zm4 4H7v2h11v-2zM4 8v2h2V8H4zm2 4H4v2h2v-2z"}),i.default.createElement("path",{fill:"#000",d:"M19 3V0h-2v3h-3v2h3v3h2V5h3V3h-3z"}))),W=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"18",viewBox:"0 0 22 18"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M-1-3h24v24H-1z"}),i.default.createElement("path",{fill:"#000",d:"M20 0H2C.9 0 0 .9 0 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L22 2c0-1.1-.9-2-2-2zm0\n        14H2V2h18v12z"}),i.default.createElement("path",{fill:"#000",d:"M12 2h8v12h-8z"}),i.default.createElement("path",{fill:"#FFF",d:"M10 0h2v16h-2z"}),i.default.createElement("path",{fill:"#000",d:"M4 10.175l1.41 1.41L9 8.005l-3.59-3.59L4 5.835l2.17 2.17z"}),i.default.createElement("path",{fill:"#FFF",d:"M19 10.175l-1.41 1.41L14 8.005l3.59-3.59L19 5.835l-2.17 2.17z"}))),q=i.default.createElement("svg",{className:"icon-archive",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"22",viewBox:"0 0 24 22"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{fill:"#000",d:"M3 5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 1.99-.9 1.99-2L23 7c0-1.1-.9-2-2-2H3zm18\n        14H3V7h18v12zm-2-9H8v2h11v-2zm0 4H8v2h11v-2zM7 10H5v2h2v-2zm0 4H5v2h2v-2zM21 4.01h1.997L23\n        2c0-1.1-.9-2-2-2H3C1.9 0 1 .9 1 2v2l2 .001V2h18v2.01z"}),i.default.createElement("g",{transform:"translate(0 -2)"},i.default.createElement("path",{stroke:"#000",fill:"#000",strokeWidth:"2",d:"M1 16h22v7H1z"})),i.default.createElement("path",{fill:"#FFF",d:"M8 15h8v4H8z"}))),K=function(e){var t=e.isNegative;return i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"22",viewBox:"0 0 24 22"},i.default.createElement("defs",null,i.default.createElement("path",{id:"a",d:"M0 15h24v9H0z"})),i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M0-2h24v24H0z"}),i.default.createElement("path",{fill:t?"#FFF":"#000",d:"M3 5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 1.99-.9 1.99-2L23 7c0-1.1-.9-2-2-2H3zm18\n        14H3V7h18v12zm-2-9H8v2h11v-2zm0 4H8v2h11v-2zM7 10H5v2h2v-2zm0 4H5v2h2v-2zM21 4.01h1.997L23\n        2c0-1.1-.9-2-2-2H3C1.9 0 1 .9 1 2v2l2 .001V2h18v2.01z"}),i.default.createElement("g",{transform:"translate(0 -2)"},i.default.createElement("path",{stroke:t?"#FFF":"#000",fill:t?"#FFF":"#000",strokeWidth:"2",d:"M1 16h22v7H1z"})),i.default.createElement("path",{fill:t?"#000":"#FFF",d:"M8 15h8v4H8z"})))};K.propTypes=s,K.defaultProps=u;var X=function(e){var t=e.isNegative;return i.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:t?"#FFF":"#000",fillRule:"evenodd",d:"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41\n                12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0\n                18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}))};X.propTypes=s,X.defaultProps=u;var Z=i.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24","data-test":"export-btn"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M0 0h24v24H0z"}),i.default.createElement("path",{fill:"#000",d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}))),J=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","data-test":"save-btn"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M0 0h24v24H0z"}),i.default.createElement("path",{d:"M0 0h24v24H0z"}),i.default.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}))),Q=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2\n      2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})),$=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16.66 11.003h-3.663V7.34h-1.994v3.663H7.34v1.994h3.663v3.663h1.994v\n        -3.663h3.663v-1.994zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10\n        -10S17.53 2 12 2zM4 12c0-4.41 3.59-8 8-8s8 3.59 8 8-3.59 8-8 8-8-3.59-8-8z"})),ee=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 14"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M-1-3h24v24H-1z"}),i.default.createElement("path",{fill:"#000",d:"M20 0H2C.9 0 0 .9 0 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L22 2c0-1.1-.9-2-2-2zm0 14H2V2h18v12z"}),i.default.createElement("path",{fill:"#000",d:"M12.722 5.4V3L17 7.2l-4.278 4.2V8.94C9.667 8.94 7.528 9.9 6 12c.611-3 2.444-6 6.722-6.6z"}))),te=function(e){var t=e.isNegative;return i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M-1-3h24v24H-1z"}),i.default.createElement("path",{fill:t?"#FFF":"#000",d:"M20 0H2C.9 0 0 .9 0 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L22 2c0-1.1-.9-2-2-2zm0 14H2V2h18v12z"}),i.default.createElement("path",{fill:t?"#FFF":"#000",d:"M12.722 5.4V3L17 7.2l-4.278 4.2V8.94C9.667 8.94 7.528 9.9 6 12c.611-3 2.444-6 6.722-6.6z"})))};te.propTypes=s,te.defaultProps=u;var ae=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"20",viewBox:"0 0 18 20"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M-3-2h24v24H-3z"}),i.default.createElement("path",{fill:"#000",d:"M15 14.08c-.76 0-1.44.3-1.96.77L5.91 10.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L5.04 7.81C4.5 7.31 3.79 7 3 7c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92 0-1.61-1.31-2.92-2.92-2.92z"}))),ne=function(e){var t=e.isNegative;return i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"20",viewBox:"0 0 18 20"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M-3-2h24v24H-3z"}),i.default.createElement("path",{fill:t?"#FFF":"#000",d:"M15 14.08c-.76 0-1.44.3-1.96.77L5.91 10.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L5.04 7.81C4.5 7.31 3.79 7 3 7c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92 0-1.61-1.31-2.92-2.92-2.92z"})))},re=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"21",viewBox:"0 0 23 21","data-test":"approve-scenario-btn"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M-1 0h24v24H-1z"}),i.default.createElement("path",{fill:"#000",d:"M2 3C.9 3 0 3.9 0 5v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2l.006-7L22 3H2zm0 14V5h9V3h11v6h-2v8H2zm12-9H7v2h7V8zm4 4H7v2h11v-2zM4 8v2h2V8H4zm2 4H4v2h2v-2z"}),i.default.createElement("path",{fill:"#000",d:"M16.469 8L13 4.5l1.397-1.41 2.072 2.08L21.603 0 23 1.41 16.469 8z"}))),ie=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"24",height:"24"},i.default.createElement("g",null,i.default.createElement("path",{d:"M 9 2 L 9 3 L 12.292969 3 L 6.023438 9.273438 L 6.726563 9.976563 L 13 3.707031 L 13 7 L 14 7 L 14 2 Z M 4 4 C 2.894531 4 2 4.894531 2 6 L 2 12 C 2 13.105469 2.894531 14 4 14 L 10 14 C 11.105469 14 12 13.105469 12 12 L 12 7 L 11 8 L 11 12 C 11 12.550781 10.550781 13 10 13 L 4 13 C 3.449219 13 3 12.550781 3 12 L 3 6 C 3 5.449219 3.449219 5 4 5 L 8 5 L 9 4 Z "}))),le=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},i.default.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M5.494 8.99L2.37 12.178l-1.09-1.09c-.235-.235-.474-.486-.76-.487a.514.514 0 0\n      0-.515.516l.006 4.307a.51.51 0 0 0 .174.38.513.513 0 0 0 .38.174l4.308.006c.285 0\n      .516-.23.515-.515 0-.285-.333-.606-.476-.749l-1.09-1.09 3.17-3.14-1.498-1.498zM15.973.574a.523.523 0 0\n      0-.177-.39.52.52 0 0 0-.387-.177L11.03 0a.525.525 0 0 0-.525.528c0 .291.339.62.484.766l1.108 1.115-3.105\n      3.084 1.499 1.5 3.083-3.098 1.108 1.115c.24.242.483.498.773.499.29 0 .525-.236.525-.528L15.973.573z"})),oe=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},i.default.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M6.815 9.181a.512.512 0 0 0-.381-.174l-4.311-.006a.515.515 0 0 0-.516.516c0\n      .286.333.607.476.75l1.09 1.09L0 14.5 1.5 16l3.127-3.189 1.09 1.09c.236.237.476.488.761.488.286 0\n      .517-.23.516-.516l-.006-4.311a.512.512 0 0 0-.173-.381zm6.077-4.593L16 1.5 14.5 0l-3.087\n      3.1-1.109-1.116c-.24-.242-.483-.499-.773-.5a.526.526 0 0 0-.525.528l.006 4.413c0\n      .156.07.293.177.39a.52.52 0 0 0 .387.178l4.385.006c.29 0\n      .525-.236.525-.528 0-.292-.339-.621-.484-.767l-1.11-1.116z"})),se=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},i.default.createElement("g",{fill:"#000",fillRule:"nonzero"},i.default.createElement("path",{d:"M5.494 8.99L2.37 12.178l-1.09-1.09c-.235-.235-.474-.486-.76-.487a.514.514 0 0\n      0-.515.516l.006 4.307a.51.51 0 0 0 .174.38.513.513 0 0 0 .38.174l4.308.006c.285 0\n      .516-.23.515-.515 0-.285-.333-.606-.476-.749l-1.09-1.09 3.17-3.14-1.498-1.498zM15.973.574a.523.523 0 0\n      0-.177-.39.52.52 0 0 0-.387-.177L11.03 0a.525.525 0 0 0-.525.528c0 .291.339.62.484.766l1.108 1.115-3.105\n      3.084 1.499 1.5 3.083-3.098 1.108 1.115c.24.242.483.498.773.499.29 0 .525-.236.525-.528L15.973.573zM10.506\n      8.99l3.124 3.187 1.09-1.09c.235-.235.474-.486.76-.487.285 0 .516.23.515.516l-.006 4.307a.51.51 0 0\n      1-.174.38.513.513 0 0 1-.38.174l-4.308.006a.514.514 0 0 1-.515-.515c0-.285.333-.606.476-.749l1.09-1.09-3.17-3.14\n      1.498-1.498zM.027.574c0-.156.07-.292.177-.39A.52.52 0 0 1 .591.007L4.97 0c.29 0 .525.236.525.528 0\n      .291-.339.62-.484.766L3.904 2.409l3.105 3.084-1.499 1.5-3.083-3.098L1.319\n      5.01c-.24.242-.483.498-.773.499a.525.525 0 0 1-.525-.528L.027.573z"}))),ue=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"#000",fillRule:"evenodd"},i.default.createElement("path",{d:"M10 19h3v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5h4.286c.786 0 1.428.675 1.428 1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2s.893-2 2-2 2 .893 2 2-.893 2-2 2z"}),i.default.createElement("path",{d:"M19.5 22H11v-3h3v-5h-1.571V8.5c0-.825.642-1.5 1.428-1.5h4.286c.786 0 1.428.675 1.428 1.5V11H18v11h1.5zM16 6c-1.107 0-2-.893-2-2s.893-2 2-2 2 .893 2 2-.893 2-2 2z"}),i.default.createElement("circle",{cx:"21",cy:"21",r:"1"}),i.default.createElement("path",{d:"M20 13h2v6h-2z"}))),de=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M0 0h24v24H0z"}),i.default.createElement("circle",{cx:"12",cy:"12",r:"11",fill:"#9D9D9D"}),i.default.createElement("path",{stroke:"#FFF",strokeWidth:"2",d:"M12 11c1.66 0 2.99-1.34 2.99-3S13.66 5 12 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zM12 13c-2 0-6 1-6 3v2h12v-2c0-2-4-3-6-3z"}))),ce=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fillRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})),fe=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fillRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55\n        1.69-4.9L16.9 18.31A7.902 7.902 0 0 1 12 20zm6.31-3.1L7.1 5.69A7.902 7.902 0 0 1 12 4c4.42 0 8 3.58 8 8 0\n        1.85-.63 3.55-1.69 4.9z"})),pe=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fillRule:"evenodd",d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})),he=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fillRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM6 12.42l1.41-1.41L10 13.59 16.59 7\n        18 8.42l-8 8-4-4z"})),ve=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M0 0h24v24H0z"}),i.default.createElement("path",{fill:"#000",d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"}))),me=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",style:{background:"#fff"},viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{stroke:"#9C28C6",strokeWidth:"2",d:"M5 19c4-3.333 6.5-5.667 7.5-7C14 10 15 9 20 9"}),i.default.createElement("path",{stroke:"#19A9E0",strokeWidth:"2",d:"M6 19c2.667-1.333 5-2.667 7-4 3-2 5-2 7-2"}),i.default.createElement("path",{stroke:"#FCB13B",strokeWidth:"2",d:"M5 18c1.333-.667 2.333-2 3-4 1-3 2-9 6-9"}),i.default.createElement("path",{fill:"#000",d:"M6 4H4v14a2 2 0 0 0 2 2h14v-2H6V4z"}))),_e=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",style:{background:"#000"},viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M0 0h24v24H0z"}),i.default.createElement("path",{fill:"#FFF",d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12\n        17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3\n        3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}))),Ee=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M0 0h24v24H0z"}),i.default.createElement("path",{fill:"#FFF",d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89\n        3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12\n        7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0\n        3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0\n        1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55\n        1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15\n        3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}))),ge=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"#000",fillRule:"evenodd"},i.default.createElement("path",{d:"M10 7l5 5-5 5-5-5z"}),i.default.createElement("path",{d:"M10.005 3l9 9-9 9-1-1 8-8L9 4z"}))),ye=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("circle",{cx:"12",cy:"12",r:"9",stroke:"#000",strokeWidth:"2"}),i.default.createElement("circle",{cx:"12",cy:"12",r:"6",fill:"#000"}))),Se=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9\n      2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11zm-7-3.57L14.472 17l-.656-2.96L16\n      12.048l-2.876-.256L12 9l-1.124 2.792L8 12.048l2.184 1.992L9.528 17 12 15.43z"})),be=i.default.createElement("svg",{height:"28px",width:"8px",viewBox:"0 0 8 28"},i.default.createElement("g",{stroke:"#c6c6c6"},i.default.createElement("line",{x1:"8",y1:"0",x2:"0",y2:"28",strokeWidth:"1"}))),Ce=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M19 4V2h-2v2h-7V2H8v2H7c-1.11 0-1.99.9-1.99 2L5 17a2 2 0 0 0 2 2h13c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-1zm1\n      13H7V8h13v9zm-6.5-2.374L11.337 16l.574-2.59L10 11.667l2.517-.224L13.5 9l.983 2.443\n      2.517.224-1.911 1.743.574 2.59-2.163-1.374zM4 22c-1.1 0-2-.9-2-2V8h2v12h16v2H4z"})),Oe=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M22 8.986l-7.19-.598L12 2 9.19 8.397 2 8.986l5.46 4.564-1.64 6.783L12 16.734l6.18 3.6-1.63-6.784L22\n      8.986zM12 14.93V5.956l1.71 3.898 4.38.367L14.77 13l1 4.13-3.77-2.2z"})),Te=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M22 8.986l-7.19-.598L12 2 9.19 8.397 2 8.986l5.46 4.564-1.64 6.783L12 16.734l6.18 3.6-1.63-6.784L22\n      8.986zM12 14.93l-3.76 2.19 1-4.13-3.32-2.779 4.38-.366L12 5.956l1.71 3.898 4.38.367L14.77 13l1 4.13-3.77-2.2z"})),Re=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12 16.734l6.18 3.6-1.64-6.784L22 8.986l-7.19-.589L12 2 9.19 8.397 2 8.986l5.46 4.564-1.64 6.783z"})),Ae=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"20",viewBox:"0 0 16 20"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M-4-2h24v24H-4z"}),i.default.createElement("path",{fill:"#000",d:"M14 0H2C.9 0 0 .9 0 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9\n      2-2V2c0-1.1-.9-2-2-2zm0 10H6v2h8v-2zM4 10H2v2h2v-2zm10 4H6v2h8v-2zM4 14H2v2h2v-2zM2 2h5v6L4.5 6.5 2 8V2z"}))),Ie=i.default.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16"},i.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(-28.000000, -528.000000)"},i.default.createElement("g",null,i.default.createElement("g",{transform:"translate(0.000000, 31.000000)"},i.default.createElement("g",{transform:"translate(24.000000, 493.000000)"},i.default.createElement("g",null,i.default.createElement("polygon",{points:"0 0 24 0 24 24 0 24"}),i.default.createElement("path",{d:"M12,12 C14.21,12 16,10.21 16,8 C16,5.79 14.21,\n                4 12,4 C9.79,4 8,5.79 8,8 C8,10.21 9.79,12 12,12 L12,\n                12 Z M12,14 C9.33,14 4,15.34 4,18 L4,20 L20,20 L20,18 C20,15.34 14.67,14 12,14 L12,14 Z",id:"Shape",fill:"#000000"}))))))),we=i.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("g",{transform:"rotate(90 12 12)"},i.default.createElement("path",{stroke:"#000",strokeWidth:"2",d:"M12 3.414L3.414 12 12 20.586 20.586 12 12 3.414z"})),i.default.createElement("path",{fill:"#000",d:"M16 12l-4 4-4-4 4-4z"}))),Ne=i.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M0 0h24v24H0z"}),i.default.createElement("path",{d:"M0 0h24v24H0z"}),i.default.createElement("path",{fill:"#000",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1\n      17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1\n      1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4\n      4c0 .88-.36 1.68-.93 2.25z"}))),De=i.default.createElement("svg",{width:"24",height:"24",style:{background:"#fff"},viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{fill:"#19A9E0",fillOpacity:".2",d:"M5 19c3.115-4.76 5.876-7.711 8.283-8.855C15.69 9 17.929 8.285\n      20 8v8.234c-1.097 0-2.448.125-4.052.374-2.407.374-5.477 1.608-6.467 2-.66.263-1.868.393-3.625.392H5z"}),i.default.createElement("path",{stroke:"#19A9E0",strokeWidth:"2",d:"M6 19c2.895-1.948 4.895-3.293 6-4.034\n      1.657-1.112 4.996-2.914 8.005-2.966"}),i.default.createElement("path",{fill:"#000",d:"M6 4H4v14a2 2 0 0 0 2 2h14v-2H6V4z"}))),Pe=i.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"#000",fillRule:"evenodd"},i.default.createElement("path",{d:"M10 19h11v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5\n      h4.286c.786 0 1.428.675 1.428 1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2\n      s.893-2 2-2 2 .893 2 2-.893 2-2 2zM13 5h8v2h-8z"}))),Le=i.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"#000",fillRule:"evenodd"},i.default.createElement("path",{d:"M10 19h11v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5\n      h4.286c.786 0 1.428.675 1.428 1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2\n      s.893-2 2-2 2 .893 2 2-.893 2-2 2zM16 2h2v8h-2z"}),i.default.createElement("path",{d:"M13 5h8v2h-8z"}))),Me=i.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"#000",fillRule:"evenodd"},i.default.createElement("path",{d:"M10 19h11v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5\n      h4.286c.786 0 1.428.675 1.428 1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2\n      s.893-2 2-2 2 .893 2 2-.893 2-2 2zM16 2h2v5h-2zM16 9h2v2h-2z"}))),ke=i.default.createElement("svg",{height:"24px",version:"1.1",viewBox:"0 0 16 16",width:"24px"},i.default.createElement("g",{fill:"none",fillRule:"evenodd",id:"Icons with numbers",stroke:"none",strokeWidth:"1"},i.default.createElement("g",{fill:"#000000",id:"Group",transform:"translate(-384.000000, -144.000000)"},i.default.createElement("path",{d:"M391.5,157 C389.014719,157 387,154.985281 387,152.5 C387,152.331018 387.009314,152.164211\n        387.027464,152 L385.018945,152 C385.00639,152.165053 385,152.33178 385,152.5 C385,156.089851 387.910149,159\n        391.5,159 C395.089851,159 398,156.089851 398,152.5 C398,149.078368 395.356198,146.27423 392,146.018945\n        L392,148.027464 C394.249941,148.27615 396,150.183701 396,152.5 C396,154.985281 393.985281,157 391.5,157\n        L391.5,157 Z M388,147 L392,150 L392,144 L388,147 L388,147 Z M388,147"})))),xe=i.default.createElement("svg",{viewBox:"0 0 24 24",width:"22",height:"22"},i.default.createElement("g",null,i.default.createElement("path",{d:"M 12 1 C 9.1277778 1 6.7189086 3.0461453 6.1230469 5.7871094 L 8.078125 6.2128906 C 8.4822632 4.3538547\n        10.072222 3 12 3 C 14.27619 3 16 4.7238095 16 7 L 16 8 L 6 8 C 4.9069372 8 4 8.9069372 4 10 L 4 20 C 4 21.093063\n        4.9069372 22 6 22 L 18 22 C 19.093063 22 20 21.093063 20 20 L 20 10 C 20 8.9069372 19.093063 8 18 8 L 18 7 C\n        18 3.6761905 15.32381 1 12 1 z M 6 10 L 18 10 L 18 20 L 6 20 L 6 10 z M 12 13 C 10.9 13 10 13.9 10 15 C 10 16.1\n        10.9 17 12 17 C 13.1 17 14 16.1 14 15 C 14 13.9 13.1 13 12 13 z"}))),je=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0\n      18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})),Fe=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),i.default.createElement("path",{d:"M12.5 8H11v6l4.75 2.85.75-1.23-4-2.37zm4.837-6.19l4.607 3.845-1.28 1.535-4.61-3.843zm-10.674 0l1.282\n    1.536L3.337 7.19l-1.28-1.536zM12 4c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zm0 16c-3.86\n    0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7z"})),Ue=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),i.default.createElement("path",{d:"M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12\n    16zm0-11.47L17.74 9 12 13.47 6.26 9 12 4.53z"})),Ve=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),i.default.createElement("path",{d:"M12 4.53L17.74 9l-1.89 1.47 1.43 1.42L21 9l-9-7-2.59 2.02 1.42 1.42zm9 9.54l-1.63-1.27-.67.52 1.43\n    1.43zM3.41.86L2 2.27l4.22 4.22L3 9l9 7 2.1-1.63 1.42 1.42-3.53 2.75-7.37-5.73L3 14.07l9 7 4.95-3.85L20.73\n    21l1.41-1.41L3.41.86zM12 13.47L6.26 9l1.39-1.08 5.02 5.02-.67.53z"})),Be=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),i.default.createElement("path",{d:"M14 4l2.29 2.29-2.88 2.88 1.42 1.42 2.88-2.88L20 10V4zm-4 0H4v6l2.29-2.29\n     4.71 4.7V20h2v-8.41l-5.29-5.3z"})),He=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M0 0v24h24V0z"}),i.default.createElement("path",{fill:"#000",d:"M12 4.055c-.69 0-1.25.56-1.25 1.25v8.05c0 .6903559.5596441 1.25 1.25 1.25s1.25-.5596441\n       1.25-1.25v-8.05c0-.69-.56-1.25-1.25-1.25z"}),i.default.createElement("circle",{cx:"12",cy:"17.823",r:"1.688",fill:"#000"}))),Ge=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"20",viewBox:"0 0 26 20"},i.default.createElement("g",{fill:"#000",fillRule:"evenodd"},i.default.createElement("ellipse",{cx:"3.888",cy:"1.875",fillRule:"nonzero",rx:"1.944",ry:"1.875"}),i.default.createElement("path",{fillRule:"nonzero",d:"M0 12.5V6.28C0 5.573.573 5 1.28 5h5.216c.707 0 1.28.573 1.28 1.28v6.22H6.221V20H1.555v-7.5H0z"}),i.default.createElement("ellipse",{cx:"12.96",cy:"1.875",fillRule:"nonzero",rx:"1.944",ry:"1.875"}),i.default.createElement("path",{fillRule:"nonzero",d:"M9.072 12.5V6.28c0-.707.573-1.28 1.28-1.28h5.216c.707 0\n        1.28.573 1.28 1.28v6.22h-1.555V20h-4.666v-7.5H9.072z"}),i.default.createElement("path",{d:"M26 10.756h-3.028v2.994h-1.72v-2.994h-3.028V9.244h3.028V6.25h1.72v2.994H26z"}))),Ye=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},i.default.createElement("g",{fill:"#979797",fillRule:"nonzero"},i.default.createElement("path",{d:"M8.826 7.955a1.714 1.714 0 0 0-2.167 1.65c0 .943.767 1.711 1.711 1.711a1.714 1.714 0 0 0\n      1.65-2.167l4.768-4.768.771.102 2.413-2.413-1.825-.242-.243-1.826-2.413 2.413.103.772-4.768 4.768z"}),i.default.createElement("path",{d:"M8.554 6.317l1.41-1.411a4.954 4.954 0 0 0-5.102 1.19 4.964 4.964 0 0 0 0 7.016 4.964 4.964 0 0 0\n      7.016 0 4.96 4.96 0 0 0 1.19-5.106l-1.41 1.41A3.295 3.295 0 1 1 6.04 7.275a3.277 3.277 0 0 1 2.513-.957z"}),i.default.createElement("path",{d:"M14.284 6.794A6.544 6.544 0 0 1 13 14.233a6.545 6.545 0 0 1-9.258 0 6.545 6.545 0 0 1 0-9.257\n      6.55 6.55 0 0 1 7.44-1.286l1.347-1.348C9.332.509 5.181.957 2.452 3.686a8.363 8.363 0 0 0 0 11.833 8.363\n      8.363 0 0 0 11.832 0c2.73-2.73 3.178-6.88 1.345-10.077l-1.345 1.352z"}))),ze=i.default.createElement("svg",{x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 40 40",enableBackground:"new 0 0 40 40"},i.default.createElement("path",{opacity:"0.2",fill:"#000",d:"M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n      s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,\n      5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n      c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,\n      11.634C31.834,26.541,26.626,31.749,20.201,31.749z"}),i.default.createElement("path",{fill:"#000",d:"M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n      C22.32,8.481,24.301,9.057,26.013,10.047z"},i.default.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"0.5s",repeatCount:"indefinite"}))),We=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.default.createElement("path",{fillRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})),qe=i.default.createElement("svg",{width:"12px",height:"12px",viewBox:"0 0 12 12"},i.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.default.createElement("g",{transform:"translate(-12.000000, -96.000000)",fill:"#0FC62C"},i.default.createElement("rect",{x:"12",y:"96",width:"12",height:"12"})))),Ke=i.default.createElement("svg",{width:"12px",height:"12px",viewBox:"0 0 12 12"},i.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.default.createElement("g",{transform:"translate(-12.000000, -21.000000)",fill:"#CDCDCD"},i.default.createElement("path",{d:"M12,21 L24,21 L24,33 L12,33 L12,21 Z M14,23 L14,31 L22,31 L22,23 L14,23 Z M19,24\n        L19,30 L17,30 L17,24 L19,24 Z"})))),Xe=i.default.createElement("svg",{width:"12px",height:"12px",viewBox:"0 0 12 12"},i.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.default.createElement("g",{transform:"translate(-12.000000, -59.000000)",fill:"#5291DD"},i.default.createElement("path",{d:"M12,59 L24,59 L24,71 L12,71 L12,59 Z M18,61 L18,69 L22,69 L22,61 L18,61 Z"})))),Ze=i.default.createElement("svg",{width:"24px",height:"24px"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{fill:"#000",stroke:"#FFF",strokeWidth:"2",d:"M12 5.586L18.414 12 12 18.414 5.586 12 12 5.586z"}))),Je=i.default.createElement("svg",{width:"24px",height:"24px"},i.default.createElement("g",{transform:"rotate(90 18 18), translate(2, 14)"},i.default.createElement("path",{d:"M10 2l8 8-8 8L2 10z",stroke:"#000",strokeWidth:"2px",fill:"#FFF"}),i.default.createElement("path",{d:"M14 10l-4 4-4-4 4-4z",fill:"#000"}))),Qe=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},i.default.createElement("path",{d:"M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z"})),$e=i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"16",viewBox:"0 0 18 16"},i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M-1-2h20v20H-1z"}),i.default.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M2.18.5C1.346.5.668 1.172.668 2s.678 1.5 1.514 1.5S3.695 2.828 3.695 2 \n      3.017.5 2.181.5zm4.543.75a.759.759 0 0 0-.664.372.744.744 0 0 0 0 .756.759.759 0 0 0 .664.372h9.842a.759.759 0 \n      0 0 .665-.372.744.744 0 0 0 0-.756.759.759 0 0 0-.665-.372H6.723zM2.181 6.5C1.345 6.5.667 7.172.667 8s.678 1.5 \n      1.514 1.5S3.695 8.828 3.695 8s-.678-1.5-1.514-1.5zm4.542.75a.759.759 0 0 0-.664.372.744.744 0 0 0 0 .756.759.759 \n      0 0 0 .664.372h9.842a.759.759 0 0 0 .665-.372.744.744 0 0 0 0-.756.759.759 0 0 0-.665-.372H6.723zM2.181 \n      12.5c-.836 0-1.514.672-1.514 1.5s.678 1.5 1.514 1.5 1.514-.672 1.514-1.5-.678-1.5-1.514-1.5zm4.542.75a.759.759 \n      0 0 0-.664.372.744.744 0 0 0 0 .756.759.759 0 0 0 .664.372h9.842a.759.759 0 0 0 .665-.372.744.744 0 0 0 \n      0-.756.759.759 0 0 0-.665-.372H6.723z"})));ne.propTypes=s,ne.defaultProps=u,t.default={NOTES:c,COHORTS:f,UPDATED:p,VISITORS:h,ON_TARGET:v,OFF_TARGET:N,CALENDAR:Q,MENU:m,SEARCH:y,SEARCH_HISTORICAL:S,SEARCH_PLUS:b,USER:T,DATE_RANGE:A,LANGUAGE:I,DETAILS:R,CROSS:w,CROSS_O:D,SITES:U,CHEVRON_UP:k,CHEVRON_DOWN:M,CHEVRON_LEFT:F,CHEVRON_RIGTH:j,ARROW_RIGHT_LONG:_,ARROW_RIGHT:E,ARROW_LEFT:g,FILTER:V,MORE_HORIZ:B,DUPLICATE:H,EDIT:Y,OPTIMISE:C,ADJUSTMENT:O,DOWNLOAD:Z,EMAIL:ve,HOME:d,SAVE:J,NEW:z,COMPARE:W,ARCHIVE:q,PLUS:$,EXPORT:ee,SHARE:ae,APPROVE:re,EXPAND:ie,EXPANDED:le,COLLAPSED:oe,FULL_SCREEN:se,STAR_IN_PROGRESS:Oe,STAR_ACTIVE:Oe,STAR_PENDING:Te,STAR_COMPLETED:Re,VISITORS_EXCLAMATION:ue,USER_PROFILE:de,INFO:ce,INFO_O:je,ERROR:fe,WARNING:pe,SUCCESS:he,CHART_MENU:me,GRAPH_UNCERTAINTY:De,VISIBLE:_e,NOT_VISIBLE:Ee,ARROW_RIGHT_SQUARE_FILLED:ge,CIRCLE_FILLED_LARGE:ye,EVENT:Se,SEPARATOR:be,MULTIPLE_EDIT:P,FILTER_DESCENDING:L,FILTER_ASCENDING:x,EVENT_DUPLICATE:Ce,REFERENCE_STUDIES:Ae,USER_OWNER:Ie,ROMB_EMPTY:we,INFO_Q:Ne,PATIENTS_UNDER_ALLOCATION:Pe,PATIENTS_OVER_ALLOCATION:Le,PATIENTS_GENERAL:Me,UNDO:ke,UNLOCK:xe,ALARM:Fe,GROUP:Ue,UNGROUP:Ve,MISMATCH:Be,ATTENTION:He,OVERALLOCATION:Ge,TARGET:Ye,ITEM_LOADER:ze,duplicateIconComponent:G,exportIconComponent:te,shareIconComponent:ne,archiveIconComponent:K,removeIconComponent:X,REMINDER:We,SITE_APPROVED:qe,SITE_IN_PROGRESS:Ke,SITE_IN_REVIEW:Xe,STUDY_SITE:Ze,STUDY_SITE_SELECTED:Je,FLAG:Qe,LIST:$e}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={MILESTONES:"MILESTONES",PATIENTS_RANDOMIZED:"PATIENTS_RANDOMIZED",DATE:"DATE"};t.default=n,t.TRIGGER_START_MILESTONES={GLOBAL_FP:"GLOBAL_FP",FSIV:"FSIV",FPFV:"FPFV",FPFT:"FPFT"},t.ITEM_STATE={NEW:"NEW",UPDATED:"UPDATED",DELETED:"DELETED"},t.INITIAL_COHORT_ID="INITIAL_COHORT"},,,,,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return(0,f.default)(e).format("DD MMM YY")}function i(){for(var e="NERVE_",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<5;a+=1)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function l(e,t){var a=e.id;return t.filter(function(e){return e.ta_id===a})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];return e.filter(function(e){return e.id===+t})[0]}function s(e,t){return!(t.role===_.default.PLAYGROUND&&e.is_imported||!e.state.status&&e.is_imported)}function u(e){var t=[],a=void 0,n=void 0;if(e&&e.impactStudyParams){a={fp:e.fp,target_lpft:e.target_lpft,therapeutic_area:e.therapeutic_area,indication:e.indication,target_num_patients:e.target_num_patients,fpfv_fpft:e.fpfv_fpft,phase:e.phase||""},n=d({},e.impactStudyParams);var r=(0,h.default)(a,"indication",""),i=(0,h.default)(a,"therapeutic_area",""),l=(0,h.default)(a,"phase",""),o=(0,h.default)(a,"target_num_patients",null),s=(0,E.getMomentDate)(a.fp),u=(0,E.getMomentDate)(a.target_lpft),c=(0,E.getMomentDate)(n.fp),p=(0,E.getMomentDate)(n.target_lpft),m=(0,h.default)(n,"indication",null);null!==m&&m.toLowerCase()!==r.toLowerCase()&&t.push("indication");var _=(0,h.default)(n,"therapeutic_area",null);null!==_&&_.toLowerCase()!==i.toLowerCase()&&t.push("therapeutic_area");var g=(0,h.default)(n,"phase",null);null!==g&&g.toLowerCase()!==l.toLowerCase()&&t.push("phase");var y=(0,h.default)(n,"target_num_patients",null);return 0!==y&&null!==y&&y!==o&&t.push("target_num_patients"),null===c||s&&f.default.isMoment(s)&&s.isValid()&&c&&f.default.isMoment(c)&&c.isValid()&&s.isSame(c,"day")||t.push("fp"),null===p||u&&f.default.isMoment(u)&&u.isValid()&&p&&f.default.isMoment(p)&&p.isValid()&&u.isSame(p,"day")||t.push("target_lpft"),{invalidFields:t,fpoParams:{fp:s&&s.format(v.DATE_FORMAT),target_lpft:u&&u.format(v.DATE_FORMAT),therapeutic_area:i,indication:r,target_num_patients:o,phase:l},impactParams:{fp:c&&c.format(v.DATE_FORMAT),target_lpft:p&&p.format(v.DATE_FORMAT),therapeutic_area:_,indication:m,target_num_patients:y,phase:g}}}return{invalidFields:t,fpoParams:a,impactParams:n}}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.formatDate=r,t.generateStudyId=i,t.getIndications=l,t.getSelectedItem=o,t.isEditableStudy=s,t.getMisalignedDetails=u;var c=a(11),f=n(c),p=a(12),h=n(p),v=a(20),m=a(135),_=n(m),E=a(8)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatedContent=t.Button=t.Separator=t.Sidebar=void 0;var r=a(494),i=n(r),l=a(493),o=n(l),s=a(326),u=n(s),d=a(956),c=n(d);t.default=i.default,t.Sidebar=i.default,t.Separator=o.default,t.Button=u.default,t.AnimatedContent=c.default},function(e,t,a){"use strict";function n(e){return function(t){return t((0,s.fetchApi)(d.PLATFORM_STUDIES,u.GET_PLATFORM_STUDIES,"GET",{pattern:e}))}}function r(e){return function(t){return t((0,s.fetchApi)(d.PLATFORM_STUDIES_IMPORT,u.IMPORT_PLATFORM_STUDY,"POST",{id:e}))}}function i(){return function(e){return e((0,s.fetchApi)(d.PLATFORM_REGIONS,u.GET_PLATFOTM_REGIONS))}}function l(){return function(e){return e((0,s.fetchApi)(d.STUDY_OPTIONS,u.GET_STUDY_OPTIONS))}}function o(){return function(e){return e((0,s.fetchApi)(d.HISTORICAL_STUDIES,u.GET_HISTORICAL_STUDIES))}}Object.defineProperty(t,"__esModule",{value:!0}),t.getPlatformStudies=n,t.importPlatformStudy=r,t.getPlatformRegions=i,t.getStudyOptions=l,t.getHistoricalStudies=o;var s=a(48),u=a(13),d=a(50)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(14),u=n(s),d=function(e){var t=e.generatedFields,a=e.cellName,n=e.isNotEmpty;return t&&t.includes(a)&&n?i.default.createElement(u.default,{mouseEnterDelay:.3,overlay:i.default.createElement("span",null,"Data not available in Impact - derived by FPO")},i.default.createElement("svg",{className:"fpo-generated-data-tooltip",width:"8",height:"8",viewBox:"0 0 8 8"},i.default.createElement("path",{fill:"#00C329",fillRule:"evenodd",d:"M0 0l8 8V0z"}))):null};d.defaultProps={generatedFields:null,cellName:"",isNotEmpty:!0},d.propTypes={generatedFields:o.default.array,cellName:o.default.string,isNotEmpty:o.default.oneOfType([o.default.bool,o.default.number,o.default.string])},t.default=i.default.memo(d)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t){var a=[];return e.forEach(function(e){var n=(0,v.default)(e.start_date).diff(t,"d"),r=(0,v.default)(e.end_date).diff(t,"d"),i=(0,_.default)(e);i.startWeek=n,i.endWeek=r,n>=0&&!e.disabled&&a.push(i)}),a}function o(e){if(!e||!e[0])return e;for(var t=e[0][0],a=[],n=1;n<t;n+=1)a.push([n,0]);return a.concat(e)}function s(e){var t=new Set;return e.forEach(function(e){e.countries.forEach(function(e){t.add(e.country_name)})}),[].concat(i(t.values()))}function u(e,t,a,n,r,i,l){var o=l||E.getCurvesAndMilestones,s=e.lpft,u=void 0,d=void 0,c=e.actualTimeseriesSnapshot||{},f=c.actual_date,p=c.sites_initiated,h=c.patients_screened,v=c.patients_randomized,m=f?(0,g.getMomentDate)(f):null;if(t.isAfter(s)?u=a:d=a,u)d=0;else{var _=5*a,y=0;do{var S=(0,g.getMomentDate)(r),b=(0,g.getMomentDate)(e["25_si"]),C=(0,g.getMomentDate)(e["50_si"]),O=(0,g.getMomentDate)(e["90_si"]),T=(0,g.getMomentDate)(e.fsiv),R=(0,g.getMomentDate)(e.fpfv),A=o(n,S,i,T,R,b,C,O,+e.num_sites,+e.patient_allocation,e.sas,e.screening_failure,_,"",e.events,m,p,h,v);if(y+=1,A.lpft&&A.lpft.isSameOrBefore(t)){u=_;break}if(y>=5e3)return-1;_*=5}while(!u)}return(d+u)/2}function d(e){return e?E.getCurvesAndMilestonesAdjusted:E.getCurvesAndMilestones}function c(e){var t,a=e.invalidFields,n=e.fpfv,i=e.fsiv,l=e.fpfvFpft,o=e.si25,s=e.si50,u=e.si90,d=e.nSites,c=e.patientAllocation,f=e.randomisationRate,p=e.SAS,h=e.SF,v=e.prefix,m=e.events,_=e.errorMessages,E=e.actualTimeseriesSnapshot,g=void 0===E?null:E;return t={error:!0},r(t,v+"invalidFields",a),r(t,v+"curves",[[],[],[]]),r(t,v+"lpft",null),r(t,v+"fpfv_lpfv",null),r(t,v+"fpp_fpfv",null),r(t,v+"fpfv",n),r(t,v+"fpft",null),r(t,v+"fsiv",i),r(t,v+"fpfv_fpft",l),r(t,v+"25_si",o),r(t,v+"50_si",s),r(t,v+"90_si",u),r(t,v+"num_sites",d),r(t,v+"patient_allocation",c),r(t,v+"randomisation_rate",f),r(t,v+"sas",p),r(t,v+"screening_failure",h),r(t,v+"sr",h<1&&f?f/(1-h):null),r(t,"prefix",v),r(t,v+"events",m),r(t,"errorMessages",_),r(t,"actualTimeseriesSnapshot",g),t}function f(e,t,a){var n=e.find(function(e){return Math.round(e[1])>=1});if(!n)return e;var r=n[0]-t.diff(a,"d");return e.slice(r).map(function(e){return[e[0]-r,e[1]]})}function p(e){return e.map(function(e){return e[1]=Math.trunc(e[1]),e})}Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_CALCULATION_PERIOD=t.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE=t.MAX_CURVE_LENGTH=void 0,t.prepareCountryEventsForCalculation=l,t.unshiftElementsToCurve=o,t.getUniqueCohortsCountries=s,t.calcRandomisationRate=u,t.getCalcFunction=d,t.getErrorCalculationResultObject=c,t.shiftCurve=f,t.updateCurveWithZeroToOne=p;var h=a(11),v=n(h),m=a(40),_=n(m),E=a(136),g=a(8);t.MAX_CURVE_LENGTH=36470,t.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE="Please amend the entered parameters as the P/LPFT calculated\n is longer than permitted",t.MAX_CALCULATION_PERIOD=7300},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=!0;return e.locations.forEach(function(e){return e.countries.forEach(function(e){e.patients&&""!==e.patients||(t=!1),e.sites&&""!==e.sites||(t=!1)})}),t}function i(e){for(var t=e.cohorts.filter(function(e){return e.state!==O.ITEM_STATE.DELETED}),a=!0,n=0;n<t.length;n+=1){var i=t[n];if(!i.name||""===i.name){a=!1;break}for(var l=0;l<t.length;l+=1)if(t[l].id!==i.id&&t[l].name===i.name){a=!1;break}if(0===i.locations.length){a=!1;break}var o=i.trigger;switch(o.trigger_type){case T.default.MILESTONES:if(!o.start_milestone){a=!1;break}if(o.start_milestone&&o.start_milestone!==O.TRIGGER_START_MILESTONES.GLOBAL_FP&&!o.source_cohort_id){a=!1;break}break;case T.default.PATIENTS_RANDOMIZED:if(!o.source_cohort_id||!o.num_patients||""===o.num_patients){a=!1;break}break;case T.default.DATE:default:if(!o.start_date){a=!1;break}}a&&(a=r(i))}return a}function l(e,t){return e.id===O.INITIAL_COHORT_ID||t.length>0&&e.id===t[0].id||0!==t.filter(function(t){return t.trigger.source_cohort_id===e.id&&t.state!==O.ITEM_STATE.DELETED}).length}function o(e,t){return e.map(function(e){var a=(0,v.default)(e.startDate),n=(0,v.default)(e.data.fsiv),r=(0,v.default)(e.data.fpfv),i=(0,v.default)(e.data.fpft),l=r.clone().add(e.data.fpfv_lpfv,"d"),o=(0,v.default)(e.data.lpft),s=(0,v.default)(t.end_date),u=e.data.actual_fsiv&&e.data.actual_fsiv.isAfter(a)?(0,v.default)(e.data.actual_fsiv):null,d=e.data.actual_fpfv&&e.data.actual_fpfv.isAfter(a)?(0,v.default)(e.data.actual_fpfv):null,c=e.data.actual_fpft&&e.data.actual_fpft.isAfter(a)?(0,v.default)(e.data.actual_fpft):null,f=e.data.actual_fpfv_lpfv?r.clone().add(e.data.actual_fpfv_lpfv,"d"):null,p=o,h=(0,v.default)(e.data.actual_date),_=e.data.adjusted_fsiv&&e.data.adjusted_fsiv.isAfter(a)?(0,v.default)(e.data.adjusted_fsiv):null,E=e.data.adjusted_fpfv&&e.data.adjusted_fpfv.isAfter(a)?(0,v.default)(e.data.adjusted_fpfv):null,g=e.data.adjusted_fpft&&e.data.adjusted_fpft.isAfter(a)?(0,v.default)(e.data.adjusted_fpft):null,y=e.data.adjusted_fpfv_lpfv?r.clone().add(e.data.adjusted_fpfv_lpfv,"d"):null,S=e.data.adjusted_lpft,O=(0,v.default)(t.adjusted_createdAt),T=t.exact_copy&&!t.hasAdjustedOrigin?a.clone():(0,R.getMomentDate)((0,b.default)(e,"data.actualTimeseriesSnapshot.actual_date",t.hasAdjustedOrigin&&t.createdAt?t.createdAt.clone():a.clone()));return T&&!T.isBefore(a)||(T=a.clone()),{cohortId:e.cohortId,cohortName:e.cohortName,countriesLength:e.countriesLength,isEmptyGeneric:e.isEmptyGeneric,isEmptyActual:e.isEmptyActual,isEmptyAdjusted:e.isEmptyAdjusted,fromPrevApproved:e.fromPrevApproved,milestones:[{label:"FP",date:a,iconType:"CIRCLE",color:C.COLORS.BLACK},{label:"FSIV",date:n,iconType:"DIAMOND",color:C.COLORS.YELLOW},{label:"FPFV",date:r,iconType:"DIAMOND",color:C.COLORS.PURPLE},{label:"FPFT",date:i,iconType:"DIAMOND",color:C.COLORS.BLUE},{label:"LPFV",date:l,iconType:"DIAMOND",color:C.COLORS.PURPLE},{label:"P/LPFT",date:o,iconType:"CIRCLE_FILLED",color:C.COLORS.BLACK},{label:"T/LPFT",date:s,iconType:"CIRCLE_FILLED",color:C.COLORS.BLACK},{label:"ACTUAL",date:h,iconType:"DIAMOND",color:C.COLORS.BLACK}],actual_milestones:[{label:"FP",date:a,iconType:"CIRCLE",color:C.COLORS.BLACK},{label:"FSIV",date:u,iconType:"DIAMOND",color:C.COLORS.YELLOW},{label:"FPFV",date:d,iconType:"DIAMOND",color:C.COLORS.PURPLE},{label:"FPFT",date:c,iconType:"DIAMOND",color:C.COLORS.BLUE},{label:"LPFV",date:f,iconType:"DIAMOND",color:C.COLORS.PURPLE},{label:"P/LPFT",date:p,iconType:"CIRCLE_FILLED",color:C.COLORS.BLACK},{label:"T/LPFT",date:s,iconType:"CIRCLE_FILLED",color:C.COLORS.BLACK},{label:"ACTUAL",date:h,iconType:null,color:C.COLORS.BLACK}],adjusted_milestones:[{label:"FP",date:a,iconType:"CIRCLE",color:C.COLORS.BLACK},{label:"FSIV",date:_,iconType:"DIAMOND",color:C.COLORS.YELLOW},{label:"FPFV",date:E,iconType:"DIAMOND",color:C.COLORS.PURPLE},{label:"FPFT",date:g,iconType:"DIAMOND",color:C.COLORS.BLUE},{label:"LPFV",date:y,iconType:"DIAMOND",color:C.COLORS.PURPLE},{label:"A/LPFT",date:S,iconType:"CIRCLE_FILLED",color:C.COLORS.BLACK},{label:"P/LPFT",date:o,iconType:"CIRCLE_FILLED",color:C.COLORS.BLACK},{label:"ACTUAL",date:h,iconType:null,color:C.COLORS.BLACK}],adjustedStart:O,snapshotActualDate:T,actualDate:h,minDate:a,maxDate:(0,m.max)([a,n,r,i,l,o,s,u,d,c,f,_,E,g,y,S,h])}})}function s(e,t){var a=e.trigger;switch(a.trigger_type){case T.default.PATIENTS_RANDOMIZED:if(!a.num_patients||!a.source_cohort_id)return p.default.createElement("div",{className:"error"},"Select patients randomized options");var n=t.find(function(e){return e.id===a.source_cohort_id});return p.default.createElement("div",{className:"success"},(a.num_patients?a.num_patients:"-")+(a.num_patients_abs?"":"%")+"\n         patients from "+(n?n.name:"-"));case T.default.DATE:return a.start_date?p.default.createElement("div",{className:"success"},(0,v.default)(a.start_date).format("DD MMM YY")):p.default.createElement("div",{className:"error"},"Select cohort start date");case T.default.MILESTONES:if(!a.start_milestone)return p.default.createElement("div",{className:"error"},"Select cohort trigger");if(a.start_milestone===O.TRIGGER_START_MILESTONES.GLOBAL_FP)return p.default.createElement("div",{className:"success"},"Start of study (FP)");var r=t.find(function(e){return e.id===a.source_cohort_id});return p.default.createElement("div",{className:(0,E.default)({success:r&&a.start_milestone,error:!r||!a.start_milestone})},a.start_milestone+" from "+(r?r.name:"..."));default:return p.default.createElement("div",{className:"error"},"Select cohort trigger")}}function u(e,t){var a=t.reduce(function(e,t){var a=t.countries.reduce(function(e,a){return e.push(c({},a,{platform_country_id:a.id,region_name:t.name})),e},[]);return t.countries.length>1&&a.push({id:"unspecifiedCountry_"+t.id,platform_country_id:null,name:"Unspecified country",region_id:t.id,isSelectedAsRegion:!1,isSelected:!1}),a.length>0&&e.push(c({},t,{isCountryRegion:1===a.length,countries:a})),e},[]),n=(0,y.default)(a);return e.locations.forEach(function(e){e.countries.forEach(function(t){var a=n.find(function(t){return t.name===e.name}),r=a.countries.find(function(e){return e.name===t.name});r&&(r.isSelected=!0,r.forceDisabled=!!t.hasActuals&&t.hasActuals.hasActuals)})}),n}function d(e){var t=(0,R.getMomentDate)(e.fp);return e.cohorts.reduce(function(e,a){var n=(0,R.getMomentDate)(a.fp),r=n?n.diff(t,"d"):0,i=a.id;return e[i]||(e[i]=r),e},{})}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.validateCohortPatientsSites=r,t.default=i,t.isReadOnly=l,t.getMilestonesChartCohortsData=o,t.getLabelValue=s,t.prepareLocationsData=u,t.getCohortsFpOffsets=d;var f=a(0),p=n(f),h=a(11),v=n(h),m=a(29),_=a(2),E=n(_),g=a(40),y=n(g),S=a(12),b=n(S),C=a(237),O=a(98),T=n(O),R=a(8)},,,,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChartDataContext=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),h=n(p),v=a(12),m=n(v),_=a(29),E=a(45),g=n(E),y=a(10),S=a(20),b=n(S),C=a(8),O=a(130),T=t.ChartDataContext=(0,c.createContext)({}),R=function(e){function t(e){i(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.setStartEndDates=function(e){a.setState({start:e[0],end:e[1]})},a.state={start:null,end:null},a}return o(t,e),d(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.data!==e.data||this.props.scenario.status!==e.scenario.status||this.props.showOverallocation!==e.showOverallocation||this.props.showAlert!==e.showAlert||!(0,g.default)(this.props.scenario.study_level_data,e.scenario.study_level_data)||this.props.isOptimizing!==e.isOptimizing||!(0,g.default)(this.state,t)}},{key:"render",value:function(){var e=this.props,t=e.scenario,a=e.data,n=e.children,i=e.studyStatus,l=e.cohortName,o=e.isOverallocated,d=e.showOverallocation,c=e.isOptimizing,p=this.state,h=p.start,v=p.end;try{var E=t.isImpact,g=(0,C.getMomentDate)(t.fp),S=t.approvedData?(0,m.default)(t,"approvedData.fp"):g,R=t.status===y.SCENARIO_STATUS.PREV_APPROVED||t.fromPrevApproved,A=i===b.default.ACTIVE&&(t.status===y.SCENARIO_STATUS.APPROVED||null!==t.source_scenario_id||R||null!==t.adjust_source_cohort_id),I=i===b.default.ACTIVE&&(t.cohorts&&t.cohorts.length>0||l),w=0===(0,m.default)(this.props.scenario,"cohorts",[]).length&&((0,m.default)(a,"overallocatedData")||(0,m.default)(a,"adjusted_overallocatedData")),N=[],D=[],P=[];if((0,m.default)(a,"curves",[]).length){var L=(0,O.updateSeries)(a.curves,S,g),M=u(L,3);P=M[0],D=M[1],N=M[2]}var k=(0,O.updateActualSeries)(a.actual_curves,g),x=u(k,5),j=x[0],F=x[1],U=x[2],V=x[3],B=x[4];j=j.sort(O.sortByDateAscending),F=F.sort(O.sortByDateAscending),U=U.sort(O.sortByDateAscending),V=V.sort(O.sortByDateAscending),B=B.sort(O.sortByDateAscending),j=(0,O.sliceActualSeries)(j),F=(0,O.sliceActualSeries)(F),U=(0,O.sliceActualSeries)(U);var H=a.overallocatedData?a.overallocatedData.lpft:a.lpft,G=t.target_lpft?(0,C.getMomentDate)(t.target_lpft):t.end_date,Y=a.overallocatedData?a.overallocatedData.fsiv:a.fsiv,z=a.overallocatedData?a.overallocatedData.fpfv:a.fpfv,W=void 0;W=a.fpft?a.fpft:z&&t.fpfv_fpft?z.clone().add(t.fpfv_fpft,"d"):null;var q=void 0;q=a.overallocatedData?a.overallocatedData.lpfv:a.lpfv?a.lpfv:H&&a.fpfv_fpft>=0?H.clone().subtract(a.fpfv_fpft,"d"):null;var K=P.length>0&&D.length>0&&N.length>0,X=a.actual_date&&a.actual_date.isAfter(g)?a.actual_date:null,Z=a.actual_f_lpft,J=a.actual_fsiv,Q=a.actual_fpfv,$=a.actual_fpft,ee=a.actual_lpfv,te=j.length>0&&F.length>0&&U.length>0,ae=a.adjusted_overallocatedData?a.adjusted_overallocatedData.lpft:a.adjusted_lpft,ne=a.adjusted_overallocatedData?a.adjusted_overallocatedData.fsiv:a.adjusted_fsiv,re=a.adjusted_overallocatedData?a.adjusted_overallocatedData.fpfv:a.adjusted_fpfv,ie=re?re.clone().add(a.adjusted_fpfv_fpft,"d"):null,le=void 0;le=a.adjusted_overallocatedData?a.adjusted_overallocatedData.lpfv:a.adjusted_lpfv?a.adjusted_lpfv:ae&&a.adjusted_fpfv_fpft>=0?ae.clone().subtract(a.adjusted_fpfv_fpft,"d"):null;var oe=H?H.clone():null,se=Z?Z.clone():null,ue=ae?ae.clone():null,de=(0,C.getMomentDate)(t.createdAt),ce=t.exact_copy,fe=ce&&!t.hasAdjustedOrigin?g.clone():(0,C.getMomentDate)((0,m.default)(a,"actualTimeseriesSnapshot.actual_date",t.hasAdjustedOrigin?de.clone():g.clone()));fe&&!fe.isBefore(g)||(fe=g.clone()),t.hasAdjustedOrigin&&(P=(0,O.updateAdjustedSeries)(P,g,fe),D=(0,O.updateAdjustedSeries)(D,g,fe),N=(0,O.updateAdjustedSeries)(N,g,fe));var pe=[],he=[],ve=[];if(a.adjusted_curves){var me=(0,O.updateSeries)(a.adjusted_curves,g,g),_e=u(me,3);pe=_e[0],he=_e[1],ve=_e[2]}var Ee=[H,Z,ae,X,fe];A&&Z&&H||I||Ee.push(G);var ge=(0,_.max)(Ee),ye=ce&&!t.hasAdjustedOrigin?pe:(0,O.updateAdjustedSeries)(pe,g,fe),Se=ce&&!t.hasAdjustedOrigin?he:(0,O.updateAdjustedSeries)(he,g,fe),be=ce&&!t.hasAdjustedOrigin?ve:(0,O.updateAdjustedSeries)(ve,g,fe),Ce=ae&&ne&&ie&&le&&pe.length>0&&he.length>0&&ve.length>0,Oe=A&&Ce;if(A){if(E){var Te=(0,O.getMaxValue)(N),Re=N.find(function(e){return e.value===Te});if(Re&&Re.date.isBefore(H))for(var Ae=Re.date.clone().add(1,"d");Ae<=H;)N.push({date:Ae,value:Re.value}),Ae=Ae.clone().add(1,"d")}te&&X&&Z&&(j=(0,O.sliceCurveData)(j,I?X:Z),F=(0,O.sliceCurveData)(F,I?X:Z),U=(0,O.sliceCurveData)(U,I?X:Z),U=(0,O.fillMissingValues)(U,I?X:Z),V=(0,O.fillMissingValues)(V,I?X:Z),B=(0,O.fillMissingValues)(B,I?X:Z))}var Ie=(0,O.mergeQData)(V,B),we=D.filter(function(e){return e.date>=Y}),Ne=N.filter(function(e){return e.date>=Y});if(!d){var De=(0,_.max)([H,G]);if(P=(0,O.sliceCurveData)(P,De),D=(0,O.sliceCurveData)(D,De),N=(0,O.sliceCurveData)(N,De),(!t.approvedData||t.approvedData.daily)&&z&&q){var Pe=z.diff(Y,"d"),Le=q.clone().subtract(Pe-7,"d");P=P.filter(function(e){return e.date<=Le})}we=we.filter(function(e){return e.date<=q}),Ne=Ne.filter(function(e){return e.date<=H}),Ce&&(ye=(0,O.sliceCurveData)(ye,ae),Se=(0,O.sliceCurveData)(Se,ae),be=(0,O.sliceCurveData)(be,ae))}var Me=we.find(function(e){return e.date.isSame(q)}),ke=(0,m.default)(Me,"value",(0,O.getMaxValue)(we)),xe=Ne.find(function(e){return e.date.isSame(H)}),je=(0,m.default)(xe,"value",(0,O.getMaxValue)(Ne)),Fe=Se.find(function(e){return e.date.isSame(le)}),Ue=(0,m.default)(Fe,"value",(0,O.getMaxValue)(Se)),Ve=be.find(function(e){return e.date.isSame(ae)}),Be=(0,m.default)(Ve,"value",(0,O.getMaxValue)(be)),He=(0,O.getMinMaxDate)(P),Ge=(0,O.getMinMaxDate)(D),Ye=(0,O.getMinMaxDate)(N),ze=[He,Ge,Ye].map(function(e){return e[1]}).filter(function(e){return null!==e&&void 0!==e}),We=void 0,qe=void 0,Ke=void 0,Xe=void 0;if(A&&te){We=(0,O.getMinMaxDate)(j),qe=(0,O.getMinMaxDate)(F),Ke=(0,O.getMinMaxDate)(U),Xe=(0,O.getMinMaxDate)(Ie);var Ze=[We,qe,Ke,Xe].map(function(e){return e[1]});Ze.push(Z),ze=ze.concat(Ze)}var Je=void 0,Qe=void 0,$e=void 0;if(Oe){Je=(0,O.getMinMaxDate)(ye),Qe=(0,O.getMinMaxDate)(Se),$e=(0,O.getMinMaxDate)(be);var et=[Je,Qe,$e].map(function(e){return e[1]});ze=ze.concat(et)}A&&[Y,z,W,q,H,X,Z,J,Q,$,ee].filter(function(e){return null!==e&&void 0!==e}).forEach(function(e){e.isSameOrBefore(ge)&&ze.push(e)});var tt=!1;0===ze.filter(function(e){return e}).length&&(tt=!0);var at=(0,_.max)([].concat(r(ze),[ge]).filter(function(e){return e}).sort(O.sortByDateAscending)),nt=!1;at.isSameOrBefore(g)&&(nt=!0),ge=(0,_.max)([].concat(Ee,[at]));var rt=(0,O.getMaxValue)(P),it=[rt],lt=d?(0,O.getMaxValue)(D):ke,ot=d?(0,O.getMaxValue)(N):je,st=[lt,ot,a.patient_allocation],ut=void 0,dt=void 0,ct=void 0,ft=(0,O.getMaxValue)(V),pt=(0,O.getMaxValue)(B);A&&te&&(dt=(0,O.getMaxValue)(F),ct=(0,O.getMaxValue)(U),st.push(dt,ct,ft,pt),ut=(0,O.getMaxValue)(j),it.push(ut));var ht=void 0,vt=void 0,mt=void 0;Oe&&(vt=d?(0,O.getMaxValue)(Se):Ue,mt=(0,O.getMaxValue)(be)||0,st.push(vt,mt),ht=(0,O.getMaxValue)(ye)||0,it.push(ht));for(var _t=Math.max.apply(Math,r(st.filter(function(e){return void 0!==e}))),Et=Math.max.apply(Math,r(it.filter(function(e){return void 0!==e}))),gt=(0,O.getMonthsTickValues)(g,at,10),yt={siv:P,screening:we,enrolment:Ne,actualSiv:j,actualScreening:F,actualEnrolment:U,actualQ25Enrolment:B,actualQ75Enrolment:V,adjustedSiv:ye,adjustedScreening:Se,adjustedEnrolment:be},St=[],bt=g.clone();bt<=ge;)St.push({date:bt,formattedDate:bt.format("DD-MM-YYYY")}),bt=bt.clone().add(1,"d");St=(0,O.getAccumulatedSeries)(yt,St);var Ct={siv:P,filteredScreening:we,filteredEnrolment:Ne,actualSiv:j,actualScreening:F,actualEnrolment:U,actualQEnrolment:Ie,adjustedSiv:ye,adjustedScreening:Se,adjustedEnrolment:be};Ct=Object.keys(Ct).reduce(function(e,t){var a=Ct[t];return e[t]=h&&v?a.filter(function(e){return e.date>=h&&e.date<=v}):a,e},{});var Ot={pLpft:H,tLpft:G,actualFlpft:Z,adjustedLpft:ae};Ot=Object.keys(Ot).reduce(function(e,t){var a=Ot[t];return e[t]=h&&v?a&&a<h?h:a&&a>v?v:a:a,e},{});var Tt=s({scenario:t,startDate:g,createdAt:de,data:a,cohortName:l,start:h,end:v,latestDate:ge,snapshotActualDate:fe,maxValue:at,maxValuesArray:ze,monthsTickValues:h&&v?gt.filter(function(e){return e>=h&&e<=v}):gt,xDataSource:St,setStartEndDates:this.setStartEndDates,isExactCopy:ce,adjustedAreValid:Ce,showAdjusted:Oe,isOverallocated:o,isImpact:E,isApproved:A,trackingCohortsView:I,hasOverallocation:w,showOverallocation:d,genericsAreValid:K,actualsAreValid:te,isPrevApproved:R,showNoData:tt,showWrongData:nt,dataReady:!0,isOptimizing:c},Ct,Ot,{targetLpft:G,fsiv:Y,fpfv:z,fpft:W,lpfv:q,actualDate:X,actualFsiv:J,actualFpfv:Q,actualFpft:$,actualLpfv:ee,adjustedFsiv:ne,adjustedFpfv:re,adjustedFpft:ie,adjustedLpfv:le,originalPlpft:oe,originalFlpft:se,originalAdjustedLpft:ue,targetScreeningValue:ke,targetEnrolmentValue:je,targetAdjustedScreeningValue:Ue,targetAdjustedEnrolmentValue:Be,sitesMax:Et,patMax:_t,sivMax:rt,screeningMax:lt,enrolmentMax:ot,actualSivMax:ut,actualScreeningMax:dt,actualEnrolmentMax:ct,actualQ75Max:ft,actualQ25Max:pt,adjustedSivMax:ht,adjustedScreeningMax:vt,adjustedEnrolmentMax:mt});return f.default.createElement(T.Provider,{value:Tt},n)}catch(e){return console.log(e),null}}}]),t}(f.default.Component);R.defaultProps={isOverallocated:!1,showOverallocation:!1,cohortName:null,studyStatus:"PLANNED",isOptimizing:!1,showAlert:!1},R.propTypes={scenario:h.default.object.isRequired,studyStatus:h.default.string,cohortName:h.default.object,data:h.default.object.isRequired,children:h.default.node.isRequired,isOverallocated:h.default.bool,showOverallocation:h.default.bool,isOptimizing:h.default.bool,showAlert:h.default.bool},t.default=R},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(64),u=n(s),d=function(e){var t=e.type,a=e.unlock,n=e.onChange;return i.default.createElement(u.default,{label:"",checked:a&&a[t],onChange:function(e){n(null,t,e,"unlock")}})};d.defaultProps={unlock:{}},d.propTypes={type:o.default.string.isRequired,unlock:o.default.object,onChange:o.default.func.isRequired},t.default=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2),h=n(p),v=a(27),m=n(v),_=a(84),E=n(_),g=a(14),y=n(g),S=a(96),b=n(S),C=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:"object"!==o(a.props.value)?a.props.value.toString():a.props.value,valueToRestore:"object"!==o(a.props.value)?a.props.value.toString():a.props.value,isValid:a.props.isValid,showTooltip:!1},a.keyPressHandler=a.keyPressHandler.bind(a),a.onChangeHandlerNew=a.onChangeHandlerNew.bind(a),a.handleTextAreaClickForTooltip=a.handleTextAreaClickForTooltip.bind(a),a}return l(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.beFocused&&this.inputRef&&(this.inputRef.focus(),this.inputRef.select())}},{key:"componentWillReceiveProps",value:function(e){e.isEditMode&&e.value===this.props.value||this.setState({value:e.value}),e.isEditMode&&e.tooltip&&e.beFocused&&this.setState({showTooltip:!0})}},{key:"shouldComponentUpdate",value:function(e,t){var a=this.props,n=a.isEditMode,r=a.type,i=a.isValid,l=t.showTooltip!==this.state.showTooltip,o=e.isEditMode!==n||e.isValid!==i,s=!1;return s="date"===r&&t.value&&this.state.value?!t.value.isSame(this.state.value)||e.defaultDate&&this.props.defaultDate&&!e.defaultDate.isSame(this.props.defaultDate):t.value!==this.state.value||e.value!==this.props.value,o||s||l}},{key:"onChangeHandlerNew",value:function(e){this.props.onChange(e),this.setState({value:e})}},{key:"handleTextAreaClickForTooltip",value:function(e){if(this.props.tooltip){var t=void 0;t="boolean"==typeof e?e:!this.state.showTooltip,this.setState({showTooltip:t})}}},{key:"keyPressHandler",value:function(e){+this.state.value!=+e.target.value&&("Tab"===e.key&&this.onChangeHandlerNew(e.target.value),"Escape"===e.key&&this.props.switchOffEditMode&&(this.setState({value:this.state.valueToRestore}),this.props.switchOffEditMode()))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isEditMode,n=t.type,r=t.isValid,i=t.filterDate,l=t.tooltip,o=t.noDataPlaceholder,s=t.minDate,u=t.defaultDate,c=t.popperPlacement,f=t.validators,p=t.tooltipOnError,v=this.state,_=v.value,g=v.showTooltip;if(a){if("date"===n)return d.default.createElement("div",{className:(0,h.default)("editable-cell",{isValid:r},{notValid:!r})},d.default.createElement(E.default,{tooltip:!r&&l?l:null,status:r?null:"error",simpleView:!0,onFocus:this.props.onFocus,style:{width:"100%"},onChange:this.onChangeHandlerNew,autoFocus:this.props.beFocused,fixedHeight:!0,escHandler:this.props.switchOffEditMode,defaultDate:u,filterDate:i,disabledKeyboardNavigation:!0,popperPlacement:c,minDate:s,selected:_}));var S=this.props.tooltip?this.handleTextAreaClickForTooltip:null,C=d.default.createElement("div",{className:(0,h.default)("editable-cell",{isValid:r},{isNotValid:!r})},d.default.createElement(m.default,{onBlur:function(t,a){var n=a;+n.value!=+e.state.value&&e.onChangeHandlerNew(n.value)},toolTipHandler:S,onFocus:this.props.onFocus,ref:function(t){e.textInput=t},onKeyDown:this.keyPressHandler,autoFocus:this.props.beFocused,escPressExit:this.props.switchOffEditMode,narrow:!0,status:r?null:"error",type:n,value:this.state.value,withoutBorder:!0,validators:f,textAlign:"right",placeholder:""}));return p&&!r?d.default.createElement(y.default,{mouseEnterDelay:.3,placement:"bottom",overlayClassName:"fpo-sidebar-button__tooltip",overlay:p},C):l?d.default.createElement(y.default,{overlay:l,visible:g},C):C}if("date"===n)return d.default.createElement("div",{"data-element-id":"_cellWrapper",className:"editable-cell__view-mode-value","data-test":"text-cell"},_?""+_.format("D MMM YY"):function(){return l&&o?d.default.createElement(y.default,{overlayClassName:"scenario_table__unit-tooltip",mouseEnterDelay:.3,overlay:d.default.createElement("span",null,l)},d.default.createElement("span",{className:"no-data-cell"},o)):""}());var O=_;return this.props.formatDecimal&&(O=(0,b.default)(_)),d.default.createElement("div",{"data-element-id":"_cellWrapper",className:"editable-cell-wrapper"},d.default.createElement("div",{"data-element-id":"_cellWrapper",className:"editable-cell__view-mode-value","data-test":"text-cell"},""+O))}}]),t}(u.Component);t.default=C,C.propTypes={beFocused:f.default.bool,isEditMode:f.default.bool,onFocus:f.default.func,switchOffEditMode:f.default.func,type:f.default.string,value:f.default.any,onChange:f.default.func,isValid:f.default.bool,filterDate:f.default.func,tooltip:f.default.node,noDataPlaceholder:f.default.string,minDate:f.default.object,defaultDate:f.default.object,popperPlacement:f.default.oneOf(["top-end","top-start"]),formatDecimal:f.default.bool,validators:f.default.array,tooltipOnError:f.default.string},C.defaultProps={beFocused:!1,isEditMode:!1,type:"text",isValid:!0,value:null,switchOffEditMode:void 0,onFinish:void 0,onFocus:void 0,onChange:function(){},filterDate:void 0,tooltip:void 0,noDataPlaceholder:void 0,minDate:null,defaultDate:void 0,clicked:!1,popperPlacement:"top-start",formatDecimal:!1,validators:[],tooltipOnError:null}},,,,,,,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a){return e.reduce(function(e,t){return t.length>e.length?t:e},[]).reduce(function(n,r,i){var l=(0,pe.getMomentDate)(t).add(r[0],"d");if(l&&l.isSameOrAfter(a))for(var o=l.format("DD-MM-YYYY"),s=0;s<3;s+=1)e[s][i]&&(n[s][n[s].length]={date:l,formattedDate:o,value:+e[s][i][1],week:+e[s][i][0]});return n},[[],[],[],[],[]])}function o(e,t,a){return e.reduce(function(e,t){return a&&t.date.isSameOrAfter(a)&&e.push(t),e},[])}function s(e,t){return e.reduce(function(e,t){return t.length>e.length?t:e},[]).reduce(function(a,n,r){var i=(0,pe.getMomentDate)(n[0]);if(t&&i.isSameOrAfter(t))for(var l=i.format("DD-MM-YYYY"),o=0;o<5;o+=1)a[o][a[o].length]={date:i,formattedDate:l,value:e[o][r][1]};return a},[[],[],[],[],[]])}function u(e,t){return e.date-t.date}function d(e){return(0,ne.extent)(e,function(e){return e.date})}function c(e){return(0,ne.max)(e,function(e){return e.value})||0}function f(e,t,a,n,r,i){var l=void 0,o=!a.includes("actual");l=a.includes("siv")?ge.YELLOW:a.includes("screening")?ge.PURPLE:a.includes("enrolment")||a.includes("randomization")?ge.BLUE:ge.BLACK;var s=e.append("g");return t&&t.length>0&&(o&&s.append("path").data([t]).attr("id",i+"-back").attr("class","line "+a+" back").attr("d",n).style("fill","none").style("stroke",l).style("stroke-width",a.includes("adjusted")||a.includes("bold")?2.5:2).style("display",r?null:"none"),s.append("path").data([t]).attr("id",""+i).attr("class","line "+a+" front").attr("d",n).style("fill","none").style("stroke",l).style("stroke-width",a.includes("adjusted")||a.includes("bold")?2.5:2).style("display",r?null:"none")),s}function p(e,t,a){e.append("text").attr("class","hint").attr("fill",a).attr("x",40).attr("dy",21).attr("text-anchor","middle").text(t.toFixed(0))}function h(e,t,a,n){var r={strokeWidth:"2px"};"bold"===n?(r.strokeWidth="2px",r.strokeDasharray="3 4",r.stroke=ge.WHITE):"dashed"===n&&(r.strokeDasharray="2 2"),"bold"===n&&e.append("line").attr("x1",t?-35:92).attr("x2",t?-17:110).attr("y1",15).attr("y2",15).attr("class","hint-line "+(n||"")+" back").style("stroke",a).st({strokeWidth:"3px"}),e.append("line").attr("x1",t?-35:92).attr("x2",t?-17:110).attr("y1",15).attr("y2",15).attr("class","hint-line "+(n||"")).style("stroke",a).st(r)}function v(e,t,a,n){e.append("polygon").attr("points",t).attr("transform",a).attr("class","hint "+n)}function m(e,t){e.append("rect").attr("width","80px").attr("height","30px").attr("class","hint "+t)}function _(e,t){return e.append("g").attr("class","focus "+t).style("opacity",0).style("display","none")}function E(e,t,a){var n=e[0]-t,r=e[1]-a;return n*n+r*r}function g(e,t,a,n,r,i,l){try{e.forEach(function(e){if(e){var t=e.selectAll(".front");if(t&&t.node()&&null!==t.attr("d")){var a=t.node().getTotalLength();t.attr("stroke-dasharray",a+" "+a).attr("stroke-dashoffset",a).attr("opacity",.5).transition().duration(l).ease(fe.easeCubicOut).attr("stroke-dashoffset",0).transition().duration(0).attr("opacity",1).attr("stroke-dasharray","2 2")}var n=e.selectAll(".back");if(n&&n.node()&&null!==n.attr("d")){var r=n.node().getTotalLength();n.attr("stroke-dasharray",r+" "+r).attr("stroke-dashoffset",r).attr("opacity",.5).transition().duration(l).ease(fe.easeCubicOut).attr("stroke-dashoffset",0).transition().duration(0).style("opacity",.15).style("stroke-width",3)}}}),t.forEach(function(e){e&&e.transition().duration(l/2).delay(l).style("opacity",1)}),a.forEach(function(e){e&&e.transition().duration(l/2).delay(l).style("opacity",1)}),n.forEach(function(e){e&&e.attr("r",0).transition().duration(l/4).delay(l).attr("r",function(){return"dashed"===e.attr("class")?5:"hollow"===e.attr("class")?4:5}).style("opacity",1)}),r.forEach(function(e){if(e){var t=e.selectAll(".front");if(t&&t.node()&&null!==t.attr("d")){var a=t.node().getTotalLength();t.attr("stroke-dasharray",a+" "+a).attr("stroke-dashoffset",a).transition().duration(l).ease(fe.easeCubicOut).attr("stroke-dashoffset",0)}}}),i.forEach(function(e){if(e){var t=e.selectAll(".front");if(t&&t.node()&&null!==t.attr("d")){var a=t.node().getTotalLength();t.attr("stroke-dasharray",a+" "+a).attr("stroke-dashoffset",a).attr("opacity",.5).transition().duration(l).ease(fe.easeCubicOut).attr("stroke-dashoffset",0).transition().duration(0).attr("opacity",1).style("stroke",ge.WHITE).style("stroke-width",2).attr("stroke-dasharray","3 4")}var n=e.selectAll(".back");if(n&&n.node()&&null!==n.attr("d")){var r=n.node().getTotalLength();n.attr("stroke-dasharray",r+" "+r).attr("stroke-dashoffset",r).attr("opacity",.5).transition().duration(l).ease(fe.easeCubicOut).attr("stroke-dashoffset",0).transition().duration(0).style("opacity",1).style("stroke-width",3)}}})}catch(e){console.log(e)}}function y(e,t,a,n,r,i,l){try{e.forEach(function(e){if(e){var t=e.selectAll(".front");t&&t.node()&&null!==t.attr("d")&&t.attr("stroke-dasharray","2 2");var a=e.selectAll(".back");a&&a.node()&&null!==a.attr("d")&&a.style("opacity",.15).style("stroke-width",3)}}),t.forEach(function(e){e&&e.transition().duration(l/2).delay(l).style("opacity",1)}),a.forEach(function(e){e&&e.transition().duration(l/2).delay(l).style("opacity",1)}),n.forEach(function(e){e&&e.attr("r",0).transition().duration(l/4).delay(l).attr("r",function(){return"dashed"===e.attr("class")?5:"hollow"===e.attr("class")?4:6}).style("opacity",1)}),i.forEach(function(e){if(e){var t=e.selectAll(".front");t&&t.node()&&null!==t.attr("d")&&t.style("stroke",ge.WHITE).style("stroke-width",2).attr("stroke-dasharray","3 4");var a=e.selectAll(".back");a&&a.node()&&null!==a.attr("d")&&a.style("opacity",1).style("stroke-width",3)}})}catch(e){console.log(e)}}function S(e,t,a,n,r,i){var l=t.length>4?11:13;e.append("rect").attr("x",-t.length*l/2).attr("y",i?i+30:30).attr("width",t.length*l).attr("height",30).style("fill",n).style("opacity",.9).style("stroke",a).style("stroke-width",1),e.append("text").attr("transform","translate(0,"+(i?i+50:50)+")").attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("fill",r).text(t)}function b(e,t,a,n,r,i){var l=t.length>4?8:12;e.append("rect").attr("x",-t.length*l/2).attr("y",i?i+30:30).attr("width",t.length*l).attr("height",16).style("fill",n).style("opacity",.9).style("stroke",a).style("stroke-width",1),e.append("text").attr("transform","translate(0,"+(i?i+42:50)+")").attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"12px",fontFamily:"VoltaModern, sans-serif"}).attr("fill",r).text(t)}function C(e,t,a,n,r,i){var l=t.substr(t.indexOf("_")+1,t.length),o=l.length>4?11:13,s=e.append("g").at({id:t+"-milestone-tooltip"}).translate([-l.length*o/2,i]);s.append("rect").attr("width",l.length*o).attr("height",30).style("fill",n).style("stroke",a).style("stroke-width",1),s.append("text").translate([l.length*o/2,20]).attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("fill",r).text(l)}function O(e,t){e.select("#"+t+"-milestone-tooltip").remove()}function T(e,t,a){var n=e.append("g").classed("mark-g",!0).attr("transform","translate(-12,"+t+")");n.append("defs").append("path").attr("id","a").attr("d","M12 7l5 5-5 5-5-5z");var r=n.append("g").attr("fill","none").attr("fill-rule","evenodd");return r.append("use").attr("fill",ge.BLACK).attr("xlink:href","#a"),r.append("path").attr("stroke",a).attr("stroke-width",2).attr("d","M12 5.586L18.414 12 12 18.414 5.586 12 12 5.586z"),n}function R(e,t,a,n,r,i,l){var o=e.append("g").classed("mark-g",!0).style("opacity",void 0!==l?l:1).attr("transform","translate("+t+","+-10+")"),s=o.append("g").attr("transform","rotate(90 12 12), translate(0, 14)");return s.append("path").attr("d","M10 2l8 8-8 8L2 10z").style("stroke","black").style("stroke-width","2px").classed("inner-rect",!0).style("fill","#fff"),s.append("path").attr("d","M14 10l-4 4-4-4 4-4z").style("fill",a),i||S(o,n,a,"#FFF","#000",r?r+10:10),o}function A(e,t,a){var n=[];if(!e||!t||e===t)return n;try{var r=Math.ceil(t.diff(e,"months",!0)),i=r<a?r:a;return(0,se.default)(e.toDate(),t.toDate(),i).forEach(function(e,t){0===t?n.push((0,le.default)(e.start)):n.push((0,le.default)(e.start).startOf("month")),t===i-1&&n.push((0,le.default)(e.end))}),n}catch(e){return n}}function I(e){return e.ticks(re.timeYear,1).concat(e.domain()[1])}function w(e){return null!==e.fsiv&&null!==e.fpfv&&null!==e.fpfv_lpfv}function N(e,t){var a={stroke:"#000",strokeWidth:"2px"};"dashed"===t.type?a.strokeDasharray="3 3":"bold"===t.type&&(a.strokeWidth="2px",a.stroke=ge.WHITE,a.strokeDasharray="3 4");var n=e.append("g").attr("id","legend_group_"+t.title).attr("transform","translate(-126)");n.append("text").attr("text-anchor","start").attr("dy",4).style("cursor",t.addInteraction?"pointer":"default").classed("milestone-group-label",!0).st({fontFamily:"VoltaModern, sans-serif",fontSize:"16px",fontWeight:"bold",userSelect:"none"}).text("PrevAppr"===t.title?"Prev. Appr.":t.title),t.type&&("bold"===t.type&&n.append("line").attr("x2",20).attr("y1",12).attr("y2",12).attr("class","line "+t.type+" back").st({strokeWidth:"3px"}),n.append("line").attr("x2",20).attr("y1",12).attr("y2",12).attr("class","line "+t.type).st(a)),t.addInteraction&&(n.style("opacity",t.context[t.seriesFlag]?1:.5),n.on("mouseover",function(){var e="top"===t.tooltipPosition,a=(0,ae.select)("#context").append("g").attr("id","legend_"+t.title).attr("transform","translate(-126, "+(e?t.groupY-68:t.groupY+28)+")");a.append("polygon").attr("points",e?"0,0, 15,0, 7.5,7.5":"0,0, 15,0, 7.5,-7.5").attr("transform","translate(10, "+(e?44:0)+")"),a.append("rect").attr("width",148).attr("height",44).attr("stroke",ge.BLACK).style("fill",ge.BLACK),a.append("text").attr("class","date").attr("transform","translate(45,26)").attr("text-anchor","start").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).style("text-transform","capitalize").style("fill",ge.WHITE).text(t.context[t.seriesFlag]?"Hide curves":"Show curves");var n=a.append("g").attr("transform","translate(12, 8)");n.append("path").attr("d","M0 0h24v24H0z"),n.append("path").attr("class","legend-tooltip-icon").attr("fill",ge.WHITE).attr("d",t.context[t.seriesFlag]?Ee:_e)}),n.on("mouseout",function(){(0,ae.select)("#legend_"+t.title).remove()}),n.on("click",function(){t.context.toggleSeries(t.title),t.group.forEach(function(e){if(e){var a=t.context[e.groupFlag]&&t.context[e.seriesFlag]?null:"none";e.components.forEach(function(e){e&&e.style("display",a)})}n.style("opacity",t.context[e.seriesFlag]?1:.5);var r=(0,ae.select)("#legend_"+t.title);r.select("text").text(t.context[e.seriesFlag]?"Hide curves":"Show curves"),r.select(".legend-tooltip-icon").attr("d",t.context[e.seriesFlag]?Ee:_e)})}))}function D(e,t,a,n,r,i,l,o){var s=null;return n&&n.length>0&&(s=e.append("circle"),s.attr("id",o).attr("cx",t(n[n.length-1].date)).attr("cy",a(n[n.length-1].value)).attr("opacity",0).attr("fill","dashed"===l||"hollow"===l?ge.WHITE:r).style("display",i?null:"none"),"dashed"===l&&s.attr("class",l||"").attr("stroke",r).attr("stroke-width",2).attr("stroke-dasharray","2 2"),"hollow"===l&&s.attr("class",l||"").attr("stroke",r).attr("stroke-width",4)),s}function P(e){var t=e.append("g").attr("transform","translate(-118)").attr("opacity",.3);t.append("line").attr("x2",44).attr("stroke",ge.BLACK).attr("stroke-width",2),t.append("line").attr("x1",38).attr("x2",44).attr("y1",-6).attr("stroke",ge.BLACK).attr("stroke-width",2),t.append("line").attr("x1",38).attr("x2",44).attr("y1",6).attr("stroke",ge.BLACK).attr("stroke-width",2)}function L(e,t,a){e.append("defs").append("pattern").attr("id",t).attr("width","6").attr("height","8").attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("rect").attr("width","1.5").attr("height","8").attr("fill",a||ge.BLACK)}function M(e,t){e.append("rect").attr("x",t.x).attr("width",t.width<0?0:t.width).attr("y",t.y).attr("height",t.height).style("fill",t.fill).style("opacity",t.opacity)}function k(e,t,a){var n=e(t.isAfter(a)?a:t);return n<0?0:n}function x(e,t,a){if(N(e,t),!a){var n=e.append("g").attr("transform","translate("+t.groupX+")"),r=n.append("g");t.text&&(r.append("rect").attr("y",-15).attr("width",74).attr("height",28).style("fill",t.backgroundFill),r.append("text").attr("x",37).attr("y",4).classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("text-anchor","middle").style("fill",t.textFill?t.textFill:ge.WHITE).text(t.text),r.append("text").attr("x",-12).attr("y",4).classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("text-anchor","end").style("fill",ge.BLACK).text(t.label),P(n))}}function j(e,t,a){var n=e.selectAll(".chart-legend-menu-item").data(t).enter().append("g").attr("class","chart-legend-menu-item").attr("id",function(e){return e.checkboxId+"_wrapper"}).attr("transform",function(e){return"translate("+e.groupX+","+e.groupY+")"});n.append("rect").attr("width",22).attr("height",22).attr("fill",ge.WHITE).attr("stroke",ge.BLACK).attr("stroke-width",2),n.append("g").attr("id",function(e){return e.checkboxId}).attr("transform","translate(-1,-1)").style("display",function(e){return a[e.groupFlag]?null:"none"}).append("path").attr("d","M17,18.1 L7,18.1 L7,16.1 L17,16.1 L17,18.1 Z M10.3,14.1 L7,10.8 L8.4,9.4 L10.3,11.3\n                      L15.6,6 L17,7.4 L10.3,14.1 Z");var r=n.append("g").attr("transform",function(){return"translate(34,13)"});r.append("line").attr("x2",20).attr("y1",6).attr("y2",6).attr("class",function(e){return"line "+e.groupName.toLowerCase()}),r.append("text").classed("chart-legend__label",!0).text(function(e){return e.groupName}),n.on("click",function(e){a.toggleCurveVisibility(e.groupName),e.group.forEach(function(e){if(e){var t=a[e.groupFlag]&&a[e.seriesFlag]?null:"none";e.components.forEach(function(e){e&&e.style("display",t)})}});var t=a[e.groupFlag]?null:"none";(0,ae.select)("#"+e.checkboxId).style("display",t)})}function F(e,t,a){e&&e.append("line").attr("y1",a?-10:-20).attr("y2",a?-34:-45).style("stroke",t).style("stroke-width","1px")}function U(e,t,a,n){var r=e.append("g").attr("transform","translate(0, -320)");T(r,-12,ge.GREY);var i=void 0;i=n?96:a?66:36;var l=r.append("g").attr("transform","translate(15, "+-i/2+")");l.append("rect").at({id:"tooltip-background-rect"}).attr("width",156).attr("height",i),l.append("polygon").attr("stroke",ge.BLACK).attr("points","0,7.5, 7.5,0 7.5,15").attr("transform","translate(-5,"+(i/2-7.5)+")");var o=l.append("g").style("display","none").attr("id","uncertainty-tooltip-data"),s=o.append("g").translate([10,20]).attr("id","q75Enrolment-tooltip-data_generic");s.append("line").at({x2:10,y1:8,y2:8,class:"line enrolment dotted"}),s.append("text").attr("class","tooltip-data-text").text("34");var u=o.append("g").translate([10,50]).attr("class","enrolment-tooltip-data_actual");u.append("line").at({x2:20,y1:8,y2:8,class:"line enrolment"}),u.append("text").attr("class","tooltip-data-text").text("12");var d=o.append("g").translate([10,80]).attr("id","q25Enrolment-tooltip-data_generic");d.append("line").at({x2:10,y1:8,y2:8,class:"line enrolment"}),d.append("text").attr("class","tooltip-data-text").text("55");var c=l.selectAll(".tooltip-data").data(t).enter().append("g").attr("class","regular-tooltip-data").attr("id",function(e){return e.groupName+"-tooltip-data"}).attr("transform",function(e){return"translate("+e.groupX+","+e.groupY+")"}),f=c.append("g").attr("class",function(e){return e.groupName+"-tooltip-data_generic"});if(f.append("line").attr("x2",20).attr("y1",8).attr("y2",8).attr("class",function(e){return"line "+e.lineClass+" dotted"}),f.append("text").attr("class","tooltip-data-text").text(function(e){return e.textGeneric}),a){var p=c.append("g").attr("class",function(e){return e.groupName+"-tooltip-data_actual"}).attr("transform","translate(0,30)");p.append("line").attr("x2",20).attr("y1",8).attr("y2",8).attr("class",function(e){return"line "+e.lineClass}),p.append("text").attr("class","tooltip-data-text").text(function(e){return e.textActual})}if(n){var h=c.append("g").attr("class",function(e){return e.groupName+"-tooltip-data_adjusted"}).attr("transform","translate(0,60)");h.append("line").attr("x2",20).attr("y1",8).attr("y2",8).attr("class",function(e){return"line "+e.lineClass+" bold"}).style("stroke-width",3),h.append("line").attr("x2",20).attr("y1",8).attr("y2",8).style("stroke",ge.WHITE).attr("stroke-dasharray","3 4").attr("class",function(e){return"line "+e.lineClass+" bold"}).style("stroke-opacity",.7).style("stroke-width",2),h.append("text").attr("class","tooltip-data-text").text(function(e){return e.textAdjusted})}}function V(e){var t=void 0;return e.forEach(function(e){t?e.length>t.length&&(t=e):t=e}),t}function B(e,t,a){var n=null,r=null,l=t.format("YYYY-MM-DD"),o=e[e.length-1]?e[e.length-1]:null,s=(0,de.default)(e,function(e){return l===e.date.format("YYYY-MM-DD")});if(!s&&o&&t.isSameOrBefore(o.date)){var d=[].concat(i(e),[{date:t.clone()}]);d.sort(u);var c=d.findIndex(function(e){return l===e.date.format("YYYY-MM-DD")});c>0&&(s=d[c-1])}return s&&(n=a(s.value),r=s.value),{yCoord:n,value:r}}function H(e,t,a,n,r,l){var o=[{date:n,week:0}].concat(i(e)),s=ye(o,t,1),u=o[s-1],d=o[s];if(u&&d){var c=void 0;c=u.week===d.week?d:t-u.date>d.date-t?d:u;var f={yCoord:0,value:null};return{xCoord:a(c.date),value:c.date,sivValue:c.sivValue?{yCoord:r(c.sivValue),value:c.sivValue}:f,screeningValue:c.screeningValue?{yCoord:l(c.screeningValue),value:c.screeningValue}:f,enrolmentValue:c.enrolmentValue?{yCoord:l(c.enrolmentValue),value:c.enrolmentValue}:f,actualSivValue:c.actualSivValue?{yCoord:r(c.actualSivValue),value:c.actualSivValue}:f,actualScreeningValue:c.actualScreeningValue?{yCoord:l(c.actualScreeningValue),value:c.actualScreeningValue}:f,actualEnrolmentValue:c.actualEnrolmentValue?{yCoord:l(c.actualEnrolmentValue),value:c.actualEnrolmentValue}:f,actualQ25EnrolmentValue:c.actualQ25EnrolmentValue?{yCoord:l(c.actualQ25EnrolmentValue),value:c.actualQ25EnrolmentValue}:f,actualQ75EnrolmentValue:c.actualQ75EnrolmentValue?{yCoord:l(c.actualQ75EnrolmentValue),value:c.actualQ75EnrolmentValue}:f,adjustedSivValue:c.adjustedSivValue?{yCoord:r(c.adjustedSivValue),value:c.adjustedSivValue}:f,adjustedScreeningValue:c.adjustedScreeningValue?{yCoord:l(c.adjustedScreeningValue),value:c.adjustedScreeningValue}:f,adjustedEnrolmentValue:c.adjustedEnrolmentValue?{yCoord:l(c.adjustedEnrolmentValue),value:c.adjustedEnrolmentValue}:f}}return{xCoord:0,value:(0,le.default)()}}function G(e,t){var a=e.append("g").attr("transform","translate("+t+")");return a.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",ge.WHITE).attr("r",9),a.append("circle").attr("r",2),a}function Y(e,t){var a=e.append("g").attr("transform","translate("+t+")");return a.append("circle").style("stroke","black").style("stroke-dasharray","2 2").style("stroke-width","2px").style("fill",ge.WHITE).attr("r",9),a.append("circle").attr("r",2),a}function z(e,t){var a=(0,le.default)(t);return e.filter(function(e){return e.date.isSameOrBefore(a)})}function W(e){var t=c(e),a=e.findIndex(function(e){return e.value===t});return e.slice(0,a+1)}function q(e,t){return e.map(function(e,a){return{date:e.date,q75:e.value,q25:t[a].value}})}function K(e,t){var a={siv:"stroke-width: 2px; stroke: "+ge.YELLOW,screening:"stroke-width: 2px; stroke: "+ge.PURPLE,enrolment:"stroke-width: 2px; stroke: "+ge.BLUE},n=e.selectAll(".subheader-legend-item").data(t).enter().append("g").attr("id",function(e){return e.lineClass+"-max-hint"}).attr("transform",function(e){return"translate("+e.groupX+","+e.groupY+")"});n.append("line").at({x2:20,y1:6,y2:6}).attr("class",function(e){return"line "+e.lineClass}).attr("style",function(e){return a[e.lineClass]}),n.append("text").classed("max-value-label",!0).st({fontFamily:"VoltaModern, sans-serif",fontSize:"16px",fontWeight:"bold",userSelect:"none"}).text(function(e){return e.text}),n.filter(function(e){return e.appendSeparator}).append("line").at({x1:62,x2:70,y1:8,y2:-14}).st({stroke:ge.MID_GREY,strokeWidth:"1px"}).classed("line slash-separator",!0)}function X(e,t,a,n){e.append("path").attr("d",he).attr("class","axis-icon").st({fill:ge.BLACK,opacity:.5}).translate([t,n]);var r=e.append("g").attr("class","axis-icon").st({fill:ge.BLACK,opacity:.5}).translate([a,n]);r.append("path").attr("d",ve),r.append("path").attr("d",me)}function Z(e,t,a,n,r){var i=e.append("g").attr("class","chart-legend-menu-item").attr("id","overallocation-toggle").attr("transform","translate("+t+","+a+")");return i.append("rect").at({width:22,height:22,fill:ge.BLACK}),i.append("rect").at({width:18,height:18,fill:ge.WHITE}).translate([2,2]),i.append("g").at({id:"overallocation-checkbox"}).translate([-1,-1]).style("display",n?null:"none").append("path").attr("d","M17,18.1 L7,18.1 L7,16.1 L17,16.1 L17,18.1 Z M10.3,14.1 L7,10.8 L8.4,9.4 L10.3,11.3\n                      L15.6,6 L17,7.4 L10.3,14.1 Z"),i.on("click",function(){r(!n),(0,ae.select)("#overallocation-checkbox").style("display",!n)}),i}function J(e,t){var a=e[e.length-1],n=[].concat(i(e));if(a&&a.date){for(var r=a.date.clone();r<=t;)n.push(te({},a,{date:r})),r=r.clone().add(1,"d");return n}return e}function Q(e,t){var a=t,n=a.reduce(function(e,t){return e.set(t.formattedDate,te({},t)),e},new Map),l=Object.keys(e);l.forEach(function(t){e[t].forEach(function(e){var a=n.get(e.formattedDate);a?a[t+"Value"]=e.value:n.set(e.date,r({},t+"Value",e.value))})});var o=[].concat(i(n.values()));return a=o.map(function(e,t){var a=e;return l.forEach(function(e){if(void 0===a[e+"Value"]&&0!==t){var n=o[t-1],r=n[e+"Value"];a.date&&(a[e+"Value"]=void 0!==r?r:null)}}),a})}function $(e){e.append("g").translate([26,16]).append("text").attr("fill",ge.BLACK).attr("text-anchor","start").text("O/E").style("font-family","VoltaModern, sans-serif")}function ee(e,t,a,n){e.append("rect").at({width:t,height:a+3,fill:ge.BLACK,opacity:.04,class:"chart-background"}),e.append("rect").at({x:-n,width:n,height:a+3,fill:ge.BLACK,opacity:.02,class:"chart-background side"}),e.append("rect").at({x:t,width:n,height:a+3,fill:ge.BLACK,opacity:.02,class:"chart-background side"})}Object.defineProperty(t,"__esModule",{value:!0}),t.COLORS=t.patIcon2=t.patIcon=t.sitesIcon=void 0;var te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.updateSeries=l,t.updateAdjustedSeries=o,t.updateActualSeries=s,t.sortByDateAscending=u,t.getMinMaxDate=d,t.getMaxValue=c,t.drawSeriesLine=f,t.appendTextToHint=p,t.appendLineToHint=h,t.appendPolygonToHint=v,t.appendRectToHint=m,t.appendFocusOnSeries=_,t.distanceTo=E,t.animateAppearance=g,t.animateAppearanceZoomed=y,t.appendLabelToMilestone=S,t.appendNarrowLabelToMilestone=b,t.appendMilestoneTooltip=C,t.removeMilestoneTooltip=O,t.appendHoverMark=T,t.appendMilestone=R,t.getMonthsTickValues=A,t.getYearsTickValues=I,t.isDataValid=w,t.appendGroupLabel=N,t.appendCurveEnd=D,t.appendArrow=P,t.injectPatternDefs=L,t.drawOverflowRect=M,t.getWidth=k,t.appendMilestonesLegend=x,t.drawChartMenu=j,t.appendLineToLabel=F,t.appendHoverTooltip=U,t.getLongestArray=V,t.getHoverSeriesData=B,t.getHoverXPosition=H,t.appendFppMark=G,t.appendStartEndMark=Y,t.sliceCurveData=z,t.sliceActualSeries=W,t.mergeQData=q,t.drawSubheaderLegend=K,t.drawAxisIcons=X,t.drawOverallocationToggle=Z,t.fillMissingValues=J,t.getAccumulatedSeries=Q,t.drawOverallocationIcon=$,t.drawChartBackground=ee;var ae=a(23),ne=a(29),re=a(179),ie=a(11),le=n(ie),oe=a(1387),se=n(oe),ue=a(1787),de=n(ue),ce=(a(454),a(234)),fe=(n(ce),a(453)),pe=a(8),he=t.sitesIcon="M10 4V0H0v18h20V4H10zM4 16H2v-2h2v2zm0-4H2v-2h2v2zm0-4H2V6h2v2zm0-4H2V2h2v2zm4\n      12H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V6h2v2zm0-4H6V2h2v2zm10\n      12h-8v-2h2v-2h-2v-2h2V8h-2V6h8v10zm-2-8h-2v2h2V8zm0 4h-2v2h2v-2z",ve=t.patIcon="M10 19h3v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5h4.286c.786 0 1.428.675 1.428\n          1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2s.893-2 2-2 2 .893 2 2-.893 2-2 2z",me=t.patIcon2="M18 19h3v3H11v-3h3v-5h-1.571V8.5c0-.825.642-1.5 1.428-1.5h4.286c.786 0 1.428.675 1.428\n          1.5V14H18v5zM16 6c-1.107 0-2-.893-2-2s.893-2 2-2 2 .893 2 2-.893 2-2 2z",_e="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12\n        17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3\n        3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z",Ee="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89\n        3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12\n        7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0\n        3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0\n        1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55\n        1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15\n        3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z",ge=t.COLORS={BLACK:"#000",GREY:"#ededed",MID_GREY:"#c6c6c6",DARK_GREY:"#9d9d9d",WHITE:"#FFF",YELLOW:"#FCB13B",BLUE:"#19A9E0",PURPLE:"#9C28C6",GREEN:"#00C329",LIGHT_GREEN:"#ebfaee",RED:"#ec3508"},ye=(0,ne.bisector)(function(e){return e.date}).left},function(e,t,a){"use strict";function n(e){return{type:u.FORBIDDEN_ERROR,payload:{code:403,message:e}}}function r(e){return{type:u.INTERNAL_SERVER_ERROR,payload:{code:500,message:e}}}function i(e){return{type:u.NOT_FOUND_ERROR,payload:{code:404,message:e}}}function l(e){return{type:u.ODA_API_ERROR,payload:{code:503,message:e}}}function o(){return{type:u.SESSION_EXPIRED,payload:{code:302}}}function s(e){return{type:u.BAD_REQUEST,payload:{code:400,message:e}}}Object.defineProperty(t,"__esModule",{value:!0}),t.forbiddenError=n,t.internalServerError=r,t.notFoundError=i,t.ODAError=l,t.sessionExpired=o,t.badRequestError=s;var u=a(13)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(771),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SaveAsImageControl=t.ChartCollapseControl=t.HistoricalBenchmarkChart=t.MinimisedEnrolmentChart=void 0;var r=a(818),i=n(r),l=a(820),o=n(l),s=a(819),u=n(s),d=a(817),c=n(d),f=a(821),p=n(f);t.MinimisedEnrolmentChart=o.default,t.HistoricalBenchmarkChart=u.default,t.ChartCollapseControl=c.default,t.SaveAsImageControl=p.default,t.default=i.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(236),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ADMIN:"FPO_ADMIN",USER:"FPO_USER",READONLY:"FPO_READONLY_USER",COUNTRY_USER:"FPO_COUNTRY_USER",PLAYGROUND:"FPO_PLAYGROUND_USER"};t.default=n},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a,n,r,i,l,s){var u=a.hasAdjustedOrigin,d=a.ignoreGenericData,f=(0,c.default)(a,"actualTimeseriesSnapshot",{})||{},h=f.actual_date,v=f.sites_initiated,m=f.patients_screened,_=f.patients_randomized,g=h?(0,p.getMomentDate)(h):null,S=u&&g&&v?y.default:E.default,C=(0,p.getMomentDate)(e),O=(0,p.getMomentDate)(t),T=(0,p.getMomentDate)(a["25_si"]),R=(0,p.getMomentDate)(a["50_si"]),A=(0,p.getMomentDate)(a["90_si"]),I=(0,p.getMomentDate)(a.fsiv),w=(0,p.getMomentDate)(a.fpfv),N={};s||(N=S(C,O,n,I,w,T,R,A,a.num_sites,a.patient_allocation,a.sas,a.screening_failure,a.randomisation_rate,"",a.events,g,v,m,_,l,a.patient_allocation_min,a.patient_allocation_max)),d&&(N.invalidFields=[]);var D=(0,b.default)(a,C),P={};if(r){var L=(0,p.getMomentDate)(a.adjusted_25_si),M=(0,p.getMomentDate)(a.adjusted_50_si),k=(0,p.getMomentDate)(a.adjusted_90_si),x=(0,p.getMomentDate)(a.adjusted_fsiv),j=(0,p.getMomentDate)(a.adjusted_fpfv);P=!d&&g&&v?(0,y.default)(C,O,n,x,j,L,M,k,a.adjusted_num_sites,a.adjusted_patient_allocation,a.adjusted_sas,a.adjusted_screening_failure,a.adjusted_randomisation_rate,"adjusted_",a.adjusted_events,g,v,m,_,l,a.adjusted_patient_allocation_min,a.adjusted_patient_allocation_max):(0,E.default)(C,O,n,x,j,L,M,k,a.adjusted_num_sites,a.adjusted_patient_allocation,a.adjusted_sas,a.adjusted_screening_failure,a.adjusted_randomisation_rate,"adjusted_",a.adjusted_events,g,v,m,_,l,a.adjusted_patient_allocation_min,a.adjusted_patient_allocation_max)}return o({},N,D,P)}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.source_scenario_id?"adjusted_":"",n=[];do{e.cohorts.forEach(function(r){if(r.trigger_type===O.default.DATE||r.trigger_type===O.default.MILESTONES&&r.start_milestone===C.TRIGGER_START_MILESTONES.GLOBAL_FP)n.find(function(e){return e.id===r.id})||n.push((0,m.default)(r,e,t,"name"));else if(n.find(function(e){return e.id===r.source_cohort_id})&&!n.find(function(e){return e.id===r.id})){var i=n.find(function(e){return e.id===r.source_cohort_id});if(r.trigger_type===O.default.MILESTONES)r.fp=(0,c.default)(i,"fullData[0]")[""+a+r.start_milestone.toLowerCase()];else if(r.trigger_type===O.default.PATIENTS_RANDOMIZED){var l=r.target_num_patients,o=(0,c.default)(i,"fullData[0]");if(!r.num_patients_abs){var s=(0,c.default)(o,a+"patient_allocation");l=l*s/100}var u=(0,c.default)(o,a+"curves")[2].findIndex(function(e){return e[1]>=l});r.fp=u>=0?(0,c.default)(i,"fp")&&(0,c.default)(i,"fp").clone().add(u,"d"):null}n.push((0,m.default)(r,e,t,"name"))}})}while(n.length!==e.cohorts.length);return n}function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e;n.end_date=(0,p.getMomentDate)(n.end_date),n.updated=(0,u.default)(n.updated),n.cohorts=i(n,t);var r=n.cohorts.filter(function(e){var t=null!==n.source_scenario_id?"adjusted_curves":"curves",a=e.fullData[0][t];return 0!==a[0].length&&0!==a[1].length&&0!==a[2].length});return n.hasInvalidCohorts=r.length!==n.cohorts.length,n.aggregatedGlobalData=(0,f.getAggregatedGlobalRow)(n.cohorts.filter(function(e){return e.countries.length>0&&e.fp}).map(function(e){return e.fullData.find(function(e){return"rollup"===e.type})}),n.cohorts.map(function(e){return e.aggregatedActuals})[0],(0,u.default)(n.fp),n.target_num_patients,n)[0],n.approvedData&&n.approvedData.aggregatedGlobalData&&!a&&T.APPROVED_COUNTRY_DATA_FIELDS.forEach(function(e){n.aggregatedGlobalData[e]=n.approvedData.aggregatedGlobalData[e]}),n.aggregatedGlobalData.uniqueCountries=(0,h.getUniqueCohortsCountries)(n.cohorts),n}Object.defineProperty(t,"__esModule",{value:!0}),t.getActualsData=t.getCurvesAndMilestonesAdjusted=t.getCurvesAndMilestones=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.calculateCurvesData=r,t.calculateCohortsData=i,t.calculateCohorts=l;var s=a(11),u=n(s),d=a(12),c=n(d),f=a(201),p=a(8),h=a(110),v=a(1104),m=n(v),_=a(1105),E=n(_),g=a(1106),y=n(g),S=a(1103),b=n(S),C=a(98),O=n(C),T=a(10);t.getCurvesAndMilestones=E.default,t.getCurvesAndMilestonesAdjusted=y.default,t.getActualsData=b.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(t.required=function(e){return e||0===e?void 0:"Required"},t.requiredStudy=function(e){return e?void 0:"Please enter a study ID"},t.requiredScenario=function(e){return e?void 0:"Please enter a scenario ID"},t.isNumber=function(e){return e&&isNaN(Number(e))?"Must be a number":void 0},t.minValue=function(e){return function(t){return t&&t<e?"Must be at least "+e:void 0}}),r=(t.minValue1=n(1),t.maxValue=function(e){return function(t){return t&&t>e?"Must be not greater than "+e:void 0}});t.maxValue1m=r(1e6),t.maxLength=function(e){return function(t){return t&&t.length>e?"Must be "+e+" characters max":void 0}},t.isInteger=function(e){return e&&/^\d+$/.test(e)||0===e?void 0:"Must be an integer"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(934),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextMenu=t.ContextMenuItem=void 0;var n=a(796),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.ContextMenuItem=n.ContextMenuItem,t.ContextMenu=r.default},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(1874),h=n(p);a(2183);var v=function(e){function t(){return i(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=r(e,["children"]);return d.default.createElement(h.default,a,t)}}]),t}(d.default.PureComponent);v.propTypes={mouseEnterDelay:f.default.number,destroyTooltipOnHide:f.default.bool,mouseLeaveDelay:f.default.number,align:f.default.object,placement:f.default.oneOf(["top","right","bottom","left","topLeft","leftTop","topRight","rightTop","bottomRight","rightBottom","bottomLeft","leftBottom"]),trigger:f.default.any,children:f.default.any,onVisibleChange:f.default.func,afterVisibleChange:f.default.func,overlay:f.default.oneOfType([f.default.node,f.default.func]).isRequired,getTooltipContainer:f.default.func},v.defaultProps={mouseEnterDelay:0,destroyTooltipOnHide:!0,mouseLeaveDelay:.1,align:{},placement:"top",trigger:["hover"],children:void 0,onVisibleChange:void 0,afterVisibleChange:void 0,getTooltipContainer:void 0},t.default=d.default.memo(v)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SaveChangesDialog=void 0;var r=a(989),i=n(r),l=a(988),o=n(l);t.SaveChangesDialog=o.default,t.default=i.default},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(770),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={LPFT_ALL:"All LPFT",LPFT_EARLY:"Early",LPFT_LATE:"Late",START_UP:"Start-up",SCREENING:"Screening",RANDOMISATION:"Randomization"};t.LOCATION_FILTER_OPTIONS={ALL_REGIONS:"All regions",ALL:"All",GLOBALS_ONLY:"Global"},t.default=n},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventCountrySelector=void 0;var r=a(931),i=n(r),l=a(930),o=n(l);t.EventCountrySelector=o.default,t.default=i.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={INCOMPLETE:"INCOMPLETE",ERROR:"ERROR",COMPLETE:"COMPLETE"};t.default=n},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r,i=t.COLUMN_NAMES={STUDY_NAME:"study",TA_INDICATION:"therapeutic_area",INDICATION:"indication",UPDATE_TIME:"lastUpdatedAt"};t.COLUMN_TITLES=(r={},n(r,i.STUDY_NAME,"Study"),n(r,i.TA_INDICATION,"Therapeutic area / Indication"),n(r,i.UPDATE_TIME,"Last updated"),r),t.SORTING_ORDER={ASC:"ASC",DESC:"DESC"},t.SECTIONS={TRACKING:"Tracking",PLANNING:"Planning",PLAYGROUND:"My playground",UNKNOWN:"N/A"},t.STUDY_TYPE={ACTIVE:"ACTIVE",PLANNED:"PLANNED"}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t,a){var n={uncertainty:"N/A",unavailableFields:[]},r=e.length>0,i=0,l=a.predictedCountries&&a.predictedCountries.rows?a.predictedCountries.rows:[],o=(0,_.default)(l,e,function(e,t){return e.country_id===t.platform_country_id});l.length!==o.length&&(r=!1,n.unavailableFields=["fsiv","sas","25_si","50_si","90_si","fpfv","screening_failure","randomisation_rate"]);for(var s=0;s<e.length;s+=1){var u=e[s],d=u.uncertainty,f=u.overrideList.filter(function(e){return"id"!==e&&"scenario_id"!==e&&"country_id"!==e&&"patient_allocation"!==e&&"num_sites"!==e&&"constraint"!==e&&"unlock"!==e});if(u.unlock&&0===u.unlock.length&&(n.unavailableFields=(0,c.default)(n.unavailableFields.concat(f))),!d){r=!1;break}i+=d*(u.patient_allocation/t)}return r&&(n.uncertainty=i<=.3?S.UNCERTAINTY.LOW:i>.3&&i<=.7?S.UNCERTAINTY.MEDIUM:S.UNCERTAINTY.HIGH),n}function l(e,t,a){return e.map(function(e){var n=e.aggregators,l=e.countries;Object.keys(n).forEach(function(r){if("GR"!==r){var i=r,o=n[r];o.curves=[[],[],[]],"actual"===e.type&&(o.curves=o.curves.concat([[],[]]));var s=l.filter(function(t){return t.region_name===i&&(t.lpft&&!t.invalidFields&&!t.ignore_aggregation||"actual"===e.type)});(0,O.aggregateCurvesData)(o,s,a.cohorts&&a.cohorts.length>0,t,a.isImpact)}});var o=n.GR;o.curves=[[],[],[]],"actual"===e.type&&(o.curves=o.curves.concat([[],[]]));var s=Object.keys(n).filter(function(e){return"GR"!==e}).map(function(e){return n[e]});(0,O.aggregateCurvesData)(o,s,a.cohorts&&a.cohorts.length>0,t,a.isImpact);var d=[null],c=(0,g.default)("location","ASC");Object.keys(n).sort().forEach(function(e){var i=[],o=n[e];if("actual"!==o.valuesType&&!a.isImpact&&"IMPACT"!==a.origin){var s=o.curves[2],f=s[s.length-1]||null;o.lpft=f?t.clone().add(f[0],"d"):null}var p=void 0;if(p="GR"===e?l.filter(function(e){return e.lpft&&!e.ignore_aggregation}):l.filter(function(t){return t.region_name===e&&t.lpft&&!t.ignore_aggregation}),1===p.length&&"actual"!==o.valuesType){var h=p[0];o["25_si"]=h["25_si"]?h["25_si"]:null,o["50_si"]=h["50_si"]?h["50_si"]:null,o["90_si"]=h["90_si"]?h["90_si"]:null}else if("actual"===o.valuesType){var v=o.actual_date?o.actual_date.format("YYYY-MM-DD"):null,m=o.lpft?o.lpft.format("YYYY-MM-DD"):null,_=o.curves[0].filter(function(e){return!o.actual_date||!o.lpft||(o.actual_date&&o.lpft&&o.actual_date.isBefore(o.lpft)?e[0]<=v:e[0]<=m)});if(o.planned_num_sites){var E=_.find(function(e){return e[1]>=.25*o.planned_num_sites}),g=_.find(function(e){return e[1]>=.5*o.planned_num_sites}),S=_.find(function(e){return e[1]>=.9*o.planned_num_sites});o["25_si"]=void 0===E?null:(0,w.getMomentDate)(E[0]),o["50_si"]=void 0===g?null:(0,w.getMomentDate)(g[0]),o["90_si"]=void 0===S?null:(0,w.getMomentDate)(S[0])}}else if("generic"===o.valuesType||"adjusted"===o.valuesType&&a.exact_copy&&!a.hasAdjustedOrigin){var b=o.curves[0].find(function(e){return e[1]>=.25*o.num_sites}),C=o.curves[0].find(function(e){return e[1]>=.5*o.num_sites}),O=o.curves[0].find(function(e){return e[1]>=.9*o.num_sites});o["25_si"]=void 0===b?null:t.clone().add(b[0],"d"),o["50_si"]=void 0===C?null:t.clone().add(C[0],"d"),o["90_si"]=void 0===O?null:t.clone().add(O[0],"d")}if("region"===o.type){i=l.filter(function(e){return e.region===o.location}).sort(function(e,t){return e.location===y.UNSPECIFIED_COUNTRY?1:t.location===y.UNSPECIFIED_COUNTRY?-1:c(e,t)}).map(function(e){var t=e.regionHasSingleCountry;return o.isRegionCountry=e.regionHasSingleCountry,t&&e.onlyActuals&&(o.onlyActuals=!0,o.ignoreGenericData=!0),t&&e.ignoreAdjustedData&&(o.ignoreAdjustedData=!0),u({type:"country"},e,{isRegionCountry:t})});var T=i.filter(function(e){return e.ignoreAdjustedData}),I=i.filter(function(e){return e.onlyActuals});T.length===i.length&&(o.ignoreAdjustedData=!0),I.length===i.length&&(o.onlyActuals=!0),o.sas=(0,A.getWeightedBySitesValue)("sas","num_sites",i.filter(function(e){return e.lpft&&!e.ignore_aggregation}),o.num_sites);var N=i.filter(function(e){return null!==e.randomisation_rate&&void 0!==e.randomisation_rate&&null!==e.sr&&void 0!==e.sr&&e.lpft&&!e.ignore_aggregation}),D=(0,A.getWeightedBySitesValue)("randomisation_rate","num_sites",N,o.num_sites);o.randomisation_rate=D>0?+D.toFixed(2):null;var P=(0,A.getWeightedBySitesValue)("sr","num_sites",N,o.num_sites);o.sr=P>0?+P.toFixed(2):null;var L=(0,A.getWeightedBySitesValue)("screening_failure","num_sites",N,o.num_sites);o.screening_failure=L>0?+L.toFixed(2):null,o.generatedFields&&"generic"===o.valuesType&&a.isImpact&&(o.generatedFields=(0,R.default)(o,i))}else o.sas=(0,A.getWeightedBySitesValue)("sas","num_sites",l.filter(function(e){return e.lpft}),o.num_sites);if("generic"===o.valuesType&&(a.aggregatedHistoricalDataByStudy&&a.aggregatedHistoricalDataByStudy[e]&&(o.historical_reference_data_by_studies=a.aggregatedHistoricalDataByStudy[e]),a.aggregatedHistoricalDataByIndication&&a.aggregatedHistoricalDataByIndication[e]&&(o.historical_reference_data_by_indication=a.aggregatedHistoricalDataByIndication[e])),0===o.curves[1].length)o.fpfv_lpfv=null,o.fpp_fpfv=null;else if("adjusted"===o.valuesType){var M=o.curves[1],k=M[M.length-1][0],x=o.fpfv.diff(t,"d");o.fpfv_lpfv=k-x,o.fpp_fpfv=x,o.lpfv=t.clone().add(k+1,"d")}else if("actual"!==o.valuesType){var j=o.fpfv?o.fpfv.diff(t,"d"):-1,F=o.curves[1].map(function(e){return e[1]}),U=null!==j&&j>=0?F.indexOf(Math.max.apply(Math,r(F))):null;o.fpfv_lpfv=null!==j&&j>=0&&null!==U&&U>=0?U-j+1:null,o.fpp_fpfv=j,o.lpfv=t.clone().add(U+1,"d")}"region"===o.type?(d.push(o),d=d.concat(i)):d[0]=o});var f=d.filter(function(e){return e&&"region"===e.type&&e.lpft}),p=d[0];p.fp=t;var h=(0,A.getWeightedBySitesValue)("randomisation_rate","num_sites",f,p.num_sites),v=(0,A.getWeightedBySitesValue)("sr","num_sites",f,p.num_sites);p.randomisation_rate=h>0?Number(h.toFixed(2)):null,p.sr=v>0?Number(v.toFixed(2)):null;var m=(0,A.getWeightedBySitesValue)("screening_failure","num_sites",f,p.num_sites);if(p.screening_failure=m>0?Number(m.toFixed(2)):null,"generic"===p.valuesType){var _=i(l,p.patient_allocation,a),E=_.uncertainty,S=_.unavailableFields;p.uncertainty=E,p.uncertaintyUnavailableFields=S}return p.generatedFields&&"generic"===p.valuesType&&a.isImpact&&(p.generatedFields=(0,R.default)(p,l)),d[0]=u({},d[0],p),d})}function o(e,t,a,n){var r=(0,C.default)(e),i=r.genericDataRows,o=r.actualDataRows,s=r.adjustedDataRows,d={aggregators:D(s,"adjusted"),countries:s,type:"adjusted"},c={aggregators:D(o,"actual"),countries:o,type:"actual"},f={aggregators:D(i,"generic"),countries:i,type:"generic"},h=[f,c,d],v=l(h,t,a,n),m=v[0],_=v[1],E=v[2];return m.map(function(e,t){var a=(0,b.getPrefixedData)(_[t]),n=(0,b.getPrefixedData)(E[t]);return u({},(0,p.default)(e,"valuesType"),a,n)})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments[2],n=arguments[3];try{var i=(0,C.default)(e),l=i.genericDataRows,o=i.adjustedDataRows,s=t.map(function(e){return u({},e,(0,N.getActualsData)(e,a))}),d=(0,C.default)(s),c=d.actualDataRows,f={aggregators:P(o,"adjusted"),countries:o,type:"adjusted"},p={aggregators:P(c,"actual"),countries:c,type:"actual"},h={aggregators:P(l,"generic"),countries:l,type:"generic"},v=[h,p,f],m=v.map(function(t){var i=t.aggregators,l=t.countries,o=i.GR;o.curves=[[],[],[]],"actual"===t.type&&(o.curves=o.curves.concat([[],[]]));try{(0,O.aggregateCurvesData)(o,l,"generic"===t.type||"adjusted"===t.type,a,n.isImpact)}catch(e){o.curvesAggregationError=e}var s=[null];Object.keys(i).sort().forEach(function(e){var t=i[e];if("actual"!==t.valuesType){var n=t.curves[2].map(function(e){return e[1]}),o=n.indexOf(Math.max.apply(Math,r(n)));t.lpft=-1===o?null:a.clone().add(o+1,"d")}var u=t.curves[0].findIndex(function(e){return e[1]>=.25*t.num_sites});t["25_si"]=-1===u?null:a.clone().add(u+1,"d");var d=t.curves[0].findIndex(function(e){return e[1]>=.5*t.num_sites});t["50_si"]=-1===d?null:a.clone().add(d+1,"d");var c=t.curves[0].findIndex(function(e){return e[1]>=.9*t.num_sites});if(t["90_si"]=-1===c?null:a.clone().add(c+1,"d"),t.sas=(0,A.getWeightedBySitesValue)("sas","num_sites",l,t.num_sites),0===t.curves[1].length)t.fpfv_lpfv=null,t.fpp_fpfv=null;else{var f=t.fpfv?t.fpfv.diff(a,"d"):-1,p=t.curves[1].map(function(e){return e[1]}),h=null!==f&&f>=0?p.indexOf(Math.max.apply(Math,r(p))):null;t.fpfv_lpfv=null!==f&&f>=0&&null!==h&&h>=0?h-f+1:null,t.fpp_fpfv=f}s[0]=t});var d=s[0],c=(0,A.getWeightedBySitesValue)("randomisation_rate","num_sites",e,d.num_sites),f=(0,A.getWeightedBySitesValue)("sr","num_sites",e,d.num_sites);return d.randomisation_rate=c>0?Number(c.toFixed(2)):null,d.sr=f>0?f:null,null!==d.randomisation_rate&&null!==d.sr?d.screening_failure=1-d.randomisation_rate/d.sr:d.screening_failure=null,s[0]=u({},s[0],d),s}),_=m[0],E=m[1],g=m[2];return _.map(function(e,t){var a=(0,b.getPrefixedData)(E[t]),n=(0,b.getPrefixedData)(g[t]);return u({},e,a,n)})}catch(e){return console.log(e),[]}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.calculateTableData=o,t.getAggregatedGlobalRow=s;var d=a(180),c=n(d),f=a(81),p=n(f),h=a(12),v=n(h),m=a(1789),_=n(m),E=a(34),g=n(E),y=a(10),S=a(85),b=a(1099),C=n(b),O=a(1098),T=a(1100),R=n(T),A=a(1102),I=a(512),w=a(8),N=a(136),D=function(e,t){return e.reduce(function(e,a){var n=e;e[a.region_name]||(n[a.region_name]=(0,b.rowDataTemplate)(a.region,"region",t),n[a.region_name].region_id=a.region_id),(a.lpft&&!a.invalidFields&&!a.ignore_aggregation||"actual"===a.valuesType)&&((0,A.aggregateNumValue)(n,+a.patient_allocation,"patient_allocation",a.region_name),(0,A.aggregateNumValue)(n,+a.num_sites,"num_sites",a.region_name),(0,A.aggregateDateValueMin)(n,a.fsiv,"fsiv",a.region_name),(0,A.aggregateDateValueMin)(n,a.fpfv,"fpfv",a.region_name),(0,A.aggregateDateValueMin)(n,a.fpft,"fpft",a.region_name),(0,A.aggregateNumValueMin)(n,a.fpfv_fpft,"fpfv_fpft",a.region_name),"adjusted"===a.valuesType&&((0,A.aggregateDateValueMin)(n,a["25_si"],"25_si",a.region_name),(0,A.aggregateDateValueMin)(n,a["50_si"],"50_si",a.region_name),(0,A.aggregateDateValueMin)(n,a["90_si"],"90_si",a.region_name)),(0,A.aggregateDateValueMax)(n,a.lpft,"lpft",a.region_name)),"actual"===a.valuesType&&((0,A.aggregateDateValueMax)(n,a.actual_date,"actual_date",a.region_name),(0,A.aggregateDateValueMax)(n,a.lpft,"lpft",a.region_name),(0,A.aggregateDateValueMin)(n,a.lpfv,"lpfv",a.region_name),(0,A.aggregateNumValueMin)(n,a.fpfv_lpfv,"fpfv_lpfv",a.region_name),(0,A.aggregateNumValueMin)(n,a.fpp_fpfv,"fpp_fpfv",a.region_name),(0,A.aggregateDateValueMax)(n,a.original_f_lpft,"original_f_lpft",a.region_name),(0,I.aggregateOverallocation)(n,a),(0,A.aggregateNumValue)(n,+a.planned_num_sites,"planned_num_sites",a.region_name)),a.ignore_aggregation&&(a.curves=[[],[],[]]),n.GR.amount_countries+=1,n[a.region_name].amount_countries+=1;var r=(0,w.getMomentDate)((0,v.default)(a.actualTimeseriesSnapshot,"actual_date"));return r&&(0,A.aggregateDateValueMax)(n,r,"actualTimeseriesSnapshot.actual_date",a.region_name),n},{GR:(0,b.rowDataTemplate)("Global Rollup","rollup",t)})},P=function(e,t){return e.reduce(function(e,t){var a=e;(0,A.aggregateNumValue)(a,+t.patient_allocation,"patient_allocation"),(0,A.aggregateNumValue)(a,+t.num_sites,"num_sites"),(0,A.aggregateDateValueMin)(a,(0,w.getMomentDate)(t.fsiv),"fsiv"),(0,A.aggregateDateValueMin)(a,(0,w.getMomentDate)(t.fpfv),"fpfv"),(0,A.aggregateDateValueMin)(a,(0,w.getMomentDate)(t.fpft),"fpft"),(0,A.aggregateNumValueMin)(a,t.fpfv_fpft,"fpfv_fpft"),"actual"===t.valuesType&&((0,A.aggregateDateValueMax)(a,(0,w.getMomentDate)(t.actual_date),"actual_date"),(0,A.aggregateDateValueMax)(a,(0,w.getMomentDate)(t.lpft),"lpft"),(0,A.aggregateDateValueMin)(a,(0,w.getMomentDate)(t.lpfv),"lpfv"),(0,A.aggregateNumValueMin)(a,t.fpfv_lpfv,"fpfv_lpfv"),(0,A.aggregateNumValueMin)(a,t.fpp_fpfv,"fpp_fpfv")),a.GR.amount_countries+=1;var n=(0,w.getMomentDate)((0,v.default)(t.actualTimeseriesSnapshot,"actual_date"));return n&&(0,A.aggregateDateValueMax)(a,n,"actualTimeseriesSnapshot.actual_date"),a},{GR:(0,b.rowDataTemplate)("Global Rollup","rollup",t)})}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){return e.reduce(function(e,a){var n=(0,D.default)(a[0]).diff(t,"days")+1;return e.push([n,a[1]]),e},[])}function l(e,t){var a=(0,D.default)(e),n=(0,D.default)(t);if(a.isValid()&&n.isValid()){if(a>n)return 1;if(a<n)return-1}return 0}function o(e,t){return e.state.status===F.default.ACTIVE&&t.status!==x.SCENARIO_STATUS.APPROVED&&null!==t.source_scenario_id}function s(e,t){return(t.status===x.SCENARIO_STATUS.APPROVED||t.status===x.SCENARIO_STATUS.PREV_APPROVED||null!==t.source_scenario_id)&&e.state.status===F.default.ACTIVE}function u(e){return{type:"pattern",pattern:e===U.ACTUAL?"darkUp":"solid",fgColor:{argb:e}}}function d(e){return{properties:{tabColor:{argb:e}}}}function c(e,t,a,n){var r={Locations:25,Type:24,Patients:10,Sites:10,FSIV:20,"SAS%":10,"25% SI":20,"50% SI":20,"90% SI":20,FPFV:20,"FPFV-LPFV":12,"SR (patients/month/site)":24,"SF%":12,"RR (patients/month/site)":24,"P/LPFT":20},i={Locations:{numFmt:"text",alignment:{vertical:"top",horizontal:"left"}},Type:{numFmt:"text",alignment:{vertical:"top",horizontal:"left"}},Patients:{numFmt:"#",alignment:{vertical:"top",horizontal:"right"}},Sites:{numFmt:"#",alignment:{vertical:"top",horizontal:"right"}},FSIV:{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}},"SAS%":{numFmt:"0%",alignment:{vertical:"top",horizontal:"right"}},"25% SI":{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}},"50% SI":{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}},"90% SI":{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}},FPFV:{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}},"FPFV-LPFV":{numFmt:"#",alignment:{vertical:"top",horizontal:"right"}},"SR (patients/month/site)":{numFmt:"#0.00",alignment:{vertical:"top",horizontal:"right"}},"SF%":{numFmt:"0%",alignment:{vertical:"top",horizontal:"right"}},"RR (patients/month/site)":{numFmt:"#0.00",alignment:{vertical:"top",horizontal:"right"}},"P/LPFT":{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}}},l={bold:!0,color:{argb:U.BOLD}},o={style:"thin"};e.columns=Object.keys(t[0]).map(function(e){return{header:e,key:e,width:r[e],style:i[e]}}),e.getRow(1).eachCell(function(e){e.font=T({},l,{color:{argb:U.WHITE}}),e.fill=u(U.HEADER)}),t.forEach(function(t){e.addRow(t);var r=e.lastRow;"rollup"===t.type?r.eachCell({includeEmpty:!0},function(e,n){e.font=T({},l),1===n?e.border={right:T({},o)}:"Planned"===t.Type&&a?e.fill=u(U.APPROVED):"Actual/Forecast"===t.Type&&(e.fill=u(U.ACTUAL))}):"region"===t.type?r.eachCell({includeEmpty:!0},function(e,r){if(e.font=T({},l),n){var i={};1===r&&(i.right=T({},o)),"Planned"===t.Type&&(i.top=T({},o)),e.border=i,1!==r&&("Planned"===t.Type&&a?e.fill=u(U.APPROVED):"Actual/Forecast"===t.Type&&(e.fill=u(U.ACTUAL)))}else{var s={top:T({},o)};1===r&&(s.right=T({},o)),e.border=s}}):r.eachCell({includeEmpty:!0},function(e,n){1===n?e.border={right:T({},o)}:"Planned"===t.Type&&a?e.fill=u(U.APPROVED):"Actual/Forecast"===t.Type&&(e.fill=u(U.ACTUAL)),t.ignore_aggregation&&(e.font={bold:!0,color:{argb:U.IGNORED}})}),"targetRow"===t.type&&r.eachCell({includeEmpty:!0},function(e,t){e.font={color:{argb:U.HEADER}}})}),e.getColumn("P/LPFT").eachCell({includeEmpty:!0},function(e){e.border=T({},e.border,{right:T({},o)})}),e.lastRow.eachCell({includeEmpty:!0},function(e){e.border=T({},e.border,{bottom:T({},o)})}),e.getColumn(n?17:16).eachCell({includeEmpty:!0},function(e){e.border=null,e.fill=null}),e.spliceColumns(n?16:15,1),e.getColumn(n?16:15).eachCell({includeEmpty:!0},function(e){e.border=null,e.fill=null}),e.spliceColumns(n?16:15,1),e.views=[{state:"frozen",xSplit:1,ySplit:0}];var s=e.columns.find(function(e){return"type"===e.key});s&&(s.hidden=!0)}function f(e,t,a,n,i,o){var s={Locations:"text",Type:"text",Curve:"text"},d={bold:!0,color:{argb:U.BOLD}},c={style:"thin"},f=["Locations","Curve"];i&&f.push("Type"),e.columns=[].concat(f,r(Object.keys(a).filter(function(e){return"Locations"!==e&&"Type"!==e&&"Curve"!==e}).sort(l))).map(function(e,t){return{header:e,key:e,width:t<2?20:12,style:{numFmt:s[e]?s[e]:"#0"}}}),e.addRow(a),e.getRow(1).eachCell({includeEmpty:!0},function(e){e.font=T({},d,{color:{argb:U.WHITE}}),e.fill=u(U.HEADER)}),e.getRow(2).eachCell({includeEmpty:!0},function(e){e.font=T({},d,{color:{argb:U.WHITE}}),e.fill=u(U.HEADER)}),t.forEach(function(e){Object.keys(a).forEach(function(t){void 0===e[t]&&(e[t]=null)})}),t.forEach(function(t){e.addRow(t);var a=e.lastRow;"Planned"===t.Type&&n?a.eachCell({includeEmpty:!0},function(e,t){1!==t&&(e.fill=u(U.APPROVED))}):"Actual/Forecast"===t.Type&&a.eachCell({includeEmpty:!0},function(e,t){1!==t&&(e.fill=u(U.ACTUAL))}),"rollup"===t.type?a.eachCell(function(e,t){e.font=T({},d),1===t&&(e.border={right:T({},c)})}):"region"===t.type?a.eachCell({includeEmpty:!0},function(e,a){e.font=T({},d);var n={};1===a&&(n.right=T({},c)),i&&"SIV"===t.Curve&&"Planned"===t.Type?n.top=T({},c):"SIV"===t.Curve&&"Actual/Forecast"!==t.Type&&"Adjusted"!==t.Type&&(n.top=T({},c)),e.border=n}):a.eachCell(function(e,a){1===a&&(e.border={right:T({},c)}),t.ignore_aggregation&&(e.font={bold:!0,color:{argb:U.IGNORED}})})}),e.getColumn(e.columns.length).eachCell({includeEmpty:!0},function(e){e.border=T({},e.border,{right:T({},c)})}),e.lastRow.eachCell({includeEmpty:!0},function(e){e.border=T({},e.border,{bottom:T({},c)})}),e.views=[{state:"frozen",xSplit:2,ySplit:0}],o&&e.columns.find(function(e){return e._key===o.lpft.format("DD MMM YYYY")}).eachCell(function(t,a){1===a&&(t.border=T({},t.border,{top:{style:"thick"}})),t.border=T({},t.border,{right:{style:"thick"},left:{style:"thick"}}),a===e.rowCount&&(t.border=T({},t.border,{bottom:{style:"thick"}}))})}function p(e){return e.ignore_aggregation?"CANCELLED":e.adjusted_lpft?e.adjusted_lpft:""}function h(e,t,a,n,r,i,l){var o=n.reduce(function(e,t){var n=t[0],l=t[1],o=r?(0,k.getMomentDate)(r).add(n,"days"):null,s=o.format("MMM YYYY");return null===e.month?(e.month=s,e.value=l):s===e.month?e.value=l:(i[e.month]="",a[e.month]=e.value,e.value=l,e.month=s),e},{month:null,value:null});null!==o.month&&(i[o.month]="",a[o.month]=o.value),l.push(a)}function v(e,t,a,n,r,l,o,s,u){t.forEach(function(t,d){var c=t,f={Curve:(0,k.getCurveName)(d),type:a.isRegionCountry?"region":a.type,Locations:a.location};"Planned"===e?f.Locations=a.ignore_aggregation?a.location+" (CANCELLED)":a.location:"Actual/Forecast"===e&&(c=i(t,(0,k.getMomentDate)(n),a.lpft)),u&&(f.Type=e);var p=(0,A.default)(f);c.forEach(function(e){var t=e[0],a=e[1],i=n?(0,k.getMomentDate)(n).add(t,"days").format("DD MMM YYYY"):"";r[i]="",f[i]=a}),f.ignore_aggregation=a.ignore_aggregation,l.push(f),h(d,a,p,c,n,o,s)})}function m(e,t,a,n){var r={Locations:t,Patients:a.patient_allocation,Sites:a.num_sites,FSIV:a.fsiv?a.fsiv.format("DD MMM YYYY"):"","SAS%":a.sas?Number(a.sas):"","25% SI":a["25_si"]?(0,k.getMomentDate)(a["25_si"]).format("DD MMM YYYY"):"","50% SI":a["50_si"]?(0,k.getMomentDate)(a["50_si"]).format("DD MMM YYYY"):"","90% SI":a["90_si"]?(0,k.getMomentDate)(a["90_si"]).format("DD MMM YYYY"):"",FPFV:a.fpfv?a.fpfv.format("DD MMM YYYY"):"","FPFV-LPFV":a.fpfv_lpfv,"SR (patients/month/site)":a.sr?+Number(a.sr).toFixed(2):"","SF%":a.screening_failure||0===a.screening_failure?Number(a.screening_failure):"","RR (patients/month/site)":a.randomisation_rate?Number(a.randomisation_rate):"","P/LPFT":a.lpft?a.lpft.format("DD MMM YYYY"):"",type:n};return e&&(r.Type=e),r}function _(e,t,a,n,i,l,o,s,u){var d=e.reduce(function(e,t){if(t.isRegionCountry&&"region"===t.type)return e;if(a){e.push(m("Planned",t.ignore_aggregation?t.location+" (CANCELLED)":t.location,t,t.isRegionCountry?"region":t.type)),t.overallocatedData&&e.push(m(null,t.location+" w/o over-enrollment",t.overallocatedData,"targetRow"));var r={patient_allocation:t.actual_patient_allocation,num_sites:t.actual_num_sites,fsiv:t.actual_fsiv,sas:t.actual_sas,"25_si":t.actual_25_si,"50_si":t.actual_50_si,"90_si":t.actual_90_si,fpfv:t.actual_fpfv,fpfv_lpfv:t.actual_fpfv_lpfv,sr:t.actual_sr,screening_failure:t.actual_screening_failure,randomisation_rate:t.actual_randomisation_rate,lpft:t.actual_f_lpft,ignore_aggregation:t.ignore_aggregation};if(e.push(m("Actual/Forecast","",r,t.isRegionCountry?"region":t.type)),n){var i={patient_allocation:t.ignore_aggregation?"":t.adjusted_patient_allocation,num_sites:t.adjusted_num_sites,fsiv:t.adjusted_fsiv,sas:t.adjusted_sas,"25_si":t.adjusted_25_si,"50_si":t.adjusted_50_si,"90_si":t.adjusted_90_si,fpfv:t.adjusted_fpfv,fpfv_lpfv:t.adjusted_fpfv_lpfv,sr:t.adjusted_sr,screening_failure:t.adjusted_screening_failure,randomisation_rate:t.adjusted_randomisation_rate,lpft:p(t),ignore_aggregation:t.ignore_aggregation};e.push(m("Adjusted","",i,t.isRegionCountry?"region":t.type)),t.adjusted_overallocatedData&&e.push(m(null,t.location+" w/o over-enrollment",t.adjusted_overallocatedData,"targetRow"))}}else e.push(m(null,t.location,t,t.isRegionCountry?"region":t.type)),t.overallocatedData&&e.push(m(null,t.location+" w/o over-enrollment",t.overallocatedData,"targetRow"));return e},[]),h=[],_={Locations:"",Curve:""},E=[],g={Locations:"",Curve:""};e.forEach(function(e){var t=e.curves?[].concat(r(e.curves.map(function(e){return e.unshift([0,0]),e}))):[],i=e.actual_curves?[].concat(r(e.actual_curves)):[],o=e.adjusted_curves?[].concat(r(e.adjusted_curves.map(function(e){return e.unshift([0,0]),e}))):[];l&&t[0]&&t[1]&&t[2]&&(t[1]=t[1].filter(function(t){return!e.fpfv||!e.fpfv_lpfv||(0,k.getMomentDate)(l).add(t[0],"d")<=e.fpfv.clone().add(e.fpfv_lpfv,"d")}),t[2]=t[2].filter(function(t){return!e.lpft||(0,k.getMomentDate)(l).add(t[0],"d")<=e.lpft})),e.isRegionCountry&&"region"===e.type||(a?(_.Type="",v(V.PLANNED,t,e,l,_,h,g,E,a),v(V.ACTUAL,i,e,l,_,h,g,E,a),n&&v(V.ADJUSTED,o,e,l,_,h,g,E,a)):v(V.PLANNED,t,e,l,_,h,g,E))}),c(s,d,i,a);var y=n?"adjusted_":"";return f(o,h,_,i,a,e[0][y+"overallocatedData"]&&T({},e[0][y+"overallocatedData"],{startDate:l})),f(u,E,g,i,a),{curvesWorksheet:o,tableWorksheet:s,curvesByMonthWorksheet:u}}function E(e,t){var a=(0,w.default)(e,"state.status");return e.is_recommended_by_FPO&&!a?"Recommended by FPO":a&&"ADD"===a?"Added, reason: "+(0,w.default)(t.find(function(t){return+t.id==+e.state.reason_id}),"text","-"):a&&"REMOVE"===a?"Removed, reason: "+(0,w.default)(t.find(function(t){return+t.id==+e.state.reason_id}),"text","-"):"-"}function g(e,t,a){var n=e.reduce(function(e,t){return e.push({Rank:t.ranking,PI:t.investigator_center.investigator.name,"Primary center":t.investigator_center.center.name,Completed:t.studies_complete,Active:t.studies_active,Min:t.min_patients_randomized,Max:t.max_patients_randomized,Avg:t.average_patients_randomized,RR:t.randomization_rate,SF:t.screen_failure_rate,"DR Randomization":t.drop_out_rate,"Median time to query close":t.median_time_to_query,"Median time to entry":t.median_time_to_entry,"MVR issues raised":t.mvr_issues_raised,"Patients w/I/E protocol deviation":t.patients_with_ie_protocol_deviation,"Query rate":t.query_rate,"SIV-FPFV (decile)":t.decile_siv_fpfv,"RR (decile)":t.decile_randomization_rate,"SF% (decile)":t.decile_screen_failure_rate,"DP% (decile)":t.decile_default_probability_rate,"Confidence (RR)":t.forecast_confidence_score,Target:(0,w.default)(t,"studyLevelData.target_patients"),Actual:(0,w.default)(t,"studyLevelData.randomized_patients"),SIV:(0,w.default)(t,"studyLevelData.siv")?(0,k.getMomentDate)((0,w.default)(t,"studyLevelData.siv")).format("DD MMM YYYY"):"",FPFV:(0,w.default)(t,"studyLevelData.fpfv")?(0,k.getMomentDate)((0,w.default)(t,"studyLevelData.fpfv")).format("DD MMM YYYY"):"",LPFV:(0,w.default)(t,"studyLevelData.lpfv")?(0,k.getMomentDate)((0,w.default)(t,"studyLevelData.lpfv")).format("DD MMM YYYY"):"",Origin:E(t,a)}),e},[]),r={Rank:4,PI:25,"Primary center":30,Completed:15,Active:15,Min:10,Max:10,Avg:10,RR:10,SF:10,"DR Randomization":17,"Median time to query close":20,"Median time to entry":20,"MVR issues raised":20,"Patients w/I/E protocol deviation":20,"Query rate":10,"SIV-FPFV (decile)":15,"RR (decile)":15,"SF% (decile)":15,"DP% (decile)":15,"Confidence (RR)":15,Target:10,Actual:10,SIV:10,FPFV:10,LPFV:10,"Exp. RR":10,Origin:40},i={Rank:{numFmt:"#",alignment:{vertical:"top",horizontal:"left"}},SIV:{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}},FPFV:{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}},LPFV:{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}}},l={bold:!0,color:{argb:U.BOLD}},o={style:"thin"};t.columns=Object.keys(n[0]).map(function(e){return{header:e,key:e,width:r[e],style:i[e]}});var s=Object.keys(n[0]),d=Object.keys(n[0]),c=Object.keys(n[0]);t.spliceRows(1,1,s,d,c),t.mergeCells("A1","C1"),t.mergeCells("D1","P1"),t.mergeCells("Q1","U1"),t.mergeCells("V1","Z1"),t.mergeCells("A2","C2"),t.mergeCells("D2:E2"),t.mergeCells("F2","H2"),t.mergeCells("I2","K2"),t.mergeCells("L2","P2"),t.mergeCells("Q2","U2"),t.mergeCells("V2","W2"),t.mergeCells("X2","Z2"),t.getCell("A1").value="",t.getCell("D1").value="Historical",t.getCell("Q1").value="Forecast",t.getCell("V1").value="Current study",t.getCell("AA1").value="",t.getCell("A2").value="",t.getCell("B2").value="",t.getCell("C2").value="",t.getCell("D2").value="Studies",t.getCell("F2").value="Patients randomized",t.getCell("I2").value="Enrolment rates",t.getCell("L2").value="Ops. metrics",t.getCell("Q2").value="Enrolment rates",t.getCell("V2").value="Patients",t.getCell("X2").value="Milestones",t.getCell("AA2").value="",t.getRow(1).eachCell(function(e){e.font=T({},l,{color:{argb:U.BOLD}})}),t.getRow(2).eachCell(function(e,t){e.font=T({},l,{color:{argb:U.BOLD}}),t>=4&&t<=16?e.fill=u("FFD3D3D3"):t>=17&&t<=21?e.fill=u("FFADD8E6"):t>=22&&t<=26&&(e.fill=u("FF90EE90"))}),t.getRow(3).eachCell(function(e,t){e.font=T({},l,{color:{argb:U.WHITE}}),e.fill=u(t<4?"FF778899":t>=4&&t<=16?U.HEADER:t>=17&&t<=21?"FF191970":t>=22&&t<=26?"FF2E8B57":"FF778899")}),n.forEach(function(e){t.addRow(e)}),t.getColumn("C").eachCell(function(e,t){t>3&&(e.border=T({},e.border,{right:{style:"thin"}}))}),t.getColumn("E").eachCell(function(e,t){t>3&&(e.border=T({},e.border,{right:{style:"thin"}}))}),t.getColumn("H").eachCell(function(e,t){t>3&&(e.border=T({},e.border,{right:{style:"thin"}}))}),t.getColumn("K").eachCell(function(e,t){t>3&&(e.border=T({},e.border,{right:{style:"thin"}}))}),t.getColumn("P").eachCell(function(e,t){t>3&&(e.border=T({},e.border,{right:{style:"thin"}}))}),t.getColumn("U").eachCell(function(e,t){t>3&&(e.border=T({},e.border,{right:{style:"thin"}}))}),t.getColumn("W").eachCell(function(e,t){t>3&&(e.border=T({},e.border,{right:{style:"thin"}}))}),t.getColumn("Z").eachCell(function(e,t){t>3&&(e.border=T({},e.border,{right:{style:"thin"}}))}),t.getColumn("AA").eachCell(function(e,t){t>3&&(e.border=T({},e.border,{right:{style:"thin"}}))}),t.lastRow.eachCell({includeEmpty:!0},function(e){e.border=T({},e.border,{bottom:T({},o)})})}function y(e,t){return new Promise(function(e){a.e(0).then(function(t){e(a(455))}.bind(null,a)).catch(a.oe)}).then(function(a){var n=(0,A.default)(t.cohorts),r=o(e,t),i=new a.Workbook,l=(0,M.getAggregatedGlobalRow)(n.filter(function(e){return e.countries.length>0&&e.fp}).map(function(e){return e.fullData.find(function(e){return"rollup"===e.type})}),t.cohorts.map(function(e){return e.aggregatedActuals})[0],(0,D.default)(t.fp),t),u=i.addWorksheet("All - Curves (day)",d(U.CURVES_TAB)),c=i.addWorksheet("ALL - Curves (month)",d(U.CURVES_TAB)),f=i.addWorksheet("All - Table",d(U.TABLE_TAB));_(l,null,s(e,t),r,t.status===x.SCENARIO_STATUS.APPROVED||r,t.fp,u,f,c),n.forEach(function(a,n){var l="C"+(n+1),o=i.addWorksheet(l+" - Curves (day)"),u=i.addWorksheet(l+" - Curves (month)",d(U.CURVES_TAB)),c=i.addWorksheet(l+" - Table");_(a.fullData,a.name,s(e,t),r,t.status===x.SCENARIO_STATUS.APPROVED||r,a.fp,o,c,u)}),i.xlsx.writeBuffer().then(function(a){L.default.saveAs(new Blob([a],{type:"application/octet-stream"}),e.study_id+"_"+t.name+"_"+t.updated.format("DD-MMM-YY")+".xlsx")})})}function S(e,t,n){return new Promise(function(e){a.e(0).then(function(t){e(a(455))}.bind(null,a)).catch(a.oe)}).then(function(a){var r=new a.Workbook,i=r.addWorksheet("Curves (day)",d(U.CURVES_TAB)),l=r.addWorksheet("Curves (month)",d(U.CURVES_TAB)),u=r.addWorksheet("Table",d(U.TABLE_TAB)),c=o(e,t);_(n,null,s(e,t),c,t.status===x.SCENARIO_STATUS.APPROVED||c,t.fp,i,u,l),r.xlsx.writeBuffer().then(function(a){L.default.saveAs(new Blob([a],{type:"application/octet-stream"}),e.study_id+"_"+t.name+"_"+(0,k.getMomentDate)(t.updated||(0,D.default)()).format("DD-MMM-YY")+".xlsx")})})}function b(e,t,n,r){return Promise.all([new Promise(function(e){a.e(2).then(function(t){e(a(2310))}.bind(null,a)).catch(a.oe)}),new Promise(function(e){a.e(5).then(function(t){e(a(2309))}.bind(null,a)).catch(a.oe)}),new Promise(function(e){a.e(6).then(function(t){e(a(2308))}.bind(null,a)).catch(a.oe)})]).then(function(a){var i=O(a,3),l=i[0],o=i[1];i[2].init();var s=e.study_id+"_"+t.name+"_"+(n?n+"_":"")+(0,k.getMomentDate)(t.updated||(0,D.default)()).format("DD-MMM-YY")+".png",u=document.querySelector(".svg-wrapper:not([id*=minimized])"),d=u.getBoundingClientRect(),c=d.width,f=document.querySelector(".fpo-grid"),p=parseInt(getComputedStyle(f).paddingLeft,10),h=document.querySelector(".fpo-col-offset-1"),v=parseInt(getComputedStyle(h).marginLeft,10);l(document.querySelector(".screenshot-container"),{logging:!1,width:c+B,x:p+v-H,onclone:function(e){var t=e.querySelectorAll(".alert__title");t.length&&(t=Array.prototype.slice.call(t),t.forEach(function(e){e.style.display="inline-table"}));var a=e.querySelector(".chart-container");a&&(a.style.visibility="visible");var n=e.querySelectorAll(".exclude-from-screenshot");if(n.length&&(n=Array.prototype.slice.call(n),n.forEach(function(e){e.parentNode.removeChild(e)})),navigator.userAgent.indexOf("MSIE ")>-1||navigator.userAgent.indexOf("Trident/")>-1){var r=e.querySelector(".screenshot-container"),i=e.querySelectorAll(".sticky:not(.exclude-from-screenshot)");i.length&&(i=Array.prototype.slice.call(i),i.forEach(function(e){e.style.position="absolute",r.classList.contains("cohorts-scenario-container")&&(e.firstElementChild.classList.contains("alerts-container")?e.style.top="0px":e.firstElementChild.classList.contains("filters-container")&&(e.style.top="44px"))}));var l=r.querySelectorAll("svg");l.length&&(l=Array.prototype.slice.call(l),l.forEach(function(t){t.removeAttribute("xmlns");var a=e.createElement("canvas");t.parentNode.replaceChild(a,t);var n=e.createElement("div");n.appendChild(t),o(a,n.innerHTML)}))}}}).then(function(e){e.toBlob(function(e){L.default.saveAs(e,s)}),r()})})}function C(e,t,n,r,i,l,o){return new Promise(function(e){a.e(0).then(function(t){e(a(455))}.bind(null,a)).catch(a.oe)}).then(function(a){var s=new a.Workbook;if(n.length>0){var u=s.addWorksheet("Selected sites",d(U.TABLE_TAB));g(n,u,o)}if(r.length>0){var c=s.addWorksheet("Other internal sites",d(U.TABLE_TAB));g(r,c,o)}if(i.length>0){var f=s.addWorksheet("Other new sites",d(U.TABLE_TAB));g(i,f,o)}s.xlsx.writeBuffer().then(function(a){L.default.saveAs(new Blob([a],{type:"application/octet-stream"}),"Sites - "+(0,w.default)(e,"study_id")+"_"+(0,w.default)(t,"name")+"_"+(0,w.default)(l,"country_name")+"_"+(0,k.getMomentDate)((0,w.default)(t,"updated")||(0,D.default)()).format("DD-MMM-YY")+".xlsx")})})}Object.defineProperty(t,"__esModule",{value:!0});var O=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.exportToExcelCohorts=y,t.exportToExcel=S,t.saveAsImage=b,t.exportToExcelCountrySitesSelection=C;var R=a(40),A=n(R),I=a(12),w=n(I),N=a(11),D=n(N),P=a(1784),L=n(P),M=a(201),k=a(8),x=a(10),j=a(20),F=n(j),U={APPROVED:"FFebfaee",ACTUAL:"FFededed",IGNORED:"FFc9c9c9",HEADER:"FF9d9d9d",WHITE:"FFffffff",BOLD:"FF262626",CURVES_TAB:"FFb34534",TABLE_TAB:"FF00c425"},V={PLANNED:"Planned",ACTUAL:"Actual/Forecast",ADJUSTED:"Adjusted"},B=50,H=20},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";function n(e,t){return function(a){return a((0,d.fetchApi)(f.SCENARIO_NOTE.replace(/:scenarioId/,e),{type:u.ADD_SCENARIO_NOTE,scenarioId:e},"POST",t))}}function r(e,t){return function(a){return a((0,d.fetchApi)(f.IMPACT_SCENARIO_NOTE.replace(/:impactScenarioId/,e),{type:u.ADD_IMPACT_SCENARIO_NOTE,impactScenarioId:e},"POST",t))}}function i(e,t){return function(a){return a((0,d.fetchApi)(f.SCENARIO_NOTE.replace(/:scenarioId/,e),{type:u.GET_SCENARIO_NOTES,scenarioId:e},"GET",null,{signal:t}))}}function l(e){return function(t){return t((0,d.fetchApi)(f.IMPACT_SCENARIO_NOTE.replace(/:impactScenarioId/,e),{type:u.GET_IMPACT_SCENARIO_NOTES,impactScenarioId:e}))}}function o(e,t,a){return function(n){return n((0,d.fetchApi)(f.SCENARIO_COUNTRY_NOTE.replace(/:scenarioId/,e).replace(/:countryId/,t),{type:u.ADD_COUNTRY_SITES_NOTE,scenarioId:e,countryId:t},"POST",a))}}function s(e,t){return function(a){return a((0,d.fetchApi)(f.SCENARIO_COUNTRY_NOTE.replace(/:scenarioId/,e).replace(/:countryId/,t),{type:u.GET_SCENARIO_COUNTRY_NOTES,scenarioId:e,countryId:t},"GET"))}}Object.defineProperty(t,"__esModule",{value:!0}),t.addScenarioNote=n,t.addImpactScenarioNote=r,t.getScenarioNotes=i,t.getImpactScenarioNotes=l,t.addCountrySitesNote=o,t.getCountryNotes=s;var u=a(13),d=a(48),c=a(50),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(c)},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(862),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=s.default;return"ranking"!==e||t||(a=function(e,t){var a="ASC"===t;return function(t,n){var r=(0,l.default)(t,e)||"",i=(0,l.default)(n,e)||"";return r===i?0:null===r?1:null===i?-1:r<i?a?-1:1:r>i?a?1:-1:0}}),"ranking"===e&&t&&(a=function(e,t){var a="ASC"===t;return function(e,t){var n=(0,l.default)(e,"studyLevelData.ranking")||"",r=(0,l.default)(t,"studyLevelData.ranking")||"";return n===r?0:null===n?1:null===r?-1:n<r?a?-1:1:n>r?a?1:-1:0}}),"site_name"===e&&(a=function(e,t){var a="ASC"===t;return function(e,t){var n=((0,l.default)(e,"investigator_center.center.name")||"").trim(),r=((0,l.default)(t,"investigator_center.center.name")||"").trim();return n<r?a?-1:1:n>r?a?1:-1:0}}),"site_pi"===e&&(a=function(e,t){var a="ASC"===t;return function(e,t){var n=((0,l.default)(e,"investigator_center.investigator.name")||"").trim(),r=((0,l.default)(t,"investigator_center.investigator.name")||"").trim();return n<r?a?-1:1:n>r?a?1:-1:0}}),"forecast_confidence_score"===e&&(a=function(e,t){var a="ASC"===t;return function(t,n){var r=void 0,i=void 0;switch(t[e]){case"HIGH":r=3;break;case"MEDIUM":r=2;break;case"LOW":r=1;break;default:r=0}switch(n[e]){case"HIGH":i=3;break;case"MEDIUM":i=2;break;case"LOW":i=1;break;default:i=0}return r<i?a?-1:1:r>i?a?1:-1:0}}),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=a(12),l=n(i),o=a(34),s=n(o)},,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(2),d=n(u);a(2151);var c=function(e){var t,a=e.children,n=e.className,i=e.overflow,o=e.cellClickHandler,s=(0,d.default)((t={},r(t,n,n),r(t,"flex-table__cell_no-overflow",!i),t));return l.default.createElement("div",{className:"flex-table__cell "+s,onClick:o},a)};c.propTypes={cellClickHandler:s.default.func,children:s.default.node.isRequired,className:s.default.string,overflow:s.default.bool},c.defaultProps={cellClickHandler:null,className:void 0,overflow:!1},t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),l=a(291);a(2161);var o=function(){var e={transition:"all 100ms ease-out",opacity:0},t={entering:{opacity:0},entered:{opacity:.3}};return i.default.createElement(l.Transition,{in:!0,appear:!0,timeout:0},function(a){return i.default.createElement("div",{className:"fpo-data-loading-spinner__container",style:n({},e,t[a])},i.default.createElement("div",{className:"looping-rhombuses-spinner"},i.default.createElement("div",{className:"rhombus"}),i.default.createElement("div",{className:"rhombus"}),i.default.createElement("div",{className:"rhombus"})))})};t.default=i.default.memo(o)},function(e,t,a){"use strict";function n(e,t,a,n,r,i,l,o){e.append("rect").attr("x",t).attr("y",a).attr("width",n).attr("height",r).style("fill",i).style("opacity",l).classed("active-range-rect",o)}function r(e,t,a,n,r,i){e.append("text").classed("active-range-label",i).st({fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("text-anchor",t).text(a).attr("transform",n).style("fill",r)}function i(e,t,a){var n=e.append("g").classed("global-row-tooltip",!0).style("display",null).attr("transform",t);n.append("polygon").style("fill",f.BLACK).attr("points",p),n.append("text").attr("text-anchor","middle").style("fill",f.WHITE).classed("tooltip-text",!0).attr("transform","translate(20, 15)").text(a)}function l(e){var t=e.append("g");t.append("path").attr("d","M10 7l5 5-5 5-5-5z").style("fill",f.WHITE),t.append("path").attr("d","M10 8.414L6.414 12 10 15.586 13.586 12 10 8.414z").style("fill","none").style("stroke",f.MID_GREY).style("stroke-width",2),t.append("path").attr("d","M10.005 3l9 9-9 9-1-1 8-8L9 4z").style("fill",f.MID_GREY)}function o(e,t){e.append("circle").style("stroke",f.WHITE).style("stroke-width","2px").style("fill",f.WHITE).attr("r",11),e.append("circle").style("stroke",f.BLACK).style("stroke-width","2px").style("fill",f.WHITE).classed("inactive",t).attr("r",9),e.append("circle").classed("inactive",t).attr("r",2)}function s(e,t,a,n,r,i,l){var o=e.append("g").style("display",null).attr("transform","translate(0, "+(l?-30:-42)+")");o.append("line").style("stroke",t).style("stroke-width","2px").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",20),i&&(o.append("rect").style("stroke",t).style("stroke-width","2px").style("fill",a).attr("x","FP"===r?-15:-30).attr("y",-30).attr("width","FP"===r?30:60).attr("height",30),o.append("text").attr("transform","translate(0, -10)").attr("text-anchor","middle").style("fill",n).style("font-family","VoltaModern, sans-serif").text(r))}function u(e,t,a){e.append("polygon").attr("points","0,0 20,0 20,20 0,20 0,0").attr("transform","rotate(45 12 12), translate(2, 2)").style("fill",f.WHITE),e.append("path").attr("d","M12 2l10 10-10 10L2 12z").style("stroke",f.BLACK).style("stroke-width","2px").classed("inner-rect",!0).style("fill",a?t:f.WHITE),e.append("path").attr("d","M16 12l-4 4-4-4 4-4z").style("fill",t)}function d(e){e.append("path").attr("d","M16 12l-4 4-4-4 4-4z").style("stroke",f.WHITE).style("stroke-width","2px").style("fill",f.BLACK)}function c(e,t,a){e.append("circle").style("stroke",f.WHITE).style("stroke-width","2px").style("fill",f.WHITE).attr("r",11),e.append("circle").style("stroke",f.BLACK).classed("inactive",a).style("stroke-width","2px").style("fill",f.WHITE).attr("r",9),e.append("circle").classed("inactive",a).style("fill",t).attr("r",6)}Object.defineProperty(t,"__esModule",{value:!0}),t.drawBackgroundRect=n,t.appendRangeLabel=r,t.appendGlobalRangeLabel=i,t.drawEmptyDiamond=l,t.drawFppIcon=o,t.appendTooltipToMilestone=s,t.drawDiamondIcon=u,t.drawIntersectedDiamond=d,t.drawFilledCircle=c;var f=t.COLORS={BLACK:"#000",GREY:"#9d9d9d",MID_GREY:"#c6c6c6",WHITE:"#FFF",YELLOW:"#FCB13B",BLUE:"#19A9E0",PURPLE:"#9C28C6",GREEN:"#00C329",RED:"#ec3508"},p=t.tooltipPathLeft="0,0 40,0 50,35 0,20 0,0";t.tooltipPathRight="10,0 50,0 50,20 0,35 10,0"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(938),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(970),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TOOLTIPS_TEXT=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2),h=n(p),v=a(117),m=n(v),_=a(27),E=n(_),g=a(14),y=n(g);a(2219);var S=t.TOOLTIPS_TEXT={MIN:d.default.createElement("div",null,d.default.createElement("div",null,"Minimal number of patients that must be allocated in a country (Optional)."),d.default.createElement("div",null,"Scenario will not reach P/LPFT milestone until each country enrolled its minimal patients number.")),MAX:d.default.createElement("div",null,d.default.createElement("div",null,"Maximal number of patients to be allocated in a country (Optional)."),d.default.createElement("div",null,"Limits possible reallocation to a country proposed in forecast.")),EXACT:"Planned number of patients to be allocated in a country (Optional)",MIN_ERROR:"Min patients # should be less or equal to exact patients number.",MAX_MIN_ERROR:"Max patients # should be more or equal to min patients number.",MAX_EXACT_ERROR:"Max patients # should be more or equal to exact patients number.",RECOMMENDED_BY_ANALYTICS:"Country suggested by Nerve"},b=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.onUpdate,n=e.locations,r=e.hidden,i=e.newScenario,l=(0,h.default)("wizard-step","fpo-row","fpo-wizard-pat-allocation-container",{"wizard-active-step":t,hidden:r}),s=(0,h.default)("fpo-col-offset-4","fpo-col-4");return d.default.createElement("div",{className:l},d.default.createElement("div",{className:s},d.default.createElement("h1",null,"Patient allocation"),d.default.createElement("div",{className:"pat-allocation__subtitle"},"Please specify patient allocation for the selected countries"),d.default.createElement("div",{className:"pat-allocation__header-wrapper"},d.default.createElement("span",null,"Regions / Countries"),d.default.createElement("span",{className:"pat-allocation__header-columns-wrapper"},d.default.createElement("span",null,"Patients:"),d.default.createElement(y.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"top",overlayClassName:"pat-allocation__tooltip",overlay:S.MIN},d.default.createElement("span",null,"min #")),d.default.createElement(y.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"top",overlayClassName:"pat-allocation__tooltip",overlay:d.default.createElement("span",null,S.EXACT)},d.default.createElement("span",null,"exact #")),!1)),d.default.createElement("div",{className:"patients-allocation__wrapper"},n.map(function(e){return d.default.createElement("div",{className:"options-region",key:e.id+"_"+e.name},!e.isCountryRegion&&d.default.createElement("span",{className:"options-region__name"},e.name),e.countries.map(function(n){var r=n.patients&&n.patients_min>n.patients,l=n.patients_max&&(n.patients_max<n.patients||n.patients_max<n.patients_min),s=r?{}:{visible:!1};return l&&(n.patients_max<n.patients||(n.patients_max,n.patients_min)),d.default.createElement("div",{className:"options-country",key:n.id+"_"+n.name},d.default.createElement("span",{className:(0,h.default)({"options-country__name":!e.isCountryRegion,"options-region__name":e.isCountryRegion,"recommended-by-analytics":null===n.constraint})},null===n.constraint?d.default.createElement(y.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"top",overlay:d.default.createElement("span",null,S.RECOMMENDED_BY_ANALYTICS)},d.default.createElement("span",null,n.name)):n.name),d.default.createElement("div",{className:"options-country__values"},d.default.createElement(y.default,o({mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"top",overlayClassName:"pat-allocation__tooltip"},s,{overlay:S.MIN_ERROR}),d.default.createElement("div",{className:"value-field__wrapper"},d.default.createElement(E.default,{status:r?"error":null,narrow:!0,type:"text",validators:[function(e){return""===e||m.default.isInt(e,{min:1,max:1e6})}],disabled:!t,onChange:function(e,t){var r=t.value;return a(n.id,"patients_min",r,n.constraint)},value:n.patients_min||""}))),d.default.createElement("div",{className:(0,h.default)("value-field__wrapper",{overridden:n.isOverridden})},d.default.createElement(E.default,{narrow:!0,type:"text",validators:[function(e){return""===e||m.default.isInt(e,{min:1,max:1e6})}],disabled:!t,onChange:function(e,t){var r=t.value;return a(n.id,"patients",r,n.constraint)},value:(i||n.isOverridden?n.patients:"")||""})),!1))}))}))))}}]),t}(d.default.Component);b.propTypes={activeStep:f.default.bool,onUpdate:f.default.func.isRequired,hidden:f.default.bool,locations:f.default.array,newScenario:f.default.bool},b.defaultProps={activeStep:!1,hidden:!1,locations:[],newScenario:!1},t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){var a=t?"adjusted_":"";return e[a+"overallocatedData"]?e[a+"overallocatedData"].lpft:e[a+"lpft"]},r=function(e,t){var a=t?"adjusted_":"";return e[a+"overallocatedData"]?e[a+"overallocatedData"].patient_allocation():e[a+"patient_allocation"]};t.getPredictedDate=n,t.getPredictedPatients=r},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t,a,n,r,i,l){var o=[];return(i.diff(r)<0||r.diff(n)<0||n.diff(t)<0)&&o.push(f.ENROLMENT_TABLE_FIELDS_LIST.SI_25,f.ENROLMENT_TABLE_FIELDS_LIST.SI_50,f.ENROLMENT_TABLE_FIELDS_LIST.SI_90,f.ENROLMENT_TABLE_FIELDS_LIST.FSIV),a.diff(t)<0&&o.push(f.ENROLMENT_TABLE_FIELDS_LIST.FPFV),t.diff(e)<=0&&(o.push("startdate"),o.push(f.ENROLMENT_TABLE_FIELDS_LIST.FSIV)),l.diff(e)<0&&o.push("endDate"),o}function l(e,t,a,n,i,l,o,u,f,p,h,v,m,_,E,g){function y(e){switch(e){case"fsiv":return"FSIV";case"25_si":return"25% SI";case"50_si":return"50% SI";case"90_si":return"90% SI";case"fpfv":default:return"FPFV"}}var S=[],b=!1;e&&d.default.isMoment(e)&&e.isValid()||S.push("start_date"),t&&d.default.isMoment(t)&&t.isValid()||S.push("end_date"),a&&d.default.isMoment(a)&&a.isValid()||(b=!0,null!==a&&S.push("fsiv")),n&&d.default.isMoment(n)&&n.isValid()||(b=!0,null!==n&&S.push("fpfv")),i&&d.default.isMoment(i)&&i.isValid()||(b=!0,null!==i&&S.push("25_si")),l&&d.default.isMoment(l)&&l.isValid()||(b=!0,null!==l&&S.push("50_si")),o&&d.default.isMoment(o)&&o.isValid()||(b=!0,null!==o&&S.push("90_si")),u||0===u||(b=!0,null!==u&&""!==u&&void 0!==u&&S.push("num_sites")),f||0===f?(E>f||g&&g<f)&&(b=!0,S.push("patient_allocation")):(b=!0,null!==f&&""!==f&&void 0!==f&&S.push("patient_allocation")),p||0===p||(b=!0,null!==p&&""!==p&&void 0!==p&&S.push("sas")),(!h&&0!==h||h>=1)&&(b=!0,null!==h&&""!==h&&void 0!==h&&S.push("screening_failure")),v||(b=!0,null!==v&&""!==v&&S.push("randomisation_rate")),m||0===m||(b=!0,S.push("fpfv_fpft"));var C={};-1===S.indexOf("start_date")&&null!==a&&(e.isSameOrBefore(a)||(S.push("fsiv"),C.fsiv=["fp"])),-1===S.indexOf("fsiv")&&null!==a&&null!==n&&(a.isSameOrBefore(n)||(S.push("fpfv"),C.fpfv=["fsiv"]));var O=[{id:"fsiv",value:a},{id:"25_si",value:i},{id:"50_si",value:l},{id:"90_si",value:o}].filter(function(e){return e.value&&d.default.isMoment(e.value)&&e.value.isValid()});O.reduce(function(e,t,a){return O.slice(a,O.length).forEach(function(a){a.value.isBefore(t.value)&&(e.add(a.id),C[a.id]=C[a.id]?[].concat(r(C[a.id]),[t.id]):[t.id])}),e},new Set).forEach(function(e){S.push(e)});var T={};if(Object.keys(C).forEach(function(e){var t=C[e].reduce(function(e,t){var a=e;return""!==a&&(a+=", "),a+=y(t)},"");T[e]=y(e)+" should be greater or equal to "+t}),S.includes("patient_allocation")&&(f||0===f)&&(E>f?T.patient_allocation="Patients # is less than Min Patients # ("+E+").\n       Please edit Patients constraints in scenario editor to resolve the conflict.":g&&g<f&&(T.patient_allocation="Patients # is higher than Max Patients # ("+g+").\n       Please edit Patients constraints in scenario editor to resolve the conflict.")),_&&d.default.isMoment(_)&&_.isValid()){var R=[e,a,n].filter(function(e){return e&&d.default.isMoment(e)&&e.isValid()});if(R&&R.length>0){var A=(0,c.max)(R);if(A&&A.isAfter(_))S.push("lpft");else if(A){var I=_.diff(A,"d");I<1+m&&S.push("lpft")}}}return{invalidFields:(0,s.default)(S),skipCalculation:b||S.length>0,errorMessages:T}}Object.defineProperty(t,"__esModule",{value:!0}),t.validateDatesOrder=i,t.validateCurvesCalcArguments=l;var o=a(180),s=n(o),u=a(11),d=n(u),c=a(29),f=a(506)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.history=void 0;var r=("function"==typeof Symbol&&Symbol.iterator,a(189)),i=a(19),l=a(1785),o=a(2103),s=n(o),u=a(1134),d=n(u),c=a(1117),f=n(c),p=a(1120),h=n(p),v=a(1118),m=n(v),_=a(1115),E=n(_),g=a(1119),y=n(g),S=a(1116),b=n(S),C=a(35),O=a(1110),T=(n(O),(0,l.createBrowserHistory)()),R=r.compose,A=(0,C.loadState)("fpo-persisted-state"),I=(0,r.createStore)((0,d.default)(T),A,R((0,r.applyMiddleware)(b.default,y.default,f.default,s.default,(0,i.routerMiddleware)(T),h.default,m.default,E.default)));t.history=T,t.default=I},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n=a(1434);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(){return function(e){return e((0,te.fetchApi)(re.SITES_HEALTH,{type:ae.GET_SITES_HEALTH}))}}function l(e,t,a){return function(n){return n((0,te.fetchApi)(re.COUNTRY_SITES.replace(/:studyId/,e).replace(/:scenarioId/,t).replace(/:countryId/,a),{type:ae.GET_COUNTRY_SITES,scenarioId:t,countryId:a}))}}function o(e,t,a){return function(n){return n((0,te.fetchApi)(re.COUNTRY_SITE.replace(/:studyId/,e).replace(/:scenarioId/,t).replace(/:siteId/,a),{type:ae.GET_COUNTRY_SITE,scenarioId:t,siteId:a}))}}function s(e,t,a,n){return{type:ae.SORT_SITES_DATA,columnName:e,sortDirection:t,countryId:a,scenarioId:n}}function u(e){return{type:ae.SET_SITES_FILTER,payload:e}}function d(e){return{type:ae.SET_STUDIES_FILTER,payload:e}}function c(e){return{type:ae.SET_METRICS_FILTER,payload:e}}function f(){return{type:ae.HANDLE_SITES_SORT}}function p(e){return{type:ae.TOGGLE_TABLE_VIEW,payload:e}}function h(){return{type:ae.TOGGLE_INTERNAL_SITES_VIEW}}function v(){return{type:ae.TOGGLE_EXTERNAL_SITES_VIEW}}function m(){return{type:ae.TOGGLE_INITIAL_SITES_SELECTION}}function _(e){return{type:ae.RESET_SITES,scenarioId:e}}function E(e,t,a,n,r,i){return{type:ae.SITE_ACTION,status:n,countryId:t,scenarioId:e,id:a,reason_id:r,comment:i}}function g(e,t,a,n){return function(i,l){var o=(0,Q.default)(l(),"sites["+t+"]",[]),s=[].concat.apply([],[].concat(r(Object.values(o)))),u=s.reduce(function(e,t){return(0,Q.default)(t,"state.dirty",!1)&&e.push((0,ee.default)(t,["study_id","scenario_id","country_id","investigator_center_id","state"])),e},[]);return i((0,te.fetchApi)(re.UPDATE_COUNTRIES_SITES.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:ae.UPDATE_SITES,studyId:e,scenarioId:t,countryId:a,skipDataRefresh:n,meta:{notification:{trigger:ae.SUCCESS,message:"Successfully updated sites data"}}},"PUT",{sites:u}))}}function y(e){return{type:ae.UNDO_SITE_ACTION,scenarioId:e}}function S(e){return{type:ae.REDO_SITE_ACTION,scenarioId:e}}function b(e,t){return function(a){return a((0,te.fetchApi)(re.GET_EDITABLE_SITES_COUNTRIES.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:ae.GET_EDITABLE_SITES_COUNTRIES,studyId:e,scenarioId:t},"GET"))}}function C(e,t,a,n,r){return function(i){return i((0,te.fetchApi)(re.CHANGE_COUNTRY_SITES_STATUS.replace(/:overrideId/,n),{type:ae.UPDATE_SCENARIO,studyId:e,scenarioId:t,refreshScenarioCache:!0},"PUT",{status:r,studyId:e,scenarioId:t,countryId:a}))}}function O(e,t,a){return function(n){return n((0,te.fetchApi)(re.CHANGE_COUNTRIES_SITES_STATUS.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:ae.UPDATE_SCENARIO,studyId:e,scenarioId:t,refreshScenarioCache:!0},"PUT",{status:a}))}}function T(e){return{type:ae.SET_SITE_METRICS_FILTER,payload:e}}function R(e){return{type:ae.SET_SITE_MILESTONES_FILTER,payload:e}}function A(e,t,a){return function(n){return n((0,te.fetchApi)(re.COUNTRY_MANAGER.replace(/:studyId/,e).replace(/:scenarioId/,t).replace(/:countryId/,a),{type:ae.GET_COUNTRY_MANAGER,scenarioId:t,countryId:a}))}}function I(e){return function(t){return t((0,te.fetchApi)(re.CSMS.replace(/:studyId/,e),{type:ae.GET_CSMS,studyId:e}))}}function w(e,t){return function(a){return a((0,te.fetchApi)(re.CSM_SCENARIOS.replace(/:studyId/,e).replace(/:userId/,t),{type:ae.GET_CSM_SCENARIOS,studyId:e,userId:t}))}}function N(e){return{type:"CSM_USER_SELECT",userId:e}}function D(){return{type:"TOGGLE_SITES_FILTER_PANEL"}}function P(e){return{type:"TOGGLE_SITES_FILTERED_DATA_VIEW",payload:e}}function L(e,t,a){return{type:"[SITES.MULTI-EDIT] SET_SITES_MULTIEDIT_VIEW",scenarioId:e,countryId:t,payload:a}}function M(e,t,a,n){return{type:"[SITES.MULTI-EDIT] SELECT_ALL_SITES",scenarioId:e,countryId:t,sitesIds:a,payload:n}}function k(e,t,a){return{type:"[SITES.MULTI-EDIT] SELECT_SITE",scenarioId:e,countryId:t,siteId:a}}function x(e,t,a,n){return{type:"[SITES.MULTI-EDIT] SUBMIT_MULTIEDIT",scenarioId:e,countryId:t,status:a,reason_id:n}}function j(){return function(e){return e((0,te.fetchApi)(re.SITE_EDIT_REASON,{type:ae.SITE_EDIT_REASON}))}}function F(e,t,a,n,r){return{type:ae.SITE_ACTION,scenarioId:e,countryId:t,id:a,field:n,value:r}}function U(){return{type:"TOGGLE_VIEW_FORECAST_AS_DECILE"}}function V(e,t,a){return{type:ae.EXPORT_COUNTRY_SITES_SELECTION,studyId:e,scenarioId:t,countryId:a}}function B(){return{type:ae.TOGGLE_RAW_TABLE_VIEW_STATE}}function H(){return{type:ae.TOGGLE_OTHER_TABLE_VIEW_STATE}}function G(){return{type:ae.TOGGLE_EXTERNAL_TABLE_VIEW_STATE}}function Y(){return{type:ae.TOGGLE_SELECTED_TABLE_VIEW_STATE}}function z(e){return{type:ae.SEARCH_SITES_VALUE_ACTION,payload:e}}function W(e,t,a,n,r,i){var l=re.SEARCH_FOR_SITES.replace(":studyId",e).replace(":scenarioId",t).replace(":countryId",a);return function(e,o){var s=o(),u=s.sites[t][a];return e((0,te.fetchApi)(l,{type:ae.SEARCH_FOR_SITES,dataType:n,existingSites:u,requestId:i},"GET",{pattern:r,dataType:n}))}}function q(e,t){return{type:ae.SET_ACTIVE_SITES_PAGE,section:e,page:t}}function K(e){return{type:ae.SET_ACTIVE_PAGES,payload:e}}function X(e,t,a){return{type:ae.ADD_SELECTED_SITE,scenarioId:e,countryId:t,payload:a}}function Z(e,t,a){return function(n){return n((0,te.fetchApi)(re.SCENARIO_SITE_SELECTION_STATUS.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:ae.SCENARIO_SITE_SELECTION_STATUS,studyId:e,scenarioId:t},"POST",{status:a}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.getSitesHealth=i,t.default=l,t.getCountrySite=o,t.sortData=s,t.setSitesFilter=u,t.setStudiesFilter=d,t.setMetricsFilter=c,t.handleSort=f,t.toggleTableViewMode=p,t.toggleInternalSitesView=h,t.toggleExternalSitesView=v,t.toggleInitialSelection=m,t.resetSites=_,t.onSiteAction=E,t.updateSites=g,t.undoSiteAction=y,t.redoSiteAction=S,t.getEditableCountries=b,t.onChangeCountrySitesStatus=C,t.onChangeCountriesSitesStatus=O,t.setSiteMetricsFilter=T,t.setSiteMilestonesFilter=R,t.getCountryManager=A,t.getCsmsByStudy=I,t.getCsmsScenariosData=w,t.onCsmUserSelect=N,t.toggleFilterPanel=D,t.toggleShowFilteredDataView=P,t.setSitesMultieditView=L,t.onSelectAllSitesAction=M,t.onSelectSiteAction=k,t.onSubmitMultieditAction=x,t.getSiteEditReasonsAction=j,t.updateSiteValue=F,t.toggleViewForecastAsDecileAction=U,t.exportCountrySitesSelection=V,t.setRawTableState=B,t.setOtherTableState=H,t.setExternalTableState=G,t.setSelectedTableState=Y,t.searchSitesValueAction=z,t.searchForSitesAction=W,t.setActiveSitesPage=q,t.setActivePages=K,t.addSelectedSiteAction=X,t.updateScenarioSiteSelection=Z;var J=a(12),Q=n(J),$=a(54),ee=n($),te=a(48),ae=a(13),ne=a(50),re=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(ne)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.hasTrackingData=t.getMultiSelection=t.areSitesListCustomized=t.isMatchedBySearchInput=t.isMatchedByExpFilters=t.getActivePagesFromStore=t.getSortOptionsFromStore=t.getSitesSearchValueFromStore=t.getExperienceSitesFilterFromStore=t.getLoadingSitesStatus=t.getInitialSitesSelectionFromStore=t.getExternalSitesFilterFromStore=t.getInternalSitesFilterFromStore=t.getSitesDataAvailability=t.getSitesFromStore=t.createDeepEqualSelector=t.PER_PAGE=t.EMPTY_SITES=void 0;var r=a(47),i=a(12),l=n(i),o=a(45),s=n(o),u=a(63),d=t.EMPTY_SITES=[],c=(t.PER_PAGE=10,t.createDeepEqualSelector=(0,r.createSelectorCreator)(r.defaultMemoize,s.default),t.getSitesFromStore=(0,r.createSelector)([u.getRouteParams,function(e){return e.sites}],function(e,t){return t[e.scenarioId]&&t[e.scenarioId][e.countryId]?t[e.scenarioId][e.countryId]:d}));t.getSitesDataAvailability=function(e){return e.sites.sitesDataAvailable},t.getInternalSitesFilterFromStore=function(e){return e.sites.showInternalSites},t.getExternalSitesFilterFromStore=function(e){return e.sites.showExternalSites},t.getInitialSitesSelectionFromStore=function(e){return e.sites.showInitialSelection},t.getLoadingSitesStatus=function(e){return e.sites.loadingSites},t.getExperienceSitesFilterFromStore=function(e){return{piPediatric:e.sites.piPediatric,piAdolescence:e.sites.piAdolescence,pcPediatric:e.sites.pcPediatric,pcAdolescence:e.sites.pcAdolescence}},t.getSitesSearchValueFromStore=function(e){return e.sites.searchSitesValue&&e.sites.searchSitesValue.length>=3?e.sites.searchSitesValue:""},t.getSortOptionsFromStore=function(e){return e.sites.sortData},t.getActivePagesFromStore=function(e){return e.sites.activePages},t.isMatchedByExpFilters=function(e,t){var a=[],n=!1;return t.piPediatric&&a.push("investigator_center.investigator.has_pediatric_exp"),t.piAdolescence&&a.push("investigator_center.investigator.has_adolescent_exp"),t.pcPediatric&&a.push("investigator_center.site.has_pediatric_exp"),t.pcAdolescence&&a.push("investigator_center.site.has_adolescent_exp"),a.length?a.forEach(function(t){(0,l.default)(e,t)&&(n=!0)}):n=!0,n},t.isMatchedBySearchInput=function(e,t){var a=!1,n=[],r=(0,l.default)(e,"investigator_center.investigator.name")||"";n.push(r);var i=(0,l.default)(e,"investigator_center.center.name")||"";return n.push(i),n.forEach(function(e){e.toLowerCase().indexOf(t.toLowerCase())>-1&&(a=!0)}),a},t.areSitesListCustomized=(0,r.createSelector)(c,function(e){return e.filter(function(e){return null!==e.state.status}).length>0}),t.getMultiSelection=(0,r.createSelector)(c,function(e){return e.filter(function(e){return e.multiSelected}).length>0}),t.hasTrackingData=(0,r.createSelector)(c,function(e){return e.filter(function(e){return e.studyLevelData}).length>0})},function(e,t){const a=[{title:"Tool issues",items:{RANKING_NOT_ACCURATE:"Site ranking is not accurate",DUPLICATED_SITE:"Duplicated site",PI_SITE_DATA_IS_OUT_OF_DATE:"PI/Site data is out of date (e.g. PI retired/left institution"}},{title:"User Knowledge",items:{PERFORMANCE_ISSUES:"Performance issues",HIGH_COST:"High cost",QUALITY_ISSUES:"Quality issues (e.g. country experience, local/global audits/inspections, on hold)",SITE_STAFF_TURNOVER:"Site staff turnover",SITE_TOO_CONGESTED:"Site too congested",LACK_OF_EQUIPMENT:"Lack of required equipment",PILOT_SITE:"Pilot site only (cannot scale)"}},{title:"Site Situation",items:{SITE_NOT_INTERESTED:"Site not interested (resources, congestion, lack of interest in protocol)",CHANGE_IN_INSTITUTION_REQ:"Change in institution requirements (i.e. difficult CTA signature process, increase in fees)"}},{title:"Other",items:{OTHER:"Other"}}],n=[{title:"Tool issues",items:{SITE_RANKING_UNDERESTIMATES_PERF:"Site ranking underestimates performance",SITE_NOT_IN_FPO:"Site not in FPO"}},{title:"User Knowledge",items:{SITE_IMPROVED_PROCESSES:"Site has improved processes/performance/no longer on hold",ATTRACTIVE_PRICE:"Attractive price",SITE_SPEC_IN_TA_INDICATION:"Site specialises in TA/Indication",SITE_HAS_ACCREDITATION:"Site has special accreditation",PSEM_IN_PLACE:"Preferred Site Engagement Model (PSEM) in place",SITE_ACCESS_SPEC_EQUIPMENT:"Site has access to specialist equipment",NEW_PI_STAFF:"New PI/staff",STRATEGIC_IMPORTANCE:"Startegic Importance (e.g. Clinical Team recommendation",BACKUP_SITE:"Backup site"}},{title:"Site Situation",items:{MOTIVATED_SITE_PI:"Motivated site or PI"}},{title:"Other",items:{OTHER:"Other"}}],r={READY_TO_LOCAL_MANAGE:"READY",NOT_READY_TO_LOCAL_MANAGE:"NOT_READY",IN_GLOBAL_REVIEW:"IN_REVIEW",APPROVED:"APPROVED"};e.exports={REMOVE_SITE_REASONS:a,ADD_SITE_REASONS:n,COUNTRY_SITE_APPROVAL_STATUS:r}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(923),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),o=n(l),s=a(1),u=n(s),d=a(2),c=n(d);a(2178);var f=function(e){var t,a=e.children,n=e.className,l=e.style,s=e.width,u=e.overflow,d=e.cellClickHandler,f=(0,c.default)((t={},r(t,n,n),r(t,"react-flex-table__cell_no-overflow",!u),t)),p=l;return s&&(p=i({},p,{flex:"number"==typeof s?"1 1 "+s+"px":"1 1 "+s})),o.default.createElement("div",{className:"react-flex-table__cell "+f,style:p,onClick:d},a)};f.propTypes={cellClickHandler:u.default.func,children:u.default.node,className:u.default.string,overflow:u.default.bool,style:u.default.object,width:u.default.oneOfType([u.default.number,u.default.string])},f.defaultProps={cellClickHandler:null,className:void 0,overflow:!1,width:void 0,style:{},children:void 0},t.default=f},function(e,t,a){var n=a(1431);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},,,function(e,t,a){"use strict";function n(){return function(e){return e((0,l.fetchApi)(s.CONTEXT_HELP_DATA,{type:o.CONTEXT_HELP_PAGE_LIST}))}}function r(e){return{type:o.CONTEXT_HELP_PAGE,page:e}}function i(e){return{type:o.IS_SHOW_CONTEXT_HELP,val:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,t.setContextHelpPage=r,t.toggleContextHelp=i;var l=a(48),o=a(13),s=a(50)},function(e,t,a){"use strict";function n(e){return function(t){return t((0,d.fetchApi)(f.HISTORICAL_STUDIES.replace(/:studyId/,e),{type:c.GET_HISTORICAL_STUDIES,studyId:e}))}}function r(e,t){return{type:c.TOGGLE_HISTORICAL_STUDY,study_id:e,studyId:t}}function i(e,t,a){return{type:c.SORT_HISTORICAL_DATA,columnName:e,sortDirection:t,studyId:a}}function l(e){return{type:c.FILTER_HISTORICAL_DATA,pattern:e}}function o(e){return{type:c.CLEAR_HISTORICAL_DATA,studyId:e}}function s(e,t){return function(a){return a((0,d.fetchApi)(f.HISTORICAL_STUDIES.replace(/:studyId/,e),{type:c.APPLY_HISTORICAL_STUDIES_CHANGES,studyId:e,forceUpdate:!0},"POST",{selectedStudies:t})).then(function(){return a((0,u.push)("/studies/"+e))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.getHistoricalStudies=n,t.toggleCheckbox=r,t.sortData=i,t.filterData=l,t.rollbackChanges=o,t.applyHistoricalStudiesChanges=s;var u=a(19),d=a(48),c=a(13),f=a(50)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(7),r=a(806),i=function(e){return e&&e.__esModule?e:{default:e}}(r),l=a(30),o=a(33),s=function(e){return{studies:e.studies.studies}};t.default=(0,n.connect)(s,{updateStudy:l.updateStudy,getScenarioViewerDataWithFullStudy:o.getScenarioViewerDataWithFullStudy})(i.default)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(832),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){return{notes:(0,b.getScenarioNotesFromStore)(e,t.scenarioId)}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(75),h=n(p),v=a(7),m=a(6),_=a(753),E=n(_),g=a(754),y=n(g),S=a(34),b=a(53),C=a(230);a(2167);var O=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.containerWidth=0,a.containerLeft="calc(100% + 24px)",a.wrapperHeight=0,a.handleResize=a.handleResize.bind(a),a}return l(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scenarioId,a=e.isImpact,n=!!(0,S.isSupportPassive)()&&{passive:!0};window.addEventListener("resize",this.handleResize,n),requestAnimationFrame(this.handleResize),this.controller=new AbortController;var r=this.controller.signal;a?this.props.getImpactScenarioNotes(t):this.props.getScenarioNotes(t,r)}},{key:"shouldComponentUpdate",value:function(e){return e.expanded||e.expanded!==this.props.expanded}},{key:"componentWillUnmount",value:function(){this.controller.abort(),window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){var e=this.notesContainer,t=e?e.getBoundingClientRect():{};this.containerWidth=t.width,this.containerLeft=t.left;var a=this.notesWrapper,n=a?a.getBoundingClientRect():{};this.wrapperHeight=n.height,e&&a&&this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props,a=t.expanded,n=t.onSubmitNote,r=t.scenarioId,i=t.isEditable,l=t.notes;return d.default.createElement("div",{ref:function(t){e.notesContainer=t},className:"fpo-scenario-notes__container"},d.default.createElement("div",{ref:function(t){e.notesWrapper=t},className:"fpo-scenario-notes__wrapper",onWheel:function(e){e.stopPropagation(),e.preventDefault()},onScroll:function(e){e.stopPropagation(),e.preventDefault()},style:{width:this.containerWidth+48,left:a?this.containerLeft-24:this.containerLeft+this.containerWidth+24}},d.default.createElement("div",{className:"fpo-scenario-notes__close-container"},d.default.createElement("div",{onClick:this.props.onClose,className:"fpo-scenario-notes__close-button"},m.Icons.CROSS)),d.default.createElement("div",{className:"fpo-scenario-notes__content"},d.default.createElement(h.default,{style:{maxHeight:this.wrapperHeight-280},horizontal:!1,stopScrollPropagation:!0},d.default.createElement("div",{className:"fpo-scenario-notes__scrollable-wrapper"},d.default.createElement("div",{className:"fpo-scenario-notes__title-wrapper"},d.default.createElement("div",{className:"font-black"},"Notes"),d.default.createElement("div",{className:"fpo-scenario-notes__counter"},d.default.createElement("div",{className:"fpo-scenario-notes__counter-value"},l.length>0?(0,S.kFormatter)(l.length):""),d.default.createElement("div",{className:"fpo-scenario-notes__counter-icon"},m.Icons.NOTES))),i&&d.default.createElement(E.default,{scenarioId:r,onSubmit:n}),d.default.createElement(y.default,{notesData:l}))))))}}]),t}(d.default.Component);O.defaultProps={expanded:!1,notes:[],isImpact:!1},O.propTypes={expanded:f.default.bool,isEditable:f.default.bool.isRequired,onClose:f.default.func.isRequired,onSubmitNote:f.default.func.isRequired,scenarioId:f.default.oneOfType([f.default.string,f.default.number]).isRequired,notes:f.default.array,isImpact:f.default.bool,getScenarioNotes:f.default.func.isRequired,getImpactScenarioNotes:f.default.func.isRequired};var T={getScenarioNotes:C.getScenarioNotes,getImpactScenarioNotes:C.getImpactScenarioNotes};t.default=(0,v.connect)(o,T)(O)},function(e,t,a){"use strict";function n(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function r(e,t,a){var n=!1,r=t[a];return!t.filter(function(e){return"rollup"!==e.type?e.location===r.location&&e.region_name===r.region_name:e.location===r.location}).find(function(e){return"actual"===e.valuesType})&&r.ignoreGenericData&&(n=!0),n}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.showInAdjustedRow=r;var l=function(e,t,a,r){return e.reduce(function(e,l){if("region"===l.type&&l.isRegionCountry)return e;var o=l.patient_allocation,s=l.num_sites,u=l.fsiv,d=l.sas,c=l["25_si"],f=l["50_si"],p=l["90_si"],h=l.fpfv,v=l.fpfv_lpfv,m=l.fpfv_fpft,_=l.randomisation_rate,E=l.screening_failure,g=l.sr,y=l.lpft,S=l.actual_patient_allocation,b=l.actual_num_sites,C=l.actual_fsiv,O=l.actual_sas,T=l.actual_25_si,R=l.actual_50_si,A=l.actual_90_si,I=l.actual_fpfv,w=l.actual_fpfv_lpfv,N=l.actual_randomisation_rate,D=l.actual_screening_failure,P=l.actual_sr,L=l.actual_f_lpft,M=l.actual_date,k=l.actual_screened,x=l.actual_randomized,j=l.adjusted_patient_allocation,F=l.adjusted_num_sites,U=l.adjusted_fsiv,V=l.adjusted_sas,B=l.adjusted_25_si,H=l.adjusted_50_si,G=l.adjusted_90_si,Y=l.adjusted_fpfv,z=l.adjusted_fpfv_lpfv,W=l.adjusted_fpfv_fpft,q=l.adjusted_randomisation_rate,K=l.adjusted_screening_failure,X=l.adjusted_sr,Z=l.adjusted_lpft,J=l.adjusted_invalids,Q=l.overallocatedData,$=l.adjusted_overallocatedData,ee=n(l,["patient_allocation","num_sites","fsiv","sas","25_si","50_si","90_si","fpfv","fpfv_lpfv","fpfv_fpft","randomisation_rate","screening_failure","sr","lpft","actual_patient_allocation","actual_num_sites","actual_fsiv","actual_sas","actual_25_si","actual_50_si","actual_90_si","actual_fpfv","actual_fpfv_lpfv","actual_randomisation_rate","actual_screening_failure","actual_sr","actual_f_lpft","actual_date","actual_screened","actual_randomized","adjusted_patient_allocation","adjusted_num_sites","adjusted_fsiv","adjusted_sas","adjusted_25_si","adjusted_50_si","adjusted_90_si","adjusted_fpfv","adjusted_fpfv_lpfv","adjusted_fpfv_fpft","adjusted_randomisation_rate","adjusted_screening_failure","adjusted_sr","adjusted_lpft","adjusted_invalids","overallocatedData","adjusted_overallocatedData"]),te=S>0,ae=e.concat([i({},ee,{valuesType:"generic",hasOverallocation:!!Q,isEnroled:te,values:{location:location,patient_allocation:o,num_sites:s,fsiv:u,sas:d,"25_si":c,"50_si":f,"90_si":p,fpfv:h,fpfv_lpfv:v,fpfv_fpft:m,randomisation_rate:_,screening_failure:E,sr:g,lpft:y,events:ee.events}})]);return Q&&r&&r.overallocated&&(ae=ae.concat([i({},ee,{valuesType:"generic_overallocated",values:{location:location,patient_allocation:Q.patient_allocation,num_sites:Q.num_sites,fsiv:Q.fsiv,sas:Q.sas,"25_si":Q["25_si"],"50_si":Q["50_si"],"90_si":Q["90_si"],fpfv:Q.fpfv,fpfv_lpfv:Q.fpfv_lpfv,fpfv_fpft:Q.fpfv_fpft,randomisation_rate:Q.randomisation_rate,screening_failure:Q.screening_failure,sr:Q.sr,lpft:Q.lpft,events:Q.events}})])),t&&(ae=ae.concat([i({},ee,{valuesType:"actual",isEnroled:te,values:{location:location,patient_allocation:S,num_sites:b,fsiv:C,sas:O,"25_si":T,"50_si":R,"90_si":A,fpfv:I,fpfv_lpfv:w,randomisation_rate:N,screening_failure:D,sr:P,lpft:L,lpftDiff:L&&y?y.diff(L,"days"):null,actual_date:M}})])),a&&(ae=ae.concat([i({},ee,{valuesType:"adjusted",planned_lpft:y,actual_fsiv:C,actual_fpfv:I,hasOverallocation:!!$,isEnroled:te,values:{location:"",patient_allocation:j,num_sites:F,fsiv:U,sas:V,"25_si":B,"50_si":H,"90_si":G,fpfv:Y,fpfv_lpfv:z,fpfv_fpft:W,randomisation_rate:q,screening_failure:K,sr:X,lpft:Z,invalids:(J||[]).map(function(e){return e.replace("adjusted_","")}),actual_date:M,actual_num_sites:b,actual_screened:k,actual_randomized:x,events:ee.adjusted_events,actualTimeseriesSnapshot:ee.actualTimeseriesSnapshot}})]),$&&r&&r.overallocated&&(ae=ae.concat([i({},ee,{valuesType:"adjusted_overallocated",values:{location:location,patient_allocation:$.patient_allocation,num_sites:$.num_sites,fsiv:$.fsiv,sas:$.sas,"25_si":$["25_si"],"50_si":$["50_si"],"90_si":$["90_si"],fpfv:$.fpfv,fpfv_lpfv:$.fpfv_lpfv,fpfv_fpft:$.fpfv_fpft,randomisation_rate:$.randomisation_rate,screening_failure:$.screening_failure,sr:$.sr,lpft:$.lpft,events:$.events}})]))),ae},[])};t.default=l},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(913),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(947),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(957),c=n(d);a(2196);var f=function(e){var t=e.height,a=e.children,n=e.onClick,r=e.tooltip,l=e.disabled,o=e.actionName,s=e.className;return i.default.createElement("div",{className:(0,u.default)("fpo-sidebar__button",{"fpo-sidebar__button_disabled":l},s),style:{height:t}},i.default.createElement("div",{className:"fpo-sidebar__content",onClick:function(e){e.stopPropagation(),e.preventDefault(),n&&!l&&n(o)}},i.default.createElement(c.default,{tooltip:r},a)))};f.propTypes={actionName:o.default.string,height:o.default.number,children:o.default.element.isRequired,onClick:o.default.func,tooltip:o.default.string,disabled:o.default.bool,className:o.default.string},f.defaultProps={actionName:void 0,height:72,onClick:void 0,tooltip:void 0,disabled:!1,className:null},t.default=i.default.memo(f)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(960),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStudyChanged=t.getStudyChanged=void 0;var n=a(47),r=t.getStudyChanged=function(e){return e.alerts.studyChanged};t.isStudyChanged=(0,n.createSelector)([r,function(e,t){return t}],function(e,t){return e.includes(t)})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(983),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(994),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e){return"/studies/"+e+"/historical"}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedStudiesStatistic=t.getSelectedHistoricalStudies=t.getFilteredHistoricalStudies=t.getFilterValue=t.getHistoricalStudiesFromStore=void 0,t.getHistoricalUrl=r;var i=a(47),l=a(11),o=function(e){return e&&e.__esModule?e:{default:e}}(l),s=t.getHistoricalStudiesFromStore=function(e,t){return e.historical.historicalStudies[parseInt(t.match.params.id,10)]},u=t.getFilterValue=function(e){return e.historical.filterValue},d=(t.getFilteredHistoricalStudies=(0,i.createSelector)([s,u],function(e,t){var a=["study_id","therapeutic_area","indication"];return e?e.filter(function(e){for(var n=!1,r=0;r<a.length;r+=1){var i=a[r],l=e[i]||"";if("fpfv"===i&&(l=(0,o.default)(l).format("DD MMM YY")),-1!==l.toString().toLowerCase().indexOf(t.toLowerCase())){n=!0;break}}return n}):[]}),t.getSelectedHistoricalStudies=(0,i.createSelector)(s,function(e){return e?e.filter(function(e){return e.selected}):[]}));t.getSelectedStudiesStatistic=(0,i.createSelector)(d,function(e){var t=["target_num_patients","num_countries","num_sites","enrollment_rate","screen_failure_rate"],a={title:"AVERAGE"},r={title:"MIN"},i={title:"MAX"};return t.forEach(function(t){var l=e.reduce(function(e,a){return null!==a[t]&&e.push(a[t]),e},[]),o=Math.max.apply(Math,n(l)),s=Math.min.apply(Math,n(l)),u=l.reduce(function(e,t){return+e+ +t},0)/l.length;"enrollment_rate"===t||"screen_failure_rate"===t?(u=u.toFixed(2),o=o.toFixed(2),s=s.toFixed(2)):u=u.toFixed(0),a[t]=isFinite(u)?u:"-",i[t]=isFinite(o)?o:"-",r[t]=isFinite(s)?s:"-"}),[a,i,r]})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentEvents=t.saveData=void 0;var n=a(12),r=function(e){return e&&e.__esModule?e:{default:e}}(n),i=a(13),l=a(33),o=a(8),s=a(35),u=t.saveData=function(e,t,a,n,u,d,c,f,p){var h=u.map(function(e){return e.country_id}),v=p?"adjusted_":"",m=(0,r.default)(f,v+"overallocatedData"),_={predicted_lpft:m?m.lpft:f[v+"lpft"],predicted_fpfv_lpfv:m?m.fpfv_lpfv:f[v+"fpfv_lpfv"],predicted_patient_allocation:m?m.patient_allocation:f[v+"patient_allocation"],predicted_num_sites:m?m.num_sites:f[v+"num_sites"],predicted_num_countries:f.amount_countries};return e({type:i.CHANGE_ENABLE_SAVE_STATE,payload:!1}),new Promise(function(t){h&&h.length>0&&t(e((0,l.removeScenarioCountry)(a,h))),t()}).then(function(){var r=(0,o.prepareDataToSaveOverrides)(n,d);(0,s.removeParamItemStorage)("fpo-dirty-data",c.id+"-"+t+"-"+a),e((0,l.saveOverrides)(r,t,a,!1,_))}).catch(function(){return e({type:i.CHANGE_ENABLE_SAVE_STATE,payload:!0})})};t.getCurrentEvents=function(e,t,a){var n=a.filter(function(e){return"country"===e.type}).find(function(a){return a.region_name===e&&a.country_name===t});return n?n.events:[]},t.default=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getSortingByType=t.getIsCollapsedByType=t.getStudiesDataByType=t.getStudiesData=t.getStudiesToImport=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(47),l=a(12),o=n(l),s=a(644),u=n(s),d=a(180),c=n(d),f=a(200),p=[],h=function(e){return e.platform.studies},v=function(e){return(0,o.default)(e,"studies.studies",p)},m=(t.getStudiesToImport=(0,i.createSelector)([h,v],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.map(function(e){return r({},e,{imported:t.some(function(t){return t.study_id===e.study_id&&t.is_imported})})})}),t.getStudiesData=(0,i.createSelector)([v,function(e){return e.studies.TAFilterValue},function(e){return e.studies.sorting}],function(e,t,a){function n(e){return a[e+"_sorting"].column===f.COLUMN_NAMES.TA_INDICATION?[a[e+"_sorting"].column,f.COLUMN_NAMES.INDICATION,f.COLUMN_NAMES.STUDY_NAME]:[a[e+"_sorting"].column,f.COLUMN_NAMES.STUDY_NAME]}var r=e.map(function(e){return{id:e.id,study:e.study_id,indication:e.indication,lastUpdatedAt:e.updatedAt,scenarios:e.scenarios,therapeutic_area:e.therapeutic_area,is_imported:e.is_imported,status:e.state.status,isOwner:e.state.isOwner,owner:e.state.owner_name,is_new_owner:e.is_new_owner,showApproveAlert:e.approveAlert&&e.state.status!==f.STUDY_TYPE.ACTIVE,showOutdatedApproveAlert:e.outdatedApproveWarning,owner_name:e.state.owner_name,fp:e.fp,target_num_patients:e.target_num_patients,target_lpft:e.target_lpft,impactStudyParams:e.impactStudyParams,new:e.justImported}}).filter(function(e){return e.indication&&0===e.indication.toLowerCase().indexOf(t.toLowerCase())||e.therapeutic_area&&0===e.therapeutic_area.toLowerCase().indexOf(t.toLowerCase())||e.study&&0===e.study.toLowerCase().indexOf(t.toLowerCase())}).reduce(function(e,t){return t.is_imported?t.status?t.status===f.STUDY_TYPE.ACTIVE?e.tracking.push(t):t.status===f.STUDY_TYPE.PLANNED&&e.planning.push(t):e.unknown.push(t):e.playground.push(t),e},{tracking:[],planning:[],playground:[],unknown:[]});return Object.keys(r).forEach(function(e){r[e]=(0,u.default)(r[e],function(t){var a=void 0;switch(e){case"tracking":a=n(f.SECTIONS.TRACKING);break;case"planning":a=n(f.SECTIONS.PLANNING);break;case"playground":a=n(f.SECTIONS.PLAYGROUND);break;case"unknown":default:a=n(f.SECTIONS.UNKNOWN)}return(0,c.default)([t[a[0]].toLowerCase(),t[a[1]].toLowerCase()])})}),a[f.SECTIONS.TRACKING+"_sorting"].order===f.SORTING_ORDER.DESC&&r.tracking.reverse(),a[f.SECTIONS.PLANNING+"_sorting"].order===f.SORTING_ORDER.DESC&&r.planning.reverse(),a[f.SECTIONS.PLAYGROUND+"_sorting"].order===f.SORTING_ORDER.DESC&&r.playground.reverse(),a[f.SECTIONS.UNKNOWN+"_sorting"].order===f.SORTING_ORDER.DESC&&r.unknown.reverse(),r}));t.getStudiesDataByType=(0,i.createSelector)([m,function(e,t){return t}],function(e,t){switch(t){case f.SECTIONS.TRACKING:return e.tracking;case f.SECTIONS.PLANNING:return e.planning;case f.SECTIONS.PLAYGROUND:return e.playground;case f.SECTIONS.UNKNOWN:default:return e.unknown}}),t.getIsCollapsedByType=(0,i.createSelector)([function(e){return e.studies.collapsedSections},function(e,t){return t}],function(e,t){return e.includes(t)}),t.getSortingByType=(0,i.createSelector)([function(e){return e.studies.sorting},function(e,t){return t}],function(e,t){return e[t+"_sorting"]})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t,a){var n=e.map(function(e){return e[t]}),r=(0,y.extent)(n),i=(0,p.default)(r[1]).diff((0,p.default)(r[0]),"d"),l=(0,p.default)(r[0]).clone().add(Math.floor(i/2),"d"),o=l.day(),s=a.day();return o>s?l=l.clone().subtract(o-s,"d"):o<s&&(l=l.clone().add(s-o,"d")),l}function l(e,t){var a=e.map(function(e){return e[t]});return a&&a.length>0?(0,p.default)((0,y.max)(a)):null}function o(e,t,a){var n=(0,v.default)(e);if(!t)return n;var r=n.reduce(function(e,t){var a=t;return a.generatedFields=[],a.lpft?e.countriesWithLpft.push(a):e.countriesWithoutLpft.push(a),a.fsiv||a.fpfv||e.countriesWithoutFsivAndFpfv.push(a),a.fpfv?e.fpfvCount+=1:a.fsiv&&(e.fsivCount+=1),e},{countriesWithLpft:[],countriesWithoutLpft:[],countriesWithoutFsivAndFpfv:[],fpfvCount:0,fsivCount:0}),o=r.countriesWithLpft,s=r.countriesWithoutLpft,u=r.countriesWithoutFsivAndFpfv,d=r.fpfvCount,c=r.fsivCount,f=void 0;o.length>0&&(f=i(o,"lpft",t));var p=void 0,h=void 0;(d>0||c>0)&&(p=d>=c?"fpfv":"fsiv",h=i(n,p,t)),s.map(function(e){var t=e;return a&&t.patient_allocation>0&&h?(t.lpft=a.clone(),t.generatedFields.push("lpft")):f&&t.patient_allocation>0&&h&&(t.lpft=f.clone(),t.generatedFields.push("lpft")),t}),u.map(function(e){var t=e;return p&&h&&t.patient_allocation>0&&(f||a)&&(t[p]=h,t.generatedFields.push(p)),t});var m=void 0;return o.length>0&&(m=l(o,"lpft"),n.map(function(e){var t=e;return t.latestDate=m&&m.clone(),t})),n}function s(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:14,n=arguments[3],i=arguments[4],l=arguments[5],o=arguments[6],s=arguments[7],u=arguments[8],d=arguments[9],c=arguments[10],f=arguments[11],h=arguments[12],v=(0,C.validateCurvesCalcArguments)(e,t,n,i,l,o,s,u,d,f,h,1,a,c),m=v.invalidFields,_=v.skipCalculation,E={error:!0,invalidFields:m,curves:[[],[],[]],lpft:c,fpfv_lpfv:null,fpp_fpfv:null,fpfv:i,fpft:null,fsiv:n,fpfv_fpft:a,"25_si":null,"50_si":null,"90_si":null,num_sites:u,patient_allocation:d,sas:null,screening_failure:null,sr:null};if(_||!c)return E;try{var g,y=[],S=[],b=a,O=i.diff(n,"d"),R=n.diff(e,"d"),w=i.diff(e,"d"),N=R+O,D=+d,P=Math.floor(p.default.duration(c.diff(e)).asDays()),L=(0,T.default)({startDate:e,FPP_FSIV:R,fsiv:n,si25:l,si50:o,si90:s,nSites:u}),M=L?L.sivCurve:[],k=L?L.siteInitiated:[],x=new Array(P+O);x.fill(0),x.splice.apply(x,[O,k.length].concat(r(k))),x.fill(Math.max.apply(Math,r(k)),O+k.length);var j=Math.floor(p.default.duration(c.diff(e)).asDays()),F=x.reduce(function(e,t,a){var n=e;return a<j-b&&(n+=t),n},0),U=D/F;if(!isFinite(U))return E;var V=x.map(function(e){return e*U});if(0===V.length&&(V=[0]),y=(0,A.default)({countryScreeningRate:V,nPatients:D,SF:0,fpfv:i,startDate:e}),y.length===I.MAX_CURVE_LENGTH)return{error:!0,invalidFields:["patient_allocation","num_sites","randomisation_rate","screening_failure"]};var B=R+O+b+1+V.indexOf(Math.max.apply(Math,r(V))),H=new Array(B>P?B:P);H.fill(0),(g=H).splice.apply(g,[b,V.length].concat(r(V))),H.fill(Math.max.apply(Math,r(V)),b+V.length),0===H.length&&(H=[0]);var G=Math.max.apply(Math,r(H));if(G&&0!==G){var Y=0,z=0;do{Y=void 0!==H[z]?H[z]:G,0!==z&&(Y+=S[S.length-1][1]),S.push([z+1,Y>D?D:Y]),z+=1}while(Y<=D&&S.length<I.MAX_CURVE_LENGTH);if(S.length===I.MAX_CURVE_LENGTH)return{error:!0,invalidFields:["patient_allocation","num_sites","randomisation_rate","screening_failure"]};if(c.isBefore(t)){for(var W=S.length;W<P;W+=1)S.push([W+1,D]);for(var q=y.length;q<P;q+=1)y.push([q+1,D])}}var K=S.length;y=y.length>K?y.slice(0,K):y;var X=y.map(function(e){return e[1]}),Z=X.indexOf(Math.max.apply(Math,r(X))),J=Z-N+1,Q=S.map(function(e){return e[1]}),$=Q.indexOf(Math.max.apply(Math,r(Q))),ee=i.clone().add(a,"d");return e.clone().add(M.length,"d").isAfter(c)&&(M=M.splice(0,$)),{curves:[M,y,S],lpft:c,fpfv_lpfv:J<0?null:J,fpp_fpfv:w,fpfv:i,fpft:ee,fsiv:n,fpfv_fpft:b,"25_si":l,"50_si":o,"90_si":s,num_sites:u,patient_allocation:D,sas:1,screening_failure:0,sr:+(U*(365/12/7)).toFixed(2),randomisation_rate:+(U*(365/12/7)).toFixed(2)}}catch(e){return E.error=e,E}}function u(e,t,a,n,i){var l=(0,S.getMomentDate)(e);if(!l)return{invalidFields:"startDate"};var o=t?(0,S.getMomentDate)(t):a.latestDate,u=(0,b.getActualsData)(a,l),d=["sas","fpfv_lpfv","sr","screening_failure","randomisation_rate","25_si","50_si","90_si"],f=a.generatedFields&&[].concat(r(a.generatedFields),d),p=a.patient_allocation,h=a.lpft?(0,S.getMomentDate)(a.lpft):null,v=void 0;a.num_sites&&0!==a.num_sites?v=a.num_sites:p>0&&h&&(a.fsiv||a.fpfv)&&(v=1,f.push("num_sites"));var m=void 0,_=void 0;p>0&&h&&(a.fsiv||a.fpfv)&&(m=1,_=0);var E=void 0;if(a.fpfv)E=(0,S.getMomentDate)(a.fpfv);else if(a.fsiv&&p>0&&h){E=(0,S.getMomentDate)(a.fsiv).clone().add(2,"w");var g=E.day(),y=l.day();g>y?E=E.clone().subtract(g-y,"d"):g<y&&(E=E.clone().add(y-g,"d")),f.push("fpfv")}var C=void 0;if(a.fsiv)C=(0,S.getMomentDate)(a.fsiv);else if(E&&p>0&&h){C=E.clone().subtract(2,"w");var O=C.day(),T=l.day();O>T?C=C.clone().subtract(O-T,"d"):O<T&&(C=C.clone().add(T-O,"d")),f.push("fsiv")}var R=void 0,A=void 0,I=void 0;if(h&&C&&p>0){var w=h.diff(l,"d"),N=C.diff(l,"d"),D=(w+N)/2,P=D-N,L=Math.round(.25*P)+N,M=Math.round(.5*P)+N,k=Math.round(.9*P)+N;R=l.clone().add(L,"d"),A=l.clone().add(M,"d"),I=l.clone().add(k,"d")}var x=s(l,o,n,C,E,R,A,I,v,p,h,m,_),j={};if(i){var F=(0,S.getMomentDate)(a.adjusted_25_si),U=(0,S.getMomentDate)(a.adjusted_50_si),V=(0,S.getMomentDate)(a.adjusted_90_si),B=(0,S.getMomentDate)(a.adjusted_fsiv),H=(0,S.getMomentDate)(a.adjusted_fpfv);j=(0,b.getCurvesAndMilestones)(l,o,n,B,H,F,U,V,a.adjusted_num_sites,a.adjusted_patient_allocation,a.adjusted_sas,a.adjusted_screening_failure,a.adjusted_randomisation_rate?a.adjusted_randomisation_rate/(365/12/7):"","adjusted_",a.adjusted_events)}return c({},x,u,{generatedFields:f},j)}function d(e){var t=(0,_.default)(e,"fullData",[]),a=t.filter(function(e){return e.type===w.SCENARIO_DATA_TYPE.COUNTRY}).map(function(e){var t=["region_id","patient_allocation","region_name","num_sites","fsiv","sas","25_si","50_si","90_si","fpfv","sr","screening_failure","randomisation_rate","lpft"];return c({},(0,g.default)(e,t),{constraint:"INCLUDE",name:(0,_.default)(e,"country_name"),id:(0,_.default)(e,"country_id"),platform_country_id:(0,_.default)(e,"country_id")})}).map(function(t){var a=(0,b.getCurvesAndMilestones)(e.fp,e.end_date,e.fpfv_fpft,t.fsiv,t.fpfv,t["25_si"],t["50_si"],t["90_si"],+t.num_sites,+t.patient_allocation,t.sas,t.screening_failure,t.randomisation_rate/(365/12/7),"");return c({},t,{fpfvFpft:e.fpfv_fpft,expectedLpft:t.lpft?t.lpft.clone():null,lpft:a.lpft?a.lpft.clone():null})}).reduce(function(e,t){var a=e[t.region_name];return a?a.countries.push(t):e[t.region_name]={id:t.region_id,name:t.region_name,countries:[t]},e},{});return{locations:Object.values(a),scenario:{startDate:e.fp,endDate:e.end_date,target_num_patients:e.target_num_patients}}}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.getAverageDate=i,t.generateMissingValuesForImpactScenarioCountries=o,t.getCurvesAndMilestonesImpact=s,t.calculateImpactCurvesData=u,t.prepareImpactScenarioData=d;var f=a(11),p=n(f),h=a(40),v=n(h),m=a(12),_=n(m),E=a(54),g=n(E),y=a(29),S=a(8),b=a(136),C=a(242),O=a(513),T=n(O),R=a(337),A=n(R),I=a(110),w=a(10)},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t,a,n){return e.map(function(e,r){var i=+a;return n?t.forEach(function(e){if(r>=e.startWeek&&r<=e.endWeek){var t=e.operation_value*i/100;e.operation===o.OPERATION_TYPE.DECREASE_BY?i=i-t>0?i-t:0:e.operation===o.OPERATION_TYPE.INCREASE_BY&&(i=i+t<.99?i+t:.99)}}):t.forEach(function(e){if(r>e.startWeek&&r<=e.endWeek){var t=e.operation_value*i/100;e.operation===o.OPERATION_TYPE.DECREASE_BY?i=i-t>0?i-t:0:e.operation===o.OPERATION_TYPE.INCREASE_BY&&(i=i+t<1?i+t:1)}}),e*(1-i)})}function i(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.FPP_FSIV,o=e.FSIV_FPFV,s=e.FPFV_FPFT,u=e.countryScreeningRate,d=e.totalDuration,c=e.SF,f=e.nPatients,p=e.preparedType1Events,h=e.preparedType2Events,v=e.screeningCurve,m=e.preparedType4Events,_=e.protectedScenario,E=e.fpftInd,g=[],y=i+o+s+1+u.indexOf(Math.max.apply(Math,n(u))),S=Array(y>d?y:d).fill(0);(t=S).splice.apply(t,[s,u.length].concat(n(u))),S.fill(Math.max.apply(Math,n(u)),s+u.length),S=r(S,m,c,_),0===S.length&&(S=[0]),S=S.map(function(e,t){var a=e;return _?p.forEach(function(e){t>=e.startWeek&&t<e.endWeek&&(a=0)}):p.forEach(function(e){e.startWeek!==e.endWeek&&t>e.startWeek&&t-s<=e.endWeek&&(a=0)}),a});var b=Math.max.apply(Math,n(S));if(b&&0!==b){var C=0,O=0;do{C=void 0!==S[O]?S[O]:b,0!==O&&(void 0!==E&&E===O+1&&(C+=1),C+=g[g.length-1][1]),a?g.push([O+1,C,S[O]]):g.push([O+1,C>f?f:C]),O+=1}while(C<=f&&g.length<l.MAX_CURVE_LENGTH);var T=h.reduce(function(e,t){var a=g.findIndex(function(e){return e[1]>=t.patients});if(-1!==a){var n=a+t.start_after,r=t.duration;return e[n]?e[n]=r>e[n]?r:e[n]:e[n]=r,e}},{});h.sort(function(e,t){var a=g.findIndex(function(t){return t[1]>=e.patients}),n=g.findIndex(function(e){return e[1]>=t.patients});if(-1!==a&&-1!==n){var r=a+e.start_after,i=n+t.start_after;return r<i?-1:r>i?1:0}return 0}),h.forEach(function(e,t){var a=g.findIndex(function(t){return t[1]>=e.patients});if(-1!==a){var n=a+e.start_after,r=e.duration,i=v[n],l=void 0;if(i){l=i[2];var o=T[n];void 0!==o&&(r=o)}if(i&&!l){for(var s=[],u=0;u<r;u+=1)s.push([i[0]+u,i[1],"pause"]);v.splice.apply(v,[n,0].concat(s)),v.forEach(function(e,t){t>=n+r&&(e[0]+=r)})}var d=g[n];if(d&&!l){for(var c=[],f=0;f<r;f+=1)c.push([d[0]+f,d[1],"pause"]);g.splice.apply(g,[n,0].concat(c)),g.forEach(function(e,t){t>=n+r&&(e[0]+=r)})}}})}return g}Object.defineProperty(t,"__esModule",{value:!0}),t.getEnrolmentRateWithType4EventsApplied=r,t.default=i;var l=a(110),o=a(46)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(46),r=function(e,t,a,r,i,l,o){return e.map(function(e,s){var u=+i,d=+l;return o?(t.forEach(function(e){if(s>=e.startWeek&&s<=e.endWeek){var t=e.operation_value*u/100;e.operation===n.OPERATION_TYPE.INCREASE_BY?u-=t:e.operation===n.OPERATION_TYPE.DECREASE_BY&&(u+=t)}}),a.forEach(function(e){if(s>=e.startWeek&&s<=e.endWeek){var t=e.operation_value*d/100;e.operation===n.OPERATION_TYPE.INCREASE_BY?d+=t:e.operation===n.OPERATION_TYPE.DECREASE_BY&&(d-=t)}}),r.forEach(function(e){s>=e.startWeek&&s<e.endWeek&&(d=0)}),e*(d/(1-u))):(t.forEach(function(e){if(s>e.startWeek&&s<=e.endWeek){var t=e.operation_value*u/100;e.operation===n.OPERATION_TYPE.INCREASE_BY?u-=t:e.operation===n.OPERATION_TYPE.DECREASE_BY&&(u+=t)}}),a.forEach(function(e){if(s>e.startWeek&&s<=e.endWeek){var t=e.operation_value*d/100;e.operation===n.OPERATION_TYPE.INCREASE_BY?d+=t:e.operation===n.OPERATION_TYPE.DECREASE_BY&&(d-=t)}}),r.forEach(function(e){s>e.startWeek&&s<=e.endWeek&&(d=0)}),e*(d/(1-u)))})};t.default=r},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e){var t=e.countryScreeningRate,a=e.nPatients,r=e.SF,l=e.fpfvInd,o=[],s=Math.max.apply(Math,n(t));if(s&&0!==s){var u=void 0,d=0,c=a/(1-r);do{u=void 0!==t[d]?t[d]:s,0!==d&&(l===d+1&&(u+=1),u+=o[o.length-1][1]),o.push([d+1,u>c?c:u]),d+=1}while(u<=c&&o.length<i.MAX_CURVE_LENGTH)}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=a(110)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,i){try{var l=t[r](i),o=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}return n("next")})}}function o(e){return e.platform_country_id?e.platform_country_id:e.region_name+"-unspecified"}Object.defineProperty(t,"__esModule",{value:!0}),t.getImpactScenarioData=t.getCohortActuals=t.getActuals=void 0;var s=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){var e=l(regeneratorRuntime.mark(function e(t,a,n,r,i,l){var o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(0,b.default)(n,"auth.user.id"),!(s=n.cache[a])||i){e.next=4;break}return e.abrupt("return",s);case 4:return e.next=6,(0,L.fetchApiNative)(""+B.GET_SCENARIO.replace(/:studyId/,t).replace(/:scenarioId/,a),"GET",{allConstraints:l},o);case 6:return s=e.sent,!s||s.status!==z.SCENARIO_STATUS.APPROVED&&s.status!==z.SCENARIO_STATUS.PREV_APPROVED||r({type:Y.ADD_SCENARIO_TO_CACHE,scenarioId:a,payload:(0,O.default)(s)}),e.abrupt("return",s);case 9:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,i,l){return e.apply(this,arguments)}}(),c=function(){var e=l(regeneratorRuntime.mark(function e(t,a,n,r){var i,l,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.study[t]){e.next=2;break}return e.abrupt("return",a.study[t]);case 2:return i=a.auth&&a.auth.user&&a.auth.user.id,l=n?B.STUDY_BY_ID:B.PLAIN_STUDY_BY_ID,e.next=6,(0,L.fetchApiNative)(l.replace(/:id/,t),"GET",null,i);case 6:if(!(o=e.sent)){e.next=12;break}return e.next=10,Promise.all(o.scenarios.map(function(e){return(0,L.fetchApiNative)(""+B.GET_SCENARIO.replace(/:studyId/,t).replace(/:scenarioId/,e.id),"GET",{allConstraints:!1},i)}));case 10:(s=e.sent)&&(r({type:"SUCCESS_"+Y.GET_STUDY_BY_ID,payload:u({},o,{scenarios:s}),isArchivedScenarios:!1}),(0,j.calcScenarioMilestones)(t,s.filter(function(e){return!e.approved_data_snapshot}),r,!1,!0));case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),f=function(){var e=l(regeneratorRuntime.mark(function e(t,a,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.auth&&a.auth.user&&a.auth.user.id,!((i=a.historical.data[t.id])&&i.linkedHistoricalStudies&&(0,I.default)(i.linkedHistoricalStudies,t.historical_references))){e.next=4;break}return e.abrupt("return",i);case 4:return e.prev=4,e.next=7,(0,L.fetchApiNative)(""+B.HISTORICAL_DATA.replace(/:studyId/,t.id),"GET",null,r);case 7:return i=e.sent,n({type:"SUCCESS_"+Y.GET_HISTORICAL_DATA,studyId:t.id,payload:u({},i,{linkedHistoricalStudies:t.historical_references})}),e.abrupt("return",i);case 12:return e.prev=12,e.t0=e.catch(4),n({type:"FAILED_"+Y.GET_HISTORICAL_DATA,studyId:t.id,error:e.t0,payload:{}}),e.abrupt("return",null);case 16:case"end":return e.stop()}},e,this,[[4,12]])}));return function(t,a,n){return e.apply(this,arguments)}}(),p=t.getActuals=function(){var e=l(regeneratorRuntime.mark(function e(t,a,n,r,i,l){var o,s,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.actuals[r]||{},s=[],l.filter(function(e){return"number"==typeof e}).forEach(function(e){o[e]||(s[s.length]=e)}),d={},!s.length&&0!==l.length){e.next=9;break}return e.next=7,(0,L.fetchApiNative)(B.FETCH_ACTUALS_DATA_BY_COUNTRIES_IDS.replace(/:id/,r),"POST",{countriesIds:s,studyId:i.study_id,startDate:i.fp},n);case 7:d=e.sent,a({type:"SUCCESS_"+Y.FETCH_ACTUALS_DATA,studyId:r,payload:d});case 9:return e.abrupt("return",u({},o,d));case 10:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,i,l){return e.apply(this,arguments)}}(),h=t.getCohortActuals=function(){var e=l(regeneratorRuntime.mark(function e(t,a,n,l,o,s,d,c){var f,p,h,v,m,_,E,g,y,S,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f={},p={},!c){e.next=14;break}if(h=t.actuals[l]||i({},c,{}),v=[],m=(0,P.default)([].concat(r(s),r(Object.keys(h[c]).map(function(e){return+e})))),m.forEach(function(e){var t=h[c][e];t?f[e]=t:v[v.length]=e}),!v.length&&m.length){e.next=14;break}return e.next=10,(0,L.fetchApiNative)(B.FETCH_ACTUALS_DATA_BY_COUNTRIES_IDS.replace(/:id/,l),"POST",{countriesIds:v,studyId:o.study_id,startDate:o.fp,cohortName:c},n);case 10:p=e.sent,_=i({},c,{}),Object.keys(p).forEach(function(e){_[c][e]=p[e]}),a({type:"SUCCESS_"+Y.FETCH_ACTUALS_DATA,studyId:l,payload:_});case 14:if(E={},g=t.aggregatedActuals[l]||{},y=[],s.forEach(function(e){var t=g[e];t?E[e]=t:y[y.length]=e}),S={},!y.length){e.next=26;break}return e.next=22,(0,L.fetchApiNative)(B.FETCH_AGGREGATED_ACTUALS_DATA_BY_COUNTRIES_IDS.replace(/:id/,l),"POST",{countriesIds:y,studyId:o.study_id,startDate:o.fp,cohortName:null},n);case 22:S=e.sent,b={},Object.keys(S).forEach(function(e){b[e]=S[e]}),a({type:"SUCCESS_"+Y.FETCH_AGGREGATED_ACTUALS_DATA,studyId:l,payload:b});case 26:return e.abrupt("return",{actuals:u({},f,p),aggregatedActuals:u({},E,S)});case 27:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,i,l,o,s){return e.apply(this,arguments)}}(),v=function(){var e=l(regeneratorRuntime.mark(function e(t,a,n,i,l,s,c,f){var h,v,m,_,E,g,S,b,C,O,T,A,I,w,D,P,M;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h={},v=s.source_scenario_id,m=l.scenarios.find(function(e){return e.status===z.SCENARIO_STATUS.APPROVED}),v&&m&&(v=m.id),_="IMPACT"===s.origin,E=v||_,e.next=8,p(t,a,n,i,l,c);case 8:if(g=e.sent,S=null,!v){e.next=16;break}return e.next=13,d(i,v,t,a,f);case 13:S=e.sent,e.next=20;break;case 16:if(!_){e.next=20;break}return e.next=19,(0,L.fetchApiNative)(B.GET_IMPACT_SCENARIO.replace(/:id/,i),"GET",null,n);case 19:S=e.sent;case 20:E&&S?(b=(0,x.prepareScenarioObject)(S),C=(0,x.prepareScenarioCountriesObject)(b,_),O=C.reduce(function(e,t){var a=e;return a[o(t)]=u({},(0,y.default)(t,z.COUNTRY_DATA_FIELDS),(0,y.default)(t,z.COUNTRY_COMMON_FIELDS)),a},{}),s.adjusted_createdAt=s.createdAt,s.adjusted_events=s.events,s.events=b.events,s.approved_data_snapshot=b.approved_data_snapshot,s.fromPrevApproved=b.status===z.SCENARIO_STATUS.PREV_APPROVED,T=(0,x.prepareScenarioObject)(s),A=(0,x.prepareScenarioCountriesObject)(T,!1),I=A.reduce(function(e,t){var a=e,n={},r=(0,y.default)(t,z.COUNTRY_DATA_FIELDS);return Object.keys(r).forEach(function(e){n["adjusted_"+e]=r[e]}),a[o(t)]=u({},n,(0,y.default)(t,z.COUNTRY_COMMON_FIELDS)),a[o(t)].onlyActuals=null,a[o(t)].ignoreAdjustedData=null,a},{}),[].concat(r(Object.keys(O)),r(Object.keys(I)),r(c)).forEach(function(e){var t=O[e],a=I[e];!t&&a&&(a.ignoreGenericData=!0),t&&!a&&(t.ignoreAdjustedData=!0),h[e]=u({},t,a)})):(w=(0,x.prepareScenarioObject)(s),D=(0,x.prepareScenarioCountriesObject)(w,_),P=D.reduce(function(e,t){var a=e;return a[o(t)]=u({},(0,y.default)(t,z.COUNTRY_DATA_FIELDS),(0,y.default)(t,z.COUNTRY_COMMON_FIELDS)),a},{}),c.forEach(function(e){h[e]=u({},P[e])}));try{M=(0,N.default)(Object.keys(h),Object.keys(g)),(0,R.default)(g)||M.forEach(function(e){var t=(0,k.default)(g[e]||{});h[e]=u({},h[e],g[e],t)})}catch(e){console.error(e)}return e.abrupt("return",h);case 23:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,i,l,o,s){return e.apply(this,arguments)}}(),m=function(){var e=l(regeneratorRuntime.mark(function e(t,a){var n,r,i,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},r=(0,x.prepareScenarioObject)(t),i=(0,x.prepareScenarioCountriesObject)(r,!1),l=i.reduce(function(e,t){var a=e;return a[o(t)]=(0,y.default)(t,z.COUNTRY_DATA_FIELDS),a},{}),a.forEach(function(e){n[e]=u({},l[e])}),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),_=function(){var e=l(regeneratorRuntime.mark(function e(t,a,n,i,s,d,c,f,p){var v=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(d.cohorts.map(function(){var e=l(regeneratorRuntime.mark(function e(l){var m,_,E,g,S,C,O,T,A,I,w,D,P,L,M,j;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m=l,_=m.name,E=d.id,g=m.countries.map(function(e){return o(e)}).filter(function(e){return e}),S={},C={},O={},!(T=s.state.status===G.default.ACTIVE)){e.next=14;break}return e.next=11,h(t,a,n,i,s,g,E,_);case 11:A=e.sent,C=A.actuals,O=A.aggregatedActuals;case 14:return m.aggregatedActuals=[].concat(r(Object.values(O))),c?(I=c.cohorts.find(function(e){return e.name===m.name}),w=I&&I.countries||[],D=w.reduce(function(e,t){var a=e;return a[o(t)]=(0,y.default)(t,z.COUNTRY_DATA_FIELDS),a},{}),m.adjusted_createdAt=d.createdAt,m.adjusted_events=m.events,m.fromPrevApproved=c.status===z.SCENARIO_STATUS.PREV_APPROVED,P=m.countries,L=P.reduce(function(e,t){var a=e,n={},r=(0,y.default)(t,z.COUNTRY_DATA_FIELDS);return Object.keys(r).forEach(function(e){n["adjusted_"+e]=r[e]}),a[o(t)]=n,a[o(t)].onlyActuals=null,a[o(t)].ignoreAdjustedData=null,a},{}),[].concat(r(Object.keys(D)),r(Object.keys(L)),r(g)).forEach(function(e){var t=D[e],a=L[e];!t&&a&&(a.ignoreGenericData=!0),t&&!a&&(t.ignoreAdjustedData=!0),S[e]=u({},t,a)})):(M=m.countries.reduce(function(e,t){var a=e;return a[o(t)]=(0,y.default)(t,z.COUNTRY_DATA_FIELDS),a},{}),g.forEach(function(e){S[e]=u({},M[e])})),j=(0,N.default)(Object.keys(S),Object.keys(C)),(0,R.default)(C)||j.forEach(function(e){var t=(0,k.default)(C[e]||{});S[e]=u({},S[e],C[e],t)}),m.countries=j.map(function(e){var t=S[e],a=void 0;if(t.ignoreAdjustedData)a=t;else if(!(a=m.countries.find(function(t){if(t.platform_country_id)return+t.platform_country_id==+e;if("string"==typeof e&&e.indexOf("-")>-1){var a=e.split("-"),n=a[0];return t.region_name===n&&"Unspecified country"===t.country_name}return!1}))){var n=p.find(function(t){return+t.platform_country_id==+e});n&&(a=(0,x.getNewCountryObject)(n.country_name,n.region_name,n.region_id,n.hasSingleCountry),a.platform_country_id=n.platform_country_id,a.onlyActuals=!0,a.ignoreAdjustedData=!0,a.ignoreGenericData=!0)}if(!a)return null;var r=o(a),i=S[r],l=(0,y.default)(a,z.COUNTRY_COMMON_FIELDS),s=(0,b.default)(f,"historicalDataByStudy["+r+"]",null),d=(0,b.default)(f,"historicalDataByIndication["+r+"]",null);return u({},i,l,{id:a.country_id,historical_reference_data_by_studies:s,historical_reference_data_by_indication:d})}),e.abrupt("return",m);case 20:case"end":return e.stop()}},e,v)}));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,i,l,o,s,u){return e.apply(this,arguments)}}(),E=function(){var e=l(regeneratorRuntime.mark(function e(t,a,n,i,l,p,h,E,g){var S,C,O,T,R,A,I,w,N,D,P,L,M,k,j,V;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E&&l({type:Y.CLEAR_SCENARIO_CACHE}),e.next=4,Promise.all([d(t,a,i,l,h,g),c(t,i,p,l),(0,F.fetchPlatformRegions)(i,l)]);case 4:if(S=e.sent,C=s(S,3),O=C[0],T=C[1],R=C[2],A=R.reduce(function(e,t){var a=t,n=a.countries.map(function(e){return{platform_country_id:e.id,country_name:e.name,region_name:a.name,region_id:e.region_id,hasSingleCountry:1===a.countries.length}});return[].concat(r(e),r(n))},[]),I=T.state.status===G.default.ACTIVE,w=O.cohorts&&O.cohorts.length>0,N={},I){e.next=17;break}return e.next=16,f(T,i,l);case 16:N=e.sent;case 17:if(w){e.next=33;break}if(D={},P=O.countries.map(function(e){return o(e)}).filter(function(e){return e}),!I){e.next=26;break}return e.next=23,v(i,l,n,t,T,O,P,h);case 23:D=e.sent,e.next=29;break;case 26:return e.next=28,m(O,P);case 28:D=e.sent;case 29:L=Object.keys(D),O.countries=L.map(function(e){var t=D[e],a=void 0;if(t.ignoreAdjustedData)a=t;else if(!(a=O.countries.find(function(t){if(t.platform_country_id)return+t.platform_country_id==+e;if("string"==typeof e&&e.indexOf("-")>-1){var a=e.split("-"),n=a[0];return t.region_name===n&&"Unspecified country"===t.country_name}return!1}))){var n=A.find(function(t){return+t.platform_country_id==+e});n&&(a=(0,x.getNewCountryObject)(n.country_name,n.region_name,n.region_id,n.hasSingleCountry),a.platform_country_id=n.platform_country_id,a.onlyActuals=!0,a.ignoreAdjustedData=!0,a.ignoreGenericData=!0)}if(!a)return null;var r=o(a),i=D[r],l=(0,y.default)(a,z.COUNTRY_COMMON_FIELDS),s=(0,b.default)(N,"historicalDataByStudy["+r+"]",null),d=(0,b.default)(N,"historicalDataByIndication["+r+"]",null);return u({},l,i,{id:a.country_id,historical_reference_data_by_studies:s,historical_reference_data_by_indication:d})}),e.next=49;break;case 33:if(M=O.source_scenario_id,k=T.scenarios.find(function(e){return e.status===z.SCENARIO_STATUS.APPROVED}),k&&M&&(M=k.id),j=null,!M){e.next=46;break}return e.next=40,d(t,M,i,l);case 40:j=e.sent,O.adjusted_createdAt=O.createdAt,O.adjusted_events=O.events,O.events=j.events,O.approved_data_snapshot=j.approved_data_snapshot,O.fromPrevApproved=j.status===z.SCENARIO_STATUS.PREV_APPROVED;case 46:return e.next=48,_(i,l,n,t,T,O,j,N,A);case 48:O.cohorts=e.sent;case 49:return O.countries=O.countries.filter(function(e){return e}),O.aggregatedHistoricalDataByStudy=(0,b.default)(N,"aggregatedHistoricalDataByStudy"),O.aggregatedHistoricalDataByIndication=(0,b.default)(N,"aggregatedHistoricalDataByIndication"),V=(0,x.prepareScenarioObject)(O),V.countries=(0,x.prepareScenarioCountriesObject)(O,"IMPACT"===O.origin),V.studyParamsWarning=(0,W.getStudyParamsWarning)(T,O),e.abrupt("return",{scenario:V,study:T});case 58:throw e.prev=58,e.t0=e.catch(0),console.error(e.t0),l((0,U.internalServerError)("Failed to fetch scenario data")),new Error("Failed to fetch scenario data");case 63:case"end":return e.stop()}},e,this,[[0,58]])}));return function(t,a,n,r,i,l,o,s,u){return e.apply(this,arguments)}}(),g=(t.getImpactScenarioData=function(){var e=l(regeneratorRuntime.mark(function e(t,a,n,r,i){var l,o,u,d,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,L.fetchApiNative)(""+B.GET_IMPACT_SCENARIO.replace(/:id/,t),"GET",null,n),c(t,r,!1,i)]);case 2:return l=e.sent,o=s(l,2),u=o[0],d=o[1],f=(0,x.prepareScenarioObject)(u),f.countries=(0,x.prepareScenarioCountriesObject)(u,!0),e.abrupt("return",{scenario:f,study:d});case 9:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,i){return e.apply(this,arguments)}}(),a(54)),y=n(g),S=a(12),b=n(S),C=a(40),O=n(C),T=a(220),R=n(T),A=a(45),I=n(A),w=a(1793),N=n(w),D=a(180),P=n(D),L=a(48),M=a(518),k=n(M),x=a(8),j=a(515),F=a(516),U=a(131),V=a(50),B=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(V),H=a(20),G=n(H),Y=a(13),z=a(10),W=a(52);t.default=E},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n=a(1455);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1528);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},,,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FlexItem=t.FlexBox=void 0;var r=a(835),i=n(r),l=a(837),o=n(l);t.default={FlexBox:i.default,FlexItem:o.default},t.FlexBox=i.default,t.FlexItem=o.default},function(e,t,a){"use strict";function n(){return function(e){return e((0,o.fetchApi)(u.APPLICATION_METADATA,{type:s.GET_APPLICATION_METADATA}))}}function r(e,t){return function(a){return a((0,l.push)("/studies/"+e+(t?"/archived":"")))}}function i(e,t,a,n){return function(r){return r((0,o.fetchApi)(u.USER_DETAILS.replace(":userId",n),{type:s.GET_USER_DETAILS,studyId:e,scenarioId:t,overrideId:a}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,t.navigateToStudy=r,t.getUserDetailsById=i;var l=a(19),o=a(48),s=a(13),u=a(50)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d);a(2144);var f=function(e){function t(){var e,a,n,l;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={hasError:!1},l=a,i(n,l)}return l(t,e),o(t,[{key:"componentDidCatch",value:function(e,t){console.log(e,t,this.state.error)}},{key:"render",value:function(){var e=this.state.hasError,t=this.props,a=t.hidden,n=t.message;return e&&a?null:e?u.default.createElement("div",{className:"error-boundary-message",title:n},n):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),t}(u.default.PureComponent);f.defaultProps={hidden:!1,message:"Error rendering component"},f.propTypes={children:c.default.node.isRequired,hidden:c.default.bool,message:c.default.string},t.default=u.default.memo(f)},,,,,function(e,t,a){var n=a(1454);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},,,function(e,t,a){"use strict";function n(){return function(e){return e((0,u.fetchApi)(s.GET_USER,l.LOGIN,"GET")).then(function(){var t=i.history.getCurrentLocation(),a=""+t.pathname+t.search;e((0,r.push)(a))}).catch(function(e){return e})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=a(19),i=a(243),l=a(13),o=a(50),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(o),u=a(48)},function(e,t,a){"use strict";function n(e,t){return function(a){return a((0,h.fetchApi)(m.SCENARIO_EVENTS.replace(/:scenarioId/,e).replace(/:studyId/,t),{type:v.GET_SCENARIO_EVENTS,scenarioId:e}))}}function r(e,t,a){return function(n){return n((0,h.fetchApi)(m.SCENARIO_COHORT_EVENTS.replace(/:scenarioId/,e).replace(/:cohortId/,a).replace(/:studyId/,t),{type:v.GET_SCENARIO_EVENTS,scenarioId:e}))}}function i(e,t,a){return function(n){return n((0,h.fetchApi)(m.APPLY_SCENARIO_COHORT_EVENTS.replace(/:scenarioId/,e).replace(/:cohortId/,t),{type:v.APPLY_SCENARIO_EVENTS_CHANGES,scenarioId:e},"POST",{eventsList:a}))}}function l(e,t,a){return function(n){return n((0,h.fetchApi)(m.APPLY_SCENARIO_EVENTS.replace(/:scenarioId/,t),{type:v.UPDATE_SCENARIO,studyId:e,scenarioId:t,refreshScenarioCache:!0},"POST",{eventsList:a}))}}function o(e,t,a){return function(n){return n((0,h.fetchApi)(m.APPLY_DISABLE_EVENT_API.replace(/:scenarioId/,e).replace(/:eventId/,t).replace(/:isDisabled/,a?"disable":"enable"),{type:v.APPLY_DISABLE_EVENT,scenarioId:e,eventId:t,isDisabled:a},"PUT"))}}function s(e,t){return{type:v.ADD_NEW_EVENT,scenarioId:e,payload:t}}function u(e,t,a,n){return{type:v.UPDATE_EVENT,scenarioId:e,id:t,field:a,value:n}}function d(e,t,a){return{type:v.DUPLICATE_EVENT,scenarioId:e,id:t,defaultValues:a}}function c(e,t){return{type:v.REMOVE_EVENT,scenarioId:e,id:t}}function f(e,t){return{type:v.SORT_EVENTS,scenarioId:e,field:"start_date",sortOrder:t}}function p(){return{type:v.TOGGLE_GROUP_EVENTS_BY_TYPE}}Object.defineProperty(t,"__esModule",{value:!0}),t.getScenarioEvents=n,t.getScenarioCohortEvents=r,t.applyScenarioCohortEventsChanges=i,t.applyScenarioEventsChanges=l,t.disableEvent=o,t.addNewEvent=s,t.updateEvent=u,t.duplicateEvent=d,t.removeEvent=c,t.sortEventsByStartDate=f,t.toggleGroupEventsByType=p;var h=a(48),v=a(13),m=a(50)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(776),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(777),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(780),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),h=a(56),v=n(h);a(2126);var m=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.toggleCheckboxChange=a.toggleCheckboxChange.bind(a),a.inputId=v.default.generate(),a.state={isChecked:e.checked},a}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({isChecked:e.checked}),e.autoFocus&&this.checkbox.focus()}},{key:"shouldComponentUpdate",value:function(e,t){return t.isChecked||t.isChecked!==this.state.isChecked||e.disabled!==this.props.disabled}},{key:"toggleCheckboxChange",value:function(){var e=this,t=this.props.onChange;this.setState({isChecked:!this.state.isChecked},function(){t(e.state.isChecked)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.disabled,r=t.name,i=t.customLabel,l=this.state.isChecked,o=(0,p.default)("fpo-checkbox",{"fpo-checkbox-checked":l},{"fpo-checkbox-disabled":n});return u.default.createElement("div",{className:o},u.default.createElement("input",{ref:function(t){e.checkbox=t},id:this.inputId,disabled:n,checked:l,type:"checkbox",name:r,tabIndex:this.props.tabInd,onChange:this.toggleCheckboxChange}),u.default.createElement("label",{htmlFor:this.inputId,title:a},u.default.createElement("span",null,u.default.createElement("span",null,u.default.createElement("span",{className:"checked-icon"},u.default.createElement("svg",{width:"10px",height:"13px",viewBox:"0 0 10 13",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},u.default.createElement("g",{transform:"translate(-7.000000, -6.000000)"},u.default.createElement("path",{d:"M17,18.1 L7,18.1 L7,16.1 L17,16.1 L17,18.1 Z M10.3,14.1 L7,10.8 L8.4,9.4 L10.3,11.3\n                      L15.6,6 L17,7.4 L10.3,14.1 Z"})))))),u.default.createElement("span",{className:"label"},i||a)))}}]),t}(s.Component);m.defaultProps={checked:!1,disabled:!1,name:"checkbox",tabInd:-1,autoFocus:!1,customLabel:null},m.propTypes={autoFocus:c.default.bool,checked:c.default.bool,disabled:c.default.bool,label:c.default.string.isRequired,name:c.default.string,onChange:c.default.func.isRequired,tabInd:c.default.number,customLabel:c.default.node},t.default=m},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(11),u=n(s),d=a(2),c=n(d),f=a(654),p=n(f),h=a(6),v=n(h),m=a(17),_=a(467),E=n(_),g=a(14),y=n(g),S=a(10),b=a(197),C=n(b),O=a(241);a(727);var T=function(e){var t=e.isTitle,a=e.graphElement,n=e.scenarioNumber,r=e.activeFilter,l=e.dataRow,o=e.scenarioEndDate,s=e.setSrRrViewType,u=e.srRrViewType,d=S.SCENARIO_DATA_TYPE.REGION,f="",h="",_=!1,g=!1,b=0,T=0,R=null,A=null,I=null,w=null;if(l){R=l["25_si"]?l["25_si"].format("DD MMM YY"):null,A=l["50_si"]?l["50_si"].format("DD MMM YY"):null,I=l.sas?Math.round(100*l.sas)+"%":null,w=l.screening_failure?Math.round(100*l.screening_failure)+"%":null,d=l.type,b=l.patient_allocation,T=l.num_sites;var N=(0,O.getPredictedDate)(l);h=N?N.format("DD MMM YY"):"",(Object.values(C.default).slice(0,3).includes(r)||r===C.default.RANDOMISATION)&&(_=l.lpft&&l.lpft.isSameOrBefore(o),g=l.lpft&&l.lpft.isAfter(o)),f=d===S.SCENARIO_DATA_TYPE.ROLLUP?"Global":l.location,f.indexOf("Unspecified country")>=0&&(f=f.substring(0,f.indexOf("("))),l.isRegionCountry||d===S.SCENARIO_DATA_TYPE.COUNTRY||(f=i.default.createElement(y.default,{mouseEnterDelay:.5,overlay:d===S.SCENARIO_DATA_TYPE.ROLLUP?"In total scenario includes "+l.amount_countries+" "+(0,p.default)("country",l.amount_countries):"Region includes "+l.amount_countries+" "+(0,p.default)("country",l.amount_countries)},i.default.createElement("div",{className:"location__label"},f," (",l.amount_countries,")")))}var D=function(){return i.default.createElement(y.default,{overlayClassName:"compare-milestones__sr-rr-tooltip",align:{offset:[12,5]},overlay:i.default.createElement("span",{onClick:function(e){return s&&s(e.target.innerText)}},"SR"===u?"RR":"SR")},i.default.createElement("div",null,u))},P=null,L=null;switch(r){case C.default.START_UP:P=i.default.createElement(m.Col,{width:2,style:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end"}},i.default.createElement("div",{className:"compare-milestones-cell-right start-up"},i.default.createElement("div",null,t?"25%SI":R),i.default.createElement("div",null,t?"50%SI":A),i.default.createElement("div",null,t?"SAS%":I)));break;case C.default.SCREENING:l&&(L=i.default.createElement("div",null,(+l["SR"===u?"sr":"randomisation_rate"]).toFixed(2))),P=i.default.createElement(m.Col,{width:2,className:"compare-milestones-cell-right enrolment"},i.default.createElement("div",null,t?i.default.createElement(v.default,{name:"SITES"}):T),i.default.createElement("div",{style:{paddingBottom:t?"8px":""}},t?i.default.createElement(v.default,{name:"VISITORS"}):b),i.default.createElement("div",null,t?"SF%":w),t?i.default.createElement(D,null):L);break;default:P=i.default.createElement(m.Col,{width:2,className:"compare-milestones-cell-right"},i.default.createElement("div",{className:(0,c.default)("dataCell",{green:_,red:g})},t?"P/LPFT":h),i.default.createElement("div",{className:"dataCell"},t?i.default.createElement(v.default,{name:"SITES"}):T),i.default.createElement("div",{className:"dataCell",style:{paddingBottom:t?"8px":""}},t?i.default.createElement(v.default,{name:"VISITORS"}):b))}return i.default.createElement(m.Row,{className:(0,c.default)("compare-milestones-view-row",{"header-row":t},{rollup:d===S.SCENARIO_DATA_TYPE.ROLLUP,country:d===S.SCENARIO_DATA_TYPE.COUNTRY&&!l.isRegionCountry})},i.default.createElement(m.Col,{width:1},d===S.SCENARIO_DATA_TYPE.ROLLUP?i.default.createElement(E.default,{scenarioNumber:n}):i.default.createElement("span",null)),i.default.createElement(m.Col,{width:2,style:{paddingRight:"30px"}},i.default.createElement("div",{className:"dataCell"},f)),i.default.createElement(m.Col,{width:7}," ",a),P)};T.propTypes={activeFilter:o.default.string,isTitle:o.default.bool,graphElement:o.default.element,dataRow:o.default.object,scenarioEndDate:o.default.instanceOf(u.default),scenarioNumber:o.default.number,srRrViewType:o.default.string,setSrRrViewType:o.default.func},T.defaultProps={isTitle:!1,graphElement:null,dataRow:null,scenarioEndDate:null,activeFilter:C.default.LPFT_ALL,scenarioNumber:null,srRrViewType:"",setSrRrViewType:void 0},t.default=T},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(793),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(797),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MIN_YEAR=1900,t.MAX_YEAR=2100,t.DATE_FORMAT="D MMM YY",t.DATE_FORMAT_RE=/^[0-9]{1,2}\s[a-zA-Z]{3}\s[0-9]{2,4}$/,t.MONTHS=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],t.ENTER_KEY="Enter",t.STATUS_ERROR="error"},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(65),h=n(p),v=a(2),m=n(v),_=a(11),E=n(_),g=a(6),y=a(27),S=n(y),b=a(84),C=n(b),O=a(473),T=n(O),R=a(74),A=n(R),I=a(198),w=a(46),N=a(10),D=a(77),P=a(8);a(307);var L=function(e){function t(e){i(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=[];return e.event&&e.event.locations&&e.locations&&(n=(0,D.prepareLocationsData)(e.event,e.locations,e.scenario)),a.state={locations:n,showLocationsPanel:!1},a.handleClickOutside=a.handleClickOutside.bind(a),a.toggleLocationsPanel=a.toggleLocationsPanel.bind(a),a.setInputFocused=a.setInputFocused.bind(a),a}return o(t,e),s(t,[{key:"setInputFocused",value:function(e){this.setState(r({},e,!this.state[e]))}},{key:"handleClickOutside",value:function(){this.state.showLocationsPanel&&this.toggleLocationsPanel()}},{key:"toggleLocationsPanel",value:function(){this.setState({showLocationsPanel:!this.state.showLocationsPanel})}},{key:"render",value:function(){var e=this.props,t=e.event,a=e.onUpdate,n=e.scenario,r=e.isTracking,i=e.isAdjusted,l=e.isDisabled,o=this.state,s=o.showLocationsPanel,u=o.locations;if(!t||!u||0===u.length||!n)return null;var c=l||n.status===N.SCENARIO_STATUS.APPROVED||r&&(t.status===w.EVENT_STATUS.COMPLETED&&i||!i),f=c||t.status===w.EVENT_STATUS.ACTIVE&&r&&i,p=(0,m.default)("location-selector__content-wrapper",{visible:s}),h=[];t.locations.forEach(function(e){var t=e.name;if(!e.isCountryRegion&&!e.hasSingleCountry){var a=u.find(function(t){return t.name===e.name}).countries.length;t+=" (",t+=e.countries.length===a?"All":e.countries.length,t+=")"}h.push(t)});var v=(0,P.getMomentDate)(n.fp),_=(0,P.getMomentDate)(n.fp).add(20,"y"),y=(0,P.getMomentDate)(n.end_date)>_?(0,P.getMomentDate)(n.end_date):_;return d.default.createElement("div",{className:"event-details-component__content"},d.default.createElement("div",{className:"event-details-component__element-wrapper",style:{width:"180px"}},d.default.createElement("div",{className:"element-wrapper__label",style:{paddingBottom:"8px"}},"Event name"),d.default.createElement(S.default,{status:""===t.name?"error":null,disabled:c,placeholder:"Add short, clear name",onBlur:function(e){return t.name!==e.target.value&&a(t.id,"name",e.target.value)},value:t.name})),d.default.createElement("div",{className:"event-details-component__element-wrapper"},d.default.createElement("div",{className:"element-wrapper__label"},"Start-End date"),d.default.createElement("div",{className:"element-wrapper__content"},d.default.createElement(C.default,{status:t.start_date&&(0,P.getMomentDate)(t.start_date).isSameOrAfter(n.fp)&&(0,P.getMomentDate)(t.start_date).isSameOrBefore(y)?null:"error",disabled:f,defaultDate:(0,P.getMomentDate)(n.fp),filterDate:function(e){return v?e>=v:e>=(0,E.default)()},maxDate:t.end_date?(0,P.getMomentDate)(t.end_date):y,selected:t.start_date?(0,P.getMomentDate)(t.start_date):null,onChange:function(e){return a(t.id,"start_date",e)},simpleView:!0}),d.default.createElement("div",{className:"icon-color-grey"},g.Icons.SEPARATOR),d.default.createElement(C.default,{status:t.end_date&&(0,P.getMomentDate)(t.end_date).isSameOrAfter(n.fp)&&(0,P.getMomentDate)(t.end_date).isSameOrBefore(y)?null:"error",disabled:c,defaultDate:t.start_date?(0,P.getMomentDate)(t.start_date).clone().add(1,"d"):(0,P.getMomentDate)(n.fp),filterDate:function(e){return t.start_date?e>=(0,P.getMomentDate)(t.start_date):e>(0,E.default)()},maxDate:y,onChange:function(e){return a(t.id,"end_date",e)},selected:t.end_date?(0,P.getMomentDate)(t.end_date):null,simpleView:!0}))),d.default.createElement("div",{className:"event-details-component__element-wrapper",style:{width:"160px"}},d.default.createElement("div",{className:"element-wrapper__label invisible",style:{paddingBottom:"8px"}},"&nbsp"),d.default.createElement(A.default,{disabled:c,onOptionSelect:function(e){return a(t.id,"operation",e.value)}},d.default.createElement(R.DropdownOption,{label:"Increase by",selected:t.operation===w.OPERATION_TYPE.INCREASE_BY,value:w.OPERATION_TYPE.INCREASE_BY}),d.default.createElement(R.DropdownOption,{label:"Decrease by",selected:t.operation===w.OPERATION_TYPE.DECREASE_BY,value:w.OPERATION_TYPE.DECREASE_BY}))),d.default.createElement(T.default,{id:"operationValue",isDisabled:c,event:t,status:""===t.start_after?"error":null,label:"",placeholder:t.operation_value?t.operation_value+"%":d.default.createElement("span",{className:"placeholder"},"#%"),inputProps:{placeholder:"#%",maxLength:4,type:"number"},onChange:function(e){var n=parseInt(e.target.value,10);t.operation_value!==n&&(n>1e3&&(n=1e3),a(t.id,"operation_value",n))},value:t.operation_value||""}),d.default.createElement("div",{className:"event-details-component__element-wrapper"},d.default.createElement("div",{className:"element-wrapper__label"},"Region/Country"),d.default.createElement("div",{className:(0,m.default)("location-selector__wrapper",{error:!h.length})},d.default.createElement("div",{className:"location-selector__label-wrapper",onClick:c?void 0:this.toggleLocationsPanel},d.default.createElement("div",{className:"control-label"},h.length>0?h.join(", "):d.default.createElement("span",{className:"select-placeholder"},"Select regions/countries")),d.default.createElement("div",{className:"control-icon"},s?g.Icons.CHEVRON_UP:g.Icons.CHEVRON_DOWN)),d.default.createElement("div",{className:p},d.default.createElement(I.EventCountrySelector,{disabled:c,width:290,regionsCountriesList:u,onChange:function(e){return a(t.id,"locations",e)}})))))}}]),t}(d.default.Component);L.defaultProps={locations:[],scenario:null,isTracking:!1,isAdjusted:!1,isDisabled:!1},L.propTypes={event:f.default.object.isRequired,onUpdate:f.default.func.isRequired,locations:f.default.array,scenario:f.default.object,isTracking:f.default.bool,isAdjusted:f.default.bool,isDisabled:f.default.bool},t.default=(0,h.default)(L)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(65),h=n(p),v=a(2),m=n(v),_=a(6),E=a(27),g=n(E),y=a(473),S=n(y),b=a(198),C=a(46),O=a(10),T=a(110),R=a(77),A=a(8);a(307);var I=function(e){function t(e){i(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=[];return e.event&&e.event.locations&&e.locations&&(n=(0,R.prepareLocationsData)(e.event,e.locations,e.scenario)),a.state={locations:n,showLocationsPanel:!1,startAfterFocused:!1,durationFocused:!1},a.handleClickOutside=a.handleClickOutside.bind(a),a.toggleLocationsPanel=a.toggleLocationsPanel.bind(a),a}return o(t,e),s(t,[{key:"handleClickOutside",value:function(){this.state.showLocationsPanel&&this.toggleLocationsPanel()}},{key:"toggleLocationsPanel",value:function(){this.setState({showLocationsPanel:!this.state.showLocationsPanel})}},{key:"render",value:function(){var e=this.props,t=e.event,a=e.onUpdate,n=e.scenario,i=e.isTracking,l=e.isAdjusted,o=e.isDisabled,s=this.state,u=s.showLocationsPanel,c=s.locations;if(!t||!c||0===c.length||!n)return null;var f=o||n.status===O.SCENARIO_STATUS.APPROVED||i&&(t.status===C.EVENT_STATUS.COMPLETED&&l||!l),p=(0,m.default)("location-selector__content-wrapper",{visible:u}),h=(0,A.getMomentDate)(n.end_date).diff((0,A.getMomentDate)(n.fp),"days"),v=h>T.MAX_CALCULATION_PERIOD?h:T.MAX_CALCULATION_PERIOD,E=[],y=[];t.locations.forEach(function(e){var t=e.name;if(!e.isCountryRegion&&!e.hasSingleCountry){var a=c.find(function(t){return t.name===e.name}),n=0;a&&(n=a.countries.length),t+=" (",t+=e.countries.length===n?"All":e.countries.length,t+=")"}E.push(t),y.push.apply(y,r(e.countries.map(function(e){return e.id})))});var R=""!==t.patients,I=Math.min.apply(Math,r(n.countries.filter(function(e){return y.includes(e.country_id)}).map(function(e){return n.source_scenario_id?e.adjusted_patient_allocation:e.patient_allocation})));return t.patients>I&&(R=!1),d.default.createElement("div",{className:"event-details-component__content"},d.default.createElement("div",{className:"event-details-component__element-wrapper",style:{width:"180px"}},d.default.createElement("div",{className:"element-wrapper__label",style:{paddingBottom:"8px"}},"Event name"),d.default.createElement(g.default,{status:""===t.name?"error":null,disabled:f,placeholder:"Add short, clear name",onBlur:function(e){return t.name!==e.target.value&&a(t.id,"name",e.target.value)},value:t.name})),d.default.createElement("div",{className:"event-details-component__element-wrapper",style:{marginLeft:"-4px",width:"80px"}},d.default.createElement("div",{className:"element-wrapper__label",style:{paddingBottom:"8px"}},"Patients"),d.default.createElement(g.default,{status:R?null:"error",type:"number",placeholder:"#",disabled:f,onBlur:function(e){return t.patients!==+e.target.value&&a(t.id,"patients",e.target.value)},value:t.patients})),d.default.createElement(S.default,{id:"startAfter",isDisabled:f,event:t,status:""===t.start_after?"error":null,label:"Start after",inputProps:{placeholder:"#d",type:"number"},placeholder:""!==t.start_after&&t.start_after>=0?t.start_after+"d":d.default.createElement("span",{className:"placeholder"},"#d"),onChange:function(e){return(t.start_after!==parseInt(e.target.value,10)&&parseInt(e.target.value,10)+parseInt(t.duration||0,10)<=v||!e.target.value)&&a(t.id,"start_after",e.target.value.replace(/d$/,""))},value:t.start_after||""}),d.default.createElement(S.default,{id:"duration",isDisabled:f,event:t,status:""===t.duration?"error":null,label:"Duration",inputProps:{placeholder:"#d",type:"number"},placeholder:""!==t.duration&&t.duration>=0?t.duration+"d":d.default.createElement("span",{className:"placeholder"},"#d"),onChange:function(e){return(t.duration!==+e.target.value&&parseInt(e.target.value,10)+parseInt(t.start_after||0,10)<=v||!e.target.value)&&a(t.id,"duration",e.target.value.replace(/d$/,""))},value:t.duration||""}),d.default.createElement("div",{className:"event-details-component__element-wrapper"},d.default.createElement("div",{className:"element-wrapper__label"},"Region/Country"),d.default.createElement("div",{className:(0,m.default)("location-selector__wrapper",{error:!E.length})},d.default.createElement("div",{className:"location-selector__label-wrapper",onClick:f?void 0:this.toggleLocationsPanel},d.default.createElement("div",{className:"control-label"},E.length>0?E.join(", "):d.default.createElement("span",{className:"select-placeholder"},"Select regions/countries")),d.default.createElement("div",{className:"control-icon"},u?_.Icons.CHEVRON_UP:_.Icons.CHEVRON_DOWN)),d.default.createElement("div",{className:p},d.default.createElement(b.EventCountrySelector,{disabled:f,width:290,regionsCountriesList:c,onChange:function(e){return a(t.id,"locations",e)}})))))}}]),t}(d.default.Component);I.defaultProps={locations:[],scenario:null,isTracking:!1,isAdjusted:!1,isDisabled:!1},I.propTypes={event:f.default.object.isRequired,onUpdate:f.default.func.isRequired,locations:f.default.array,scenario:f.default.object,isTracking:f.default.bool,isAdjusted:f.default.bool,isDisabled:f.default.bool},t.default=(0,h.default)(I)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(65),p=n(f),h=a(2),v=n(h),m=a(11),_=n(m),E=a(6),g=a(27),y=n(g),S=a(84),b=n(S),C=a(198),O=a(46),T=a(10),R=a(77),A=a(8);a(307);var I=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=[];return e.event&&e.event.locations&&e.locations&&(n=(0,R.prepareLocationsData)(e.event,e.locations,e.scenario)),a.state={locations:n,showLocationsPanel:!1},a.handleClickOutside=a.handleClickOutside.bind(a),a.toggleLocationsPanel=a.toggleLocationsPanel.bind(a),a}return l(t,e),o(t,[{key:"handleClickOutside",value:function(){this.state.showLocationsPanel&&this.toggleLocationsPanel()}},{key:"toggleLocationsPanel",value:function(){this.setState({showLocationsPanel:!this.state.showLocationsPanel})}},{key:"render",value:function(){var e=this.props,t=e.event,a=e.onUpdate,n=e.scenario,r=e.isTracking,i=e.isAdjusted,l=e.isDisabled,o=this.state,s=o.showLocationsPanel,d=o.locations;if(!t||!d||0===d.length||!n)return null;var c=l||n.status===T.SCENARIO_STATUS.APPROVED||r&&(t.status===O.EVENT_STATUS.COMPLETED&&i||!i),f=c||t.status===O.EVENT_STATUS.ACTIVE&&r&&i,p=(0,v.default)("location-selector__content-wrapper",{visible:s}),h=[];t.locations.forEach(function(e){var t=e.name,a=d.find(function(t){return t.name===e.name});if(!e.isCountryRegion&&!e.hasSingleCountry&&a){var n=a.initialLength;t+=" (",t+=e.countries.length===n?"All":e.countries.length,t+=")"}h.push(t)});var m=(0,A.getMomentDate)(n.fp),g=(0,A.getMomentDate)(n.fp).add(20,"y"),S=(0,A.getMomentDate)(n.end_date)>g?(0,A.getMomentDate)(n.end_date):g;return u.default.createElement("div",{className:"event-details-component__content"},u.default.createElement("div",{className:"event-details-component__element-wrapper",style:{width:"180px"}},u.default.createElement("div",{className:"element-wrapper__label",style:{paddingBottom:"8px"}},"Event name"),u.default.createElement(y.default,{status:""===t.name?"error":null,disabled:c,placeholder:"Add short, clear name",onBlur:function(e){return t.name!==e.target.value&&a(t.id,"name",e.target.value)},value:t.name})),u.default.createElement("div",{className:"event-details-component__element-wrapper"},u.default.createElement("div",{className:"element-wrapper__label"},"Start-End date"),u.default.createElement("div",{className:"element-wrapper__content"},u.default.createElement(b.default,{status:t.start_date&&(0,A.getMomentDate)(t.start_date).isSameOrAfter(n.fp)&&(0,A.getMomentDate)(t.start_date).isSameOrBefore(S)?null:"error",selected:t.start_date?(0,A.getMomentDate)(t.start_date):null,onChange:function(e){return a(t.id,"start_date",e)},defaultDate:(0,A.getMomentDate)(n.fp),filterDate:function(e){return m?e>=m:e>=(0,_.default)()},maxDate:t.end_date?(0,A.getMomentDate)(t.end_date):S,simpleView:!0,disabled:f}),u.default.createElement("div",{className:"icon-color-grey"},E.Icons.SEPARATOR),u.default.createElement(b.default,{status:t.start_date&&(0,A.getMomentDate)(t.start_date).isSameOrAfter(n.fp)&&(0,A.getMomentDate)(t.start_date).isSameOrBefore(S)?null:"error",onChange:function(e){return a(t.id,"end_date",e)},defaultDate:t.start_date?(0,A.getMomentDate)(t.start_date).clone().add(1,"d"):(0,A.getMomentDate)(n.fp),filterDate:function(e){return t.start_date?e>=(0,A.getMomentDate)(t.start_date):e>(0,_.default)()},maxDate:S,selected:t.end_date?(0,A.getMomentDate)(t.end_date):null,disabled:c,simpleView:!0}))),u.default.createElement("div",{className:"event-details-component__element-wrapper"},u.default.createElement("div",{className:"element-wrapper__label"},"Region/Country"),u.default.createElement("div",{className:(0,v.default)("location-selector__wrapper","left-border",{error:!h.length})},u.default.createElement("div",{className:"location-selector__label-wrapper",onClick:c?void 0:this.toggleLocationsPanel},u.default.createElement("div",{className:"control-label"},h.length>0?h.join(", "):u.default.createElement("span",{className:"select-placeholder"},"Select regions/countries")),u.default.createElement("div",{className:"control-icon"},s?E.Icons.CHEVRON_UP:E.Icons.CHEVRON_DOWN)),u.default.createElement("div",{className:p},u.default.createElement(C.EventCountrySelector,{disabled:c,width:290,regionsCountriesList:d,onChange:function(e){return a(t.id,"locations",e)}})))))}}]),t}(u.default.Component);I.defaultProps={locations:[],scenario:null,isTracking:!1,isAdjusted:!1,isDisabled:!1},I.propTypes={event:c.default.object.isRequired,onUpdate:c.default.func.isRequired,locations:c.default.array,scenario:c.default.object,isTracking:c.default.bool,isAdjusted:c.default.bool,isDisabled:c.default.bool},t.default=(0,p.default)(I)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2),h=n(p),v=a(27),m=n(v),_=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={focused:!1},a.setInputFocused=a.setInputFocused.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a}return l(t,e),s(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside)}},{key:"setInputFocused",value:function(){document.addEventListener("click",this.handleClickOutside),this.setState({focused:!0})}},{key:"handleClickOutside",value:function(e){var t=this,a=e.target.closest(".event-details-component__element-wrapper");a&&a.classList.contains(this.props.event.id+"_"+this.props.id)||this.setState({focused:!1},function(){document.removeEventListener("click",t.handleClickOutside)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.isDisabled,n=t.status,r=t.event,i=t.placeholder,l=t.onChange,s=t.id,u=t.value,c=t.label,f=t.inputProps;return d.default.createElement("div",{onClick:function(t){return!a&&e.setInputFocused(t)},className:(0,h.default)("event-details-component__element-wrapper",r.id+"_"+s),style:{marginLeft:"-4px",width:"80px"}},""===c?d.default.createElement("div",{className:"element-wrapper__label invisible",style:{paddingBottom:"8px"}},"&nbsp"):d.default.createElement("div",{className:"element-wrapper__label"},c),this.state.focused?d.default.createElement("div",{style:{marginTop:"0px"}},d.default.createElement(m.default,o({},f,{disabled:a,status:n,autoFocus:this.state.focused,onChange:l,value:u}))):d.default.createElement("div",{className:"event-details-component_input-placeholder"},i))}}]),t}(d.default.Component);_.defaultProps={isDisabled:!1,status:"",value:"",inputProps:null},_.propTypes={inputProps:f.default.object,isDisabled:f.default.bool,status:f.default.string,event:f.default.object.isRequired,placeholder:f.default.node.isRequired,onChange:f.default.func.isRequired,id:f.default.string.isRequired,value:f.default.oneOfType([f.default.string,f.default.number]),label:f.default.string.isRequired},t.default=_},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(828),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(831),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(833),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),h=a(45),v=n(h);a(2155);var m=a(85),_=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleOutsideClick=a.handleOutsideClick.bind(a),a.handleEscPress=a.handleEscPress.bind(a),a}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){e.highlighted?(document.body.addEventListener("click",this.handleOutsideClick),document.body.addEventListener("keydown",this.handleEscPress)):(document.body.removeEventListener("click",this.handleOutsideClick),document.body.removeEventListener("keydown",this.handleEscPress))}},{key:"shouldComponentUpdate",value:function(e){return this.props.highlighted||this.props.highlighted!==e.highlighted||!(0,v.default)(this.props.rowData,e.rowData)||null===this.props.rowData||this.props.lpftViewType!==e.lpftViewType||this.props.historicalFilter!==e.historicalFilter||e.isMultiEditing||e.isMultiEditing!==this.props.isMultiEditing||this.props.isOptimizing!==e.isOptimizing||!(0,v.default)(e.collapsedList,this.props.collapsedList)||this.props.clipboardEmpty!==e.clipboardEmpty}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.handleOutsideClick),document.body.removeEventListener("keydown",this.handleEscPress)}},{key:"handleOutsideClick",value:function(e){var t=e.target.classList?e.target.classList.includes:null;(!t||!t("react-datepicker","filterable-list__item"))&&"calendar"!==e.target.getAttribute("data-element-id")&&!this.row.contains(e.target)&&this.props.highlighted&&this.props.handleOutsideClick(e)}},{key:"handleEscPress",value:function(e){"Escape"===e.key&&this.props.handleOutsideClick(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.rowHeight,n=t.children,r=t.onRowClick,i=t.onRowDoubleClick,l=t.rowIndex,o=t.highlightOnHover,s=t.cursorAsPointer,d=t.errorRow,c=t.isEditable,f=t.rowData,h=t.highlighted,v=(0,p.default)({"flex-table__row_clickable":i||r,highlight:c&&o&&!d,errorRow:d,errorRowHover:d&&c,"cursor-as-pointer":c&&s,"multi-edit-row":f&&"multiediting"===f.type,highlighted:h});return u.default.createElement("div",{ref:function(t){e.row=t},className:"flex-table__row "+v,"data-test":"flex-table-row",style:{height:a+"px"},onClick:r?function(e){r(e,l)}:null,onDoubleClick:i?function(e){i(e,l)}:null},n)}}]),t}(s.Component);_.propTypes={children:c.default.node.isRequired,cursorAsPointer:c.default.bool,handleOutsideClick:c.default.func,highlightOnHover:c.default.bool,highlighted:c.default.bool,onRowClick:c.default.func,onRowDoubleClick:c.default.func,rowHeight:c.default.number,rowIndex:c.default.number.isRequired,rowData:c.default.object,errorRow:c.default.bool,isEditable:c.default.bool,lpftViewType:c.default.oneOf(["expected","exceeded"]),collapsedList:c.default.array,isOptimizing:c.default.bool,isMultiEditing:c.default.bool,historicalFilter:c.default.oneOf(Object.keys(m.FILTER_BY)),clipboardEmpty:c.default.bool},_.defaultProps={rowHeight:50,onRowClick:void 0,onRowDoubleClick:void 0,highlightOnHover:!1,cursorAsPointer:!1,highlighted:!1,errorRow:!1,isEditable:!1,handleOutsideClick:function(){return null},rowData:null,lpftViewType:"expected",collapsedList:[],isOptimizing:!1,isMultiEditing:!1,historicalFilter:m.FILTER_BY.STUDIES,clipboardEmpty:!0},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(6),u=a(15),d=a(64),c=n(d),f=a(479),p=function(e){var t=e.historicalStudies,a=e.handleRowSelect,n=e.sortData,r=e.isEditable,l=e.columnWidth,o=e.handleSort;return i.default.createElement(u.FlexTable,{useWindowing:!0,rowHeight:48,rowsCount:t.length},i.default.createElement(u.Column,{columnName:"checkbox",align:"right",className:"checkbox-column",header:i.default.createElement(u.Cell,null,""),data:function(e){var n=e.rowIndex;return i.default.createElement(u.Cell,null,i.default.createElement(c.default,{label:"",disabled:!r,checked:t[n]&&t[n].selected,onChange:function(){a(t[n]&&t[n].study_id)}}))},fixedWidth:!0,width:48}),i.default.createElement(u.Column,{columnName:"study_id",header:i.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.study_id,onSortChange:o,sortKey:"study_id"},i.default.createElement("div",{className:"study_id"===n.active?"align-left active":"align-left"},"Study name"),o?i.default.createElement("div",{className:"sort-direction"},"ASC"===n.study_id?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,i.default.createElement("div",{className:"header-cell-underline"})),data:i.default.createElement(f.GenericDataCell,{showCheckbox:!0,isEditable:r,showTooltip:!0,isTitle:!0,tooltipField:"description",onSelect:a,rows:t,dataField:"study_id"}),width:l}),i.default.createElement(u.Column,{columnName:"ta",header:i.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.therapeutic_area,onSortChange:o,sortKey:"therapeutic_area"},i.default.createElement("div",{className:"therapeutic_area"===n.active?"align-left active":"align-left"},"Therapeutic area"),o?i.default.createElement("div",{className:"sort-direction"},"ASC"===n.therapeutic_area?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,i.default.createElement("div",{className:"header-cell-underline"})),data:i.default.createElement(f.GenericDataCell,{rows:t,dataField:"therapeutic_area"}),width:200}),i.default.createElement(u.Column,{columnName:"indication",header:i.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.indication,onSortChange:o,sortKey:"indication"},i.default.createElement("div",{className:"indication"===n.active?"align-left active":"align-left"},"Indication"),o?i.default.createElement("div",{className:"sort-direction"},"ASC"===n.indication?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,i.default.createElement("div",{className:"header-cell-underline"})),data:i.default.createElement(f.GenericDataCell,{rows:t,dataField:"indication"}),width:200}),i.default.createElement(u.Column,{columnName:"FPFV",header:i.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.fpfv,onSortChange:o,sortKey:"fpfv"},i.default.createElement("div",{className:"fpfv"===n.active?"align-left active":"align-left"},"FPFV"),o?i.default.createElement("div",{className:"sort-direction"},"ASC"===n.fpfv?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,i.default.createElement("div",{className:"header-cell-underline"})),data:i.default.createElement(f.GenericDataCell,{rows:t,dataField:"fpfv"}),width:90,fixedWidth:!0}),i.default.createElement(u.Column,{columnName:"Patients",header:i.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.target_num_patients,onSortChange:o,sortKey:"target_num_patients"},i.default.createElement("div",{className:"target_num_patients"===n.active?"align-left active":"align-left"},"Patients"),o?i.default.createElement("div",{className:"sort-direction"},"ASC"===n.target_num_patients?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,i.default.createElement("div",{className:"header-cell-underline"})),data:i.default.createElement(f.GenericDataCell,{rows:t,alignTo:"right",dataField:"target_num_patients"}),width:90,fixedWidth:!0}),i.default.createElement(u.Column,{columnName:"Countries",header:i.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.num_countries,onSortChange:o,sortKey:"num_countries"},i.default.createElement("div",{className:"num_countries"===n.active?"align-left active":"align-left"},"Countries"),o?i.default.createElement("div",{className:"sort-direction"},"ASC"===n.num_countries?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,i.default.createElement("div",{className:"header-cell-underline"})),data:i.default.createElement(f.GenericDataCell,{rows:t,alignTo:"right",dataField:"num_countries"}),width:90,fixedWidth:!0}),i.default.createElement(u.Column,{columnName:"Sites",header:i.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.num_sites,onSortChange:o,sortKey:"num_sites"},i.default.createElement("div",{className:"num_sites"===n.active?"align-left active":"align-left"},"Sites"),o?i.default.createElement("div",{className:"sort-direction"},"ASC"===n.num_sites?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,i.default.createElement("div",{className:"header-cell-underline"})),data:i.default.createElement(f.GenericDataCell,{rows:t,alignTo:"right",dataField:"num_sites"}),width:70,fixedWidth:!0}),i.default.createElement(u.Column,{columnName:"SF",header:i.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.screen_failure_rate,onSortChange:o,sortKey:"screen_failure_rate"},i.default.createElement("div",{className:"screen_failure_rate"===n.active?"align-left active":"align-left"},"SF%"),o?i.default.createElement("div",{className:"sort-direction"},"ASC"===n.screen_failure_rate?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,i.default.createElement("div",{className:"header-cell-underline"})),data:i.default.createElement(f.GenericDataCell,{rows:t,alignTo:"right",type:"percentage",dataField:"screen_failure_rate"}),width:72,fixedWidth:!0}),i.default.createElement(u.Column,{columnName:"RR",header:i.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.enrollment_rate,onSortChange:o,sortKey:"enrollment_rate"},i.default.createElement("div",{className:"enrollment_rate"===n.active?"align-left active":"align-left"},"RR"),o?i.default.createElement("div",{className:"sort-direction"},"ASC"===n.enrollment_rate?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,i.default.createElement("div",{className:"header-cell-underline"})),data:i.default.createElement(f.GenericDataCell,{rows:t,alignTo:"right",dataField:"enrollment_rate"}),width:70,fixedWidth:!0}))};p.defaultProps={historicalStudies:[],isEditable:!0,columnWidth:200,handleSort:null},p.propTypes={historicalStudies:o.default.array,sortData:o.default.object.isRequired,columnWidth:o.default.number,isEditable:o.default.bool,handleRowSelect:o.default.func.isRequired,handleSort:o.default.func},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.GenericDataCell=t.HeaderCell=void 0;var r=a(848),i=n(r),l=a(847),o=n(l);t.HeaderCell=i.default,t.GenericDataCell=o.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GLOBAL_REGION="Global",t.ALL_COUNTRIES="All Countries",t.UNSPECIFIED_COUNTRY="Unspecified country"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(870),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(875),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.OptimizingSpinner=void 0;var r=a(484),i=n(r),l=a(879),o=n(l);t.OptimizingSpinner=i.default,t.default=o.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n);a(2169);var i=function(){return r.default.createElement("div",{className:"fpo-data-optimizing-spinner__container"},r.default.createElement("div",{className:"breeding-rhombus-spinner"},r.default.createElement("div",{className:"rhombus child-1"}),r.default.createElement("div",{className:"rhombus child-2"}),r.default.createElement("div",{className:"rhombus child-3"}),r.default.createElement("div",{className:"rhombus child-4"}),r.default.createElement("div",{className:"rhombus child-5"}),r.default.createElement("div",{className:"rhombus child-6"}),r.default.createElement("div",{className:"rhombus child-7"}),r.default.createElement("div",{className:"rhombus child-8"}),r.default.createElement("div",{className:"rhombus big"})))};t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(880),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(882),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(61),c=n(d),f=function(e){var t=e.children,a=e.action,n=e.disabled,r=e.className,l=e.primary,o=e.fixed;return i.default.createElement(c.default,{className:(0,u.default)("popup-dialog__button",r),disabled:n,fixed:o,type:l?"primary":"secondary",onClick:a},t)};f.propTypes={action:o.default.func,children:o.default.string,disabled:o.default.bool,primary:o.default.bool,className:o.default.string,fixed:o.default.bool},f.defaultProps={action:o.default.func,disabled:!1,primary:!1,children:"Ok",className:void 0,fixed:!1},t.default=i.default.memo(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=a(0),s=n(o),u=a(1),d=n(u),c=a(2),f=n(c);a(2177);var p=function(e){var t=e.children,a=e.className,n=e.width,o=e.fixedWidth,u=e.direction,d=i(e,["children","className","width","fixedWidth","direction"]),c=(0,f.default)(r({},a,a),{"react-flex-table__cell-group_direction-column":"column"===u},{"react-flex-table__cell-group_direction-row":"row"===u}),p={};if(n){var h=o?"0 0":"1 1";p={flex:"number"==typeof n?h+" "+n+"px":h+" "+n}}return s.default.createElement("div",l({className:"react-flex-table__cell-group "+c,style:p},d),t)};p.propTypes={children:d.default.node.isRequired,className:d.default.string,fixedWidth:d.default.bool,direction:d.default.oneOf(["row","column"]),width:d.default.oneOfType([d.default.number,d.default.string])},p.defaultProps={className:void 0,direction:"column",width:void 0,fixedWidth:!1},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),l=n(i),o=a(1),s=n(o),u=a(2),d=n(u),c=a(643),f=n(c);a(2179);var p=function(e){var t=function(e,t,a){return l.default.cloneElement((0,f.default)(e)?e({rowIndex:t,columnName:a}):e,{rowIndex:t,columnName:a})},a=(0,d.default)({"react-flex-table__column_align-left":"left"===e.align},{"react-flex-table__column_align-center":"center"===e.align},{"react-flex-table__column_align-right":"right"===e.align}),n=(0,d.default)("react-flex-table__column",e.className,a,{"react-flex-table__column_no-overflow":!e.overflow}),i=r({},e.style,{flex:e.fixedWidth?"0 0 "+e.width+"px":"1 1 "+e.width+"px"});return l.default.createElement("div",{className:n,style:i,onClick:function(t){e.columnClickHandler&&e.columnClickHandler(t,e.rowIndex)}},-1===e.rowIndex?t(e.header,e.rowIndex,e.columnName):t(e.data,e.rowIndex,e.columnName))};p.propTypes={align:s.default.oneOf(["left","center","right"]),columnClickHandler:s.default.func,columnName:s.default.string,data:s.default.oneOfType([s.default.node,s.default.func]),fixedWidth:s.default.bool,header:s.default.oneOfType([s.default.node,s.default.func]),overflow:s.default.bool,rowIndex:s.default.number,width:s.default.number.isRequired,style:s.default.object,className:s.default.string},p.defaultProps={align:"left",columnClickHandler:void 0,columnName:void 0,data:void 0,fixedWidth:!1,header:void 0,overflow:!1,rowIndex:void 0,style:{},className:""},p.displayName="FlexTableColumn",t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),o=n(l),s=a(1),u=n(s),d=a(2),c=n(d);a(2182);var f=function(e){var t=e.className,a=(e.rowHeight,e.children),n=e.onRowClick,l=e.onRowDoubleClick,s=e.rowIndex,u=r(e,["className","rowHeight","children","onRowClick","onRowDoubleClick","rowIndex"]);return o.default.createElement("div",i({className:(0,c.default)("react-flex-table__row",t),onClick:n?function(e){n(e,s)}:null,onDoubleClick:l?function(e){l(e,s)}:null},u),a)};f.propTypes={className:u.default.string,children:u.default.node.isRequired,onRowClick:u.default.func,onRowDoubleClick:u.default.func,rowHeight:u.default.number,rowIndex:u.default.number},f.defaultProps={className:"",rowHeight:50,onRowClick:void 0,onRowDoubleClick:void 0,rowIndex:void 0},f.displayName="FlexTableRow",t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(14),c=n(d),f=a(240),p=function(e){var t=e.regionName,a=e.onClick,n=e.selectedCountries,r=e.totalCountries,l=e.isSelected,o=e.showStat,s=e.disabled,d=e.isRecommendedByAnalytics,p=e.hasUnspecifiedCountry;return i.default.createElement("div",{className:(0,u.default)("region-list-item",{"selected-region":l,disabled:!!s,"recommended-by-analytics":d&&1===r}),onClick:s?void 0:a},d&&1===r?i.default.createElement(c.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"top",overlay:i.default.createElement("span",null,f.TOOLTIPS_TEXT.RECOMMENDED_BY_ANALYTICS)},i.default.createElement("div",null,t)):i.default.createElement("div",null,t),o?i.default.createElement("div",null,i.default.createElement("span",null,n," ",p?"(+1)":""),i.default.createElement("span",null,"/"),i.default.createElement("span",null,r)):i.default.createElement("div",null))};p.defaultProps={selectedCountries:0,hasUnspecifiedCountry:!1,totalCountries:0,isSelected:!1,showStat:!1,disabled:!1,isRecommendedByAnalytics:!1},p.propTypes={isSelected:o.default.bool,hasUnspecifiedCountry:o.default.bool,onClick:o.default.func.isRequired,regionName:o.default.string.isRequired,selectedCountries:o.default.number,showStat:o.default.bool,totalCountries:o.default.number,disabled:o.default.bool,isRecommendedByAnalytics:o.default.bool},t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(935),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s);a(2197);var d=function(e){var t=e.height,a=e.noLine;return i.default.createElement("div",{className:"fpo-sidebar-separator",style:{height:t}},i.default.createElement("div",{className:(0,u.default)("fpo-sidebar-separator__line",{"no-line":a})}))};d.propTypes={height:o.default.number,noLine:o.default.bool},d.defaultProps={height:1,noLine:!1},t.default=i.default.memo(d)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l);a(2198);var s=function(e){var t=e.children;return i.default.createElement("div",{className:"fpo-sidebar exclude-from-screenshot"},t)};s.propTypes={children:o.default.any},s.defaultProps={children:o.default.any},t.default=s},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(7),h=a(19),v=a(54),m=n(v),_=a(45),E=n(_),g=a(129),y=n(g),S=a(39),b=a(44),C=a(965),O=n(C),T=a(30),R=a(106),A=a(73);a(2203);var I=(0,y.default)(R.getMisalignedDetails,function(e,t){return(0,E.default)(e,t)}),w=function(e){function t(){var e,a,n,l;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={invalidFields:[],fpoParams:{},impactParams:{},hasError:!1},n.handleConfirm=function(){var e=n.props.study;n.props.alignStudyParamsWithImpact(e.id).then(function(){n.props.getStudyDashboardData(e.id,!1,!0),n.props.onClose()}).catch(function(){n.props.onClose()})},n.handleNavigateToEdit=function(){var e=n.props.study;n.props.push("/studies/"+e.id+"/edit")},l=a,i(n,l)}return l(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"render",value:function(){var e=this.props,t=e.isShown,a=e.onClose,n=e.study,r=e.infoOnly,i=this.state,l=i.invalidFields,o=i.fpoParams,s=i.impactParams;if(i.hasError)return d.default.createElement(S.PopupDialog,{title:A.MISMATCHED_STUDY_DETAILS,className:"study-params-warning-details",isShown:t,handleClose:a,buttons:[]},d.default.createElement("div",null));var u=[];return!r&&n&&n.is_imported&&l.length>0&&(u.push(d.default.createElement(S.ActionButton,{primary:!0,action:this.handleConfirm},A.ALIGN_AUTOMATICALLY)),u.push(d.default.createElement(S.ActionButton,{primary:!0,action:this.handleNavigateToEdit},A.ALIGN_IN_EDITOR))),u.push(d.default.createElement(S.ActionButton,{primary:!0,action:a},A.CLOSE)),d.default.createElement(S.PopupDialog,{title:A.MISMATCHED_STUDY_DETAILS,className:"study-params-warning-details",isShown:t,handleClose:a,buttons:u},d.default.createElement(O.default,{approvedParams:o,currentParams:s,invalidFields:l}),d.default.createElement(b.ContextHelpButton,{page:"popup__mismatched-study-details",popup:!0}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=(0,m.default)(e.study,["impactStudyParams","fp","target_lpft","therapeutic_area","indication","target_num_patients","fpfv_fpft","phase"]);return o({},t,I(a))}}]),t}(u.Component);w.propTypes={isShown:f.default.bool,onClose:f.default.func.isRequired,study:f.default.object.isRequired,alignStudyParamsWithImpact:f.default.func.isRequired,getStudyDashboardData:f.default.func.isRequired,push:f.default.func.isRequired,infoOnly:f.default.bool},w.defaultProps={scenarioName:null,isShown:!1,dashboard:!1,infoOnly:!1};var N={alignStudyParamsWithImpact:T.alignStudyParamsWithImpact,getStudyDashboardData:T.getStudyDashboardData,push:h.push};t.default=(0,p.connect)(null,N)(w)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{activeUser:e.auth.user}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),f=a(1),p=n(f),h=a(7),v=a(129),m=n(v),_=a(39),E=a(44),g=a(969),y=n(g),S=a(33),b=a(30),C=a(55),O=n(C),T=a(73);a(2207);var R=(0,m.default)(O.default),A=function(e){function t(){var e,a,n,l;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={confirmActualStudyParams:!0,recalculateWithActualParams:!1},n.handleConfirmActualStudyParamsCheck=function(e){n.setState({confirmActualStudyParams:void 0!==e?e:!n.state.confirmActualStudyParams})},n.handleRecalculateWithActualParams=function(e){n.setState({recalculateWithActualParams:void 0!==e?e:!n.state.recalculateWithActualParams})},n.handleConfirm=function(){var e=n.props,t=e.studyId,a=e.scenarioId,r=e.dashboard;n.props.confirmActualStudyParams(t,a,r,n.state).then(function(){r&&n.props.getStudyDashboardData(t,!1,!0),n.props.onClose()})},l=a,i(n,l)}return l(t,e),u(t,[{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.isShown,n=e.onClose,r=e.scenarioName,i=e.study,l=e.scenario,o=e.activeUser,u=R(o,i,l),d=u.isEditable,f=!d,p=[c.default.createElement(_.ActionButton,{primary:!0,action:n},T.CLOSE)];return f||p.unshift(c.default.createElement(_.ActionButton,{primary:!0,action:this.handleConfirm},T.ALIGN_SCENARIO_WITH_STUDY_PARAMETERS)),c.default.createElement(_.PopupDialog,{title:T.MISMATCHED_SCENARIO_DETAILS,className:"study-params-warning-details",isShown:a,handleClose:n,buttons:p},c.default.createElement("div",null,c.default.createElement(y.default,s({},t,{recalculateOption:!0,hideConfirmOption:f,approvedLpft:this.state.approvedLpft,nextLpft:this.state.nextLpft,recalculateWithActualParams:this.state.recalculateWithActualParams,handleRecalculateWithActualParams:this.handleRecalculateWithActualParams,confirmActualStudyParams:this.state.confirmActualStudyParams,handleConfirmActualStudyParamsCheck:this.handleConfirmActualStudyParamsCheck,scenarioName:r})),c.default.createElement(E.ContextHelpButton,{page:"popup__mismatched-scenario-details",popup:!0})))}}]),t}(d.Component);A.propTypes={scenarioName:p.default.string,data:p.default.object.isRequired,isShown:p.default.bool,onClose:p.default.func.isRequired,dashboard:p.default.bool,studyId:p.default.number.isRequired,scenarioId:p.default.number.isRequired,confirmActualStudyParams:p.default.func.isRequired,getStudyDashboardData:p.default.func.isRequired,study:p.default.object.isRequired,scenario:p.default.object.isRequired,activeUser:p.default.object.isRequired},A.defaultProps={scenarioName:null,isShown:!1,dashboard:!1};var I={confirmActualStudyParams:S.confirmActualStudyParams,getStudyDashboardData:b.getStudyDashboardData};t.default=(0,h.connect)(o,I)(A)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioDetailsDataCell=t.ScentarioTypeDataCell=t.ActionDataCell=t.SitesDataCell=t.PlpftDataCell=t.PatientsDataCell=t.GenericDataCell=t.FpfvLpfvDataCell=t.DaysDataCell=t.CountriesDataCell=t.UpdatedDataCell=t.HeaderCell=void 0;var r=a(976),i=n(r),l=a(982),o=n(l),s=a(972),u=n(s),d=a(973),c=n(d),f=a(974),p=n(f),h=a(975),v=n(h),m=a(977),_=n(m),E=a(978),g=n(E),y=a(981),S=n(y),b=a(971),C=n(b),O=a(980),T=n(O),R=a(979),A=n(R);t.HeaderCell=i.default,t.UpdatedDataCell=o.default,t.CountriesDataCell=u.default,t.DaysDataCell=c.default,t.FpfvLpfvDataCell=p.default,t.GenericDataCell=v.default,t.PatientsDataCell=_.default,t.PlpftDataCell=g.default,t.SitesDataCell=S.default,t.ActionDataCell=C.default,t.ScentarioTypeDataCell=T.default,t.ScenarioDetailsDataCell=A.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2),h=n(p),v=a(56),m=n(v),_=a(45),E=n(_),g=a(6);a(2211);var y=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value,focused:a.props.autoFocus,iconCssClass:e.value&&e.clearIcon?"show":"hide"},a.handleChange=a.handleChange.bind(a),a.handleFocus=a.handleFocus.bind(a),a.handleBlur=a.handleBlur.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.handleKeyUp=a.handleKeyUp.bind(a),a.handleClickIconCross=a.handleClickIconCross.bind(a),a.inputId=m.default.generate(),a}return l(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.autoFocus&&this.input.focus()}},{key:"componentWillReceiveProps",value:function(e){var t=this;null!==e.value&&e.value!==this.state.value&&this.setState({value:e.value}),(e.autoFocus&&!this.state.focused||e.autoFocus&&!this.props.autoFocus)&&(this.setState({focused:!0},function(){return t.input.focus()}),this.input.focus()),!this.state.disabled&&e.disabled&&this.setState({focused:!1})}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,E.default)(t,this.state)||e.disabled!==this.props.disabled||e.status!==this.props.status||e.statusMessage!==this.props.statusMessage||e.clearIcon!==this.props.clearIcon||e.insideLabel!==this.props.insideLabel}},{key:"handleChange",value:function(e){var t=e.target.value,a=this.props.validators,n=!a.length||a.every(function(e){return e(t)});0===a.length?(this.setState({value:t}),this.props.onChange&&this.props.onChange(e,{value:t,isValid:n})):n&&(this.setState({value:t}),this.props.onChange&&this.props.onChange(e,{value:t,isValid:n}))}},{key:"handleFocus",value:function(e){this.setState({focused:!0}),this.input.focus(),"function"==typeof this.props.onFocus&&this.props.onFocus(e,{focused:!0})}},{key:"handleBlur",value:function(e){if(this.setState({focused:!1}),"function"==typeof this.props.onBlur){var t=this.props.validators,a=e.target.value,n=!t.length||t.every(function(e){return e(a)});this.props.onBlur(e,{focused:!1,value:e.target.value,isValid:n})}null!==this.props.toolTipHandler&&this.props.toolTipHandler(!1)}},{key:"handleKeyDown",value:function(e){var t=this.props,a=t.tabPress,n=t.onKeyDown;13===e.keyCode&&this.input.blur(),9===e.keyCode&&a?(e.preventDefault(),this.tabDown=!0):n&&n(e)}},{key:"handleKeyUp",value:function(e){13===e.keyCode&&this.input.blur(),9===e.keyCode&&null!==this.props.tabPress&&this.tabDown&&(this.props.tabPress(),"function"==typeof this.props.onBlur&&(this.props.onBlur(e,{focused:"error"!==this.props.status,value:e.target.value}),"error"!==this.props.status&&this.setState({focused:!1}))),this.tabDown=!1,this.props.clearIcon&&this.setState({iconCssClass:e.target.value?"show":"hide"})}},{key:"handleClickIconCross",value:function(){var e=this;this.props.onClick(),this.setState({iconCssClass:"hide",focused:!0},function(){return e.input.focus()})}},{key:"render",value:function(){var e=this,t=this.props,a=t.type,n=t.placeholder,r=t.disabled,i=t.narrow,l=t.outsideLabel,s=t.insideLabel,u=t.status,c=t.statusMessage,f=t.maxLength,p=t.tabInd,v=t.withoutBorder,m=t.textAlign,_=t.clearIcon,E=t.defaultValue,y=this.state,S=y.value,b=y.focused,C=function(t){return t?d.default.createElement("label",{onClick:function(t){return t.stopPropagation()&&e.handleFocus()},htmlFor:e.inputId},t):null},O=(0,h.default)("fpo-text-input-container",{disabled:r}),T=(0,h.default)("fpo-text-input-wrapper",{"wrapper-focused":b,enabled:!r,extended:null!==s&&void 0!==s,narrow:!s&&!l&&i,error:"error"===u,success:"success"===u,"without-border":v,alignRight:"right"===m}),R=(0,h.default)("fpo-text-input",{narrow:!l&&i||s}),A=(0,h.default)("fpo-text-input-progress-bar",{narrow:!l&&i||s}),I=(0,h.default)("fpo-text-input-progress-bar-fill",{narrow:!l&&i||s}),w={};return void 0===E?w.value=S:w.defaultValue=E,d.default.createElement("div",{className:O},C(l),d.default.createElement("div",{onClick:function(){return!r&&e.handleFocus()},className:T},C(s),d.default.createElement("input",o({onClick:function(){e.input.select(),null!==e.props.toolTipHandler&&e.props.toolTipHandler()},ref:function(t){e.input=t},id:this.inputId,className:R,type:a,maxLength:f,placeholder:n,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown},w,{tabIndex:p,disabled:r})),d.default.createElement("div",{className:A},d.default.createElement("div",{className:I},S||""))),function(){return _?d.default.createElement("div",{onClick:e.handleClickIconCross,className:"fpo-text-input-clear-field "+e.state.iconCssClass},g.Icons.CROSS):null}(),function(){if(!u||!c)return null;var e=(0,h.default)("fpo-text-input-status-message",{error:"error"===u,success:"success"===u});return d.default.createElement("div",{className:e},c)}())}}]),t}(u.Component);y.defaultProps={autoFocus:!1,onBlur:void 0,onFocus:void 0,onChange:void 0,onClick:void 0,disabled:!1,insideLabel:null,outsideLabel:null,type:"text",tabInd:null,tabPress:null,placeholder:"",narrow:!1,status:null,statusMessage:null,onKeyDown:null,maxLength:null,withoutBorder:!1,textAlign:"left",validators:[],clearIcon:!1,toolTipHandler:null,defaultValue:void 0},y.propTypes={autoFocus:f.default.bool,disabled:f.default.bool,insideLabel:f.default.string,type:f.default.oneOf(["text","number","password"]),tabInd:f.default.number,tabPress:f.default.func,textAlign:f.default.oneOf(["left","right"]),placeholder:f.default.string,maxLength:f.default.number,narrow:f.default.bool,outsideLabel:f.default.string,onKeyDown:f.default.func,status:f.default.oneOf(["success","error"]),statusMessage:f.default.string,onBlur:f.default.func,onChange:f.default.func,onClick:f.default.func,onFocus:f.default.func,value:f.default.oneOfType([f.default.string,f.default.number]).isRequired,withoutBorder:f.default.bool,validators:f.default.array,clearIcon:f.default.bool,toolTipHandler:f.default.func,defaultValue:f.default.oneOfType([f.default.string,f.default.number])},t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1e3),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1005),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1006),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.WizardScenarioDetailsEditComponent=void 0;var r=a(1009),i=n(r),l=a(1008),o=n(l);t.WizardScenarioDetailsEditComponent=o.default,t.default=i.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1013),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1017),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1018),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENROLMENT_TABLE_FIELDS_LIST={PATIENT_ALLOCATION:"patient_allocation",NUM_SITES:"num_sites",SAS:"sas",SI_25:"25_si",SI_50:"50_si",SI_90:"90_si",RANDOMISATION_RATE:"randomisation_rate",SCREENING_FAILURE:"screening_failure",FPFV:"fpfv",FSIV:"fsiv",UNLOCK:"unlock"},t.ENROLMENT_TABLE_FIELDS_LIST_ADJUSTED={ADJUSTED_PATIENT_ALLOCATION:"adjusted_patient_allocation",ADJUSTED_NUM_SITES:"adjusted_num_sites",ADJUSTED_SAS:"adjusted_sas",ADJUSTED_SI_25:"adjusted_25_si",ADJUSTED_SI_50:"adjusted_50_si",ADJUSTED_SI_90:"adjusted_90_si",ADJUSTED_RANDOMISATION_RATE:"adjusted_randomisation_rate",ADJUSTED_SCREENING_FAILURE:"adjusted_screening_failure",ADJUSTED_FPFV:"adjusted_fpfv",ADJUSTED_FSIV:"adjusted_fsiv"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={REGIONS:1,COUNTRIES:2};t.default=n},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(17),d=a(46),c=a(823),f=n(c),p=a(77),h=a(10),v=a(55),m=function(e){var t=e.events,a=e.onUpdate,n=e.onDuplicate,i=e.onRemove,o=e.locations,s=e.scenario,c=e.metadata,v=e.groupByType,m=e.onDisable,_=[],E=[],g=[];c.isTracking?t.forEach(function(e){if(e.state!==d.EVENT_STATE.DELETED)switch(e.status){case d.EVENT_STATUS.COMPLETED:g.push(e);break;case d.EVENT_STATUS.ACTIVE:_.push(e);break;case d.EVENT_STATUS.PENDING:default:E.push(e)}}):_=[].concat(r(t)),_=v?(0,p.sortEvents)(_):_,E=v?(0,p.sortEvents)(E):E,g=v?(0,p.sortEvents)(g):g;var y=_.map(function(e){return l.default.createElement(f.default,{key:e.id,event:e,locations:o,scenario:s,onDuplicate:n,onRemove:i,onUpdate:a,onDisable:m,metadata:c})}),S=E.map(function(e){return l.default.createElement(f.default,{key:e.id,event:e,scenario:s,locations:o,onDuplicate:n,onRemove:i,onUpdate:a,onDisable:m,metadata:c})}),b=g.map(function(e){return l.default.createElement(f.default,{key:e.id,event:e,scenario:s,locations:o,onDuplicate:n,onRemove:i,onUpdate:a,onDisable:m,metadata:c})});return l.default.createElement("div",null,l.default.createElement(u.Grid,null,c.isTracking&&s&&(s.status===h.SCENARIO_STATUS.APPROVED||s.status===h.SCENARIO_STATUS.PREV_APPROVED||s.source_scenario_id)&&l.default.createElement(u.Row,null,l.default.createElement(u.Col,{offset:1,width:10},l.default.createElement("h1",null,"Active"))),y),l.default.createElement(u.Grid,null,c.isTracking&&s&&(s.status===h.SCENARIO_STATUS.APPROVED||s.status===h.SCENARIO_STATUS.PREV_APPROVED||s.source_scenario_id)&&l.default.createElement(u.Row,null,l.default.createElement(u.Col,{offset:1,width:10},l.default.createElement("h1",null,"Pending"))),S),l.default.createElement(u.Grid,null,c.isTracking&&s&&(s.status===h.SCENARIO_STATUS.APPROVED||s.status===h.SCENARIO_STATUS.PREV_APPROVED||s.source_scenario_id)&&l.default.createElement(u.Row,null,l.default.createElement(u.Col,{offset:1,width:10},l.default.createElement("h1",null,"Completed"))),b))};m.defaultProps={events:[],scenario:null,locations:[],metadata:new v.AccessList},m.propTypes={events:s.default.array,onUpdate:s.default.func.isRequired,onDuplicate:s.default.func.isRequired,onRemove:s.default.func.isRequired,onDisable:s.default.func.isRequired,locations:s.default.array,scenario:s.default.object,metadata:s.default.object.isRequired,groupByType:s.default.bool.isRequired},t.default=m},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(49);a(735);var c=function(e){var t=e.getCellValue,a=e.studies,n=e.rowIndex,r=e.icon,l=e.className,o=e.dataTest,s=e.onStudyDelete,c=function(e){e.stopPropagation(),s(a[n])};return i.default.createElement(d.Cell,e,r&&i.default.createElement("span",{className:"studies-table__cell-icon"},r),i.default.createElement("span",{className:(0,u.default)(l,"study-cell",{new:a[n]&&a[n].new}),"data-test":o,onClick:s&&c},t(a[n])))};c.propTypes={getCellValue:o.default.func.isRequired,rowIndex:o.default.number.isRequired,studies:o.default.array,icon:o.default.object,className:o.default.string,dataTest:o.default.string,onStudyDelete:o.default.func},c.defaultProps={studies:[],icon:null,className:null,dataTest:null,onStudyDelete:void 0},t.default=i.default.memo(c)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,g.getRouteMatch)(t),n=(0,_.default)(e,a),r=t.dataType===E.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",i=n[r][t.rowIndex];return{failedFetch:i&&i.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(7),d=a(2),c=n(d),f=a(16),p=a(15),h=a(58),v=n(h),m=a(51),_=n(m),E=a(62),g=a(28),y=function(e){var t=e.rowIndex,a=e.children,n=e.onRowClick,r=e.failedFetch;return l.default.createElement(v.default,{message:"Error rendering component"},l.default.createElement(p.Row,{onRowClick:r?void 0:n,rowIndex:t,className:(0,c.default)("table-dashboard-row",{disabled:r})},a))};y.propTypes={children:s.default.node.isRequired,rowIndex:s.default.number,onRowClick:s.default.func.isRequired,failedFetch:s.default.bool},y.defaultProps={rowIndex:-1,failedFetch:!1},t.default=(0,f.withRouter)((0,u.connect)(r)(y))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActionableUsers=void 0;var n=a(47),r=a(135),i=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(e){return e.users.availableUsers},o=(0,n.createSelector)(l,function(e){return e.filter(function(e){return null!==e.email&&null!==e.id&&null!==e.name})});t.getActionableUsers=(0,n.createSelector)(o,function(e){return e.filter(function(e){return e.role!==i.default.READONLY&&e.role!==i.default.PLAYGROUND&&e.role!==i.default.COUNTRY_USER})}),t.default=o},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){var n=e.clone().add(a,"d");return n>=t?n:null}function i(e,t,a,n,i,l){var s=e[0];if(s[i+"patient_allocation"]>l&&!n&&s[i+"curves"]&&s[i+"curves"][2]){var d=s[i+"curves"][2],f=d.findIndex(function(e){return e[1]>=l});if(f>0){var p=t.fp.clone().add(d[f][0],"d"),h=e.filter(function(e){return"country"===e.type}).filter(function(e){return null!==e[i+"patient_allocation_min"]&&void 0!==e[i+"patient_allocation_min"]&&e[i+"lpft"]}).reduce(function(e,a){var n=a[i+"curves"][2],r=n.findIndex(function(e){return e[1]>=a[i+"patient_allocation_min"]});if(r>0){var l=t.fp.clone().add(n[r][0],"d");if(null===e||l.isAfter(e))return l.clone()}return e},null);h&&p.isBefore(h)?(s[i+"allocatedPlpft"]=h.clone(),f=h.diff(t.fp,"d")-1):s[i+"allocatedPlpft"]=p.clone();var v=e.map(function(e){var a=o({},e);if(a[i+"lpft"]&&a[i+"lpft"].isAfter(s[i+"allocatedPlpft"])){var n=new c.default((0,u.default)(a),i);n.valuesType=i+"overallocation",n.lpft=s[i+"allocatedPlpft"],n.lpft&&n.lpft.isBefore(n.fsiv)&&(n.fsiv=null),n.lpft&&n.lpft.isBefore(n.fpfv)&&(n.fpfv=null),n.lpft&&n.fpfv_fpft>=0&&(n.lpfv=n.lpft.clone().subtract(n.fpfv_fpft,"d"),n.fpfv_lpfv=n.lpfv.diff(n.fpfv,"d"));var l=n.curves[2],d=l[f];n.patient_allocation=d?Math.floor(d[1]):null;var p=n.curves[0],h=void 0;if(n.fpfv&&n.lpfv){var v=n.fpfv.diff(n.fsiv,"d"),m=n.lpfv.clone().subtract(v,"d"),_=m.diff(t.fp,"d");h=p.find(function(e){return e[0]===_})}n.num_sites=h?Math.floor(h[1]):n.num_sites;var E=.25*n.num_sites,g=.5*n.num_sites,y=.9*n.num_sites,S=null!==t.source_scenario_id&&!t.exact_copy&&""!==i,b=S?t.adjusted_createdAt:t.fp;p.forEach(function(e){e[1]>=E&&!n["25_si"]&&(n["25_si"]=r(t.fp,b,e[0])),e[1]>=g&&!n["50_si"]&&(n["50_si"]=r(t.fp,b,e[0])),e[1]>=y&&!n["90_si"]&&(n["90_si"]=r(t.fp,b,e[0]))}),a[i+"overallocatedData"]=n}return a});return v.filter(function(e){return"region"===e.type}).forEach(function(e){e[i+"overallocatedData"]&&(e[i+"overallocatedData"].num_sites=v.filter(function(t){return"country"===t.type&&t.region_name===e.location&&t[i+"lpft"]}).reduce(function(e,t){return e+ +(t[i+"overallocatedData"]?t[i+"overallocatedData"].num_sites:t[i+"num_sites"])},0))}),v.filter(function(e){return"rollup"===e.type}).forEach(function(e){e[i+"overallocatedData"]&&(e[i+"overallocatedData"].num_sites=v.filter(function(e){return"region"===e.type}).reduce(function(e,t){return e+ +(t[i+"overallocatedData"]?t[i+"overallocatedData"].num_sites:t[i+"num_sites"])},0))}),v}}return e}function l(e,t){e.GR.overallocation||(e.GR.overallocation=void 0!==t.overallocation&&null!==t.overallocation&&0!==t.overallocation?1:0),t.regionHasSingleCountry?e[t.region_name].overallocation=t.overallocation:e[t.region_name].overallocation||(e[t.region_name].overallocation=void 0!==t.overallocation&&null!==t.overallocation&&0!==t.overallocation?1:0)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=i,t.aggregateOverallocation=l;var s=a(40),u=n(s),d=a(1113),c=n(d)},function(e,t,a){"use strict";function n(e){var t=e.startDate,a=e.FPP_FSIV,n=e.fsiv,r=e.si25,l=e.si50,o=e.si90,s=e.nSites,u=r.diff(t,"d")-a,d=l.diff(t,"d")-a,c=o.diff(t,"d")-a,f=c+(c-d)/4*2,p=[],h=new Array(a+Math.ceil(f));if(h.fill(0),n.isSame(r)&&r.isSame(l)&&l.isSame(o)?h[h.length-1]=0:n.isSame(r)&&r.isSame(l)?(h[h.length-1]=0,h.fill(.4*s/(c-d),a+d,a+c),h.fill(.1*s/(Math.ceil(f)-c),a+c,a+Math.ceil(f))):n.isSame(r)?(h[h.length-1]=0,h.fill(.25*s/(d-u),a+u,a+d),h.fill(.4*s/(c-d),a+d,a+c),h.fill(.1*s/(Math.ceil(f)-c),a+c,a+Math.ceil(f))):n.isSame(r)&&l.isSame(o)?(h[h.length-1]=0,h.fill(.25*s/(d-u),a+u,a+d)):r.isSame(l)&&l.isSame(o)?h.fill(.25*s/u,a,a+u):r.isSame(l)?(h.fill(.25*s/u,a,a+u),h.fill(.4*s/(c-d),a+d,a+c),h.fill(.1*s/(Math.ceil(f)-c),a+c,a+Math.ceil(f))):l.isSame(o)?(h.fill(.25*s/u,a,a+u),h.fill(.25*s/(d-u),a+u,a+d)):(0===u?h[h.length-4]=.25*s:h.fill(.25*s/u,a,a+u),h.fill(.25*s/(d-u),a+u,a+d),h.fill(.4*s/(c-d),a+d,a+c),h.fill(.1*s/(f-c),a+c,a+Math.ceil(f))),p=h.reduce(function(e,t,a){var n=t;return 0!==a&&(n+=e[e.length-1]),e.push(n),e},[]).reduce(function(e,t,a){var n=Math.ceil(t.toFixed(6));return n=n>s?s:n,e.push([a+1,n]),e},[]),n.isSame(r)&&r.isSame(l)&&l.isSame(o)){var v=p[p.length-1],m=v[0];p.push([m,s])}else if(n.isSame(r)&&r.isSame(l)){var _=p[a+d-1],E=_[0];p.splice(a+u,0,[E,Math.ceil(s/2)]),p.forEach(function(e,t){t>a+u&&(e[1]+=Math.floor(s/2))})}else if(n.isSame(r)&&l.isSame(o)){var g=p[a-1],y=g[0];p.splice(a+u,0,[y,Math.ceil(s/4)]),p.forEach(function(e,t){t>a+u&&(e[1]+=Math.floor(s/4))}),g=p[p.length-1],y=g[0],p.push([y,s])}else if(n.isSame(r)){var S=p[a-1],b=S[0];p.splice(a+u,0,[b,Math.ceil(s/4)]),p.forEach(function(e,t){t>a+u&&(e[1]+=Math.floor(s/4))})}else if(r.isSame(l)&&l.isSame(o)){var C=p[p.length-1],O=C[0];p.push([O,Math.ceil(s/2)]),p.push([O,s])}else if(r.isSame(l)){var T=p[a+d-1],R=T[0];p.splice(a+u,0,[R,Math.ceil(s/2)]),p.forEach(function(e,t){if(t>a+u){var n=Math.floor(s/2)-Math.floor(s/4);e[1]=n+e[1]>s?s:n+e[1]}})}else if(l.isSame(o)){var A=p[p.length-1],I=A[0];p.push([I,s])}p=p.map(function(e){return[e[0],+e[1]]});var w=new Map;p.forEach(function(e){var t=e[0],a=+e[1],n=w.get(t);(0,i.default)(n)?w.set(t,a):a>n&&w.set(t,a)});var N=Array.from(w.values());return n.isSame(r)&&N.unshift(0),{sivCurve:p,siteInitiated:N}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=a(231),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t,a,n,i){for(var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=[].concat(r(i)),s=Math.max.apply(Math,r(o)),u=e/(t*n)*1.1/a,d=Math.ceil(u),c=0,f=0;f<i.length;f+=1)if(f>0&&f>l){var p=i[f-1],h=i[f];if((c+=h-p)>0&&f+d<i.length){var v=i[f+d];o[f+d]=0===v?s-c:v-c}}return o}function l(e,t,a,n){for(var r=0;r<t;r+=1)e[e.length]=Array(n).fill(0,0,a).fill(1,a)}function o(e,t){var a=[];return e.forEach(function(n,r){var i=void 0;if(0!==r&&(i=e[r-1]),void 0!==i){var o=n-i;o>0&&l(a,o,r,t)}else n>0&&l(a,n,r,t)}),a}function s(e,t){return e.reduce(function(e,t){var a=e;if(0===a.length)a=[].concat(r(t));else for(var n=0;n<a.length;n+=1)a[n]+=t[n];return a},[]).map(function(e){return e*t})}function u(e,t,a,n,r,i,l){var u=E(e,t,a,n,r,i,l),d=o(e,u.length),c={};return s(d.map(function(e){var t=e.findIndex(function(e){return 1===e});if(c[t])return c[t];var a=u[1],n=0,r=e.map(function(e,r){if(0===e)return 0;var i=u[r];return i>a?n+=1:i<a&&(n-=1),r<t+i?e:n&&n>0?(n-=1,e):0});return c[t]=r,r}),i)}function d(e,t,a,n,r,i,l,u,d,c,p,v,_,E,g,y,S,b){var C=i,O=Math.ceil(C/u),T=O*u,R=o(e,e.length),A={};return s(R.map(function(e){var l=e.findIndex(function(e){return 1===e});if(A[l])return A[l];var o=(0,f.default)(e,[],a,r,d,u,!1);0===o.length&&(o=[0]);var s=(0,h.default)({countryScreeningRate:o,nPatients:i,SF:d,fpfvInd:b});o=(0,f.default)(e,[],a,[],d,u,!1);var S=(0,m.default)({FPP_FSIV:c,FSIV_FPFV:p,FPFV_FPFT:v,countryScreeningRate:o,totalDuration:_,SF:d,nPatients:i,preparedType1Events:r,preparedType2Events:n,screeningCurve:s,prefix:E,startDate:g,endDate:y,preparedType4Events:t,protectedScenario:!1},!0),O=S.find(function(e){return e[1]>=i}),R=O?O[0]:S[S.length-1][0],I=e.findIndex(function(e){return e>0})+1,w=0;I&&R&&(w=R-I-v);var N=void 0,D=O?O[1]:S[S.length-1][1],P=O?O[2]:S[S.length-1][2],L=e.slice();T>C&&D>T&&(N=(P-(D-T))/P,L[e.findIndex(function(e,t){return t===I+w-1})]=N);var M=L.map(function(e,t){return t>=I+w?0:e});return A[l]=M,M}),l)}Object.defineProperty(t,"__esModule",{value:!0}),t.getCountrySiteTermination=void 0,t.applySiteTermination=i,t.applySiteTerminationUpdate=u,t.applySiteTerminationWithEvents=d;var c=a(336),f=n(c),p=a(337),h=n(p),v=a(335),m=n(v),_=a(46),E=t.getCountrySiteTermination=function(e,t,a,n,r,i,l){return e.map(function(e,o){var s=+l;t.forEach(function(e){if(o>=e.startWeek&&o<=e.endWeek){var t=e.operation_value*s/100;e.operation===_.OPERATION_TYPE.INCREASE_BY?s+=t:e.operation===_.OPERATION_TYPE.DECREASE_BY&&(s-=t)}}),a.forEach(function(e){o>=e.startWeek&&o<e.endWeek&&(s=0)});var u=n/(r*i)*1.1/s;return Math.ceil(u)})}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,i){try{var l=t[r](i),o=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}return n("next")})}}function i(e,t,a,n,r,i){var u=this;t.forEach(function(t){setTimeout(function(){g.queueJob(l({},t,{isInitial:r}),function(r){var u=r.value;return u?n?o(t,u).then(function(t){var n=i();void 0===(0,d.default)(n,"study["+e+"].scenarios",[]).find(function(e){return+e.id==+t.id})&&a({type:p.ADD_STUDY_SCENARIO,payload:t,studyId:e})}):s(u).then(function(n){var r=n[0],i=null!==t.source_scenario_id?"adjusted_":"",o=(0,d.default)(r,i+"overallocatedData"),s=o?o.lpft:(0,d.default)(r,i+"lpft"),u=o?o.fpfv_lpfv:(0,d.default)(r,i+"fpfv_lpfv"),c=o?o.patient_allocation:(0,d.default)(r,i+"patient_allocation"),v=o?o.num_sites:(0,d.default)(r,i+"num_sites"),m=(0,d.default)(r,"uniqueCountries"),_=(0,d.default)(t,"predicted_lpft"),E=(0,d.default)(t,"predicted_fpfv_lpfv");s&&u&&!_&&!E&&a((0,h.updateScenarioPredictions)(e,t.id,{predicted_lpft:s,predicted_fpfv_lpfv:u,predicted_patient_allocation:c,predicted_num_sites:v,predicted_num_countries:m})),a(l({type:p.UPDATE_STUDY_SCENARIO_FULL_DATA,fullData:n,studyId:e,scenarioId:t.id},(0,f.default)(t,["updated","status","name","approvedData","study_level_data","state","study_id","owner_id","owner_name","end_date","source_scenario_id","nerve_job_status"])))}):console.log("ERROR",u),!0},u)},0)})}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){var e=r(regeneratorRuntime.mark(function e(t,a){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSON.parse(a,v.dateDeserializer);case 2:return n=e.sent,e.next=5,(0,m.prepareScenarioObject)(t);case 5:return r=e.sent,e.abrupt("return",l({},r,{fullData:n}));case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),s=function(){var e=r(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(t,v.dateDeserializer));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.calcScenarioMilestones=i;var u=a(12),d=n(u),c=a(54),f=n(c),p=a(13),h=a(33),v=a(96),m=a(8),_=a(1114),E=n(_),g=new E.default;t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,i){try{var l=t[r](i),o=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}return n("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchImpactScenario=t.fetchPlatformRegions=t.getScenariosData=t.fetchStudyScenariosDetails=t.fetchStudy=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=(t.fetchStudy=function(){var e=i(regeneratorRuntime.mark(function e(t,a,n,r){var i,l,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.auth&&a.auth.user&&a.auth.user.id,l=n?d.STUDY_BY_ID:d.PLAIN_STUDY_BY_ID,o=r&&{archived:!0},e.abrupt("return",(0,m.fetchApiNative)(l.replace(/:id/,t),"GET",o,i));case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),t.fetchStudyScenariosDetails=function(){var e=i(regeneratorRuntime.mark(function e(t,a){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.auth&&a.auth.user&&a.auth.user.id,e.abrupt("return",(0,m.fetchApiNative)(d.STUDY_SCENARIOS_DETAILS.replace(/:id/,t),"GET",null,n));case 2:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),t.getScenariosData=function(){var e=i(regeneratorRuntime.mark(function e(t,a,n,i,o,u){var c,h,_,E,g,y,S,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=void 0,h=void 0,_=(0,s.default)(t,"state.status")===f.default.ACTIVE,e.next=5,Promise.all(a.map(function(e){return(0,m.fetchApiNative)(""+d.GET_SCENARIO.replace(/:studyId/,n).replace(/:scenarioId/,e.id),"GET",{allConstraints:!1,simplified:e.status!==p.SCENARIO_STATUS.APPROVED&&_||!_},i).catch(function(){return l({},e,{failedFetch:!0})})}));case 5:if(!(E=e.sent)){e.next=28;break}if(!(g=E.find(function(e){return e.status===p.SCENARIO_STATUS.APPROVED}))){e.next=27;break}if(y=g.cohorts&&g.cohorts.length,!_||y){e.next=20;break}if(e.t0=o.actuals[n],e.t0){e.next=16;break}return e.next=15,(0,v.getActuals)(o,u,i,n,t,[]);case 15:e.t0=e.sent;case 16:c=e.t0,g.countries=g.countries.map(function(e){var t=c[e.platform_country_id];return t?l({},e,t):e}),e.next=27;break;case 20:if(!_||!y){e.next=27;break}return S=g.cohorts.reduce(function(e,t){return t.countries.forEach(function(t){t.platform_country_id&&e.add(t.platform_country_id)}),e},new Set),e.next=24,(0,v.getCohortActuals)(o,u,i,n,t,[].concat(r(S)),g.id,"");case 24:b=e.sent,h=b.aggregatedActuals,g.cohorts=g.cohorts.map(function(e){var t=l({},e);return t.aggregatedActuals=[].concat(r(Object.values(h))),t});case 27:return e.abrupt("return",E);case 28:return e.abrupt("return",[]);case 29:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,i,l){return e.apply(this,arguments)}}(),t.fetchPlatformRegions=function(){var e=i(regeneratorRuntime.mark(function e(t,a){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.platform.regions)||!n.length){e.next=3;break}return e.abrupt("return",n);case 3:return r=(0,s.default)(t,"auth.user.id"),e.next=6,(0,m.fetchApiNative)(d.PLATFORM_REGIONS,"GET",null,r);case 6:return n=e.sent,a({type:"SUCCESS_"+h.GET_PLATFOTM_REGIONS,payload:n}),e.abrupt("return",n);case 9:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),t.fetchImpactScenario=function(){var e=i(regeneratorRuntime.mark(function e(t,a,n,r){var i,l,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=(0,s.default)(n,"auth.user.id"),l=!(0,s.default)(a,"is_imported")){e.next=9;break}return r({type:"REQUEST_"+h.GET_IMPACT_SCENARIO,studyId:t}),e.next=7,(0,m.fetchApiNative)(""+d.GET_IMPACT_SCENARIO.replace(/:id/,t),"GET",{simplified:a.state.status===f.default.PLANNED||a.state.status===f.default.ACTIVE&&a.scenarios.some(function(e){return e.status===p.SCENARIO_STATUS.APPROVED})},i);case 7:(o=e.sent)&&!o.noData&&r({type:"SUCCESS_"+h.GET_IMPACT_SCENARIO,studyId:t,payload:o});case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),r({type:"ERROR_"+h.GET_IMPACT_SCENARIO,studyId:t}),console.warn("Cannot fetch IMPACT plan data",e.t0);case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t,a,n,r){return e.apply(this,arguments)}}(),a(12)),s=n(o),u=a(50),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(u),c=a(20),f=n(c),p=a(10),h=a(13),v=a(338),m=a(48)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var t=function(t,a,n,r,i){return null==a[n]?t?new Error("Failed prop type: The prop "+n+" is marked as required in "+r+", but its value is 'undefined'."):null:e(a,n,r,i)},a=t.bind(null,!1);return a.isRequired=t.bind(null,!0),a};t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var t=e.actual_patient_allocation,a=e.actual_num_sites,n=e.actual_screened,r=e.actual_randomized,i=!1,l=!1,o=void 0,s=void 0;return(a||t)&&(i=!0),r&&r.length>0&&(o=r.find(function(e){return e&&e[1]>0&&e[2]&&"ACTUALS"===e[2]}))&&(i=!0),n&&n.length>0&&(s=n.find(function(e){return e&&e[1]>0&&e[2]&&"ACTUALS"===e[2]}))&&(i=!0),a>0&&!s&&!o&&(l=!0),{hasActuals:i,canBeIgnored:l}};t.default=n},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments[1];switch(t.type){case"SUCCESS_"+p.GET_SCENARIO:var a=(0,E.extractApprovedData)(t.payload);return t.payload.cohorts&&t.payload.cohorts.length>0?l({},e,i({clipboard:(0,s.default)(e.clipboard)},t.scenarioId,(0,m.calculateCohorts)(a))):l({},e,i({enableSave:!1,dataToSave:[],deleteCountries:[],past:[],future:[],dirtyDataFor:null},t.scenarioId,a));case"SUCCESS_"+p.APPLY_SCENARIO_EVENTS_CHANGES:var n=(0,s.default)(e[t.scenarioId]);return n.events=t.payload,l({},e,i({},t.scenarioId,n));case p.CHANGE_ENABLE_SAVE_STATE:return l({},e,{enableSave:t.payload});case p.CHANGE_COHORT_COUNTRY:var o,u=t.scenarioId,c=t.cohortId,y=t.countryId,S=t.payload,b=e.dataToSave?[].concat(r(e.dataToSave)):[],C=e.deleteCountries?[].concat(r(e.deleteCountries)):[],O=l({},e[u]),T=(0,_.updateCohortCountriesData)(c,O.cohorts,i({},y,S instanceof Array?S:[S]),b),R=T.dataToSave,A=T.cohorts;O.cohorts=A,O=(0,m.calculateCohorts)(O,!0);var I=R.length>0||C.length>0;return l({},e,(o={},i(o,u,O),i(o,"enableSave",I),i(o,"dataToSave",R),o));case p.CHANGE_COHORT_COUNTRIES:var w,N=t.scenarioId,D=t.cohortId,P=t.payload,L=e.dataToSave?[].concat(r(e.dataToSave)):[],M=e.deleteCountries?[].concat(r(e.deleteCountries)):[],k=l({},e[N]),x=(0,_.updateCohortCountriesData)(D,k.cohorts,P,L),j=x.dataToSave,F=x.cohorts;k.cohorts=F,k=(0,m.calculateCohorts)(k,!0);var U=j.length>0||M.length>0;return l({},e,(w={},i(w,N,k),i(w,"enableSave",U),i(w,"dataToSave",j),w));case p.REVERT_COHORT_CONTRY:var V,B=t.scenarioId,H=t.cohortId,G=t.countryId,Y=t.fieldName,z=e.dataToSave?[].concat(r(e.dataToSave)):[],W=e.deleteCountries?[].concat(r(e.deleteCountries)):[],q=l({},e[B]),K=(0,_.revertCohortCountriesData)(H,q.cohorts,[G],Y,z),X=K.dataToSave,Z=K.cohorts;q.cohorts=Z,q=(0,m.calculateCohorts)(q,!0);var J=X.length>0||W.length>0;return l({},e,(V={},i(V,B,q),i(V,"enableSave",J),i(V,"dataToSave",X),V));case p.ADD_COHORT_COUNTRY:var Q,$=t.scenarioId,ee=t.cohortId,te=l({},e[$]),ae=e.dataToSave?[].concat(r(e.dataToSave)):[],ne=e.deleteCountries?[].concat(r(e.deleteCountries)):[];te.cohorts=te.cohorts.map(function(e){return e.id!==ee?e:(e.countries.push(t.payload),ae.push({countryName:t.payload.country_name,overrideId:null,regionName:t.payload.region_name,cohortId:ee}),l({},e,{state:l({},e.state,{isDirty:!0})}))}),te=(0,m.calculateCohorts)(te,!0);var re=ae.length>0||ne.length>0;return l({},e,(Q={},i(Q,$,te),i(Q,"enableSave",re),i(Q,"dataToSave",ae),Q));case p.DELETE_COHORT_COUNTRY:var ie,le=t.scenarioId,oe=t.cohortId,se=t.payload,ue=se.countryName,de=se.regionId,ce=se.regionName,fe=l({},e[le]),pe=e.dataToSave?[].concat(r(e.dataToSave)):[],he=e.deleteCountries?[].concat(r(e.deleteCountries)):[];fe.cohorts=fe.cohorts.map(function(e){if(e.id!==oe)return e;var t=e.countries.reduce(function(e,t){var a=e;return void 0!==ue&&(t.country_name!==ue||t.region_id!==de)||!ue&&t.region_id!==de?a.push(t):(pe=pe.filter(function(e){if(e.cohortId!==oe)return!0;if("Unspecified country"===e.countryName){if(e.regionName!==de)return!0;if(!ue&&e.regionName===de)return!1}else{if(e.regionName!==ce)return!0;if(!ue&&e.regionName===ce)return!1}return e.countryName!==ue}),t.override_id&&he.push(t)),a},[]);return l({},e,{countries:t,state:l({},e.state,{isDirty:!0})})}),fe=(0,m.calculateCohorts)(fe,!0);var ve=pe.length>0||he.length>0;return l({},e,(ie={},i(ie,le,fe),i(ie,"enableSave",ve),i(ie,"dataToSave",pe),i(ie,"deleteCountries",he),ie));case p.ADD_COUNTRY_TO_THE_REDUX_COUNTRY_LIST:var me=(0,s.default)(e[t.scenarioId]);return me.countries.push(t.country),me.countries=(0,_.prepareScenarioCountriesObject)(me),l({},e,i({},t.scenarioId,me));case p.REMOVE_COUNTRY_FROM_THE_REDUX_COUNTRY_LIST:var _e=(0,s.default)(e[t.scenarioId]);if(t.country){var Ee=_e.countries.findIndex(function(e){return t.country===e.country_name&&e.region_id===t.regionId});-1!==Ee&&_e.countries.splice(Ee,1)}else _e.countries=_e.countries.filter(function(e){return e.region_id!==t.regionId});return l({},e,i({},t.scenarioId,_e));case p.UPDATE_SCENARIO_JOB_STATUS:var ge=(0,s.default)(e[t.scenarioId]);return ge&&(ge.nerve_job_status=t.jobStatus),l({},e,i({},t.scenarioId,ge));case p.RESTORE_UNSAVED_DATA:var ye=t.payload,Se=ye.valuesToSave,be=ye.deleteCountries,Ce=ye.scenario,Oe=Se;Ce.cohorts.forEach(function(e){var t=(0,s.default)(e.countries);t=t.reduce(function(t,a){var n=be.find(function(t){return t.country_id===a.country_id&&t.cohort_id===e.id});return n?Oe=Oe.filter(function(e){return e.overrideId!==n.override_id||!(null===e.overrideId&&e.cohortId===n.cohort_id&&e.countryName===n.country_name&&e.regionName===n.region_name)}):t.push(a),t},[]),e.countries=(0,s.default)(t)});var Te=(0,_.getDateFields)();return Ce.cohorts.forEach(function(e){var t=(0,s.default)(e.countries);Oe.forEach(function(a){var n=t.find(function(e){return a.countryName===e.country_name&&a.regionName===e.region_name&&a.overrideId===e.override_id});if(n)Te.has(a.fieldName)?n[a.fieldName]=a.fieldValue&&d.default.isMoment(a.fieldValue)?a.fieldValue.diff((0,_.getMomentDate)(e.fp),"d"):null:n[a.fieldName]=a.fieldValue;else if(a.cohortId===e.id){var r=(0,_.getNewCountryObject)(a.countryName,a.regionName,a.regionName,(0,_.isSingleCountry)(a.regionName),null!==Ce.source_scenario_id);r[a.fieldName]=a.fieldValue,t.push(r)}}),e.countries=(0,s.default)(t)}),i({enableSave:Oe.length>0||be.length>0,dataToSave:Oe,deleteCountries:be},Ce.id,(0,m.calculateCohorts)(Ce,!1));case p.RESET_UNSAVED_DATA:return l({},e,{enableSave:!1,dataToSave:[],deleteCountries:[],dirtyDataFor:null,persisted:null,past:[],future:[],filter:{name:v.default,type:h.ROLLUP,subject:null}});case p.ADD_HISTORY_STEP:var Re=e.past?[].concat(r(e.past)):[];Re.length===h.UNDO_HISTORY_LENGTH&&Re.shift();var Ae=i({enableSave:e.enableSave,dataToSave:e.dataToSave,deleteCountries:e.deleteCountries},t.scenarioId,e[t.scenarioId]);return Re.push(Ae),l({},e,{past:Re,future:[]});case p.UNDO_LAST_ACTION:var Ie=e.past?[].concat(r(e.past)):[];if(0===Ie.length)return e;var we=i({enableSave:e.enableSave,dataToSave:e.dataToSave,deleteCountries:e.deleteCountries},t.scenarioId,e[t.scenarioId]);return l({},e,Ie.pop(),{past:Ie,future:[we].concat(r(e.future))});case p.REDO_LAST_ACTION:var Ne=e.future[0],De=e.future.slice(1),Pe=i({enableSave:e.enableSave,dataToSave:e.dataToSave,deleteCountries:e.deleteCountries},t.scenarioId,e[t.scenarioId]);return l({},e,Ne,{past:[].concat(r(e.past),[Pe]),future:De});case p.RESTORE_SCENARIO_DATA:return l({},e,i({},t.payload.id,t.payload));case p.COPY_COUNTRY_DATA:var Le=t.scenarioId,Me=t.cohortId,ke=t.countryId,xe=e[Le];if(!xe)return e;var je=xe.cohorts.find(function(e){return e.id===+Me});if(!je)return e;var Fe=je.countries,Ue=Fe.find(function(e){return e.country_id===ke});if(!Ue)return e;var Ve=Object.keys(h.ENROLMENT_TABLE_FIELDS_LIST).reduce(function(e,t){var a=h.ENROLMENT_TABLE_FIELDS_LIST[t];if(a===h.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK)return e;var n=Ue[a];return e[a]=n instanceof d.default?n.clone():n,e},{});return l({},e,{clipboard:Ve});case p.PASTE_COUNTRY_DATA:var Be,He=t.scenarioId,Ge=t.cohortId,Ye=t.countryId,ze=e.clipboard,We=Object.keys(ze).map(function(e){return{fieldName:e,newValue:ze[e],oldValue:null}}),qe=i({},Ye,We),Ke=e.dataToSave?[].concat(r(e.dataToSave)):[],Xe=e.deleteCountries?[].concat(r(e.deleteCountries)):[],Ze=l({},e[He]),Je=(0,_.updateCohortCountriesData)(+Ge,Ze.cohorts,qe,Ke),Qe=Je.dataToSave,$e=Je.cohorts;Ze.cohorts=$e,Ze=(0,m.calculateCohorts)(Ze,!0);var et=Qe.length>0||Xe.length>0;return l({},e,(Be={},i(Be,He,Ze),i(Be,"enableSave",et),i(Be,"dataToSave",Qe),Be));case p.CLEAR_SCENARIO_CACHE:return g;case"SUCCESS_"+p.CHANGE_COUNTRY_SITES_STATUS:var tt=e[t.scenarioId];return l({},e,i({},t.scenarioId,l({},tt,{countries:tt.countries.map(function(e){return e.override_id===t.overrideId&&(e.country_sites_approval_status=t.payload),e})})));case"SUCCESS_"+p.GET_USER_DETAILS:var at=e[t.scenarioId];return l({},e,i({},t.scenarioId,l({},at,{countries:at.countries.map(function(e){return e.override_id===t.overrideId&&(e.country_sites_approval_status=l({},e.country_sites_approval_status,{approverDetails:t.payload})),e})})));case"SUCCESS_"+p.SCENARIO_SITE_SELECTION_STATUS:var nt=e[t.scenarioId];return l({},e,i({},t.scenarioId,l({},nt,{site_selection_required:t.payload.value})));case"[SCENARIO VIEWER] SET_FIELD_VALUE":return l({},e,i({},t.field,t.payload));case"[SCENARIO VIEWER] SET_VALUES":return l({},e,t.payload);case"[SCENARIO VIEWER] COUNTRY_DATA_CHANGE":var rt,it=t.scenarioId,lt=t.countryId,ot=t.payload,st=(0,f.default)(e,it,{}),ut=e.dataToSave?[].concat(r(e.dataToSave)):[],dt=e.deleteCountries?[].concat(r(e.deleteCountries)):[],ct=(0,_.updateCountriesData)(st.fp,st.countries,i({},lt,ot instanceof Array?ot:[ot]),ut),ft=ct.dataToSave,pt=ct.countries,ht=ft.length>0||dt.length>0;return l({},e,(rt={},i(rt,it,l({},st,{countries:pt})),i(rt,"enableSave",ht),i(rt,"dataToSave",ft),i(rt,"dirtyDataFor",it),rt));case"[SCENARIO VIEWER] COUNTRIES_DATA_CHANGE":var vt,mt=t.scenarioId,_t=t.payload,Et=t.options,gt=(0,f.default)(e,mt,{}),yt=e.dataToSave?[].concat(r(e.dataToSave)):[],St=e.deleteCountries?[].concat(r(e.deleteCountries)):[],bt=(0,_.updateCountriesData)(gt.fp,gt.countries,_t,yt),Ct=bt.dataToSave,Ot=bt.countries,Tt=Ct.length>0||St.length>0;return l({},e,(vt={},i(vt,mt,l({},gt,{countries:Ot})),i(vt,"enableSave",Tt),i(vt,"dataToSave",Ct),vt),Et,{dirtyDataFor:mt});case"[SCENARIO VIEWER] SET_MULTIEDIT_VALUES":return l({},e,{multiEditValues:l({},e.multiEditValues,t.payload)});case"[SCENARIO VIEWER] ADD_COUNTRY":var Rt,At=t.scenarioId,It=t.payload,wt=(0,f.default)(e,At,{}),Nt=e.dataToSave?[].concat(r(e.dataToSave)):[],Dt=e.deleteCountries?[].concat(r(e.deleteCountries)):[];Nt.push({countryName:It.country_name,overrideId:null,regionName:It.region_name});var Pt=Nt.length>0||Dt.length>0;return l({},e,(Rt={},i(Rt,At,l({},wt,{countries:[].concat(r(wt.countries),[It])})),i(Rt,"enableSave",Pt),i(Rt,"dataToSave",Nt),i(Rt,"dirtyDataFor",At),Rt));case"[SCENARIO VIEWER] REMOVE_COUNTRY":var Lt,Mt=t.scenarioId,kt=t.payload,xt=kt.countryName,jt=kt.regionId,Ft=kt.regionName,Ut=(0,f.default)(e,Mt,{}),Vt=e.dataToSave?[].concat(r(e.dataToSave)):[],Bt=e.deleteCountries?[].concat(r(e.deleteCountries)):[],Ht=Ut.countries.reduce(function(e,t){var a=e;return void 0!==xt&&(t.country_name!==xt||t.region_id!==jt)||!xt&&t.region_id!==jt?a.push(t):(Vt=Vt.filter(function(e){if("Unspecified country"===e.countryName){if(e.regionName!==jt)return!0;if(!xt&&e.regionName===jt)return!1}else{if(e.regionName!==Ft)return!0;if(!xt&&e.regionName===Ft)return!1}return e.countryName!==xt}),t.override_id&&Bt.push(t)),a},[]),Gt=Vt.length>0||Bt.length>0;return l({},e,(Lt={},i(Lt,Mt,l({},Ut,{countries:Ht})),i(Lt,"enableSave",Gt),i(Lt,"dataToSave",Vt),i(Lt,"deleteCountries",Bt),i(Lt,"dirtyDataFor",Mt),Lt));case"[SCENARIO VIEWER] COPY_COUNTRY_DATA":var Yt=t.scenarioId,zt=t.countryId,Wt=(0,f.default)(e,Yt);if(!Wt)return e;var qt=Wt.countries,Kt=qt.find(function(e){return e.country_id===zt});if(!Kt)return e;var Xt=Object.keys(h.ENROLMENT_TABLE_FIELDS_LIST).reduce(function(e,t){var a=h.ENROLMENT_TABLE_FIELDS_LIST[t];if(a===h.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK)return e;var n=Kt[a];return e[a]=n instanceof d.default?n.clone():n,e},{});return l({},e,{clipboard:Xt});case"[SCENARIO VIEWER] PASTE_COUNTRY_DATA":var Zt,Jt=t.scenarioId,Qt=t.countryId,$t=e.clipboard,ea=Object.keys($t).map(function(e){return{fieldName:e,newValue:$t[e],oldValue:null}}),ta=i({},Qt,ea),aa=e.dataToSave?[].concat(r(e.dataToSave)):[],na=e.deleteCountries?[].concat(r(e.deleteCountries)):[],ra=(0,f.default)(e,Jt),ia=(0,_.updateCountriesData)(ra.fp,ra.countries,ta,aa),la=ia.dataToSave,oa=ia.countries,sa=la.length>0||na.length>0;return l({},e,(Zt={},i(Zt,Jt,l({},ra,{countries:oa})),i(Zt,"enableSave",sa),i(Zt,"dataToSave",la),i(Zt,"dirtyDataFor",Jt),Zt));case"[SCENARIO VIEWER] APPLY_RESTORED_DATA":return l({},e,{persisted:null});case"[SCENARIO VIEWER] IGNORE_RESTORED_DATA":return g;default:return e}};var o=a(40),s=n(o),u=a(11),d=n(u),c=a(12),f=n(c),p=a(13),h=a(10),v=n(h),m=a(136),_=a(8),E=a(96),g=t.initialState={enableSave:!1,dataToSave:[],deleteCountries:[],past:[],future:[],clipboard:{},chartCollapsed:!1,filter:{name:v.default,type:h.ROLLUP,subject:null},tableFilter:{overallocated:!1},historicalView:!1,historicalFilter:"INDICATION",multiEditView:null,dirtyDataFor:null}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n=a(1415);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1418);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1425);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1435);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1479);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1483);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1488);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1532);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1536);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},,,,,,,,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=a(0),i=n(r),l=a(32),o=a(7),s=a(19),u=a(1818),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(u),c=a(243),f=n(c);a(1111);var p=a(1060),h=n(p);d.install(),(0,l.render)(i.default.createElement(o.Provider,{store:f.default},i.default.createElement(s.ConnectedRouter,{history:c.history},i.default.createElement(h.default,null))),document.getElementById("root"))},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SITES_FILTER=[{key:"selected",value:"Selected sites"},{key:"all",value:"All sites"}],t.SITES_FILTER_KEYS={SELECTED:"selected",ALL:"all"},t.STUDIES_FILTER=[{key:"studies_complete",value:"Completed",tooltip:"Based on studies completed in the indication by center in last 3 years"},{key:"studies_active",value:"Active"}],t.STUDIES_FILTER_KEYS={COMPLETED:"studies_complete",ACTIVE:"studies_active"},t.METRICS_FILTER=[{key:"median_time_to_query",value:"Median time to query close"},{key:"median_time_to_entry",value:"Median time to entry"},{key:"mvr_issues_raised",value:"MVR issues raised"},{key:"patients_with_ie_protocol_deviation",value:"Patients w/I/E protocol deviation"},{key:"query_rate",value:"Query Rate"}],t.METRICS_FILTER_KEYS={MEDIAN_TIME_TO_QUERY:"median_time_to_query",MEDIAN_TIME_TO_ENTRY:"median_time_to_entry",MVR_ISSUES_RAISED:"mvr_issues_raised",PATIENTS_PROTOCOL_DEVIATION:"patients_with_ie_protocol_deviation",QUERY_RATE:"query_rate"},t.TABLE_VIEW={HISTORICAL:"HISTORICAL",FORECAST:"FORECAST",CURRENT:"CURRENT"}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedSitesPages=t.getSelectedSitesExpectedCountryData=t.getSelectedSitesWithRROverride=t.getSelectedSitesWithoutRR=t.getSelectedSitesAverageRR=t.getSelectedSitesCount=t.getSelectedFilteredSites=t.getSelectedSites=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(47),o=a(12),s=n(o),u=a(81),d=n(u),c=a(231),f=n(c),p=a(233),h=n(p),v=a(311),m=a(53),_=a(8),E=t.getSelectedSites=(0,v.createDeepEqualSelector)([v.getSitesFromStore,v.getInitialSitesSelectionFromStore,v.getLoadingSitesStatus],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return arguments[2]?v.EMPTY_SITES:e.filter(function(e){var a=(0,s.default)(e,"state.status");return t?e.is_recommended_by_FPO:e.is_recommended_by_FPO&&!a||"ADD"===a})}),g=(t.getSelectedFilteredSites=(0,v.createDeepEqualSelector)([E,v.getInternalSitesFilterFromStore,v.getExternalSitesFilterFromStore,v.getExperienceSitesFilterFromStore,v.getSitesSearchValueFromStore,v.getSortOptionsFromStore],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments[3],i=arguments[4],l=arguments[5],o=e.reduce(function(e,t){return(0,f.default)(t.ranking)&&"ranking"===l.active?e.unrankedSites.push(t):e.rankedSites.push(t),e},{unrankedSites:[],rankedSites:[]}),u=o.unrankedSites,d=o.rankedSites,c=(0,h.default)(l.active);return[].concat(r(d.sort(c(l.active,l.direction))),r(u)).filter(function(e){var r=!0,l=void 0;t&&(l="INTERNAL"),a&&(l="EXTERNAL");var o=(0,s.default)(e,"isInternal")?"INTERNAL":"EXTERNAL";return r&&l&&l!==o&&(r=!1),r&&(r=(0,v.isMatchedByExpFilters)(e,n)),r&&(r=(0,v.isMatchedBySearchInput)(e,i)),r})}),t.getSelectedSitesCount=(0,l.createSelector)(E,function(e){return e.length})),y=t.getSelectedSitesAverageRR=(0,l.createSelector)(E,function(e){if(!e||0===e.length)return 0;var t=e.reduce(function(e,t){var a=void 0;return t.forecast_randomization_rate?a=t.forecast_randomization_rate:t.randomization_rate&&(a=t.randomization_rate),a?{total:e.total+ +a,count:e.count+1}:e},{total:0,count:0});return t.count>0?t.total/t.count:0});t.getSelectedSitesWithoutRR=(0,l.createSelector)(E,function(e){return e&&0!==e.length?e.filter(function(e){var t=void 0;return e.forecast_randomization_rate?t=e.forecast_randomization_rate:e.randomization_rate&&(t=e.randomization_rate),!t}).length:0}),t.getSelectedSitesWithRROverride=(0,l.createSelector)(E,function(e){return e&&0!==e.length?e.filter(function(e){return+e.state.randomization_rate}).length:0}),t.getSelectedSitesExpectedCountryData=(0,l.createSelector)([m.getActiveCountry,y,g,m.getScenarioData,m.getScenarioCountries],function(e,t,a,n,l){if(!n||!e)return null;var o=!!n.source_scenario_id,s=void 0;s=o?i({},e,{adjusted_num_sites:a,adjusted_randomisation_rate:t}):i({},e,{num_sites:a,randomisation_rate:t});var u=l.filter(function(t){return t.country_id!==e.country_id});return(0,_.getScenarioCalculatedData)([].concat(r(u),[s]),(0,d.default)(n,"approvedData")).find(function(t){return t.country_id===e.country_id})||null}),t.getSelectedSitesPages=(0,l.createSelector)(E,function(e){return e.length/v.PER_PAGE})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){if(!e||!t)return _;var n=(0,p.default)(t,"country_sites_approval_status.updatedAt",null),r=[{title:"DU",value:(0,p.default)(e,"therapeutic_area","-"),isSeparator:!0},{title:"Indication",value:(0,p.default)(e,"indication","-"),isSeparator:!0},{title:"Date shared",value:n?(0,h.getMomentDate)(n).format("DD MMM YYYY"):"-",isSeparator:!0},{title:"Version",value:(0,p.default)(t,"country_sites_approval_status.version","-"),isSeparator:!0}],i=[{title:"Sites Initiated",value:(0,p.default)(t,"actual_num_sites",0),isSeparator:!1},{title:"Sites enrolling",value:(0,p.default)(t,"actual_sites_enrolling",0),isSeparator:!0},{title:"Patients",value:(0,p.default)(t,"patient_allocation",0),isSeparator:!1},{title:"Patients randomized",value:(0,p.default)(t,"actual_patient_allocation",0),isSeparator:!0},{title:"DU",value:(0,p.default)(e,"therapeutic_area","-"),isSeparator:!0},{title:"Indication",value:(0,p.default)(e,"indication","-"),isSeparator:!0}];if(a){var l=a.siteData,o=void 0===l?{}:l,s=a.therapeutic_area,d=a.indication,f=a.studies_active,v=a.studies_complete,E=(0,p.default)(a,"isInternal",!1);return[{title:u.default.createElement("div",{className:(0,c.default)("site-source",{internal:E,external:!E})}),value:E?"Internal site":"External site",isSeparator:!0},{title:"Site Rank",value:(0,p.default)(o,"ranking","-"),isSeparator:!0},{title:"DU",value:s,isSeparator:!0},{title:"Indication",value:d,isSeparator:!0},{title:"Studies Active",value:f},{title:"Studies Completed",value:v}]}return e.state.status===m.default.ACTIVE?i:r}function i(e,t){var a=(0,s.useRef)();(0,s.useEffect)(function(){if(a.current){var n=Object.keys(l({},a.current,t)),r={};n.forEach(function(e){a.current[e]!==t[e]&&(r[e]={from:a.current[e],to:t[e]})}),Object.keys(r).length&&console.log("[why-did-you-update]",e,r)}a.current=t})}Object.defineProperty(t,"__esModule",{value:!0}),t.getActionType=t.useIntersect=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getHeaderData=r,t.useWhyDidYouUpdate=i;var s=a(0),u=n(s),d=a(2),c=n(d),f=a(12),p=n(f),h=a(8),v=a(20),m=n(v),_=(t.useIntersect=function(e){var t=e.root,a=void 0===t?null:t,n=e.rootMargin,r=e.threshold,i=(0,s.useState)({}),l=o(i,2),u=l[0],d=l[1],c=(0,s.useRef)();return(0,s.useEffect)(function(){var e=new IntersectionObserver(function(e){return d(e[0])},{root:a,rootMargin:n,threshold:r});return e.observe(c.current),function(){return e.disconnect()}},[c,a,n,r]),[u,c]},[]);t.getActionType=function(e){var t=(0,p.default)(e,"state.status"),a=void 0;return(e.is_recommended_by_FPO||e.raw||t)&&"REMOVE"!==t?e.is_recommended_by_FPO&&!e.raw&&!t||"ADD"===t?a="REMOVE":e.raw&&!t||"REMOVE"===t?a="ADD":e.raw&&t&&"ADD"===t&&(a="REMOVE"):a="ADD",a}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getExternalSitesPages=t.getExternalFilteredSitesCount=t.getExternalSitesCount=t.getExternalFilteredSitesPaginated=t.getExternalFilteredSites=t.getExternalSites=void 0;var i=a(47),l=a(12),o=n(l),s=a(231),u=n(s),d=a(233),c=n(d),f=a(311),p=t.getExternalSites=(0,f.createDeepEqualSelector)([f.getSitesFromStore,f.getInitialSitesSelectionFromStore],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.filter(function(e){var a=(0,o.default)(e,"state.status");return!e.raw&&!e.isInternal&&(t?!e.isInternal:!e.isInternal&&!a||"REMOVE"===a)})}),h=t.getExternalFilteredSites=(0,f.createDeepEqualSelector)([p,f.getInternalSitesFilterFromStore,f.getExternalSitesFilterFromStore,f.getExperienceSitesFilterFromStore,f.getSitesSearchValueFromStore,f.getSortOptionsFromStore],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments[3],i=arguments[4],l=arguments[5],s=e.reduce(function(e,t){return(0,u.default)(t.ranking)&&"ranking"===l.active&&!t.addedViaSearch?e.unrankedSites.push(t):t.addedViaSearch?e.addedViaSearch.push(t):e.rankedSites.push(t),e},{unrankedSites:[],rankedSites:[],addedViaSearch:[]}),d=s.unrankedSites,p=s.rankedSites,h=s.addedViaSearch,v=(0,c.default)(l.active,!0);return[].concat(r(h),r(p.sort(v(l.active,l.direction))),r(d)).filter(function(e){var r=!0,l=void 0;t&&(l="INTERNAL"),a&&(l="EXTERNAL");var s=(0,o.default)(e,"isInternal")?"INTERNAL":"EXTERNAL";return r&&l&&l!==s&&(r=!1),r&&(r=(0,f.isMatchedByExpFilters)(e,n)),r&&(r=(0,f.isMatchedBySearchInput)(e,i)),r})});t.getExternalFilteredSitesPaginated=(0,f.createDeepEqualSelector)([h,f.getActivePagesFromStore],function(e,t){var a=Math.ceil(t.EXTERNAL*f.PER_PAGE);return e.slice(a,a+f.PER_PAGE)}),t.getExternalSitesCount=(0,i.createSelector)(p,function(e){return e.length}),t.getExternalFilteredSitesCount=(0,i.createSelector)(h,function(e){return e.length}),t.getExternalSitesPages=(0,i.createSelector)(h,function(e){return e.length/f.PER_PAGE})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getOtherFilteredSitesCount=t.getOtherSitesCount=t.getOtherFilteredSitesPaginated=t.getOtherSitesPages=t.getOtherFilteredSites=t.getOtherSites=void 0;var i=a(47),l=a(12),o=n(l),s=a(231),u=n(s),d=a(233),c=n(d),f=a(311),p=t.getOtherSites=(0,f.createDeepEqualSelector)([f.getSitesFromStore,f.getInitialSitesSelectionFromStore],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.filter(function(e){var a=(0,o.default)(e,"state.status");return!(e.raw||!e.isInternal)&&(t?!e.is_recommended_by_FPO&&e.isInternal:!e.is_recommended_by_FPO&&e.isInternal&&!a||"REMOVE"===a)})}),h=t.getOtherFilteredSites=(0,f.createDeepEqualSelector)([p,f.getInternalSitesFilterFromStore,f.getExternalSitesFilterFromStore,f.getExperienceSitesFilterFromStore,f.getSitesSearchValueFromStore,f.getSortOptionsFromStore],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments[3],i=arguments[4],l=arguments[5],s=e.reduce(function(e,t){return(0,u.default)(t.ranking)&&"ranking"===l.active?e.unrankedSites.push(t):e.rankedSites.push(t),e},{unrankedSites:[],rankedSites:[]}),d=s.unrankedSites,p=s.rankedSites,h=(0,c.default)(l.active);return[].concat(r(p.sort(h(l.active,l.direction))),r(d)).filter(function(e){var r=!0,l=void 0;t&&(l="INTERNAL"),a&&(l="EXTERNAL");var s=(0,o.default)(e,"isInternal")?"INTERNAL":"EXTERNAL";return r&&l&&l!==s&&(r=!1),r&&(r=(0,f.isMatchedByExpFilters)(e,n)),r&&(r=(0,f.isMatchedBySearchInput)(e,i)),r})});t.getOtherSitesPages=(0,i.createSelector)(h,function(e){return Math.ceil(e.length/f.PER_PAGE)}),t.getOtherFilteredSitesPaginated=(0,f.createDeepEqualSelector)([h,f.getActivePagesFromStore],function(e,t){var a=Math.ceil(t.OTHER*f.PER_PAGE);return e.slice(a,a+f.PER_PAGE)}),t.getOtherSitesCount=(0,i.createSelector)(p,function(e){return e.length}),t.getOtherFilteredSitesCount=(0,i.createSelector)(h,function(e){return e.length})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(876),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(944),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(959),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSiteDataType=t.getFilteredStudies=t.getSiteFromStore=t.EMPTY_ARRAY=void 0;var n=a(47),r=a(12),i=function(e){return e&&e.__esModule?e:{default:e}}(r),l=a(63),o=t.EMPTY_ARRAY=[],s=t.getSiteFromStore=(0,n.createSelector)([l.getRouteParams,function(e){return e.site}],function(e,t){return t[e.siteId]}),u=(0,n.createSelector)(s,function(e){return(0,i.default)(e,"studies_by_site",o)}),d=(0,n.createSelector)(l.getStudyData,function(e){return e.study_id});t.getFilteredStudies=(0,n.createSelector)(u,d,function(e,t){return e.reduce(function(e,a){return a.study_id===t?e.currentStudy.push(a):e.otherStudies.push(a),e},{currentStudy:[],otherStudies:[]})}),t.getSiteDataType=function(e){if(!e)return"NONE";var t=(0,i.default)(e,"state.status");return e.is_recommended_by_FPO&&!t||"ADD"===t?"SELECTED":!e.is_recommended_by_FPO&&e.isInternal&&!t||"REMOVE"===t?"OTHER":!e.isInternal&&!t||"REMOVE"===t?"EXTERNAL":e.raw&&!t||"REMOVE"===t?"RAW":"NONE"}},,,,,,,,function(e,t,a){"use strict";function n(e,t,a,n,i){return function(s){return s((0,r.fetchApi)(l.SHARE_SCENARIO.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:o.SHARE_SCENARIO,studyId:e,scenarioId:t,userId:a,unshare:i,meta:{notification:{trigger:o.SUCCESS,message:"Scenario was successfully "+(i?"unshared":"shared")}}},"POST",{sharedWith:n,unshare:i}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=a(48),i=a(50),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(i),o=a(13)},function(e,t,a){"use strict";function n(e,t,a,n){return{type:(n?o.SUCCESS:o.ERROR)+"_OPTIMIZE_JOB_STATUS",meta:{notification:[{trigger:o.SUCCESS,message:'Successfully finished optimization for scenario "'+a+'"',link:"/studies/"+e+"/scenarios/"+t,timeout:15e3},{trigger:o.ERROR,message:'Failed to optimize scenario "'+a+'"',link:"/studies/"+e+"/scenarios/"+t,timeout:15e3}]}}}function r(e){return function(t){return t((0,i.fetchApi)(l.CHECK_UPDATES,{type:o.CHECK_JOB_STATUS},"GET",{studiesIds:e.studiesIds||[]})).then(function(t){var a=e.scenarios,n=e.dispatchGetScenario,r=e.dispatchUpdateScenarioJobStatus,i=e.dispatchUpdateStudyScenarioJobStatus;c.length&&t.forEach(function(e,t){var l=c[t];l&&(e.nerve_job_status!==l.nerve_job_status||null!==l.nerve_job_status&&!(0,d.getMomentDate)(e.updatedAt).isSame((0,d.getMomentDate)(l.updatedAt)))&&(e.nerve_job_status===u.default.FINISHED?(a[e.id]&&n(e.study_id,e.id),i(e.id,e.study_id,u.default.FINISHED)):e.nerve_job_status===u.default.FAILED?(r(e.id,e.study_id,u.default.FAILED),i(e.id,e.study_id,u.default.FAILED)):e.nerve_job_status!==u.default.QUEUED&&e.nerve_job_status!==u.default.RUNNING||(r(e.id,e.study_id,u.default.RUNNING),i(e.id,e.study_id,u.default.RUNNING)))}),c=t}).catch(function(e){return e})}}Object.defineProperty(t,"__esModule",{value:!0}),t.showNotificationOnJobFinished=n,t.default=r;var i=a(48),l=a(50),o=a(13),s=a(42),u=function(e){return e&&e.__esModule?e:{default:e}}(s),d=a(8),c=[]},function(e,t,a){"use strict";function n(e){return{type:r.HIDE_NOTIFICATION,id:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=a(13)},function(e,t,a){"use strict";function n(){return function(e){e((0,s.fetchApi)(d.GET_AVAILABLE_USERS,o.GET_AVAILABLE_USERS)).catch(function(e){return e})}}function r(){return function(e){e((0,s.fetchApi)(d.GET_COUNTRY_USERS,o.GET_COUNTRY_USERS)).catch(function(e){return e})}}function i(e,t){return function(a){return a((0,s.fetchApi)(d.SET_COUNTRY_USER,o.SET_COUNTRY_TO_USER,"PUT",{userId:e,country:t}))}}function l(e,t){return function(a){return a((0,s.fetchApi)(d.UNLINK_COUNTRY_USER,o.REMOVE_COUNTRY_FROM_USER,"PUT",{userId:e,country:t}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,t.getCountryUsers=r,t.setCountryToUser=i,t.unlinkCountryFromUser=l;var o=a(13),s=a(48),u=a(50),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(u)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(6),u=a(14),d=n(u),c=a(476),f=n(c);a(2117);var p=function(e){var t=e.platformRegions,a=e.assignedRegions,n=e.addScenarioRegion,r=e.studyId,l=e.scenarioId;return i.default.createElement(d.default,{mouseEnterDelay:.3,overlayClassName:"scenario-table__add-region-tooltip",align:{offset:[0,10]},overlay:i.default.createElement("span",null,"Add region")},i.default.createElement(d.default,{overlayClassName:"scenario-table__add-region-actions-tooltip",align:{offset:[10,-10]},placement:"bottomRight",trigger:["click"],overlay:i.default.createElement("div",{className:"overlay__wrapper"},i.default.createElement("div",{className:"regions-icon__wrapper"},s.Icons.LANGUAGE),i.default.createElement(f.default,{countries:t.map(function(e){return e.name}),disabledCountries:a,height:190,placeholder:"Add region",onSelect:function(e){n(r,l,e)}}))},i.default.createElement("div",{className:"control-icon__more",onClick:function(e){e.stopPropagation()}},s.Icons.MORE_HORIZ)))};p.propTypes={platformRegions:o.default.array.isRequired,assignedRegions:o.default.array.isRequired,addScenarioRegion:o.default.func.isRequired,studyId:o.default.number.isRequired,scenarioId:o.default.number.isRequired},t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(768),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(481),u=n(s),d=a(132),c=n(d);a(2118);var f=function(e){var t=e.title,a=e.message,n=e.status,r=e.isShown,l=e.handleClose,o=e.children;return r?i.default.createElement(u.default,null,i.default.createElement(c.default,{className:"alert-dialog",title:t,message:a,status:n,isShown:!0,multiline:!0,handleClose:l},o)):null};f.propTypes={status:o.default.oneOf(["info","warning","error","success"]),handleClose:o.default.func,isShown:o.default.bool.isRequired,title:o.default.string,message:o.default.string,children:o.default.node},f.defaultProps={status:"info",handleClose:void 0,title:"Alert dialog",message:"Alert message",children:void 0},t.default=i.default.memo(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Alert=void 0;var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(450),c=a(6);a(2119);var f=function(e){var t=e.title,a=e.message,n=e.status,r=e.isShown,l=e.handleClose,o=e.children,s=e.className,f=e.multiline;if(!r)return null;var p=(0,u.default)(s,"alert",{alert_info:"info"===n},{alert_warning:"warning"===n},{alert_success:"success"===n},{alert_error:"error"===n},{alert_reminder:"reminder"===n},{alert_multiline:f}),h=i.default.createElement("span",{className:"alert__message"},o||a);return i.default.createElement(d.FlexBox,{className:p,onClick:function(e){return e.stopPropagation()}},i.default.createElement(d.FlexItem,{flex:"0 0 36px",className:(0,u.default)("alert__status-icon",{"alert__status-icon_hidden":""===t})},c.Icons[n.toUpperCase()]),i.default.createElement(d.FlexItem,{flex:"1 1 100%",className:"alert__content"},i.default.createElement("span",{className:"alert__title"},""!==t&&t+("reminder"===n?"":":"),!f&&h),f&&h),l&&i.default.createElement(d.FlexItem,{flex:"0 0 36px"},i.default.createElement("span",{className:"alert__close-icon",onClick:l},c.Icons.CROSS)))};f.propTypes={status:o.default.oneOf(["info","warning","error","success","reminder"]),handleClose:o.default.func,isShown:o.default.bool.isRequired,title:o.default.string,message:o.default.string,children:o.default.oneOfType([o.default.string,o.default.node]),className:o.default.string,multiline:o.default.bool},f.defaultProps={status:"info",handleClose:void 0,title:"Alert title",message:"Alert message",children:void 0,className:"",multiline:!1},t.Alert=f,t.default=i.default.memo(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AppFooter=void 0;var r=a(0),i=n(r),l=a(1),o=n(l);a(2120);var s=a(17),u=function(e){var t=e.showBrand,a=(new Date).getFullYear();return i.default.createElement("div",{className:"app-footer"},i.default.createElement(s.Grid,{style:{width:"100%"}},i.default.createElement(s.Row,{style:{alignItems:"center",height:"30px"}},i.default.createElement(s.Col,{offset:1,width:2},i.default.createElement("span",{className:"app-footer-label secondary"}," ",a," Novartis AG")),t&&i.default.createElement(s.Col,{offset:7,width:2},i.default.createElement("div",null,i.default.createElement("span",{className:"app-footer-label"},"Powered by"),i.default.createElement("span",{className:"app-footer-label primary"},"NERVE LIVE"))))))};u.defaultProps={showBrand:!0},u.propTypes={showBrand:o.default.bool},t.AppFooter=u,t.default=i.default.memo(u)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(772),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l);a(2121);var s=a(1783),u=n(s),d=a(17),c=function(e){var t=e.showBrand,a=e.onTestSession,n=e.onTestError;return i.default.createElement("div",{className:"app-header"},i.default.createElement(d.Grid,{style:{width:"100%"}},i.default.createElement(d.Row,{style:{alignItems:"center"}},i.default.createElement(d.Col,{offset:1,width:2},i.default.createElement("div",{style:{height:"48px"}},a&&n&&i.default.createElement("div",{className:"fpo-hidden-button"},i.default.createElement("div",{onClick:function(e){e.altKey&&e.shiftKey?a():e.shiftKey&&n()}})),i.default.createElement("img",{src:u.default,alt:"Novartis",style:{height:"32px"}}))),t&&i.default.createElement(d.Col,{offset:7,width:2},i.default.createElement("div",{className:"app-header__brand-keyline"}),i.default.createElement("div",{className:"app-header__brand-label"},"Footprint Optimizer")))))};c.defaultProps={showBrand:!0,onTestError:null,onTestSession:null},c.propTypes={showBrand:o.default.bool,onTestSession:o.default.func,onTestError:o.default.func},t.default=i.default.memo(c)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(774),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(39),u=a(64),d=n(u),c=a(6),f=a(10),p=a(73);a(2122);var h=function(e){var t=e.isShow,a=e.onChange,n=e.onClose,r=e.onSubmit,l=e.multiEditType,o=l===f.MULTI_EDIT_TYPE.EDIT||null===l;return i.default.createElement(s.PopupDialog,{titleIcon:o?c.Icons.MULTIPLE_EDIT:c.Icons.UNLOCK,title:o?p.MULTI_COLUMN_EDIT:p.REMOVE_USER_CONSTRAINTS,className:"applying-edits-multi-column-dialog",isShown:t,handleClose:n,buttons:[i.default.createElement("div",{className:"applying-edits-multi-column-dialog__checkbox"},i.default.createElement(d.default,{label:"Don't show this again",checked:!1,onChange:a})),i.default.createElement(s.ActionButton,{className:"applying-edits-multi-column-dialog__cancel",action:n},p.CANCEL),i.default.createElement(s.ActionButton,{primary:!0,action:r},p.YES_CONTINUE)]},i.default.createElement("div",{className:"applying-edits-multi-column-content"},o?p.APPLY_MULTIEDIT_DATA:p.UNLOCK_USER_CONSTRAINTS_BY_COLUMN),i.default.createElement("br",null),i.default.createElement("div",{className:"applying-edits-multi-column-content"},p.CONFIRM_TO_CONTINUE))};h.defaultProps={onChange:void 0,onClose:void 0,onSubmit:void 0,multiEditType:f.MULTI_EDIT_TYPE.EDIT},h.propTypes={isShow:o.default.bool.isRequired,onChange:o.default.func,onClose:o.default.func,onSubmit:o.default.func,multiEditType:o.default.string},t.default=i.default.memo(h)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ApproveScenarioDialog=t.MissedAnnotationWidget=void 0;var r=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a(0),l=n(i),o=a(1),s=n(o),u=a(39),d=a(6),c=a(73);a(2123);var f=function(e){var t=e.targetPatients,a=e.predictedPatients,n=e.predictedDate,r=e.hasUnspecified,i=e.targetDate,o=a-t,s=i?i.diff(n,"days"):0;return 0===o&&s>=0?null:l.default.createElement("div",{className:"missed-annotation-widget"},l.default.createElement("div",null,c.MISSED_THINGS),l.default.createElement("div",{className:"annotation-table"},s<0&&l.default.createElement("div",{className:"annotation-row"},l.default.createElement("div",null,d.Icons.OFF_TARGET),l.default.createElement("div",{className:"red"},Math.abs(s)+"d LATE"),l.default.createElement("div",null,"T/LPFT"),l.default.createElement("div",null,i&&i.format("DD MMM YYYY"))),0!==o&&l.default.createElement("div",{className:"annotation-row"},l.default.createElement("div",null,r?d.Icons.VISITORS_EXCLAMATION:d.Icons.VISITORS),l.default.createElement("div",{className:"red"},Math.abs(o)," ",o>0?"OVER":"UNDER"),l.default.createElement("div",null,"T/Patients"),l.default.createElement("div",null,t))))};f.defaultProps={predictedDate:null,hasUnspecified:!1,isAdjusted:!1,targetDate:null},f.propTypes={predictedPatients:s.default.number.isRequired,targetPatients:s.default.number.isRequired,targetDate:s.default.object,predictedDate:s.default.object,hasUnspecified:s.default.bool};var p=function(e){var t=e.isShown,a=e.onClose,n=e.onSubmit,o=e.willOverride,s=e.fullData,d=e.isAdjusted,p=e.targetPatients,h=e.predictedPatients,v=e.predictedDate,m=e.targetDate,_=(0,i.useState)(!1),E=r(_,2),g=E[0],y=E[1],S=s.reduce(function(e,t){var a=e;return"Unspecified country"===t.country_name&&t.adjusted_patient_allocation>0&&d&&(a+=t.adjusted_patient_allocation),"Unspecified country"===t.country_name&&t.patient_allocation>0&&!d&&(a+=t.patient_allocation),a},0);return l.default.createElement(u.PopupDialog,{title:"Approve plan",className:"approve-scenario-dialog",isShown:t,handleClose:a,buttons:[l.default.createElement(u.ActionButton,{className:"duplicate-scenario-dialog__button-cancel",action:a},"Cancel"),l.default.createElement(u.ActionButton,{disabled:g,action:function(){y(!0),n()},primary:!0},"Approve")]},l.default.createElement("div",null,c.CONFIRM_TO_APPROVE),o&&l.default.createElement("div",null,"This will ",l.default.createElement("strong",null,"override")," the current approved plan."),0!==S&&l.default.createElement("div",null,l.default.createElement("strong",null,S+" patient"+(S>1?"s":"")+"\n        "+(S>1?"have":"has")+" been allocated to unspecified countries")),l.default.createElement(f,{isAdjusted:d,predictedPatients:h,targetPatients:p,targetDate:m,hasUnspecified:0!==S,predictedDate:v}))};p.defaultProps={isShown:!1,onClose:void 0,willOverride:!1,unspecifiedCountriesPatientsAllocation:0,predictedDate:null,targetDate:null,isAdjusted:!1},p.propTypes={isShown:s.default.bool,onClose:s.default.func,onSubmit:s.default.func.isRequired,willOverride:s.default.bool,fullData:s.default.array.isRequired,predictedPatients:s.default.number.isRequired,targetPatients:s.default.number.isRequired,targetDate:s.default.object,predictedDate:s.default.object,isAdjusted:s.default.bool},t.MissedAnnotationWidget=f,t.ApproveScenarioDialog=p,t.default=l.default.memo(p)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return{replace:function(t){return e((0,c.replace)(t))},forbiddenError:function(t){return e((0,f.forbiddenError)(t))}}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(189),d=a(7),c=a(19),f=a(131),p=a(73),h=function(e,t){var a=function(a){var n=a.activeUser.role;return n&&!t.includes(n)?(a.forbiddenError(p.DONT_HAVE_ACCESS_TO_VIEW_PAGE),null):l.default.createElement(e,a)};return a.propTypes={activeUser:s.default.shape({role:s.default.string}),forbiddenError:s.default.func.isRequired},a.defaultProps={activeUser:null},a},v=function(e){return{activeUser:e.auth.user}},m=(0,u.compose)((0,d.connect)(v,r),h);t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(778),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2),h=n(p),v=a(450),m=a(82),_=n(m),E=a(14),g=n(E),y=a(6),S=a(85),b=a(462),C=n(b),O=a(10);a(2124);var T=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleSubmitMultiEdits=function(){a.props.onSubmitDialog(a.isCheckedApplyingEditsDialog)},a.handleChangeMultiEdits=function(e){a.isCheckedApplyingEditsDialog=e},a.toggleActive=a.toggleActive.bind(a),a.toggleViewFilter=a.toggleViewFilter.bind(a),a.state={isActive:e.isActive,filterOption:a.props.hasTrials?S.FILTER_BY.STUDIES:S.FILTER_BY.INDICATION,uncertaintyLevel:e.uncertaintyLevel},a.isCheckedApplyingEditsDialog=!1,a}return l(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){var t={};this.props.isActive!==e.isActive&&(t=o({},t,{isActive:e.isActive})),this.props.uncertaintyLevel!==e.uncertaintyLevel&&(t=o({},t,{uncertaintyLevel:e.uncertaintyLevel})),this.setState(t)}},{key:"toggleActive",value:function(){var e=this,t=this.props,a=t.onActiveChange,n=t.onFilterChange;this.setState({isActive:!this.state.isActive,filterOption:this.state.isActive&&this.props.hasTrials?S.FILTER_BY.STUDIES:this.state.filterOption},function(){a(e.state.isActive),n(e.state.filterOption)})}},{key:"toggleViewFilter",value:function(){var e=this,t=this.props.onFilterChange;this.setState({filterOption:this.state.filterOption===S.FILTER_BY.INDICATION&&this.props.hasTrials?S.FILTER_BY.STUDIES:S.FILTER_BY.INDICATION},function(){t(e.state.filterOption)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isActive,n=t.uncertaintyLevel,r=t.filterOption,i=this.props,l=i.isShowApplyingEditsDialog,o=i.onCloseDialog,s=i.enableMultiedit,u=i.multiEditType,c=i.isCohortView,f=i.disabled,p=i.children,m=i.hideHistorical,E=(0,h.default)("benchmarks-toolbar",{disabled:f},{active:a});return d.default.createElement("div",{className:E},!m&&d.default.createElement(v.FlexBox,{justifyContent:"center",alignItems:"center"},d.default.createElement("span",{className:"description"},"Historical Benchmarks"),d.default.createElement("div",{className:"active-status-toggler"},d.default.createElement("span",{className:(0,h.default)({selected:a}),onClick:f||a?void 0:this.toggleActive},"ON"),d.default.createElement(_.default,{className:"separator",size:"tiny"}),d.default.createElement("span",{className:(0,h.default)({selected:!a}),onClick:!f&&a?this.toggleActive:void 0},"OFF")),a&&y.Icons.ARROW_RIGHT,a&&d.default.createElement("div",{className:"view-filter-toggler"},d.default.createElement("span",{className:(0,h.default)({selected:r===S.FILTER_BY.INDICATION}),onClick:r!==S.FILTER_BY.INDICATION?this.toggleViewFilter:void 0},"By Indication"),d.default.createElement(_.default,{className:"separator",size:"tiny"}),d.default.createElement("span",{className:(0,h.default)({selected:r===S.FILTER_BY.STUDIES},{disabled:!this.props.hasTrials}),onClick:r!==S.FILTER_BY.STUDIES&&this.props.hasTrials?this.toggleViewFilter:void 0},"By Reference Studies"))),!a&&d.default.createElement("div",{className:"toolbar-options__wrapper"},p),a&&!c?d.default.createElement(g.default,{mouseEnterDelay:.3,align:{offset:[-30,-5]},overlay:d.default.createElement("div",null,"Estimations of uncertainty for study forecast ",d.default.createElement("br",null),"is based on a normalized absolute error metric (n.a.e),",d.default.createElement("br",null),"accounting for both ",d.default.createElement("br",null),"(1) availability of data ",d.default.createElement("br",null),"(2) variability of that historical data ",d.default.createElement("br",null),d.default.createElement("br",null),d.default.createElement("strong",null,"LOW:")," up to 30% n.a.e ",d.default.createElement("br",null),d.default.createElement("strong",null,"MEDIUM:")," up to 70% n.a.e ",d.default.createElement("br",null),d.default.createElement("strong",null,"HIGH:")," greater than 70% n.a.e ",d.default.createElement("br",null))},d.default.createElement("div",{style:{marginLeft:"auto"}},d.default.createElement(v.FlexBox,{justifyContent:"center",alignItems:"center"},d.default.createElement("span",{className:"description"},"Forecast Uncertainty:"),d.default.createElement("span",{className:"uncertainty-value"}," ",n)))):null,s&&!a&&d.default.createElement(g.default,{mouseEnterDelay:.3,overlayClassName:"benchmarks-tooltip",align:{offset:[0,3]},overlay:d.default.createElement("span",null,"Multi column edit")},d.default.createElement("div",{style:{borderLeft:"1px solid grey",paddingLeft:"10px"},className:(0,h.default)("button-edit",{disabled:u===O.MULTI_EDIT_TYPE.EDIT}),onClick:function(){u!==O.MULTI_EDIT_TYPE.EDIT&&e.props.onEdit("edit")}},y.Icons.MULTIPLE_EDIT)),s&&!a&&!c&&d.default.createElement(g.default,{mouseEnterDelay:.3,overlayClassName:"benchmarks-tooltip",align:{offset:[-4,3]},overlay:d.default.createElement("span",null,"Remove user ",d.default.createElement("br",null)," constraints by column")},d.default.createElement("div",{className:(0,h.default)("button-unlock",{disabled:u===O.MULTI_EDIT_TYPE.UNLOCK}),onClick:function(){u!==O.MULTI_EDIT_TYPE.UNLOCK&&e.props.onEdit("unlock")}},y.Icons.UNLOCK)),d.default.createElement(C.default,{multiEditType:u,isShow:l,onChange:this.handleChangeMultiEdits,onClose:o,onSubmit:this.handleSubmitMultiEdits}))}}]),t}(u.PureComponent);T.defaultProps={isActive:!1,isMultiEditing:!1,hasTrials:!0,uncertaintyLevel:S.UNCERTAINTY.MEDIUM,isCohortView:!1,disabled:!1,isShowApplyingEditsDialog:!1,onCloseDialog:void 0,onSubmitDialog:void 0,enableMultiedit:!0,isUnlockEdits:!1,multiEditType:null,children:null,hideHistorical:!1},T.propTypes={isActive:f.default.bool,multiEditType:f.default.string,hasTrials:f.default.bool,uncertaintyLevel:f.default.oneOf([S.UNCERTAINTY.HIGH,S.UNCERTAINTY.LOW,S.UNCERTAINTY.MEDIUM,"N/A"]),onActiveChange:f.default.func.isRequired,onFilterChange:f.default.func.isRequired,onEdit:f.default.func.isRequired,disabled:f.default.bool,isCohortView:f.default.bool,isShowApplyingEditsDialog:f.default.bool,onCloseDialog:f.default.func,onSubmitDialog:f.default.func,enableMultiedit:f.default.bool,children:f.default.node,hideHistorical:f.default.bool},t.default=T},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s);a(2125);var d=function(e){var t=e.children,a=e.disabled,n=e.onClick,r=e.size,l=e.type,o=e.label,s=e.fixed,d=e.className,c=(0,u.default)("fpo-button","fpo-button-"+r,"fpo-button-"+l,{"fpo-button-fixed":s},d);return i.default.createElement("button",{className:c,disabled:a,onClick:a?void 0:n},function(){return t?i.default.isValidElement(t)?t:i.default.createElement("span",null,t):i.default.createElement("span",null,o)}())};d.defaultProps={children:null,disabled:!1,fixed:!1,label:"Button label",onClick:null,size:"regular",type:"primary",className:null},d.propTypes={children:o.default.oneOfType([o.default.element,o.default.string]),disabled:o.default.bool,fixed:o.default.bool,label:o.default.string,onClick:o.default.func,size:o.default.oneOf(["small","regular","large"]),type:o.default.oneOf(["primary","secondary","transparent"]),className:o.default.string},t.default=d},function(e,t,a){"use strict";function n(e){var t=e.append("g").style("display","none"),a=t.append("g").classed("point-tooltip",!0).style("display",null).attr("transform","translate(0, 0)");return a.append("polygon").style("fill",f.COLORS.BLACK).attr("points","0,-30 100,-30 100,0 0,0"),a.append("rect").attr("width",90).attr("height",28).attr("x",100).attr("y",-29).style("fill",f.COLORS.WHITE).style("stroke",f.COLORS.BLACK).style("stroke-width",2),a.append("text").attr("text-anchor","middle").style("fill",f.COLORS.WHITE).classed("tooltip-text",!0).attr("transform","translate(50, -10)").text("T/LPFT"),a.append("text").classed("tooltip-value",!0).attr("text-anchor","start").style("fill",f.COLORS.BLACK).style("font-size","16px").attr("transform","translate(105, -10)").text(""),a.append("line").style("stroke-width",2).attr("x1",50).attr("x2",50).attr("y2",30),t}function r(e,t,a,n,r,i,l,o){var s=e.append("g");return s.attr("transform","translate(-180, 4)").style("cursor",a&&"All"!==t.cohortName?"pointer":"default").style("opacity",a?1:.5),s.append("text").style("font-size",18).style("font-weight",500).style("font-family","VoltaModern, sans-serif").text(t.cohortName),n||s.append("line").attr("x2",136).attr("y1",8).attr("y2",8).attr("class",0===r?"cohort-name-underline-bold":"cohort-name-underline-regular").st({stroke:f.COLORS.BLACK,strokeWidth:0===r?"2px":"1px"}),s.append("line").attr("x1",32).attr("x2",40).attr("y1",4).attr("y2",-18).classed("line slash-separator",!0).st({stroke:f.COLORS.MID_GREY,strokeWidth:"1px"}),s.append("text").attr("transform","translate(50)").style("font-size",16).style("font-family","VoltaModern, sans-serif").text(n?t.fromPrevApproved?"Prev.Approved":"Approved":"Global ("+t.countriesLength+")").on("click",function(){a&&"All"!==t.cohortName&&i(l,o,t.cohortId)}),s}function i(e,t,a,n,r,i,l,o,s,u){var d=e.append("g");return d.attr("transform","translate(-180, 4)").style("cursor",a&&"All"!==t.cohortName?"pointer":"default").style("opacity",a?1:.5),u&&d.append("line").at({x1:50,x2:136,y1:8,y2:8}).attr("class",0===r?"cohort-name-underline-bold":"cohort-name-underline-regular").st({stroke:f.COLORS.BLACK,strokeWidth:0===r?"2px":"1px"}),d.append("line").attr("x1",32).attr("x2",40).attr("y1",4).attr("y2",-18).st({stroke:f.COLORS.MID_GREY,strokeWidth:"1px"}).classed("line slash-separator",!0),d.append("text").attr("transform","translate(50)").style("font-size",16).style("font-family","VoltaModern, sans-serif").text(s).on("click",function(){a&&"All"!==t.cohortName&&i(l,o,t.cohortId)}),d}function l(e,t,a,n,r,i,l,o,s,u){var d=!l||o||u?{stroke:f.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6}:{stroke:f.COLORS.GREEN,strokeWidth:"4px",opacity:.2},c=l&&!u?{stroke:f.COLORS.LIGHT_GREEN,strokeWidth:"16px"}:{stroke:f.COLORS.GREY,strokeWidth:"16px"};r&&!o&&e.append("line").at({x1:i(t)}).attr("x2",i(l&&a&&a.isValid()?a:n)).classed("milestones-bar-background",!l||u).classed("milestones-bar-background-approved",l&&!u).st(c);var h=e.append("line").at({x1:i(t)}).attr("x2",i(l&&a&&a.isValid()?a:n)).classed("milestones-bar",!l||o||u).classed("milestones-bar-approved",l&&!o&&!u).st(d);o&&(h.st({strokeDasharray:"4 4"}),e.append("g").attr("transform","translate("+i(t)+")").append("rect").attr("width",i(s)-i(t)).attr("y",-2).attr("height",4).style("fill",f.COLORS.GREY)),l&&s&&e.append("rect").attr("x",i(t)).attr("width",i(s)).attr("y",r&&!o?-8:-2).attr("height",r&&!o?16:4).style("fill","url(#actualPattern1)").attr("opacity",.04),!l&&a&&a.isValid()&&((0,p.drawBackgroundRect)(e,function(){return i(a<n?a:n)},r?-8:-2,function(){return a<n?i(n)-i(a):i(a)-i(n)},r?16:4,function(){return a<n?f.COLORS.GREEN:f.COLORS.RED},1,!0),r||(0,p.appendRangeLabel)(e,function(){return a<=n?"end":"start"},(a>n?"+":"")+a.diff(n,"days")+"d",function(){return a<=n?"translate("+(i(n)-20)+", -14)":"translate("+(i(n)+20)+", -14)"},function(){return a<=n?f.COLORS.GREEN:f.COLORS.RED},!0))}function o(e,t,a,n,r,i,l,o,s,u,d,c,h,v){e.forEach(function(e){switch(e.label){case"FP":if(e.date&&e.date.isValid()&&e.date.format("YYYY-MM-DD")!==n.format("YYYY-MM-DD")&&!r){var m=t.append("g").classed("mark-g",!0).style("opacity",.9).attr("transform","translate("+(a(e.date)-12)+","+-12+")");m.append("defs").append("path").attr("id","a").attr("d","M12 7l5 5-5 5-5-5z"),m.append("g").attr("fill","none").attr("fill-rule","evenodd").append("use").attr("fill",f.COLORS.BLACK).attr("xlink:href","#a"),m.append("line").attr("x1",12).attr("x2",20).attr("y1",4).attr("y2",12).style("stroke-linecap","square").style("stroke",f.COLORS.BLACK).style("stroke-width",2),m.append("line").attr("x1",12).attr("x2",20).attr("y1",20).attr("y2",12).style("stroke-linecap","square").style("stroke",f.COLORS.BLACK).style("stroke-width",2),"All"!==i.cohortName&&m.append("line").attr("class","hover-line").attr("x1",12).attr("x2",12).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.BLACK).style("stroke-width",2).style("display","none"),m.on("mouseover",function(){l(i,e,m)}),m.on("mouseout",function(){o(m)})}if(!r){var _=t.append("g").classed("mark-g",!0).style("opacity",e.date.isSame(n)?1:.3).attr("transform","translate("+a(n)+")");(0,p.drawFppIcon)(_,!0),s&&(0,p.appendTooltipToMilestone)(_,e.color,f.COLORS.WHITE,f.COLORS.BLACK,e.label,!0,!1)}break;case"FSIV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var E=(0,f.appendMilestone)(t,a(e.date),f.COLORS.YELLOW,"FSIV",-105,!0);"All"!==i.cohortName&&E.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.YELLOW).style("stroke-width",2).style("display","none"),E.on("mouseover",function(){l(i,e,E)}),E.on("mouseout",function(){o(E)})}break;case"FPFV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var g=(0,f.appendMilestone)(t,a(e.date),f.COLORS.PURPLE,"FPFV",-105,!0);"All"!==i.cohortName&&g.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.PURPLE).style("stroke-width",2).style("display","none"),g.on("mouseover",function(){l(i,e,g)}),g.on("mouseout",function(){o(g)})}break;case"FPFT":if(!r&&e.date&&e.date.isSameOrAfter(n)){var y=(0,f.appendMilestone)(t,a(e.date),f.COLORS.BLUE,"FPFT",-105,!0);"All"!==i.cohortName&&y.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.BLUE).style("stroke-width",2).style("display","none"),y.on("mouseover",function(){l(i,e,y)}),y.on("mouseout",function(){o(y)})}break;case"LPFV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var S=(0,f.appendMilestone)(t,a(e.date),f.COLORS.PURPLE,"LPFV",-105,!0);"All"!==i.cohortName&&S.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.PURPLE).style("stroke-width",2).style("display","none"),S.on("mouseover",function(){l(i,e,S)}),S.on("mouseout",function(){o(S)})}break;case"P/LPFT":if(!r&&e.date&&e.date.isSameOrAfter(n)){var b=t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(e.date)+",0)");(0,p.drawFilledCircle)(b,function(){return c?f.COLORS.BLACK:e.date.isAfter(u)?f.COLORS.RED:f.COLORS.GREEN},!1),s&&!c&&(0,p.appendTooltipToMilestone)(b,e.color,f.COLORS.WHITE,f.COLORS.BLACK,e.label,!0,!1),"All"!==i.cohortName&&b.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-30).attr("y2",-16).style("stroke",f.COLORS.BLACK).style("stroke-width",2).style("display","none"),b.on("mouseover",function(){l(i,e,b)}),b.on("mouseout",function(){o(b)})}break;case"ACTUAL":if(!r&&e.date&&e.date.isSameOrAfter(n)&&c){var C=t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(e.date)+",0)");v&&C.append("line").attr("y1",12).attr("y2",34).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2"),s?C.append("line").attr("y1",-22).attr("y2",-42).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2):C.append("line").attr("y1",-12).attr("y2",-64).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2"),(0,f.appendMilestone)(C,0,f.COLORS.BLACK,"ACTUAL",-105,!0)}break;case"T/LPFT":default:if(c){if(!r&&h&&h.isSameOrAfter(n)){var O=t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(h)+",0)");O.append("line").attr("y1",4).attr("y2",-64).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2"),v&&O.append("line").attr("y1",6).attr("y2",34).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2")}break}var T=t.append("g").classed("tLpft-group",!0).attr("transform","translate("+a(e.date)+",0)");if(T.append("line").attr("y1",7).attr("y2",-50).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2"),!r&&e.date.isSameOrAfter(n)&&s){if(d&&u&&d.isValid()&&u.isValid()){var R=T.append("g").classed("global-row-tooltip",!0).style("display",null).attr("transform",function(){return d<=u?"translate(-60, -50)":"translate(10, -50)"});R.append("polygon").style("fill",function(){return d<=u?f.COLORS.GREEN:f.COLORS.RED}).attr("points",function(){return d<=u?p.tooltipPathLeft:p.tooltipPathRight}),R.append("rect").attr("width",90).attr("height",28).attr("x",50).attr("y",-39).style("fill",f.COLORS.WHITE).style("stroke",f.COLORS.BLACK).style("stroke-width",2),R.append("text").attr("text-anchor","middle").style("fill",f.COLORS.WHITE).classed("tooltip-text",!0).attr("transform","translate("+(d<=u?20:30)+", 15)").text((d>u?"+":"")+d.diff(u,"days")+"d")}(0,p.drawFilledCircle)(T,f.COLORS.BLACK,!1)}}})}function s(e,t,a,n,r,i,l,o,s,u,d,c,h,v){e.forEach(function(e){switch(e.label){case"FP":if(e.date&&e.date.isValid()&&e.date.format("YYYY-MM-DD")!==n.format("YYYY-MM-DD")&&!r){var s=t.append("g").classed("mark-g",!0).style("opacity",.9).attr("transform","translate("+(a(e.date)-12)+","+-12+")");s.append("defs").append("path").attr("id","a").attr("d","M12 7l5 5-5 5-5-5z"),s.append("g").attr("fill","none").attr("fill-rule","evenodd").append("use").attr("fill",f.COLORS.BLACK).attr("xlink:href","#a"),s.append("line").attr("x1",12).attr("x2",20).attr("y1",4).attr("y2",12).style("stroke-linecap","square").style("stroke",f.COLORS.BLACK).style("stroke-width",2),s.append("line").attr("x1",12).attr("x2",20).attr("y1",20).attr("y2",12).style("stroke-linecap","square").style("stroke",f.COLORS.BLACK).style("stroke-width",2),"All"!==i.cohortName&&s.append("line").attr("class","hover-line").attr("x1",12).attr("x2",12).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.BLACK).style("stroke-width",2).style("display","none"),s.on("mouseover",function(){l(i,e,s)}),s.on("mouseout",function(){o(s)})}if(!r){var u=t.append("g").classed("mark-g",!0).style("opacity",e.date.isSame(n)?1:.3).attr("transform","translate("+a(n)+")");(0,p.drawFppIcon)(u,!0)}break;case"FSIV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var d=(0,f.appendMilestone)(t,a(e.date),f.COLORS.YELLOW,"FSIV",-105,!0);"All"!==i.cohortName&&d.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.YELLOW).style("stroke-width",2).style("display","none"),d.on("mouseover",function(){l(i,e,d)}),d.on("mouseout",function(){o(d)})}break;case"FPFV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var m=(0,f.appendMilestone)(t,a(e.date),f.COLORS.PURPLE,"FPFV",-105,!0);"All"!==i.cohortName&&m.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.PURPLE).style("stroke-width",2).style("display","none"),m.on("mouseover",function(){l(i,e,m)}),m.on("mouseout",function(){o(m)})}break;case"FPFT":if(!r&&e.date&&e.date.isSameOrAfter(n)){var _=(0,f.appendMilestone)(t,a(e.date),f.COLORS.BLUE,"FPFT",-105,!0);"All"!==i.cohortName&&_.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.BLUE).style("stroke-width",2).style("display","none"),_.on("mouseover",function(){l(i,e,_)}),_.on("mouseout",function(){o(_)})}break;case"LPFV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var E=(0,f.appendMilestone)(t,a(e.date),f.COLORS.PURPLE,"LPFV",-105,!0);"All"!==i.cohortName&&E.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.PURPLE).style("stroke-width",2).style("display","none"),E.on("mouseover",function(){l(i,e,E)}),E.on("mouseout",function(){o(E)})}break;case"P/LPFT":!r&&c&&c.isSameOrAfter(n)&&t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(c)+",0)").append("line").attr("y1",v?44:4).attr("y2",h?-106:-34).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2");break;case"ACTUAL":!r&&e.date&&e.date.isSameOrAfter(n)&&t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(e.date)+",0)").append("line").attr("y1",v?44:4).attr("y2",h?-106:-32).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2")}})}function u(e,t,a,n,r,i,l){r&&e.append("line").at({x1:i(l)}).attr("x2",i(a<n?a:n)).classed("milestones-bar-background",!0).st({stroke:f.COLORS.GREY,strokeWidth:"16px"}),e.append("line").at({x1:i(l)}).attr("x2",i(a<n?a:n)).classed("milestones-bar",!0).st({stroke:f.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6}),(0,p.drawBackgroundRect)(e,function(){return i(a<n?a:n)},-2,function(){return a<n?i(n)-i(a):i(a)-i(n)},4,function(){return a<n?f.COLORS.GREEN:f.COLORS.RED},1,!0),(0,p.appendRangeLabel)(e,function(){return a<=n?"end":"start"},(a>n?"+":"")+a.diff(n,"days")+"d",function(){return a<=n?"translate("+(i(n)-20)+", -14)":"translate("+(i(n)+20)+", -14)"},function(){return a<=n?f.COLORS.GREEN:f.COLORS.RED},!0)}function d(e,t,a,n,r,i,l,o,s,u,d,c,h,v){e.forEach(function(e){switch(e.label){case"FP":if(e.date&&e.date.format("YYYY-MM-DD")!==n.format("YYYY-MM-DD")&&!r){var u=e.date.isBefore(v)?.3:1,d=t.append("g").classed("mark-g",!0).style("opacity",u).attr("transform","translate("+(a(e.date)-12)+","+-12+")");d.append("defs").append("path").attr("id","a").attr("d","M12 7l5 5-5 5-5-5z"),d.append("g").attr("fill","none").attr("fill-rule","evenodd").append("use").attr("fill",f.COLORS.BLACK).attr("xlink:href","#a"),d.append("line").attr("x1",12).attr("x2",20).attr("y1",4).attr("y2",12).style("stroke-linecap","square").style("stroke",f.COLORS.BLACK).style("stroke-width",2),d.append("line").attr("x1",12).attr("x2",20).attr("y1",20).attr("y2",12).style("stroke-linecap","square").style("stroke",f.COLORS.BLACK).style("stroke-width",2),"All"!==i.cohortName&&d.append("line").attr("class","hover-line").attr("x1",12).attr("x2",12).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.BLACK).style("stroke-width",2).style("display","none"),d.on("mouseover",function(){l(i,e,d)}),d.on("mouseout",function(){o(d)})}if(!r){var m=t.append("g").classed("mark-g",!0).style("opacity",e.date.isSame(n)?1:.3).attr("transform","translate("+a(n)+")");(0,p.drawFppIcon)(m,!0)}break;case"FSIV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var _=e.date.isBefore(v)?.3:1,E=(0,f.appendMilestone)(t,a(e.date),f.COLORS.YELLOW,"FSIV",-105,!0,_);"All"!==i.cohortName&&E.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.YELLOW).style("stroke-width",2).style("display","none"),E.on("mouseover",function(){l(i,e,E)}),E.on("mouseout",function(){o(E)})}break;case"FPFV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var g=e.date.isBefore(v)?.3:1,y=(0,f.appendMilestone)(t,a(e.date),f.COLORS.PURPLE,"FPFV",-105,!0,g);"All"!==i.cohortName&&y.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.PURPLE).style("stroke-width",2).style("display","none"),y.on("mouseover",function(){l(i,e,y)}),y.on("mouseout",function(){o(y)})}break;case"FPFT":if(!r&&e.date&&e.date.isSameOrAfter(n)){var S=e.date.isBefore(v)?.3:1,b=(0,f.appendMilestone)(t,a(e.date),f.COLORS.BLUE,"FPFT",-105,!0,S);"All"!==i.cohortName&&b.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.BLUE).style("stroke-width",2).style("display","none"),b.on("mouseover",function(){l(i,e,b)}),b.on("mouseout",function(){o(b)})}break;case"LPFV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var C=e.date.isBefore(v)?.3:1,O=(0,f.appendMilestone)(t,a(e.date),f.COLORS.PURPLE,"LPFV",-105,!0,C);"All"!==i.cohortName&&O.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.PURPLE).style("stroke-width",2).style("display","none"),O.on("mouseover",function(){l(i,e,O)}),O.on("mouseout",function(){o(O)})}break;case"A/LPFT":if(!r&&e.date&&e.date.isSameOrAfter(n)){var T=t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(e.date)+",0)");(0,p.drawFilledCircle)(T,function(){return e.date.isAfter(h)?f.COLORS.RED:f.COLORS.GREEN},!1),s&&!c&&(0,p.appendTooltipToMilestone)(T,e.color,f.COLORS.WHITE,f.COLORS.BLACK,e.label,!0,!1),"All"!==i.cohortName&&T.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-30).attr("y2",-16).style("stroke",f.COLORS.BLACK).style("stroke-width",2).style("display","none"),T.on("mouseover",function(){l(i,e,T)}),T.on("mouseout",function(){o(T)})}break;case"ACTUAL":if(!r&&e.date&&e.date.isSameOrAfter(n)&&c){var R=t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(e.date)+",0)");s?R.append("line").attr("y1",-22).attr("y2",-42).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2):R.append("line").attr("y1",-12).attr("y2",-64).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2"),(0,f.appendMilestone)(R,0,f.COLORS.BLACK,"ACTUAL",-105,!0)}break;default:!r&&h&&h.isSameOrAfter(n)&&t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(h)+",0)").append("line").attr("y1",4).attr("y2",-64).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2")}})}Object.defineProperty(t,"__esModule",{value:!0}),t.drawTooltip=n,t.drawLabelGroup=r,t.drawSecondaryLabelGroup=i,t.drawMilestonesBar=l,t.drawMilestones=o,t.drawActualMilestones=s,t.drawAdjustedMilestonesBar=u,t.drawAdjustedMilestones=d;var c=a(234),f=(function(e){e&&e.__esModule}(c),a(130)),p=a(237)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(23),p=a(116),h=a(166),v=a(234),m=(n(v),a(11)),_=n(m),E=a(191),g=n(E),y=a(130),S=a(782);a(457),a(2127);var b=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={data:e.data,scenario:e.scenario,studyId:e.studyId},a.renderChart=a.renderChart.bind(a),a.handleResize=a.handleResize.bind(a),a.debounced=(0,g.default)(a.renderChart,200),a}return l(t,e),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.renderChart()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({data:e.data,scenario:e.scenario,studyId:e.studyId},function(){t.renderChart()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){this.debounced()}},{key:"renderChart",value:function(){function e(e,t,a){N.moveToFront(),N.style("display",null),N.attr("transform","translate("+(C(t.date)-50)+",10)"),N.select("rect").style("stroke",t.color),N.select("line").style("stroke",t.color),N.select("polygon").style("fill",t.color),N.select(".tooltip-text").text(e.cohortName+" - "+t.label),N.select(".tooltip-value").text(t.date.format("DD MMM YY")),a&&a.select(".hover-line").style("display",null)}function t(e){N.style("display","none"),e&&e.select(".hover-line").style("display","none")}var a=this;(0,f.select)("#svg_wrapper_cohorts-milestones_chart").select(".svg-container").remove();var n=this.state,r=n.data,i=n.scenario,l=n.studyId,o=this.props.isTracking,s=this.props.isAdjusted,u=this.container,d={top:30,right:160,bottom:70,left:180},c=50;o&&(c+=50),s&&(c+=50);var v=u.getBoundingClientRect().width-d.left-d.right,m=170+r.length*c-d.top-d.bottom,E=(0,f.select)("#svg_wrapper_cohorts-milestones_chart"),g=E.append("div").classed("svg-container",!0).append("svg").attr("width",v+d.left+d.right).attr("height",m+d.top+d.bottom);g.append("rect").at({x:-20,y:-20,width:v+d.left+d.right+40,height:m+d.top+d.bottom+40,fill:y.COLORS.WHITE}),(0,y.injectPatternDefs)(g,"actualPattern1");var b=g.append("g").attr("transform","translate("+d.left+","+d.top+")"),C=(0,p.scaleTime)().rangeRound([0,v]),O=void 0;r.forEach(function(e){O?e.maxDate.isAfter(O)&&(O=e.maxDate):O=e.maxDate});var T=r[0].minDate,R=r[0].milestones.find(function(e){return"T/LPFT"===e.label}).date,A=r[0].actualDate,I=r[0].milestones.find(function(e){return"P/LPFT"===e.label}).date,w=o?I:R;C.domain([T,O]);var N=(0,S.drawTooltip)(b),D=70;r.forEach(function(n,u){var d=0===u,f=n.isEmptyGeneric,p=n.isEmptyActual,h=n.isEmptyAdjusted,_=n.milestones,E=_.find(function(e){return"FP"===e.label}).date,g=_.find(function(e){return"P/LPFT"===e.label}).date,O=_.find(function(e){return"T/LPFT"===e.label}).date,R=n.actual_milestones,w=n.adjusted_milestones,N=E&&E.isValid(),P=n.fromPrevApproved;0!==u&&(D+=c);var L=b.append("g").attr("id","cohort_"+n.cohortId);L.attr("transform","translate(0, "+D+")"),(0,S.drawLabelGroup)(L,n,N,o,u,a.props.onCohortClick,l,i.id);var M=L.append("g").attr("transform","translate(0, 0)");if(r[0].isEmpty&&(b.append("rect").attr("x",15).attr("y",15).attr("width",v-30).attr("height",m-30).style("fill",y.COLORS.GREY),b.append("text").attr("x",v/2).attr("y",m/2).attr("dy",15).attr("text-anchor","middle").text("There is not enough data to build a chart")),!f&&E.isValid()&&(0,S.drawMilestonesBar)(M,E,g,O,d,C,o,!1,A,P),(0,S.drawMilestones)(_,M,C,T,f,n,e,t,d,O,g,o,I,p),o){var k=b.append("g").attr("id","actual_cohort_"+n.cohortId);k.attr("transform","translate(0, "+(D+40)+")"),(0,S.drawSecondaryLabelGroup)(k,n,N,o,u,a.props.onCohortClick,l,i.id,"Actuals",!s);var x=k.append("g").attr("transform","translate(0, 0)");if(!p&&E.isValid()&&(0,S.drawMilestonesBar)(x,E,I,O,d,C,o,!0,A),(0,S.drawActualMilestones)(R,x,C,T,p,n,e,t,d,O,g,I,f,h&&s),s){var j=b.append("g").attr("id","adjusted_cohort_"+n.cohortId);j.attr("transform","translate(0, "+(D+80)+")"),(0,S.drawSecondaryLabelGroup)(j,n,N,o,u,a.props.onCohortClick,l,i.id,"Adjusted",!0);var F=j.append("g").attr("transform","translate(0, 0)");if(!h&&E.isValid()){var U=w.find(function(e){return"A/LPFT"===e.label}).date;U&&(0,S.drawAdjustedMilestonesBar)(F,E,U,I,d,C,A),(0,S.drawAdjustedMilestones)(w,F,C,T,h,n,e,t,d,O,g,o,I,A)}}}});var P=(0,y.getMonthsTickValues)(T,O,10);C.domain([T,O]);var L=(0,h.axisBottom)().scale(C).tickValues(P).tickSizeOuter(0);b.append("rect").attr("width",C(O)).attr("height","28px").attr("y",m+15).style("fill",y.COLORS.GREY);var M=b.append("g").attr("transform","translate(0, "+m+")").attr("class","axis axis--x").call(L);M.selectAll("text").attr("class","tick").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif",fill:y.COLORS.BLACK,shapeRendering:"crispEdges",stroke:"none"}).style("text-anchor","middle").text(function(e){return(0,_.default)(e).format("MMM YY")}).attr("transform","translate(0, 50)"),M.selectAll("line").attr("class","tick-line").attr("y2","12").attr("transform","translate(0.5, 30)").st({fill:"none",stroke:y.COLORS.BLACK,shapeRendering:"crispEdges",strokeWidth:"1px"}),M.selectAll("path").st({fill:"none",stroke:y.COLORS.BLACK,opacity:0,shapeRendering:"crispEdges"});var k=M.append("g").attr("transform","translate(0, 15)");k.append("line").style("stroke",y.COLORS.BLACK).style("stroke-width",2).attr("y1",-32),k.append("polygon").style("fill",y.COLORS.WHITE).style("stroke",y.COLORS.BLACK).attr("points","0,0, 15,0, 7.5,7.5").attr("transform","translate(-7.5,28)"),k.append("polygon").style("stroke",y.COLORS.BLACK).style("fill",y.COLORS.WHITE).attr("points","0,0, 15,0, 7.5,-7.5").attr("transform","translate(-7.5)"),k.append("rect").attr("x",-30).attr("width",64).attr("height",28).style("stroke",y.COLORS.BLACK).style("fill",y.COLORS.WHITE),k.append("text").attr("class","date").attr("transform","translate(0,20)").attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).style("fill",y.COLORS.BLACK).text(T.format("DD MMM"));var x=M.append("g").attr("transform","translate("+C(w)+", 15)");x.append("line").style("stroke",y.COLORS.BLACK).style("stroke-width",2).style("stroke-dasharray","6 2").attr("y2",-78),x.append("polygon").style("fill",y.COLORS.BLACK).attr("points","0,0, 15,0, 7.5,7.5").attr("transform","translate(-7.5,28)"),x.append("polygon").style("fill",y.COLORS.BLACK).attr("points","0,0, 15,0, 7.5,-7.5").attr("transform","translate(-7.5)"),x.append("rect").attr("x",-30).attr("width",64).attr("height",28).style("fill",y.COLORS.BLACK),x.append("text").attr("class","date").attr("transform","translate(0,20)").attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).style("fill",y.COLORS.WHITE).text(w.format("DD MMM"));var j=b.append("g").attr("transform","translate("+C(w)+",30)"),F=j.append("g").classed("point-tooltip",!0).style("display",null).attr("transform","translate(-1, -10)");if(F.append("polygon").style("fill",y.COLORS.BLACK).attr("points","0,-40 60,-40 60,-10 10,-10 0,0 0,-40"),F.append("text").attr("text-anchor","middle").style("fill",y.COLORS.WHITE).style("font-family","VoltaModern, sans-serif").classed("tooltip-text",!0).attr("transform","translate(30, -20)").text(o?"P/LPFT":"T/LPFT"),F.append("text").attr("text-anchor","start").style("fill",y.COLORS.BLACK).style("font-size","16px").style("font-family","VoltaModern, sans-serif").attr("transform","translate(70, -20)").text(w.format("DD MMM YY")),o){var U=M.append("g").attr("transform","translate("+C(A)+", 15)");U.append("line").style("stroke",y.COLORS.BLACK).style("stroke-width",2).style("stroke-dasharray","6 2").attr("y2",-78),U.append("polygon").style("fill",y.COLORS.BLACK).attr("points","0,0, 15,0, 7.5,7.5").attr("transform","translate(-7.5,28)"),U.append("polygon").style("fill",y.COLORS.BLACK).attr("points","0,0, 15,0, 7.5,-7.5").attr("transform","translate(-7.5)"),U.append("rect").attr("x",-30).attr("width",64).attr("height",28).style("fill",y.COLORS.BLACK),U.append("text").attr("class","date").attr("transform","translate(0,20)").attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).style("fill",y.COLORS.WHITE).text(A.format("DD MMM"))}}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{ref:function(t){e.container=t},className:"svg-wrapper",id:"svg_wrapper_cohorts-milestones_chart"})}}]),t}(u.default.Component);b.defaultProps={isTracking:!1,isAdjusted:!1},b.propTypes={data:c.default.array.isRequired,scenario:c.default.object.isRequired,onCohortClick:c.default.func.isRequired,studyId:c.default.number.isRequired,isTracking:c.default.bool,isAdjusted:c.default.bool},t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(783),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),h=a(16),v=a(6);a(2128);var m=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={cohorts:e.cohorts,scrollPosition:0,hasLeftOffset:!1,hasRightOffset:!1},a.onScrollStart=a.onScrollStart.bind(a),a.onScrollLeft=a.onScrollLeft.bind(a),a.onScrollRight=a.onScrollRight.bind(a),a.alignScroll=a.alignScroll.bind(a),a}return l(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this.hasLeftOffset(),t=this.hasRightOffset();this.state.hasLeftOffset===e&&this.state.hasRightOffset===t||this.setState({hasLeftOffset:e,hasRightOffset:t}),this.alignScroll()}},{key:"componentWillReceiveProps",value:function(e){this.setState({cohorts:e.cohorts,scrollPosition:this.state.scrollPosition})}},{key:"componentDidUpdate",value:function(e){var t=this.hasLeftOffset(),a=this.hasRightOffset();this.state.hasLeftOffset===t&&this.state.hasRightOffset===a||this.setState({hasLeftOffset:t,hasRightOffset:a}),this.props.active!==e.active&&this.alignScroll()}},{key:"onScrollStart",value:function(){this.setState({scrollPosition:0})}},{key:"onScrollLeft",value:function(){var e=this.state.scrollPosition+this.getScrollStep();this.setState({scrollPosition:e>0?0:e})}},{key:"onScrollRight",value:function(){var e=this.state.scrollPosition-this.getScrollStep(),t=this.scrollableEl.clientWidth-this.scrollableInnerEl.clientWidth;this.setState({scrollPosition:e<t?t-138:e})}},{key:"getScrollStep",value:function(){return.85*this.scrollableEl.clientWidth}},{key:"hasLeftOffset",value:function(){return!!this.scrollableEl&&0!==this.state.scrollPosition}},{key:"hasRightOffset",value:function(){if(!this.scrollableEl)return!1;var e=this.scrollableEl.clientWidth,t=this.scrollableInnerEl.clientWidth,a=e-t;return t>e&&this.state.scrollPosition>a}},{key:"alignScroll",value:function(){if(this.scrollableEl&&!(this.scrollableInnerEl.clientWidth<=this.scrollableEl.clientWidth)&&this.props.active){var e=this.scrollableInnerEl.getBoundingClientRect(),t=this.scrollableInnerEl.querySelector(".cohort-filter__cohorts__item--active").getBoundingClientRect(),a=-1*parseInt(t.left-e.left,10);if(this.state.scrollPosition<a)this.setState({scrollPosition:a});else{var n=t.left+t.width+this.state.scrollPosition,r=n-e.left;if(r>this.scrollableEl.clientWidth){var i=this.scrollableEl.clientWidth-r;this.setState({scrollPosition:this.state.scrollPosition+i+-80})}}}}},{key:"renderTabs",value:function(){var e=this,t=this.props,a=t.studyId,n=t.scenarioId,r=t.active,i=this.state.cohorts;if(0===i.length)return null;var l=u.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12"},u.default.createElement("g",{fill:"none",fillRule:"evenodd"},u.default.createElement("path",{fill:"#FFF",d:"M2 0v12H0V0zM12 1.4L10.6 0l-6 6 6 6 1.4-1.4L7.4 6z"})));return u.default.createElement("div",{className:"cohort-filter__cohorts"},u.default.createElement("div",{className:(0,p.default)("cohort-filter__scrollable-nav",{"cohort-filter__hidden":!(this.state.hasLeftOffset||this.state.hasRightOffset)})},u.default.createElement("div",{className:(0,p.default)("cohort-filter__scrollable-nav-start",{"cohort-filter__hidden":!(this.state.hasLeftOffset&&!this.state.hasRightOffset)}),onClick:this.onScrollStart},l),u.default.createElement("div",{className:(0,p.default)("cohort-filter__scrollable-nav-left",{"cohort-filter__hidden":!this.state.hasLeftOffset}),onClick:this.onScrollLeft},v.Icons.CHEVRON_RIGTH),u.default.createElement("div",{className:(0,p.default)("cohort-filter__scrollable-nav-right",{"cohort-filter__hidden":!this.state.hasRightOffset}),onClick:this.onScrollRight},v.Icons.CHEVRON_RIGTH)),u.default.createElement("div",{className:"cohort-filter__cohorts__scrollable",ref:function(t){e.scrollableEl=t}},u.default.createElement("div",{className:"cohort-filter__cohorts__scrollable__inner",style:{transform:"translateX("+this.state.scrollPosition+"px)"},ref:function(t){e.scrollableInnerEl=t}},i.map(function(e,t){return u.default.createElement("div",{key:e.id,title:e.name,className:(0,p.default)("cohort-filter__cohorts__item",{"cohort-filter__cohorts__item--active":e.id===+r})},u.default.createElement("div",{className:(0,p.default)("link__container",{disabled:!e.fp||!e.fp.isValid()})},u.default.createElement(h.NavLink,{to:"/studies/"+a+"/scenarios/"+n+"/cohorts/"+e.id,title:e.name},u.default.createElement("div",{className:"link__wrapper"},u.default.createElement("b",null,"C",t+1)," - ",e.name.length>30?e.name.substr(0,30)+"...":e.name))))}))))}},{key:"render",value:function(){var e=this.props,t=e.cohorts,a=e.studyId,n=e.scenarioId,r=e.active;return u.default.createElement("div",{className:"cohort-filter"},u.default.createElement("div",{className:(0,p.default)("cohorts-filter__all-cohorts--wrapper",{active:!r})},u.default.createElement("div",{className:"cohorts-tabset__cohorts-icon"},v.Icons.COHORTS),u.default.createElement("div",{className:(0,p.default)("cohorts-tabset__cohort_all","h3","cohorts-tabset__cohort")},u.default.createElement(h.NavLink,{to:"/studies/"+a+"/scenarios/"+n+"/cohorts"},"All Cohorts (",t.length,")"))),this.renderTabs())}}]),t}(s.Component);m.defaultProps={cohorts:[],active:void 0},m.propTypes={cohorts:c.default.arrayOf(c.default.shape({id:c.default.number.isRequired,name:c.default.string.isRequired})),studyId:c.default.string.isRequired,scenarioId:c.default.string.isRequired,active:c.default.oneOfType([c.default.number,c.default.string])},t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(785),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(74),c=n(d);a(2129);var f=a(197),p=n(f),h=function(e){var t=e.activeFilter,a=e.onClickHandler,n=e.onRegionSelect,r=e.onCountrySelect,l=e.countries,o=e.regions,s=function(e){return i.default.createElement("div",{key:e,className:(0,u.default)("filter-item",{active:t===e}),onClick:function(){return a(e)}},e)},f=Object.keys(p.default).reduce(function(e,t){return t.includes("LPFT")?e.lpftItems.push(s(p.default[t])):e.visualizationItems.push(s(p.default[t])),e},{lpftItems:[],visualizationItems:[]}),h=f.lpftItems,v=f.visualizationItems;return i.default.createElement("div",{className:"comparator-filters"},i.default.createElement("div",{className:"column left"},i.default.createElement("div",{className:"lpft-block block"},h),i.default.createElement("div",{className:"rates-block block"},v)),i.default.createElement("div",{className:"column right"},i.default.createElement("div",{className:"countries-dropdown-block block"},i.default.createElement("div",{className:"filter-item",style:{width:"125px",display:"flex",flexDirection:"column",marginRight:"12px"}},i.default.createElement(c.default,{narrow:!0,onOptionSelect:n},o.map(function(e){return i.default.createElement(d.DropdownOption,{key:e.value,label:e.label,value:e.value,selected:e.selected})}))),i.default.createElement("div",{className:"filter-item",style:{width:"225px",display:"flex",flexDirection:"column"}},i.default.createElement(d.DropdownSelectFilterable,{narrow:!0,placeholder:"Country",onOptionSelect:r},l.map(function(e){return i.default.createElement(d.DropdownOption,{key:e.value,label:e.label,value:e.value,selected:e.selected})}))))))};h.defaultProps={activeFilter:p.default.LPFT_ALL},h.propTypes={activeFilter:o.default.oneOf(Object.values(p.default)),onClickHandler:o.default.func.isRequired,onRegionSelect:o.default.func.isRequired,onCountrySelect:o.default.func.isRequired,countries:o.default.array.isRequired,regions:o.default.array.isRequired},t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(787),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){switch(e){case _.default.START_UP:return"STARTUP";case _.default.SCREENING:return"SCREENING";case _.default.RANDOMISATION:return"RANDOMISATION";case _.default.LPFT_ALL:case _.default.LPFT_EARLY:case _.default.LPFT_LATE:default:return"LPFT"}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(419),d=n(u),c=a(466),f=n(c),p=a(17),h=a(864),v=n(h),m=a(197),_=n(m),E=a(237),g=a(241);a(727);var y=function(e){var t=e.scenario,a=e.isTitle,n=e.activeFilter,i=e.scenarioNumber,o=e.minDate,s=e.maxDate,u=e.srRrViewType,d=t.fullData.map(function(e){var d=void 0,c=(0,g.getPredictedDate)(e,!1);if(e.fpp_fpfv&&c){var p=t.fp,h=e.fpfv,m=h.clone().add(t.fpfv_fpft,"w"),_=h.clone().add(e.fpfv_lpfv,"d"),y=c,S=t.end_date;d={emptyRow:!1,regionId:e.region_id,milestones:[{label:"FP",date:p,iconType:"CIRCLE",color:E.COLORS.BLACK},{label:"FPFV",date:h,iconType:"DIAMOND",color:E.COLORS.PURPLE},{label:"FPFT",date:m,iconType:"DIAMOND",color:E.COLORS.BLUE},{label:"LPFV",date:_,iconType:"DIAMOND",color:E.COLORS.PURPLE},{label:"P/LPFT",date:y,iconType:"CIRCLE_FILLED",color:E.COLORS.BLACK},{label:"T/LPFT",date:S,iconType:"CIRCLE_FILLED",color:E.COLORS.BLACK}],activeRange:r(n),minDate:o,maxDate:s}}else d={emptyRow:!0,milestones:[{label:"T/LPFT",date:t.end_date,iconType:"CIRCLE_FILLED",color:E.COLORS.BLACK}],activeRange:r(n),minDate:o,maxDate:s};return l.default.createElement(f.default,{key:"compare-milestones-view-row_"+t.id+"_"+e.location+"_"+(e.region?e.region:e.type),isTitle:a,dataRow:e,graphElement:function(){return l.default.createElement(v.default,{first:1===i,data:d,type:e.isRegionCountry?"region":e.type,scenarioId:t.id,emptyRow:d.emptyRow,location:e.location})}(),scenarioNumber:i,activeFilter:n,scenarioEndDate:t.end_date,srRrViewType:u})});return l.default.createElement("div",{className:"compare-milestones-view-container"},l.default.createElement(p.Grid,null,d))};y.defaultProps={isTitle:!1,activeFilter:_.default.LPFT_ALL,srRrViewType:""},y.propTypes={scenario:s.default.object.isRequired,isTitle:s.default.bool,activeFilter:s.default.string,scenarioNumber:s.default.number.isRequired,minDate:d.default.momentObj.isRequired,maxDate:d.default.momentObj.isRequired,srRrViewType:s.default.string},t.default=y},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CompareMilestonesViewRow=void 0;var r=a(789),i=n(r),l=a(466),o=n(l);t.CompareMilestonesViewRow=o.default,t.default=i.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(12),u=n(s),d=a(17),c=a(993),f=n(c),p=a(467),h=n(p);a(2130);var v=function(e){var t=e.scenarios,a=t.map(function(e,t){var a=e.fullData.find(function(e){return"ROLLUP"===e.type.toUpperCase()}),n=(0,u.default)(a,"overallocatedData",null),r=e.isImpact?"impact/"+e.study_id:e.id;return i.default.createElement(d.Col,{width:3,key:"compare-widget_"+e.id},i.default.createElement(f.default,{serial:t+1,target:e.end_date,predicted:n?n.lpft:(0,u.default)(a,"lpft",null),title:e.name,href:"/studies/"+e.study_id+"/scenarios/"+r}))}),n=a.reduce(function(e,t,a){return e.push(i.default.createElement(d.Col,{key:"compare-widget-icon_"+(a+1),width:1,style:{position:"relative"}},i.default.createElement(h.default,{scenarioNumber:a+1}))),e.push(t),e},[]);return i.default.createElement("div",{className:"compare-scenario-header"},i.default.createElement(d.Grid,null,i.default.createElement(d.Row,{style:{height:"88px",padding:"16px 0"}},n)))};v.propTypes={scenarios:o.default.array.isRequired},v.defaultProps={children:null,className:""},t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(791),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(6);a(2131);var u=function(e){var t=e.scenarioNumber;return i.default.createElement("div",{className:"compare-widget-icon-container"},i.default.createElement("span",{className:"compare-scenario-widget__separator"},i.default.createElement("svg",{height:"56px",width:"12px",viewBox:"0 0 12 56"},i.default.createElement("g",{stroke:"black"},i.default.createElement("line",{x1:"12",y1:"0",x2:"0",y2:"56",strokeWidth:"1"})))),i.default.createElement("div",{style:{marginLeft:"11px"}},i.default.createElement("span",{className:"h2 font-bold"},"#0"+t),i.default.createElement("span",{className:"compare-scenario-widget__details-icon"},s.Icons.DETAILS)))};u.propTypes={scenarioNumber:o.default.number.isRequired},t.default=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(7),o=a(2),s=n(o),u=a(1),d=n(u),c=a(318);a(728);var f=function(e){var t=e.isShow,a=e.page,n=e.pageList,l=e.popup,o=e.setHelpPage,u=e.toggleHelp;(0,r.useEffect)(function(){return function(){u(!1)}},[u]);var d=(0,r.useCallback)(function(){o(a),u(!t)},[t,a,o,u]);return n.includes(a)?i.default.createElement("button",{className:(0,s.default)("help-button",{"help-button--popup":l}),onClick:d},i.default.createElement("span",null,i.default.createElement("span",null,"?"))):null};f.defaultProps={popup:!1},f.propTypes={isShow:d.default.bool.isRequired,page:d.default.string.isRequired,popup:d.default.bool,setHelpPage:d.default.func.isRequired,toggleHelp:d.default.func.isRequired,pageList:d.default.array.isRequired};var p=function(e){return{isShow:e.contextHelp.isShow,pageList:e.contextHelp.pageList}};t.default=(0,l.connect)(p,{setHelpPage:c.setContextHelpPage,toggleHelp:c.toggleContextHelp})(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a(0),l=n(i),o=a(7),s=a(1),u=n(s),d=a(2),c=n(d),f=a(75),p=n(f),h=a(6),v=a(48),m=a(318),_=a(50),E=a(134),g=n(E);a(728);var y=function(e){var t=e.auth,a=e.isShow,n=e.pageName,o=e.toggleHelp,s=(0,i.useState)(""),u=r(s,2),d=u[0],f=u[1],m=(0,i.useState)(!1),E=r(m,2),y=E[0],S=E[1];return(0,i.useEffect)(function(){var e=new AbortController;if(S(!0),n){var a=e.signal,r=t&&t.user&&t.user.id;(0,v.fetchApiNative)(_.CONTEXT_HELP_DATA+"/"+n,"GET",null,r,{signal:a}).then(function(e){f(e.value),S(!1)})}return function(){e.abort()}},[n,t]),l.default.createElement(l.default.Fragment,null,l.default.createElement("aside",{className:(0,c.default)("help__box",{open:a})},l.default.createElement("header",null,l.default.createElement("button",{className:"help__close",onClick:function(){o(!1)}},h.Icons.CROSS)),l.default.createElement(p.default,{className:(0,c.default)("help__wrapper",{"help__wrapper--loading":y}),contentClassName:"help__content",horizontal:!1,stopScrollPropagation:!0},l.default.createElement("div",{className:"help__inner-content",dangerouslySetInnerHTML:{__html:d}})),y&&a?l.default.createElement(g.default,null):null))};y.propTypes={auth:u.default.object.isRequired,isShow:u.default.bool.isRequired,pageName:u.default.string.isRequired,toggleHelp:u.default.func.isRequired};var S=function(e){return{auth:e.auth,isShow:e.contextHelp.isShow,pageName:e.contextHelp.page}};t.default=(0,o.connect)(S,{toggleHelp:m.toggleContextHelp})(y)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0}),t.ContextMenuItem=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),o=n(l),s=a(1),u=n(s),d=a(2),c=n(d);a(2132);var f=function(e){var t=e.label,a=e.onClick,n=e.icon,l=e.disabled,s=r(e,["label","onClick","icon","disabled"]);return o.default.createElement("div",{className:(0,c.default)("context-menu__item",{"context-menu__item_disabled":l})},n&&o.default.createElement("span",{className:"context-menu-icon"},n),o.default.createElement("span",i({},s,{onClick:function(e){e&&e.stopPropagation(),a&&a(e)}}),t))};f.propTypes={label:u.default.string.isRequired,onClick:u.default.func,icon:u.default.element,disabled:u.default.bool},f.defaultProps={onClick:null,icon:null,disabled:!1};var p=function(e){var t=e.children;return o.default.createElement("div",{className:"context-menu",onClick:function(e){return e.stopPropagation()}},t)};p.propTypes={children:u.default.node.isRequired},t.default=p,t.ContextMenuItem=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["",""],["",""]),i=a(0),l=n(i),o=a(1),s=n(o);a(2133);var u=function(e){return 1==+(arguments.length<=1?void 0:arguments[1])?"study"+e[1]:"studies"+e[1]},d=function(e){var t=e.count;return l.default.createElement("div",{className:"counter-selected"},l.default.createElement("span",null,l.default.createElement("b",null,t)," ",u(r,t)," selected"),l.default.createElement("div",{className:"keyline-separator"}))};d.propTypes={count:s.default.number},d.defaultProps={count:null},t.default=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s);a(2134);var d=function(e){var t=e.canViewSites,a=e.isEditable,n=e.onExcludeCountry,r=e.onUnlockCountry,l=e.onCalculationToggle,o=e.onViewSites,s=e.hideUnlock,d=e.onCopy,c=e.onPaste,f=e.clipboardEmpty,p=e.isAdjusted,h=e.hideIgnore,v=e.isIgnored;return i.default.createElement("div",{className:"region-context-menu"},i.default.createElement("div",{className:"region-context-menu__menu-mode"},a&&i.default.createElement("div",null,i.default.createElement("div",{className:"region-context-menu__remove region-context-menu__item"},i.default.createElement("span",{"data-ignore-click-outside":"true",onClick:n},"Remove country")),!s&&r&&i.default.createElement("div",{className:"region-context-menu__add region-context-menu__item"},i.default.createElement("span",{"data-ignore-click-outside":"true",onClick:r},"Remove user constraints"))),!h&&i.default.createElement("div",{className:"region-context-menu__add region-context-menu__item"},i.default.createElement("span",{"data-ignore-click-outside":"true",onClick:l},v?"Enable":"Disable"," country")),t&&i.default.createElement("div",{className:"region-context-menu__add region-context-menu__item"},i.default.createElement("span",{"data-ignore-click-outside":"true",onClick:o},"View sites")),a&&!p&&i.default.createElement("div",{className:"region-context-menu__add region-context-menu__item"},i.default.createElement("span",{"data-ignore-click-outside":"true",onClick:function(e){return d(e)}},"Copy")),a&&!p&&i.default.createElement("div",{className:(0,u.default)("region-context-menu__add","region-context-menu__item",{disabled:f})},i.default.createElement("span",{"data-ignore-click-outside":"true",onClick:function(e){f||c(e)}},"Paste"))))};d.defaultProps={isEditable:!1,canViewSites:!1,hideUnlock:!1,clipboardEmpty:!0,isAdjusted:!1,onUnlockCountry:void 0,isIgnored:!1,hideIgnore:!0,onCalculationToggle:void 0,onCopy:void 0,onPaste:void 0},d.propTypes={onExcludeCountry:o.default.func.isRequired,onUnlockCountry:o.default.func,onViewSites:o.default.func.isRequired,onCalculationToggle:o.default.func,canViewSites:o.default.bool,isEditable:o.default.bool,hideUnlock:o.default.bool,onCopy:o.default.func,onPaste:o.default.func,clipboardEmpty:o.default.bool,isAdjusted:o.default.bool,isIgnored:o.default.bool,hideIgnore:o.default.bool},t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(798),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(419),p=n(f),h=a(11),v=n(h),m=a(2),_=n(m),E=a(220),g=n(E),y=a(14),S=n(y),b=a(469);a(2135);var C=a(8),O=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a),a.onChange=a.onChange.bind(a),a.onKeyDown=a.onKeyDown.bind(a),a.onKeyUp=a.onKeyUp.bind(a),a.onFocus=a.onFocus.bind(a),a.onBlur=a.onBlur.bind(a);var n=a.props,l=n.value,o=n.dateFormat,s=l?(0,v.default)(l,o).format(b.DATE_FORMAT):l;return a.state={value:s,isValid:!0},a}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.selected?e.selected.format(b.DATE_FORMAT):"";this.props.value!==a&&this.setState({value:a},function(){t.validate()})}},{key:"shouldComponentUpdate",value:function(e,t){var a=this.state,n=a.value,r=a.isValid;return t.value!==n||t.isValid!==r||e.disabled!==this.props.disabled||e.status!==this.props.status}},{key:"onClick",value:function(){this.props.onClick(),this.inputEl.focus()}},{key:"onChange",value:function(e){var t=e.target.value;this.setState({value:t})}},{key:"onFocus",value:function(e){this.props.onCustomInputFocus&&this.props.onCustomInputFocus(e),this.props.onClick()}},{key:"onBlur",value:function(e){var t=e.target.value,a=this.validate();if((0,g.default)(t))this.props.onChange({target:{value:null}});else if(a){var n=v.default.utc(t,b.DATE_FORMAT),r=n.startOf("day").add(n.utcOffset()/60,"hours").utc();this.props.onChange({target:{value:r}})}this.props.onCustomInputBlur&&this.props.onCustomInputBlur(e,a)}},{key:"onKeyDown",value:function(e){var t=e.target.value;if("Tab"===e.key&&this.props.onKeyDown(e),"Escape"===e.key&&this.props.escHandler(e),"Enter"===e.key){var a=this.validate();if((0,g.default)(t))this.props.onChange({target:{value:null}});else if(a){var n=(0,C.getMomentDate)(t),r=n.startOf("day").add(n.utcOffset()/60,"hours").utc();this.props.onChange({target:{value:r}})}}}},{key:"onKeyUp",value:function(e){""===e.target.value&&8===e.keyCode&&this.props.onChange({target:{value:null}})}},{key:"validate",value:function(){var e=this.state.value,t=v.default.utc(e,b.DATE_FORMAT),a=this.props.minDate||(0,C.getMomentDate)("01 Jan "+b.MIN_YEAR),n=this.props.maxDate||(0,C.getMomentDate)("31 Dec "+b.MAX_YEAR),r=(0,g.default)(e)||b.DATE_FORMAT_RE.test(e)&&t.isValid()&&t>=a.startOf("day")&&t<=n&&(!this.props.filterDate||this.props.filterDate(t));return this.setState({isValid:r}),r}},{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.placeholder,r=t.disabled,i=t.status,l=t.simpleView,o=t.tooltip,s=this.state,d=s.value,c=s.isValid,f=u.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.default.createElement("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h\n            14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}));if(l){var p=u.default.createElement("div",{"data-element-id":"calendar",className:(0,_.default)("custom-input","simple",{error:i===b.STATUS_ERROR||!c},{disabled:r}),onClick:this.onClick},u.default.createElement("input",{"data-element-id":"calendar",className:"input",placeholder:n,value:d,disabled:r,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,ref:function(t){e.inputEl=t}}));return o?u.default.createElement(S.default,{mouseEnterDelay:.3,placement:"bottom",overlayClassName:"scenario-table__invalid-date-tooltip",overlay:u.default.createElement("span",null,o)},p):c?p:u.default.createElement(S.default,{mouseEnterDelay:.3,placement:"bottom",overlayClassName:"scenario-table__invalid-date-tooltip",overlay:u.default.createElement("span",null,"Invalid date")},p)}return u.default.createElement("div",{className:(0,_.default)("custom-input",{disabled:r}),onClick:this.onClick},u.default.createElement("div",{className:"label"},a),u.default.createElement("input",{className:(0,_.default)("input date-picker-control date-input",{error:!c||i===b.STATUS_ERROR}),placeholder:n,value:d,disabled:r,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,ref:function(t){e.inputEl=t}}),u.default.createElement("div",{className:"icon"},f))}}]),t}(s.Component);O.defaultProps={label:"Date",placeholder:"DD MMM YY",value:void 0,disabled:!1,status:void 0,selected:void 0,minDate:void 0,maxDate:void 0,onClick:void 0,onKeyDown:void 0,onChange:void 0,onCustomInputFocus:void 0,onCustomInputBlur:void 0,escHandler:function(){return null},filterDate:void 0,dateFormat:b.DATE_FORMAT,tooltip:null},O.propTypes={label:c.default.string,placeholder:c.default.string,value:c.default.string,disabled:c.default.bool,status:c.default.oneOf(["success","error"]),selected:p.default.momentObj,minDate:p.default.momentObj,maxDate:p.default.momentObj,onKeyDown:c.default.func,onChange:c.default.func,simpleView:c.default.bool.isRequired,onClick:c.default.func,onCustomInputFocus:c.default.func,onCustomInputBlur:c.default.func,escHandler:c.default.func,filterDate:c.default.func,dateFormat:c.default.string,tooltip:c.default.string},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(419),p=n(f),h=a(1883),v=n(h),m=a(2),_=n(m),E=a(11),g=n(E),y=a(1794),S=n(y),b=a(800),C=n(b),O=a(990),T=n(O),R=a(469);a(2136),a(2137);var A=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=g.default.isMoment(e.selected)&&e.selected.isValid()?e.selected:null,l=g.default.isMoment(e.defaultDate)&&e.defaultDate.isValid()?e.defaultDate:null,o=(0,g.default)(),s=n||l||o;return a.state={selected:n||null,newSelected:null,month:R.MONTHS[s.month()],year:s.year(),showWarning:!1,newValue:null},a.uniqueCalendarSelector=(0,S.default)("date-picker-calendar-"),a.onClickOutside=a.onClickOutside.bind(a),a.escapeHandler=a.escapeHandler.bind(a),a.onFocus=a.onFocus.bind(a),a.onBlur=a.onBlur.bind(a),a.onChange=a.onChange.bind(a),a.onMonthChange=a.onMonthChange.bind(a),a.onMonthFocus=a.onMonthFocus.bind(a),a.onMonthBlur=a.onMonthBlur.bind(a),a.onMonthKeyDown=a.onMonthKeyDown.bind(a),a.onYearChange=a.onYearChange.bind(a),a.onYearFocus=a.onYearFocus.bind(a),a.onYearBlur=a.onYearBlur.bind(a),a.onYearKeyDown=a.onYearKeyDown.bind(a),a.onNavLeft=a.onNavLeft.bind(a),a.onNavRigth=a.onNavRigth.bind(a),a.proxyMonth=a.proxyMonth.bind(a),a.proxyYear=a.proxyYear.bind(a),a.doOnChange=a.doOnChange.bind(a),a}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){if(this.props.selected!==e.selected||this.props.defaultDate!==e.defaultDate){var t=g.default.isMoment(e.selected)&&e.selected.isValid()?e.selected:null,a=g.default.isMoment(e.defaultDate)&&e.defaultDate.isValid()?e.defaultDate:null,n=(0,g.default)(),r=t||a||n;this.setState({selected:t||null,month:R.MONTHS[r.month()],year:r.year()})}}},{key:"onFocus",value:function(){this.props.onFocus&&this.props.onFocus()}},{key:"onBlur",value:function(e,t){this.props.onBlur&&this.props.onBlur(e,t)}},{key:"onChange",value:function(e){var t=this,a=e;e&&!e.isUTC()&&(a=a.startOf("day").add(a.utcOffset()/60,"hours").utc());var n={result:a};this.props.warningText&&(n={showWarning:!0,newSelected:a}),this.setState(n,function(){t.props.onChange&&null===t.props.warningText&&t.doOnChange(a)})}},{key:"onClickOutside",value:function(){this.onMonthBlur({target:{value:""}}),this.onYearBlur({target:{value:""}})}},{key:"onMonthChange",value:function(e){this.setState({month:e.target.value})}},{key:"onMonthFocus",value:function(){this.setState({month:""})}},{key:"onMonthBlur",value:function(e){var t=e.target.value;if(-1===R.MONTHS.indexOf(t.toLowerCase())){var a=this.state.selected||this.props.defaultDate||(0,g.default)(),n=R.MONTHS[a.month()];this.setState({month:n},this.proxyMonth)}else this.proxyMonth()}},{key:"onMonthKeyDown",value:function(e){e.key===R.ENTER_KEY&&this.proxyMonth()}},{key:"onYearChange",value:function(e){this.setState({year:e.target.value})}},{key:"onYearFocus",value:function(){this.setState({year:""})}},{key:"onYearBlur",value:function(e){var t=parseInt(e.target.value,10),a=this.props,n=a.minDate,r=a.maxDate;if(isNaN(t)||t<R.MIN_YEAR||t>R.MAX_YEAR||n&&n.year()>t||r&&r.year()<t){var i=this.state.selected||this.props.defaultDate||(0,g.default)();this.setState({year:i.year()},this.proxyYear)}else this.proxyYear()}},{key:"onYearKeyDown",value:function(e){e.key===R.ENTER_KEY&&this.proxyYear(),"Tab"===e.key&&(this.proxyYear(),e.preventDefault())}},{key:"onNavLeft",value:function(){var e=this,t=R.MONTHS.indexOf(this.state.month);-1!==t&&this.setState({month:R.MONTHS[0===t?11:t-1]},function(){e.proxyMonth(),0===t&&e.setState({year:+e.state.year-1},e.proxyYear)})}},{key:"onNavRigth",value:function(){var e=this,t=R.MONTHS.indexOf(this.state.month);-1!==t&&this.setState({month:R.MONTHS[11===t?0:t+1]},function(){e.proxyMonth(),11===t&&e.setState({year:+e.state.year+1},e.proxyYear)})}},{key:"doOnChange",value:function(e){var t=this;this.setState({selected:e},function(){var a=e?e.clone():null,n=t.props.validators,r=!n.length||n.every(function(e){return e(a)});t.props.onChange(a,{value:a,isValid:r})})}},{key:"proxyMonth",value:function(){var e=this.state.month,t=R.MONTHS.indexOf(e.toLowerCase());if(-1!==t){var a=document.querySelector("."+this.uniqueCalendarSelector+" .react-datepicker__month-select");if(a){var n=document.createEvent("Event");n.initEvent("change",!0,!0),a.value=t,a.dispatchEvent(n)}}}},{key:"proxyYear",value:function(){var e=parseInt(this.state.year,10);if(!isNaN(e)&&e>=R.MIN_YEAR&&e<=R.MAX_YEAR){var t=document.querySelector("."+this.uniqueCalendarSelector+" .react-datepicker__year-select");if(t){var a=document.createEvent("Event");a.initEvent("change",!0,!0),t.value=e,t.dispatchEvent(a)}}}},{key:"escapeHandler",value:function(e){e.target.blur(),this.calendar.setOpen(!1),this.props.escHandler(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.label,r=t.placeholder,i=t.disabled,l=t.minDate,o=t.maxDate,s=t.status,d=t.simpleView,c=t.filterDate,f=t.dateFormat,p=t.defaultDate,h=t.popperPlacement,m=t.tooltip,E=t.warningText,g=u.default.createElement("svg",{"data-element-id":"calendar",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.default.createElement("path",{"data-element-id":"calendar",d:"M8.6 7.4L10 6l6 6-6 6-1.4-1.4 4.6-4.6z"}));return u.default.createElement(u.default.Fragment,null,u.default.createElement(v.default,{ref:function(t){e.calendar=t},className:(0,_.default)("date-picker",a),calendarClassName:(0,_.default)("date-picker-calendar",this.uniqueCalendarSelector),customInput:u.default.createElement(C.default,{tooltip:m,label:n,placeholder:r,status:s,minDate:l,maxDate:o,dateFormat:f,simpleView:d,selected:this.state.selected,filterDate:c,onCustomInputFocus:this.onFocus,onCustomInputBlur:this.onBlur,escHandler:this.escapeHandler,onCustomInputChange:this.onChange}),dateFormat:f,selected:this.state.selected,openToDate:!this.state.selected&&p?p:this.state.selected,minDate:l,maxDate:o,onChange:this.onChange,onClickOutside:this.onClickOutside,disabled:i,popperPlacement:h,popperModifiers:{offset:{enabled:!0,offset:"0px, 0px"}},showMonthDropdown:!0,showYearDropdown:!0,disabledKeyboardNavigation:!0,fixedHeight:!0,filterDate:c,dropdownMode:"select"},u.default.createElement("div",{className:"controls"},u.default.createElement("div",{className:"nav left",onClick:this.onNavLeft},g),u.default.createElement("div",{className:"nav right",onClick:this.onNavRigth},g),u.default.createElement("div",{className:"input month"},u.default.createElement("input",{className:"date-picker-control month-input","data-element-id":"calendar",onInput:this.onMonthChange,onFocus:this.onMonthFocus,onBlur:this.onMonthBlur,onKeyDown:this.onMonthKeyDown,onChange:function(){},value:this.state.month,maxLength:3,ref:function(t){e.monthInputEl=t}}),u.default.createElement("div",{className:"progress"},this.state.month)),u.default.createElement("span",{style:{pointerEvents:"none"}}," / "),u.default.createElement("div",{className:"input year"},u.default.createElement("input",{className:"date-picker-control year-input","data-element-id":"calendar",onInput:this.onYearChange,onFocus:this.onYearFocus,onBlur:this.onYearBlur,onKeyDown:this.onYearKeyDown,onChange:function(){},value:this.state.year,maxLength:4,ref:function(t){e.yearInputEl=t}}),u.default.createElement("div",{className:"progress"},this.state.year)))),null!==E&&u.default.createElement(T.default,{show:this.state.showWarning,message:E,onOk:function(){e.setState({showWarning:!1}),e.doOnChange(e.state.newSelected)},onCancel:function(){return e.setState({showWarning:!1})},onClose:function(){return e.setState({showWarning:!0})}}))}}]),t}(s.PureComponent);A.defaultProps={className:void 0,label:void 0,placeholder:void 0,selected:void 0,disabled:!1,minDate:void 0,maxDate:void 0,status:void 0,onChange:void 0,onFocus:void 0,onBlur:void 0,simpleView:!1,filterDate:void 0,escHandler:function(){return null},defaultDate:void 0,validators:[],dateFormat:R.DATE_FORMAT,popperPlacement:"top-start",tooltip:null,warningText:null},A.propTypes={className:c.default.string,label:c.default.string,dateFormat:c.default.string,simpleView:c.default.bool,placeholder:c.default.string,selected:c.default.object,disabled:c.default.bool,minDate:p.default.momentObj,maxDate:p.default.momentObj,status:c.default.oneOf(["success","error"]),onChange:c.default.func,onFocus:c.default.func,onBlur:c.default.func,escHandler:c.default.func,filterDate:c.default.func,defaultDate:c.default.object,validators:c.default.array,popperPlacement:c.default.oneOf(["top-end","top-start"]),tooltip:c.default.string,warningText:c.default.string},t.default=A},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(289),c=n(d),f=function(e){var t=e.id,a=e.onOptionSelect,n=e.label,r=e.selected,l=e.value,o=e.matched,s=e.className,d=e.stopClickPropagation,f=e.disabled,p=(0,u.default)("options-item",s,{"options-item-selected":r,"highlight-matched":o&&o.length>0,disabled:f});return i.default.createElement("div",{className:p,title:"string"==typeof n?n:null,onClick:function(e){d&&e.stopPropagation(),a({id:t,label:n,value:l})}},o?(0,c.default)(n,o,function(e,t){return i.default.createElement("span",{key:t,style:{color:"black"}},e)}):n)};f.defaultProps={id:null,onOptionSelect:null,selected:!1,value:null,matched:"",className:"",stopClickPropagation:!1,disabled:!1},f.propTypes={id:o.default.string,onOptionSelect:o.default.func,label:o.default.oneOfType([o.default.string,o.default.object]).isRequired,selected:o.default.bool,value:o.default.any,matched:o.default.string,className:o.default.string,stopClickPropagation:o.default.bool,disabled:o.default.bool},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),h=a(56),v=n(h),m=a(75),_=n(m),E=a(65),g=n(E),y=a(517),S=n(y),b=a(6),C=a(27),O=n(C);a(729);var T=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},R=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=void 0,l=a.getSelectedOption();if(l){var o=l.props;n={id:o.id,label:o.label,value:o.value}}return a.state={open:!1,selectedOption:n||{id:null,label:null,value:null},filterValue:""},a.handleControlClick=a.handleControlClick.bind(a),a.getSelectedOption=a.getSelectedOption.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a.handleOptionSelect=a.handleOptionSelect.bind(a),a.handleClearClick=a.handleClearClick.bind(a),a.handleChangeFilter=a.handleChangeFilter.bind(a),a.close=a.close.bind(a),a}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){if(e.children&&e.children.length>0){var t=u.default.Children.toArray(e.children),a=t.find(function(e){return!0===e.props.selected});a?this.setState({open:!1,selectedOption:{id:a.props.id,label:a.props.label,value:a.props.value}}):this.setState({open:!1,selectedOption:{id:null,label:null,value:null}})}}},{key:"getSelectedOption",value:function(){var e=this.props.children;return(e instanceof Array?e:[e]).find(function(e){return e.props.selected})}},{key:"handleClickOutside",value:function(){this.state.open&&this.close()}},{key:"handleControlClick",value:function(){var e=this.props.disabled,t=this.state.open;if(!e){if(t)return;this.setState({open:!t})}}},{key:"handleOptionSelect",value:function(e){var t=this,a=e.id,n=e.label,r=e.value;if(r!==this.state.selectedOption.value){var i={label:n,value:r,id:a};this.setState({open:!1,selectedOption:i,filterValue:""},function(){t.props.onOptionSelect(e)})}else this.close()}},{key:"handleClearClick",value:function(e){e.stopPropagation(),e.preventDefault(),this.setState({filterValue:""})}},{key:"handleChangeFilter",value:function(e){var t=this;this.setState({filterValue:T(e.target.value)},function(){t.scrollRef&&t.scrollRef.scrollTop()})}},{key:"close",value:function(){this.setState({filterValue:"",open:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.disabled,n=t.label,r=t.children,i=t.narrow,l=t.placeholder,o=this.state,s=o.open,d=o.selectedOption,c=v.default.generate(),f=(0,p.default)("fpo-dropdown-container",{disabled:a}),h=(0,p.default)("fpo-dropdown-wrapper",{"fpo-dropdown-open":s,"narrow-style":i}),m=(0,p.default)("fpo-dropdown-control",{enabled:!a,"narrow-style":i}),E=(0,p.default)("fpo-dropdown-options",{"narrow-style":i}),g=function(){return s?b.Icons.CHEVRON_UP:b.Icons.CHEVRON_DOWN},y=r instanceof Array?r:[r],S=y.filter(function(t){return""===e.state.filterValue||-1!==t.props.label.toLowerCase().indexOf(e.state.filterValue.toLowerCase())}),C=S.map(function(t,a){var n={key:v.default.generate(),id:"option-"+a,onOptionSelect:e.handleOptionSelect,selected:d.id==="option-"+a||!d.id&&t.props.selected,matched:e.state.filterValue};return u.default.cloneElement(t,n)});return u.default.createElement("div",{className:f,ref:function(t){e.dropdown=t}},function(e){return e?u.default.createElement("label",{htmlFor:c},e):null}(n),u.default.createElement("div",{id:c,className:h},u.default.createElement("div",{className:m,onClick:this.handleControlClick},s?u.default.createElement("div",{className:"dropdown-select-filterable-control"},u.default.createElement(O.default,{onChange:this.handleChangeFilter,value:this.state.filterValue,autoFocus:!0,narrow:!0,withoutBorder:!0,placeholder:d.label||""}),""===this.state.filterValue?u.default.createElement("span",{className:"control-icon"},g()):u.default.createElement("div",{className:(0,p.default)("filterable-control__clear-button",{hidden:!this.state.filterValue||""===this.state.filterValue})},u.default.createElement("span",{onClick:this.handleClearClick},b.Icons.CROSS))):u.default.createElement("span",{className:"control-label"},d.label||u.default.createElement("span",{className:"placeholder"},l)),s?null:u.default.createElement("span",{className:"control-icon"},g())),u.default.createElement("div",{className:E},u.default.createElement(_.default,{style:{height:"176px"},ref:function(t){e.scrollRef=t},horizontal:!1},u.default.createElement("div",{className:"filterable-list__items"},C.sort(function(e,t){return e.props.label<t.props.label?-1:e.props.label>t.props.label?1:0}))))))}}]),t}(s.Component),A=function(e,t,a){var n=e[t];n instanceof Array||(n=[n]);var r=[];return n.forEach(function(e,t){e.type&&e.type.name&&"DropdownOption"===e.type.name||r.push(t)}),r.length>0?new Error("Invalid prop "+t+" supplied to "+a+" Validation failed."):null},I=(0,S.default)(A);R.defaultProps={narrow:!1,placeholder:"Select",disabled:!1,label:null},R.propTypes={children:I.isRequired,disabled:c.default.bool,label:c.default.string,onOptionSelect:c.default.func.isRequired,placeholder:c.default.string,narrow:c.default.bool},t.default=(0,g.default)(R)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),h=a(56),v=n(h),m=a(45),_=n(m),E=a(75),g=n(E),y=a(517),S=n(y),b=a(6);a(729);var C=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=void 0,l=a.getSelectedOption();if(l){var o=l.props;n={id:o.id,label:o.label,value:o.value}}return a.state={open:!1,selectedOption:n||{id:null,label:null,value:null}},a.handleControlClick=a.handleControlClick.bind(a),a.getSelectedOption=a.getSelectedOption.bind(a),a.handleOutsideClick=a.handleOutsideClick.bind(a),a.handleOptionSelect=a.handleOptionSelect.bind(a),a.close=a.close.bind(a),a}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.children&&e.children.length>0&&null!==this.state.selectedOption.label&&!e.initialSelect){var a=u.default.Children.toArray(e.children);if(a.find(function(e){return e.props.label===t.state.selectedOption.label&&(0,_.default)(e.props.value,t.state.selectedOption.value)})){var n=a.find(function(e){return e.props.selected});n&&this.setState({open:!1,selectedOption:{id:n.props.id,label:n.props.label,value:n.props.value}})}else this.setState({open:!1,selectedOption:{id:null,label:null,value:null}})}else if(e.initialSelect){var r=e.initialSelect,i=r.id,l=r.name,o=r.value,s=void 0===o?null:o;this.setState({open:!1,selectedOption:{id:i,label:l,value:s}})}}},{key:"shouldComponentUpdate",value:function(e,t){return t.open||t.open!==this.state.open||e.disabled!==this.props.disabled||!(0,_.default)(t.selectedOption,this.state.selectedOption)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.handleOutsideClick)}},{key:"getSelectedOption",value:function(){var e=this.props.children;return(e instanceof Array?e:[e]).find(function(e){return e.props.selected})}},{key:"handleOutsideClick",value:function(e){!this.dropdown.contains(e.target)&&this.state.open&&this.close()}},{key:"handleControlClick",value:function(e){e.stopPropagation();var t=this.props,a=t.disabled,n=t.onControlClick,r=this.state.open;a||(r?document.body.removeEventListener("click",this.handleOutsideClick):document.body.addEventListener("click",this.handleOutsideClick),n&&n(!r),this.setState({open:!r}))}},{key:"handleOptionSelect",value:function(e){var t=this,a=this.props.onControlClick,n=e.id,r=e.label,i=e.value;if(i!==this.state.selectedOption.value){var l={label:r,value:i,id:n};a&&a(!1),this.setState({open:!1,selectedOption:l},function(){t.props.onOptionSelect(e)})}else this.close()}},{key:"close",value:function(){var e=this.props.onControlClick;e&&e(!1),this.setState({open:!1}),document.removeEventListener("click",this.handleOutsideClick)}},{key:"render",value:function(){var e=this,t=this.props,a=t.disabled,n=t.label,r=t.children,i=t.narrow,l=t.placeholder,o=t.resultsHeight,s=t.classNames,d=this.state,c=d.open,f=d.selectedOption,h=v.default.generate(),m=(0,p.default)("fpo-dropdown-container",{disabled:a},s),_=(0,p.default)("fpo-dropdown-wrapper",{"fpo-dropdown-open":c,"narrow-style":i}),E=(0,p.default)("fpo-dropdown-control",{enabled:!a,"narrow-style":i}),y=(0,p.default)("fpo-dropdown-options",{"narrow-style":i}),S=r instanceof Array?r:[r],C=S.map(function(t,a){var n={key:v.default.generate(),id:"option-"+a,onOptionSelect:t.props.onOptionSelect?function(a){e.close(),t.props.onOptionSelect(a)}:e.handleOptionSelect,selected:f.id==="option-"+a||!f.id&&t.props.selected};return u.default.cloneElement(t,n)});return u.default.createElement("div",{className:m,style:this.props.styles,ref:function(t){e.dropdown=t}},function(e){return e?u.default.createElement("label",{htmlFor:h},e):null}(n),u.default.createElement("div",{id:h,className:_},u.default.createElement("div",{className:E,onClick:this.handleControlClick},u.default.createElement("span",{className:"control-label"},f.label||u.default.createElement("span",{className:"placeholder"},l)),u.default.createElement("span",{className:"control-icon"},function(){return c?b.Icons.CHEVRON_UP:b.Icons.CHEVRON_DOWN}())),u.default.createElement("div",{className:y},u.default.createElement(g.default,{horizontal:!1,stopScrollPropagation:!0,style:{maxHeight:o+"px"}},C))))}}]),t}(s.Component);C.defaultProps={disabled:!1,label:null,narrow:!1,placeholder:"Select",resultsHeight:300,initialSelect:null,onControlClick:null,styles:{},classNames:""};var O=function(e,t,a){var n=e[t];n instanceof Array||(n=[n]);var r=[];return n.forEach(function(e,t){e.type&&e.type.name&&"DropdownOption"===e.type.name||r.push(t)}),r.length>0?new Error("Invalid prop "+t+" supplied to "+a+" Validation failed."):null},T=(0,S.default)(O);C.propTypes={children:T.isRequired,disabled:c.default.bool,label:c.default.string,onOptionSelect:c.default.func.isRequired,placeholder:c.default.oneOfType([c.default.string,c.default.object]),narrow:c.default.bool,resultsHeight:c.default.number,initialSelect:c.default.object,onControlClick:c.default.func,styles:c.default.object,classNames:c.default.string},t.default=C},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(74),u=n(s),d=function(e){var t=e.onOptionSelect,a=e.children;return i.default.createElement("div",{className:"dropdown-container"},i.default.createElement(u.default,{placeholder:"Please select",onOptionSelect:t},a))};d.propTypes={onOptionSelect:o.default.func.isRequired,children:o.default.node.isRequired},t.default=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(7),h=a(1),v=n(h),m=a(11),_=n(m),E=a(220),g=n(E),y=a(12),S=n(y),b=a(2),C=n(b),O=a(16),T=a(27),R=n(T),A=a(44),I=a(807),w=n(I),N=a(39),D=a(64),P=n(D),L=a(74),M=a(805),k=n(M),x=a(6),j=a(8),F=a(28),U=a(20),V=n(U),B=a(51);a(2138);var H="study",G="GET_EXACT_COPY",Y="CREATE_ADJUSTED",z=function(e){function t(e){i(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onChange=function(e){a.setState({name:e.target.value})},a.onSubmit=function(){a.setState({submitted:!0});var e=a.state,t=e.name,n=e.targetStudy,r=e.duplicateMethod,i=e.studyLevelParamsSource,l=a.getDefaultName(),o=n?n.id:null,s=a.isUniqName()?t:l;a.props.onSubmit(s,o,i===H&&a.props.study.state.status===V.default.ACTIVE,!1,r===Y)},a.toggleChangeStudy=function(){a.setState({changeStudy:!a.state.changeStudy})},a.handleDuplicateMethodSelect=function(e){a.setState({duplicateMethod:e.value})},a.handleTargetStudySelect=function(e){var t=a.state.studies.find(function(t){return t.id===e.value});a.setState({targetStudy:t,isTargetValid:t&&t.isValid,agreeWithDataSummary:t&&t.isValid})},a.handleStudyUpdate=function(){var e=a.props,t=e.study,n=e.scenario,i=["indication","therapeutic_area","target_lpft","target_num_patients","fp","fpfv_fpft"],l=Object.entries(a.state.targetStudy).filter(function(e){return i.includes(e[0])}).reduce(function(e,t){var a=u(t,2),n=a[0],i=a[1];return s({},e,r({},n,i))},{});a.props.updateStudy(a.props.study.id,s({},l,{id:a.props.study.id,study_id:a.props.study.study_id})).then(function(){a.props.getScenarioViewerDataWithFullStudy(t.id,n.id)})},a.handleAgreeCheck=function(e){a.setState({agreeWithDataSummary:void 0!==e?e:!a.state.agreeWithDataSummary})},a.handleSourceOptionSelect=function(e){a.setState({studyLevelParamsSource:e.value})};var n=e.study&&(0,j.getMomentDate)(e.study.updatedAt),o=e.scenario&&e.scenario.last_optimisation_date;return a.state={name:a.getDefaultName(),changeStudy:!1,showOptimizeWarning:n&&o&&n.isAfter(o),agreeWithDataSummary:!1,recalculateWithActualParams:!1,confirmActualStudyParams:!1,createAdjusted:!1,studyLevelParamsSource:H,duplicateMethod:G,submitted:!1},a.controller=new AbortController,a.signal=a.controller.signal,a}return o(t,e),d(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(this.state.name||this.setState({name:this.getDefaultName(e.scenariosCount)}),e.studies&&e.study){var a=e.study,n=e.studies.filter(function(e){return(e.study_id!==a.study_id||e.id!==a.id)&&e.is_imported&&e.state.status===V.default.PLANNED}).map(function(e){var t=(0,S.default)(a,"indication",""),n=(0,S.default)(a,"therapeutic_area",""),r=(0,S.default)(a,"target_num_patients",null),i=(0,j.getMomentDate)(a.fp),l=(0,j.getMomentDate)(a.target_lpft),o=(0,S.default)(a,"fpfv_fpft",0),u=(0,j.getMomentDate)(e.fp),d=(0,j.getMomentDate)(e.target_lpft),c=!0,f=[],p=[],h=(0,S.default)(e,"indication","");h.toLowerCase()!==t.toLowerCase()&&(f.push("indication"),c=!1,""===h&&p.push("indication"));var v=(0,S.default)(e,"therapeutic_area","");v.toLowerCase()!==n.toLowerCase()&&(f.push("therapeutic_area"),c=!1,""===v&&p.push("therapeutic_area"));var m=(0,S.default)(e,"target_num_patients",null);return m!==r&&(f.push("target_num_patients"),c=!1,null!==m&&0!==m||p.push("target_num_patients")),i&&_.default.isMoment(i)&&i.isValid()&&u&&_.default.isMoment(u)&&u.isValid()&&i.isSame(u)||(f.push("fp"),c=!1,null===u&&p.push("fp")),l&&_.default.isMoment(l)&&l.isValid()&&d&&_.default.isMoment(d)&&d.isValid()&&l.isSame(d)||(f.push("target_lpft"),c=!1,null===d&&p.push("target_lpft")),(0,S.default)(e,"fpfv_fpft")!==o&&(f.push("fpfv_fpft"),c=!1),s({},e,{isValid:c,invalidFields:f,missingValues:p})});this.setState({studies:n},function(){t.state.targetStudy&&t.handleTargetStudySelect({value:t.state.targetStudy.id})})}if(e.study&&e.scenario){var r=(0,j.getMomentDate)(e.study.study_details_updated_at),i=e.scenario.last_optimisation_date;this.setState({showOptimizeWarning:r&&i&&r.isAfter(i),studyLevelParamsSource:H,duplicateMethod:G})}}},{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"getDefaultName",value:function(e){var t=this.props.isImpact,a=e||this.props.scenariosCount,n=a+(t?2:1);return n<10?n="00"+n:n<100&&(n="0"+n),"Scenario "+n}},{key:"isUniqName",value:function(){var e=this.state.name;return!(!(0,g.default)(e)&&(this.state.changeStudy?this.state.targetStudy&&this.state.targetStudy.scenarioNames.some(function(t){return t===e}):this.props.study.scenarios.some(function(t){return t.name===e})))}},{key:"render",value:function(){var e=this.props,t=e.study,a=e.scenario,n=e.isShown,r=e.onClose,i=e.isApproved,l=e.isAdjusted,o=e.isPrevApproved,s=e.showCreateAdjustedOption,u=e.showMissingCountriesWarning,d=this.state,c=d.changeStudy,p=d.studies,h=d.targetStudy,v=d.agreeWithDataSummary,m=d.studyLevelParamsSource,_=d.duplicateMethod,E=d.submitted;if(!n||!a)return null;var y=!t.is_imported,b=!i&&!o,O=t.state.status===V.default.ACTIVE,T=this.isUniqName(),I=(0,g.default)(this.state.name),D=(0,S.default)(a,"studyParamsWarning.showStudyParamsWarning",null)&&O,M=O&&a.countries.some(function(e){return e.onlyActuals}),j=null,F=null;return T||(j="error",F="Please enter a unique scenario ID"),I&&(j="error",F="Please enter a scenario ID"),f.default.createElement(N.PopupDialog,{title:"Duplicate and edit scenario",className:"duplicate-scenario-dialog",isShown:n,handleClose:r,buttons:[f.default.createElement(N.ActionButton,{className:"duplicate-scenario-dialog__button-cancel",action:r},"Cancel"),f.default.createElement(N.ActionButton,{action:this.onSubmit,disabled:E||!T||I||c&&!v||D&&null===m||s&&null===_,primary:!0},"Save")]},f.default.createElement("div",{className:"duplicate-scenario"},(i||l||o)&&O&&f.default.createElement("span",{className:"duplicate-scenario__approved-msg"},"The approved plan will be duplicated into an adjusted scenario that you can edit"),f.default.createElement(R.default,{outsideLabel:"Scenario ID",maxLength:45,insideLabel:(c&&h?h.study_id:t.study_id)+" -",placeholder:"Please enter scenario ID",status:j,statusMessage:F,value:this.state.name,onChange:this.onChange})),s&&f.default.createElement("div",{className:"change-study__wrapper"},f.default.createElement("div",{className:"font-semi-bold"},"Please select duplication method"),f.default.createElement(k.default,{onOptionSelect:this.handleDuplicateMethodSelect},f.default.createElement(L.DropdownOption,{label:"Get simple copy not influenced by actual data",value:G,selected:_===G}),f.default.createElement(L.DropdownOption,{label:"Get adjusted copy considering actual study data",value:Y,selected:_===Y}))),y&&p&&b&&f.default.createElement("div",{className:"change-study__wrapper"},f.default.createElement("div",{style:{width:"380px",marginTop:"10px"}},f.default.createElement(P.default,{name:"test",checked:c,onChange:this.toggleChangeStudy,label:"Duplicate scenario to Planning study"})),f.default.createElement("div",{className:(0,C.default)({hidden:!c})},f.default.createElement("div",{className:(0,C.default)("dropdown-container",{disabled:!c})},f.default.createElement(L.DropdownSelectFilterable,{placeholder:"Search by study_id",onOptionSelect:this.handleTargetStudySelect},p.map(function(e){return f.default.createElement(L.DropdownOption,{className:e.isValid?"":"not-valid",key:e.id,label:e.study_id,value:e.id,selected:h&&e.study_id===h.study_id})})),h&&h.missingValues.length>0&&f.default.createElement("div",{className:"change-study-invalid-target-warning"},f.default.createElement("span",null,"Selected study cannot be used as target because of missing parameters")),h&&f.default.createElement(w.default,{agreeWithDataSummary:v,onAgreeCheck:this.handleAgreeCheck,sourceStudy:t,targetStudy:h,onStudyUpdate:this.handleStudyUpdate}),this.state.showOptimizeWarning&&!(h&&h.invalidFields.length>0&&0===h.missingValues.length)&&f.default.createElement("div",{className:"optimize-warning"},f.default.createElement("div",null,x.Icons.WARNING),f.default.createElement("div",null,"Scenario optimization is recommended before duplicating because playground study parameters were changed since last optimization"))))),D&&f.default.createElement("div",{className:"change-study__wrapper"},f.default.createElement("div",{className:"font-semi-bold"},"Please select a source to inherit a set of study-level parameters"),f.default.createElement(k.default,{onOptionSelect:this.handleSourceOptionSelect},f.default.createElement(L.DropdownOption,{label:"Current study",value:H,selected:m===H}),f.default.createElement(L.DropdownOption,{label:'Source scenario "'+a.name+'"',value:"scenario",selected:"scenario"===m}))),M&&f.default.createElement("div",{className:"change-study__wrapper"},f.default.createElement("p",{className:"change-study__description"},"Missing countries with actual data will be added to the the duplicated scenario automatically")),u&&!M&&O&&f.default.createElement("div",{className:"change-study__wrapper"},f.default.createElement("p",{className:"change-study__description"},"Missing countries with actual data (if any) will be added to the the duplicated scenario automatically")),f.default.createElement(A.ContextHelpButton,{page:"popup__duplicated-edit-scenario"+(O?"--tracking":""),popup:!0}))}}]),t}(c.Component);z.propTypes={study:v.default.object.isRequired,scenario:v.default.object,isShown:v.default.bool.isRequired,onClose:v.default.func.isRequired,onSubmit:v.default.func.isRequired,isPrevApproved:v.default.bool,isApproved:v.default.bool,isAdjusted:v.default.bool,isImpact:v.default.bool,studies:v.default.array,updateStudy:v.default.func.isRequired,getScenarioViewerDataWithFullStudy:v.default.func.isRequired,showCreateAdjustedOption:v.default.bool,showMissingCountriesWarning:v.default.bool,scenariosCount:v.default.number},z.defaultProps={scenario:null,isPrevApproved:!1,dashboard:!1,isApproved:!1,isAdjusted:!1,isImpact:!1,studies:null,showCreateAdjustedOption:!1,showMissingCountriesWarning:!1,scenariosCount:0};var W=function(e,t){var a=(0,F.getRouteMatch)(t);return{scenariosCount:(0,B.getStudyScenariosCount)(e,a)}};t.default=(0,O.withRouter)((0,p.connect)(W)(z))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(11),c=n(d),f=a(61),p=(n(f),a(15)),h=a(64),v=n(h),m=a(6);a(2139);var _=function(e){var t=e.sourceStudy,a=e.targetStudy,n=(e.onStudyUpdate,e.agreeWithDataSummary),r=e.onAgreeCheck,l=["therapeutic_area","indication","target_num_patients","fp","target_lpft","fpfv_fpft"],o={indication:"Indication",therapeutic_area:"TA",target_lpft:"T/LPFT",target_num_patients:"T/Patients",fp:"FP",fpfv_fpft:"FPFV-FPFT"},s=l.map(function(e){return{key:e,title:o[e],source:t[e],target:a[e],status:!a.invalidFields.includes(e)}});return i.default.createElement("div",{style:{marginTop:"16px"},className:"fpo-study-params"},i.default.createElement("div",{className:"study-params__title"},"Playground and Planning studies parameters summary"),i.default.createElement(p.FlexTable,{headerHeight:60,rowHeight:35,rowsCount:s.length},i.default.createElement(p.Row,{data:s},i.default.createElement(p.Column,{header:i.default.createElement(E,{title:null,name:null}),data:i.default.createElement(g,{rows:s,dataField:"title"}),fixedWidth:!0,width:120}),i.default.createElement(p.Column,{header:i.default.createElement(E,{title:"Playground study",name:t.study_id}),data:i.default.createElement(g,{rows:s,dataField:"source"}),width:95}),i.default.createElement(p.Column,{header:i.default.createElement(E,{title:"Planning study",name:a.study_id}),data:i.default.createElement(g,{rows:s,dataField:"target"}),width:95}),i.default.createElement(p.Column,{header:i.default.createElement(E,{title:null,name:null}),data:i.default.createElement(g,{rows:s,dataField:"status"}),fixedWidth:!0,width:60}))),a&&a.invalidFields.length>0&&0===a.missingValues.length&&i.default.createElement("div",{className:"optimize-warning extended"},i.default.createElement("div",{className:"row-1"},i.default.createElement("div",null,m.Icons.WARNING),i.default.createElement("div",null,"Selected Planning study parameters don't match!\n           Resulting scenario timeline may differ from original one.\n           It's recommended to reoptimize duplicated scenario to align it with Planning study parameters.")),i.default.createElement("div",{className:"checkbox__wrapper"},i.default.createElement("div",null,"I agree"),i.default.createElement(v.default,{name:"test",checked:n,onChange:r,label:""}))),null)};_.propTypes={sourceStudy:o.default.object.isRequired,targetStudy:o.default.object.isRequired,onStudyUpdate:o.default.func.isRequired,agreeWithDataSummary:o.default.bool.isRequired,onAgreeCheck:o.default.func.isRequired};var E=function(e){var t=e.title,a=e.name;return i.default.createElement(p.Cell,{className:"header-cell"},i.default.createElement("div",null,t),i.default.createElement("div",{className:"name"},a))};E.defaultProps={title:null,name:null},E.propTypes={title:o.default.string,name:o.default.string};var g=function(e){var t=e.rowIndex,a=e.rows,n=e.dataField,r=a[t];if(!r)return null;var l=r.key,o=r[n];!o||"target_lpft"!==l&&"fp"!==l||"-"===o||"source"!==n&&"target"!==n||(o=(0,c.default)(o).format("DD MMM YYYY"));var s=void 0;return s="status"===n?i.default.createElement("div",{className:(0,u.default)("status-icon__wrapper",{success:o,error:!o})},o?m.Icons.SUCCESS:m.Icons.ERROR):!o&&0!==o&&"fpfv_fpft"!==l||"target_num_patients"===l&&0===o?i.default.createElement("div",{className:"missing-value"},"Missing value"):"title"===n&&"fpfv_fpft"===l?i.default.createElement("div",null,o):i.default.createElement("div",null,o,"fpfv_fpft"===l?"d":""),i.default.createElement(p.Cell,{className:"data-cell"},s,i.default.createElement("div",{className:"cell-underline"}))};g.defaultProps={rowIndex:null},g.propTypes={rowIndex:o.default.number,rows:o.default.array.isRequired,dataField:o.default.string.isRequired},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),h=n(p),v=a(1795),m=n(v),_=a(220),E=n(_),g=a(45),y=n(g),S=a(40),b=n(S),C=a(646),O=n(C),T=a(81),R=n(T),A=a(56),I=n(A),w=a(2),N=n(w),D=a(502),P=a(500),L=n(P),M=a(499),k=n(M),x=a(61),j=n(x),F=a(6),U=a(193),V=n(U),B=a(240),H=n(B),G=a(503),Y=n(G),z=a(111),W=n(z),q=a(8),K=a(35),X=a(98),Z=n(X),J=a(20),Q=n(J);a(2140);var $=function(e){function t(e){l(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onChangeStudyConstraints=function(e,t){var n=a.state,l=n.studyConstraints,o=n.ownStudyConstraints,s=n.updated,d=a.props.scenario.study_level_data,c=void 0;if(t){if(c={ownStudyConstraints:o,studyConstraints:u({},l,i({},t,e))},"fp"===t){var f=(0,q.getMomentDate)(l.target_lpft);f.isBefore(e)&&(c.studyConstraints.target_lpft=(0,q.getMomentDate)(e).add(1,"day"))}}else c={ownStudyConstraints:!!e,studyConstraints:u({},l)};var p=a.validateStudyConstraintsStep(c.ownStudyConstraints,c.studyConstraints);c=u({},c,{isValid:u({},a.state.isValid,{studyConstraints:p})}),p&&(t&&!(0,O.default)(Object.keys(l),"therapeutic_area","indication").includes(t)||!!d!=!!e||d&&!(0,y.default)((0,q.prepareForComparison)(d),(0,q.prepareForComparison)(c.studyConstraints))?c.updated=u({},s,c.studyConstraints,{ownStudyConstraints:c.ownStudyConstraints}):c.updated=u({},(0,R.default)(s,[].concat(r(Object.keys(l)),["ownStudyConstraints"])))),a.setState(c)},a.validateStudyConstraintsStep=function(e,t){if(!e)return!0;var a=!0;return Object.keys(t).filter(function(e){return"indication"!==e&&"therapeutic_area"!==e}).forEach(function(e){t[e]||0===t[e]||(a=!1)}),a};var n=e.scenario,s=n&&null!==n.source_scenario_id,d={include:[],exclude:[],other:[],initialIncludedRegionsCountries:[],initialExcludedRegionsCountries:[],disabledIncludedCountries:[],disabledExcludedCountries:[]};n&&n.countries&&e.regionsCountries&&(d=(0,q.prepareLocationsData)(n,e.regionsCountries,s)),e.showCohorts&&n&&n.cohorts&&e.regionsCountries&&(n.cohorts=(0,q.prepareCohortsData)(e.scenario.cohorts,e.regionsCountries,s)),a.state=u({},d,{study:e.study,scenario:n,updated:{},isValid:{details:!0,targetPatients:!0,milestones:!0,locations:!0,patientAllocations:!0,studyConstraints:!0},fixedBarLeft:"auto",ownStudyConstraints:!!n.study_level_data,studyConstraints:n.study_level_data?u({},n.study_level_data):{indication:e.study.indication,therapeutic_area:e.study.therapeutic_area,target_num_patients:e.study.target_num_patients,fp:e.study.fp,target_lpft:e.study.target_lpft,fpfv_fpft:e.study.fpfv_fpft}});var c=e.dirtyData;if(c){var f=void 0,p=void 0;if(c.scenario&&e.regionsCountries){var h=e.regionsCountries.map(function(e){var t=e.countries.map(function(e){return u({},e,{platform_country_id:e.id})});return u({},e,{countries:t})});f=(0,b.default)(h),p=(0,b.default)(h),c.includeCountries&&c.includeCountries.forEach(function(e){e.countries.forEach(function(t){var a=f.find(function(t){return t.name===e.name});(0,q.updateInitialRegionsCountries)(a,t)})}),c.excludeCountries&&c.excludeCountries.forEach(function(e){e.countries.forEach(function(t){var a=p.find(function(t){return t.name===e.name});(0,q.updateInitialRegionsCountries)(a,t)})})}c=u({},c,{initialExcludedRegionsCountries:p,initialIncludedRegionsCountries:f}),a.state=c}return a.onResize=a.onResize.bind(a),a.onValidationChange=a.onValidationChange.bind(a),a.onChangeDetails=a.onChangeDetails.bind(a),a.onBlurDetails=a.onBlurDetails.bind(a),a.onChangeTargetPatients=a.onChangeTargetPatients.bind(a),a.onChangeMilestones=a.onChangeMilestones.bind(a),a.onClose=a.onClose.bind(a),a.onOptimize=a.onOptimize.bind(a),a.onChangeRegionsCountries=a.onChangeRegionsCountries.bind(a),a.onChangePatientAllocation=a.onChangePatientAllocation.bind(a),a.onChangeCohort=a.onChangeCohort.bind(a),a.onAddCohort=a.onAddCohort.bind(a),a.onRemoveCohort=a.onRemoveCohort.bind(a),a}return s(t,e),d(t,[{key:"componentDidMount",value:function(){document.body.scrollTop=0,window.addEventListener("resize",this.onResize),"auto"===this.state.fixedBarLeft&&this.setState({fixedBarLeft:this.getFixedBarLeft()})}},{key:"componentWillReceiveProps",value:function(e){var t=e.activeUser,a=e.requirePageRefresh,n=e.scenario,r=n&&null!==n.source_scenario_id;if(a&&t&&!(0,E.default)(this.state.updated)&&((0,K.removeParamItemStorage)("fpo-dirty-data",t.id+"-"+e.studyId+"-"+e.scenarioId+"-edit"),(0,K.addToStorage)("fpo-dirty-data",{id:t.id+"-"+e.studyId+"-"+e.scenarioId+"-edit",values:u({},this.state,{study:u({},this.state.study,{scenarios:[]}),scenario:u({},this.state.scenario,{approvedData:null}),submitted:!1})})),e.scenario&&e.scenario.countries&&e.regionsCountries&&!e.showCohorts&&!e.dirtyData){var i=(0,q.prepareLocationsData)(e.scenario,e.regionsCountries,r);this.setState(u({},i))}else if(e.scenario&&e.scenario.cohorts&&e.regionsCountries&&e.showCohorts&&!e.dirtyData){var l=(0,q.prepareCohortsData)(e.scenario.cohorts,e.regionsCountries,r);this.setState({scenario:u({},this.state.scenario,{cohorts:l})})}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function(){this.setState({fixedBarLeft:this.getFixedBarLeft()})}},{key:"onValidationChange",value:function(e,t){this.setState({isValid:u({},this.state.isValid,i({},e,t))})}},{key:"onChangeDetails",value:function(e){var t=this,a=this.props.study.scenarios.filter(function(e){return e.id!==t.props.scenario.id}).map(function(e){return e.name}),n=a.indexOf(e)>-1;this.setState({updated:u({},this.state.updated,{name:e}),isValid:u({},this.state.isValid,{details:!(!e||n)})})}},{key:"onBlurDetails",value:function(e){var t=this,a=this.props,n=a.studyId,r=a.validateScenarioName,i=a.scenario.name;e&&e!==i&&r(n,e).then(function(e){var a=e.value;t.state.isValid.details===a&&t.setState({isValid:u({},t.state.isValid,{details:!a})})})}},{key:"onChangeTargetPatients",value:function(e){this.setState({updated:u({},this.state.updated,e)})}},{key:"onChangeMilestones",value:function(e){this.setState({updated:u({},this.state.updated,(0,R.default)(e,"fp"))})}},{key:"onChangeRegionsCountries",value:function(e,t){var a=this,n=(0,b.default)(this.state.otherCountries),r=(0,b.default)("Include"===t?this.state.includeCountries:this.state.excludeCountries),i=e.map(function(e){return u({},e,{countries:e.countries.map(function(a){var i={patients_min:null,patients:null,patients_max:null,isOverridden:null},l=t.toUpperCase();return(0,q.changeRegionsCountries)(r,n,e,a,i),u({},a,{uniqid:e.id+"_"+a.id},i,{constraint:l})})})});n=n.filter(function(e){return e.countries.length}),r=r.filter(function(e){return e.countries=e.countries.filter(function(e){return!!a.props.scenario.countries.find(function(t){return"Unspecified country"===e.name?t.country_name===e.name&&t.region_id===e.region_id:t.country_name===e.name})}),!!e.countries.length}),r.length&&r.forEach(function(e){e.countries.forEach(function(e){e.constraint=null});var t=n.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});t?t.countries=t.countries.concat(e.countries):n.push(e)}),"Include"===t?this.setState({includeCountries:i,otherCountries:n,updated:u({},this.state.updated,{includeCountries:i,otherCountries:n})}):this.setState({excludeCountries:i,otherCountries:n,updated:u({},this.state.updated,{excludeCountries:i,otherCountries:n})})}},{key:"onChangePatientAllocation",value:function(e,t,a,n){var r,l=n?"includeCountries":"otherCountries",o=this.state[l],s=/^[1-9]\d*$/,d=!0;o.forEach(function(n,r){return n.countries.forEach(function(n,i){if(n.id===e){if(!s.test(a)&&0!==a.length)return;o[r].countries[i][t]=a?parseInt(a,10):null,"patients"===t&&(o[r].countries[i].isOverridden=!0),n.patients?(n.patients_min>n.patients||n.patients_max&&n.patients_max<n.patients)&&(d=!1):n.patients_max&&n.patients_max<n.patients_min&&(d=!1)}})}),this.setState((r={},i(r,l,o),i(r,"updated",u({},this.state.updated,i({},l,o))),i(r,"isValid",u({},this.state.isValid,{patientAllocations:d})),r))}},{key:"onClose",value:function(){this.props.onClose()}},{key:"onOptimize",value:function(){var e=this,t=this.state,a=t.includeCountries,n=t.excludeCountries,r=t.otherCountries;(0,E.default)(this.state.updated)&&this.onClose();var i=[];a.forEach(function(e){var t=e.countries.map(function(e){return u({},e,{constraint:"INCLUDE",unlock:(!e.unlock||!(e.patients||e.patients_min||e.patients_max))&&e.unlock})}),a=i.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});a?a.countries=a.countries.concat(t):i.push(u({},e,{countries:t}))}),r.forEach(function(e){var t=e.countries.map(function(e){return u({},e,{constraint:null,unlock:(!e.unlock||!(e.patients||e.patients_min||e.patients_max))&&e.unlock})}),a=i.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});a?a.countries=a.countries.concat(t):i.push(u({},e,{countries:t}))}),n.forEach(function(e){var t=e.countries.map(function(e){return u({},e,{constraint:"EXCLUDE"})}),a=i.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});a?a.countries=a.countries.concat(t):i.push(u({},e,{countries:t}))}),this.props.scenario.countries.forEach(function(e){var t=i.find(function(t){return t.name.toLowerCase()===e.region_name.toLowerCase()});t?t.countries.find(function(t){return t.name.toLowerCase()===e.country_name.toLowerCase()})||t.countries.push({id:e.platform_country_id,name:e.country_name,isSelected:!1,region_id:t.id,disabled:!1,constraint:null,platform_country_id:e.platform_country_id}):i.push({id:e.region_id,name:e.region_name,isCountryRegion:e.regionHasSingleCountry,countries:[{id:e.platform_country_id,name:e.country_name,isSelected:!1,region_id:e.region_id,disabled:!1,constraint:null,platform_country_id:e.platform_country_id}]})}),this.setState({updated:u({},(0,R.default)(this.state.updated,["includeCountries","excludeCountries","otherCountries"]),{locations:i,cohorts:this.state.scenario.cohorts})},function(){(0,E.default)(e.state.updated)?e.onClose():e.setState({submitted:!0},function(){(0,K.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-"+e.props.scenarioId+"-edit");var t=e.state.updated;t.locations&&t.locations.forEach(function(e,a){e.countries.forEach(function(e,n){e.isOverridden||(t.locations[a].countries[n].patients=null)})}),e.state.ownStudyConstraints||(t=u({},t,{indication:null,therapeutic_area:null,target_num_patients:null,fp:null,target_lpft:null,fpfv_fpft:null})),e.props.onSubmit((0,R.default)(t,["scenario"]))})})}},{key:"onChangeCohort",value:function(e,t,a,n,r){var i=this.state.scenario;i.cohorts=i.cohorts.map(function(i){var l=i;return l.id===e&&(n?l[n][t]=a:"locations"!==t||r?l[t]=a:l.locations=a.map(function(e){var t=e.countries.map(function(t){var a=null,n=null,r=!1,i=l.locations.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});if(i){var o=i.countries.find(function(e){return e.name.toLowerCase()===t.name.toLowerCase()});o&&(a=o.patients,n=o.sites,r=o.hasActuals)}return u({},t,{patients:a,sites:n,hasActuals:r})});return u({},e,{countries:t})}),l.state!==X.ITEM_STATE.NEW&&(l.state=X.ITEM_STATE.UPDATED)),l});var l=(0,W.default)(i);this.setState({scenario:i,isValid:u({},this.state.isValid,{cohorts:l}),updated:u({},this.state.updated,{scenario:i})})}},{key:"onAddCohort",value:function(){var e=this.state.scenario,t=e.cohorts[e.cohorts.length-1],a={id:I.default.generate(),name:"Cohort "+(e.cohorts.length+1),rank:t.rank+1,locations:[],state:X.ITEM_STATE.NEW,trigger:{trigger_type:Z.default.MILESTONES,start_date:null,num_patients:null,num_patients_abs:!0,start_milestone:null,source_cohort_id:null}};e.cohorts=[].concat(r(e.cohorts),[a]);var n=(0,W.default)(e);this.setState({scenario:e,isValid:u({},this.state.isValid,{cohorts:n}),updated:{scenario:e}})}},{key:"onRemoveCohort",value:function(e){var t=this.state.scenario;t.cohorts=t.cohorts.reduce(function(t,a){var n=a;return n.id!==e?t.push(n):n.id===e&&n.state!==X.ITEM_STATE.NEW&&(n.state=X.ITEM_STATE.DELETED,t.push(n)),t},[]);var a=(0,W.default)(t);this.setState({scenario:t,isValid:u({},this.state.isValid,{cohorts:a}),updated:{scenario:t}})}},{key:"getFixedBarLeft",value:function(){if(!this.fixedBarColumnEl)return"auto";var e=this.fixedBarColumnEl.getBoundingClientRect();return e.left+e.width+-48}},{key:"isValid",value:function(){return(0,m.default)(this.state.isValid).every(function(e){return e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.study,n=t.scenario,r=t.showCohorts,i=this.state,l=i.initialIncludedRegionsCountries,o=i.initialExcludedRegionsCountries,s=i.includeCountries,u=i.excludeCountries,d=i.otherCountries,c=i.disabledIncludedCountries,p=i.disabledExcludedCountries,h=i.submitted,v=i.updated,m=i.ownStudyConstraints,_=i.studyConstraints,g=(0,q.mergeLocations)(s,d);return a&&n&&0!==l.length&&0!==o.length?f.default.createElement("div",{className:"edit-scenario-wizard"},f.default.createElement("div",{className:"fpo-grid"},f.default.createElement("div",{className:"fpo-row edit-scenario-wizard__header"},f.default.createElement("div",{className:(0,N.default)("fpo-col-4",{"fpo-col-offset-4":!r,"fpo-col-offset-1":r})},f.default.createElement("h4",null,"Edit Scenario")),f.default.createElement("div",{className:(0,N.default)("fpo-col-1",{"fpo-col-offset-5":r,"fpo-col-offset-1":!r}),ref:function(t){e.fixedBarColumnEl=t}},f.default.createElement("div",{className:"edit-scenario-wizard__fixed-bar",style:{left:this.state.fixedBarLeft}},f.default.createElement("div",{className:"edit-scenario-wizard__close",onClick:this.onClose},F.Icons.CROSS)))),f.default.createElement(D.WizardScenarioDetailsEditComponent,{activeStep:!0,showCohorts:r,onChange:this.onChangeDetails,onBlur:this.onBlurDetails,studyDescription:a.description,studyIndication:a.indication,studyId:a.study_id,studyTa:a.therapeutic_area,status:this.state.isValid.details,value:void 0!==this.state.updated.name?this.state.updated.name:n.name}),f.default.createElement("div",{className:"fpo-row edit-scenario-wizard__spacer"}),f.default.createElement(Y.default,{activeStep:!0,validationChangeHandler:this.onValidationChange,status:this.state.isValid.studyConstraints,showCohorts:r,ownStudyConstraints:m,values:_,onChange:this.onChangeStudyConstraints}),f.default.createElement("div",{className:"fpo-row edit-scenario-wizard__spacer"}),r&&f.default.createElement(k.default,{isAdjusted:a.state.status===Q.default.ACTIVE&&null!==n.source_scenario_id,cohorts:this.state.scenario.cohorts,onAdd:this.onAddCohort,onRemove:this.onRemoveCohort,onUpdate:this.onChangeCohort,locations:this.props.regionsCountries,study:a,isDisabled:!1,activeStep:!0}),!r&&f.default.createElement(L.default,{activeStep:!0,scenarioCountries:n.countries,disabledIncludedCountries:c,disabledExcludedCountries:p,recommendedByAnalytics:d,includeCountries:s,excludeCountries:u,includedRegionsCountries:l,excludedRegionsCountries:o,onChange:this.onChangeRegionsCountries,onValidationChange:function(){return e.onValidationChange("locations",!0,!0)}}),!r&&f.default.createElement(H.default,{hidden:!g||0===g.length,activeStep:!0,onUpdate:this.onChangePatientAllocation,locations:g}),f.default.createElement("div",{className:"fpo-row"},f.default.createElement("div",{className:(0,N.default)("fpo-col edit-scenario-wizard__footer",{"fpo-col-offset-4 fpo-col-4":!r,"fpo-col-offset-1 fpo-col-9":r})},f.default.createElement(j.default,{className:"edit-scenario-wizard__optimize_button",disabled:!this.isValid()||h||(0,E.default)(this.state.updated),onClick:this.onOptimize},"Save")))),f.default.createElement("div",{className:"fpo-row edit-scenario-wizard__spacer"}),f.default.createElement(V.default,{removeStoredData:this.props.activeUser.id+"-"+this.props.studyId+"-"+this.props.scenarioId+"-edit",hasUnsaved:!h&&!(0,E.default)(v)&&!this.props.requirePageRefresh})):null}}]),t}(c.Component);$.defaultProps={showCohorts:!1,requirePageRefresh:!1,dirtyData:null},$.propTypes={study:h.default.object.isRequired,studyId:h.default.number.isRequired,scenario:h.default.object.isRequired,scenarioId:h.default.number.isRequired,onClose:h.default.func.isRequired,onSubmit:h.default.func.isRequired,regionsCountries:h.default.array.isRequired,showCohorts:h.default.bool,activeUser:h.default.object.isRequired,requirePageRefresh:h.default.bool,dirtyData:h.default.object,validateScenarioName:h.default.func.isRequired},t.default=$},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(808),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditStudyDescriptionComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=a(0),d=n(u),c=a(1),f=n(c),p=a(71),h=a(12),v=n(h),m=a(27),_=n(m),E=function(e){var t=e.input,a=e.disabled,n=e.maxLength,r=e.insideLabel,i=e.outsideLabel,l=e.placeholder,o=e.meta,u=(o.asyncValidating,o.touched),c=o.error;return d.default.createElement("div",null,d.default.createElement(_.default,s({},t,{defaultValue:t.value,onChange:void 0,onBlur:t.onChange,type:"text",maxLength:n,disabled:a,placeholder:l,outsideLabel:i,status:u&&c?"error":null,statusMessage:c,insideLabel:r})))},g=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={fixedBarLeft:"auto"},a}return l(t,e),o(t,[{key:"render",value:function(){var e=this.props.study;return d.default.createElement("form",{action:"javascript:void(0);"},d.default.createElement(p.Field,{name:"description",outsideLabel:"Description (optional)",disabled:(0,v.default)(e,"synchronizedWithImpact",!1),placeholder:e?e.description:"Enter description",maxLength:1e3,component:E}))}}]),t}(u.Component);g.propTypes={study:f.default.object},g.defaultProps={study:null},t.EditStudyDescriptionComponent=g,t.default=(0,p.reduxForm)({form:"editStudyDescriptionWizard",enableReinitialize:!0,keepDirtyOnReinitialize:!0})(g)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditStudyIdComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=a(0),d=n(u),c=a(1),f=n(c),p=a(71),h=a(137),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(h),m=a(27),_=n(m),E=a(30),g=function(e){var t=e.input,a=e.disabled,n=e.maxLength,r=e.insideLabel,i=e.outsideLabel,l=e.placeholder,o=e.meta,u=(o.asyncValidating,o.touched),c=o.error;return d.default.createElement("div",null,d.default.createElement(_.default,s({},t,{type:"text",maxLength:n,disabled:a,placeholder:l,outsideLabel:i,status:u&&c?"error":null,statusMessage:c,insideLabel:r})))},y=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={fixedBarLeft:"auto"},a}return l(t,e),o(t,[{key:"componentDidMount",value:function(){this.props.onValidationChange(this.props.valid,!1)}},{key:"componentWillReceiveProps",value:function(e){this.props.valid===e.valid&&e.anyTouched===this.props.anyTouched||this.props.onValidationChange&&this.props.onValidationChange(e.valid,e.anyTouched)}},{key:"render",value:function(){var e=this.props.study;return d.default.createElement("form",{action:"javascript:void(0);"},d.default.createElement(p.Field,{name:"study_id",outsideLabel:"Study ID",placeholder:e?e.study_id:"Please enter study ID",maxLength:45,disabled:e.is_imported,component:g,validate:[v.requiredStudy]}))}}]),t}(u.Component);y.propTypes={onValidationChange:f.default.func.isRequired,study:f.default.object},y.defaultProps={study:null},t.EditStudyIdComponent=y,t.default=(0,p.reduxForm)({form:"editStudyIdWizard",enableReinitialize:!0,keepDirtyOnReinitialize:!0,asyncValidate:E.validateStudyName,asyncBlurFields:["study_id"]})(y)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditStudyIndicationComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(71),p=a(12),h=n(p),v=a(137),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(v),_=a(106),E=a(74),g=n(E),y=a(14),S=n(y),b=a(97),C=n(b),O=function(e){var t=e.input,a=e.disabled,n=e.outsideLabel,r=e.options,i=e.initialSelect,l=e.placeholder,o=e.meta,s=o.touched,d=o.error;return u.default.createElement("div",null,u.default.createElement(g.default,{onOptionSelect:t.onChange,initialSelect:i,label:n,disabled:a,status:s&&d?"error":null,placeholder:l},r.map(function(e){return u.default.createElement(E.DropdownOption,{key:"dropdown-option_"+e.name,label:e.name,value:e})})))},T=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={fixedBarLeft:"auto"},a}return l(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.availableTherapeuticAreas,a=e.availableIndications,n=e.study,r=e.impactTooltip,i=[],l=null;n&&(i=t.filter(function(e){return e.name===n.therapeutic_area}),l=a.filter(function(e){return e.name===n.indication}).pop());var o=i.length?(0,_.getIndications)(i[0],a):[];return u.default.createElement("form",{action:"javascript:void(0);"},u.default.createElement(f.Field,{initialSelect:o.length?l:{},name:"indication",outsideLabel:"Indication",placeholder:n?n.indication:"Select indication area",options:o,disabled:(0,h.default)(n,"is_imported")&&((0,h.default)(n,"synchronizedWithImpact",!1)||!r),component:O,validate:[m.required]}),r&&u.default.createElement(S.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:u.default.createElement("span",null,"Impact value:",u.default.createElement("br",null),r)},u.default.createElement("div",{className:"misaligned-warning__icon narrow"},C.default.INFO_O)))}}]),t}(s.Component);T.propTypes={study:c.default.object,availableTherapeuticAreas:c.default.array,availableIndications:c.default.array,impactTooltip:c.default.string},T.defaultProps={availableTherapeuticAreas:[],availableIndications:[],therapeutic_area:null,study:null,impactTooltip:null},t.EditStudyIndicationComponent=T,t.default=(0,f.reduxForm)({form:"editStudyIndicationWizard"})(T)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditStudyPhaseComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(71),p=a(12),h=n(p),v=a(137),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(v),_=a(74),E=n(_),g=a(14),y=n(g),S=a(97),b=n(S),C=a(20),O=function(e){var t=e.input,a=e.disabled,n=e.outsideLabel,r=e.options,i=e.initialSelect,l=e.placeholder,o=e.meta,s=o.touched,d=o.error;return u.default.createElement("div",null,u.default.createElement(E.default,{onOptionSelect:t.onChange,initialSelect:i,label:n,disabled:a,status:s&&d?"error":null,placeholder:l},r.map(function(e){return u.default.createElement(_.DropdownOption,{key:"dropdown-option_"+e.name,label:e.name,value:e})})))},T=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={fixedBarLeft:"auto"},a}return l(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.study,a=e.impactTooltip,n=C.PHASE,r=null;return t&&(r=n.filter(function(e){return e.name===t.phase}).pop()),u.default.createElement("form",{action:"javascript:void(0);"},u.default.createElement(f.Field,{initialSelect:n.length?r:{},name:"phase",outsideLabel:"Phase",placeholder:t?t.phase:"Select phase",options:n,disabled:(0,h.default)(t,"is_imported")&&((0,h.default)(t,"synchronizedWithImpact",!1)||!a),component:O,validate:[m.required]}),a&&u.default.createElement(y.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:u.default.createElement("span",null,"Impact value:",u.default.createElement("br",null),a)},u.default.createElement("div",{className:"misaligned-warning__icon narrow"},b.default.INFO_O)))}}]),t}(s.Component);T.propTypes={study:c.default.object,impactTooltip:c.default.string},T.defaultProps={study:null,impactTooltip:null},t.EditStudyPhaseComponent=T,t.default=(0,f.reduxForm)({form:"editStudyPhaseWizard"})(T)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditStudyTherapeuticComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(71),p=a(12),h=n(p),v=a(137),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(v),_=a(74),E=n(_),g=a(14),y=n(g),S=a(97),b=n(S),C=function(e){var t=e.input,a=e.disabled,n=e.outsideLabel,r=e.options,i=e.initialSelect,l=e.placeholder,o=e.meta,s=o.touched,d=o.error;return u.default.createElement("div",null,u.default.createElement(E.default,{onOptionSelect:t.onChange,initialSelect:i,label:n,disabled:a,status:s&&d?"error":null,placeholder:l},r.map(function(e){return u.default.createElement(_.DropdownOption,{key:"dropdown-option_"+e.name,label:e.name,value:e})})))},O=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={fixedBarLeft:"auto"},a}return l(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.availableTherapeuticAreas,a=e.study,n=e.impactTooltip,r=null;return a&&(r=t.filter(function(e){return e.name===a.therapeutic_area}).pop()),u.default.createElement("form",{action:"javascript:void(0);"},u.default.createElement(f.Field,{initialSelect:r,name:"therapeutic_area",outsideLabel:"Therapeutic area",placeholder:a?a.therapeutic_area:"Select therapeutic area",options:t,component:C,disabled:(0,h.default)(a,"is_imported")&&((0,h.default)(a,"synchronizedWithImpact",!1)||!n),validate:[m.required]}),n&&u.default.createElement(y.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:u.default.createElement("span",null,"Impact value:",u.default.createElement("br",null),n)},u.default.createElement("div",{className:"misaligned-warning__icon narrow"},b.default.INFO_O)))}}]),t}(s.Component);O.propTypes={availableTherapeuticAreas:c.default.array,study:c.default.object,impactTooltip:c.default.string},O.defaultProps={availableTherapeuticAreas:[],availableIndications:[],therapeutic_area:null,study:null,impactTooltip:null},t.EditStudyTherapeuticComponent=O,t.default=(0,f.reduxForm)({form:"editStudyLevelTherapeuticWizard",enableReinitialize:!0,keepDirtyOnReinitialize:!0})(O)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),h=n(p),v=a(2),m=n(v),_=a(45),E=n(_),g=a(54),y=n(g),S=a(12),b=n(S),C=a(6),O=a(814),T=n(O),R=a(812),A=n(R),I=a(811),w=n(I),N=a(810),D=n(N),P=a(505),L=n(P),M=a(501),k=n(M),x=a(61),j=n(x),F=a(193),U=n(F),V=a(495),B=n(V),H=a(14),G=n(H),Y=a(504),z=n(Y),W=a(813),q=n(W),K=a(8),X=a(55),Z=n(X),J=a(106),Q=a(35);a(2141);var $=a(73),ee=a(20),te=function(e){function t(e){l(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onChangePhase=function(e){var t=e.phase.label;a.setState(function(e){return{study:u({},e.study,{phase:t}),formError:u({},e.formError,{phase:!0})}},function(){a.setState(u({},(0,J.getMisalignedDetails)(a.state.study)))})},a.validationFilters=function(e){a.setState(function(t){return{formError:u({},t.formError,{inclusion:e})}})},a.toggleDetails=function(){a.setState({isMismatchDetailsShown:!a.state.isMismatchDetailsShown})},a.state=e.dirtyData||u({study:e.study,submitted:!1,formError:{indication:!0,study_id:!0,target_num_patients:!0,fpfv_fpft:!0},isMismatchDetailsShown:!1},(0,J.getMisalignedDetails)(e.study)),a.onClose=a.onClose.bind(a),a.onSubmit=a.onSubmit.bind(a),a.onChangeTherapeutic=a.onChangeTherapeutic.bind(a),a.onChangeIndication=a.onChangeIndication.bind(a),a.onChangeId=a.onChangeId.bind(a),a.onChangeDescription=a.onChangeDescription.bind(a),a.onChangePatients=a.onChangePatients.bind(a),a.onChangeMilestones=a.onChangeMilestones.bind(a),a.validationStudyID=a.validationStudyID.bind(a),a.validationPatients=a.validationPatients.bind(a),a.validationMilestones=a.validationMilestones.bind(a),a.onChangeFilters=a.onChangeFilters.bind(a),a}return s(t,e),d(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.studyId,a=e.activeUser,n=e.requirePageRefresh,r=i(e,["studyId","activeUser","requirePageRefresh"]);e.study&&((0,Z.default)(a,e.study).isUserHasStudyFullControl||(this.props.onClose(e.study.id),this.props.forbiddenError($.DONT_HAVE_ACCESS_TO_VIEW_PAGE))),n&&a&&!(0,E.default)(e.study,this.state.study)&&((0,Q.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"-"+this.props.studyId+"-edit"),(0,Q.addToStorage)("fpo-dirty-data",{id:a.id+"-"+t+"-edit",values:this.state})),(!e.dirtyData&&!n&&!this.props.study||this.props.dirtyData&&!e.dirtyData)&&this.setState(u({study:e.study},(0,J.getMisalignedDetails)(e.study),r))}},{key:"onClose",value:function(){this.props.onClose(this.props.study.id)}},{key:"onSubmit",value:function(){var e=this;this.setState({submitted:!0},function(){(0,Q.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-edit"),e.props.onSubmit(e.state.study)})}},{key:"onChangeTherapeutic",value:function(e){var t=this,a=e.therapeutic_area.label;this.setState(function(e){return{study:u({},e.study,{therapeutic_area:a,indication:"Select indication area"}),formError:u({},e.formError,{indication:!1})}},function(){t.setState(u({},(0,J.getMisalignedDetails)(t.state.study)))})}},{key:"onChangeIndication",value:function(e){var t=this,a=e.indication.label;this.setState(function(e){return{study:u({},e.study,{indication:a}),formError:u({},e.formError,{indication:!0})}},function(){t.setState(u({},(0,J.getMisalignedDetails)(t.state.study)))})}},{key:"onChangeId",value:function(e){var t=e.study_id;this.setState(function(e){return{study:u({},e.study,{study_id:t})}})}},{key:"onChangeDescription",value:function(e){var t=e.description;this.setState(function(e){return{study:u({},e.study,{description:t})}})}},{key:"onChangePatients",value:function(e){var t=this,a=e.target_num_patients;this.setState(function(e){return{study:u({},e.study,{target_num_patients:+a})}},function(){t.setState(u({},(0,J.getMisalignedDetails)(t.state.study)))})}},{key:"onChangeMilestones",value:function(e){var t=this,a=e.fp,n=e.end_date,r=e.fpfv_fpft;this.setState(function(e){return{study:u({},e.study,{target_lpft:(0,K.prepareToStudyEditFormat)(n),fp:(0,K.prepareToStudyEditFormat)(a),fpfv_fpft:+r})}},function(){t.setState(u({},(0,J.getMisalignedDetails)(t.state.study)))})}},{key:"onChangeFilters",value:function(e){var t=this;this.setState(function(t){return{study:u({},t.study,e)}},function(){t.setState(u({},(0,J.getMisalignedDetails)(t.state.study)))})}},{key:"validationStudyID",value:function(e){this.setState(function(t){return{formError:u({},t.formError,{study_id:e})}})}},{key:"validationPatients",value:function(e){this.setState(function(t){return{formError:u({},t.formError,{target_num_patients:e})}})}},{key:"validationMilestones",value:function(e){this.setState(function(t){return{formError:u({},t.formError,{fpfv_fpft:e})}})}},{key:"render",value:function(){var e=this,t=(0,m.default)("wizard-step","fpo-row","fpo-wizard-study-details-container","edit-study-level-row"),a=this.state,n=a.study,i=a.formError,l=a.impactParams,o=a.invalidFields,s=this.props,d=s.availableTherapeuticAreas,c=s.availableIndications,p=Object.values(i);if(!n)return null;var h=["impactStudyParams","description","study_id"].concat(r(ee.STUDY_PARAMS),r(ee.STUDY_FILTERS)),v=(0,y.default)(n,h),_=(0,y.default)(this.props.study,h),g=(0,E.default)(v,_);return f.default.createElement("div",{className:"edit-study-level-wizard"},f.default.createElement("div",{className:"fpo-grid"},f.default.createElement("div",{className:"fpo-row edit-study-level-wizard__header"},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-4"}),f.default.createElement("div",{className:"fpo-col-offset-1 fpo-col-1",ref:function(t){e.fixedBarColumnEl=t}},f.default.createElement("div",{className:"edit-study-level-wizard__fixed-bar"},f.default.createElement("div",{className:"edit-study-level-wizard__close",onClick:this.onClose},C.Icons.CROSS)))),f.default.createElement("div",{className:"fpo-row"},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-4"},n.synchronizedWithImpact?f.default.createElement("span",{className:"edit-scenario-wizard__attention"},"You are editing a study synchronized with Impact. The only parameter allowed to be edited is FPFV-FPFT"):null)),f.default.createElement("div",{className:t},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-4"},f.default.createElement("h1",null,"Study details"),f.default.createElement(T.default,{impactTooltip:o.includes("therapeutic_area")?l.therapeutic_area:null,study:n,onChange:this.onChangeTherapeutic,availableTherapeuticAreas:d,availableIndications:c}),f.default.createElement(A.default,{impactTooltip:o.includes("indication")?l.indication:null,availableTherapeuticAreas:d,availableIndications:c,onChange:this.onChangeIndication,study:n}),f.default.createElement(q.default,{impactTooltip:o.includes("phase")?l.phase:null,onChange:this.onChangePhase,study:n}),f.default.createElement(w.default,{study:n,initialValues:{study_id:n?""+n.study_id:""},onValidationChange:this.validationStudyID,onChange:this.onChangeId}),f.default.createElement(D.default,{study:n,initialValues:{description:n&&n.description?n.description:""},onChange:this.onChangeDescription}),f.default.createElement("div",{className:"keyline-separator"}))),f.default.createElement("div",{className:t},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-4"},f.default.createElement(z.default,{onChange:this.onChangeFilters,isEditing:!0,onValidationChange:this.validationFilters,activeStep:!0,study:n,initialValues:(0,y.default)(n,ee.STUDY_FILTERS)}))),f.default.createElement("div",{className:t},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-2"},f.default.createElement(L.default,{impactTooltip:o.includes("target_num_patients")?l.target_num_patients:null,isEditing:!0,disabled:(0,b.default)(n,"synchronizedWithImpact",!1),activeStep:!0,initialValues:{target_num_patients:n&&n.target_num_patients?""+n.target_num_patients:""},onChange:this.onChangePatients,onValidationChange:this.validationPatients}))),f.default.createElement("div",{className:t},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-4"},f.default.createElement(k.default,{invalidFields:o,impactParams:l,activeStep:!0,key:"milestone",study:n,onChange:this.onChangeMilestones,onValidationChange:this.validationMilestones,initialValues:{fp:n?(0,K.getMomentDate)(n.fp):null,end_date:n?(0,K.getMomentDate)(n.target_lpft):null,fpfv_fpft:n?n.fpfv_fpft:""},isEditing:!0}))),o&&o.length>0&&f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:t},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-4"},f.default.createElement("div",{className:"edit-scenario-wizard__warning"},f.default.createElement("div",{className:"message"},"Study parameters aren't consistent with Impact data."),f.default.createElement(G.default,{mouseEnterDelay:.7,placement:"top",overlay:"Click to see mismatched parameters"},f.default.createElement("div",{className:"study-details-warning-details__wrapper",onClick:this.toggleDetails},C.Icons.INFO_O))))),f.default.createElement(B.default,u({},this.state,{infoOnly:!0,isShown:this.state.isMismatchDetailsShown,onClose:this.toggleDetails}))),f.default.createElement("div",{className:t},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-4"},f.default.createElement("div",null,f.default.createElement("div",{className:"edit-study-level-wizard__footer"},!n.synchronizedWithImpact&&f.default.createElement("div",{className:"edit-scenario-wizard__attention"},n.is_imported?f.default.createElement("span",null,"You are editing a study imported from Impact - this will affect all scenarios in your study"):f.default.createElement("span",null,"You are editing a study level characteristic - this will affect all scenarios in your study")),f.default.createElement(j.default,{onClick:this.onSubmit,className:"edit-study-wizard__apply_button",disabled:p.includes(!1)||g},"Apply changes")))))),f.default.createElement(U.default,{removeStoredData:this.props.activeUser.id+"-"+this.props.studyId+"-edit",hasUnsaved:!this.state.submitted&&!this.props.requirePageRefresh&&!g}))}}]),t}(c.Component);te.propTypes={onClose:h.default.func.isRequired,onSubmit:h.default.func.isRequired,availableTherapeuticAreas:h.default.array,availableIndications:h.default.array,study:h.default.object,studyId:h.default.oneOfType([h.default.string,h.default.number]).isRequired,activeUser:h.default.object.isRequired,requirePageRefresh:h.default.bool,dirtyData:h.default.object,forbiddenError:h.default.func.isRequired},te.defaultProps={availableTherapeuticAreas:[],availableIndications:[],study:null,requirePageRefresh:!1,dirtyData:null},t.default=te},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(815),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(6),p=a(14),h=n(p);a(2142);var v=function(e){function t(){var e,a,n,l;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.handleControlClick=function(){n.props.onOptionSelect(!n.props.isCollapsed)},l=a,i(n,l)}return l(t,e),o(t,[{key:"render",value:function(){var e=this.props.isCollapsed;return u.default.createElement("div",{className:"fpo-chart-collapse-control__wrapper"},u.default.createElement(h.default,{mouseEnterDelay:.7,overlay:e?"Expand chart":"Collapse chart"},u.default.createElement("div",{onClick:this.handleControlClick},e?f.Icons.FULL_SCREEN:f.Icons.COLLAPSED)))}}]),t}(u.default.PureComponent);v.defaultProps={isCollapsed:!1},v.propTypes={onOptionSelect:c.default.func.isRequired,isCollapsed:c.default.bool},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(23),p=a(116),h=a(166),v=a(757),m=a(1570),_=a(11),E=n(_),g=a(191),y=n(g),S=a(12),b=n(S),C=a(234),O=(n(C),a(6)),T=a(483),R=n(T),A=a(84),I=n(A),w=a(61),N=n(w),D=a(130),P=a(8),L=a(118);a(315);var M=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleResize=function(){a.debounced()},a.toggleMenu=function(e){a.menuOpen=void 0!==e?e:!a.menuOpen},a.toggleUncertainty=function(e){a.showUncertainty=void 0!==e?e:!a.showUncertainty},a.toggleSeries=function(e,t){switch(e.toUpperCase()){case"ADJUSTED":a.adjustedVisible=void 0!==t?t:!a.adjustedVisible;break;case"ACTUALS":a.actualsVisible=void 0!==t?t:!a.actualsVisible;break;case"APPROVED":default:a.genericVisible=void 0!==t?t:!a.genericVisible}},a.toggleCurveVisibility=function(e,t){switch(e){case"SIV":a.sivGroupVisible=void 0!==t?t:!a.sivGroupVisible;break;case"Screening":a.screeningGroupVisible=void 0!==t?t:!a.screeningGroupVisible;break;case"Randomization":default:a.enrolmentGroupVisible=void 0!==t?t:!a.enrolmentGroupVisible}},a.renderChart=function(){function e(e,t){Object.keys(Jt).forEach(function(a){a===e?t&&(Jt[e]&&Jt[e].select(".inner-rect").style("fill",t),!Jt[e]||I&&k||(Oa.style("display",null).select("text").style("fill",t===D.COLORS.WHITE?D.COLORS.BLACK:D.COLORS.WHITE).text(Jt[e].select("text").text()),Oa.select("rect").attr("stroke",t===D.COLORS.WHITE?D.COLORS.BLACK:t).attr("fill",t))):Jt[a]&&Jt[a].select(".inner-rect").style("fill","#FFF")})}function t(){var t=(0,f.mouse)(this),a=ze.invert(t[0]),n=(0,D.getHoverXPosition)(y,a,ze,i,qe,Ke);if(a=n.value,De){var r=+Bt.attr("x"),l=(0,D.getHoverXPosition)(y,ze.invert(r),ze,i,qe,Ke);if(t[0]>Pe&&t[0]-Pe<Ue){var o=ze(a)-r,d=Math.abs(a.diff(l.value,"days"));o>0&&(Bt.attr("width",o),Bt.style("fill",d>=7?D.COLORS.BLUE:D.COLORS.MID_GREY))}else{var c=ze(a),p=Pe-(c>0?c:0),h=(0,D.getHoverXPosition)(y,ze.invert(Pe),ze,i,qe,Ke),v=Math.abs(a.diff(h.value,"days"));Bt.attr("x",c).attr("width",p>0?p:0),Bt.style("fill",v>=7?D.COLORS.BLUE:D.COLORS.MID_GREY)}}var m={sivMaxLine:ua,screeningMaxLine:da,enrolmentMaxLine:ca,actualSivMaxLine:fa,actualScreeningMaxLine:pa,actualEnrolmentMaxLine:ha,adjustedSivMaxLine:_a,adjustedScreeningMaxLine:Ea,adjustedEnrolmentMaxLine:ga,hoverLine:ya,genericData:{siv:n.sivValue,screening:n.screeningValue,enrolment:n.enrolmentValue},actualData:{siv:n.actualSivValue,screening:n.actualScreeningValue,enrolment:n.actualEnrolmentValue,q75Enrolment:n.actualQ75EnrolmentValue,q25Enrolment:n.actualQ25EnrolmentValue},adjustedData:{siv:n.adjustedSivValue,screening:n.adjustedScreeningValue,enrolment:n.adjustedEnrolmentValue},date:n};if(m.hoverLine.style("display",null),m.hoverLine.attr("transform","translate("+m.date.xCoord+","+(Ve+104)+")"),m.hoverLine.select(".date").text((0,E.default)(m.date.value).format("DD MMM")),M&&(m.screeningMaxLine.attr("transform","translate(\n            "+(Ue+Be+60)+",\n            "+((m.genericData.screening.yCoord||Ke(ye))-15)+")"),m.enrolmentMaxLine.attr("transform","translate(\n            "+(Ue+Be+60)+",\n            "+((m.genericData.enrolment.yCoord||Ke(Se))-15)+")"),m.sivMaxLine.attr("transform","translate(\n            "+(-130-Be)+",\n            "+((m.genericData.siv.yCoord||qe(ge))-15)+")"),(0,f.select)(".siv-tooltip-data_generic").select("text").text(m.genericData.siv.value?m.genericData.siv.value.toFixed(0):"-"),(0,f.select)(".screening-tooltip-data_generic").select("text").text(m.genericData.screening.value?Math.floor(m.genericData.screening.value):"-"),(0,f.select)(".enrolment-tooltip-data_generic").select("text").text(m.genericData.enrolment.value?Math.floor(m.genericData.enrolment.value):"-")),I&&k&&(m.actualScreeningMaxLine.attr("transform","translate(\n            "+(Ue+Be+60)+",\n            "+((m.actualData.screening.yCoord||Ke(Ce))-15)+")"),m.actualEnrolmentMaxLine.attr("transform","translate(\n            "+(Ue+Be+60)+",\n            "+((m.actualData.enrolment.yCoord||Ke(Oe))-15)+")"),m.actualSivMaxLine.attr("transform","translate(\n            "+(-130-Be)+",\n            "+((m.actualData.siv.yCoord||qe(be))-15)+")"),va.attr("transform","translate(\n            "+(Ue+Be+50)+",\n            "+((m.actualData.q75Enrolment.yCoord||Ke(Te))-15)+")"),ma.attr("transform","translate(\n            "+(Ue+Be+50)+",\n            "+((m.actualData.q25Enrolment.yCoord||Ke(Re))-15)+")"),(0,f.select)("#q75Enrolment-tooltip-data_generic").select("text").text(m.actualData.q75Enrolment.value?m.actualData.q75Enrolment.value.toFixed(0):"-"),(0,f.select)("#q25Enrolment-tooltip-data_generic").select("text").text(m.actualData.q25Enrolment.value?m.actualData.q25Enrolment.value.toFixed(0):"-"),(0,f.select)(".siv-tooltip-data_actual").select("text").text(m.actualData.siv.value?m.actualData.siv.value.toFixed(0):"-"),(0,f.select)(".screening-tooltip-data_actual").select("text").text(m.actualData.screening.value?m.actualData.screening.value.toFixed(0):"-"),(0,f.selectAll)(".enrolment-tooltip-data_actual").select("text").text(m.actualData.enrolment.value?m.actualData.enrolment.value.toFixed(0):"-")),T&&(m.adjustedScreeningMaxLine.attr("transform","translate("+(Ue+Be+60)+","+((m.adjustedData.screening.yCoord?m.adjustedData.screening.yCoord:Ke(Ie))-15)+")"),m.adjustedEnrolmentMaxLine.attr("transform","translate("+(Ue+Be+60)+","+((m.adjustedData.enrolment.yCoord?m.adjustedData.enrolment.yCoord:Ke(we))-15)+")"),m.adjustedSivMaxLine.attr("transform","translate("+(-130-Be)+","+((m.adjustedData.siv.yCoord?m.adjustedData.siv.yCoord:qe(Ae))-15)+")"),(0,f.select)(".siv-tooltip-data_adjusted").select("text").text(m.adjustedData.siv.value?m.adjustedData.siv.value.toFixed(0):"-"),(0,f.select)(".screening-tooltip-data_adjusted").select("text").text(m.adjustedData.screening.value?Math.floor(m.adjustedData.screening.value):"-"),(0,f.select)(".enrolment-tooltip-data_adjusted").select("text").text(m.adjustedData.enrolment.value?Math.floor(m.adjustedData.enrolment.value):"-")),xt.style("display",null),xt.attr("x",m.date.xCoord+2),xt.attr("width",Ue-m.date.xCoord<0?Ue:Ue-m.date.xCoord+Be),!M||T||A||(m.date.value.isSame(Q)&&(!Ne||Q>s&&Q<u)?e("lpfv",D.COLORS.PURPLE):m.date.value.isSame(J)?e("fpft",D.COLORS.BLUE):m.date.value.isSame(Z)?e("fpfv",D.COLORS.PURPLE):m.date.value.isSame(X)?e("fsiv",D.COLORS.YELLOW):m.date.value.isSame(q)?e("plpft",D.COLORS.WHITE):m.date.value.isSame(K)?e("tlpft",D.COLORS.BLACK):(Object.keys(Jt).forEach(function(e){Jt[e]&&Jt[e].select(".inner-rect").style("fill","#FFF")}),Oa.style("display","none"))),I&&(k||T||A)){var _={fsiv:{date:X,color:D.COLORS.YELLOW,offset:18},fpfv:{date:Z,color:D.COLORS.PURPLE,offset:18},fpft:{date:J,color:D.COLORS.BLUE,offset:18},lpfv:{date:Q,color:D.COLORS.PURPLE,offset:18},actual_fsiv:{date:te,color:D.COLORS.YELLOW,offset:64},actual_fpfv:{date:ae,color:D.COLORS.PURPLE,offset:64},actual_fpft:{date:ne,color:D.COLORS.BLUE,offset:64},actual_lpfv:{date:re,color:D.COLORS.PURPLE,offset:64},adjusted_fsiv:{date:le,color:D.COLORS.YELLOW,offset:110},adjusted_fpfv:{date:oe,color:D.COLORS.PURPLE,offset:110},adjusted_fpft:{date:se,color:D.COLORS.BLUE,offset:110},adjusted_lpfv:{date:ue,color:D.COLORS.PURPLE,offset:110}};Object.keys(_).forEach(function(e){if((0,D.removeMilestoneTooltip)(m.hoverLine,e),_[e]){var t=m.date.value?m.date.value.format("DD MMM YY"):null,a=_[e].date?_[e].date.format("DD MMM YY"):null;t&&a&&t===a&&(0,D.appendMilestoneTooltip)(m.hoverLine,e,_[e].color,_[e].color,D.COLORS.WHITE,_[e].offset)}})}}(0,f.select)("#svg_wrapper_enrolment_chart").select(".svg-container").remove();var n=a.context,r=n.scenario,i=n.startDate,l=n.createdAt,o=n.data,s=(n.cohortName,n.start),u=n.end,d=n.latestDate,c=n.snapshotActualDate,_=n.maxValue,g=n.maxValuesArray,y=n.xDataSource,S=n.setStartEndDates,C=n.isExactCopy,O=n.adjustedAreValid,T=n.showAdjusted,R=n.isOverallocated,A=n.isImpact,I=n.isApproved,w=n.trackingCohortsView,N=n.hasOverallocation,L=n.showOverallocation,M=n.genericsAreValid,k=n.actualsAreValid,x=n.isPrevApproved,j=(n.showNoData,n.showWrongData,n.dataReady,n.siv),F=n.filteredScreening,U=n.filteredEnrolment,V=n.actualSiv,B=n.actualScreening,H=n.actualEnrolment,G=n.actualQEnrolment,Y=n.adjustedSiv,z=n.adjustedScreening,W=n.adjustedEnrolment,q=n.pLpft,K=n.tLpft,X=n.fsiv,Z=n.fpfv,J=n.fpft,Q=n.lpfv,$=n.actualDate,ee=n.actualFlpft,te=n.actualFsiv,ae=n.actualFpfv,ne=n.actualFpft,re=n.actualLpfv,ie=n.adjustedLpft,le=n.adjustedFsiv,oe=n.adjustedFpfv,se=n.adjustedFpft,ue=n.adjustedLpfv,de=n.originalPlpft,ce=n.originalFlpft,fe=n.originalAdjustedLpft,pe=n.targetScreeningValue,he=n.targetEnrolmentValue,ve=n.targetAdjustedScreeningValue,me=n.targetAdjustedEnrolmentValue,_e=n.sitesMax,Ee=n.patMax,ge=n.sivMax,ye=n.screeningMax,Se=n.enrolmentMax,be=n.actualSivMax,Ce=n.actualScreeningMax,Oe=n.actualEnrolmentMax,Te=n.actualQ75Max,Re=n.actualQ25Max,Ae=n.adjustedSivMax,Ie=n.adjustedScreeningMax,we=n.adjustedEnrolmentMax,Ne=s&&u,De=!1,Pe=0,Le=0,Me=a.container;if(Me){var ke=Me.getBoundingClientRect().width,xe=(ke-240)/11*2+48,je=(ke-240)/11,Fe={top:90,right:xe,bottom:250,left:130},Ue=Me.getBoundingClientRect().width-Fe.left-Fe.right,Ve=637-Fe.top-Fe.bottom,Be=30,He=(0,f.select)("#svg_wrapper_enrolment_chart"),Ge=He.append("div").classed("svg-container",!0).append("svg").attr("width",Ue+Fe.left+Fe.right).attr("height",Ve+Fe.top+Fe.bottom);Ge.append("rect").at({x:-20,y:-20,width:Ue+Fe.left+Fe.right+40,height:Ve+Fe.top+Fe.bottom+40,fill:D.COLORS.WHITE}),(0,D.injectPatternDefs)(Ge,"actualPattern");var Ye=Ge.append("g").attr("id","context").translate([Fe.left,Fe.top]);(0,D.drawChartBackground)(Ye,Ue,Ve,Be);var ze=(0,p.scaleTime)().rangeRound([0,Ue]),We=(0,p.scaleTime)().rangeRound([0,Ue]),qe=(0,p.scaleLinear)().rangeRound([Ve,0]),Ke=(0,p.scaleLinear)().rangeRound([Ve,0]),Xe=(0,v.line)().curve(v.curveStepAfter).x(function(e){return ze(e.date)}).y(function(e){return qe(e.value)}),Ze=(0,v.line)().x(function(e){return ze(e.date)}).y(function(e){return Ke(e.value)}),Je=(0,v.area)().curve(v.curveMonotoneX).x(function(e){return ze(e.date)}).y0(function(e){return Ke(e.q75)}).y1(function(e){return Ke(e.q25)});if(0===g.filter(function(e){return e}).length)return(0,f.select)("#enrolment-chart__legend-toggle").style("display","none"),void Ye.append("text").translate([Ue/2,Ve/2]).attr("text-anchor","middle").classed("no-data-message",!0).text("There is not enough data to build a chart yet");if(_.isSameOrBefore(i))return(0,f.select)("#enrolment-chart__legend-toggle").style("display","none"),void Ye.append("text").translate([Ue/2,Ve/2]).attr("text-anchor","middle").classed("no-data-message",!0).text("The approved scenario and graph cannot be loaded due to data inconsistencies");Ne?ze.domain([s,u]):ze.domain([i,_]),We.domain([i,_]),qe.domain([0,_e+.15*_e]),Ke.domain([0,Ee+.15*Ee]);var Qe=(0,h.axisBottom)().scale(ze);if(Ne){var $e=u.diff(s,"d");if($e>7)Qe.ticks(7);else{var et=Array($e).fill(0).map(function(e,t){return s.clone().add(t,"d")});et.push(u),Qe.tickValues(et).tickSizeOuter(0)}}else _.diff(i,"d")>7&&Qe.ticks(7);var tt=(0,h.axisLeft)().scale(qe).ticks(5),at=(0,h.axisRight)().scale(Ke).ticks(5),nt=[{groupX:-Be,groupY:-76,lineClass:"siv dotted",text:ge?ge.toFixed(0):"-"},{groupX:Ue-140,groupY:-76,lineClass:"screening dotted",text:ye?Math.floor(ye):"-",appendSeparator:!0},{groupX:Ue-40,groupY:-76,lineClass:"enrolment dotted",text:Se?Math.floor(Se):"-"}];if((0,D.drawSubheaderLegend)(Ye,nt),(0,D.drawAxisIcons)(Ye,-98-Be,Ue+je,-Fe.top),N){var rt=(0,D.drawOverallocationToggle)(Ye,Ue-10+2*je,-Fe.top,L,a.props.onToggleOverallocation);(0,D.drawOverallocationIcon)(rt)}var it=void 0,lt=void 0,ot=void 0,st=void 0,ut=void 0,dt=void 0;I&&k&&(it=(0,D.drawSeriesLine)(Ye,V,"siv actual",Xe,a.sivGroupVisible&&a.actualsVisible,"siv_actual_path"),lt=(0,D.drawSeriesLine)(Ye,B,"screening actual",Ze,a.screeningGroupVisible&&a.actualsVisible,"screening_actual_path"),ot=(0,D.drawSeriesLine)(Ye,H,"enrolment actual",Ze,a.enrolmentGroupVisible&&a.actualsVisible,"enrolment_actual_path"),st=(0,D.appendCurveEnd)(Ye,ze,qe,V,D.COLORS.YELLOW,a.sivGroupVisible&&a.actualsVisible,null,"siv_actual_end"),ut=(0,D.appendCurveEnd)(Ye,ze,Ke,B,D.COLORS.PURPLE,a.screeningGroupVisible&&a.actualsVisible,null,"screening_actual_end"),dt=(0,D.appendCurveEnd)(Ye,ze,Ke,H,D.COLORS.BLUE,a.enrolmentGroupVisible&&a.actualsVisible,null,"enrolment_actual_end"),Ye.append("path").data([G]).st({fill:D.COLORS.BLUE,opacity:.2,stroke:D.COLORS.BLACK}).attr("class","uncertainty-area").attr("d",Je).style("display",a.showUncertainty?null:"none"));var ct=void 0,ft=void 0,pt=void 0,ht=void 0,vt=void 0,mt=void 0,_t=void 0,Et=void 0;if(M)if(r.hasAdjustedOrigin){var gt=(0,P.getMomentDate)((0,b.default)(o,"actualTimeseriesSnapshot.actual_date",l.clone())),yt=(0,D.updateAdjustedSeries)(j,i,gt),St=(0,D.updateAdjustedSeries)(F,i,gt),bt=(0,D.updateAdjustedSeries)(U,i,gt);ct=(0,D.drawSeriesLine)(Ye,yt,"siv",Xe,a.sivGroupVisible&&a.genericVisible,"siv_generic_path"),ft=(0,D.drawSeriesLine)(Ye,St,"screening",Ze,a.screeningGroupVisible&&a.genericVisible,"screening_generic_path"),pt=(0,D.drawSeriesLine)(Ye,bt,"enrolment",Ze,a.enrolmentGroupVisible&&a.genericVisible,"enrolment_generic_path"),ht=(0,D.appendCurveEnd)(Ye,ze,qe,yt,D.COLORS.YELLOW,a.sivGroupVisible&&a.genericVisible,"dashed","siv_generic_end"),vt=(0,D.appendCurveEnd)(Ye,ze,Ke,St,D.COLORS.PURPLE,a.screeningGroupVisible&&a.genericVisible,"dashed","screening_generic_end"),mt=(0,D.appendCurveEnd)(Ye,ze,Ke,bt,D.COLORS.BLUE,a.enrolmentGroupVisible&&a.genericVisible,"dashed","enrolment_generic_end"),L&&((!Ne||Q>s&&Q<u)&&(_t=Ye.append("circle"),_t.attr("id","lpfv_dot").attr("cx",ze(Q)).attr("cy",Ke(pe)).attr("opacity",0).attr("fill",D.COLORS.PURPLE).style("display",a.screeningGroupVisible&&a.genericVisible?null:"none")),(!Ne||q>s&&q<u)&&(Et=Ye.append("circle"),Et.attr("id","lpft_dot").attr("cx",ze(q)).attr("cy",Ke(he)).attr("opacity",0).attr("fill",D.COLORS.BLUE).style("display",a.enrolmentGroupVisible&&a.genericVisible?null:"none")))}else ct=(0,D.drawSeriesLine)(Ye,j,"siv",Xe,a.sivGroupVisible&&a.genericVisible,"siv_generic_path"),ft=(0,D.drawSeriesLine)(Ye,F,"screening",Ze,a.screeningGroupVisible&&a.genericVisible,"screening_generic_path"),pt=(0,D.drawSeriesLine)(Ye,U,"enrolment",Ze,a.enrolmentGroupVisible&&a.genericVisible,"enrolment_generic_path"),ht=(0,D.appendCurveEnd)(Ye,ze,qe,j,D.COLORS.YELLOW,a.sivGroupVisible&&a.genericVisible,"dashed","siv_generic_end"),vt=(0,D.appendCurveEnd)(Ye,ze,Ke,F,D.COLORS.PURPLE,a.screeningGroupVisible&&a.genericVisible,"dashed","screening_generic_end"),mt=(0,D.appendCurveEnd)(Ye,ze,Ke,U,D.COLORS.BLUE,a.enrolmentGroupVisible&&a.genericVisible,"dashed","enrolment_generic_end"),N&&L&&((!Ne||Q>s&&Q<u)&&(_t=Ye.append("circle"),_t.attr("id","lpfv_dot").attr("cx",ze(Q)).attr("cy",Ke(pe)).attr("opacity",0).attr("fill",D.COLORS.WHITE).at({stroke:D.COLORS.PURPLE,strokeWidth:2}).style("display",a.screeningGroupVisible&&a.genericVisible?null:"none")),(!Ne||q>s&&q<u)&&(Et=Ye.append("circle"),Et.attr("id","lpft_dot").attr("cx",ze(q)).attr("cy",Ke(he)).attr("opacity",0).attr("fill",D.COLORS.WHITE).at({stroke:D.COLORS.BLUE,strokeWidth:2}).style("display",a.enrolmentGroupVisible&&a.genericVisible?null:"none")));var Ct=void 0,Ot=void 0,Tt=void 0,Rt=void 0,At=void 0,It=void 0,wt=void 0,Nt=void 0;if(T){var Dt=z.filter(function(e){return e.date>=le}),Pt=W.filter(function(e){return e.date>=le});Ct=(0,D.drawSeriesLine)(Ye,Y,"siv adjusted",Xe,a.sivGroupVisible&&a.adjustedVisible,"siv_adjusted_path"),Ot=(0,D.drawSeriesLine)(Ye,Dt,"screening adjusted",Ze,a.screeningGroupVisible&&a.adjustedVisible,"screening_adjusted_path"),Tt=(0,D.drawSeriesLine)(Ye,Pt,"enrolment adjusted",Ze,a.enrolmentGroupVisible&&a.adjustedVisible,"enrolment_adjusted_path"),Rt=(0,D.appendCurveEnd)(Ye,ze,qe,Y,D.COLORS.YELLOW,a.sivGroupVisible&&a.adjustedVisible,"hollow","siv_adjusted_end"),At=(0,D.appendCurveEnd)(Ye,ze,Ke,Dt,D.COLORS.PURPLE,a.screeningGroupVisible&&a.adjustedVisible,"hollow","screening_adjusted_end"),It=(0,D.appendCurveEnd)(Ye,ze,Ke,Pt,D.COLORS.BLUE,a.enrolmentGroupVisible&&a.adjustedVisible,"hollow","enrolment_adjusted_end"),L&&(wt=Ye.append("circle"),wt.attr("id","screening_adjusted_end").attr("cx",ze(ue)).attr("cy",Ke(ve)).style("opacity",0).attr("class","hollow").attr("stroke",D.COLORS.PURPLE).attr("stroke-width",4).attr("fill",D.COLORS.WHITE).style("display",a.screeningGroupVisible&&a.adjustedVisible?null:"none"),Nt=Ye.append("circle"),Nt.attr("id","enrolment_adjusted_end").attr("cx",ze(ie)).attr("cy",Ke(me)).style("opacity",0).attr("class","hollow").attr("stroke",D.COLORS.BLUE).attr("stroke-width",4).attr("fill",D.COLORS.WHITE).style("display",a.enrolmentGroupVisible&&a.adjustedVisible?null:"none"))}I&&$&&(0,D.drawOverflowRect)(Ye,{x:ze(i),y:0,width:ze($),height:Ve+3,fill:"url(#actualPattern)",opacity:.04});var Lt=Ye.append("g").attr("class","axis axis--x").translate([0,Ve]).call(Qe);Lt.selectAll("text").attr("class","tick").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif",fill:D.COLORS.BLACK,shapeRendering:"crispEdges",stroke:"none"}).style("text-anchor","middle").text(function(e){return(0,E.default)(e).format(Ne?"DD MMM YY":"MMM YY")}).translate([0,42]),Lt.selectAll("line").st({fill:"none",stroke:D.COLORS.BLACK,shapeRendering:"crispEdges",strokeWidth:"1px"}).at({class:"tick-line",y2:12}).translate([.5,26]),Lt.selectAll("path").st({fill:"none",stroke:D.COLORS.BLACK,opacity:0,shapeRendering:"crispEdges"});var Mt=Ye.append("g").attr("class","axis axis--y").translate([0-Be,0]).call(tt);Mt.selectAll("text").attr("class","tick").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif",fill:D.COLORS.BLACK,shapeRendering:"crispEdges",stroke:"none"}).style("text-anchor","end").text(function(e){return e}).translate([-35,0]),Mt.selectAll("line").st({fill:"none",stroke:D.COLORS.BLACK,shapeRendering:"crispEdges",strokeWidth:"1px"}).at({class:"tick-line",x2:12}).translate([-32,0]),Mt.selectAll("path").st({fill:"none",stroke:D.COLORS.BLACK,opacity:0,shapeRendering:"crispEdges"});var kt=Ye.append("g").attr("class","axis axis--y").translate([Ue+Be,0]).call(at);kt.selectAll("text").attr("class","tick").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif",fill:D.COLORS.BLACK,shapeRendering:"crispEdges",stroke:"none"}).style("text-anchor","start").text(function(e){return e}).translate([40,0]),kt.selectAll("line").st({fill:"none",stroke:D.COLORS.BLACK,shapeRendering:"crispEdges",strokeWidth:"1px"}).at({class:"tick-line",x2:12}).translate([25,0]),kt.selectAll("path").st({fill:"none",stroke:D.COLORS.BLACK,opacity:0,shapeRendering:"crispEdges"});var xt=Ye.append("rect").style("display","none").at({x:250,width:Ue,height:Ve+3}).st({fill:D.COLORS.WHITE,opacity:.7}),jt=[{x:function(){return ze(i.isSameOrBefore(K)?q<K?q:K:q<K?q:i)},y:0,width:function(){return i.isSameOrBefore(K)?q<K?ze(K)-ze(q):ze(q)-ze(K):q<K?ze(K)-ze(q):ze(q)-ze(i)},height:Ve+3,fill:q<K?D.COLORS.GREEN:D.COLORS.RED,opacity:.2},{x:ze(ee<=q?ee:q),y:0,width:ee<=q?ze(q)-ze(ee):ze(ee)-ze(q),height:Ve+3,fill:function(){return R?D.COLORS.DARK_GREY:ee<=q?D.COLORS.GREEN:D.COLORS.RED},opacity:.2},{x:ze(ie<=q?ie:q),y:0,width:ie<=q?ze(q)-ze(ie):ze(ie)-ze(q),height:Ve+3,fill:ie<=q?D.COLORS.GREEN:D.COLORS.RED,opacity:.2}];!w&&M&&(I&&ee&&q?(0,D.drawOverflowRect)(Ye,jt[1]):q&&K&&!A&&!T&&(0,D.drawOverflowRect)(Ye,jt[0])),T&&M&&(0,D.drawOverflowRect)(Ye,jt[2]);var Ft=I&&(k||A)&&!x?{stroke:D.COLORS.GREEN,strokeWidth:"4px",opacity:.2}:{stroke:D.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6},Ut=I&&(k||A)&&!x?{stroke:D.COLORS.LIGHT_GREEN,strokeWidth:"16px"}:{stroke:D.COLORS.GREY,strokeWidth:"16px"},Vt=Ye.append("g").attr("transform","translate(0, "+(Ve+104)+")");Vt.append("line").attr("x2",I&&ee&&q&&q>i?ze(q):Ue).classed("milestones-bar-background",!I||!k||x).classed("milestones-bar-background-approved",I&&(k||A)&&!x).st(Ut),Vt.append("line").attr("x2",I&&ee&&q&&q>i?ze(q):Ue).classed("milestones-bar",!I||!k||x).classed("milestones-bar-approved",I&&(k||A)&&!x).st(Ft),I&&$&&(0,D.drawOverflowRect)(Vt,{x:ze(i.isBefore(s)?s:i),y:-8,width:ze($.isAfter(u)?u:$),height:16,fill:"url(#actualPattern)",opacity:.04});var Bt=Ye.append("rect").st({fill:D.COLORS.MID_GREY,opacity:.4}).at({x:0,y:0,height:Ve+2,width:0});Ne&&((0,D.appendStartEndMark)(Vt,ze(s)).append("line").at({y1:-10,y2:-Ve-104}).st({stroke:D.COLORS.BLACK,strokeWidth:"2px",strokeDasharray:"2 2"}),(0,D.appendStartEndMark)(Vt,ze(u)).append("line").at({y1:-10,y2:-Ve-104}).st({stroke:D.COLORS.BLACK,strokeWidth:"2px",strokeDasharray:"2 2"}));var Ht=void 0;Ne||(Ht=(0,D.appendFppMark)(Vt,ze(i)),Ht.append("line").at({y1:-10,y2:-Ve-104}).st({stroke:D.COLORS.BLACK,strokeWidth:"2px"}),I&&k||T||A||(0,D.appendLabelToMilestone)(Ht,"FP",D.COLORS.BLACK,D.COLORS.WHITE,D.COLORS.BLACK));var Gt=void 0,Yt=void 0,zt=void 0,Wt=void 0;X&&X.isSameOrBefore(d)&&X.isSameOrAfter(i)&&(!Ne||X>s&&X<u)&&(Yt=(0,D.appendMilestone)(Vt,ze(X),D.COLORS.YELLOW,"FSIV",null,I&&(k||T||A))),Z&&Z.isSameOrBefore(d)&&Z.isSameOrAfter(i)&&(!Ne||Z>s&&Z<u)&&(zt=(0,D.appendMilestone)(Vt,ze(Z),D.COLORS.PURPLE,"FPFV",null,I&&(k||T||A))),J&&J.isSameOrBefore(d)&&J.isSameOrAfter(i)&&(!Ne||J>s&&J<u)&&(Gt=(0,D.appendMilestone)(Vt,ze(J),D.COLORS.BLUE,"FPFT",null,I&&(k||T||A))),Q&&Q.isSameOrBefore(d)&&Q.isSameOrAfter(i)&&(!Ne||Q>s&&Q<u)&&(Wt=(0,D.appendMilestone)(Vt,ze(Q),D.COLORS.PURPLE,"LPFV",null,I&&(k||T||A)));var qt=void 0;!K||T||A||!K.isAfter(i)||K===s||K===u||w||(qt=Vt.append("g").attr("transform","translate("+ze(K)+")"),I&&k||(qt.append("circle").st({stroke:D.COLORS.BLACK,strokeWidth:"2px",fill:D.COLORS.WHITE}).attr("r",9),qt.append("circle").style("fill",D.COLORS.BLACK).attr("r",6),qt.append("line").at({y1:-10,y2:-Ve-104}).st({stroke:D.COLORS.BLACK,strokeDasharray:"6 3",strokeWidth:"2px"}),(0,D.appendLabelToMilestone)(qt,"T/LPFT",D.COLORS.BLACK,D.COLORS.BLACK,D.COLORS.WHITE)));var Kt=void 0;if(q&&q!==s&&q!==u&&(Kt=Vt.append("g").attr("transform","translate("+ze(q)+")"),Kt.append("line").attr("y1",I&&(k||T||A)?46:-10).attr("y2",-Ve-104).style("stroke","black").style("stroke-width","2px"),Kt.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",D.COLORS.WHITE).attr("r",9),Kt.append("circle").style("fill",function(){return I&&(k||T||A)?D.COLORS.BLACK:q<=K?D.COLORS.GREEN:D.COLORS.RED}).attr("r",6),I&&(k||T||A)||(0,D.appendLabelToMilestone)(Kt,"P/LPFT",D.COLORS.BLACK,D.COLORS.WHITE,D.COLORS.BLACK)),N&&L){var Xt=U[U.length-1];if(Xt&&Xt.date){var Zt=Vt.append("g").attr("transform","translate("+ze(Xt.date)+")");Zt.append("line").attr("y1",I&&(k||T||A)?46:-10).attr("y2",-Ve-104).style("stroke",D.COLORS.DARK_GREY).style("stroke-width","2px"),Zt.append("circle").style("stroke",D.COLORS.DARK_GREY).style("stroke-width","2px").style("fill",D.COLORS.WHITE).attr("r",9),Zt.append("circle").style("fill",D.COLORS.DARK_GREY).attr("r",6)}}var Jt={startDate:Ht,fpft:Gt,fsiv:Yt,fpfv:zt,lpfv:Wt,tlpft:qt,plpft:Kt},Qt=Ye.append("g").attr("transform","translate(0, "+(Ve+150)+")");if(I&&(k||T||A)){if((w||ee)&&$&&q){Qt.append("line").attr("x1",ze(i.isBefore(s)?s:i)).attr("x2",ze(ee>q||!w?ee:q)).classed("actual-milestones-bar",!0).st({stroke:D.COLORS.MID_GREY,strokeWidth:"4px",strokeDasharray:"4 4",opacity:.6});var $t=Qt.append("g").attr("transform","translate("+ze(i.isBefore(s)?s:i)+")");$t.append("rect").attr("width",(0,D.getWidth)(ze,$,u)).attr("y",-2).attr("height",4).style("fill",D.COLORS.GREY),$t.append("rect").attr("width",(0,D.getWidth)(ze,$,u)).attr("y",-2).attr("height",4).style("fill","url(#actualPattern)").attr("opacity",.04)}else Qt.append("line").attr("x2",ie?ze(ie):Ue).classed("actual-milestones-bar",!0).st({stroke:D.COLORS.MID_GREY,strokeWidth:"4px",strokeDasharray:"4 4",opacity:.6});if(Ne?(0,D.appendStartEndMark)(Qt,ze(s)):(0,D.appendFppMark)(Qt,ze(i.isBefore(s)?s:i)),w||ee&&q&&(Qt.append("line").attr("x1",function(){return ee<=q?ze(ee):q>i?ze(q):10}).attr("x2",ze(ee<=q?q:ee)).style("stroke",function(){return R?D.COLORS.DARK_GREY:ee<=q?D.COLORS.GREEN:D.COLORS.RED}).style("stroke-width","4px"),Qt.append("text").classed("active-range-label",!0).st({fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("text-anchor",function(){return ee<=q?"end":"start"}).text((ce>de?"+":"")+ce.diff(de,"days")+"d").attr("transform",function(){return ee<=q?"translate("+(ze(q)-20)+", -14)":"translate("+(ze(q)+20)+", -14)"}).style("fill",function(){return R?D.COLORS.BLACK:ce<=de?D.COLORS.GREEN:D.COLORS.RED})),ne&&(!Ne||ne>s&&ne<u)&&(A||$>=ne)&&ne>i&&(0,D.appendMilestone)(Qt,ze(ne),D.COLORS.BLUE,"FPFT",null,I&&(k||A)),te&&(!Ne||te>s&&te<u)&&(A||$>=te)&&te>i&&(0,D.appendMilestone)(Qt,ze(te),D.COLORS.YELLOW,"FSIV",null,I&&(k||A)),ae&&(!Ne||ae>s&&ae<u)&&(A||$>=ae)&&ae>i&&(0,D.appendMilestone)(Qt,ze(ae),D.COLORS.PURPLE,"FPFV",null,I&&(k||A)),re&&(!Ne||re>s&&re<u)&&(A||$>=re)&&re>i&&(0,D.appendMilestone)(Qt,ze(re),D.COLORS.PURPLE,"LPFV",null,I&&(k||A)),$&&(!Ne||$>s&&$<u)){var ea=(0,D.appendMilestone)(Qt,ze($),D.COLORS.BLACK,null,null,I&&(k||T||A));ea.append("line").attr("y1",-2).attr("y2",-Ve-140).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px");var ta=ea.append("g"),aa=ta.append("g").attr("id","actual-date-tooltip").attr("transform","translate(0, -130)");aa.append("polygon").attr("points","0,0, 15,0, 7.5,7.5").attr("transform","translate(-7.5,28)"),aa.append("polygon").attr("points","0,0, 15,0, 7.5,-7.5").attr("transform","translate(-7.5)"),aa.append("rect").attr("x",-32).attr("width",64).attr("height",28).attr("stroke",D.COLORS.BLACK).style("fill",D.COLORS.BLACK),aa.append("text").attr("class","date").attr("transform","translate(0,20)").attr("text-anchor","middle").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).classed("milestone-label",!0).style("fill",D.COLORS.WHITE).text($.format("DD MMM"))}if(!w&&ee){var na=Qt.append("g").attr("transform","translate("+ze(ee)+")");!Ne||ee<u?(na.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",D.COLORS.WHITE).attr("r",9),na.append("circle").style("fill",function(){return R?D.COLORS.BLACK:!q||ee<=q?D.COLORS.GREEN:D.COLORS.RED}).attr("r",6),na.append("line").attr("y1",-150).attr("y2",-Ve-150).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px")):(0,D.appendStartEndMark)(Qt,ze(u))}if(R&&("country"===o.type||o.isRegionCountry)&&q){var ra=ee>q;Ye.append("line").at({x1:0,x2:ze(q),y1:Ke(o.patient_allocation),y2:Ke(o.patient_allocation)}).st({stroke:D.COLORS.DARK_GREY,strokeWidth:"2px"}),o.actual_overallocation>0?Ye.append("g").attr("transform","translate("+(ze(q)-(ra?5:-31))+", "+(Ke(o.patient_allocation)+10)+"), scale(-1, 1)").append("path").attr("d","M10 19h11v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5\n            h4.286c.786 0 1.428.675 1.428 1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2\n            s.893-2 2-2 2 .893 2 2-.893 2-2 2zM16 2h2v8h-2z M13 5h8v2h-8z").attr("fill",D.COLORS.BLACK).attr("opacity","0.5"):Ye.append("g").attr("transform","translate("+(ze(q)-(ra?31:-5))+", "+(Ke(o.patient_allocation)-34)+")").append("path").attr("d","M10 19h11v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5\n            h4.286c.786 0 1.428.675 1.428 1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2\n            s.893-2 2-2 2 .893 2 2-.893 2-2 2zM13 5h8v2h-8z").attr("fill",D.COLORS.BLACK).attr("opacity","0.5")}}var ia=Ye.append("g").attr("transform","translate(0, "+(Ve+196)+")");if(T){if(q){if(ia.append("line").attr("x1",ze(c.isBefore(s)?s:c)).attr("x2",ze(ie<q?ie:q)).classed("milestones-bar-background",!0).st({stroke:D.COLORS.GREY,strokeWidth:"16px"}),ia.append("line").attr("x1",ze(c.isBefore(s)?s:c)).attr("x2",ze(ie<q?ie:q)).classed("milestones-bar",!0).st({stroke:D.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6}),Ne?(0,D.appendStartEndMark)(ia,ze(s)):(0,D.appendFppMark)(ia,ze(c.isBefore(s)?s:c)),ia.append("line").attr("x1",ze(ie<=q?ie:q)).attr("x2",ze(ie<=q?q:ie)).style("stroke",ie<=q?D.COLORS.GREEN:D.COLORS.RED).style("stroke-width","4px"),ia.append("text").classed("active-range-label",!0).st({fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("text-anchor",ie<=q?"end":"start").text((fe>de?"+":"")+fe.diff(de,"days")+"d").attr("transform",function(){return ie<=q?"translate("+(ze(q)-20)+", -14)":"translate("+(ze(q)+20)+", -14)"}).style("fill",fe<=de?D.COLORS.GREEN:D.COLORS.RED),!Ne||q>s&&q<u){var la=ia.append("g").attr("transform","translate("+ze(q)+")");la.append("line").attr("y1",2).attr("y2",-46).style("stroke","black").style("stroke-width","2px")}}else ia.append("line").attr("x1",ze(c)).attr("x2",ze(ie)).classed("milestones-bar-background",!0).st({stroke:D.COLORS.GREY,strokeWidth:"16px"}),ia.append("line").attr("x1",ze(c)).attr("x2",ze(ie)).classed("milestones-bar",!0).st({stroke:D.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6}),(0,D.appendFppMark)(ia,ze(i));se&&(!Ne||se>s&&se<u)&&(0,D.appendMilestone)(ia,ze(se),D.COLORS.BLUE,"FPFT",null,!0,se<c?.3:1),le&&(!Ne||le>s&&le<u)&&(0,D.appendMilestone)(ia,ze(le),D.COLORS.YELLOW,"FSIV",null,!0,le<c?.3:1),oe&&(!Ne||oe>s&&oe<u)&&(0,D.appendMilestone)(ia,ze(oe),D.COLORS.PURPLE,"FPFV",null,!0,oe<c?.3:1),ue&&(!Ne||ue>s&&ue<u)&&(0,D.appendMilestone)(ia,ze(ue),D.COLORS.PURPLE,"LPFV",null,!0,ue<c?.3:1),$&&(!Ne||$>s&&$<u)&&(0,D.appendMilestone)(ia,ze($),D.COLORS.BLACK,null,null,!0).append("line").attr("y1",-26).attr("y2",0).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px");var oa=ia.append("g").classed("mark-g",!0).style("opacity",C?0:.9).attr("transform","translate("+(ze(c)-12)+","+-12+")");oa.append("defs").append("path").attr("id","a").attr("d","M12 7l5 5-5 5-5-5z"),oa.append("g").attr("fill","none").attr("fill-rule","evenodd").append("use").attr("fill",D.COLORS.BLACK).attr("xlink:href","#a"),oa.append("line").at({x1:12,x2:20,y1:4,y2:12}).style("stroke-linecap","square").style("stroke",D.COLORS.BLACK).style("stroke-width",2),oa.append("line").attr("x1",12).at({x1:12,x2:20,y1:20,y2:12}).style("stroke-linecap","square").style("stroke",D.COLORS.BLACK).style("stroke-width",2);var sa=ia.append("g").attr("transform","translate("+ze(ie)+")");!Ne||ie<u?(sa.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",D.COLORS.WHITE).attr("r",9),sa.append("circle").style("fill",function(){return q?ie<=q?D.COLORS.GREEN:D.COLORS.RED:D.COLORS.BLACK}).attr("r",6),sa.append("line").attr("y1",k?-194:-12).attr("y2",-Ve-194).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px")):(0,D.appendStartEndMark)(ia,ze(u))}var ua=void 0,da=void 0,ca=void 0;M&&(ua=Ye.append("g").at({id:"siv_max_hint_line"}).attr("transform","translate("+(-130-Be)+","+(qe(ge)-15)+")"),(0,D.appendLineToHint)(ua,!1,D.COLORS.YELLOW,"dashed"),da=Ye.append("g").at({id:"screening_max_hint_line"}).attr("transform","translate("+(Ue+Be+60)+","+(Ke(ye)-15)+")"),(0,D.appendLineToHint)(da,!0,D.COLORS.PURPLE,"dashed"),ca=Ye.append("g").at({id:"enrolment_max_hint_line"}).attr("transform","translate("+(Ue+Be+60)+","+(Ke(Se)-15)+")"),(0,D.appendLineToHint)(ca,!0,D.COLORS.BLUE,"dashed"));var fa=void 0,pa=void 0,ha=void 0,va=void 0,ma=void 0;I&&k&&(fa=Ye.append("g").at({id:"actual_siv_max_hint_line"}).attr("transform","translate("+(-130-Be)+","+(qe(be)-15)+")"),(0,D.appendLineToHint)(fa,!1,D.COLORS.YELLOW),pa=Ye.append("g").at({id:"actual_screening_max_hint_line"}).attr("transform","translate("+(Ue+Be+60)+","+(Ke(Ce)-15)+")"),(0,D.appendLineToHint)(pa,!0,D.COLORS.PURPLE),ha=Ye.append("g").at({id:"actual_enrolment_max_hint_line"}).attr("transform","translate("+(Ue+Be+60)+","+(Ke(Oe)-15)+")"),(0,D.appendLineToHint)(ha,!0,D.COLORS.BLUE),va=Ye.append("g").style("display","none").at({id:"actual_q75_max_hint_line"}).attr("transform","translate("+(Ue+Be+50)+","+(Ke(Te)-15)+")"),va.append("line").at({x1:-35,x2:-25,y1:15,y2:15,class:"hint-line"}).st({stroke:D.COLORS.BLUE,strokeWidth:"2px"}),ma=Ye.append("g").style("display","none").at({id:"actual_q25_max_hint_line"}).attr("transform","translate("+(Ue+Be+50)+","+(Ke(Re)-15)+")"),ma.append("line").at({x1:-35,x2:-25,y1:15,y2:15,class:"hint-line"}).st({stroke:D.COLORS.BLUE,strokeWidth:"2px"}));var _a=void 0,Ea=void 0,ga=void 0;T&&(_a=Ye.append("g").at({id:"adjusted_siv_max_hint_line"}).attr("transform","translate("+(-130-Be)+","+(qe(Ae)-15)+")"),(0,D.appendLineToHint)(_a,!1,D.COLORS.YELLOW,"bold"),Ea=Ye.append("g").at({id:"adjusted_screening_max_hint_line"}).attr("transform","translate("+(Ue+Be+60)+","+(Ke(Ie)-15)+")"),(0,D.appendLineToHint)(Ea,!0,D.COLORS.PURPLE,"bold"),ga=Ye.append("g").at({id:"adjusted_enrolment_max_hint_line"}).attr("transform","translate("+(Ue+Be+60)+","+(Ke(we)-15)+")"),(0,D.appendLineToHint)(ga,!0,D.COLORS.BLUE,"bold"));var ya=Ye.append("g").attr("transform","translate(250,"+(Ve+104)+")").style("will-change","transform").style("display","none");if((0,D.appendHoverMark)(ya,-12,D.COLORS.WHITE),ya.append("line").attr("y1",-10).attr("y2",-Ve-104).style("stroke","black").style("stroke-width","2px"),I&&(k||T||A)){var Sa=ya.append("g").attr("id","actual-hover-line");Sa.append("line").attr("y1",10).attr("y2",36).style("stroke","black").style("stroke-width","2px"),(0,D.appendHoverMark)(Sa,34,D.COLORS.WHITE)}T&&(ya.append("line").attr("y1",56).attr("y2",80).style("stroke","black").style("stroke-width","2px"),(0,D.appendHoverMark)(ya,80,D.COLORS.WHITE));var ba=[{groupName:"siv",groupX:10,groupY:20,lineClass:"siv",textGeneric:ge||"-",textActual:be,textAdjusted:Ae?Ae.toFixed(0):"-"},{groupName:"screening",groupX:60,groupY:20,lineClass:"screening",textGeneric:ye?ye.toFixed(0):"-",textActual:Ce,textAdjusted:Ie?Ie.toFixed(0):"-"},{groupName:"enrolment",groupX:110,groupY:20,lineClass:"enrolment",textGeneric:Se?Se.toFixed(0):"-",textActual:Oe,textAdjusted:we?we.toFixed(0):"-"}];(0,D.appendHoverTooltip)(ya,ba,I&&k,T);var Ca=ya.append("g").attr("transform","translate(0, -94)");Ca.append("polygon").attr("points","0,0, 15,0, 7.5,7.5").attr("transform","translate(-7.5,28)"),Ca.append("polygon").attr("points","0,0, 15,0, 7.5,-7.5").attr("transform","translate(-7.5)"),Ca.append("rect").attr("x",-32).attr("width",64).attr("height",28).attr("stroke",D.COLORS.BLACK).style("fill",D.COLORS.BLACK),Ca.append("text").attr("class","date").attr("transform","translate(0,20)").attr("text-anchor","middle").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).classed("milestone-label",!0).style("fill",D.COLORS.WHITE).text("");var Oa=ya.append("g").classed("hover-milestone-label",!0);Oa.style("display","none"),Oa.append("rect").attr("x",-30).attr("y",30).attr("width",60).attr("height",30).style("stroke-width",2),Oa.append("text").attr("transform","translate(0,30)").attr("dy",20).attr("text-anchor","middle").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).classed("milestone-label",!0).attr("fill",D.COLORS.WHITE).text("test");var Ta=[{groupX:Ue+Fe.right-90,groupY:Ve+104,groupFlag:"genericVisible",group:[{components:[ct,ht],groupFlag:"sivGroupVisible",seriesFlag:"genericVisible"},{components:[ft,vt,_t],groupFlag:"screeningGroupVisible",seriesFlag:"genericVisible"},{components:[pt,mt,Et],groupFlag:"enrolmentGroupVisible",seriesFlag:"genericVisible"}],seriesFlag:"genericVisible",backgroundFill:D.COLORS.BLACK,text:de?de.format("DD MMM YY"):"",label:"P/LPFT",title:x?"PrevAppr":"Approved",type:"dashed",context:a,addInteraction:M},{groupX:Ue+Fe.right-90,groupY:Ve+150,group:[{components:[it,st],groupFlag:"sivGroupVisible",seriesFlag:"actualsVisible"},{components:[lt,ut],groupFlag:"screeningGroupVisible",seriesFlag:"actualsVisible"},{components:[ot,dt],groupFlag:"enrolmentGroupVisible",seriesFlag:"actualsVisible"}],seriesFlag:"actualsVisible",backgroundFill:function(){return R?D.COLORS.DARK_GREY:!de||ce<de?D.COLORS.GREEN:D.COLORS.RED},text:ce?ce.format("DD MMM YY"):"",label:"F/LPFT",title:"Actuals",type:"generic",context:a,addInteraction:k},{groupX:Ue+Fe.right-90,groupY:Ve+194,group:[{components:[Ct,Rt],groupFlag:"sivGroupVisible",seriesFlag:"adjustedVisible"},{components:[Ot,At,wt],groupFlag:"screeningGroupVisible",seriesFlag:"adjustedVisible"},{components:[Tt,It,Nt],groupFlag:"enrolmentGroupVisible",seriesFlag:"adjustedVisible"}],seriesFlag:"adjustedVisible",textFill:de?D.COLORS.WHITE:D.COLORS.BLACK,backgroundFill:function(){return de?fe>de?D.COLORS.RED:D.COLORS.GREEN:D.COLORS.WHITE},text:fe?fe.format("DD MMM YY"):"",label:"A/LPFT",title:"Adjusted",type:"bold",context:a,addInteraction:O,tooltipPosition:"top"}];I&&(k||T||A)&&((0,D.appendMilestonesLegend)(Vt,Ta[0]),(0,D.appendMilestonesLegend)(Qt,Ta[1],w)),T&&(0,D.appendMilestonesLegend)(ia,Ta[2]),y.length>0&&Ye.append("rect").attr("class","overlay").attr("opacity","0").attr("x",-Be).attr("width",Ue+Be).attr("height",Ve+Fe.bottom).on("mouseout",function(){ya.style("display","none"),xt.style("display","none"),M&&(ua.attr("transform","translate("+(-130-Be)+","+(qe(ge)-15)+")"),da.attr("transform","translate("+(Ue+Be+60)+","+(Ke(ye)-15)+")"),ca.attr("transform","translate("+(Ue+Be+60)+","+(Ke(Se)-15)+")")),I&&k&&(fa.attr("transform","translate("+(-130-Be)+","+(qe(be)-15)+")"),pa.attr("transform","translate("+(Ue+Be+60)+","+(Ke(Ce)-15)+")"),ha.attr("transform","translate("+(Ue+Be+60)+","+(Ke(Oe)-15)+")"),va.attr("transform","translate("+(Ue+Be+50)+","+(Ke(Te)-15)+")"),ma.attr("transform","translate("+(Ue+Be+50)+","+(Ke(Re)-15)+")")),T&&(_a.attr("transform","translate("+(-130-Be)+","+(qe(Ae)-15)+")"),Ea.attr("transform","translate("+(Ue+Be+60)+","+(Ke(Ie)-15)+")"),ga.attr("transform","translate("+(Ue+Be+60)+","+(Ke(we)-15)+")")),(0,f.select)("#actual-date-tooltip").style("display",null)}).on("mousemove",t).on("mouseover",function(){(0,f.select)("#chart-menu").style("display","none"),a.toggleMenu(!1),(0,f.select)("#actual-date-tooltip").style("display","none"),a.showUncertainty&&(0,f.select)("#enrolment-chart__legend-toggle").style("display","none")}).on("mousedown",function(){if(!(Ne&&u.diff(s,"days")<=7)){De=!0;var e=(0,f.mouse)(this)[0];Pe=e<0?0:e>Ue?Ue:e;var t=(0,D.getHoverXPosition)(y,ze.invert(Pe),ze,i,qe,Ke);Bt.attr("x",ze(t.value)).attr("width",0)}}).on("mouseup",function(){if(De){De=!1;var e=(0,f.mouse)(this)[0];Le=e<0?0:e>Ue?Ue:e;var t=[Pe,Le].sort(function(e,t){return e<t?-1:e>t?1:0}).map(function(e){return(0,D.getHoverXPosition)(y,ze.invert(e),ze,i,qe,Ke).value});if(t[1].diff(t[0],"days")<=7)return void Bt.attr("x",0).attr("width",0);S(t)}}),Ne?(0,D.animateAppearanceZoomed)([ct,ft,pt],[],[],[ht,vt,mt,st,ut,dt,Rt,At,It,_t,Et,wt,Nt],[it,lt,ot],[Ct,Ot,Tt],0):(0,D.animateAppearance)([ct,ft,pt],[],[],[ht,vt,mt,st,ut,dt,Rt,At,It,_t,Et,wt,Nt],[it,lt,ot],[Ct,Ot,Tt],1e3);var Ra=["siv_actual_path","screening_actual_path","siv_actual_end","screening_actual_end","siv_generic_path","screening_generic_path","enrolment_generic_path","siv_generic_end","screening_generic_end","enrolment_generic_end","siv_adjusted_path","screening_adjusted_path","enrolment_adjusted_path","siv_adjusted_end","screening_adjusted_end","enrolment_adjusted_end","siv_max_hint_line","screening_max_hint_line","enrolment_max_hint_line","actual_siv_max_hint_line","actual_screening_max_hint_line","adjusted_siv_max_hint_line","adjusted_screening_max_hint_line","adjusted_enrolment_max_hint_line"],Aa=Ye.append("g").attr("transform","translate("+(-Be/2+28)+","+Be/2+")").attr("id","chart-menu").style("display",a.menuOpen?null:"none");Aa.append("rect").at({id:"chart-menu-background",width:168,height:function(){return k?a.showUncertainty?160:190:170},fill:D.COLORS.WHITE}).st({opacity:.9});var Ia=Aa.append("g").attr("id","all-curves_radio-button__wrapper").style("display",a.showUncertainty?null:"none").attr("transform","translate(21,136)");Ia.append("circle").attr("r",9).attr("fill",D.COLORS.WHITE).attr("stroke",D.COLORS.BLACK).attr("stroke-width",2),Ia.append("g").attr("id","all-curves_radio-button").style("display",a.showUncertainty?"none":null).append("circle").attr("r",5).style("fill",D.COLORS.BLACK),Ia.append("g").append("path").attr("fill",D.COLORS.BLUE).attr("fill-opacity",.2);var wa=Ia.append("g").attr("transform",function(){return"translate(23,4)"});if(wa.append("line").attr("x2",20).attr("y1",6).attr("y2",6).attr("class","line"),wa.append("text").classed("chart-legend__label",!0).text("All Curves"),Ia.on("click",function(){a.toggleUncertainty();var e=a.showUncertainty?"none":null;(0,f.select)("#all-curves_radio-button").style("display",e),a.toggleSeries("ADJUSTED",!0),a.toggleSeries("APPROVED",!0),a.toggleSeries("ACTUALS",!0),a.toggleCurveVisibility("SIV",!0),a.toggleCurveVisibility("Screening",!0),a.toggleCurveVisibility("Randomization",!0),(0,f.select)("#enrolment-chart__legend-toggle_uncertainty").translate([0,1]).style("display","none"),(0,f.select)("#enrolment-chart__legend-toggle").style("pointer-events","all").translate([0,1]),(0,f.select)("#enrolment-chart__legend-toggle_uncertainty").st({display:"none"}),(0,f.select)("#siv-group-checkbox_wrapper").style("display",null),(0,f.select)("#screening-group-checkbox_wrapper").style("display",null),(0,f.select)("#enrolment-group-checkbox_wrapper").style("display",null),(0,f.select)("#all-curves_radio-button__wrapper").style("display","none"),(0,f.select)("#uncertainty_radio-button").style("display","none"),(0,f.select)("#chart-menu-background").attr("height",190),(0,f.select)("#siv-group-checkbox").style("display",null),(0,f.select)("#screening-group-checkbox").style("display",null),(0,f.select)("#enrolment-group-checkbox").style("display",null),(0,f.select)("#legend_group_Approved").st({pointerEvents:"all",opacity:1}),(0,f.select)("#legend_group_PrevAppr").st({pointerEvents:"all",opacity:1}),(0,f.select)("#legend_group_Actuals").st({pointerEvents:"all",opacity:1}),(0,f.select)("#legend_group_Adjusted").st({pointerEvents:"all",opacity:1}),(0,f.select)("#enrolment_generic_path").style("display",null),(0,f.select)("#enrolment_generic_end").style("display",null),(0,f.select)("#enrolment_actual_path").style("display",null),(0,f.select)("#enrolment_actual_end").style("display",null),(0,f.select)("#enrolment_adjusted_path").style("display",null),(0,f.select)("#enrolment_adjusted_end").style("display",null),(0,f.select)("#actual_q75_max_hint_line").style("display","none"),(0,f.select)("#actual_q25_max_hint_line").style("display","none"),(0,f.select)("#uncertainty-tooltip-data").style("display","none"),(0,f.select)("#tooltip-background-rect").at({width:156,height:T?96:66}),(0,f.selectAll)(".regular-tooltip-data").style("display",null),(0,f.selectAll)(".uncertainty-range-milestones").style("display","none"),Ra.forEach(function(e){var t=!0;-1!==e.indexOf("siv")&&(t=a.sivGroupVisible),-1!==e.indexOf("screening")&&(t=a.screeningGroupVisible),-1!==e.indexOf("enrolment")&&(t=a.enrolmentGroupVisible),-1!==e.indexOf("generic")&&(t=t&&a.genericVisible),-1!==e.indexOf("adjusted")&&(t=t&&a.adjustedVisible),-1!==e.indexOf("actual")&&(t=t&&a.actualsVisible),(0,f.select)("#"+e).style("display",t?null:"none")}),(0,f.select)(".uncertainty-area").style("display","none")}),k&&!w){var Na=Aa.append("g").attr("id","uncertainty_radio-button__wrapper").translate([21,50]);Na.append("circle").attr("r",9).attr("fill",D.COLORS.WHITE).attr("stroke",D.COLORS.BLACK).attr("stroke-width",2),Na.append("g").attr("id","uncertainty_radio-button").style("display",a.showUncertainty?null:"none").append("circle").attr("r",5).style("fill",D.COLORS.BLACK);var Da=Na.append("g").attr("transform",function(){return"translate(23,4)"});Da.append("line").attr("x2",20).attr("y1",6).attr("y2",6).attr("class","line randomization"),Da.append("text").classed("chart-legend__label",!0).text("Uncertainty"),Na.on("click",function(){a.showUncertainty||a.toggleUncertainty();var e=a.showUncertainty?null:"none";a.toggleSeries("ADJUSTED",!1),a.toggleSeries("APPROVED",!1),a.toggleCurveVisibility("SIV",!1),a.toggleCurveVisibility("Screening",!1),(0,f.select)("#uncertainty_radio-button").style("display",e),(0,f.select)("#chart-menu-background").attr("height",160),(0,f.select)("#enrolment-chart__legend-toggle_uncertainty").style("display",null),(0,f.select)("#enrolment-chart__legend-toggle").style("pointer-events","none").translate([0,86]),(0,f.select)("#siv-group-checkbox_wrapper").style("display","none"),(0,f.select)("#screening-group-checkbox_wrapper").style("display","none"),(0,f.select)("#enrolment-group-checkbox_wrapper").style("display","none"),(0,f.select)("#all-curves_radio-button__wrapper").style("display",null),(0,f.select)("#all-curves_radio-button").style("display","none"),(0,f.select)("#enrolment-chart__all-curves-toggle").style("display",null),(0,f.select)("#enrolment_actual_path").style("display",null),(0,f.select)("#enrolment_actual_end").style("display",null),(0,f.select)("#legend_group_Approved").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#legend_group_PrevAppr").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#legend_group_Actuals").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#legend_group_Adjusted").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#actual_q75_max_hint_line").style("display",null),(0,f.select)("#actual_q25_max_hint_line").style("display",null),(0,f.select)("#uncertainty-tooltip-data").style("display",null),(0,f.select)("#tooltip-background-rect").at({width:60,height:96}),(0,f.selectAll)(".regular-tooltip-data").style("display","none"),(0,f.selectAll)(".uncertainty-range-milestones").style("display",e),Ra.forEach(function(e){(0,f.select)("#"+e).style("display","none")}),(0,f.select)(".uncertainty-area").style("display",null)})}var Pa=[{checkboxId:"siv-group-checkbox",groupX:10,groupY:k&&!w?76:56,groupFlag:"sivGroupVisible",groupName:"SIV",group:[{components:[ct,ht],groupFlag:"sivGroupVisible",seriesFlag:"genericVisible"},{components:[it,st],groupFlag:"sivGroupVisible",seriesFlag:"actualsVisible"},{components:[Ct,Rt],groupFlag:"sivGroupVisible",seriesFlag:"adjustedVisible"}]},{checkboxId:"screening-group-checkbox",groupX:10,groupY:k&&!w?116:96,groupFlag:"screeningGroupVisible",groupName:"Screening",group:[{components:[ft,vt,_t],groupFlag:"screeningGroupVisible",seriesFlag:"genericVisible"},{components:[lt,ut],groupFlag:"screeningGroupVisible",seriesFlag:"actualsVisible"},{components:[Ot,At,wt],groupFlag:"screeningGroupVisible",seriesFlag:"adjustedVisible"}]},{checkboxId:"enrolment-group-checkbox",groupX:10,groupY:k&&!w?156:136,groupFlag:"enrolmentGroupVisible",groupName:"Randomization",group:[{components:[pt,mt,Et],groupFlag:"enrolmentGroupVisible",seriesFlag:"genericVisible"},{components:[ot,dt],groupFlag:"enrolmentGroupVisible",seriesFlag:"actualsVisible"},{components:[Tt,It,Nt],groupFlag:"enrolmentGroupVisible",seriesFlag:"adjustedVisible"}]}];(0,D.drawChartMenu)(Aa,Pa,a),a.showUncertainty&&((0,f.select)("#siv-group-checkbox_wrapper").style("display","none"),(0,f.select)("#screening-group-checkbox_wrapper").style("display","none"),(0,f.select)("#enrolment-group-checkbox_wrapper").style("display","none"),Ra.forEach(function(e){(0,f.select)("#"+e).style("display","none")}),(0,f.select)("#legend_group_Approved").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#legend_group_PrevAppr").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#legend_group_Actuals").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#legend_group_Adjusted").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#actual_q75_max_hint_line").style("display",null),(0,f.select)("#actual_q25_max_hint_line").style("display",null),(0,f.select)("#uncertainty-tooltip-data").style("display",null),(0,f.select)("#tooltip-background-rect").at({width:60,height:96}),(0,f.selectAll)(".regular-tooltip-data").style("display","none")),(0,f.select)("#enrolment-chart__legend-toggle").on("click",function(){a.toggleMenu(),Aa.style("display",a.menuOpen?null:"none"),a.showUncertainty&&(0,f.select)("#enrolment-chart__legend-toggle").style("display",a.menuOpen?null:"none")}),(0,f.select)("#enrolment-chart__legend-toggle_uncertainty").on("click",function(){a.toggleMenu(),Aa.style("display",a.menuOpen?null:"none"),a.showUncertainty&&(0,f.select)("#enrolment-chart__legend-toggle").style("display",a.menuOpen?null:"none")});var La=(0,h.axisBottom)().scale(We).ticks(7),Ma=Ye.append("g").attr("transform","translate(0, -50)");Ma.append("line").attr("x2",Ue).classed("milestones-bar-background",!0).st({stroke:D.COLORS.GREY,strokeWidth:"12px"}),Ma.append("line").attr("x2",Ue).classed("milestones-bar",!0).st({stroke:D.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6}),Ma.append("rect").at({transform:"translate(-6,-6)",width:"12px",height:"12px",fill:D.COLORS.MID_GREY,stroke:D.COLORS.DARK_GREY,strokeWidth:2}),Ma.append("rect").at({transform:"translate("+(Ue-6)+",-6)",width:"12px",height:"12px",fill:D.COLORS.MID_GREY,stroke:D.COLORS.DARK_GREY,strokeWidth:2});var ka=Ma.append("g").attr("class","axis axis--x").translate([0,-15]).call(La);ka.selectAll("text").attr("class","tick").st({textTransform:"uppercase",fontSize:"10px",fontFamily:"VoltaModern, sans-serif",fill:D.COLORS.BLACK,shapeRendering:"crispEdges",stroke:"none"}).style("text-anchor","middle").text(function(e){return(0,E.default)(e).format(Ne?"DD MMM YY":"MMM YY")}).translate([0,34]),ka.selectAll("line").st({fill:"none",stroke:D.COLORS.BLACK,shapeRendering:"crispEdges",strokeWidth:"1px"}).at({class:"tick-line",y2:12}).translate([.5,26]),ka.selectAll("path").st({fill:"none",stroke:D.COLORS.BLACK,opacity:0,shapeRendering:"crispEdges"});var xa=Ma.append("g"),ja=xa.append("rect").at({class:"timeline-overlay",x:We(s),y:-6,width:""+(We(u)-We(s)),height:"12px",fill:D.COLORS.BLUE,opacity:.4}),Fa=null;(0,m.drag)().on("start",function(){var e=(0,f.select)(".timeline-overlay"),t=e.attr("x");Fa=f.event.x-t}).on("drag",function(){var e=(0,f.select)(".timeline-overlay"),t=(0,f.select)(".timeline-overlay__anchor"),a=(0,f.select)(".timeline-overlay__anchor-right"),n=f.event.x-Fa>=0?f.event.x-Fa:0,r=+e.attr("width");n+r<=Ue?(e.attr("x",n),t.attr("x",n),a.attr("x",n+r)):(e.attr("x",Ue-r),t.attr("x",Ue-r),a.attr("x",Ue))}).on("end",function(){var e=(0,f.select)(".timeline-overlay"),t=+e.attr("x"),a=+e.attr("width"),n=[t,t+a].map(function(e){return(0,D.getHoverXPosition)(y,We.invert(e),We,i,qe,Ke).value});n[1].diff(n[0],"days")<=7||S(n)})(ja);var Ua=xa.append("rect").at({class:"timeline-overlay__anchor",transform:"translate(-5, -5)",x:We(s),y:0,width:"10px",height:"10px",fill:D.COLORS.BLUE,stroke:D.COLORS.GREY,strokeWidth:4});(0,m.drag)().on("drag",function(){var e=(0,f.select)(".timeline-overlay"),t=+e.attr("x"),a=(0,f.select)(".timeline-overlay__anchor"),n=f.event.x>0?f.event.x:0,r=+e.attr("width");n<t+r&&(e.attr("x",n),a.attr("x",n),e.attr("width",t+r-n))}).on("end",function(){var e=(0,f.select)(".timeline-overlay"),t=+e.attr("x"),a=+e.attr("width"),n=[t,t+a].map(function(e){return(0,D.getHoverXPosition)(y,We.invert(e),We,i,qe,Ke).value});n[1].diff(n[0],"days")<=7||S(n)})(Ua);var Va=xa.append("rect").at({class:"timeline-overlay__anchor-right",transform:"translate(-5, -5)",x:We(u),y:0,width:"10px",height:"10px",fill:D.COLORS.BLUE,stroke:D.COLORS.GREY,strokeWidth:4});(0,m.drag)().on("drag",function(){var e=(0,f.select)(".timeline-overlay"),t=+e.attr("x"),a=(0,f.select)(".timeline-overlay__anchor-right"),n=f.event.x>0?f.event.x:0;n<Ue&&n>t&&(a.attr("x",n),e.attr("width",n-t))}).on("end",function(){var e=(0,f.select)(".timeline-overlay"),t=+e.attr("x"),a=+e.attr("width"),n=[t,t+a].map(function(e){return(0,D.getHoverXPosition)(y,We.invert(e),We,i,qe,Ke).value});n[1].diff(n[0],"days")<=7||S(n)})(Va)}},a.menuOpen=!1,a.showUncertainty=!1,a.sivGroupVisible=!0,a.screeningGroupVisible=!0,a.enrolmentGroupVisible=!0,a.genericVisible=!0,a.actualsVisible=!0,a.adjustedVisible=!0,a.debounced=(0,y.default)(a.renderChart,200),a}return l(t,e),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),requestAnimationFrame(this.renderChart)}},{key:"componentDidUpdate",value:function(){requestAnimationFrame(this.renderChart)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this,t=this.context,a=t.start,n=t.end,r=t.setStartEndDates,i=t.latestDate,l=t.startDate,o=l,s=(n||i).clone().subtract(7,"d"),d=(a||l).clone().add(7,"d"),c=i;return u.default.createElement("div",{ref:function(t){e.container=t},className:"svg-wrapper",id:"svg_wrapper_enrolment_chart"},u.default.createElement("div",{className:"enrolment-chart__timeline-control-wrapper"},u.default.createElement("div",null,u.default.createElement("span",null,"From: "),u.default.createElement("span",null,u.default.createElement(I.default,{minDate:o,maxDate:s,onChange:function(e){return r([e,n||c])},simpleView:!0,selected:a||l}))),u.default.createElement("div",null,u.default.createElement("span",null,"To: "),u.default.createElement("span",null,u.default.createElement(I.default,{minDate:d,maxDate:c,onChange:function(e){return r([a||o,e])},simpleView:!0,selected:n||i}))),u.default.createElement("div",null,u.default.createElement(N.default,{className:"reset-button",type:"transparent",disabled:!a&&!n,label:"Reset zoom",onClick:function(){return r([null,null])}}))),u.default.createElement("div",{id:"enrolment-chart__legend-toggle",style:{display:this.showUncertainty&&!this.menuOpen?"none":null}},O.Icons.CHART_MENU),u.default.createElement("div",{id:"enrolment-chart__legend-toggle_uncertainty",style:{display:"none"}},O.Icons.GRAPH_UNCERTAINTY))}}]),t}(u.default.Component);M.contextType=L.ChartDataContext,M.defaultProps={studyStatus:"PLANNED",cohortName:null,isOverallocated:!1,isImpact:!1,onToggleOverallocation:void 0},M.propTypes={onToggleOverallocation:c.default.func},t.default=(0,R.default)(M)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(23),h=a(29),v=a(116),m=a(85),_=a(130);a(315);var E=function(e){function t(e){i(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={data:e.data},a.renderChart=a.renderChart.bind(a),a}return o(t,e),s(t,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({data:e.data},function(){t.renderChart()})}},{key:"renderChart",value:function(){(0,p.select)("#svg_wrapper_historical-benchmark-chart").select(".svg-container").remove();var e=this.state.data,t=this.container,a={top:4,right:15,bottom:4,left:15},n=t.getBoundingClientRect().width-a.left-a.right,i=100-a.top-a.bottom,l=(0,p.select)("#svg_wrapper_historical-benchmark-chart"),o=l.append("div").classed("svg-container",!0).append("svg").attr("width",n+a.left+a.right).attr("height",i+a.top+a.bottom),s=o.append("g").attr("transform","translate("+a.left+","+a.top+")"),u=(0,v.scaleLinear)().rangeRound([0,n]),d=e.cellName,c="",f=e.value,E=e.satellites?e.satellites.filter(function(e){return null!==e&&e>=0}):[];if(0===E.length)return void s.append("text").translate([n/2,i/2]).attr("text-anchor","middle").classed("no-data-message",!0).text("Chart is not available");switch(d){case m.FIELDS.fpfv:case m.FIELDS.fsiv:case m.FIELDS["25_si"]:case m.FIELDS["50_si"]:case m.FIELDS["90_si"]:c="w";break;case m.FIELDS.sas:case m.FIELDS.screening_failure:c="%",f=null!==f?+(100*f).toFixed(0):null,E=E.map(function(e){return+(100*e).toFixed(0)});break;case m.FIELDS.randomisation_rate:E=E.map(function(e){return+e});break;default:c=""}var g=[].concat(r(E),[f]).sort(),y=(0,h.extent)(g);u.domain([y[0],y[1]]);var S=s.append("g").attr("transform","translate(0, "+i/1.7+")");S.append("line").attr("x2",n).style("stroke-width",8).classed("milestones-bar-background",!0),S.append("line").attr("x2",n).classed("milestones-bar",!0);var b=S.selectAll("satellite").data(E).enter().append("g").attr("transform",function(e){return"translate("+u(e)+")"});(0,_.appendHoverMark)(b,-12,_.COLORS.WHITE),y[0]!==y[1]&&S.selectAll("minMaxlegend").data(y).enter().append("g").attr("transform",function(e){return"translate("+u(e)+")"}).append("text").attr("y",34).attr("font-size",16).attr("text-anchor",function(e,t){return 0===t?"start":"end"}).attr("dx",function(e,t){return 0===t?-4:4}).style("fill",_.COLORS.DARK_GREY).text(function(e){return""+e+c});var C=d===m.FIELDS.randomisation_rate?+((y[0]+y[1])/2).toFixed(2):(y[0]+y[1])/2;if(C!==y[0]&&C!==y[1]){var O=S.append("g").attr("transform","translate("+u(C)+")");O.append("line").attr("y1",-10).attr("y2",10).style("stroke",_.COLORS.BLACK).attr("stroke-width",1),O.append("text").attr("y",34).attr("font-size",16).attr("text-anchor","middle").style("fill",_.COLORS.DARK_GREY).text(d===m.FIELDS.randomisation_rate?""+C+c:""+Math.round(C)+c)}if(null!==f){var T=(0,_.appendMilestone)(S,u(f),_.COLORS.BLACK,"",null,!0,1),R=T.append("g").classed("global-row-tooltip",!0).style("display",null).attr("transform",function(){return u(f)>=u(C)&&y[0]!==y[1]?"translate(-60, -40)":"translate(0, -40)"});R.append("polygon").style("fill",_.COLORS.BLACK).attr("points",function(){return u(f)>=u(C)&&y[0]!==y[1]?"0,0 50,0 60,35 0,20 0,0":"10,0 60,0 60,20 0,35 10,0"}),R.append("text").attr("text-anchor","middle").style("fill",_.COLORS.WHITE).style("font-size",14).classed("tooltip-text",!0).attr("transform","translate("+(u(f)>=u(C)?25:30)+", 17)").text(""+f+c)}}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{ref:function(t){e.container=t},className:"svg-wrapper",id:"svg_wrapper_historical-benchmark-chart"})}}]),t}(d.default.Component);E.defaultProps={data:{satellites:[16,37,12,15,17,21,34,9,47],suffix:"w",value:27}},E.propTypes={data:f.default.shape({satellites:f.default.array,cellName:f.default.string,value:f.default.number})},t.default=E},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(23),p=a(116),h=a(166),v=a(11),m=n(v),_=a(191),E=n(_),g=a(130),y=a(483),S=n(y),b=a(118);a(315);var C=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleResize=function(){a.debounced()},a.renderChart=function(){(0,f.select)("#svg_wrapper_enrolment_chart_minimized").select(".svg-container").remove();var e=a.context,t=e.scenario,n=e.startDate,r=e.latestDate,i=e.snapshotActualDate,l=e.maxValue,o=e.maxValuesArray,s=(e.monthsTickValues,e.start),u=e.end,d=e.isExactCopy,c=e.showAdjusted,v=e.isOverallocated,_=e.isImpact,E=e.isApproved,y=e.trackingCohortsView,S=e.hasOverallocation,b=e.showOverallocation,C=e.genericsAreValid,O=e.actualsAreValid,T=e.isPrevApproved,R=(e.showNoData,e.showWrongData,e.dataReady,e.filteredEnrolment),A=e.pLpft,I=e.tLpft,w=e.targetLpft,N=e.fsiv,D=e.fpfv,P=e.fpft,L=e.lpfv,M=e.actualDate,k=e.actualFlpft,x=e.actualFsiv,j=e.actualFpfv,F=e.actualFpft,U=e.actualLpfv,V=e.adjustedLpft,B=e.adjustedFsiv,H=e.adjustedFpfv,G=e.adjustedFpft,Y=e.adjustedLpfv,z=e.originalPlpft,W=e.originalFlpft,q=e.originalAdjustedLpft,K=s&&u,X=a.container;if(X){var Z=X.getBoundingClientRect().width,J=(Z-240)/11*2+48,Q={top:5,right:J,bottom:10,left:130},$=X.getBoundingClientRect().width-Q.left-Q.right,ee=200-Q.top-Q.bottom,te=c?130:110,ae=(0,f.select)("#svg_wrapper_enrolment_chart_minimized"),ne=ae.append("div").classed("svg-container",!0).append("svg").attr("width",$+Q.left+Q.right).attr("height",ee+Q.top+Q.bottom);ne.append("rect").at({x:-20,y:-20,width:$+Q.left+Q.right+40,height:ee+Q.top+Q.bottom+40,fill:g.COLORS.WHITE}),(0,g.injectPatternDefs)(ne,"actualPattern1");var re=ne.append("g").attr("transform","translate("+Q.left+","+Q.top+")"),ie=(0,p.scaleTime)().rangeRound([0,$]);if(0===o.filter(function(e){return e}).length)return void re.append("text").attr("transform","translate("+$/2+","+ee/2+")").attr("text-anchor","middle").classed("no-data-message",!0).text("There is not enough data to build a chart yet");if(l.isSameOrBefore(n))return(0,f.select)("#enrolment-chart__legend-toggle").style("display","none"),void re.append("text").translate([$/2,ee/2]).attr("text-anchor","middle").classed("no-data-message",!0).text("The approved scenario and graph cannot be loaded due to data inconsistencies");K?ie.domain([s,u]):ie.domain([n,l]),re.append("rect").attr("transform","translate(0,"+te+")").attr("width",$).attr("height",36).attr("class","chart-background").st({fill:g.COLORS.BLACK,opacity:.04}),re.append("rect").attr("transform","translate(0,"+te+")").attr("x",-30).attr("width",30).attr("height",36).attr("class","chart-background side").st({fill:g.COLORS.BLACK,opacity:.02}),re.append("rect").attr("transform","translate(0,"+te+")").attr("x",$).attr("width",30).attr("height",36).attr("class","chart-background side").st({fill:g.COLORS.BLACK,opacity:.02});var le=(0,h.axisBottom)().scale(ie);if(K){var oe=u.diff(s,"d");if(oe>7)le.ticks(7);else{var se=Array(oe).fill(0).map(function(e,t){return s.clone().add(t,"d")});se.push(u),le.tickValues(se).tickSizeOuter(0)}}else l.diff(n,"d")>7&&le.ticks(7);var ue=[{x:function(){return ie(n.isSameOrBefore(t.end_date)?A<I?A:I:A<I?A:n)},y:te,width:function(){return n.isSameOrBefore(I)?A<I?ie(I)-ie(A):ie(A)-ie(I):A<I?ie(I)-ie(A):ie(A)-ie(n)},height:36,fill:A<t.end_date?g.COLORS.GREEN:g.COLORS.RED,opacity:.2},{x:ie(k<=A?k:A),y:te,width:k<=A?ie(A)-ie(k):ie(k)-ie(A),height:36,fill:function(){return v?g.COLORS.GREY:k<=A?g.COLORS.GREEN:g.COLORS.RED},opacity:.2},{x:ie(V<=A?V:A),y:te,width:V<=A?ie(A)-ie(V):ie(V)-ie(A),height:36,fill:V<=A?g.COLORS.GREEN:g.COLORS.RED,opacity:.2}];!y&&C&&(E&&k&&A?(0,g.drawOverflowRect)(re,ue[1]):A&&t.end_date&&!_&&(0,g.drawOverflowRect)(re,ue[0])),c&&C&&(0,g.drawOverflowRect)(re,ue[2]),E&&M&&(0,g.drawOverflowRect)(re,{x:ie(n),y:te,width:ie(M),height:36,fill:"url(#actualPattern1)",opacity:.04});var de=re.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+(te-6)+")").call(le);de.selectAll("text").attr("class","tick").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).style("text-anchor","middle").text(function(e){return(0,m.default)(e).format("MMM YY")}).attr("transform","translate(0, 45)"),de.selectAll("line").attr("class","tick-line").st({fill:"none",stroke:g.COLORS.BLACK,shapeRendering:"crispEdges",strokeWidth:"1px"}).attr("y2","12").attr("transform","translate(0.5, 30)"),de.selectAll("path").st({fill:"none",stroke:g.COLORS.BLACK,opacity:0,shapeRendering:"crispEdges"});var ce=E&&(O||_)&&!T?{stroke:g.COLORS.GREEN,strokeWidth:"4px",opacity:.2}:{stroke:g.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6},fe=E&&(O||_)&&!T?{stroke:g.COLORS.LIGHT_GREEN,strokeWidth:"16px"}:{stroke:g.COLORS.GREY,strokeWidth:"16px"},pe=re.append("g").attr("transform","translate(0, "+(E&&(O||c||_)?20:80)+")");pe.append("line").attr("x2",E&&O&&A&&A>n?ie(A):$).classed("milestones-bar-background",!E||!O||T).classed("milestones-bar-background-approved",E&&(O||_)&&!T).st(fe),pe.append("line").attr("x2",E&&O&&A&&A>n?ie(A):$).classed("milestones-bar",!E||!O||T).classed("milestones-bar-approved",E&&(O||_)&&!T).st(ce),E&&M&&pe.append("rect").attr("x",ie(n.isBefore(s)?s:n)).attr("width",(0,g.getWidth)(ie,M,u)).attr("y",-8).attr("height",16).style("fill","url(#actualPattern1)").attr("opacity",.04),K&&((0,g.appendStartEndMark)(pe,ie(s)).append("line").at({y1:10,y2:66}).st({stroke:g.COLORS.BLACK,strokeWidth:"2px",strokeDasharray:"2 2"}),(0,g.appendStartEndMark)(pe,ie(u)).append("line").at({y1:10,y2:66}).st({stroke:g.COLORS.BLACK,strokeWidth:"2px",strokeDasharray:"2 2"}));var he=void 0;K||(he=(0,g.appendFppMark)(pe,ie(n)),he.append("line").attr("y1",10).attr("y2",66).style("stroke","black").style("stroke-width","2px"),E&&O||c||_||((0,g.appendLabelToMilestone)(he,"FP",g.COLORS.BLACK,g.COLORS.WHITE,g.COLORS.BLACK,-105),(0,g.appendLineToLabel)(he,g.COLORS.BLACK,!1)));var ve=void 0,me=void 0,_e=void 0,Ee=void 0;N&&N.isSameOrBefore(r)&&N.isSameOrAfter(n)&&(!K||N>s&&N<u)&&(me=(0,g.appendMilestone)(pe,ie(N),g.COLORS.YELLOW,"FSIV",-105)),D&&D.isSameOrBefore(r)&&D.isSameOrAfter(n)&&(!K||D>s&&D<u)&&(_e=(0,g.appendMilestone)(pe,ie(D),g.COLORS.PURPLE,"FPFV",-105)),P&&P.isSameOrBefore(r)&&P.isSameOrAfter(n)&&(!K||P>s&&P<u)&&(ve=(0,g.appendMilestone)(pe,ie(P),g.COLORS.BLUE,"FPFT",-105)),L&&L.isSameOrBefore(r)&&L.isSameOrAfter(n)&&(!K||L>s&&L<u)&&(Ee=(0,g.appendMilestone)(pe,ie(L),g.COLORS.PURPLE,"LPFV",-105)),E&&O||!C||c||((0,g.appendLineToLabel)(ve,g.COLORS.BLUE,!0),(0,g.appendLineToLabel)(me,g.COLORS.YELLOW,!0),(0,g.appendLineToLabel)(_e,g.COLORS.PURPLE,!0),(0,g.appendLineToLabel)(Ee,g.COLORS.PURPLE,!0));var ge=void 0;!w||c||_||!w.isAfter(n)||I===s||I===u||y||(ge=pe.append("g").attr("transform","translate("+ie(w)+")"),E&&O||(ge.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",g.COLORS.WHITE).attr("r",9),ge.append("circle").style("fill",g.COLORS.BLACK).attr("r",6),ge.append("line").attr("y1",10).attr("y2",66).style("stroke","black").style("stroke-dasharray","6 3").style("stroke-width","1px"),(0,g.appendLabelToMilestone)(ge,"T/LPFT",g.COLORS.BLACK,g.COLORS.BLACK,g.COLORS.WHITE,-105),(0,g.appendLineToLabel)(ge,g.COLORS.BLACK,!1)));var ye=void 0;if(A&&A!==s&&A!==u&&(ye=pe.append("g").attr("transform","translate("+ie(A)+")"),ye.append("line").attr("y1",10).attr("y2",E&&(O||c||_)?126:66).style("stroke","black").style("stroke-width","2px"),ye.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",g.COLORS.WHITE).attr("r",9),ye.append("circle").style("fill",function(){return E&&(O||c||_)?g.COLORS.BLACK:A<=t.end_date?g.COLORS.GREEN:g.COLORS.RED}).attr("r",6),E&&(O||c||_)||((0,g.appendLabelToMilestone)(ye,"P/LPFT",g.COLORS.BLACK,g.COLORS.WHITE,g.COLORS.BLACK,-105),(0,g.appendLineToLabel)(ye,g.COLORS.BLACK,!1))),S&&b&&!a.props.hideAdjusted){var Se=R[R.length-1];if(Se&&Se.date){var be=pe.append("g").attr("transform","translate("+ie(Se.date)+")");be.append("line").attr("y1",E&&(O||c||_)?46:-10).attr("y2",66).style("stroke",g.COLORS.DARK_GREY).style("stroke-width","2px"),be.append("circle").style("stroke",g.COLORS.DARK_GREY).style("stroke-width","2px").style("fill",g.COLORS.WHITE).attr("r",9),be.append("circle").style("fill",g.COLORS.DARK_GREY).attr("r",6)}}var Ce=void 0,Oe=void 0,Te=void 0,Re=void 0,Ae=re.append("g").attr("transform","translate(0, 60)");if(E&&(O||c||_)){if((y||k)&&M&&A){Ae.append("line").attr("x1",ie(n.isBefore(s)?s:n)).attr("x2",ie(k>A||!y?k:A)).st({stroke:g.COLORS.MID_GREY,strokeWidth:"4px",strokeDasharray:"4 4",opacity:.6}).classed("actual-milestones-bar",!0);var Ie=Ae.append("g").attr("transform","translate("+ie(n.isBefore(s)?s:n)+")");Ie.append("rect").attr("width",(0,g.getWidth)(ie,M,u)).attr("y",-2).attr("height",4).style("fill",g.COLORS.GREY),Ie.append("rect").attr("width",(0,g.getWidth)(ie,M,u)).attr("y",-2).attr("height",4).style("fill","url(#actualPattern1)").attr("opacity",.04)}else Ae.append("line").attr("x2",V?ie(V):$).classed("actual-milestones-bar",!0).st({stroke:g.COLORS.MID_GREY,strokeWidth:"4px",strokeDasharray:"4 4",opacity:.6});if(K?(0,g.appendStartEndMark)(Ae,ie(s)):(0,g.appendFppMark)(Ae,ie(n.isBefore(s)?s:n)).append("line").attr("y1",10).attr("y2",c?76:86).style("stroke","black").style("stroke-width","2px"),y||k&&A&&(Ae.append("line").attr("x1",function(){return k<=A?ie(k):A>n?ie(A):10}).attr("x2",function(){return ie(k<=A?A:k)}).style("stroke",function(){return v?g.COLORS.DARK_GREY:k<=A?g.COLORS.GREEN:g.COLORS.RED}).style("stroke-width","4px"),Ae.append("text").classed("active-range-label",!0).st({fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("text-anchor",function(){return k<=A?"end":"start"}).text((W>z?"+":"")+W.diff(z,"days")+"d").attr("transform",function(){return k<=A?"translate("+(ie(A)-20)+", -14)":"translate("+(ie(A)+20)+", -14)"}).style("fill",function(){return v?g.COLORS.BLACK:W<=z?g.COLORS.GREEN:g.COLORS.RED})),F&&(!K||F>s&&F<u)&&(_||M>=F)&&F>n&&(Te=(0,g.appendMilestone)(Ae,ie(F),g.COLORS.BLUE,"FPFT",null,E&&(O||_))),x&&(!K||x>s&&x<u)&&(_||M>=x)&&x>n&&(Ce=(0,g.appendMilestone)(Ae,ie(x),g.COLORS.YELLOW,"FSIV",null,E&&(O||_))),j&&(!K||j>s&&j<u)&&(_||M>=j)&&j>n&&(Oe=(0,g.appendMilestone)(Ae,ie(j),g.COLORS.PURPLE,"FPFV",null,E&&(O||_))),U&&(!K||U>s&&U<u)&&(_||M>=U)&&U>n&&(Re=(0,g.appendMilestone)(Ae,ie(U),g.COLORS.PURPLE,"LPFV",null,E&&(O||_))),M&&(!K||M>s&&M<u)){var we=Ae.append("g").attr("transform","translate("+ie(M)+")");we.append("line").attr("y1",-48).attr("y2",c?-10:67).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px");var Ne=we.append("g"),De=Ne.append("g").attr("transform","translate(0, "+(c?76:46)+")");De.append("polygon").attr("points","0,0, 15,0, 7.5,7.5").attr("transform","translate(-7.5,30)"),De.append("polygon").attr("points","0,0, 15,0, 7.5,-7.5").attr("transform","translate(-7.5)"),De.append("rect").attr("x",-32).attr("width",64).attr("height",30).style("fill",g.COLORS.BLACK),De.append("text").attr("class","date").attr("transform","translate(0,20)").attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).style("fill",g.COLORS.WHITE).text(M?M.format("DD MMM"):""),(0,g.appendMilestone)(we,0,g.COLORS.BLACK,null,null,E&&(O||c||_))}if(!y&&k){var Pe=Ae.append("g").attr("transform","translate("+ie(k)+")");!K||k<u?(Pe.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",g.COLORS.WHITE).attr("r",9),Pe.append("circle").style("fill",function(){return v?g.COLORS.BLACK:!A||k<=A?g.COLORS.GREEN:g.COLORS.RED}).attr("r",6),Pe.append("line").attr("y1",12).attr("y2",c?36:86).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px")):(0,g.appendStartEndMark)(Ae,ie(u))}}var Le=void 0,Me=void 0,ke=void 0,xe=void 0,je=re.append("g").attr("transform","translate(0, 100)");if(c){A?(je.append("line").attr("x1",ie(i.isBefore(s)?s:i)).attr("x2",ie(V<A?V:A)).st({stroke:g.COLORS.GREY,strokeWidth:"16px"}).classed("milestones-bar-background",!0),je.append("line").attr("x1",ie(i.isBefore(s)?s:i)).attr("x2",ie(V<A?V:A)).st({stroke:g.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6}).classed("milestones-bar",!0),K?(0,g.appendStartEndMark)(je,ie(s)):(0,g.appendFppMark)(je,ie(i.isBefore(s)?s:i)).append("line").at({y1:10,y2:66}).st({opacity:d?0:1,stroke:g.COLORS.BLACK,strokeWidth:2}),je.append("line").attr("x1",ie(V<=A?V:A)).attr("x2",ie(V<=A?A:V)).style("stroke",V<=A?g.COLORS.GREEN:g.COLORS.RED).style("stroke-width","4px"),je.append("text").classed("active-range-label",!0).st({fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("text-anchor",V<=A?"end":"start").text((q>z?"+":"")+q.diff(z,"days")+"d").attr("transform",V<=A?"translate("+(ie(A)-20)+", -14)":"translate("+(ie(A)+20)+", -14)").style("fill",q<=z?g.COLORS.GREEN:g.COLORS.RED),(!K||A>s&&A<u)&&je.append("g").attr("transform","translate("+ie(A)+")").append("line").attr("y1",-8).attr("y2",66).style("stroke","black").style("stroke-width","2px")):(je.append("line").attr("x1",ie(i)).attr("x2",ie(V)).st({stroke:g.COLORS.GREY,strokeWidth:"16px"}).classed("milestones-bar-background",!0),je.append("line").attr("x1",ie(i)).attr("x2",ie(V)).st({stroke:g.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6}).classed("milestones-bar",!0)),G&&(!K||G>s&&G<u)&&(xe=(0,g.appendMilestone)(je,ie(G),g.COLORS.BLUE,"FPFT",null,!0,G<i?.3:1)),B&&(!K||B>s&&B<u)&&(Le=(0,g.appendMilestone)(je,ie(B),g.COLORS.YELLOW,"FSIV",null,!0,B<i?.3:1)),H&&(!K||H>s&&H<u)&&(Me=(0,g.appendMilestone)(je,ie(H),g.COLORS.PURPLE,"FPFV",null,!0,H<i?.3:1)),Y&&(!K||Y>s&&Y<u)&&(ke=(0,g.appendMilestone)(je,ie(Y),g.COLORS.PURPLE,"LPFV",null,!0,Y<i?.3:1)),M&&(!K||M>s&&M<u)&&(0,g.appendMilestone)(je,ie(M),g.COLORS.BLACK,null,null,!0).append("line").attr("y1",-16).attr("y2",46).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px");var Fe=je.append("g").classed("mark-g",!0).style("opacity",d?0:.9).attr("transform","translate("+(ie(i)-12)+","+-12+")");Fe.append("defs").append("path").attr("id","a").attr("d","M12 7l5 5-5 5-5-5z"),Fe.append("g").attr("fill","none").attr("fill-rule","evenodd").append("use").attr("fill",g.COLORS.BLACK).attr("xlink:href","#a"),Fe.append("line").attr("x1",12).attr("x2",20).attr("y1",4).attr("y2",12).style("stroke-linecap","square").style("stroke",g.COLORS.BLACK).style("stroke-width",2),Fe.append("line").attr("x1",12).attr("x2",20).attr("y1",20).attr("y2",12).style("stroke-linecap","square").style("stroke",g.COLORS.BLACK).style("stroke-width",2);var Ue=je.append("g").attr("transform","translate("+ie(V)+")");!K||V<u?(Ue.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",g.COLORS.WHITE).attr("r",9),Ue.append("circle").style("fill",function(){return A?V<=A?g.COLORS.GREEN:g.COLORS.RED:g.COLORS.BLACK}).attr("r",6),Ue.append("line").attr("y1",12).attr("y2",66).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px"),C||Ue.append("line").attr("y1",-12).attr("y2",-86).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px")):(0,g.appendStartEndMark)(je,ie(u)),!y&&O&&je.append("g").attr("transform","translate("+ie(k)+")").append("line").attr("y1",-4).attr("y2",66).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px")}var Ve=[{groupX:$+Q.right-90,groupY:0,backgroundFill:g.COLORS.BLACK,text:z?z.format("DD MMM YY"):"",label:"P/LPFT",title:T?"PrevAppr":"Approved"},{groupX:$+Q.right-90,groupY:0,backgroundFill:function(){return v?g.COLORS.DARK_GREY:!z||W<z?g.COLORS.GREEN:g.COLORS.RED},text:W?W.format("DD MMM YY"):"",label:"F/LPFT",title:"Actuals"},{groupX:$+Q.right-90,groupY:0,textFill:z?g.COLORS.WHITE:g.COLORS.BLACK,backgroundFill:function(){return z?q>z?g.COLORS.RED:g.COLORS.GREEN:g.COLORS.WHITE},text:q?q.format("DD MMM YY"):"",label:"A/LPFT",title:"Adjusted"}];if(E&&(O||c||_)&&((0,g.appendMilestonesLegend)(pe,Ve[0]),(0,g.appendMilestonesLegend)(Ae,Ve[1],y)),c&&(0,g.appendMilestonesLegend)(je,Ve[2]),E&&(O||c||_)){var Be={fsiv:{icon:me,color:g.COLORS.YELLOW,offset:54},fpfv:{icon:_e,color:g.COLORS.PURPLE,offset:54},fpft:{icon:ve,color:g.COLORS.BLUE,offset:54},lpfv:{icon:Ee,color:g.COLORS.PURPLE,offset:54},actual_fsiv:{icon:Ce,color:g.COLORS.YELLOW,offset:94},actual_fpfv:{icon:Oe,color:g.COLORS.PURPLE,offset:94},actual_fpft:{icon:Te,color:g.COLORS.BLUE,offset:94},actual_lpfv:{icon:Re,color:g.COLORS.PURPLE,offset:94},adjusted_fsiv:{icon:Le,color:g.COLORS.YELLOW,offset:134},adjusted_fpfv:{icon:Me,color:g.COLORS.PURPLE,offset:134},adjusted_fpft:{icon:xe,color:g.COLORS.BLUE,offset:134},adjusted_lpfv:{icon:ke,color:g.COLORS.PURPLE,offset:134}};Object.keys(Be).forEach(function(e){Be[e]&&Be[e].icon&&(Be[e].icon.on("mouseover",function(){var t=(0,f.select)(this).attr("transform"),a=e.substr(e.indexOf("_")+1,e.length),n=a.length>4?11:13,r=re.append("g").at({id:e+"-milestone-tooltip"}).attr("transform",t),i=r.append("g").translate([-a.length*n/2,Be[e].offset]);i.append("rect").attr("width",a.length*n).attr("height",30).style("fill",Be[e].color).style("stroke",Be[e].color).style("stroke-width",1),i.append("text").translate([a.length*n/2,20]).attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("fill",g.COLORS.WHITE).text(a)}),Be[e].icon.on("mouseout",function(){(0,g.removeMilestoneTooltip)(re,e)}))})}}},a.debounced=(0,E.default)(a.renderChart,200),a}return l(t,e),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),requestAnimationFrame(this.renderChart)}},{key:"componentDidUpdate",value:function(){requestAnimationFrame(this.renderChart)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{ref:function(t){e.container=t},className:"svg-wrapper",id:"svg_wrapper_enrolment_chart_minimized"})}}]),t}(u.default.Component);C.contextType=b.ChartDataContext,C.defaultProps={studyStatus:"PLANNED",hideAdjusted:!1,isOverallocated:!1,cohortName:null,isImpact:!1,fromPrevApproved:!1,showOverallocation:!1},C.propTypes={hideAdjusted:c.default.bool},t.default=(0,S.default)(C)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(32),c=n(d),f=a(1),p=n(f),h=a(2),v=n(h),m=a(6),_=a(14),E=n(_),g=a(134),y=n(g),S=a(202);a(2143);var b=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isLoading:!1},a.saveAsImage=a.saveAsImage.bind(a),a}return l(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e,t){return t.isLoading||t.isLoading!==this.state.isLoading}},{key:"saveAsImage",value:function(){var e=this,t=this.props,a=t.study,n=t.scenario,r=t.filter;this.setState({isLoading:!0},function(){setTimeout(function(){(0,S.saveAsImage)(a,n,r,e.setState.bind(e,{isLoading:!1}))},2e3)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.isDisabled,n=t.className;return u.default.createElement("div",{className:(0,v.default)("chart-screenshot-icon__wrapper",n)},this.state.isLoading&&c.default.createPortal(u.default.createElement(y.default,null),document.body),u.default.createElement(E.default,{mouseEnterDelay:.7,overlay:a?u.default.createElement("div",null,"Save chart as image. ",u.default.createElement("br",null),"Not available for collapsed chart"):"Save chart as image"},u.default.createElement("div",{className:(0,v.default)("fpo-sidebar__content",{disabled:a}),onClick:function(){a||e.saveAsImage()}},m.Icons.DOWNLOAD)))}}]),t}(u.default.Component);b.defaultProps={isDisabled:!1,filter:"",notCollapsibleChart:!1,className:""},b.propTypes={isDisabled:p.default.bool,study:p.default.object.isRequired,scenario:p.default.object.isRequired,filter:p.default.string,className:p.default.string},t.default=b},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var s,u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),f=a(1),p=n(f),h=a(65),v=n(h),m=a(2),_=n(m),E=a(6),g=a(14),y=n(g),S=a(167),b=a(470),C=n(b),O=a(471),T=n(O),R=a(472),A=n(R),I=a(46),w=a(77),N=a(55);a(307);var D=a(10),P=(s={},o(s,I.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE,A.default),o(s,I.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS,T.default),o(s,I.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE,C.default),o(s,I.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE,C.default),s),L=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showMenu:!1},a.toggleMenu=a.toggleMenu.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a}return l(t,e),u(t,[{key:"toggleMenu",value:function(e){this.setState({showMenu:void 0!==e?e:!this.state.showMenu})}},{key:"handleClickOutside",value:function(e){this.state.showMenu&&e&&!e.target.getAttribute("data-ignore-click-outside")&&this.toggleMenu(!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.event,n=t.onDuplicate,r=t.onRemove,i=t.onUpdate,l=t.locations,o=t.scenario,s=t.metadata,u=this.state.showMenu;if(!a||!l||0===l.length||!o)return null;var d=s.isTracking,f=s.isAdjusted,p=(0,w.getEventType)(a.event_type),h=!s.isEditable||a.disabled,v=a.disabled||!1,m=(0,_.default)("event-details-component__container",{disabled:h}),g=(0,_.default)("event-details-component__icon","type-"+p),b=(0,_.default)("event-details-component__wrapper",{hovered:u}),C=(0,_.default)("event-details-component__actions",{disabled:!s.isEditable}),O=(0,w.getEventIcon)(a.status,d),T=d&&f&&a.status!==I.EVENT_STATUS.PENDING?{start_date:null,end_date:null}:{},R=P[a.event_type];return c.default.createElement("div",{className:m},c.default.createElement("div",{className:b},c.default.createElement("div",{className:g},O),c.default.createElement(R,{event:a,locations:l,onUpdate:i,scenario:o,isTracking:d,isAdjusted:f,isDisabled:h}),o.status!==D.SCENARIO_STATUS.APPROVED&&o.status!==D.SCENARIO_STATUS.PREV_APPROVED&&c.default.createElement("div",{className:C},c.default.createElement(y.default,{mouseEnterDelay:.3,align:{offset:[0,0]},overlay:c.default.createElement("span",null,"Actions")},c.default.createElement(y.default,{destroyTooltipOnHide:!0,align:{offset:[12,0]},placement:"bottomRight",visible:this.state.showMenu,trigger:["click"],overlay:c.default.createElement(S.ContextMenu,null,!h&&c.default.createElement(S.ContextMenuItem,{label:"Duplicate","data-ignore-click-outside":!0,icon:c.default.createElement("div",{className:"icon-color-white"},E.Icons.EVENT_DUPLICATE),onClick:function(){n(a.id,T),e.toggleMenu(!1)}}),(!d||d&&a.status!==I.EVENT_STATUS.COMPLETED&&a.status!==I.EVENT_STATUS.ACTIVE)&&c.default.createElement(S.ContextMenuItem,{label:v?"Enable":"Disable","data-ignore-click-outside":!0,icon:c.default.createElement("div",{className:"icon-color-white"},E.Icons.EVENT),onClick:function(){e.props.onDisable(a.id,!v),e.toggleMenu(!1)}}),!d||d&&f&&a.status===I.EVENT_STATUS.PENDING?c.default.createElement(S.ContextMenuItem,{label:"Remove","data-ignore-click-outside":!0,icon:c.default.createElement("div",{className:"icon-color-white"},E.Icons.CROSS_O),onClick:function(){return r(a.id)}}):null)},c.default.createElement("div",{className:"row-control-icon--more",onClick:function(){return e.toggleMenu()}},E.Icons.MORE_HORIZ))))))}}]),t}(c.default.Component);L.defaultProps={locations:[],scenario:null,metadata:new N.AccessList},L.propTypes={event:p.default.object.isRequired,onDuplicate:p.default.func.isRequired,onRemove:p.default.func.isRequired,onUpdate:p.default.func.isRequired,onDisable:p.default.func.isRequired,locations:p.default.array,scenario:p.default.object,metadata:p.default.object.isRequired},t.default=(0,v.default)(L)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(17),u=a(824),d=n(u),c=function(e){return i.default.createElement(s.Row,{key:e.event.type+"_"+e.event.id},i.default.createElement(s.Col,{width:10,offset:1},i.default.createElement(d.default,e)))};c.propTypes={event:o.default.object.isRequired},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventDetailsComponentTypeC=t.EventDetailsComponentTypeB=t.EventDetailsComponentTypeA=void 0;var r=a(470),i=n(r),l=a(471),o=n(l),s=a(472),u=n(s),d=a(822),c=n(d);t.EventDetailsComponentTypeA=i.default,t.EventDetailsComponentTypeB=o.default,t.EventDetailsComponentTypeC=u.default,t.default=c.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(6),c=a(82),f=n(c),p=a(8);a(730);var h=function(e){var t=e.name,a=e.type,n=e.startDate,r=e.endDate,l=e.ratio,o=e.iconStatus,s=e.iconTypeTracking,c=e.operation,h=e.isEventDisabled;return i.default.createElement("div",{className:"event-widget-by-date"},i.default.createElement("div",{className:"__title"},i.default.createElement("span",{className:(0,u.default)("__icon","event-type__"+a)},s?d.Icons["STAR_"+o]:d.Icons.EVENT),t," ",h?" - disabled":""),i.default.createElement("div",{className:"__details"},i.default.createElement("div",null,i.default.createElement("div",null,"Start date"),i.default.createElement("div",null,(0,p.formatDate)((0,p.getMomentDate)(n)))),i.default.createElement(f.default,{size:"large"}),i.default.createElement("div",null,i.default.createElement("div",null,"End date"),i.default.createElement("div",null,(0,p.formatDate)((0,p.getMomentDate)(r)))),l?i.default.createElement(f.default,{size:"large"}):null,l?i.default.createElement("div",null,i.default.createElement("div",null,c),i.default.createElement("div",null,l,"%")):null))};h.propTypes={name:o.default.string,type:o.default.number,startDate:o.default.oneOfType([o.default.string,o.default.object]).isRequired,endDate:o.default.string.isRequired,ratio:o.default.number,iconTypeTracking:o.default.bool,iconStatus:o.default.string,operation:o.default.string,isEventDisabled:o.default.bool},h.defaultProps={name:"",type:1,ratio:0,iconTypeTracking:!1,iconStatus:null,operation:"Increase by",isEventDisabled:!1},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(6),c=a(82),f=n(c);a(730);var p=function(e){var t=e.name,a=e.type,n=e.patients,r=e.startAfter,l=e.duration,o=e.iconStatus,s=e.iconTypeTracking,c=e.isEventDisabled;return i.default.createElement("div",{className:"event-widget-by-patients"},i.default.createElement("div",{className:"__title"},i.default.createElement("span",{className:(0,u.default)("__icon","event-type__"+a)},s?d.Icons["STAR_"+o]:d.Icons.EVENT),t," ",c?" - disabled":""),i.default.createElement("div",{className:"__details"},i.default.createElement("div",null,i.default.createElement("div",null,"Patients"),i.default.createElement("div",null,n)),i.default.createElement(f.default,{size:"large"}),i.default.createElement("div",null,i.default.createElement("div",null,"Start after"),i.default.createElement("div",null,r,"w")),i.default.createElement(f.default,{size:"large"}),i.default.createElement("div",null,i.default.createElement("div",null,"Duration"),i.default.createElement("div",null,l,"w"))))};p.propTypes={name:o.default.string,type:o.default.number,patients:o.default.number,startAfter:o.default.number,duration:o.default.number,iconTypeTracking:o.default.bool,iconStatus:o.default.string,isEventDisabled:o.default.bool},p.defaultProps={name:"",type:1,patients:0,startAfter:0,duration:0,iconTypeTracking:!1,iconStatus:null,isEventDisabled:!1},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventWidgetByPatients=t.EventWidgetByDate=void 0;var r=a(825),i=n(r),l=a(826),o=n(l);t.EventWidgetByDate=i.default,t.EventWidgetByPatients=o.default,t.default=i.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),h=a(6),v=a(14),m=n(v),_=a(46);a(2145);var E=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={tooltip:!1},a.setTooltip=a.setTooltip.bind(a),a.EventTypes=[_.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE,_.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS,_.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE,_.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE],a}return l(t,e),o(t,[{key:"setTooltip",value:function(e){this.setState({tooltip:e})}},{key:"getTypeNumber",value:function(e){return this.EventTypes.indexOf(e)+1}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.isTracking,n=e.counters,r=e.onAdd,i=e.actionable,l=function(){return t===_.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE?u.default.createElement("span",null,"Screening and randomization pause by ",u.default.createElement("b",null,"date")):t===_.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS?u.default.createElement("span",null,"Screening and randomization pause by ",u.default.createElement("b",null,"num. of patients randomized")):t===_.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE?u.default.createElement("span",null,"Screening rate changed by ",u.default.createElement("b",null,"date")):t===_.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE?u.default.createElement("span",null,"Screening failure rate changed by ",u.default.createElement("b",null,"date")):u.default.createElement("span",null)},o=(0,p.default)("event","event-"+this.getTypeNumber(t),{tracking:a});return u.default.createElement("div",{className:o},i&&!this.props.isOptimizing?u.default.createElement(m.default,{overlayClassName:"event__add-new-event-tooltip",align:{offset:[24,84]},onVisibleChange:this.setTooltip,overlay:u.default.createElement("div",null,h.Icons.CROSS_O,u.default.createElement("span",{className:"action-name",onClick:r},"Add event"))},u.default.createElement("div",{className:(0,p.default)("event-type-description",{hovered:this.state.tooltip})},l())):u.default.createElement("div",{className:"event-type-description"},l()),u.default.createElement("div",{className:"event-statistics"},0!==n.inProgress&&u.default.createElement("div",null,h.Icons.STAR_IN_PROGRESS,u.default.createElement("span",null,n.inProgress)),0!==n.pending&&u.default.createElement("div",null,h.Icons.STAR_PENDING,u.default.createElement("span",null,n.pending)),0!==n.completed&&u.default.createElement("div",null,h.Icons.STAR_COMPLETED,u.default.createElement("span",null,n.completed)),u.default.createElement("div",{className:"counter"},h.Icons.EVENT,u.default.createElement("span",null,n.total))))}}]),t}(s.Component);E.defaultProps={isTracking:!1,actionable:!0,isOptimizing:!1},E.propTypes={type:c.default.string.isRequired,isTracking:c.default.bool,counters:c.default.shape({inProgress:c.default.number,pending:c.default.number,completed:c.default.number,total:c.default.number}).isRequired,onAdd:c.default.func.isRequired,actionable:c.default.bool,isOptimizing:c.default.bool},t.default=E},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),i=a(6),l=function(){return r.default.createElement("div",null,r.default.createElement("ul",{className:"fpo-scenario-events__eventsList"},r.default.createElement("li",null,r.default.createElement("span",{className:"__icon event-type__1"},i.Icons.EVENT),r.default.createElement("span",{className:"fpo-scenario-events__eventKey"},"Screening and randomization pause by ",r.default.createElement("b",null,"date"))),r.default.createElement("li",null,r.default.createElement("span",{className:"__icon event-type__2"},i.Icons.EVENT),r.default.createElement("span",{className:"fpo-scenario-events__eventKey"},"Screening and randomization pause by ",r.default.createElement("b",null,"num. of patients randomized"))),r.default.createElement("li",null,r.default.createElement("span",{className:"__icon event-type__3"},i.Icons.EVENT),r.default.createElement("span",{className:"fpo-scenario-events__eventKey"},"Screening rate changed by ",r.default.createElement("b",null,"date"))),r.default.createElement("li",null,r.default.createElement("span",{className:"__icon event-type__4"},i.Icons.EVENT),r.default.createElement("span",{className:"fpo-scenario-events__eventKey"},"Screening failure rate changed by ",r.default.createElement("b",null,"date")))),r.default.createElement("div",{className:"event-keyline"}))};t.default=r.default.memo(l)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),i=a(6),l=function(){return r.default.createElement("div",null,r.default.createElement("ul",{className:"fpo-scenario-events__eventsList"},r.default.createElement("li",null,r.default.createElement("span",{className:"__icon"},i.Icons.STAR_IN_PROGRESS),r.default.createElement("span",{className:"fpo-scenario-events__eventKey"},"Active")),r.default.createElement("li",null,r.default.createElement("span",{className:"__icon"},i.Icons.STAR_PENDING),r.default.createElement("span",{className:"fpo-scenario-events__eventKey"},"Pending")),r.default.createElement("li",null,r.default.createElement("span",{className:"__icon"},i.Icons.STAR_COMPLETED),r.default.createElement("span",{className:"fpo-scenario-events__eventKey"},"Completed"))),r.default.createElement("div",{className:"event-keyline"}))};t.default=r.default.memo(l)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(75),p=n(f),h=a(2),v=n(h),m=a(6),_=a(34),E=a(827),g=a(830),y=n(g),S=a(829),b=n(S);a(2146);var C=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.containerWidth=0,a.containerLeft="calc(100% + 24px)",a.wrapperHeight=0,a.handleResize=a.handleResize.bind(a),a}return l(t,e),o(t,[{key:"componentDidMount",value:function(){var e=!!(0,_.isSupportPassive)()&&{passive:!0};window.addEventListener("resize",this.handleResize,e),this.handleResize()}},{key:"shouldComponentUpdate",value:function(e){return e.expanded||e.expanded!==this.props.expanded}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){var e=this.eventsContainer,t=e?e.getBoundingClientRect():{};this.containerWidth=t.width,this.containerLeft=t.left;var a=this.eventsWrapper,n=a?a.getBoundingClientRect():{};this.wrapperHeight=n.height,e&&a&&this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props,a=t.expanded,n=t.currentLocation,r=t.currentRegion,i=t.currentEvents,l=t.eventTrackingStatus,o={SCREENING_RANDOMIZATION_PAUSE_BY_DATE:1,SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS:2,SCREENING_RATE_BY_DATE:3,SCREENING_FAILURE_BY_DATE:4},s={INCREASE_BY:"Increase by",DECREASE_BY:"Decrease by"},d=i.map(function(e,t){var a=(0,v.default)({disabledEvent:e.isEventDisabled});return e.patients?u.default.createElement("div",{key:e.id,className:a},u.default.createElement(E.EventWidgetByPatients,{isEventDisabled:e.isEventDisabled,name:e.name,startAfter:e.start_after,duration:e.duration,patients:e.patients,type:o[e.event_type],iconStatus:e.trackingStatus?e.trackingStatus[t]:e.status,iconTypeTracking:l}),u.default.createElement("hr",{className:"event-keylineSeparator"})):u.default.createElement("div",{key:e.id,className:a},u.default.createElement(E.EventWidgetByDate,{isEventDisabled:e.isEventDisabled,name:e.name,startDate:e.start_date,endDate:e.end_date,ratio:e.operation_value,type:o[e.event_type],iconStatus:e.status,operation:s[e.operation],iconTypeTracking:l}),u.default.createElement("hr",{className:"event-keylineSeparator"}))}),c=d.slice(0);return u.default.createElement("div",{ref:function(t){e.eventsContainer=t},className:"fpo-scenario-events__container"},u.default.createElement("div",{ref:function(t){e.eventsWrapper=t},className:"fpo-scenario-events__wrapper",onWheel:function(e){e.stopPropagation(),e.preventDefault()},onScroll:function(e){e.stopPropagation(),e.preventDefault()},style:{top:0,width:this.containerWidth+48,left:a?this.containerLeft-24:this.containerLeft+this.containerWidth+24}},u.default.createElement("div",{className:"fpo-scenario-events__close-container"},u.default.createElement("div",{onClick:this.props.onClose,className:"fpo-scenario-events__close-button"},m.Icons.CROSS)),u.default.createElement("div",{className:"fpo-scenario-events__content"},u.default.createElement(p.default,{style:{maxHeight:this.wrapperHeight-280},horizontal:!1,stopScrollPropagation:!0},u.default.createElement("div",{className:"fpo-scenario-events__scrollable-wrapper"},u.default.createElement("div",{className:"fpo-scenario-events__title-wrapper"},u.default.createElement("div",{className:"font-black"},"Events"),u.default.createElement("div",{className:"fpo-scenario-events__counter"},u.default.createElement("div",{className:"fpo-scenario-events__counter-value"},i.length>0?u.default.createElement("span",{className:"fpo-scenario-events__counter-events"},(0,_.kFormatter)(i.length)):""),u.default.createElement("div",{className:"fpo-scenario-events__counter-icon"},m.Icons.EVENT)))),u.default.createElement("div",{className:"event-wrapper"},u.default.createElement("div",{className:"event-keyline"}),u.default.createElement("h2",null,"Unspecified country"===n?"Unspecified country ("+r+")":n),c,u.default.createElement("h3",{className:"fpo-scenario-events__eventsKey"},"Events key"),l?u.default.createElement(y.default,null):null,u.default.createElement(b.default,null))))))}}]),t}(u.default.Component);C.defaultProps={expanded:!1,currentLocation:"",currentRegion:"",currentEvents:[],eventTrackingStatus:!1},C.propTypes={expanded:c.default.bool,onClose:c.default.func.isRequired,currentLocation:c.default.string,currentRegion:c.default.string,currentEvents:c.default.array,eventTrackingStatus:c.default.bool},t.default=C},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(65),h=n(p),v=a(2),m=n(v),_=a(14),E=n(_),g=a(134),y=n(g),S=a(6),b=a(167),C=a(35),O=a(202),T=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showMenu:!1,isExportToPngDisabled:null,isLoading:!1},a.toggleMenu=a.toggleMenu.bind(a),a.exportToExcel=a.exportToExcel.bind(a),a.saveAsImage=a.saveAsImage.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a}return l(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e,t){return t.showMenu||t.showMenu!==this.state.showMenu||t.isLoading||t.isLoading!==this.state.isLoading}},{key:"toggleMenu",value:function(e){var t=(0,C.getParamItemStorage)("fpo-ui-settings","chartState","collapsed");"boolean"!=typeof t&&(t=!document.querySelector(".svg-wrapper:not([id*=minimized])")),this.setState({showMenu:void 0!==e?e:!this.state.showMenu,isExportToPngDisabled:t})}},{key:"handleClickOutside",value:function(e){this.state.showMenu&&e&&!e.target.getAttribute("data-ignore-click-outside")&&this.toggleMenu(!1)}},{key:"exportToExcel",value:function(){this.props.exportToExcel(),this.toggleMenu()}},{key:"saveAsImage",value:function(){var e=this,t=this.props,a=t.study,n=t.scenario,r=t.filter;this.setState({isLoading:!0,showMenu:!1},function(){setTimeout(function(){(0,O.saveAsImage)(a,n,r,e.setState.bind(e,{isLoading:!1}))},2e3)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.isDisabled,n=t.notCollapsibleChart,r=this.state.showMenu?{visible:!1}:{};return d.default.createElement(u.Fragment,null,this.state.isLoading&&d.default.createElement(y.default,null),d.default.createElement(E.default,o({mouseEnterDelay:.3,align:{offset:[-20,0]},overlayClassName:"fpo-sidebar-button__tooltip",placement:"right"},r,{trigger:["hover"],overlay:d.default.createElement("span",null,"Export to Excel or save chart as image")}),d.default.createElement(E.default,{destroyTooltipOnHide:!0,align:{offset:[5,0]},placement:"bottomLeft",visible:this.state.showMenu,trigger:["click"],overlay:d.default.createElement(b.ContextMenu,null,d.default.createElement(b.ContextMenuItem,{label:"Export to Excel","data-ignore-click-outside":!0,onClick:this.exportToExcel}),d.default.createElement(b.ContextMenuItem,{label:"Save chart as image","data-ignore-click-outside":!0,disabled:!n&&this.state.isExportToPngDisabled,onClick:this.saveAsImage}))},d.default.createElement("div",{className:(0,m.default)("fpo-sidebar__button",{"fpo-sidebar__button_disabled":a}),style:{height:"48px"}},d.default.createElement("div",{className:"fpo-sidebar__content",onClick:function(){return!a&&e.toggleMenu()}},S.Icons.DOWNLOAD)))))}}]),t}(d.default.Component);T.defaultProps={isDisabled:!1,filter:"",notCollapsibleChart:!1},T.propTypes={isDisabled:f.default.bool,exportToExcel:f.default.func.isRequired,study:f.default.object.isRequired,scenario:f.default.object.isRequired,filter:f.default.string,notCollapsibleChart:f.default.bool},t.default=(0,h.default)(T)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(75),p=n(f),h=a(2),v=n(h),m=a(289),_=n(m),E=a(278),g=n(E),y=a(27),S=n(y),b=a(6);a(2147);var C=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},O=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={filterValue:""},a.handleClearClick=a.handleClearClick.bind(a),a.handleChangeFilter=a.handleChangeFilter.bind(a),a.handleItemClick=(0,g.default)(a.handleItemClick.bind(a),100),a}return l(t,e),o(t,[{key:"handleClearClick",value:function(e){e.stopPropagation(),e.preventDefault(),this.setState({filterValue:""})}},{key:"handleChangeFilter",value:function(e){var t=this;this.setState({filterValue:C(e.target.value)},function(){t.scrollRef&&t.scrollRef.scrollTop()})}},{key:"handleItemClick",value:function(e){this["ref_"+e]&&this["ref_"+e].classList&&!this["ref_"+e].classList.contains("disabled")&&(this["ref_"+e].classList.add("disabled"),this.props.onSelect(e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.countries,n=t.height,r=t.disabledCountries,i=t.fixedHeight,l=t.placeholder,o=a.filter(function(t){return""===e.state.filterValue||-1!==C(t).indexOf(e.state.filterValue)}),s=o.map(function(t){var a=r.includes(t);return u.default.createElement("div",{key:t,ref:function(a){e["ref_"+t]=a},className:(0,v.default)("filterable-list__item",{disabled:a}),onClick:function(n){n.stopPropagation(),e.props.onSelect&&!a&&e.handleItemClick(t)}},u.default.createElement("span",null,(0,_.default)(t,e.state.filterValue,function(e,t){return u.default.createElement("span",{key:t,className:"matched"},e)})))}),d=i?{height:n}:{},c=i?{height:n}:{maxHeight:n-50};return u.default.createElement("div",{className:"filterable-list",style:d},u.default.createElement("div",{className:"filterable-list__filter"},u.default.createElement(S.default,{onChange:this.handleChangeFilter,value:this.state.filterValue,narrow:!0,withoutBorder:!0,placeholder:l}),u.default.createElement("div",{className:(0,v.default)("filterable-list__clear-button",{hidden:!this.state.filterValue||""===this.state.filterValue})},u.default.createElement("span",{onClick:this.handleClearClick},b.Icons.CROSS))),u.default.createElement(p.default,{ref:function(t){e.scrollRef=t},style:c,horizontal:!1},u.default.createElement("div",{className:"filterable-list__items"},s)))}}]),t}(u.default.Component);O.propTypes={countries:c.default.array,disabledCountries:c.default.array,onSelect:c.default.func.isRequired,height:c.default.number,fixedHeight:c.default.bool,placeholder:c.default.string},O.defaultProps={countries:[],disabledCountries:[],onSelect:void 0,height:200,fixedHeight:!1,placeholder:""},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s);a(2148);var d=function(e){var t=e.children,a=e.direction,n=e.wrap,r=e.justifyContent,l=e.alignItems,o=e.style,s=e.className,d=e.fullHeight,c=(0,u.default)("flex-box",{"flex-box_full-height":d,"flex-box_wrap-no":"nowrap"===n,"flex-box_wrap-yes":"wrap"===n,"flex-box_wrap-reverse":"wrap-reverse"===n,"flex-box_justify-flex-start":"flex-start"===r,"flex-box_justify-flex-end":"flex-end"===r,"flex-box_justify-center":"center"===r,"flex-box_justify-space-between":"space-between"===r,"flex-box_justify-space-around":"space-around"===r,"flex-box_align-flex-start":"flex-start"===l,"flex-box_align-flex-end":"flex-end"===l,"flex-box_align-center":"center"===l,"flex-box_align-baseline":"baseline"===l,"flex-box_align-stretch":"stretch"===l,"flex-box_direction-column":"column"===a,"flex-box_direction-column-reverse":"column-reverse"===a,"flex-box_direction-row":"row"===a,"flex-box_direction-row-reverse":"row-reverse"===a},s);return i.default.createElement("div",{className:c,style:o},t)};d.propTypes={alignItems:o.default.oneOf(["flex-start","flex-end","center","baseline","stretch"]),children:o.default.node.isRequired,className:o.default.string,direction:o.default.oneOf(["column","column-reverse","row","row-reverse"]),justifyContent:o.default.oneOf(["flex-start","flex-end","center","space-between","space-around"]),style:o.default.object,wrap:o.default.oneOf(["nowrap","wrap","wrap-reverse"]),fullHeight:o.default.bool},d.defaultProps={className:void 0,direction:"row",wrap:"nowrap",justifyContent:void 0,alignItems:void 0,style:void 0,fullHeight:!1},t.default=i.default.memo(d)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(834),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),l=n(i),o=a(1),s=n(o),u=a(2),d=n(u);a(2149);var c=function(e){var t=e.flex,a=e.style,n=e.basis,i=e.className,o=e.grow,s=e.shrink,u=e.children,c=(0,d.default)("flex-item",t?void 0:{"flex-item_grow":o,"flex-item_shrink":s,"flex-item_basis":n},i),f=r({},a,{flex:t});return l.default.createElement("div",{className:c,style:f},u)};c.propTypes={children:s.default.oneOfType([s.default.node,s.default.string]),grow:s.default.bool,basis:s.default.string,shrink:s.default.bool,flex:s.default.string,style:s.default.object,className:s.default.string},c.defaultProps={grow:!1,shrink:!0,basis:"auto",flex:void 0,style:void 0,className:void 0,children:null},t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(836),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=a(0),s=n(o),u=a(1),d=n(u),c=a(2),f=n(c),p=a(235),h=n(p);a(2150);var v=function(e){var t=e.children,a=e.className,n=i(e,["children","className"]),o=(0,f.default)(r({},a,a));return s.default.createElement(h.default,l({},n,{className:"flex-table__cell-group "+o}),t)};v.propTypes={children:d.default.node.isRequired,className:d.default.string,columnName:d.default.string},v.defaultProps={className:void 0,columnName:void 0},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),l=n(i),o=a(1),s=n(o),u=a(2),d=n(u),c=a(643),f=n(c);a(2152);var p=function(e){var t=function(e,t,a){return l.default.cloneElement((0,f.default)(e)?e({rowIndex:t,columnName:a}):e,{rowIndex:t,columnName:a})},a=(0,d.default)({"flex-table__column_align-left":"left"===e.align},{"flex-table__column_align-center":"center"===e.align},{"flex-table__column_align-right":"right"===e.align}),n=(0,d.default)("flex-table__column",a,{"flex-table__column_no-overflow":!e.overflow}),i=r({flex:e.fixedWidth?"0 0 "+e.width+"px":"1 1 "+e.width+"px"},e.customStyles);return l.default.createElement("div",{className:n,style:i,onClick:function(t){e.columnClickHandler&&e.columnClickHandler(t,e.rowIndex)}},-1===e.rowIndex?t(e.header,e.rowIndex,e.columnName):t(e.data,e.rowIndex,e.columnName))};p.propTypes={align:s.default.oneOf(["left","center","right"]),columnClickHandler:s.default.func,columnName:s.default.string,data:s.default.oneOfType([s.default.node,s.default.func]),fixedWidth:s.default.bool,header:s.default.oneOfType([s.default.node,s.default.func]),overflow:s.default.bool,rowIndex:s.default.number,width:s.default.number.isRequired,customStyles:s.default.object},p.defaultProps={align:"left",columnClickHandler:void 0,columnName:void 0,data:void 0,fixedWidth:!1,header:void 0,overflow:!1,rowIndex:void 0,customStyles:void 0},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(56),u=n(s),d=a(2),c=n(d),f=a(83),p=n(f);a(2153);var h=a(477),v=n(h),m=a(85),_=function(e){var t=e.rowsCount,a=e.children,n=e.headerHeight,r=e.rowHeight,l=e.width,o=e.onRowDoubleClick,s=e.onRowClick,d=e.borders,f=e.data,h=e.hightLightOnHoverRowsInd,m=e.onClickOutsideActiveRow,_=e.collapsedList,E=e.errorRowsIds,g=e.lpftViewType,y=e.historicalFilter,S=e.isMultiEditing,b=e.isOptimizing,C=e.isEditable,O=e.activeRowInd,T=e.stickyHeader,R=e.stickyPosition,A=e.clipboardEmpty,I=a instanceof Array?a:[a],w=function(e){return i.default.createElement(v.default,{key:e,rowData:f[e],isEditable:C,rowHeight:r,onRowClick:s,handleOutsideClick:m,onRowDoubleClick:o,highlightOnHover:h.includes(e),errorRow:E.includes(e),highlighted:O===e,lpftViewType:g,historicalFilter:y,isMultiEditing:S,isOptimizing:b,collapsedList:_,cursorAsPointer:0!==e,clipboardEmpty:A,rowIndex:e},I.filter(function(e){return!e.props.hidden}).map(function(t,a){return i.default.cloneElement(t,{key:a,rowIndex:e})}))},N=l?l+"px":"100%";return i.default.createElement("div",{style:{width:N,height:t*r+n+"px"},className:(0,c.default)("flex-table","flex-table__table",{"flex-table__borders":!0===d},{"flex-table__inner-borders":d&&"inner"===d})},function(){var e=i.default.createElement("div",{className:"flex-table__header",style:{height:n+"px"}},I.filter(function(e){return!e.props.hidden}).map(function(e){return i.default.cloneElement(e,{key:u.default.generate(),rowIndex:-1})}));return T?i.default.createElement(p.default,{style:{top:R+"px",zIndex:2}},e):e}(),function(){for(var e=[],a=0;a<t;a+=1)e.push(w(a));return e}())};_.propTypes={borders:o.default.oneOfType([o.default.bool,o.default.string]),children:o.default.node.isRequired,hightLightOnHoverRowsInd:o.default.array,activeRowInd:o.default.number,headerHeight:o.default.number,onRowClick:o.default.func,onRowDoubleClick:o.default.func,onClickOutsideActiveRow:o.default.func,rowHeight:o.default.number,rowsCount:o.default.number.isRequired,width:o.default.number,errorRowsIds:o.default.array,isEditable:o.default.bool,stickyHeader:o.default.bool,stickyPosition:o.default.number,data:o.default.array,lpftViewType:o.default.oneOf(["expected","exceeded"]),isMultiEditing:o.default.bool,collapsedList:o.default.array,isOptimizing:o.default.bool,historicalFilter:o.default.oneOf(Object.keys(m.FILTER_BY)),clipboardEmpty:o.default.bool},_.defaultProps={borders:!1,headerHeight:50,rowHeight:50,onRowClick:void 0,onRowDoubleClick:void 0,width:void 0,hightLightOnHoverRowsInd:[],errorRowsIds:[],activeRowInd:null,isEditable:!1,onClickOutsideActiveRow:function(){},stickyHeader:!1,stickyPosition:0,data:[],lpftViewType:"expected",isMultiEditing:!1,collapsedList:[],isOptimizing:!1,historicalFilter:m.FILTER_BY.STUDIES,clipboardEmpty:!0},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.textSortTable=t.SortTypes=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),h=n(p),v=a(2),m=n(v),_=a(235),E=n(_);a(2154);var g={ASC:"ASC",DESC:"DESC"},y=function(e,t){return function(a,n){var r=a[e],i=n[e],l=0;return r>i&&(l=1),r<i&&(l=-1),0!==l&&t===g.DESC&&(l*=-1),l}},S=function(e){function t(e){l(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onSortChange=a.onSortChange.bind(a),a}return s(t,e),d(t,[{key:"onSortChange",value:function(e){e.preventDefault();var t=g.DESC,a=g.ASC;this.props.onSortChange&&this.props.onSortChange(this.props.sortKey,this.props.sortDir?function(e){return e===a?t:a}(this.props.sortDir):a)}},{key:"render",value:function(){var e=this.props,t=e.sortDir,a=e.children,n=e.className,l=i(e,["sortDir","children","className"]),o=(0,m.default)(r({},n,n));return f.default.createElement(E.default,u({},l,{className:"flex-table__sort-header-cell "+o}),f.default.createElement("span",{onClick:this.onSortChange},a," ",function(){var e=(0,m.default)({"flex-table__sort-header-cell_sort-desc":t===g.ASC},{"flex-table__sort-header-cell_sort-asc":t===g.DESC});return f.default.createElement("div",{className:"flex-table__sort-header-cell_sort-dir "+e},t?"":"")}()))}}]),t}(c.Component);S.propTypes={children:h.default.node.isRequired,className:h.default.string,columnName:h.default.string,onSortChange:h.default.func,sortDir:h.default.oneOf([g.ASC,g.DESC]),sortKey:h.default.string.isRequired},S.defaultProps={className:void 0,columnName:void 0,onSortChange:void 0,sortDir:void 0},t.default=S,t.SortTypes=g,t.textSortTable=y},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0}),t.GridLayoutCol=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=a(0),s=n(o),u=a(1),d=n(u),c=a(2),f=n(c),p=function(e){var t=e.children,a=e.className,n=e.width,o=e.offset,u=i(e,["children","className","width","offset"]),d=(0,f.default)("fpo-col-"+n,a,r({},"fpo-col-offset-"+o,o));return s.default.createElement("div",l({className:d},u),t)};p.defaultProps={className:"",offset:void 0,width:12},p.propTypes={children:d.default.node.isRequired,className:d.default.string,offset:d.default.oneOf([0,1,2,3,4,5,6,7,8,9,10,11]),width:d.default.oneOf([1,2,3,4,5,6,7,8,9,10,11,12])},t.GridLayoutCol=p,t.default=s.default.memo(p)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),o=n(l),s=a(1),u=n(s),d=a(2),c=n(d),f=function(e){var t=e.children,a=e.className,n=e.align,l=r(e,["children","className","align"]),s=(0,c.default)("fpo-gutter",a,{"fpo-gutter_align-left":"left"===n},{"fpo-gutter_align-right":"right"===n});return o.default.createElement("div",i({className:s},l),t)};f.defaultProps={className:"",align:"left"},f.propTypes={children:u.default.node.isRequired,className:u.default.string,align:u.default.oneOf(["left","right"])},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),o=n(l),s=a(2),u=n(s),d=a(1),c=n(d),f=function(e){var t=e.children,a=e.className,n=r(e,["children","className"]),l=(0,u.default)("fpo-row",a);return o.default.createElement("div",i({className:l},n),t)};f.propTypes={children:c.default.node,className:c.default.string},f.defaultProps={children:null,className:""},t.default=o.default.memo(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),o=n(l),s=a(1),u=n(s),d=a(2),c=n(d),f=function(e){var t=e.children,a=e.noGaps,n=r(e,["children","noGaps"]),l=(0,c.default)("fpo-grid",{"no-gaps":a});return o.default.createElement("div",i({className:l},n),t)};f.defaultProps={noGaps:void 0},f.propTypes={children:u.default.node.isRequired,noGaps:u.default.bool},t.default=o.default.memo(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(14),u=n(s),d=function(e){var t=e.tooltipData,a=e.value,n=e.valueClasses,r=e.type;return e.showTooltip?i.default.createElement(u.default,{mouseEnterDelay:.7,align:{offset:[0,0]},overlay:i.default.createElement("div",{className:"description-wrapper"},t||"No description")},i.default.createElement("div",{className:n},(null===a?"-":a)+(a&&a>0&&"percentage"===r?"%":""))):i.default.createElement("div",{className:n},(null===a?"-":a)+(a&&a>0&&"percentage"===r?"%":""))};d.defaultProps={tooltipData:"No description",value:null,valueClasses:null,type:null,showTooltip:!1,tooltipField:""},d.propTypes={tooltipData:o.default.string,value:o.default.oneOfType([o.default.string,o.default.object,o.default.number]),valueClasses:o.default.string,type:o.default.oneOf(["percentage"]),showTooltip:o.default.bool},t.default=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(11),c=n(d),f=a(15),p=a(846),h=n(p);a(2157);var v=function(e){var t=e.rowIndex,a=e.rows,n=e.dataField,r=e.alignTo,l=e.type,o=e.showTooltip,s=e.tooltipField,d=e.isTitle,p=a[t];if(!p)return null;var v=p[n];v&&"fpfv"===n&&"-"!==v?v=(0,c.default)(v).format("DD MMM YY"):null!==v&&"screen_failure_rate"===n&&isFinite(v)&&(v=(100*+v).toFixed(0));var m=(0,u.default)({"align-right":"right"===r,"show-as-title":d});return i.default.createElement(f.Cell,{className:"data-cell"},i.default.createElement(h.default,{tooltipData:p[s],value:v,valueClasses:m,type:l,showTooltip:o,tooltipField:s}),i.default.createElement("div",{className:"cell-underline"}))};v.defaultProps={rowIndex:0,dataField:"",type:void 0,alignTo:"left",showTooltip:!1,tooltipField:"",isTitle:!1},v.propTypes={rows:o.default.array.isRequired,rowIndex:o.default.number,dataField:o.default.string,alignTo:o.default.oneOf(["right","left"]),type:o.default.oneOf(["percentage"]),showTooltip:o.default.bool,tooltipField:o.default.string,isTitle:o.default.bool},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(49),c=function(e){var t=e.title,a=e.alignTo,n=(0,u.default)({"align-right":"right"===a,"align-left":"left"===a});return i.default.createElement(d.Cell,{className:"header-cell"},i.default.createElement("div",{className:n},t),i.default.createElement("div",{className:"header-cell-underline"}))};c.defaultProps={title:"",alignTo:"left"},c.propTypes={title:o.default.string,alignTo:o.default.oneOf(["left","right"])},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(97),u=n(s),d=function(e){var t=e.name,a=e.size;return i.default.createElement("div",{className:"fpo-icon",style:{width:a+"px",height:a+"px"}},u.default[t])};d.defaultProps={size:24},d.propTypes={name:o.default.string.isRequired,size:o.default.number},t.default=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(6),c=a(14),f=n(c),p=function(e){var t=e.canBeIgnored,a=void 0;return a=t?i.default.createElement("span",null,"The country has no enrolled patients ",i.default.createElement("br",null),"and presumably no longer participating in trial. ",i.default.createElement("br",null),"Scenario owner excluded it from Adjusted plan calculation."):i.default.createElement("span",null,"This country is disabled and does not",i.default.createElement("br",null),"participate in the current plan.",i.default.createElement("br",null),"However it already has actual",i.default.createElement("br",null),"patients screened/randomized.",i.default.createElement("br",null),"Please consider enabling it."),i.default.createElement(f.default,{mouseEnterDelay:.3,overlayClassName:"scenario-table__ignored-tooltip",align:{offset:[0,0]},overlay:a},i.default.createElement("div",{className:(0,u.default)("row-control-icon--event",{warning:!t})},t?d.Icons.INFO:d.Icons.INFO_O))};p.defaultProps={canBeIgnored:!0},p.propTypes={canBeIgnored:o.default.bool},t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(850),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(75),h=n(p),v=a(65),m=n(v),_=a(289),E=n(_),g=a(2),y=n(g),S=a(191),b=n(S),C=a(27),O=n(C),T=a(6),R=a(14),A=n(R);a(2158);var I=a(34),w=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isOpened:!1,filter:""},a.setOpened=a.setOpened.bind(a),a.onFilterChange=a.onFilterChange.bind(a),a.onStudySelect=a.onStudySelect.bind(a),a.debounced=(0,b.default)(a.props.getStudies,500),a}return l(t,e),s(t,[{key:"onFilterChange",value:function(e){var t=e.target.value;this.setState({filter:t}),t.length>=2&&this.debounced(t)}},{key:"onStudySelect",value:function(e){e.imported||(this.props.onImport(e.id),this.setOpened(!1))}},{key:"setOpened",value:function(e){this.setState({isOpened:e,filter:""})}},{key:"handleClickOutside",value:function(){this.state.isOpened&&this.setOpened(!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.filter,n=t.isOpened,r=this.props,i=r.className,l=r.studies,s=n?{visible:!1}:null;return d.default.createElement("div",{className:(0,y.default)("import-study",i,{"import-study--opened":n})},d.default.createElement(A.default,o({mouseEnterDelay:.3,mouseLeaveDelay:.3,align:{offset:[0,5]},overlay:d.default.createElement("span",null,"Import a study")},s),d.default.createElement("div",{className:"import-study__open-trigger",onClick:function(){return e.setOpened(!0)}},T.Icons.SEARCH_PLUS)),n&&d.default.createElement("div",{className:"import-study__input"},d.default.createElement(O.default,{className:"import-study__text-input",placeholder:"Import study from Impact",value:a,onChange:this.onFilterChange,withoutBorder:!0,autoFocus:!0}),d.default.createElement("div",{className:"import-study__close-trigger",onClick:function(){return e.setOpened(!1)}},T.Icons.CROSS)),a.length>=2&&!!l.length&&d.default.createElement("div",{className:"import-study__studies"},d.default.createElement(h.default,{style:{maxHeight:400},horizontal:!1},l.map(function(t){return d.default.createElement("div",{key:t.study_id,title:t.ta,className:(0,y.default)("import-study__study",{"import-study__study--imported":t.imported}),onClick:function(){return e.onStudySelect(t)}},(0,I.skypeToCallPrevent)((0,E.default)(t.study_id,a.toUpperCase(),function(e,t){return d.default.createElement("span",{key:t},(0,I.skypeToCallPrevent)(e))})))}))),!!a.length&&a.length<2&&d.default.createElement("div",{className:"import-study__message"},"Enter ",2," characters to search..."),a.length>=2&&!l.length&&d.default.createElement("div",{className:"import-study__message"},"No results found for ",a))}}]),t}(u.PureComponent);w.defaultProps={className:null},w.propTypes={className:f.default.string,studies:f.default.array.isRequired,getStudies:f.default.func.isRequired,onImport:f.default.func.isRequired},t.default=(0,m.default)(w)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(852),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(39),p=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onSubmit=a.onSubmit.bind(a),a}return l(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"onSubmit",value:function(){this.props.onSubmit()}},{key:"render",value:function(){var e=this.props,t=e.isShown,a=e.onClose;return u.default.createElement(f.PopupDialog,{title:"Warning",isShown:t,handleClose:a,buttons:[u.default.createElement(f.ActionButton,{primary:!0,action:a},"Close")]},u.default.createElement("div",null,"Please correct or remove the invalid data."))}}]),t}(s.Component);p.propTypes={isShown:c.default.bool.isRequired,onClose:c.default.func.isRequired,onSubmit:c.default.func.isRequired},t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(854),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(857),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l);a(2159);var s=function(e){var t=e.children,a=e.message,n=e.messageSide,r=e.type,l="information-bar information-bar--"+r,o="information-bar__message information-bar__message--"+n;return i.default.createElement("section",{className:l},i.default.createElement("span",{className:o},a),t)};s.propTypes={children:o.default.any,message:o.default.string.isRequired,messageSide:o.default.oneOf(["left","right"]),type:o.default.oneOf(["alert","warning"]).isRequired},s.defaultProps={children:void 0,messageSide:"left",type:"warning"},t.default=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(859),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(39),p=a(73),h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"render",value:function(){var e=this.props,t=e.isShown,a=e.onClose;return u.default.createElement(f.PopupDialog,{isShown:t,title:"Warning",handleClose:a,buttons:[u.default.createElement(f.ActionButton,{primary:!0,action:a},p.CLOSE)]},u.default.createElement("div",{className:"h2"},p.CORRECT_INVALID_DATA))}}]),t}(s.Component);h.propTypes={isShown:c.default.bool.isRequired,onClose:c.default.func.isRequired},t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(861),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(75),c=n(d),f=a(64),p=n(f),h=a(14),v=n(h);a(2160);var m=a(240),_=function(e){var t=e.listItems,a=e.nameFieldName,n=e.idFieldName,r=e.width,l=e.height,o=e.onChange,s=e.selectedItems,d=e.activeTab,f=e.disabledCountries,h=e.recommendedByAnalyticsCountries,_={width:r,height:l},E=s.length,g=t.find(function(e){return"unspecified country"===e[a].toLowerCase()}),y=g?g[n]:-1;s.includes(y)&&(E-=1);var S=0,b=[];t.forEach(function(e){e.filtered||(S+=1,b.push(e))});var C=t.map(function(e){var t=e,r=void 0!==f.find(function(e){return e.country_name===t.name}),l=void 0!==h.find(function(e){return e.name===t.name});return r?t.disabled=!0:"unspecified country"===t[a].toLowerCase()?"EXCLUDE"===d.toUpperCase()?t.disabled=!0:S-s.length!=1||t.isSelected?t.disabled=!1:t.disabled=1!==S:t.disabled=S-s.length==1&&s.includes(y)&&!t.isSelected,i.default.createElement("div",{key:"list-box-item_"+t[a],className:(0,u.default)("list-box-item",{"recommended-by-analytics":l})},l?i.default.createElement(v.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"left",overlay:i.default.createElement("span",null,m.TOOLTIPS_TEXT.RECOMMENDED_BY_ANALYTICS)},i.default.createElement("span",null,i.default.createElement(p.default,{disabled:t.filtered||t.disabled,label:t[a],checked:-1!==s.indexOf(t[n]),onChange:function(e){return o(t[n],e)}}))):i.default.createElement(p.default,{disabled:t.filtered||t.disabled,label:t[a],checked:-1!==s.indexOf(t[n]),onChange:function(e){return o(t[n],e)}}))});return i.default.createElement("div",{className:"fpo-list-box-container",style:{height:"240px"}},C.length>1?i.default.createElement("div",{className:"list-box-control"},i.default.createElement(p.default,{disabled:function(){return f.length>0||!!s.includes(y)||"EXCLUDE"===d.toUpperCase()&&!b.find(function(e){return"unspecified country"!==e[a].toLowerCase()})||"INCLUDE"===d.toUpperCase()&&0===b.filter(function(e){return"unspecified country"!==e[a].toLowerCase()}).length}(),label:"Select all",checked:function(){return"EXCLUDE"===d.toUpperCase()&&0!==E&&E===b.filter(function(e){return"unspecified country"!==e[a].toLowerCase()}).length||"INCLUDE"===d.toUpperCase()&&0!==E&&E===S-1}(),onChange:function(e){return o("all",e)}})):null,i.default.createElement(c.default,{style:_,autoHide:!1},C))};_.defaultProps={height:168,listItems:[],idFieldName:"id",nameFieldName:"name",width:240,disabledCountries:[],recommendedByAnalyticsCountries:[]},_.propTypes={activeTab:o.default.string.isRequired,height:o.default.number,idFieldName:o.default.string,nameFieldName:o.default.string,onChange:o.default.func.isRequired,selectedItems:o.default.array.isRequired,listItems:o.default.array,width:o.default.number,disabledCountries:o.default.array,recommendedByAnalyticsCountries:o.default.array},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2),h=n(p),v=a(456),m=n(v),_=a(863),E=a(6),g=a(10),y=n(g),S=a(480);a(2162);var b=function(e){function t(e){i(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={regions:(0,_.getReginos)(e),countries:(0,_.getCountries)(e),scrollPosition:0,hasLeftOffset:!1,hasRightOffset:!1},a.onSelect=a.onSelect.bind(a),a.onScrollStart=a.onScrollStart.bind(a),a.onScrollLeft=a.onScrollLeft.bind(a),a.onScrollRight=a.onScrollRight.bind(a),a}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.hasLeftOffset(),t=this.hasRightOffset();this.state.hasLeftOffset===e&&this.state.hasRightOffset===t||this.setState({hasLeftOffset:e,hasRightOffset:t})}},{key:"componentWillReceiveProps",value:function(e){e.activeFilter===this.props.activeFilter&&e.data===this.props.data||this.setState({regions:(0,_.getReginos)(e),countries:(0,_.getCountries)(e),scrollPosition:e.activeFilter.type===g.REGION?0:this.state.scrollPosition})}},{key:"componentDidUpdate",value:function(e){var t=this.hasLeftOffset(),a=this.hasRightOffset();this.state.hasLeftOffset===t&&this.state.hasRightOffset===a||this.setState({hasLeftOffset:t,hasRightOffset:a}),this.props.activeFilter!==e.activeFilter&&this.alignScroll()}},{key:"onSelect",value:function(e,t){var a=this.props,n=a.data,r=a.activeFilter,i=a.onFilterSelect;if((e!==r.name||t!==r.type)&&i)if(t===g.REGION)i({name:e===S.GLOBAL_REGION?y.default:e,type:e===S.GLOBAL_REGION?g.ROLLUP:g.REGION,subject:null});else if(t===g.COUNTRY)if(e===S.ALL_COUNTRIES){if(r.type===g.COUNTRY){var l=n.find(function(e){return e.type.toUpperCase()===g.COUNTRY&&e.location===r.name&&e.region===r.subject});i({name:l.region,type:g.REGION,subject:null})}}else{var o=r.type===g.REGION?r.name:r.subject;i({name:e,type:g.COUNTRY,subject:o})}}},{key:"onScrollStart",value:function(){this.setState({scrollPosition:0})}},{key:"onScrollLeft",value:function(){var e=this.state.scrollPosition+this.getScrollStep();this.setState({scrollPosition:e>0?0:e})}},{key:"onScrollRight",value:function(){var e=this.state.scrollPosition-this.getScrollStep(),t=this.scrollableEl.clientWidth-this.scrollableInnerEl.clientWidth;this.setState({scrollPosition:e<t?t-138:e})}},{key:"getScrollStep",value:function(){return.85*this.scrollableEl.clientWidth}},{key:"hasLeftOffset",value:function(){return!!this.scrollableEl&&0!==this.state.scrollPosition}},{key:"hasRightOffset",value:function(){if(!this.scrollableEl)return!1;var e=this.scrollableEl.clientWidth,t=this.scrollableInnerEl.clientWidth,a=e-t;return t>e&&this.state.scrollPosition>a}},{key:"alignScroll",value:function(){var e=this.props.activeFilter;if(this.scrollableEl&&e.type===g.COUNTRY&&!(this.scrollableInnerEl.clientWidth<=this.scrollableEl.clientWidth)){var t=this.scrollableInnerEl.getBoundingClientRect(),a=this.scrollableInnerEl.querySelector(".location-filter__countries__item--active").getBoundingClientRect(),n=-1*parseInt(a.left-t.left,10);if(this.state.scrollPosition<n)this.setState({scrollPosition:n});else{var r=a.left+a.width+this.state.scrollPosition,i=r-t.left;if(i>this.scrollableEl.clientWidth){var l=this.scrollableEl.clientWidth-i;this.setState({scrollPosition:this.state.scrollPosition+l+-80})}}}}},{key:"isActive",value:function(e,t){var a=this.props,n=a.data,r=a.activeFilter;return t===g.REGION?e===S.GLOBAL_REGION?y.default===r.name:r.type===g.COUNTRY?e===n.find(function(e){return e.type.toUpperCase()===g.COUNTRY&&e.location===r.name&&e.region===r.subject}).region:e===r.name:t===g.COUNTRY&&(e===S.ALL_COUNTRIES?r.type!==g.COUNTRY:1===this.state.countries.length||e===r.name)}},{key:"renderRegions",value:function(){var e=this,t=this.state.regions;return this.props.hideAllCountries||(t=[S.GLOBAL_REGION].concat(r(t))),t.length?d.default.createElement("div",{className:"location-filter__regions"},t.map(function(t){return d.default.createElement("div",{key:t,className:(0,h.default)("location-filter__regions__item",{"location-filter__regions__item--active":e.isActive(t,g.REGION)}),onClick:function(){return e.onSelect(t,g.REGION)}},t)})):d.default.createElement("div",{style:{width:"400px",height:"60px"},className:""},d.default.createElement(m.default,{height:"60",width:"400"},d.default.createElement("rect",{x:"0",y:"10",width:"80",height:"40"}),d.default.createElement("rect",{x:"100",y:"10",width:"80",height:"40"}),d.default.createElement("rect",{x:"200",y:"10",width:"160",height:"40"})))}},{key:"renderCountries",value:function(){var e=this,t=this.state.countries;if(0===t.length)return null;t.length>1&&(this.props.hideAllCountries||(t=[S.ALL_COUNTRIES].concat(r(t))));var a=d.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12"},d.default.createElement("g",{fill:"none",fillRule:"evenodd"},d.default.createElement("path",{fill:"#FFF",d:"M2 0v12H0V0zM12 1.4L10.6 0l-6 6 6 6 1.4-1.4L7.4 6z"})));return d.default.createElement("div",{className:"location-filter__countries"},d.default.createElement("div",{className:(0,h.default)("location-filter__scrollable-nav",{"location-filter__hidden":!(this.state.hasLeftOffset||this.state.hasRightOffset)})},d.default.createElement("div",{className:(0,h.default)("location-filter__scrollable-nav-start",{"location-filter__hidden":!(this.state.hasLeftOffset&&!this.state.hasRightOffset)}),onClick:this.onScrollStart},a),d.default.createElement("div",{className:(0,h.default)("location-filter__scrollable-nav-left",{"location-filter__hidden":!this.state.hasLeftOffset}),onClick:this.onScrollLeft},E.Icons.CHEVRON_RIGTH),d.default.createElement("div",{className:(0,h.default)("location-filter__scrollable-nav-right",{"location-filter__hidden":!this.state.hasRightOffset}),onClick:this.onScrollRight},E.Icons.CHEVRON_RIGTH)),d.default.createElement("div",{className:"location-filter__countries__scrollable",ref:function(t){e.scrollableEl=t}},d.default.createElement("div",{className:"location-filter__countries__scrollable__inner",style:{transform:"translateX("+this.state.scrollPosition+"px)"},ref:function(t){e.scrollableInnerEl=t}},t.map(function(t){return d.default.createElement("div",{key:t,className:(0,h.default)("location-filter__countries__item",{"location-filter__countries__item--active":e.isActive(t,g.COUNTRY)}),onClick:function(){return e.onSelect(t,g.COUNTRY)}},t)}))))}},{key:"render",value:function(){return d.default.createElement("div",{className:"location-filter"},this.renderRegions(),this.renderCountries())}}]),t}(u.PureComponent);b.defaultProps={activeFilter:{name:y.default,type:g.ROLLUP},data:[],platformRegions:[],onFilterSelect:void 0,hideAllCountries:!1},b.propTypes={activeFilter:f.default.shape({name:f.default.string,type:f.default.string}),data:f.default.array,onFilterSelect:f.default.func,hideAllCountries:f.default.bool},t.default=b},function(e,t,a){"use strict";function n(e){return e.data.filter(function(e){return e.type.toUpperCase()===i.REGION}).map(function(e){return e.location}).sort()}function r(e){var t=e.data,a=e.activeFilter,n=e.platformRegions;if(a.name===l.GLOBAL_REGION)return[];var r=function(e,t){return e===l.UNSPECIFIED_COUNTRY?1:t===l.UNSPECIFIED_COUNTRY?-1:e>t?1:-1};if(a.type===i.REGION){var o=n.find(function(e){return e.name===a.name});return o&&1===o.countries.length?[]:t.filter(function(e){return e.type.toUpperCase()===i.COUNTRY&&e.region===a.name}).map(function(e){return e.location}).sort(r)}return a.type===i.COUNTRY?t.filter(function(e){return e.type.toUpperCase()===i.COUNTRY&&e.region===a.subject}).map(function(e){return e.location}).sort(r):[]}Object.defineProperty(t,"__esModule",{value:!0}),t.getReginos=n,t.getCountries=r;var i=a(10),l=a(480)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(865),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(23),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(f);a(262);var h=a(116),v=a(11),m=n(v),_=a(10),E=a(237);a(457);var g=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={data:e.data,type:e.type,first:e.first,scenarioId:e.scenarioId,location:e.location},a.renderChart=a.renderChart.bind(a),a}return l(t,e),o(t,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({data:e.data,type:e.type,first:e.first,scenarioId:e.scenarioId,location:e.location},function(){t.renderChart()})}},{key:"renderChart",value:function(){var e=this.state,t=e.data,a=e.type,n=e.first,r=e.scenarioId,i=e.location,l="#svg_mlstones_bar_"+r+"_"+i.replace(/^[^a-z]+|[^\w:.-]+/gi,"_")+"_"+t.regionId;p.select(l).select(".bar-svg-container").remove();var o=a===_.SCENARIO_DATA_TYPE.ROLLUP,s=t.activeRange,u=t.milestones,d=void 0,c=void 0,f=void 0,v=void 0,g=void 0;t.emptyRow||(d=u.find(function(e){return"FP"===e.label}).date,c=u.find(function(e){return"FPFV"===e.label}).date,f=u.find(function(e){return"FPFT"===e.label}).date,v=u.find(function(e){return"LPFV"===e.label}).date,g=u.find(function(e){return"P/LPFT"===e.label}).date);var y=u.find(function(e){return"T/LPFT"===e.label}).date,S=this.container,b=S?S.getBoundingClientRect().width:0,C=o?70:30,O={top:10,right:150,bottom:0,left:50},T=p.select(l),R=T.append("div").classed("bar-svg-container",!0).append("svg").attr("width",b).attr("height",C+O.top+O.bottom).attr("viewBox","0 0 "+(b+O.right+O.left)+" "+(C+O.top+O.bottom)),A=R.append("g").attr("transform","translate("+O.left+","+O.top+")"),I=(0,h.scaleTime)().rangeRound([0,b]);I.domain([t.minDate,t.maxDate]);var w=A.append("g").attr("transform","translate(0, "+(C-10)+")");if(w.append("line").attr("x1",0).attr("x2",b).attr("y1",0).attr("y2",0).classed("milestones-bar",!1),t.emptyRow)return void w.append("g").classed("tLpft-group",!0).attr("transform","translate("+I(y)+",0)").append("line").attr("x1",0).attr("x2",0).attr("y1",45).attr("y2",-148).attr("stroke",E.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2");if((0,E.drawBackgroundRect)(w,I(d),o?-8:-2,I(g)-I(d),o?16:4,E.COLORS.BLACK,.1),"LPFT"===t.activeRange)(0,E.drawBackgroundRect)(w,function(){return I(g<y?g:y)},o?-8:-2,function(){return g<y?I(y)-I(g):I(g)-I(y)},o?16:4,function(){return g<y?E.COLORS.GREEN:E.COLORS.RED},1,!0),a===_.SCENARIO_DATA_TYPE.REGION&&(0,E.appendRangeLabel)(w,function(){return g<=y?"end":"start"},(g>y?"+":"")+g.diff(y,"days")+"d",function(){return g<=y?"translate("+(I(y)-20)+", -14)":"translate("+(I(y)+20)+", -14)"},function(){return g<=y?E.COLORS.GREEN:E.COLORS.RED},!0);else if("SCREENING"===s){var N=I((0,m.default)((v.valueOf()+c.valueOf())/2));(0,E.drawBackgroundRect)(w,I(c),o?-8:-2,I(v)-I(c),o?16:4,E.COLORS.BLACK,1,!0),o?(0,E.appendGlobalRangeLabel)(w,"translate("+(N-60)+", -50)",v.diff(c,"weeks")+"w"):a===_.SCENARIO_DATA_TYPE.REGION&&(0,E.appendRangeLabel)(w,"middle",v.diff(c,"weeks")+"w","translate("+N+", -14)",E.COLORS.BLACK,!0)}else if("STARTUP"===s){var D=I((0,m.default)((c.valueOf()+d.valueOf())/2));(0,E.drawBackgroundRect)(w,I(d),o?-8:-2,function(){return I(c)-I(d)},o?16:4,E.COLORS.BLACK,1,!0),o?(0,E.appendGlobalRangeLabel)(w,"translate("+(D-60)+", -50)",c.diff(d,"weeks")+"w"):a===_.SCENARIO_DATA_TYPE.REGION&&(0,E.appendRangeLabel)(w,"middle",c.diff(d,"weeks")+"w","translate("+D+", -14)",E.COLORS.BLACK,!0)}else if("RANDOMISATION"===s){var P=I((0,m.default)((g.valueOf()+f.valueOf())/2));(0,E.drawBackgroundRect)(w,I(f),o?-8:-2,I(g)-I(f),o?16:4,E.COLORS.BLACK,1,!0),o?(0,E.appendGlobalRangeLabel)(w,"translate("+(P-60)+", -50)",g.diff(f,"weeks")+"w"):a===_.SCENARIO_DATA_TYPE.REGION&&(0,E.appendRangeLabel)(w,"middle",g.diff(f,"weeks")+"w","translate("+P+", -14)",E.COLORS.BLACK,!0)}switch(u.forEach(function(e){switch(e.label){case"FP":var t=w.append("g").classed("fpp-group",!0).attr("transform","translate("+I(e.date)+",0)");switch(s){case"STARTUP":(0,E.drawFppIcon)(t,!1),o&&(0,E.appendTooltipToMilestone)(t,e.color,E.COLORS.WHITE,E.COLORS.BLACK,e.label,n,!1);break;default:(0,E.drawFppIcon)(t,!0)}break;case"FPFV":var a=w.append("g").classed("fpfv-group",!0).attr("transform","translate("+I(e.date)+","+-12+")"),r=a.append("g").attr("transform","rotate(90 12 12), translate(0, 12)");switch(s){case"SCREENING":case"STARTUP":(0,E.drawDiamondIcon)(r,E.COLORS.PURPLE,o),o&&(0,E.appendTooltipToMilestone)(a,e.color,e.color,E.COLORS.WHITE,e.label,n,!0);break;default:(0,E.drawEmptyDiamond)(a)}break;case"FPFT":var i=w.append("g").classed("fpft-group",!0).attr("transform","translate("+I(e.date)+","+-12+")"),l=i.append("g").attr("transform","rotate(90 12 12), translate(0, 12)");switch(s){case"SCREENING":(0,E.drawIntersectedDiamond)(l);break;case"RANDOMISATION":(0,E.drawDiamondIcon)(l,e.color,o),o&&(0,E.appendTooltipToMilestone)(i,e.color,e.color,E.COLORS.WHITE,e.label,n,!0);break;default:(0,E.drawEmptyDiamond)(i)}break;case"LPFV":var u=w.append("g").classed("lpfv-group",!0).attr("transform","translate("+I(e.date)+","+-12+")"),d=u.append("g").attr("transform","rotate(90 12 12), translate(0, 12)");switch(s){case"RANDOMISATION":(0,E.drawIntersectedDiamond)(d);break;case"SCREENING":(0,E.drawDiamondIcon)(d,e.color,o),o&&(0,E.appendTooltipToMilestone)(u,e.color,e.color,E.COLORS.WHITE,e.label,n,!0);break;default:(0,E.drawEmptyDiamond)(u)}break;case"P/LPFT":var c=w.append("g").classed("pLpft-group",!0).attr("transform","translate("+I(e.date)+",0)");switch(s){case"RANDOMISATION":case"LPFT":(0,E.drawFilledCircle)(c,function(){return e.date.isAfter(y)?E.COLORS.RED:E.COLORS.GREEN},!1),o&&(0,E.appendTooltipToMilestone)(c,e.color,E.COLORS.WHITE,E.COLORS.BLACK,e.label,n,!1);break;default:(0,E.drawFilledCircle)(c,function(){return e.date.isAfter(y)?E.COLORS.RED:E.COLORS.GREEN},!0)}break;case"T/LPFT":default:var f=w.append("g").classed("tLpft-group",!0).attr("transform","translate("+I(e.date)+",0)");if(f.append("line").attr("x1",0).attr("x2",0).attr("y1",45).attr("y2",-148).attr("stroke",E.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2"),o){if("LPFT"===s){var p=f.append("g").classed("global-row-tooltip",!0).style("display",null).attr("transform",function(){return g<=y?"translate(-60, -50)":"translate(10, -50)"});p.append("polygon").style("fill",function(){return g<=y?E.COLORS.GREEN:E.COLORS.RED}).attr("points",function(){return g<=y?E.tooltipPathLeft:E.tooltipPathRight}),p.append("text").attr("text-anchor","middle").style("fill",E.COLORS.WHITE).classed("tooltip-text",!0).attr("transform","translate("+(g<=y?20:30)+", 15)").text((g>y?"+":"")+g.diff(y,"days")+"d")}(0,E.drawFilledCircle)(f,E.COLORS.BLACK,!1)}}}),p.select(l).select(".active-range-rect").moveToFront(),s){case"LPFT":p.select(l).select(".pLpft-group").moveToFront();break;case"STARTUP":p.select(l).select(".fpp-group").moveToFront(),p.select(l).select(".fpfv-group").moveToFront();break;case"SCREENING":p.select(l).select(".fpft-group").moveToFront(),p.select(l).select(".fpfv-group").moveToFront(),p.select(l).select(".lpfv-group").moveToFront();break;default:case"RANDOMISATION":p.select(l).select(".lpfv-group").moveToFront(),p.select(l).select(".fpft-group").moveToFront(),p.select(l).select(".pLpft-group").moveToFront()}p.select(l).select(".tLpft-group").moveToFront(),p.select(l).selectAll(".global-row-tooltip").moveToFront()}},{key:"render",value:function(){var e=this,t=this.state,a=t.scenarioId,n=t.location,r=t.data;return u.default.createElement("div",{ref:function(t){e.container=t},className:"bar-svg-wrapper",id:"svg_mlstones_bar_"+a+"_"+n.replace(/^[^a-z]+|[^\w:.-]+/gi,"_")+"_"+r.regionId})}}]),t}(u.default.Component);g.defaultProps={first:!1},g.propTypes={data:c.default.object.isRequired,type:c.default.string.isRequired,first:c.default.bool,scenarioId:c.default.number.isRequired,location:c.default.string.isRequired},t.default=g},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MilestonesTimelinePlaceholder=t.MilestonesTimelineTooltip=void 0;var r=a(869),i=n(r),l=a(868),o=n(l),s=a(867),u=n(s);t.MilestonesTimelineTooltip=o.default,t.MilestonesTimelinePlaceholder=u.default,t.default=i.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(23),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(f);a(262);var h=a(116);a(443);var v=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={data:e.data},a.renderChart=a.renderChart.bind(a),a.handleScroll=a.handleScroll.bind(a),a}return l(t,e),o(t,[{key:"componentDidMount",value:function(){document.body.addEventListener("scroll",this.handleScroll),this.renderChart()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({data:e.data},function(){t.renderChart()})}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){this.renderChart()}},{key:"renderChart",value:function(){var e=this.state.data,t=e.tLpft,a="#svg_wrapper_milestones_timeline_placeholder",n={BLACK:"#000",WHITE:"#FFF"},r=p.select("#svg_wrapper_milestones_timeline_tooltip").select("svg").attr("width"),i=this.container.getBoundingClientRect().top,l=r?Number(r):this.container.getBoundingClientRect().width,o=window.innerHeight-i;o>window.innerHeight/2&&(o=window.innerHeight/2),o<180&&(o=180);var s={top:0,right:150,bottom:0,left:50};p.select(a).select(".svg-container").remove();var u=p.select(a),d=u.append("div").classed("svg-container",!0).append("svg").attr("width",l).attr("height",o+s.top+s.bottom).attr("viewBox","0 0 "+(l+s.right+s.left)+" "+(o+s.top+s.bottom)),c=d.append("g").attr("transform","translate("+s.left+",0)"),f=(0,h.scaleTime)().rangeRound([0,l]);f.domain(e.minMaxDates),c.append("g").attr("transform","translate("+f(t)+", -100)").append("line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",o+220).attr("stroke",n.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2")}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{ref:function(t){e.container=t},className:"timeline-svg-wrapper",id:"svg_wrapper_milestones_timeline_placeholder"})}}]),t}(u.default.Component);v.propTypes={data:c.default.object.isRequired},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(23),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(f);a(262);var h=a(116);a(443);var v=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={data:e.data},a.renderChart=a.renderChart.bind(a),a}return l(t,e),o(t,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({data:e.data},function(){t.renderChart()})}},{key:"renderChart",value:function(){var e=this.state.data,t=e.tLpft,a="#svg_wrapper_milestones_timeline_tooltip",n={BLACK:"#000",WHITE:"#FFF"};p.select(a).select(".svg-container").remove();var r=this.container,i=r.getBoundingClientRect().width,l={top:10,right:150,bottom:10,left:50},o=p.select(a),s=o.append("div").classed("svg-container",!0).append("svg").attr("width",i).attr("height",40+l.top+l.bottom).attr("viewBox","0 0 "+(i+l.right+l.left)+" "+(40+l.top+l.bottom)),u=s.append("g").attr("transform","translate("+l.left+","+l.top+")"),d=(0,h.scaleTime)().rangeRound([0,i]);d.domain(e.minMaxDates);var c=u.append("g").attr("transform","translate("+d(t)+", 60)"),f=c.append("g").classed("point-tooltip",!0).style("display",null).attr("transform","translate(-1, -10)");f.append("polygon").style("fill",n.BLACK).attr("points","0,-40 60,-40 60,-10 10,-10 0,0 0,-40"),f.append("text").attr("text-anchor","middle").style("fill",n.WHITE).classed("tooltip-text",!0).attr("transform","translate(30, -20)").text("T/LPFT"),f.append("text").attr("text-anchor","start").style("fill",n.BLACK).style("font-size","16px").attr("transform","translate(70, -20)").text(t.format("DD MMM YY"))}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{ref:function(t){e.container=t},className:"timeline-svg-wrapper",id:"svg_wrapper_milestones_timeline_tooltip"})}}]),t}(u.default.Component);v.propTypes={data:c.default.object.isRequired},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(23),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(f);a(262);var h=a(166),v=a(116),m=a(11),_=n(m),E=a(130);a(443);var g=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={data:e.data},a.renderChart=a.renderChart.bind(a),a}return l(t,e),o(t,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({data:e.data},function(){t.renderChart()})}},{key:"renderChart",value:function(){var e=this.state.data,t=e.tLpft,a="#svg_wrapper_milestones_timeline",n={BLACK:"#000",WHITE:"#FFF"};p.select(a).select(".svg-container").remove();var r=p.select("#svg_wrapper_milestones_timeline_tooltip").select("svg").attr("width"),i=r?Number(r):this.container.getBoundingClientRect().width,l={top:10,right:150,bottom:10,left:50},o=p.select(a),s=o.append("div").classed("svg-container",!0).append("svg").attr("width",i).attr("height",160+l.top+l.bottom).attr("viewBox","0 0 "+(i+l.right+l.left)+" "+(160+l.top+l.bottom)),u=s.append("g").attr("transform","translate("+l.left+","+l.top+")"),d=(0,v.scaleTime)().rangeRound([0,i]);d.domain(e.minMaxDates);var c=(0,E.getMonthsTickValues)(e.minMaxDates[0],e.minMaxDates[1],10),f=(0,h.axisBottom)().scale(d).tickValues(c).tickSizeOuter(0),m=(0,E.getYearsTickValues)(d),g=(0,h.axisBottom)().scale(d).tickValues(m).tickSizeOuter(0),y=u.append("g").attr("class","axis axis--x").attr("transform","translate(0,56)").call(f);y.selectAll("text").attr("class","tick").style("text-anchor","middle").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif",fill:n.BLACK,shapeRendering:"crispEdges",stroke:"none"}).text(function(e){return(0,_.default)(e).format("MMM")}).attr("transform","translate(0, 24)"),y.selectAll("line").attr("class","tick-line").attr("y2","12").attr("transform","translate(0, 0)").st({fill:"none",stroke:n.BLACK,shapeRendering:"crispEdges",strokeWidth:"1px"}),y.selectAll("path").st({fill:"none",stroke:n.BLACK,opacity:0,shapeRendering:"crispEdges"});var S=u.append("g").attr("class","secondary-axis").attr("transform","translate(0,112)").call(g);S.selectAll("text").attr("class","secondary-tick").style("text-anchor","end").text(function(t){var a=(0,_.default)(t);return a.isSame(e.minMaxDates[1])||a.subtract(1,"y"),a.format("YYYY")}).attr("transform","translate(-10, 5)"),S.selectAll("line").attr("y2","31");var b=void 0;S.selectAll(".tick").attr("opacity",function(e){var t=(0,_.default)(e),a=d(t);return b&&a-b<70?0:(b=a,1)});var C=u.append("g").attr("transform","translate("+d(t)+", 60)");C.append("line").attr("x1",0).attr("x2",0).attr("y1",-120).attr("y2",-40).attr("stroke",n.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2"),C.append("circle").style("stroke",n.BLACK).style("stroke-width","2px").style("fill","#000").attr("r",6);var O=C.append("g").classed("point-tooltip",!0).style("display",null).attr("transform","translate(-1, -10)");O.append("polygon").style("fill",n.BLACK).attr("points","0,-40 60,-40 60,-10 10,-10 0,0 0,-40"),O.append("text").attr("text-anchor","middle").style("fill",n.WHITE).classed("tooltip-text",!0).attr("transform","translate(30, -20)").text("T/LPFT")}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{ref:function(t){e.container=t},className:"timeline-svg-wrapper",id:"svg_wrapper_milestones_timeline"})}}]),t}(u.default.Component);g.propTypes={data:c.default.object.isRequired},t.default=g},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(291),h=a(32),v=n(h);a(2163);var m=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleKeyDown=a.handleKeyDown.bind(a),a.popup=document.createElement("div"),a}return l(t,e),s(t,[{key:"componentDidMount",value:function(){document.body.appendChild(this.popup),document.body.classList.add("modal_opened"),document.body.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.popup),document.body.classList.remove("modal_opened"),document.body.removeEventListener("keydown",this.handleKeyDown)}},{key:"handleKeyDown",value:function(e){27===e.keyCode&&this.props.handleClick(e)}},{key:"render",value:function(){var e=this,t={transition:"all 200ms ease-out",opacity:0},a={entering:{opacity:0},entered:{opacity:1}};return v.default.createPortal(d.default.createElement(p.Transition,{in:!0,appear:!0,timeout:0,mountOnEnter:!0},function(n){return d.default.createElement("div",{style:o({},t,a[n]),className:"modal",onClick:function(t){e.props.handleClick&&e.props.handleClick(t)}},d.default.createElement(p.Transition,{in:!0,appear:!0,timeout:200},d.default.createElement("div",{className:"modal__content "+(e.props.modalClass?e.props.modalClass:""),style:o({},t,a[n])},e.props.children)))}),this.popup)}}]),t}(u.Component);t.default=m,m.propTypes={children:f.default.element.isRequired,handleClick:f.default.func,modalClass:f.default.string},m.defaultProps={handleClick:void 0,modalClass:void 0}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(872),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(75),p=n(f),h=a(2),v=n(h),m=a(289),_=n(m),E=a(27),g=n(E),y=a(6);a(2164);var S=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={filter:""},a.handleTagRemove=a.handleTagRemove.bind(a),a.handleClear=a.handleClear.bind(a),a.onFilterChange=a.onFilterChange.bind(a),a.onSuggestionSelect=a.onSuggestionSelect.bind(a),a.handleFocus=a.handleFocus.bind(a),a.handleBlur=a.handleBlur.bind(a),a}return l(t,e),o(t,[{key:"onFilterChange",value:function(e){var t=e.target.value;this.setState({filter:t}),t.length>=2&&this.props.getSuggestions(t)}},{key:"onSuggestionSelect",value:function(e){this.props.onTagAdd(e),this.setState({filter:""})}},{key:"handleClear",value:function(){this.setState({filter:""})}},{key:"handleTagRemove",value:function(e){this.props.onTagRemove(e)}},{key:"handleFocus",value:function(){this.setState({focused:!0})}},{key:"handleBlur",value:function(){0===this.state.filter.length&&this.setState({focused:!1})}},{key:"render",value:function(){var e=this,t=this.state.filter,a=this.props,n=a.suggestions,r=a.tags,i=a.suggestionFieldName,l=a.isForUserSelector,o=r.map(function(t){return u.default.createElement("div",{className:"fpo-multi-select__tag",key:t.id},u.default.createElement("div",{className:"fpo-multi-select__tag-label"},t.name&&t.name.trim().length>0?t.name:"-"),u.default.createElement("div",{className:"fpo-multi-select__tag-remove",onClick:function(){return e.handleTagRemove(t)}},y.Icons.CROSS))}),s=n.filter(function(e){return!r.find(function(t){return t.id===e.id})}),d=l?"Search by country name":"Search by email";return u.default.createElement("div",{className:"fpo-multi-select__container"},u.default.createElement("div",{className:(0,v.default)("fpo-multi-select",{focused:this.state.focused})},!l&&u.default.createElement("span",{className:"fpo-multi-select__inner-label"},"Share with:"),u.default.createElement("div",{className:"fpo-multi-select__tags-wrapper"},o,u.default.createElement("div",{className:"fpo-multi-select__input"},u.default.createElement(g.default,{className:"fpo-multi-select__text-input",placeholder:r.length>0?"":d,value:t,onBlur:this.handleBlur,onFocus:this.handleFocus,autoFocus:this.state.focused,withoutBorder:!0,onChange:this.onFilterChange}),u.default.createElement("div",{className:"fpo-multi-select__clear-input",style:t.length>0?{display:"flex"}:null,onClick:this.handleClear},y.Icons.CROSS))),u.default.createElement("div",{className:"fpo-multi-select__suggestions-wrapper"},t.length>=2&&!!s.length&&u.default.createElement("div",{className:"fpo-multi-select__suggestions"},u.default.createElement(p.default,{style:{maxHeight:120},horizontal:!1},s.map(function(a){return u.default.createElement("div",{key:a.id,className:"fpo-multi-select__suggestions-item",onClick:function(){return e.onSuggestionSelect(a)}},u.default.createElement("div",null,(0,_.default)(a[i],t,function(e,t){return u.default.createElement("span",{key:t},e)})))}))),!!t.length&&t.length<2&&u.default.createElement("div",{className:"fpo-multi-select__message"},"Enter ",2," characters to search..."),t.length>=2&&!s.length&&u.default.createElement("div",{className:"fpo-multi-select__message"},"No results found for ",t))))}}]),t}(s.Component);S.defaultProps={tags:[],suggestions:[],suggestionFieldName:"email",isForUserSelector:!1},S.propTypes={tags:c.default.array,getSuggestions:c.default.func.isRequired,suggestions:c.default.array,onTagAdd:c.default.func.isRequired,onTagRemove:c.default.func.isRequired,suggestionFieldName:c.default.string,isForUserSelector:c.default.bool},t.default=S},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(874),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(65),h=n(p),v=a(2),m=n(v),_=a(14),E=n(_),g=a(6),y=a(167),S=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showMenu:!1},a.toggleMenu=a.toggleMenu.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a}return l(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e,t){return t.showMenu||t.showMenu!==this.state.showMenu}},{key:"toggleMenu",value:function(e){this.setState({showMenu:void 0!==e?e:!this.state.showMenu})}},{key:"handleClickOutside",value:function(e){this.state.showMenu&&e&&!e.target.getAttribute("data-ignore-click-outside")&&this.toggleMenu(!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.isDisabled,n=t.onItemClick,r=this.state.showMenu?{visible:!1}:{};return d.default.createElement(E.default,o({mouseEnterDelay:.3,align:{offset:[-20,0]},overlayClassName:"fpo-sidebar-button__tooltip",placement:"right"},r,{trigger:["hover"],overlay:d.default.createElement("span",null,"Create a new scenario for this study")}),d.default.createElement(E.default,{destroyTooltipOnHide:!0,align:{offset:[5,0]},placement:"bottomLeft",visible:this.state.showMenu,trigger:["click"],overlay:d.default.createElement(y.ContextMenu,null,d.default.createElement(y.ContextMenuItem,{label:"Create scenario","data-ignore-click-outside":!0,icon:d.default.createElement("div",{className:"icon-color-white"},g.Icons.PLUS),onClick:function(){return n()}}),d.default.createElement(y.ContextMenuItem,{label:"Create cohort scenario","data-ignore-click-outside":!0,icon:d.default.createElement("div",{className:"icon-color-white"},g.Icons.PLUS),onClick:function(){return n(!0)}}))},d.default.createElement("div",{className:(0,m.default)("fpo-sidebar__button",{"fpo-sidebar__button_disabled":a}),style:{height:"48px"}},d.default.createElement("div",{className:"fpo-sidebar__content",onClick:function(){return!a&&e.toggleMenu()}},g.Icons.NEW))))}}]),t}(d.default.Component);S.defaultProps={isDisabled:!1},S.propTypes={isDisabled:f.default.bool,onItemClick:f.default.func.isRequired},t.default=d.default.memo((0,h.default)(S))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a(0),p=n(f),h=a(1),v=n(h),m=a(1918),_=n(m),E=a(12),g=n(E),y=a(81),S=n(y),b=a(54),C=n(b),O=a(40),T=n(O),R=a(56),A=n(R),I=a(2),w=n(I),N=a(278),D=n(N);a(2165);var P=a(948),L=n(P),M=a(502),k=n(M),x=a(1010),j=n(x),F=a(501),U=n(F),V=a(505),B=n(V),H=a(500),G=n(H),Y=a(1014),z=n(Y),W=a(504),q=n(W),K=a(1003),X=n(K),Z=a(499),J=n(Z),Q=a(1007),$=n(Q),ee=a(193),te=n(ee),ae=a(503),ne=n(ae),re=a(199),ie=n(re),le=a(507),oe=n(le),se=a(98),ue=n(se),de=a(73),ce=a(20),fe=a(8),pe=a(111),he=n(pe),ve=a(34),me=a(35),_e=a(55),Ee=n(_e),ge={STUDY:1,STUDY_FILTERS:2,SCENARIO:3,STUDY_CONSTRAINTS:4,TARGET_PATIENTS:5,MILESTONES:6,CONSTRAINTS:7,LOCATION:8,COHORTS:9,PATIENT_ALLOCATION:10,SUMMARY:11},ye=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onChangeStudyFilters=function(e){a.setState(d({},a.state,{scenario:d({},a.state.scenario,e),study:d({},a.state.study,e)}))},a.onChangeStudyConstraints=function(e,t){var n=a.state,r=n.studyConstraints,i=n.ownStudyConstraints,o=void 0;if(t){if(o={ownStudyConstraints:i,studyConstraints:d({},r,l({},t,e))},"fp"===t){var s=(0,fe.getMomentDate)(r.target_lpft);s.isBefore(e)&&(o.studyConstraints.target_lpft=(0,fe.getMomentDate)(e).add(1,"day"))}}else o={ownStudyConstraints:!!e};a.setState(o,function(){a.setState(function(e){return d({},e,{steps:e.steps.map(function(t){if(t.id===ge.STUDY_CONSTRAINTS){if(!e.ownStudyConstraints)return d({},t,{status:ie.default.COMPLETE});var a=!0;return Object.keys(e.studyConstraints).forEach(function(t){e.studyConstraints[t]||0===e.studyConstraints[t]||(a=!1)}),a?d({},t,{status:ie.default.COMPLETE}):d({},t,{status:ie.default.INCOMPLETE})}return t})})})})},a.onKeyUp=a.onKeyUp.bind(a),a.navigateHandler=a.navigateHandler.bind(a),a.closeStepperHandler=a.closeStepperHandler.bind(a),a.onScrollHandler=(0,D.default)(a.onScrollHandler.bind(a),100),a.onValidationChange=a.onValidationChange.bind(a),a.onChangeDetails=a.onChangeDetails.bind(a),a.onChangeTargetPatients=a.onChangeTargetPatients.bind(a),a.onChangeMilestones=a.onChangeMilestones.bind(a),a.onChangePatientAllocation=a.onChangePatientAllocation.bind(a),a.onChangeStudyDetails=a.onChangeStudyDetails.bind(a),a.onChangeConstraints=a.onChangeConstraints.bind(a),a.onSubmitHandle=a.onSubmitHandle.bind(a),a.onChangeRegionsCountries=a.onChangeRegionsCountries.bind(a),a.onChangeCohort=a.onChangeCohort.bind(a),a.onAddCohort=a.onAddCohort.bind(a),a.onRemoveCohort=a.onRemoveCohort.bind(a);var n={include:[],exclude:[],initialIncludedRegionsCountries:e.regionsCountries,initialExcludedRegionsCountries:e.regionsCountries,disabledIncludedCountries:[],disabledExcludedCountries:[]},r=e.dirtyData;if(r){if(r.scenario&&e.regionsCountries){var i=e.regionsCountries.map(function(e){var t=e.countries.map(function(e){return d({},e,{platform_country_id:e.id})});return d({},e,{countries:t})});n.initialIncludedRegionsCountries=(0,T.default)(i),n.initialExcludedRegionsCountries=(0,T.default)(i),r.scenario.includeCountries&&r.scenario.includeCountries.forEach(function(e){e.countries.forEach(function(t){var a=n.initialIncludedRegionsCountries.find(function(t){return t.name===e.name});1===a.countries.length||a.countries.find(function(e){return"Unspecified country"===e.name})||(a.countries=[(0,fe.createUnspecifiedCountry)(a.id)].concat(a.countries));var r=a.countries.find(function(e){return e.name===t.name});r&&(r.isSelected=!0)})}),r.scenario.excludeCountries&&r.scenario.excludeCountries.forEach(function(e){e.countries.forEach(function(t){var a=n.initialExcludedRegionsCountries.find(function(t){return t.name===e.name});1===a.countries.length||a.countries.find(function(e){return"Unspecified country"===e.name})||(a.countries=[(0,fe.createUnspecifiedCountry)(a.id)].concat(a.countries));var r=a.countries.find(function(e){return e.name===t.name});r&&(r.isSelected=!0)})})}r.study.fp=(0,fe.getMomentDate)(r.study.fp),r.study.target_lpft=(0,fe.getMomentDate)(r.study.target_lpft),r=d({submitted:!1},r,n,{step:e.newStudy?1:2})}return a.state=r||d({},n,{steps:t.getInitialSteps(e.study.is_imported,e.newStudy,e.showCohorts).map(function(t){return t.id===ge.STUDY&&e.newStudy?d({},t,{status:ie.default.INCOMPLETE}):t.id===ge.SCENARIO&&e.newStudy?d({},t,{status:ie.default.INCOMPLETE}):t}),step:e.newStudy?ge.STUDY:ge.SCENARIO,regionCountrySelectorMode:oe.default.COUNTRIES,scenario:{cohorts:[{id:se.INITIAL_COHORT_ID,name:"Cohort 1",locations:[],trigger:{trigger_type:ue.default.MILESTONES,start_date:null,num_patients:null,num_patients_abs:!0,start_milestone:se.TRIGGER_START_MILESTONES.GLOBAL_FP,source_cohort_id:null}}]},study:{id:a.props.studyId,study_id:e.study.study_id||""},patientAllocationValues:{},updateFp:!e.study.fp,defaultScenarioName:a.getDefaultScenarioName(),end_date:e.study&&e.study.target_lpft?(0,fe.getMomentDate)(e.study.target_lpft):null,fp:e.study&&e.study.fp?(0,fe.getMomentDate)(e.study.fp):null,existingScenariosNames:(e.study&&e.study.scenarios?e.study.scenarios:[]).map(function(e){return e.name}),ownStudyConstraints:!1,studyConstraints:{target_num_patients:e.study.target_num_patients,fp:e.study.fp,target_lpft:e.study.target_lpft,fpfv_fpft:e.study.fpfv_fpft,indication:e.study.indication,therapeutic_area:e.study.therapeutic_area}}),a.wizardRef=void 0,a.ieBrowser=Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject,a}return u(t,e),c(t,null,[{key:"getInitialSteps",value:function(e,t,a){return[{id:ge.STUDY,title:"Study details",status:ie.default.COMPLETE,hide:!t},{id:ge.STUDY_FILTERS,title:"Study filters",status:ie.default.COMPLETE,hide:!t},{id:ge.SCENARIO,title:"Scenario details",status:ie.default.COMPLETE},{id:ge.STUDY_CONSTRAINTS,title:"Study constraints",status:ie.default.COMPLETE,hide:t},{id:ge.TARGET_PATIENTS,title:"Target patients",status:ie.default.INCOMPLETE,hide:e||!t},{id:ge.MILESTONES,title:"Milestones",status:ie.default.INCOMPLETE,hide:e||!t},{id:ge.CONSTRAINTS,title:"Country and Regional considerations",status:ie.default.INCOMPLETE,hide:a},{id:ge.LOCATION,title:"Locations",status:ie.default.INCOMPLETE,hide:a},{id:ge.COHORTS,title:"Cohorts",status:ie.default.INCOMPLETE,hide:!a},{id:ge.PATIENT_ALLOCATION,title:"Patient allocation",status:ie.default.INCOMPLETE,hide:a},{id:ge.SUMMARY,title:"Summary scenario inputs",status:ie.default.INCOMPLETE}]}}]),c(t,[{key:"componentDidMount",value:function(){var e=!!(0,ve.isSupportPassive)()&&{passive:!0};this.wizardRef.scrollTop=0,this.wizardRef.addEventListener("scroll",this.onScrollHandler,e),document.body.classList.add("new-scenario-wizard-page"),document.addEventListener("keyup",this.onKeyUp,!0)}},{key:"componentWillReceiveProps",value:function(e){var t=e.activeUser,a=e.requirePageRefresh,n=(0,Ee.default)(t,e.study);if(e.study&&e.study.is_imported&&!n.userCanCreateNewPlannedScenario||(e.newStudy||e.study&&!e.study.is_imported)&&!n.userCanCreateNewPlayGroundScenario)return this.setState({forbidden:!0}),this.closeStepperHandler(),void this.props.forbiddenError(de.DONT_HAVE_ACCESS_TO_VIEW_PAGE);a&&t&&((0,me.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"-"+this.props.studyId+"-new"),(0,me.addToStorage)("fpo-dirty-data",{id:t.id+"-"+e.studyId+"-new",values:d({},this.state,{submitted:!1})}))}},{key:"componentWillUnmount",value:function(){this.wizardRef.onscroll=void 0,document.body.classList.remove("new-scenario-wizard-page"),document.removeEventListener("keyup",this.onKeyUp,!0)}},{key:"onKeyUp",value:function(e){var t=this.state.step;if("Enter"===e.key&&this.stepIsValid(t)){var a=e.target.classList;if(a.contains("date-picker-control")&&(a.contains("month-input")||a.contains("year-input")))return;if(e.target.closest(".fpo-text-area-container"))return;e.stopPropagation(),this.navigateHandler(t+1)}}},{key:"onChangeDetails",value:function(e){this.setState(d({},this.state,{scenario:d({},this.state.scenario,e)}))}},{key:"onChangeStudyDetails",value:function(e){var t=e.name,a=i(e,["name"]);this.setState(function(e){return d({},e,{scenario:d({},e.scenario,{name:t}),study:d({},e.study,a)})})}},{key:"onChangeTargetPatients",value:function(e){this.setState(d({},this.state,{scenario:d({},this.state.scenario,e),study:d({},this.state.study,e)}))}},{key:"onChangeMilestones",value:function(e){var t=d({},e),a=t.fp,n=t.end_date,r=t.fpfv_fpft;this.setState(d({},this.state,{scenario:d({},this.state.scenario,e),study:d({},this.state.study,{fp:a||null,target_lpft:n||null,fpfv_fpft:r||null})}))}},{key:"onChangeRegionsCountries",value:function(e,t){var a=this.state.scenario,n=e.map(function(e){return d({},e,{countries:e.countries.map(function(t){var n=null,r=null,i=null;if(a.includeCountries){var l=a.includeCountries.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});if(l){var o=l.countries.find(function(e){return e.name.toLowerCase()===t.name.toLowerCase()});o&&(n=o.patients_min,r=o.patients,i=o.patients_max)}}return d({},t,{uniqid:e.id+"_"+t.id,patients_min:n,patients:r,patients_max:i})})})});a="Include"===t?d({},this.state.scenario,{includeCountries:n}):d({},this.state.scenario,{excludeCountries:n}),this.setState({scenario:a})}},{key:"onChangeConstraints",value:function(e){var t=this,a=this.state.scenario,n=a;n.createConstraints=!!e,e||(n=(0,S.default)(a,"countries")),this.setState({createConstraints:!!e,scenario:n},function(){t.setState(function(t){return d({},t,{steps:t.steps.map(function(t){if(t.id===ge.CONSTRAINTS){var a=ie.default.COMPLETE;return d({},t,{status:a})}return t.id===ge.LOCATION?d({},t,{hide:!e}):t.id===ge.PATIENT_ALLOCATION?d({},t,{hide:!e}):t})})})})}},{key:"onChangeCohort",value:function(e,t,a,n,r){var i=this.state.scenario;i.cohorts=i.cohorts.map(function(i){var l=i;return l.id===e&&(n?l[n][t]=a:"locations"!==t||r?l[t]=a:l.locations=a.map(function(e){var t=e.countries.map(function(t){var a=null,n=null,r=l.locations.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});if(r){var i=r.countries.find(function(e){return e.name.toLowerCase()===t.name.toLowerCase()});i&&(a=i.patients,n=i.sites)}return d({},t,{patients:a,sites:n})});return d({},e,{countries:t})})),l});var l=(0,he.default)(i),o=this.state.steps.map(function(e){return e.id===ge.COHORTS&&(e.status=l?ie.default.COMPLETE:ie.default.ERROR),e});this.setState({scenario:i,steps:o})}},{key:"onAddCohort",value:function(){var e=this.state.scenario,t={id:A.default.generate(),name:"Cohort "+(e.cohorts.length+1),locations:[],trigger:{trigger_type:ue.default.MILESTONES,start_date:null,num_patients:null,num_patients_abs:!0,start_milestone:null,source_cohort_id:null}};e.cohorts=[].concat(r(e.cohorts),[t]);var a=(0,he.default)(e),n=this.state.steps.map(function(e){return e.id===ge.COHORTS&&(e.status=a?ie.default.COMPLETE:ie.default.ERROR),e});this.setState({scenario:e,steps:n})}},{key:"onRemoveCohort",value:function(e){var t=this.state.scenario;t.cohorts=t.cohorts.filter(function(t){return t.id!==e});var a=(0,he.default)(t),n=this.state.steps.map(function(e){return e.id===ge.COHORTS&&(e.status=a?ie.default.COMPLETE:ie.default.ERROR),e});this.setState({scenario:t,steps:n})}},{key:"onSubmitHandle",value:function(){var e=this,t=this.state.scenario,a=t.includeCountries,n=t.excludeCountries,r=this.state,i=r.createConstraints,l=r.defaultScenarioName,o=r.ownStudyConstraints,s=r.studyConstraints,u=[];void 0!==i&&i&&(a&&a.forEach(function(e){var t=e.countries.map(function(e){return d({},e,{constraint:"INCLUDE"})}),a=u.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});a?a.countries=a.countries.concat(t):u.push(d({},e,{countries:t}))}),n&&n.forEach(function(e){var t=e.countries.map(function(e){return d({},e,{constraint:"EXCLUDE"})}),a=u.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});a?a.countries=a.countries.concat(t):u.push(d({},e,{countries:t}))}));var c=(0,S.default)(this.state.scenario,"includeCountries","excludeCountries","fpfv_fpft");c.name=c.name?c.name:l,c.locations=u,this.props.showCohorts||(c=(0,S.default)(c,"cohorts")),o&&(c=d({},c,s,{ownStudyConstraints:o})),this.setState({submitted:!0},function(){(0,me.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-new");var t=e.props.onSubmit(e.state.study,c,e.state.updateFp);t&&t.catch(function(){e.setState({submitted:!1})})})}},{key:"onChangePatientAllocation",value:function(e,t,a){var n=this.state.scenario,r=/^[1-9]\d*$/,i=!0;if(!r.test(a)&&0!==a.length)return void this.forceUpdate();n.includeCountries.forEach(function(r,l){return r.countries.forEach(function(r,o){r.id===e&&(n.includeCountries[l].countries[o][t]=parseInt(a,10),r.patients?(r.patients_min>r.patients||r.patients_max&&r.patients_max<r.patients)&&(i=!1):r.patients_max&&r.patients_max<r.patients_min&&(i=!1))})});var l=this.state.steps.map(function(e){return e.id===ge.PATIENT_ALLOCATION&&(e.status=i?ie.default.COMPLETE:ie.default.ERROR),e});this.setState({scenario:n,steps:l})}},{key:"onValidationChange",value:function(e,t,a){this.setState(function(n){return d({},n,{steps:n.steps.map(function(n){if(n.id===e){var r=ie.default.INCOMPLETE;return t?r=ie.default.COMPLETE:!t&&a&&(r=ie.default.ERROR),d({},n,{status:r})}return n})})})}},{key:"onScrollHandler",value:function(){var e=this,t=function(){for(var t=void 0,a=0;!t&&a<e.state.steps.length;)e.state.steps[a].status===ie.default.COMPLETE||e.state.steps[a].hide||(t=a+1),a+=1;return t}(),a=this["anchor"+(t+1)];a.getBoundingClientRect().top<this.wizardRef.clientHeight-150&&(this.ieBrowser?this.wizardRef.scrollTop=a.offsetParent.offsetTop-(this.wizardRef.clientHeight-150):this.wizardRef.scrollTop=a.offsetTop-(this.wizardRef.clientHeight-150));var n=Math.floor(this.wizardRef.scrollTop),r=this.wizardRef.clientHeight-150+n,i=this.state.steps.length+1;if(this.ieBrowser)for(;r<=this["anchor"+i].offsetParent.offsetTop;)i-=1;else for(;r<=this["anchor"+i].offsetTop;)i-=1;this.state.step!==i&&this.setState(d({},this.state,{step:i}))}},{key:"getDefaultScenarioName",value:function(){var e=this.props.study,t=e.scenarios?e.scenarios.length:0,a=e.archivedCount||0,n=t+a+1;return n<10?n="00"+n:n<100&&(n="0"+n),"Scenario "+n}},{key:"closeStepperHandler",value:function(){this.props.onClose(this.props.studyId)}},{key:"navigateHandler",value:function(e){var t=void 0;t=this.ieBrowser?this["anchor"+e].offsetParent.offsetTop:this["anchor"+e].offsetTop,_.default.animateScroll.scrollTo(t-80,{containerId:"new-scenario-wizard"})}},{key:"stepIsValid",value:function(e){var t=this.state.steps.find(function(t){return t.id===e});return t.status===ie.default.COMPLETE||t.hide}},{key:"tabNavigateForward",value:function(e){1!==e&&this.stepIsValid(e-1)&&this.navigateHandler(e)}},{key:"regionCountrySelectorModeHandler",value:function(e){this.setState({regionCountrySelectorMode:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.step,n=t.createConstraints,r=t.scenario,i=t.ownStudyConstraints,l=t.studyConstraints,o=t.initialIncludedRegionsCountries,s=t.initialExcludedRegionsCountries,u=this.props,d=u.study,c=u.regionsCountries,f=u.showCohorts,h=u.newStudy,v=p.default.createElement("div",{style:{height:"0px"}});return p.default.createElement("div",{className:"new-scenario-wizard",style:{overflowY:"auto"},ref:function(t){e.wizardRef=t},id:"new-scenario-wizard"},p.default.createElement("div",{className:"fpo-grid"},p.default.createElement("div",{className:"fpo-row",style:{height:"80px"}},p.default.createElement("div",{className:(0,w.default)("fpo-col-1",{"fpo-col-offset-9":!f,"fpo-col-offset-10":f}),style:{backgroundColor:"rgba(0, 139, 139, 0.19)",color:"black"}},p.default.createElement(L.default,{navigate:this.navigateHandler,onCloseClick:this.closeStepperHandler,activeStep:this.state.step,steps:this.state.steps}))),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor1=t}}))),h?p.default.createElement(z.default,{onChange:this.onChangeStudyDetails,onValidationChange:function(t,a){return e.onValidationChange(ge.STUDY,t,a)},activeStep:a===ge.STUDY,onTabNavigate:function(){return e.tabNavigateForward(ge.STUDY_FILTERS)},availableTherapeuticAreas:this.props.availableTherapeuticAreas,availableIndications:this.props.availableIndications,selectedTa:this.state.study.therapeutic_area,showCohorts:f,study:this.state.study,initialValues:{therapeutic_area:this.state.study.therapeutic_area,indication:this.state.study.indication,study_id:this.state.study.study_id,description:this.state.study.description||""}}):v,p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor2=t}}))),h?p.default.createElement(q.default,{onChange:this.onChangeStudyFilters,onValidationChange:function(t,a){return e.onValidationChange(ge.STUDY_FILTERS,t,a)},activeStep:a===ge.STUDY_FILTERS,onTabNavigate:function(){return e.tabNavigateForward(ge.SCENARIO)},showCohorts:f,study:this.state.study,initialValues:(0,C.default)(this.state.study,ce.STUDY_FILTERS)}):v,p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor3=t}}))),p.default.createElement(k.default,{onChange:this.onChangeDetails,onValidationChange:function(t,a){return e.onValidationChange(ge.SCENARIO,t,a)},studyDescription:h?(0,g.default)(this.state.study,"description"):d.description,studyIndication:h?(0,g.default)(this.state.study,"indication.label"):d.indication,activeStep:a===ge.SCENARIO,onTabNavigate:function(){return e.tabNavigateForward(ge.TARGET_PATIENTS)},studyNumId:h?(0,g.default)(this.state.study,"id"):d.id,studyId:h?(0,g.default)(this.state.study,"study_id"):d.study_id,studyTa:h?(0,g.default)(this.state.study,"therapeutic_area.label"):d.therapeutic_area,existingScenariosNames:this.state.existingScenariosNames,isNewStudy:h,showCohorts:f,initialValues:{name:this.state.scenario.name||this.state.defaultScenarioName}}),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor4=t}}))),h?v:p.default.createElement(ne.default,{status:(0,g.default)(this.state.steps.find(function(e){return e.id===ge.STUDY_CONSTRAINTS}),"status")===ie.default.COMPLETE,activeStep:a===ge.STUDY_CONSTRAINTS,ownStudyConstraints:i,showCohorts:f,values:l,validationChangeHandler:function(t,a){e.onValidationChange(ge.STUDY_CONSTRAINTS,a,!0)},onChange:this.onChangeStudyConstraints}),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor5=t}}))),h?p.default.createElement(B.default,{onChange:this.onChangeTargetPatients,activeStep:a===ge.TARGET_PATIENTS,onTabNavigate:function(){return e.tabNavigateForward(ge.MILESTONES)},initialValues:{target_num_patients:d.target_num_patients||this.state.study.target_num_patients},showCohorts:f,onValidationChange:function(t,a){return e.onValidationChange(ge.TARGET_PATIENTS,t,a)}}):v,p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor6=t}}))),h?p.default.createElement(U.default,{onTabNavigate:function(){return e.tabNavigateForward(ge.CONSTRAINTS)},onChange:this.onChangeMilestones,onValidationChange:function(t,a){return e.onValidationChange(ge.MILESTONES,t,a)},activeStep:a===ge.MILESTONES,disabled:!this.props.newStudy&&!this.state.updateFp,showCohorts:f,initialValues:{end_date:this.state.end_date||(0,fe.getMomentDate)(this.state.study.target_lpft),fp:this.state.fp||(0,fe.getMomentDate)(this.state.study.fp),fpfv_fpft:this.state.study.fpfv_fpft}}):v,p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor7=t}}))),f?v:p.default.createElement(X.default,{onChange:this.onChangeConstraints,createConstraints:n,activeStep:a===ge.CONSTRAINTS}),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{tabIndex:-1,ref:function(t){e.anchor8=t}}))),0===c.length||f||void 0!==n&&!n?v:p.default.createElement(G.default,{includedRegionsCountries:o,excludedRegionsCountries:s,includeCountries:r.includeCountries,excludeCountries:r.excludeCountries,onTabNavigate:function(){return e.tabNavigateForward(ge.PATIENT_ALLOCATION)},activeStep:a===ge.LOCATION,showCohorts:f,valid:r.includeCountries&&r.includeCountries.length>0||r.excludeCountries&&r.excludeCountries.length>0,onChange:this.onChangeRegionsCountries,onValidationChange:function(t,a){e.onValidationChange(ge.LOCATION,t,a),e.onValidationChange(ge.PATIENT_ALLOCATION,t,a)}}),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor9=t}}))),f?p.default.createElement(J.default,{cohorts:r.cohorts,onAdd:this.onAddCohort,onRemove:this.onRemoveCohort,onUpdate:this.onChangeCohort,locations:c,study:h?this.state.study:d,isDisabled:a!==ge.COHORTS,activeStep:a===ge.COHORTS}):v,p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor10=t}}))),f||void 0!==n&&!n?v:p.default.createElement($.default,{newScenario:!0,activeStep:a===ge.PATIENT_ALLOCATION,onUpdate:this.onChangePatientAllocation,study:d,locations:r.includeCountries}),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor11=t}}))),p.default.createElement(j.default,{disableSubmit:this.state.submitted,activeStep:a===ge.SUMMARY,dataStudyId:this.props.newStudy?this.state.study.study_id:d.study_id,dataScenarioName:r.name||this.state.defaultScenarioName,dataTargetPatients:this.state.study.target_num_patients||d.target_num_patients,dataFpp:(0,fe.getMomentDate)(r.fp),dataFpfvFpft:r.fpfv_fpft,dataTargetLpft:(0,fe.getMomentDate)(r.end_date),createConstraints:r.createConstraints,includeCountries:r.includeCountries,excludeCountries:r.excludeCountries,onSubmitClick:this.onSubmitHandle,mode:this.state.regionCountrySelectorMode,showCohorts:f,cohorts:r.cohorts,isNewStudy:h,isNewScenario:!0}),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor12=t}}))),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col",style:{height:"150px"}}))),p.default.createElement(te.default,{removeStoredData:this.props.activeUser.id+"-"+this.props.studyId+"-new",hasUnsaved:!this.state.submitted&&!this.props.requirePageRefresh&&!this.state.forbidden}))}}]),t}(f.Component);ye.propTypes={availableTherapeuticAreas:v.default.array,availableIndications:v.default.array,newStudy:v.default.bool,onClose:v.default.func.isRequired,onSubmit:v.default.func.isRequired,regionsCountries:v.default.array.isRequired,study:v.default.object.isRequired,studyId:v.default.number.isRequired,showCohorts:v.default.bool,activeUser:v.default.object.isRequired,requirePageRefresh:v.default.bool,dirtyData:v.default.object,forbiddenError:v.default.func.isRequired},ye.defaultProps={availableTherapeuticAreas:[],availableIndications:[],newStudy:!1,showCohorts:!1,requirePageRefresh:!1,dirtyData:null},t.default=ye},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),h=a(65),v=n(h),m=a(75),_=n(m),E=a(61),g=n(E);a(2166);var y=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={focused:!1,note:""},a.handleFocus=a.handleFocus.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a.handleCancel=a.handleCancel.bind(a),a.handleChange=a.handleChange.bind(a),a.handleAddNote=a.handleAddNote.bind(a),a}return l(t,e),o(t,[{key:"handleFocus",value:function(){var e=this;this.setState({focused:!0},function(){e.textarea.focus()})}},{key:"handleClickOutside",value:function(){this.state.focused&&this.setState({focused:!1})}},{key:"handleCancel",value:function(){this.setState({focused:!1,note:""})}},{key:"handleChange",value:function(e){this.setState({note:e.target.value})}},{key:"handleAddNote",value:function(){var e=this,t={text:this.state.note};this.props.onSubmit(this.props.scenarioId,t).then(function(){e.handleCancel()})}},{key:"render",value:function(){var e=this,t=this.state,a=t.note,n=t.focused,r=(0,p.default)("fpo-notes-input__textarea-wrapper",{focused:!!n}),i=(0,p.default)("fpo-notes-input__buttons-wrapper",{focused:!!n}),l=(0,p.default)("fpo-notes-input__scroll-area","input-scrolled"),o=(0,p.default)("fpo-notes-input__textarea","input-scrolled");return u.default.createElement("div",{className:"fpo-notes-input__container"},u.default.createElement("div",{onClick:this.handleFocus,className:r},u.default.createElement(_.default,{className:l,style:{maxHeight:n?132:56},horizontal:!1,stopScrollPropagation:!0},u.default.createElement("textarea",{onKeyDown:function(e){return e.stopPropagation()},onChange:this.handleChange,placeholder:"Add note here",onWheel:function(e){e.stopPropagation(),e.preventDefault()},value:a,ref:function(t){e.textarea=t},className:o}))),u.default.createElement("div",{className:i},u.default.createElement(g.default,{className:"no-border",label:"Cancel",disabled:0===a.length,onClick:this.handleCancel}),u.default.createElement(g.default,{type:"primary",label:"Add note",disabled:0===a.length,onClick:this.handleAddNote})))}}]),t}(u.default.PureComponent);y.propTypes={onSubmit:c.default.func.isRequired,scenarioId:c.default.oneOfType([c.default.string,c.default.number]).isRequired},t.default=(0,v.default)(y)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(878),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.OptimiseScenarioDialog=void 0;var r=a(0),i=n(r),l=a(1),o=n(l),s=a(39),u=a(6),d=a(73);a(2168);var c=function(e){var t=e.isShown,a=e.scenarioName,n=e.onClose,r=e.onSubmit;return i.default.createElement(s.PopupDialog,{titleIcon:u.Icons.OPTIMISE,title:"Optimize",scenarioName:a,className:"optimise-scenario-dialog",isShown:t,handleClose:n,buttons:[i.default.createElement(s.ActionButton,{className:"optimise-scenario-dialog__button-cancel",action:n},d.CANCEL),i.default.createElement(s.ActionButton,{action:r,primary:!0},d.OPTIMIZE)]},i.default.createElement("div",{className:"optimise-content"},d.OPTIMIZE_WARNING),i.default.createElement("br",null),i.default.createElement("div",{className:"optimise-content"},"The optimization could take a while!"))};c.defaultProps={isShown:!1,onClose:void 0},c.propTypes={isShown:o.default.bool,scenarioName:o.default.string.isRequired,onClose:o.default.func,onSubmit:o.default.func.isRequired},t.OptimiseScenarioDialog=c,t.default=i.default.memo(c)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(484),c=n(d),f=a(118),p=function(e){var t,a;return a=t=function(t){function a(){return r(this,a),i(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return l(a,t),o(a,[{key:"render",value:function(){return this.context.isOptimizing?u.default.createElement(c.default,null):u.default.createElement(e,this.props)}}]),a}(u.default.Component),t.contextType=f.ChartDataContext,a};t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(8),p=a(14),h=n(p),v=a(10),m=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.createdAt,a=e.value,n=e.originScenarioName,r=e.originScenarioStatus,i=e.originIsAdjusted,l=e.originStudyName,o=e.title,d=e.exactCopy,c=e.isAdjusted,p=e.status,m=t?(0,f.formatDate)((0,f.getMomentDate)(t)):"n/a",_=u.default.createElement("span",null,u.default.createElement("span",null,"New scenario. ",u.default.createElement("br",null),"Created at"),u.default.createElement("span",null," ",m)),E=null;return d?E="as exact copy of ":(c||p===v.SCENARIO_STATUS.APPROVED||p===v.SCENARIO_STATUS.PREV_APPROVED)&&(E="as adjusted copy of "),null!==n&&(_=null!==l?u.default.createElement("span",null,u.default.createElement("span",null,"Duplicated ",E||"from "," ",r.toLowerCase()," "),u.default.createElement("br",null),n&&l&&u.default.createElement(s.Fragment,null,u.default.createElement("span",null,'"'+l+'"'," - ",'"'+n+'"'),u.default.createElement("br",null)),u.default.createElement("span",null,"at ",m)):u.default.createElement("span",null,u.default.createElement("span",null,"Duplicated ",E||"from ",r.toLowerCase()," ",i?"adjusted":""," plan"),u.default.createElement("br",null),u.default.createElement("span",null,'"'+n+'"'),u.default.createElement("br",null),u.default.createElement("span",null,"at ",m))),o&&(_=u.default.createElement("span",null,u.default.createElement("span",null,o),u.default.createElement("br",null),_)),u.default.createElement(h.default,{mouseEnterDelay:.7,placement:"bottom",overlay:_},u.default.createElement("span",null,a))}}]),t}(u.default.PureComponent);m.defaultProps={createdAt:null,value:"",originScenarioName:null,originScenarioStatus:"OPEN",originIsAdjusted:!1,originStudyName:null,title:null,exactCopy:!1,isAdjusted:!1,status:null},m.propTypes={createdAt:c.default.object,value:c.default.string,originScenarioName:c.default.string,originScenarioStatus:c.default.string,originIsAdjusted:c.default.bool,originStudyName:c.default.string,title:c.default.string,exactCopy:c.default.bool,isAdjusted:c.default.bool,status:c.default.string},t.default=m},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(17),p=a(132),h=n(p),v=a(486),m=n(v),_=a(83),E=n(_),g=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.isRegionCountry,n=e.overallocation,r=e.location,i=e.originalLpft,l=e.topOffset;return u.default.createElement(E.default,{style:{top:l+"px",zIndex:4}},u.default.createElement("div",{className:"alerts-container"},u.default.createElement(f.Grid,null,u.default.createElement(f.Row,null,u.default.createElement(f.Col,{offset:1,width:11},u.default.createElement(h.default,{isShown:!0,title:"",status:"info",className:"overallocation-alert"},u.default.createElement(m.default,{isAggregatedRowSelected:"country"!==t&&!a,numberOfPatients:n,countryName:r,originalLpft:i})))))))}}]),t}(u.default.PureComponent);g.defaultProps={type:"",isRegionCountry:!1,overallocation:0,location:"",originalLpft:null,topOffset:0},g.propTypes={type:c.default.string,isRegionCountry:c.default.bool,overallocation:c.default.number,location:c.default.string,originalLpft:c.default.object,topOffset:c.default.number},t.default=g},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(6),u=a(8);a(2170);var d=function(e){var t=e.isAggregatedRowSelected,a=e.countryName,n=e.numberOfPatients,r=e.originalLpft,l=r?(0,u.getMomentDate)(r).format("DD MMM YY"):"-",o="",d="";return t?(o="FPO forecasts suggests re-allocation from countries forecasted to be delayed to those \n      that are likely to have capacity (orig. F/LPFT: "+l+")",d=s.Icons.PATIENTS_GENERAL):n>0?(o=a+" seems likely to have capacity (orig. F/LPFT: "+l+"). \n      FPO suggests re-allocation of "+Math.abs(n)+" \n      patients to "+a+" to minimize delays",d=s.Icons.PATIENTS_OVER_ALLOCATION):(o=a+" is forecasted to be delayed (orig. F/LPFT: "+l+"). \n      FPO suggests re-allocation of "+Math.abs(n)+" \n      patients to other countries to minimize delays",d=s.Icons.PATIENTS_UNDER_ALLOCATION),i.default.createElement("div",{className:"overallocation-message-bar"},i.default.createElement("span",{className:"message-icon"},d),i.default.createElement("span",{className:"message"},o))};d.defaultProps={isAggregatedRowSelected:!0,countryName:"",numberOfPatients:"",originalLpft:null},d.propTypes={isAggregatedRowSelected:o.default.bool,countryName:o.default.string,numberOfPatients:o.default.oneOfType([o.default.string,o.default.number]),originalLpft:o.default.object},t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(884),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),h=a(75),v=n(h),m=a(40),_=n(m),E=a(117),g=n(E),y=a(82),S=n(y),b=a(27),C=n(b),O=a(6);a(2171);var T=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={open:!1,locations:e.cohort.locations,optionsMaxHeight:520},a.handleControlClick=a.handleControlClick.bind(a),a.handleOutsideClick=a.handleOutsideClick.bind(a),a.handleValueChange=a.handleValueChange.bind(a),a}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.cohort.locations,a=this.calculateOptionsHeight();this.setState({locations:t,optionsMaxHeight:a,open:(!e.isDisabled||!this.state.open)&&this.state.open})}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.handleOutsideClick)}},{key:"handleOutsideClick",value:function(e){!this.dropdown.contains(e.target)&&this.state.open&&(this.setState({open:!1}),document.removeEventListener("click",this.handleOutsideClick))}},{key:"handleControlClick",value:function(){var e=this.state,t=e.open,a=e.optionsMaxHeight,n=a;t?document.body.removeEventListener("click",this.handleOutsideClick):(document.body.addEventListener("click",this.handleOutsideClick),n=this.calculateOptionsHeight()),this.setState({open:!t,optionsMaxHeight:n})}},{key:"handleValueChange",value:function(e,t,a){var n=(0,_.default)(this.state.locations),r=this.props.cohort;n.forEach(function(r,i){return r.countries.forEach(function(r,l){r.id===e&&(n[i].countries[l][t]=parseFloat(a))})}),this.setState({locations:n}),this.props.onUpdate(r.id,"locations",n,null,!0)}},{key:"calculateOptionsHeight",value:function(){if(this.dropdown){var e=this.dropdown.getBoundingClientRect(),t=e.height,a=e.top;return window.innerHeight-(t+a+46)}return this.state.optionsMaxHeight}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.locations,r=t.optionsMaxHeight,i=this.props,l=i.isDisabled,o=i.status,s=(0,p.default)("patients-allocation-dropdown",{"patients-allocation-dropdown__open":a}),d=(0,p.default)("patients-allocation-dropdown__control",{error:"error"===o}),c=0,f=0,h=!1,m=!1;return n.forEach(function(e){return e.countries.forEach(function(e){var t=e.patients,a=e.sites;t?c+=t:h||(h=!0),a?f+=a:m||(m=!0)})}),u.default.createElement("div",{className:s,ref:function(t){e.dropdown=t}},u.default.createElement("div",{className:"patients-allocation-dropdown__label"},"Patients & Sites Allocation"),u.default.createElement("div",{className:d,onClick:l?void 0:this.handleControlClick},u.default.createElement("div",null,u.default.createElement("span",{className:(0,p.default)("patients-sum",{error:h&&n.length>0})},c||"-"),u.default.createElement("span",{className:"control-icon"},O.Icons.VISITORS)),u.default.createElement(S.default,null),u.default.createElement("div",null,u.default.createElement("span",{className:(0,p.default)("sites-sum",{error:m&&n.length>0})},f||"-"),u.default.createElement("span",{className:"control-icon"},O.Icons.SITES))),u.default.createElement("div",{className:"patients-allocation-dropdown__options"},u.default.createElement(v.default,{horizontal:!1,stopScrollPropagation:!0,style:{maxHeight:r+"px"}},n.map(function(t){return u.default.createElement("div",{className:"options-region",key:t.id+"_"+t.name},!t.isCountryRegion&&u.default.createElement("span",{className:"options-region__name"},t.name),t.countries.map(function(a){return u.default.createElement("div",{className:"options-country",key:a.id+"_"+a.name},u.default.createElement("span",{className:(0,p.default)("options-country__name",{"region-name":t.isCountryRegion})},t.isCountryRegion?t.name:a.name),u.default.createElement("div",{className:"options-country__values"},u.default.createElement(C.default,{disabled:l,validators:[function(e){return""===e||g.default.isInt(e,{min:1,max:1e6})}],status:a.patients&&""!==a.patients?null:"error",onBlur:function(t,n){var r=n.value;return e.handleValueChange(a.id,"patients",r.replace(/^0+/,""))},value:a.patients||""}),u.default.createElement(C.default,{disabled:l,validators:[function(e){return""===e||g.default.isInt(e,{min:1,max:1e4})}],status:a.sites&&""!==a.sites?null:"error",onBlur:function(t,n){var r=n.value;return e.handleValueChange(a.id,"sites",r.replace(/^0+/,""))},value:a.sites||""})))}))}))))}}]),t}(s.PureComponent);T.defaultProps={isDisabled:!1,status:null},T.propTypes={cohort:c.default.object.isRequired,onUpdate:c.default.func.isRequired,isDisabled:c.default.bool,status:c.default.oneOf(["success","error"])},t.default=T},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(886),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l);a(2172);var s=function(e){var t=e.title,a=e.children;return i.default.createElement("div",{className:"placeholder__container"},i.default.createElement("h3",null,t),i.default.createElement("div",null,a))};s.propTypes={children:o.default.node,title:o.default.string},s.defaultProps={children:null,title:"Placeholder"},t.default=s},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(6),c=a(15),f=a(14),p=n(f),h=a(64),v=n(h),m=a(851),_=n(m),E=a(323),g=function(e){var t=e.scenarioData,a=e.rowIndex,n=e.isMultiEditing,r=e.onMultiCheck,l=e.data,o=e.multiRegionsData,s=e.isAdjusted,f=e.cellClickHandler,h=e.collapsed,m=e.onToggleEvents,g=function(e,t,a,n){return e[t]?e[t].includes(a):!e[t]&&e[a]&&e[a].length===n[0].length},y=function(e,t,a){for(var n=arguments.length,l=Array(n>3?n-3:0),o=3;o<n;o++)l[o-3]=arguments[o];return i.default.createElement("div",{className:"cell-control force-visibility check-multi-row",onClick:function(e){return e.stopPropagation()}},i.default.createElement(v.default,{label:"",checked:g(e,t,a,l),onChange:function(e){g(r(e,a,t,l),t,a,l)}}))},S=t[a],b=s?S.adjusted_events:S.events,C=d.Icons.EVENT,O=S.location,T=S.region_name,R=b&&b.length>0,A=S.ignore_aggregation,I=l.filter(function(e){return"country"===e.type&&e.region_id===S.region_id}).map(function(e){return e.country_name}),w="generic"===S.valuesType||"actual"===S.valuesType&&S.ignoreGenericData||"adjusted"===S.valuesType&&(0,E.showInAdjustedRow)(S.valuesType,t,a);return"region"===S.type&&!n&&("generic"===S.valuesType||"actual"===S.valuesType&&S.onlyActuals)?i.default.createElement(c.Cell,{cellClickHandler:function(e){return f(S,"collapse-icon-cell",e)},className:"collapse-icon-cell"},h.includes(S.location)?d.Icons.CHEVRON_DOWN:d.Icons.CHEVRON_UP):"region"===S.type&&"generic"===S.valuesType&&n?i.default.createElement(c.Cell,{className:"multiediting-checkbox-cell"},y(o,T,O,I)):"country"===S.type&&"generic"===S.valuesType&&n?i.default.createElement(c.Cell,{className:"multiediting-checkbox-cell"},y(o,T,O)):"country"===S.type&&w&&R&&!A?i.default.createElement(c.Cell,{className:(0,u.default)("event-icon-cell",{"region-view":S.isRegionCountry})},i.default.createElement(p.default,{mouseEnterDelay:.3,overlayClassName:"planning-table__events-tooltip",align:{offset:[0,-4]},overlay:i.default.createElement("span",null,"View events")},i.default.createElement("span",{onClick:m,"data-loc":O,"data-region":T},C))):"country"===S.type&&"generic"===S.valuesType&&A?i.default.createElement(c.Cell,{className:"event-icon-cell"},i.default.createElement(_.default,{canBeIgnored:S.canBeIgnored})):i.default.createElement(c.Cell,null)};g.propTypes={scenarioData:o.default.array.isRequired,rowIndex:o.default.number,isMultiEditing:o.default.bool,onMultiCheck:o.default.func.isRequired,data:o.default.array.isRequired,multiRegionsData:o.default.object,isAdjusted:o.default.bool,cellClickHandler:o.default.func.isRequired,collapsed:o.default.array.isRequired,onToggleEvents:o.default.func.isRequired},g.defaultProps={rowIndex:-1,isMultiEditing:!1,multiRegionsData:{},isAdjusted:!1},t.default=g},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(11),c=n(d),f=a(15),p=function(e){var t=e.rowData,a=e.isTracking,n=e.lpftView,r=e.isOverallocated;return i.default.createElement(f.CellGroup,{direction:"row",className:(0,u.default)("data-group active",{tracking:a})},i.default.createElement(f.Cell,{width:"20%",className:(0,u.default)("actual","value-cell",{empty:!t.values.fpfv,ignored:t.ignore_aggregation})},i.default.createElement("div",null,t.values.fpfv?(0,c.default)(t.values.fpfv).format("D MMM YY"):" ")),i.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("actual","value-cell",{empty:!t.values.fpfv_lpfv,ignored:t.ignore_aggregation})},i.default.createElement("div",null,t.values.fpfv_lpfv?t.values.fpfv_lpfv+"d":"")),i.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("align--right","actual","value-cell",{empty:!t.values.sr,ignored:t.ignore_aggregation})},i.default.createElement("div",null,t.values.sr?parseFloat(t.values.sr).toFixed(2):" ")),i.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("align--right","actual","value-cell",{empty:!t.values.screening_failure&&0!==t.values.screening_failure,ignored:t.ignore_aggregation})},i.default.createElement("div",null,t.values.screening_failure||0===t.values.screening_failure?Math.round(100*t.values.screening_failure)+"%":" ")),i.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("align--right","actual","value-cell",{empty:!t.values.randomisation_rate,ignored:t.ignore_aggregation})},i.default.createElement("div",null,t.values.randomisation_rate?t.values.randomisation_rate:" ")),i.default.createElement(f.Cell,{width:"20%",className:(0,u.default)("lpft-cell","value-cell",{empty:!t.values.lpft,ignored:t.ignore_aggregation,actual:n||null===t.values.lpftDiff,forecast:n&&t.values.lpft&&t.values.actual_date&&t.values.lpft.isAfter(t.values.actual_date),"bg-green":!n&&null!==t.values.lpftDiff&&t.values.lpftDiff>=0&&!r,"bg-red":!n&&t.values.lpftDiff&&t.values.lpftDiff<0&&!r,"bg-grey":!n&&0!==t.values.lpftDiff&&r})},n?i.default.createElement("div",{className:(0,u.default)({ignored:t.ignore_aggregation},{"color-grey":0!==t.values.lpftDiff&&r},{"color-green":t.values.lpftDiff>=0&&!r},{"color-red":t.values.lpftDiff&&t.values.lpftDiff<0&&!r})},t.values.lpft&&c.default.isMoment(t.values.lpft)?t.values.lpft.format("DD MMM YY"):""):i.default.createElement("div",{className:"color-white"},t.values.lpftDiff&&t.values.lpftDiff>0?"-"+t.values.lpftDiff+"d":" ",t.values.lpftDiff&&t.values.lpftDiff<0?"+"+-1*t.values.lpftDiff+"d":" ",0===t.values.lpftDiff?t.values.lpftDiff+"d":" ")))};p.propTypes={rowData:o.default.object,isTracking:o.default.bool,lpftView:o.default.bool,isOverallocated:o.default.bool},p.defaultProps={rowData:null,isTracking:!1,lpftView:!0,isOverallocated:!1},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(11),c=n(d),f=a(15),p=function(e){var t=e.rowData,a=e.isTracking,n=e.lpftView,r=e.isOverallocated,l=e.endDate,o=a&&"adjusted"===t.valuesType?t.planned_lpft:l,s=t.values.lpft&&o?t.values.lpft.diff(o,"days"):null;return i.default.createElement(f.CellGroup,{direction:"row",className:(0,u.default)("data-group active",{tracking:!0})},i.default.createElement(f.Cell,{width:"20%",className:(0,u.default)("overallocated","value-cell",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.fpfv,ignored:t.ignore_aggregation})},i.default.createElement("div",null,t.values.fpfv?(0,c.default)(t.values.fpfv).format("D MMM YY"):" ")),i.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("overallocated","value-cell",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.fpfv_lpfv,ignored:t.ignore_aggregation})},i.default.createElement("div",null,t.values.fpfv_lpfv?t.values.fpfv_lpfv+"d":"")),i.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("align--right","overallocated","value-cell",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.sr,ignored:t.ignore_aggregation})},i.default.createElement("div",null,t.values.sr?parseFloat(t.values.sr).toFixed(2):" ")),i.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("align--right","overallocated","value-cell",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.screening_failure&&0!==t.values.screening_failure,ignored:t.ignore_aggregation})},i.default.createElement("div",null,t.values.screening_failure||0===t.values.screening_failure?Math.round(100*t.values.screening_failure)+"%":" ")),i.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("align--right","overallocated","value-cell",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.randomisation_rate,ignored:t.ignore_aggregation})},i.default.createElement("div",null,t.values.randomisation_rate?t.values.randomisation_rate:" ")),i.default.createElement(f.Cell,{width:"20%",className:(0,u.default)("lpft-cell","value-cell",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.lpft,ignored:t.ignore_aggregation,overallocated:n||null===t.values.lpftDiff,forecast:n&&t.values.lpft&&t.values.actual_date&&t.values.lpft.isAfter(t.values.actual_date),"bg-green":!n&&s<=0&&!r,"bg-red":!n&&s>0&&!r,"bg-grey":!n&&0!==s&&r})},n?i.default.createElement("div",{className:(0,u.default)({ignored:t.ignore_aggregation},{"color-grey":0!==t.values.lpftDiff&&r},{"color-green":s<=0},{"color-red":s>0})},t.values.lpft&&c.default.isMoment(t.values.lpft)?t.values.lpft.format("DD MMM YY"):""):i.default.createElement("div",{className:"color-white"},s<=0?s+"d":" ",s>0?"+"+s+"d":" ",0===s?s+"d":" ")))};p.propTypes={rowData:o.default.object,isTracking:o.default.bool,lpftView:o.default.bool,isOverallocated:o.default.bool,endDate:o.default.object},p.defaultProps={rowData:null,isTracking:!1,lpftView:!0,isOverallocated:!1,endDate:null},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),l=n(i),o=a(1),s=n(o),u=a(11),d=n(u),c=a(2),f=n(c),p=a(15),h=a(894),v=n(h),m=a(888),_=n(m),E=a(889),g=n(E),y=a(892),S=n(y),b=a(896),C=n(b),O=a(895),T=n(O),R=a(109),A=n(R),I=a(85),w=function(e){var t=e.rowIndex,a=e.data,n=e.onFocusCountry,i=e.onDataChange,o=e.cellClickHandler,s=e.startDate,u=e.endDate,c=e.editingCountry,h=e.historicalEnabled,m=e.historicalFilter,E=e.isAdjusted,y=e.isApproved,b=e.isPrevApproved,O=e.isTracking,R=e.lpftView,I=e.isEditable,w=e.regionsData,N=e.activeRowValidationState,D=e.onMultiEditingApply,P=e.batchUpdate,L=e.fromPrevApproved,M=e.isExactCopy,k=e.multiEditType,x=r({},a[t]),j=void 0!==x.actual_overallocation&&0!==x.actual_overallocation,F="adjusted"===x.valuesType,U="generic"===x.valuesType&&(y||E),V=F?"adjusted_":"",B=x[V+"errorMessages"]||{},H=c===x.country_id,G=H?void 0:"D MMM YY",Y=I&&!U&&!x.ignore_aggregation&&(!c||c===x.country_id||a.every(function(e){return!e.values.invalids||e.values.invalids&&0===e.values.invalids.length})),z="multiediting"===x.type,W="historical_reference_data_by_"+m.toLowerCase(),q=!Object.keys(w).length,K=void 0;z&&(x.unlock?Object.values(x.unlock).forEach(function(e){e&&(K=!0)}):Object.keys(x.values).filter(function(e){return"type"!==e&&"location"!==e&&"events"!==e}).forEach(function(e){var t=x.values[e];null!==t&&""!==t&&void 0!==t&&(K=!0)}));var X=function(e){var t=x.values.fsiv||s;return e.isSameOrAfter(t)&&e.isSameOrAfter(s.clone().add(1,"d"))},Z={isAdjusted:E,isTracking:O,isEditable:Y,isMultiediting:z,isApproved:y,isPrevApproved:b,rowData:x,historicalEnabled:h,historicalDataKey:W,dataPrefix:V,adjustedRow:F,cellClickHandler:o,onFocusCountry:n,onDataChange:i,isEditing:H,activeRowValidationState:N,today:(0,d.default)(),fromPrevApproved:L,isExactCopy:M,multiEditType:k},J=l.default.createElement(p.CellGroup,{direction:"row",className:(0,f.default)("data-group active",{tracking:O&&!F,adjusted:F})},l.default.createElement(S.default,r({},Z,{tooltip:B.fpfv,datePickerFormat:G,filterDate:X,startDate:s})),l.default.createElement(p.Cell,{width:"22%",className:(0,f.default)("value-cell","fpfv_lpfv",{approved:(y&&O||E&&!L)&&!F,dimmed:h,ignored:x.ignore_aggregation,generated:x.generatedFields&&x.generatedFields.includes("fpfv_lpfv")})},l.default.createElement(A.default,{key:1,isNotEmpty:x.values.fpfv_lpfv&&x.values.fpfv_lpfv>=0,generatedFields:x.generatedFields,cellName:"fpfv_lpfv"}),l.default.createElement("div",{key:2},x.values.fpfv_lpfv?x.values.fpfv_lpfv+"d":"")),l.default.createElement(p.Cell,{width:"12%",className:(0,f.default)("align--right","value-cell","sr",{approved:(y&&O||E&&!L)&&!F,dimmed:h,ignored:x.ignore_aggregation,generated:x.generatedFields&&x.generatedFields.includes("sr")})},l.default.createElement(A.default,{key:1,isNotEmpty:x.values.sr&&x.values.sr>=0,generatedFields:x.generatedFields,cellName:"sr"}),l.default.createElement("div",null,x.values.sr?parseFloat(x.values.sr).toFixed(2):" ")),l.default.createElement(C.default,r({tooltip:B.screening_failure},Z)),l.default.createElement(T.default,r({tooltip:B.randomisation_rate},Z)),z?l.default.createElement(p.Cell,{width:"20%",className:"apply-button-cell"},l.default.createElement("div",{className:(0,f.default)("apply-button",{disabled:q||!K}),onClick:!q&&K?D:void 0},"Apply")):l.default.createElement(v.default,{fromPrevApproved:L,historicalEnabled:h,startDate:s,onChange:i,batchUpdate:P,scenarioEndDate:u,lpftViewType:R,adjustedRow:F,isAdjusted:E,isApproved:y,isTracking:O,generated:x.generatedFields&&x.generatedFields.includes("lpft"),isEditable:Y&&"country"===x.type,data:x}));return l.default.createElement(p.CellGroup,{direction:"column"},"generic"===x.valuesType&&J,"generic_overallocated"===x.valuesType&&l.default.createElement(g.default,{endDate:u,rowData:x,isTracking:O,isOverallocated:j,lpftView:R}),"actual"===x.valuesType&&l.default.createElement(_.default,{rowData:x,isTracking:O,isOverallocated:j,lpftView:R}),"adjusted"===x.valuesType&&J,"adjusted_overallocated"===x.valuesType&&l.default.createElement(g.default,{endDate:u,rowData:x,isTracking:O,isOverallocated:j,lpftView:R}))};w.displayName="EnrolmentDataCell",w.defaultProps={rowIndex:-1,editingCountry:null,isEditable:!1,dirtyData:{},lpftView:!0,isAdjusted:!1,isApproved:!1,isPrevApproved:!1,isTracking:!1,historicalEnabled:!1,historicalFilter:I.FILTER_BY.STUDIES,regionsData:null,endDate:null,activeRowValidationState:{},fromPrevApproved:!1,isExactCopy:!1,multiEditType:"edit"},w.propTypes={rowIndex:s.default.number,data:s.default.array.isRequired,onFocusCountry:s.default.func.isRequired,onDataChange:s.default.func.isRequired,startDate:s.default.object.isRequired,endDate:s.default.object,editingCountry:s.default.oneOfType([s.default.string,s.default.number]),isEditable:s.default.bool,lpftView:s.default.bool,isAdjusted:s.default.bool,isApproved:s.default.bool,isPrevApproved:s.default.bool,isTracking:s.default.bool,historicalEnabled:s.default.bool,historicalFilter:s.default.oneOf(Object.keys(I.FILTER_BY)),cellClickHandler:s.default.func.isRequired,regionsData:s.default.object,onMultiEditingApply:s.default.func.isRequired,batchUpdate:s.default.func.isRequired,activeRowValidationState:s.default.object,fromPrevApproved:s.default.bool,isExactCopy:s.default.bool,multiEditType:s.default.string},t.default=w},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(15),u=a(14),d=n(u),c=function(e){var t=e.caption,a=e.lpftView,n=e.lpftViewTypeToggle;return i.default.createElement(s.CellGroup,null,i.default.createElement(s.Cell,{className:"cell-caption"},i.default.createElement("h3",null,t)),i.default.createElement(s.CellGroup,{direction:"row",className:"header-group"},i.default.createElement(s.Cell,{width:"20%",className:"header-cell align--left"},i.default.createElement("div",null,"FPFV")),i.default.createElement(s.Cell,{width:"22%",className:"header-cell align--left"},i.default.createElement("div",null,"FPFV-LPFV")),i.default.createElement(s.Cell,{width:"12%",className:"header-cell align--right"},i.default.createElement(d.default,{align:{offset:[10,0]},mouseEnterDelay:.3,overlayClassName:"scenario-table__lpft-tooltip",overlay:i.default.createElement("span",null,"patients/site/month")},i.default.createElement("div",null,"SR"))),i.default.createElement(s.Cell,{width:"12%",className:"header-cell align--right"},i.default.createElement("div",null,"SF%")),i.default.createElement(s.Cell,{width:"12%",className:"header-cell align--right"},i.default.createElement(d.default,{align:{offset:[10,0]},mouseEnterDelay:.3,overlayClassName:"scenario-table__lpft-tooltip",overlay:i.default.createElement("span",null,"patients/site/month")},i.default.createElement("div",null,"RR"))),i.default.createElement(s.Cell,{width:"20%",className:"header-cell align--left"},i.default.createElement(d.default,{mouseEnterDelay:.3,overlayClassName:"scenario-table__lpft-tooltip",overlay:i.default.createElement("span",{onClick:function(){return n()}},"P/LPFT - ",a?"Days":"Date")},i.default.createElement("span",{className:"lpft-header-cell__title"},"P/LPFT")))))};c.propTypes={caption:o.default.string.isRequired,lpftView:o.default.bool.isRequired,lpftViewTypeToggle:o.default.func.isRequired},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(11),c=n(d),f=a(15),p=a(84),h=n(p),v=a(120),m=n(v),_=a(109),E=n(_),g=a(119),y=n(g),S=a(10),b=a(8),C=a(52),O=function(e){var t=e.rowData,a=e.isTracking,n=e.cellClickHandler,r=e.isApproved,l=e.isAdjusted,o=e.adjustedRow,s=e.isEditable,d=e.historicalEnabled,p=e.historicalDataKey,v=e.isMultiediting,_=e.onFocusCountry,g=e.startDate,O=e.datePickerFormat,T=e.onDataChange,R=e.dataPrefix,A=e.filterDate,I=e.activeRowValidationState,w=e.tooltip,N=e.today,D=e.fromPrevApproved,P=e.isExactCopy,L=e.multiEditType,M=(0,b.isCellDimmed)(S.ENROLMENT_TABLE_FIELDS_LIST.FPFV,t,p,d),k=function(){return t.values.fsiv?t.values.fsiv.clone().add(1,"w"):g.clone().add(1,"w")};return i.default.createElement(f.Cell,{width:"20%",cellClickHandler:function(e){return n(t,"fpfv",e)},className:(0,u.default)("value-cell",{overridden:(0,C.isOverriden)(t[R+"overrideList"],t[R+"unlock"],a,l,o,t.values.fpfv,"fpfv"),approved:(r&&a||l&&!D)&&!o,editable:"country"===t.type&&s,historical:d,dimmed:M,ignored:t.ignore_aggregation,generated:t.generatedFields&&t.generatedFields.includes("fpfv")},{"multiediting-cell":v&&"edit"===L})},"country"===t.type&&s&&i.default.createElement("div",null,i.default.createElement(h.default,{tooltip:w,simpleView:!0,onFocus:function(e){return _(e,t.country_id)},fixedHeight:!0,defaultDate:k(),filterDate:A,dateFormat:O,disabledKeyboardNavigation:!0,disabled:!P&&l&&t.values.fpfv&&t.values.fpfv.isBefore(N)&&null!==t.actual_fpfv&&t.actual_fpfv.isSame(t.values.fpfv),onChange:function(e,a){return T(t.country_id,R+"fpfv",a,null,t.values.fpfv)},status:t.values.invalids&&t.values.invalids.includes("fpfv")||t.invalidFields&&t.invalidFields.includes("fpfv")?"error":"success",validators:[function(e){return c.default.isMoment(e)}],selected:c.default.isMoment(t.values.fpfv)?t.values.fpfv:null})),v&&"unlock"===L&&i.default.createElement(f.Cell,{className:"flex-1-5 multiediting-cell unlock"},i.default.createElement(y.default,{type:S.ENROLMENT_TABLE_FIELDS_LIST.FPFV,unlock:t.unlock,onChange:T})),v&&"edit"===L&&i.default.createElement(m.default,{key:"multiediting_"+S.ENROLMENT_TABLE_FIELDS_LIST.FPFV,onChange:function(e){return T(null,S.ENROLMENT_TABLE_FIELDS_LIST.FPFV,e,"multiediting")},isValid:I[S.ENROLMENT_TABLE_FIELDS_LIST.FPFV],value:t.values.fpfv||null,type:"date",defaultDate:k(),filterDate:A,isEditMode:!0}),("country"!==t.type||!s)&&!v&&[i.default.createElement(E.default,{key:1,isNotEmpty:null!==t.values.fpfv&&void 0!==t.values.fpfv,generatedFields:t.generatedFields,cellName:S.ENROLMENT_TABLE_FIELDS_LIST.FPFV}),i.default.createElement("div",{key:2,className:(0,u.default)("cell-renderer-not-editable-view",{error:t.values.invalids&&t.values.invalids.includes(S.ENROLMENT_TABLE_FIELDS_LIST.FPFV)||t.invalidFields&&t.invalidFields.includes(S.ENROLMENT_TABLE_FIELDS_LIST.FPFV)})},t.values.fpfv?t.values.fpfv.format("D MMM YY"):" ")])};O.propTypes={cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,startDate:o.default.object.isRequired,datePickerFormat:o.default.string,filterDate:o.default.func.isRequired,activeRowValidationState:o.default.object,tooltip:o.default.string,today:o.default.object,fromPrevApproved:o.default.bool,isExactCopy:o.default.bool,multiEditType:o.default.string},O.defaultProps={rowData:null,isMultiediting:!1,isEditable:!1,isEditing:!1,dataPrefix:"",isApproved:!1,isPrevApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",datePickerFormat:void 0,activeRowValidationState:{},tooltip:null,today:(0,c.default)(),fromPrevApproved:!1,isExactCopy:!1,multiEditType:"edit"},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EnrolmentDataCell=t.EnrolmentHeaderCell=void 0;var r=a(891),i=n(r),l=a(890),o=n(l);t.EnrolmentHeaderCell=i.default,t.EnrolmentDataCell=o.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(45),p=n(f),h=a(2),v=n(h),m=a(11),_=n(m),E=a(15),g=a(14),y=n(g),S=a(84),b=n(S),C=a(196),O=n(C),T=a(465),R=n(T),A=a(109),I=n(A),w=a(35),N=a(1144),D=n(N),P=a(8),L=a(39),M=a(10),k=.25,x=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.worker=null,a.state={calculating:!1,calculationProgress:k,calculationStatus:void 0,clicked:0,calculationError:!1},a.handleLpftSelect=a.handleLpftSelect.bind(a),a.handleClicked=a.handleClicked.bind(a),a.handleOutsideClick=a.handleOutsideClick.bind(a),a.handleCalculationsAbort=a.handleCalculationsAbort.bind(a),a}return l(t,e),o(t,null,[{key:"handleCheckBoxAction",value:function(){(0,w.addToStorage)("fpo-warnings",{id:"lpft",lpftDescription:!1})}}]),o(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=this.props,n=a.lpftViewType,r=a.data,i=a.historicalEnabled,l=a.isEditable,o=this.state,s=o.clicked,u=o.calculating,d=o.calculationProgress,c=o.calculationStatus,f=o.calculationError;return e.lpftViewType!==n||!(0,p.default)(e.data,r)||e.historicalEnabled!==i||e.isEditable!==l||t.clicked!==s||t.calculating!==u||t.calculationProgress!==d||t.calculationStatus!==c||t.calculationError!==f||t.clicked>0}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleOutsideClick)}},{key:"handleLpftSelect",value:function(e,t,a){var n=this,r=this.props,i=r.startDate,l=r.scenarioEndDate,o=r.isAdjusted,s=M.WORKER_MESSAGE_TYPES.IN_PROGRESS,u=M.WORKER_MESSAGE_TYPES.COMPLETED;this.worker=new D.default,this.worker.postMessage({startDate:i.toDate(),scenarioEndDate:l&&l.toDate(),isAdjusted:o,selectedLpft:e.toDate(),countryId:t,rowData:JSON.stringify(a)}),this.worker.onmessage=function(e){var a=e.data,r=a.value,i=a.type;if(i===s||i===u)n.setState({calculationProgress:r.calculationProgress,calculationStatus:i});else{var l=r;n.worker.terminate();var o=n.props.adjustedRow?"adjusted_":"";l?n.setState({calculating:!1,calculationProgress:k,calculationStatus:void 0},function(){n.props.batchUpdate(t,[{name:o+"randomisation_rate",value:l.rr,isValid:!0},{name:o+"patient_allocation",value:l.patients,isValid:!0},{name:o+"num_sites",value:l.sites,isValid:!0}])}):n.setState({calculating:!1,calculationProgress:k,calculationStatus:void 0,calculationError:!0})}}}},{key:"handleClicked",value:function(){document.addEventListener("click",this.handleOutsideClick),this.props.isEditable&&this.state.clicked<=1&&this.setState({clicked:this.state.clicked+=1})}},{key:"handleOutsideClick",value:function(e){var t=this;e.target.closest(".lpft-cell-"+this.props.data.override_id)||e.target.closest(".lpft-description-tooltip")||this.setState({clicked:0},function(){document.removeEventListener("click",t.handleOutsideClick)})}},{key:"handleCalculationsAbort",value:function(){this.worker.terminate(),this.setState({calculating:!1,calculationProgress:k,calculationStatus:void 0})}},{key:"render",value:function(){var e=this,a=this.props,n=a.lpftViewType,r=a.data,i=a.historicalEnabled,l=a.scenarioEndDate,o=a.startDate,s=a.isEditable,d=a.isTracking,c=a.isAdjusted,f=a.isApproved,p=a.adjustedRow,h=a.generated,m=a.fromPrevApproved,g=(0,w.getParamItemStorage)("fpo-warnings","lpft","lpftDescription"),S=null===g||g,C=c&&"adjusted"===r.valuesType?r.planned_lpft:l,T=r.values.lpft&&C?r.values.lpft.diff(C,"days"):null,A=this.state,N=A.calculationError,D=A.calculating,k=A.calculationProgress,x=A.calculationStatus,j={width:k+"%"};if(x===M.WORKER_MESSAGE_TYPES.COMPLETED){var F=100-k;j={width:"100%",transition:"width "+25*F+"ms steps("+F+", start)"}}var U=function(e){var t=r.values.fpfv,a=r.values.fpfv_fpft,n=!0;if(p&&r&&r.actualTimeseriesSnapshot&&r.actualTimeseriesSnapshot.actual_date){var i=(0,P.getMomentDate)(r.actualTimeseriesSnapshot.actual_date);n=i&&e>i}return e>=o&&e>=t.clone().add(a+1,"d")&&n},V=function(){return r.values.lpft?d&&"generic"===r.valuesType?[u.default.createElement(I.default,{key:1,isNotEmpty:null!==r.values.lpft&&void 0!==r.values.lpft,generatedFields:r.generatedFields,cellName:"lpft"}),u.default.createElement("div",{key:2},r.values.lpft.format("D MMM YY"))]:n?u.default.createElement("div",{onClick:e.handleClicked},e.state.clicked>=1&&s?u.default.createElement("div",null,u.default.createElement(b.default,{popperPlacement:"top-end",simpleView:!0,fixedHeight:!0,filterDate:U,disabledKeyboardNavigation:!0,onChange:function(t){e.setState({clicked:0,calculating:!0},function(){e.handleLpftSelect(t,r.country_id,r.values,r.ignoreGenericData)})},selected:r.values.lpft})):u.default.createElement("div",{className:(0,v.default)({ignored:r.ignore_aggregation},{"color-green":T<=0&&!r.hasOverallocation},{"color-red":T>0&&!r.hasOverallocation})},r.values.lpft&&_.default.isMoment(r.values.lpft)?r.values.lpft.format("DD MMM YY"):"")):u.default.createElement("div",{className:"color-white"},T>0?"+"+T+"d":T+"d"):u.default.createElement("div",null)};return u.default.createElement(E.Cell,{width:"20%",className:(0,v.default)("value-cell","lpft-cell","lpft-cell-"+r.override_id,{editable:this.state.clicked,approved:(f&&d||c&&!m)&&!p,empty:!r.values.lpft,dimmed:i,ignored:r.ignore_aggregation,"bg-red":!n&&T&&T>0,"bg-green":!n&&null!==T&&T<=0,generated:h})},u.default.createElement("div",{style:{whiteSpace:"inherit",textOverflow:"inherit",overflow:"inherit"}},function(){return r.ignore_aggregation&&p?u.default.createElement("div",null,"CANCELLED"):"country"===r.type&&n&&s?u.default.createElement(y.default,{overlayClassName:"lpft-description-tooltip",align:{offset:[0,10]},placement:"bottomRight",visible:1===e.state.clicked&&S,overlay:u.default.createElement("div",null,u.default.createElement("div",{className:"lpft-description"},"When editing P/LPFT, you are setting a ",u.default.createElement("br",null)," user constraint on RR, Patients and Sites"),u.default.createElement(R.default,{label:"Don't show me again",onChange:t.handleCheckBoxAction,checked:!S}))},u.default.createElement("div",{style:e.state.clicked?null:{paddingBottom:"2px"}},V())):V()}(),u.default.createElement(O.default,{isShown:!1!==N,status:"error",title:"Failed to calculate",handleClose:function(){return e.setState({calculationError:!1})}},"Failed to calculate required randomisation rate value using provided data"),u.default.createElement(L.PopupDialog,{title:"P/LPFT reverse calculation",isShown:D,handleClose:this.handleCalculationsAbort,buttons:[u.default.createElement(L.ActionButton,{action:this.handleCalculationsAbort,primary:!0},"Cancel")]},u.default.createElement("div",{className:"unsaved-changes-dialog-content"},"Calculation in progress, please wait",u.default.createElement("div",{className:"bar-loader"},u.default.createElement("div",{className:"bar-loader__bar",style:j}))))))}}]),t}(s.Component);x.defaultProps={data:{},lpftViewType:!0,historicalEnabled:!1,isTracking:!1,isApproved:!1,isAdjusted:!1,adjustedRow:!1,isEditable:!0,generated:!1,scenarioEndDate:null,fromPrevApproved:!1},x.propTypes={data:c.default.object,startDate:c.default.object.isRequired,scenarioEndDate:c.default.object,lpftViewType:c.default.bool,historicalEnabled:c.default.bool,batchUpdate:c.default.func.isRequired,isTracking:c.default.bool,isAdjusted:c.default.bool,isApproved:c.default.bool,adjustedRow:c.default.bool,isEditable:c.default.bool,generated:c.default.bool,fromPrevApproved:c.default.bool},t.default=x},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(117),c=n(d),f=a(15),p=a(27),h=n(p),v=a(120),m=n(v),_=a(14),E=n(_),g=a(109),y=n(g),S=a(119),b=n(S),C=a(96),O=n(C),T=a(10),R=a(8),A=a(52),I=function(e){var t=e.cellClickHandler,a=e.onFocusCountry,n=e.onDataChange,r=e.rowData,l=e.isMultiediting,o=e.isEditable,s=e.isEditing,d=e.dataPrefix,p=e.isApproved,v=e.isAdjusted,_=e.adjustedRow,g=e.isTracking,S=e.historicalEnabled,C=e.historicalDataKey,I=e.activeRowValidationState,w=e.tooltip,N=e.fromPrevApproved,D=e.multiEditType,P=null,L=(0,R.isCellDimmed)(T.ENROLMENT_TABLE_FIELDS_LIST.RANDOMISATION_RATE,r,C,S);return"country"===r.type&&o||l?"country"===r.type&&o&&s&&!l?(P=i.default.createElement("div",null,i.default.createElement(h.default,{onKeyDown:function(e){"Escape"!==e.key&&"Enter"!==e.key||e.target.blur()},onFocus:function(e){return a(e,r.country_id)},onBlur:function(e,t){+t.value!=+r.values.randomisation_rate&&n(r.country_id,d+"randomisation_rate",t,null,r.values.randomisation_rate)},narrow:!0,status:r.values.invalids&&r.values.invalids.includes("randomisation_rate")||r.invalidFields&&r.invalidFields.includes("randomisation_rate")?"error":null,type:"text",value:r.values.randomisation_rate||0===r.values.randomisation_rate?r.values.randomisation_rate:"",validators:[function(e){return""===e||c.default.isFloat(e,{min:0,max:999})}],withoutBorder:!0,textAlign:"right",placeholder:""})),w&&(P=i.default.createElement(E.default,{mouseEnterDelay:.3,placement:"bottom",overlayClassName:"fpo-sidebar-button__tooltip",overlay:w},P))):"country"!==r.type||!o||s||l?l&&(P="unlock"===D?i.default.createElement(f.Cell,{className:"flex-col-12 multiediting-cell align--right unlock"},i.default.createElement(b.default,{type:T.ENROLMENT_TABLE_FIELDS_LIST.RANDOMISATION_RATE,unlock:r.unlock,onChange:n})):i.default.createElement(m.default,{key:"multiediting_"+T.ENROLMENT_TABLE_FIELDS_LIST.RANDOMISATION_RATE,value:r.values.randomisation_rate||"",onChange:function(e){return n(null,T.ENROLMENT_TABLE_FIELDS_LIST.RANDOMISATION_RATE,e,"multiediting")},type:"text",validators:[function(e){return""===e||c.default.isFloat(e,{min:0,max:999})}],isValid:I[T.ENROLMENT_TABLE_FIELDS_LIST.RANDOMISATION_RATE]&&!(r.invalidFields&&r.invalidFields.includes(T.ENROLMENT_TABLE_FIELDS_LIST.RANDOMISATION_RATE)),isEditMode:!0})):P=i.default.createElement("div",null,i.default.createElement(h.default,{onFocus:function(e){return a(e,r.country_id)},narrow:!0,status:r.values.invalids&&r.values.invalids.includes("randomisation_rate")||r.invalidFields&&r.invalidFields.includes("randomisation_rate")?"error":null,value:(0,O.default)(r.values.randomisation_rate)||"",withoutBorder:!0,textAlign:"right",placeholder:""})):P=[i.default.createElement(y.default,{key:1,isNotEmpty:null!==r.values.randomisation_rate&&void 0!==r.values.randomisation_rate,generatedFields:r.generatedFields,cellName:"randomisation_rate"}),i.default.createElement("div",{key:2},r.values.randomisation_rate?(0,O.default)(r.values.randomisation_rate):"")],i.default.createElement(f.Cell,{width:"12%",cellClickHandler:function(e){return t(r,"randomisation_rate",e)},className:(0,u.default)("value-cell","align--right",{overridden:(0,A.isOverriden)(r[d+"overrideList"],r[d+"unlock"],g,v,_,r.values.randomisation_rate,"randomisation_rate"),approved:(p&&g||v&&!N)&&!_,editable:"country"===r.type&&o,historical:S,dimmed:L,ignored:r.ignore_aggregation,generated:r.generatedFields&&r.generatedFields.includes("randomisation_rate"),"multiediting-cell":l&&"edit"===D})},P)};I.propTypes={cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,isEditing:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,activeRowValidationState:o.default.object,tooltip:o.default.string,fromPrevApproved:o.default.bool,multiEditType:o.default.string},I.defaultProps={rowData:null,isMultiediting:!1,isEditable:!1,isEditing:!1,dataPrefix:"",isApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",activeRowValidationState:{},tooltip:null,fromPrevApproved:!1,multiEditType:"edit"},t.default=I},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(15),c=a(27),f=n(c),p=a(120),h=n(p),v=a(14),m=n(v),_=a(109),E=n(_),g=a(119),y=n(g),S=a(10),b=a(8),C=a(52),O=function(e){var t=e.rowData,a=e.isTracking,n=e.cellClickHandler,r=e.isApproved,l=e.isAdjusted,o=e.adjustedRow,s=e.isEditable,c=e.historicalEnabled,p=e.historicalDataKey,v=e.isMultiediting,_=e.onFocusCountry,g=e.isEditing,O=e.onDataChange,T=e.dataPrefix,R=e.activeRowValidationState,A=e.tooltip,I=e.fromPrevApproved,w=e.multiEditType,N=!(t.values.invalids&&t.values.invalids.includes("screening_failure")),D=(0,b.isCellDimmed)(S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE,t,p,c),P=function(){return null!==t.values.screening_failure&&void 0!==t.values.screening_failure&&""!==t.values.screening_failure&&N?g||v?""+Math.round(100*t.values.screening_failure):Math.round(100*t.values.screening_failure)+"%":null!==t.values.screening_failure&&void 0!==t.values.screening_failure?t.values.screening_failure:""},L=null;return"country"===t.type&&s?(L=i.default.createElement("div",null,i.default.createElement(f.default,{onKeyDown:function(e){"Escape"!==e.key&&"Enter"!==e.key||e.target.blur()},onFocus:function(e){return _(e,t.country_id)},onBlur:function(e,a){var n=a.isValid&&""!==a.value?{value:parseInt(a.value,10)/100,isValid:!0}:a;(+n.value!=+t.values.screening_failure||null===t.values.screening_failure&&""!==n.value||0===t.values.screening_failure&&""===n.value)&&O(t.country_id,T+"screening_failure",n,null,t.values.screening_failure)},type:"text",status:!N||t.invalidFields&&t.invalidFields.includes("screening_failure")?"error":null,value:P(),validators:[function(e){return""===e||e.match(/^(?:\b|-)([0-9]{1,2}[0]?|99)\b%{0,1}$/)},function(e){return""===e||e>=0&&e<=99}],textAlign:"right",placeholder:"",withoutBorder:!0,narrow:!0})),A&&(L=i.default.createElement(m.default,{mouseEnterDelay:.3,placement:"bottom",overlayClassName:"fpo-sidebar-button__tooltip",overlay:A},L))):v?L="unlock"===w?i.default.createElement(d.Cell,{className:"flex-col-12 multiediting-cell align--right unlock"},i.default.createElement(y.default,{type:S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE,unlock:t.unlock,onChange:O})):i.default.createElement(h.default,{key:"multiediting_"+S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE,value:P(),onChange:function(e){var t=""!==e?e.replace(/%$/,"")/100:"";O(null,S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE,t,"multiediting")},type:"text",validators:[function(e){return""===e||e.match(/^(?:\b|-)([0-9]{1,2}[0]?|99)\b%{0,1}$/)},function(e){return""===e||e>=0&&e<=99}],isValid:R[S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE]&&!(t.invalidFields&&t.invalidFields.includes(S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE)),isEditMode:!0}):"country"===t.type&&s||v||(L=[i.default.createElement(E.default,{key:1,isNotEmpty:null!==t.values.screening_failure&&void 0!==t.values.screening_failure,generatedFields:t.generatedFields,cellName:S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE}),i.default.createElement("div",{key:2,className:(0,u.default)("cell-renderer-not-editable-view",{error:!N||t.invalidFields&&t.invalidFields.includes(S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE)})},P())]),i.default.createElement(d.Cell,{width:"12%",cellClickHandler:function(e){return n(t,"screening_failure",e)},className:(0,u.default)("value-cell","align--right",{overridden:(0,C.isOverriden)(t[T+"overrideList"],t[T+"unlock"],a,l,o,t.values.screening_failure,"screening_failure"),approved:(r&&a||l&&!I)&&!o,editable:"country"===t.type&&s,historical:c,dimmed:D,ignored:t.ignore_aggregation,generated:t.generatedFields&&t.generatedFields.includes("screening_failure")},{"multiediting-cell":v&&"edit"===w})},L)};O.propTypes={cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,isEditing:o.default.bool,activeRowValidationState:o.default.object,tooltip:o.default.string,fromPrevApproved:o.default.bool,multiEditType:o.default.string},O.defaultProps={rowData:null,isMultiediting:!1,isEditable:!1,isEditing:!1,dataPrefix:"",isApproved:!1,isPrevApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",activeRowValidationState:{},tooltip:null,fromPrevApproved:!1,multiEditType:"edit"},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),h=a(45),v=n(h),m=a(15),_=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.data[this.props.rowIndex],a=e.data[e.rowIndex];return!(0,v.default)(t,a)||e.editingCountry===a.country_id||this.props.editingCountry===t.country_id||this.props.lpftView!==e.lpftView||e.isMultiEditing||this.props.isHistoricalDataViewEnabled||this.props.isHistoricalDataViewEnabled!==e.isHistoricalDataViewEnabled||!(0,v.default)(this.props.collapsedList,e.collapsedList)||this.props.clipboardEmpty!==e.clipboardEmpty||this.props.isEditable!==e.isEditable}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.rowIndex,n=e.children,r=e.editingCountry,i=e.isEditable,l=e.isTracking,o=e.isAdjusted,s=e.isMultiEditing,d=t[a];return u.default.createElement(m.Row,{className:(0,p.default)({tracking:l&&("actual"===d.valuesType||"generic"===d.valuesType&&o||"generic"===d.valuesType&&!i||"generic_overallocated"===d.valuesType)},{approved:l&&"generic"===d.valuesType},{actual:l&&"actual"===d.valuesType},{rollup:"rollup"===d.type},{region:"region"===d.type},{country:"country"===d.type},{overallocated:"generic_overallocated"===d.valuesType||"adjusted_overallocated"===d.valuesType},{editing:r===d.country_id&&"actual"!==d.valuesType&&("adjusted"===d.valuesType||!o&&"generic"===d.valuesType)},{editable:i&&"actual"!==d.valuesType&&("adjusted"===d.valuesType||!o&&"generic"===d.valuesType)},{multiediting:s},{"hidden-row":"actual"!==d.valuesType&&d.onlyActuals},{"hidden-row":"generic"===d.valuesType&&d.ignoreGenericData},{"hidden-row":"adjusted"===d.valuesType&&d.ignoreAdjustedData},{"only-actuals-row":"actual"===d.valuesType&&d.onlyActuals},{"ignore-adjusted-row":("approved"===d.valuesType||"actual"===d.valuesType)&&d.ignoreAdjustedData},{"has-ignore-adjusted-row":"generic"===d.valuesType&&d.ignoreAdjustedData})},n)}}]),t}(u.default.Component);_.propTypes={children:c.default.node.isRequired,data:c.default.array.isRequired,rowIndex:c.default.number,editingCountry:c.default.oneOfType([c.default.string,c.default.number]),isEditable:c.default.bool,isTracking:c.default.bool,isAdjusted:c.default.bool,isMultiEditing:c.default.bool,lpftView:c.default.bool,isHistoricalDataViewEnabled:c.default.bool,collapsedList:c.default.array,clipboardEmpty:c.default.bool},_.defaultProps={rowIndex:-1,editingCountry:void 0,isEditable:!1,isTracking:!1,isAdjusted:!1,isMultiEditing:!1,lpftView:!0,isHistoricalDataViewEnabled:!1,collapsedList:[],clipboardEmpty:!0},t.default=_},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(897),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(12),c=n(d),f=a(6),p=a(15),h=a(14),v=n(h),m=a(327),_=n(m),E=function(e){var t=e.rowData,a=e.isIgnored,n=e.isTracking,r=e.isOverallocated;return i.default.createElement(p.Cell,{width:"50%",overflow:!0,className:(0,u.default)("location-cell actual",{tracking:n,ignored:a})},i.default.createElement("div",{className:(0,u.default)({h2:!("country"===t.type&&!t.isRegionCountry)}),style:{margin:"0 4px",display:"flex",alignItems:"center",paddingTop:"5px",justifyContent:t.onlyActuals||t.ignoreGenericData?"flex-start":"flex-end"}},i.default.createElement(i.default.Fragment,null,t.onlyActuals&&"country"===t.type&&i.default.createElement(v.default,{overlay:"Country is not included to the scenario"},i.default.createElement("div",{className:"row-control-icon--info"},f.Icons.INFO_O)),(t.onlyActuals||t.ignoreGenericData)&&i.default.createElement(i.default.Fragment,null,i.default.createElement(_.default,{showTooltip:!0,status:(0,c.default)(t,"country_sites_approval_status.status")}),"country"===t.type&&t.location+(t.isEnroled?"":"*"),"region"===t.type&&t.location,"rollup"===t.type&&i.default.createElement("div",{className:"location-name-cell__title"},"Global (",t.amount_countries,")"))),r&&i.default.createElement(v.default,{placement:"top",overlay:i.default.createElement("span",null,"Actual study data. Considers re-allocation.")},i.default.createElement("div",{className:"scenario-table__row-overallocated-icon"},t.actual_overallocation>0?f.Icons.PATIENTS_OVER_ALLOCATION:f.Icons.PATIENTS_UNDER_ALLOCATION))))};E.defaultProps={isTracking:!1,isIgnored:!1,isOverallocated:!1},E.propTypes={rowData:o.default.object.isRequired,isTracking:o.default.bool,isIgnored:o.default.bool,isOverallocated:o.default.bool},t.default=E},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(15),c=function(e){var t=e.rowData,a=e.isIgnored;return i.default.createElement(d.Cell,{width:"25%",className:(0,u.default)("align--right","actual",{empty:!t.values.patient_allocation,ignored:a},"value-cell")},i.default.createElement("div",null,t.values.patient_allocation||""))};c.defaultProps={isIgnored:!1},c.propTypes={rowData:o.default.object.isRequired,isIgnored:o.default.bool},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(15),c=function(e){var t=e.rowData,a=e.isIgnored;return i.default.createElement(d.Cell,{width:"12.5%",className:(0,u.default)("align--right","actual",{empty:!t.values.num_sites,ignored:a},"value-cell")},i.default.createElement("div",null,t.values.num_sites||""))};c.defaultProps={isIgnored:!1},c.propTypes={rowData:o.default.object.isRequired,isIgnored:o.default.bool},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(15),c=a(14),f=n(c),p=function(e){var t=e.rowData,a=e.isIgnored,n=e.isTracking,r=e.showCountryName;return i.default.createElement(d.Cell,{width:"50%",overflow:!0,className:(0,u.default)("location-cell adjusted value-cell",{tracking:n,ignored:a})},i.default.createElement("div",{className:(0,u.default)("location-name-cell",{h2:!("country"===t.type&&!t.isRegionCountry)})},r&&"country"===t.type&&t.location+(t.isEnroled?"":"*"),r&&"region"===t.type&&t.location,"",t.hasOverallocation&&i.default.createElement(f.default,{placement:"top",overlay:i.default.createElement("span",null,"Adjusted plan data with overallocation")},i.default.createElement("div",{className:"overallocated-icon__wrapper"},"O/E"))))};p.defaultProps={isTracking:!1,isIgnored:!1,showCountryName:!1},p.propTypes={rowData:o.default.object.isRequired,isTracking:o.default.bool,isIgnored:o.default.bool,showCountryName:o.default.bool},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(12),c=n(d),f=a(15),p=a(14),h=n(p),v=a(327),m=n(v),_=function(e){var t=e.rowData,a=e.isIgnored,n=e.isTracking,r=e.cellClickHandler,l=e.multiEditType,o=e.navigateToViewSites,s=e.scenario,d=e.studyId,p=e.canViewSites;return"multiediting"===t.type&&"unlock"===l?i.default.createElement(f.Cell,{width:"50%",overflow:!0,className:(0,u.default)("location-cell value-cell",{tracking:n,ignored:a})},i.default.createElement("div",{className:"flex-4-8 multiediting-cell align--right unlock unlock-hint"},i.default.createElement("div",{className:"unlock-hint__message"},"Select columns to remove user constraints"))):i.default.createElement(f.Cell,{width:"50%",overflow:!0,cellClickHandler:function(e){return r(t,"location",e.target)},className:(0,u.default)("location-cell value-cell",{tracking:n,ignored:a})},i.default.createElement("div",{className:(0,u.default)("location-name-cell",{h2:!("country"===t.type&&!t.isRegionCountry)})},"country"===t.type&&i.default.createElement("div",{className:"location-name-cell__title clickable",onClick:p&&null!==t.platform_country_id?function(){return o(d,s.id,t.platform_country_id)}:void 0},i.default.createElement(m.default,{showTooltip:!0,status:(0,c.default)(t,"country_sites_approval_status.status")}),t.location+(t.isEnroled||!n?"":"*")),"rollup"===t.type&&i.default.createElement("div",{className:"location-name-cell__title"},"Global (",t.amount_countries,")"),"region"===t.type&&i.default.createElement("div",{className:"location-name-cell__title"},t.location," (",t.amount_countries,")"),t.hasOverallocation&&i.default.createElement(h.default,{placement:"top",overlay:i.default.createElement("span",null,n?"Current Approved plan data with over-enrollment":"Enrollment parameters with over-enrollment")},i.default.createElement("div",{className:"overallocated-icon__wrapper"},"O/E"))))};_.defaultProps={isTracking:!1,isIgnored:!1,multiEditType:"edit",studyId:null,canViewSites:!0},_.propTypes={rowData:o.default.object.isRequired,cellClickHandler:o.default.func.isRequired,isTracking:o.default.bool,isIgnored:o.default.bool,multiEditType:o.default.string,scenario:o.default.object.isRequired,navigateToViewSites:o.default.func.isRequired,studyId:o.default.number,canViewSites:o.default.bool},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(6),c=a(15),f=a(14),p=n(f),h=function(e){var t=e.rowData,a=e.isIgnored,n=e.isTracking,r="generic_overallocated"===t.valuesType?"Current Approved plan data without over-enrolled patients":"Adjusted plan data without over-enrolled patients";return i.default.createElement(c.Cell,{width:"50%",overflow:!0,className:(0,u.default)("location-cell",{tracking:n,ignored:a})},i.default.createElement("div",{className:(0,u.default)("overallocated_cell",{h2:!("country"===t.type&&!t.isRegionCountry)}),style:{margin:"0 4px",display:"flex",alignItems:"center",paddingTop:"5px"}},i.default.createElement(p.default,{placement:"top",overlay:i.default.createElement("span",null,n?r:"Enrollment parameters without over-enrolled patients")},i.default.createElement("div",{className:"scenario-table__row-overallocated-icon"},d.Icons.TARGET))))};h.defaultProps={isTracking:!1,isIgnored:!1},h.propTypes={rowData:o.default.object.isRequired,isTracking:o.default.bool,isIgnored:o.default.bool},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(15),c=function(e){var t=e.rowData,a=e.isTracking,n=e.isIgnored;return i.default.createElement(d.Cell,{width:"25%",className:(0,u.default)("align--right","overallocated",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.patient_allocation,ignored:n},"value-cell")},i.default.createElement("div",null,t.values.patient_allocation||""))};c.defaultProps={isTracking:!1,isIgnored:!1},c.propTypes={rowData:o.default.object.isRequired,isTracking:o.default.bool,isIgnored:o.default.bool},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(15),c=function(e){var t=e.rowData,a=e.isTracking,n=e.isIgnored;return i.default.createElement(d.Cell,{width:"12.5%",className:(0,u.default)("align--right","overallocated",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.num_sites,ignored:n},"value-cell")},i.default.createElement("div",null,t.values.num_sites||""))};c.defaultProps={isTracking:!1,isIgnored:!1},c.propTypes={rowData:o.default.object.isRequired,isTracking:o.default.bool,isIgnored:o.default.bool},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(117),c=n(d),f=a(15),p=a(27),h=n(p),v=a(120),m=n(v),_=a(14),E=n(_),g=a(119),y=n(g),S=a(10),b=a(8),C=a(52),O=function(e){var t=e.cellClickHandler,a=e.onFocusCountry,n=e.onDataChange,r=e.rowData,l=e.isMultiediting,o=e.isEditable,s=e.dataPrefix,d=e.isApproved,p=e.isAdjusted,v=e.adjustedRow,_=e.isTracking,g=e.historicalEnabled,O=e.historicalDataKey,T=e.activeRowValidationState,R=e.tooltip,A=e.fromPrevApproved,I=e.multiEditType,w=null,N=r.ignore_aggregation,D=(0,b.isCellDimmed)(S.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION,r,O,g);return N&&v?w=i.default.createElement("div",null):"country"===r.type&&o?(w=i.default.createElement("div",null,i.default.createElement(h.default,{onBlur:function(e,t){+t.value!=+r.values.patient_allocation&&n(r.country_id,s+"patient_allocation",t,null,+r.values.patient_allocation)},onFocus:function(e){return a(e,r.country_id)},narrow:!0,status:r.values.invalids&&r.values.invalids.includes("patient_allocation")||r.invalidFields&&r.invalidFields.includes("patient_allocation")?"error":"success",type:"text",value:r.values.patient_allocation||"",validators:[function(e){return""===e||c.default.isInt(e,{min:1,max:1e6})}],onKeyDown:function(e){"Escape"!==e.key&&"Enter"!==e.key||e.target.blur()},withoutBorder:!0,textAlign:"right",placeholder:""})),R&&(w=i.default.createElement(E.default,{mouseEnterDelay:.7,placement:"bottom",overlayClassName:"fpo-sidebar-button__tooltip patients-cell",overlay:R},w))):l?w="unlock"===I?i.default.createElement(f.Cell,{className:"flex-2-8 multiediting-cell align--right unlock"},i.default.createElement(y.default,{type:S.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION,unlock:r.unlock,onChange:n})):i.default.createElement(m.default,{key:"multiediting_"+S.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION,value:r[S.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION]||"",onChange:function(e){var t=""!==e?parseInt(e,10):"";n(null,S.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION,t,"multiediting")},type:"text",validators:[function(e){return""===e||c.default.isInt(e,{min:1,max:1e6})}],isValid:T[S.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION],isEditMode:!0}):"country"===r.type&&o||l||(w=i.default.createElement("div",null," ",r.values.patient_allocation||""," "),"country"===r.type&&R&&(w=i.default.createElement(E.default,{mouseEnterDelay:.3,placement:"bottom",overlayClassName:"fpo-sidebar-button__tooltip patients-cell",overlay:R},w))),i.default.createElement(f.Cell,{width:"25%",className:(0,u.default)("align--right","value-cell",{overridden:(0,C.isOverriden)(r[s+"overrideList"],r[s+"unlock"],_,p,v,r.values.patient_allocation,"patient_allocation"),approved:(d&&_||p&&!A)&&!v,editable:"country"===r.type&&o,historical:g,ignored:N,dimmed:D},{"multiediting-cell":l&&"edit"===I}),cellClickHandler:function(e){return t(r,"patient_allocation",e)}},w)};O.propTypes={cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,activeRowValidationState:o.default.object,tooltip:o.default.string,fromPrevApproved:o.default.bool,multiEditType:o.default.string},O.defaultProps={rowData:null,isMultiediting:!1,isEditable:!1,dataPrefix:"",isApproved:!1,isPrevApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",activeRowValidationState:{},tooltip:null,fromPrevApproved:!1,multiEditType:"edit"},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(117),c=n(d),f=a(15),p=a(27),h=n(p),v=a(120),m=n(v),_=a(14),E=n(_),g=a(109),y=n(g),S=a(119),b=n(S),C=a(10),O=a(8),T=a(52),R=function(e){var t=e.cellClickHandler,a=e.onFocusCountry,n=e.onDataChange,r=e.rowData,l=e.isMultiediting,o=e.isEditable,s=e.dataPrefix,d=e.isApproved,p=e.isAdjusted,v=e.adjustedRow,_=e.isTracking,g=e.historicalEnabled,S=e.historicalDataKey,R=e.activeRowValidationState,A=e.tooltip,I=e.fromPrevApproved,w=e.multiEditType,N=null,D=(0,O.isCellDimmed)(C.ENROLMENT_TABLE_FIELDS_LIST.NUM_SITES,r,S,g);return"country"===r.type&&o?(N=i.default.createElement("div",null,i.default.createElement(h.default,{onFocus:function(e){return a(e,r.country_id)},onBlur:function(e,t){+t.value!==r.values.num_sites&&n(r.country_id,s+"num_sites",t,null,+r.values.num_sites)},narrow:!0,status:r.values.invalids&&r.values.invalids.includes("num_sites")||r.invalidFields&&r.invalidFields.includes("num_sites")?"error":"success",type:"text",value:r.values.num_sites||"",onKeyDown:function(e){"Escape"!==e.key&&"Enter"!==e.key||e.target.blur()},validators:[function(e){return""===e||c.default.isInt(e,{min:1,max:1e4})}],withoutBorder:!0,textAlign:"right",placeholder:""})),A&&(N=i.default.createElement(E.default,{mouseEnterDelay:.3,placement:"bottom",overlayClassName:"fpo-sidebar-button__tooltip",overlay:A},N))):l?N="unlock"===w?i.default.createElement(f.Cell,{className:"flex-1-8 multiediting-cell align--right unlock"},i.default.createElement(b.default,{type:C.ENROLMENT_TABLE_FIELDS_LIST.NUM_SITES,unlock:r.unlock,onChange:n})):i.default.createElement(m.default,{key:"multiediting_"+C.ENROLMENT_TABLE_FIELDS_LIST.NUM_SITES,value:r.values.num_sites||"",onChange:function(e){var t=""!==e?parseInt(e,10):"";n(null,C.ENROLMENT_TABLE_FIELDS_LIST.NUM_SITES,t,"multiediting")},type:"text",isValid:R[C.ENROLMENT_TABLE_FIELDS_LIST.NUM_SITES],validators:[function(e){return""===e||c.default.isInt(e,{min:1,max:1e4})}],isEditMode:!0}):"country"===r.type&&o||l||(N=i.default.createElement(i.default.Fragment,null,i.default.createElement(y.default,{key:1,isNotEmpty:r.values.num_sites&&r.values.num_sites>0,generatedFields:r.generatedFields,cellName:C.ENROLMENT_TABLE_FIELDS_LIST.NUM_SITES}),i.default.createElement("div",{key:2}," ",r.values.num_sites||""," "))),i.default.createElement(f.Cell,{width:"12.5%",className:(0,u.default)("align--right","value-cell",{overridden:(0,T.isOverriden)(r[s+"overrideList"],r[s+"unlock"],_,p,v,r.values.num_sits,"num_sites"),approved:(d&&_||p&&!I)&&!v,editable:"country"===r.type&&o,historical:g,dimmed:D,ignored:r.ignore_aggregation,generated:r.generatedFields&&r.generatedFields.includes("num_sites")},{"multiediting-cell":l&&"edit"===w}),cellClickHandler:function(e){return t(r,"num_sites",e)}},N)};R.propTypes={cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,activeRowValidationState:o.default.object,tooltip:o.default.string,fromPrevApproved:o.default.bool,multiEditType:o.default.string},R.defaultProps={rowData:null,isMultiediting:!1,isEditable:!1,dataPrefix:"",isApproved:!1,isPrevApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",activeRowValidationState:{},tooltip:null,fromPrevApproved:!1,multiEditType:"edit"},t.default=R},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LocationDataCell=t.LocationHeaderCell=void 0;var r=a(911),i=n(r),l=a(910),o=n(l);t.LocationHeaderCell=i.default,t.LocationDataCell=o.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),l=n(i),o=a(1),s=n(o),u=a(2),d=n(u),c=a(15),f=a(903),p=n(f),h=a(904),v=n(h),m=a(899),_=n(m),E=a(902),g=n(E),y=a(900),S=n(y),b=a(905),C=n(b),O=a(908),T=n(O),R=a(907),A=n(R),I=a(901),w=n(I),N=a(906),D=n(N),P=a(85),L=a(323),M=function(e){var t=e.rowIndex,a=e.data,n=e.cellClickHandler,i=e.onFocusCountry,o=e.onDataChange,s=e.editingCountry,u=e.historicalEnabled,f=e.historicalFilter,h=e.isAdjusted,m=e.isApproved,E=e.isPrevApproved,y=e.isTracking,b=e.activeRowValidationState,O=e.isEditable,R=e.fromPrevApproved,I=e.multiEditType,N=e.navigateToViewSites,P=e.scenario,M=e.studyId,k=e.canViewSites,x=r({},a[t]),j=x.ignore_aggregation,F="adjusted"===x.valuesType,U=!!F&&(0,L.showInAdjustedRow)(x.valuesType,a,t),V="generic"===x.valuesType&&(m||h),B=F?"adjusted_":"",H="country"===x.type&&void 0!==x.actual_overallocation&&0!==x.actual_overallocation,G=O&&!V&&(!s||s===x.country_id||a.every(function(e){return!e.values.invalids||e.values.invalids&&0===e.values.invalids.length})),Y="multiediting"===x.type,z="historical_reference_data_by_"+f.toLowerCase(),W=x.errorMessages||{},q={isAdjusted:h,isTracking:y,isEditable:G&&!j,isMultiediting:Y,multiEditType:I,isApproved:m,isPrevApproved:E,rowData:x,historicalEnabled:u,historicalDataKey:z,dataPrefix:B,adjustedRow:F,cellClickHandler:n,onFocusCountry:i,onDataChange:o,activeRowValidationState:b,fromPrevApproved:R},K="Min# of patients: \n                    "+((F?x.adjusted_patient_allocation_min:x.patient_allocation_min)||"-")+" \n                   Max# of patients: \n                    "+((F?x.adjusted_patient_allocation_max:x.patient_allocation_max)||"-"),X=l.default.createElement(A.default,r({tooltip:W.patient_allocation||K},q)),Z=l.default.createElement(T.default,r({tooltip:W.num_sites},q));return l.default.createElement(c.CellGroup,{direction:"column"},"generic"===x.valuesType&&l.default.createElement(c.CellGroup,{direction:"row",className:(0,d.default)("data-group active",{tracking:y})},l.default.createElement(p.default,{multiEditType:I,rowData:x,cellClickHandler:n,isTracking:y,isIgnored:j,navigateToViewSites:N,scenario:P,studyId:M,canViewSites:k}),X,Z),"generic_overallocated"===x.valuesType&&l.default.createElement(c.CellGroup,{direction:"row",className:(0,d.default)("data-group active",{tracking:!0})},l.default.createElement(v.default,{rowData:x,isTracking:y,isIgnored:j}),l.default.createElement(C.default,{rowData:x,isTracking:y,isIgnored:j}),l.default.createElement(D.default,{rowData:x,isTracking:y,isIgnored:j})),"actual"===x.valuesType&&l.default.createElement(c.CellGroup,{direction:"row",className:(0,d.default)("data-group active",{tracking:y})},l.default.createElement(_.default,{rowData:x,isOverallocated:H,isTracking:y,isIgnored:j}),l.default.createElement(S.default,{rowData:x,isIgnored:j}),l.default.createElement(w.default,{rowData:x,isIgnored:j})),"adjusted"===x.valuesType&&l.default.createElement(c.CellGroup,{direction:"row",className:(0,d.default)("data-group active",{tracking:!1,adjusted:!0})},l.default.createElement(g.default,{showCountryName:U,rowData:x,isTracking:y,isIgnored:j}),X,Z),"adjusted_overallocated"===x.valuesType&&l.default.createElement(c.CellGroup,{direction:"row",className:(0,d.default)("data-group active",{tracking:!0})},l.default.createElement(v.default,{rowData:x,isTracking:y,isIgnored:j}),l.default.createElement(C.default,{rowData:x,isTracking:y,isIgnored:j}),l.default.createElement(D.default,{rowData:x,isTracking:y,isIgnored:j})))};M.displayName="LocationDataCell",M.defaultProps={rowIndex:-1,editingCountry:void 0,isEditable:!1,isAdjusted:!1,isApproved:!1,isPrevApproved:!1,isTracking:!1,historicalEnabled:!1,historicalFilter:P.FILTER_BY.STUDIES,activeRowValidationState:{},fromPrevApproved:!1,multiEditType:"edit",studyId:null,canViewSites:!0},M.propTypes={rowIndex:s.default.number,data:s.default.array.isRequired,cellClickHandler:s.default.func.isRequired,onFocusCountry:s.default.func.isRequired,onDataChange:s.default.func.isRequired,editingCountry:s.default.oneOfType([s.default.string,s.default.number]),isEditable:s.default.bool,isAdjusted:s.default.bool,isApproved:s.default.bool,isPrevApproved:s.default.bool,isTracking:s.default.bool,historicalEnabled:s.default.bool,historicalFilter:s.default.oneOf(Object.keys(P.FILTER_BY)),activeRowValidationState:s.default.object,fromPrevApproved:s.default.bool,multiEditType:s.default.string,scenario:s.default.object.isRequired,navigateToViewSites:s.default.func.isRequired,studyId:s.default.number,canViewSites:s.default.bool},t.default=M},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(15),u=function(e){var t=e.caption;return i.default.createElement(s.CellGroup,null,i.default.createElement(s.Cell,{className:"cell-caption"},i.default.createElement("h3",null,t)),i.default.createElement(s.CellGroup,{direction:"row",className:"header-group"},i.default.createElement(s.Cell,{width:"50%",className:"align--left header-cell"},i.default.createElement("div",null,"Locations")),i.default.createElement(s.Cell,{width:"25%",className:"align--right header-cell"},i.default.createElement("div",null,"Patients")),i.default.createElement(s.Cell,{width:"12.5%",className:"align--right header-cell"},i.default.createElement("div",null,"Sites"))))};u.propTypes={caption:o.default.element.isRequired},t.default=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(15),h=a(14),v=n(h),m=a(927),_=n(m),E=a(799),g=n(E),y=a(769),S=n(y),b=a(6),C=a(10),O=a(506);a(2173);var T=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExcludeCountry=function(e){var t=a.props,n=t.removeCountryPopUp,r=t.data,i=t.rowIndex,l=o({},r[i]);e.stopPropagation(),n(l.country_id,l.country_name,l.region_id,l.region_name),a.closeCountryMenu()},a.handleViewSites=function(e){var t=a.props,n=t.navigateToViewSites,r=t.studyId,i=t.scenario,l=t.data,s=t.rowIndex,u=o({},l[s]);e.stopPropagation(),n(r,i.id,u.platform_country_id),a.closeCountryMenu()},a.handleCalculationToggle=function(e){var t=a.props,n=t.onDataChange,r=t.data,i=t.rowIndex,l=o({},r[i]);e.stopPropagation(),n(l.country_id,"ignore_aggregation",{value:!l.ignore_aggregation},l.override_id),a.closeCountryMenu()},a.closeCountryMenu=function(){a.setState({hideCountryMenu:!0})},a.state={hideCountryMenu:!0},a.handleClicked=a.handleClicked.bind(a),a.handleOutsideClick=a.handleOutsideClick.bind(a),a}return l(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=o({},e.data[e.rowIndex]),n=o({},this.props.data[this.props.rowIndex]),r=a.ignoreGenericData||!1;return!t.hideCountryMenu||t.hideCountryMenu!==this.state.hideCountryMenu||a.type!==n.type||r||this.props.showMenu!==e.showMenu||e.data.length!==this.props.data.length||a.ignore_aggregation!==n.ignore_aggregation}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleOutsideClick)}},{key:"handleClicked",value:function(e){e.stopPropagation(),this.state.hideCountryMenu&&document.addEventListener("click",this.handleOutsideClick),this.row=e.target.closest(".react-flex-table__row"),this.row&&this.row.classList.add("hovered"),this.setState({hideCountryMenu:!1})}},{key:"handleOutsideClick",value:function(e){var t=this;"true"!==e.target.getAttribute("data-ignore-click-outside")&&(this.row&&this.row.classList.remove("hovered"),this.setState({hideCountryMenu:!0},function(){document.removeEventListener("click",t.handleOutsideClick)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.showMenu,n=t.rowIndex,r=t.scenario,i=t.removeRegionPopUp,l=t.handleAddCountry,s=t.platformRegions,u=t.data,c=t.handleAddRegion,f=t.studyId,h=t.isEditable,m=t.canViewSites,E=t.onMultiEditingCancel,y=t.onCopy,T=t.onDataChange,R=t.onPaste,A=t.clipboardEmpty,I=t.isAdjusted,w=t.fullData,N=o({},u[n]);if("generic_overallocated"===N.valuesType||"adjusted_overallocated"===N.valuesType)return null;var D=this.state.hideCountryMenu?{}:{visible:!1};return!a&&"multiediting"!==N.type||this.props.isAdjusted&&("generic"===N.valuesType||"actual"===N.valuesType)?null:function(){if("rollup"===N.type&&h)return d.default.createElement(p.Cell,{overflow:!0,className:"table-menu-cell"},d.default.createElement(S.default,{platformRegions:s,assignedRegions:u.filter(function(e){return"region"===e.type||e.regionHasSingleCountry}).map(function(e){return e.regionHasSingleCountry?e.region_name:e.location}),addScenarioRegion:c,studyId:f,scenarioId:r.id}));var t=s.find(function(e){return"region"===N.type&&N.location===e.name})||{};if("region"===N.type&&h){var a=(t.countries||[]).concat({id:-1,name:"Unspecified country",region_id:N.region_id}).map(function(e){return e.name}),n=w.filter(function(e){return e.type===C.SCENARIO_DATA_TYPE.COUNTRY&&e.region_id===N.region_id}),P=n.map(function(e){return e.country_name}),L=n.filter(function(e){return e.hasActuals}).length>0;return d.default.createElement(p.Cell,{overflow:!0,className:"table-menu-cell"},d.default.createElement(v.default,o({mouseEnterDelay:.3},D,{overlayClassName:"scenario-table__region-more-tooltip",align:{offset:[0,10]},overlay:d.default.createElement("span",null,"Actions")}),d.default.createElement(v.default,{overlayClassName:"scenario-table__region-actions-tooltip",align:{offset:[0,-10]},placement:"bottomRight",trigger:["click"],overlay:d.default.createElement(_.default,{hideRemoveRegions:L,onRemoveRegion:function(){return i(N.region_id,N.location)},onAddCountry:function(e){return l(e,N.location,N.region_id)},countries:a,assignedCountries:P})},d.default.createElement("div",{className:"row-control-icon--more",onClick:e.handleClicked},b.Icons.MORE_HORIZ))))}if("country"===N.type){var M=N.hasActuals;return"generic"===N.valuesType||"adjusted"===N.valuesType||N.canBeIgnored||N.ignore_aggregation?d.default.createElement(p.Cell,{overflow:!0,className:"table-menu-cell"},d.default.createElement(v.default,o({},D,{mouseEnterDelay:.3,overlayClassName:"scenario-table__region-more-tooltip",align:{offset:[0,0]},overlay:d.default.createElement("span",null,"Actions")}),d.default.createElement(v.default,{overlayClassName:"scenario-table__country-actions-tooltip",align:{offset:[0,0]},placement:"bottomRight",visible:!e.state.hideCountryMenu,overlay:d.default.createElement(g.default,{isAdjusted:I,onUnlockCountry:function(t){t.stopPropagation(),T(N.country_id,O.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK,{value:Object.values(O.ENROLMENT_TABLE_FIELDS_LIST)},N.override_id,!1),e.setState({hideCountryMenu:!0})},hideUnlock:I||r.cohorts&&r.cohorts.length>0,hideIgnore:!N.canBeIgnored&&!N.ignore_aggregation||"adjusted"!==N.valuesType,isIgnored:N.ignore_aggregation,onCalculationToggle:e.handleCalculationToggle,onExcludeCountry:e.handleExcludeCountry,onViewSites:e.handleViewSites,canViewSites:m&&null!==N.platform_country_id,onCopy:function(t){t.stopPropagation(),y(N.country_id),e.setState({hideCountryMenu:!0})},onPaste:function(t){t.stopPropagation(),R(N.country_id),e.setState({hideCountryMenu:!0})},isEditable:h&&!M,clipboardEmpty:A})},d.default.createElement("div",{className:"row-control-icon--more",onClick:e.handleClicked},b.Icons.MORE_HORIZ)))):null}return"multiediting"===N.type?d.default.createElement("div",{className:"flex-4-8 multiediting-cell empty"},d.default.createElement("div",{className:"row-control-icon",onClick:E},b.Icons.CROSS_O)):null}()}}]),t}(u.Component);T.displayName="MenuCell",T.defaultProps={rowIndex:-1,activeCountry:null,activeCell:null,studyId:null,scenarioId:null,isEditable:!0,canViewSites:!0,platformRegions:[],assignedRegions:[],showMenu:!0,isAdjusted:!1,clipboardEmpty:!0,fullData:[],canManageSites:!1},T.propTypes={rowIndex:f.default.number,scenario:f.default.object.isRequired,data:f.default.array.isRequired,fullData:f.default.array,removeCountryPopUp:f.default.func.isRequired,removeRegionPopUp:f.default.func.isRequired,navigateToViewSites:f.default.func.isRequired,studyId:f.default.number,handleAddCountry:f.default.func.isRequired,platformRegions:f.default.array,handleAddRegion:f.default.func.isRequired,canViewSites:f.default.bool,isEditable:f.default.bool,showMenu:f.default.bool,isAdjusted:f.default.bool,onMultiEditingCancel:f.default.func.isRequired,onCopy:f.default.func.isRequired,onPaste:f.default.func.isRequired,clipboardEmpty:f.default.bool,onDataChange:f.default.func.isRequired},t.default=T},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),h=n(p),v=a(15),m=a(893),_=a(909),E=a(915),g=a(912),y=n(g),S=a(898),b=n(S),C=a(6),O=a(986),T=n(O),R=a(39),A=a(858),I=n(A),w=a(887),N=n(w),D=a(323),P=n(D),L=a(8),M=a(242),k=a(10),x=a(85);a(2174);var j=function(e,t){return t.filter(function(t){return!e.includes(t.region)})},F=function(e){function t(e){l(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.toggleCollapse=a.toggleCollapse.bind(a),a.cellClickHandler=a.cellClickHandler.bind(a),a.handleDataChange=a.handleDataChange.bind(a),a.handleLpftModeToggle=a.handleLpftModeToggle.bind(a),a.removeCountryPopUp=a.removeCountryPopUp.bind(a),a.removeRegionPopUp=a.removeRegionPopUp.bind(a),a.handleRemoveRegion=a.handleRemoveRegion.bind(a),a.handleOutsideClick=a.handleOutsideClick.bind(a),a.handleEsc=a.handleEsc.bind(a);var n=e.isAdjusted,r=e.isTracking;return a.state={lpftView:!0,collapsed:[],data:(0,P.default)(e.data,r,n,e.tableFilter),editingCountry:null,editingFieldName:"",historical:{studiesCount:0,uncertaintyLevel:null,cell:null,data:null,cellName:null},activeRowValidationState:{},showInvalidDataWarning:!1,showPopUp:!1,popUpMessage:"",popUpTitle:"",countryToRemove:null},a}return s(t,e),d(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleEsc,!0),document.addEventListener("click",this.handleOutsideClick,!0)}},{key:"componentWillReceiveProps",value:function(e){if(e.data!==this.props.data||e.tableFilter!==this.props.tableFilter){var t=e.isAdjusted,a=e.isTracking;this.setState({data:(0,P.default)(e.data,a,t,e.tableFilter),activeRowValidationState:{}})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleEsc,!0),document.removeEventListener("click",this.handleOutsideClick,!0)}},{key:"toggleCollapse",value:function(e){var t=[].concat(i(this.state.collapsed));t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.setState({collapsed:t})}},{key:"isAdjusted",value:function(){return null!==this.props.scenario.source_scenario_id}},{key:"handleOutsideClick",value:function(e){var t=this;if(e&&this.state.editingCountry){var a=this.props.data.filter(function(e){return e.type.toUpperCase()===k.COUNTRY}).find(function(e){return e.country_id===t.state.editingCountry});if(a&&a.invalidFields&&a.invalidFields.length>0||a&&a.adjusted_invalids&&a.adjusted_invalids.length>0)return void(e.target.closest(".react-datepicker")||e.target.closest(".fpo-button")||e.target.closest(".editing")||e.target.closest(".fpo-exit-button")||(this.setState({showInvalidDataWarning:!0}),e.stopPropagation(),e.preventDefault()))}if(this.props.isHistoricalDataViewEnabled)e.target.closest(".historical")||this.setState({historical:{studiesCount:0,uncertaintyLevel:null,cell:null,data:null,cellName:null}});else{var n=e.target.closest(".react-flex-table__row.country.editable"),r=e.target.closest(".popup-dialog");n||r||!this.state.editingCountry||this.setState({editingCountry:null,editingFieldName:""})}}},{key:"handleEsc",value:function(e){var t=this;if(this.state.editingCountry&&27===e.keyCode){var a=this.props.data.filter(function(e){return e.type.toUpperCase()===k.COUNTRY}).find(function(e){return e.country_id===t.state.editingCountry});if(a&&a.invalidFields&&a.invalidFields.length>0)return void(e.target.closest(".react-datepicker")||e.target.closest(".fpo-button")||e.target.closest(".editing")||e.target.closest(".fpo-exit-button")||(e.stopPropagation(),e.preventDefault()));this.setState(function(e){return t.props.resetCountryData(e.editingCountry,e.editingFieldName),{editingCountry:null,editingFieldName:""}})}}},{key:"cellClickHandler",value:function(e,t,a){var n=this.props,r=n.isHistoricalDataViewEnabled,i=n.isCohortView,l=n.scenario,o=n.isEditable,s=n.historicalFilter;if(a.target){var u=a.target.closest(".react-datepicker");if("location"===t||"collapse-icon-cell"===t)return void("region"!==e.type||e.isRegionCountry||this.toggleCollapse(e.location));if((o||r)&&!u){if(!r&&"adjusted"===e.valuesType){var d={editingFieldName:"adjusted_"+t};this.state.editingCountry!==e.country_id&&(d.editingCountry=e.country_id),this.setState(d)}var c=e.values[t],f="historical_reference_data_by_"+s.toLowerCase(),p=x.FIELDS[t],h=e[f]&&e[f][p]||[],v=a.target.closest(".historical");if(r&&h&&h.length>0&&c){var m=(0,L.getParameterUncertainty)(e,t,i);this.setState({historical:{studiesCount:h.length,uncertaintyLevel:m,cell:v,data:{satellites:h,cellName:p,value:(0,L.getParamShift)(c,l.fp)},cellName:t}})}}}}},{key:"handleDataChange",value:function(e,t,a,n,i){if("unlock"===n)return void this.props.onMultiEditingCellChange({unlock:u({},this.props.data[0].unlock,r({},t,a))});if("multiediting"===n){this.props.onMultiEditingCellChange(r({},t,a));var l=this.props.data[0];l[t]=a;var o=this.props.scenario,s=o.fp,d=o.end_date,c=o.fpfv_fpft,f=void 0!==l.fsiv?l.fsiv:null,p=void 0!==l.fpfv?l.fpfv:null,h=void 0!==l["25_si"]?l["25_si"]:null,v=void 0!==l["50_si"]?l["50_si"]:null,m=void 0!==l["90_si"]?l["90_si"]:null,_=void 0!==l.num_sites?l.num_sites:null,E=void 0!==l.patient_allocation?l.patient_allocation:null,g=void 0!==l.sas?l.sas:null,y=void 0!==l.screening_failure?l.screening_failure:null,S=void 0!==l.randomisation_rate?l.randomisation_rate:null,b=(0,M.validateCurvesCalcArguments)(s,d,f,p,h,v,m,_,E,g,y,S,c,null),C=b.invalidFields.reduce(function(e,t){return e[t]=!1,e},{});return void this.setState({activeRowValidationState:u({},C)})}this.props.onDataChange(e,{fieldName:t,newValue:null!==a.value&&void 0!==a.value&&""!==a.value?a.value:null,oldValue:void 0!==i?i:null})}},{key:"editingCountryHandler",value:function(e,t){var a=this;if(this.state.editingCountry){var n=this.props.data.filter(function(e){return e.type.toUpperCase()===k.COUNTRY}).find(function(e){return e.country_id===a.state.editingCountry});if(n&&n.invalidFields&&n.invalidFields.length>0||n&&n.adjusted_invalids&&n.adjusted_invalids.length>0)return void(e&&(e.stopPropagation(),e.preventDefault()))}this.state.editingCountry!==t&&this.setState({editingCountry:t})}},{key:"handleLpftModeToggle",value:function(){this.setState({lpftView:!this.state.lpftView})}},{key:"removeCountryPopUp",value:function(e,t,a,n){var r=this.props.isCohortView,i=f.default.createElement("div",null,f.default.createElement("span",null,"Are you sure you want to remove"),f.default.createElement("span",{className:"bold"}," ",t),f.default.createElement("span",null,!r&&" and exclude it from future optimizations","?"));this.setState({showPopUp:!0,removeType:"country",popUpMessage:i,popUpTitle:"Exclude country",countryToRemove:{countryName:t,regionId:a,regionName:n}})}},{key:"removeRegionPopUp",value:function(e,t){var a=this.props.isCohortView,n=f.default.createElement("div",null,f.default.createElement("span",null,"Are you sure you want to remove"),f.default.createElement("span",{className:"bold"}," ",t),f.default.createElement("span",null," and all"),f.default.createElement("span",{className:"bold"}," selected countries"),f.default.createElement("span",null," within "),f.default.createElement("span",{className:"bold"},t),f.default.createElement("span",null,!a&&", and exclude them from future optimizations","?"));this.setState({showPopUp:!0,popUpMessage:n,popUpTitle:"Remove region",removeType:"region",countryToRemove:e})}},{key:"handleRemoveCountry",value:function(){this.props.handleDeleteCountry(this.state.countryToRemove.countryName,this.state.countryToRemove.regionId,this.state.countryToRemove.regionName),this.setState({showPopUp:!1,popUpMessage:"",countryToRemove:null,editingCountry:null,editingFieldName:""})}},{key:"handleRemoveRegion",value:function(){this.props.handleDeleteRegion(this.state.countryToRemove),this.setState({showPopUp:!1,popUpMessage:"",countryToRemove:null,editingCountry:null,editingFieldName:""})}},{key:"render",value:function(){var e=this,t=this.state,a=t.editingCountry,n=t.historical,r=t.collapsed,i=t.data,l=t.lpftView,o=this.props,s=o.isEditable,u=o.scenario,d=o.study,c=o.isTracking,p=o.isHistoricalDataViewEnabled,h=o.historicalFilter,g=o.platformRegions,S=o.tableHeaderPosition,O=o.handleAddCountry,A=o.handleAddRegion,w=o.navigateToViewSites,D=o.isCohortView,P=o.onMultiEditingCancel,L=o.onMultiCheck,M=o.isMultiEditing,x=o.multiRegionsData,F=o.onMultiEditingApply,U=o.onCopy,V=o.onPaste,B=o.clipboardEmpty,H=o.multiEditType,G=o.canManageSites,Y=j(r,i).filter(function(e){return"region"===e.type&&e.isRegionCountry?null:e}),z=f.default.createElement(R.ActionButton,{action:function(){return e.setState({showPopUp:!1,popUpMessage:"",countryToRemove:null})}},"Cancel"),W=f.default.createElement(R.ActionButton,{action:function(){return e.handleRemoveCountry()},primary:!0},"Confirm"),q=f.default.createElement(R.ActionButton,{action:function(){return e.handleRemoveRegion()},primary:!0},"Confirm");return f.default.createElement("div",{className:"planing-enrolment-table"},f.default.createElement(v.FlexTable,{rowsCount:Y.length,stickyHeader:!0,stickyPosition:S,rowHeight:40,headerHeight:93},f.default.createElement(b.default,{data:Y,isEditable:s,editingCountry:a,isAdjusted:this.props.isAdjusted,isTracking:c,lpftView:l,collapsedList:this.state.collapsed,isHistoricalDataViewEnabled:p,isMultiEditing:M,clipboardEmpty:B},f.default.createElement(v.Column,{columnName:"collapse",className:"control-column",header:f.default.createElement(v.Cell,null),style:{display:"flex",alignItems:"flex-end"},data:f.default.createElement(N.default,{scenarioData:Y,onMultiCheck:L,onToggleEvents:this.props.onToggleEvents,cellClickHandler:this.cellClickHandler,collapsed:this.state.collapsed,isAdjusted:this.props.isAdjusted,isMultiEditing:M,multiRegionsData:x,data:i}),fixedWidth:!0,width:48}),f.default.createElement(v.Column,{columnName:"location",className:"location-column",header:f.default.createElement(_.LocationHeaderCell,{caption:C.Icons.LANGUAGE}),data:f.default.createElement(_.LocationDataCell,{data:Y,fromPrevApproved:u.fromPrevApproved,isAdjusted:this.props.isAdjusted,isApproved:u.status===k.SCENARIO_STATUS.APPROVED,isPrevApproved:u.status===k.SCENARIO_STATUS.PREV_APPROVED,isTracking:c,cellClickHandler:this.cellClickHandler,onDataChange:this.handleDataChange,editingCountry:a,isEditable:s,activeRowValidationState:this.state.activeRowValidationState,historicalEnabled:p,historicalFilter:h,onFocusCountry:function(t,a){return e.editingCountryHandler(t,a)},scenarioStatus:u.status,multiEditType:H,onMultiCheck:L,regionsData:x,navigateToViewSites:w,scenario:u,studyId:d.id,canViewSites:!p&&!D}),width:240}),f.default.createElement(v.Column,{columnName:"site-initiation",className:"site-initiation-column",header:f.default.createElement(E.SiteInitiationHeaderCell,{caption:"Site initiation"}),data:f.default.createElement(E.SiteInitiationDataCell,{fullData:this.props.data,data:Y,fromPrevApproved:u.fromPrevApproved,isAdjusted:this.props.isAdjusted,isApproved:u.status===k.SCENARIO_STATUS.APPROVED,isPrevApproved:u.status===k.SCENARIO_STATUS.PREV_APPROVED,isTracking:c,isExactCopy:u.exact_copy,activeRowValidationState:this.state.activeRowValidationState,onDataChange:this.handleDataChange,cellClickHandler:this.cellClickHandler,startDate:u.fp,editingCountry:a,isEditable:s,multiEditType:H,historicalEnabled:p,historicalFilter:h,onFocusCountry:function(t,a){return e.editingCountryHandler(t,a)},scenarioStatus:u.status}),width:410}),f.default.createElement(v.Column,{columnName:"enrolment",className:"enrolment-column",header:f.default.createElement(m.EnrolmentHeaderCell,{caption:"Enrollment rates",lpftView:l,lpftViewTypeToggle:this.handleLpftModeToggle}),data:f.default.createElement(m.EnrolmentDataCell,{data:Y,fromPrevApproved:u.fromPrevApproved,isAdjusted:this.props.isAdjusted,isApproved:u.status===k.SCENARIO_STATUS.APPROVED,isPrevApproved:u.status===k.SCENARIO_STATUS.PREV_APPROVED,isTracking:c,isExactCopy:u.exact_copy,activeRowValidationState:this.state.activeRowValidationState,onDataChange:this.handleDataChange,batchUpdate:this.props.batchUpdate,cellClickHandler:this.cellClickHandler,startDate:u.fp,endDate:u.end_date,editingCountry:a,isEditable:s,lpftView:l,historicalEnabled:p,historicalFilter:h,onFocusCountry:function(t,a){return e.editingCountryHandler(t,a)},scenarioStatus:u.status,regionsData:x,multiEditType:H,onMultiEditingApply:F}),width:440}),f.default.createElement(v.Column,{columnName:"menu",header:f.default.createElement(v.Cell,null),style:{display:"flex",alignItems:"center"},data:f.default.createElement(y.default,{showMenu:!p||G,isAdjusted:this.props.isAdjusted,fullData:this.props.data,data:Y,onDataChange:this.handleDataChange,isEditable:s,removeRegionPopUp:this.removeRegionPopUp,removeCountryPopUp:this.removeCountryPopUp,handleAddCountry:O,navigateToViewSites:w,platformRegions:g,handleAddRegion:A,canViewSites:!p&&!D,canManageSites:G,scenario:u,studyId:d.id,onMultiEditingCancel:P,onCopy:U,onPaste:V,clipboardEmpty:B}),fixedWidth:!0,width:32}))),f.default.createElement(I.default,{isShown:this.state.showInvalidDataWarning,onClose:function(){return e.setState({showInvalidDataWarning:!1})}}),f.default.createElement(R.PopupDialog,{isShown:this.state.showPopUp,title:this.state.popUpTitle,handleClose:function(){return e.setState({showPopUp:!1,popUpMessage:"",countryToRemove:null})},buttons:[z,"country"===this.state.removeType?W:q]},f.default.createElement("div",{className:"h2"},this.state.popUpMessage)),p&&f.default.createElement(T.default,{parent:n.cell,data:n.data,viewType:h,studiesCount:n.studiesCount,uncertaintyLevel:n.uncertaintyLevel,cellName:n.cellName}))}}]),t}(c.PureComponent);F.propTypes={data:h.default.array.isRequired,scenario:h.default.object.isRequired,onDataChange:h.default.func.isRequired,isEditable:h.default.bool,isTracking:h.default.bool,isCohortView:h.default.bool,isHistoricalDataViewEnabled:h.default.bool,historicalFilter:h.default.oneOf(Object.keys(x.FILTER_BY)),tableHeaderPosition:h.default.number,platformRegions:h.default.array,handleAddRegion:h.default.func.isRequired,handleAddCountry:h.default.func.isRequired,handleDeleteRegion:h.default.func.isRequired,handleDeleteCountry:h.default.func.isRequired,navigateToViewSites:h.default.func.isRequired,onToggleEvents:h.default.func.isRequired,study:h.default.object,isAdjusted:h.default.bool,isMultiEditing:h.default.bool,onMultiCheck:h.default.func.isRequired,resetCountryData:h.default.func.isRequired,multiRegionsData:h.default.object,onMultiEditingCancel:h.default.func.isRequired,onMultiEditingApply:h.default.func.isRequired,onMultiEditingCellChange:h.default.func.isRequired,batchUpdate:h.default.func.isRequired,onCopy:h.default.func.isRequired,onPaste:h.default.func.isRequired,clipboardEmpty:h.default.bool,tableFilter:h.default.object,multiEditType:h.default.string,canManageSites:h.default.bool},F.defaultProps={isEditable:!1,isTracking:!1,isCohortView:!1,isHistoricalDataViewEnabled:!1,historicalFilter:x.FILTER_BY.STUDIES,tableHeaderPosition:0,platformRegions:[],study:{},isAdjusted:!1,isMultiEditing:!1,multiRegionsData:{},clipboardEmpty:!0,tableFilter:null,multiEditType:"edit",canManageSites:!1},t.default=F},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(11),c=n(d),f=a(15),p=a(84),h=n(p),v=a(120),m=n(v),_=a(109),E=n(_),g=a(119),y=n(g),S=a(10),b=a(8),C=a(52),O=function(e){var t=e.rowData,a=e.isTracking,n=e.cellClickHandler,r=e.isApproved,l=e.isAdjusted,o=e.adjustedRow,s=e.isEditable,d=e.historicalEnabled,p=e.historicalDataKey,v=e.isMultiediting,_=e.onFocusCountry,g=e.startDate,O=e.datePickerFormat,T=e.onDataChange,R=e.dataPrefix,A=e.filterDate,I=e.activeRowValidationState,w=e.tooltip,N=e.today,D=e.fromPrevApproved,P=e.isExactCopy,L=e.multiEditType,M=(0,b.isCellDimmed)(S.ENROLMENT_TABLE_FIELDS_LIST.FSIV,t,p,d);return i.default.createElement(f.Cell,{width:"22%",cellClickHandler:function(e){return n(t,"fsiv",e)},className:(0,u.default)("value-cell",{overridden:(0,C.isOverriden)(t[R+"overrideList"],t[R+"unlock"],a,l,o,t.values.fsiv,"fsiv"),approved:(r&&a||l&&!D)&&!o,editable:"country"===t.type&&s,historical:d,dimmed:M,ignored:t.ignore_aggregation,generated:t.generatedFields&&t.generatedFields.includes("fsiv")},{"multiediting-cell":v&&"edit"===L})},"country"===t.type&&s&&i.default.createElement("div",null,i.default.createElement(h.default,{simpleView:!0,tooltip:w,onFocus:function(e){return _(e,t.country_id)},style:{width:"100%"},fixedHeight:!0,defaultDate:g.clone().add(1,"w"),filterDate:A,dateFormat:O,disabled:!P&&l&&t.values.fsiv&&t.values.fsiv.isBefore(N)&&t.actual_fsiv&&null!==t.actual_fsiv&&t.actual_fsiv.isSame(t.values.fsiv),disabledKeyboardNavigation:!0,onChange:function(e,a){return T(t.country_id,R+"fsiv",a,null,t.values.fsiv)},status:t.values.invalids&&t.values.invalids.includes("fsiv")||t.invalidFields&&t.invalidFields.includes("fsiv")?"error":null,validators:[function(e){return c.default.isMoment(e)}],selected:c.default.isMoment(t.values.fsiv)?t.values.fsiv:null})),v&&"unlock"===L&&i.default.createElement(f.Cell,{className:"flex-col-22 multiediting-cell unlock"},i.default.createElement(y.default,{type:S.ENROLMENT_TABLE_FIELDS_LIST.FSIV,unlock:t.unlock,onChange:T})),v&&"edit"===L&&i.default.createElement(m.default,{key:"multiediting_"+S.ENROLMENT_TABLE_FIELDS_LIST.FSIV,onChange:function(e){return T(null,S.ENROLMENT_TABLE_FIELDS_LIST.FSIV,e,"multiediting")},isValid:I[S.ENROLMENT_TABLE_FIELDS_LIST.FSIV],value:t.values.fsiv||null,type:"date",defaultDate:g.clone().add(1,"w"),filterDate:A,isEditMode:!0}),("country"!==t.type||!s)&&!v&&[i.default.createElement(E.default,{key:1,isNotEmpty:null!==t.values.fsiv&&void 0!==t.values.fsiv,generatedFields:t.generatedFields,cellName:S.ENROLMENT_TABLE_FIELDS_LIST.FSIV}),i.default.createElement("div",{key:2,className:(0,u.default)("cell-renderer-not-editable-view",{error:t.values.invalids&&t.values.invalids.includes(S.ENROLMENT_TABLE_FIELDS_LIST.FSIV)||t.invalidFields&&t.invalidFields.includes(S.ENROLMENT_TABLE_FIELDS_LIST.FSIV)})},t.values.fsiv?t.values.fsiv.format("D MMM YY"):" ")])};O.propTypes={cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,startDate:o.default.object.isRequired,datePickerFormat:o.default.string,filterDate:o.default.func.isRequired,activeRowValidationState:o.default.object,tooltip:o.default.string,today:o.default.object,fromPrevApproved:o.default.bool,isExactCopy:o.default.bool,multiEditType:o.default.string},O.defaultProps={rowData:null,isMultiediting:!1,isEditable:!1,isEditing:!1,dataPrefix:"",isApproved:!1,isPrevApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",datePickerFormat:void 0,activeRowValidationState:{},tooltip:null,today:(0,c.default)(),fromPrevApproved:!1,isExactCopy:!1,multiEditType:"edit"},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SiteInitiationDataCell=t.SiteInitiationHeaderCell=void 0;var r=a(921),i=n(r),l=a(920),o=n(l);t.SiteInitiationHeaderCell=i.default,t.SiteInitiationDataCell=o.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(117),c=n(d),f=a(15),p=a(27),h=n(p),v=a(120),m=n(v),_=a(109),E=n(_),g=a(119),y=n(g),S=a(10),b=a(8),C=a(52),O=function(e){var t=e.rowData,a=e.isTracking,n=e.cellClickHandler,r=e.isApproved,l=e.isAdjusted,o=e.adjustedRow,s=e.isEditable,d=e.historicalEnabled,p=e.historicalDataKey,v=e.isMultiediting,_=e.onFocusCountry,g=e.onDataChange,O=e.dataPrefix,T=e.isEditing,R=e.activeRowValidationState,A=e.fromPrevApproved,I=e.multiEditType,w=!(t.values.invalids&&t.values.invalids.includes("sas")),N=(0,b.isCellDimmed)(S.ENROLMENT_TABLE_FIELDS_LIST.SAS,t,p,d),D=function(){return t.values.sas&&w?T||v?""+Math.round(100*t.values.sas):Math.round(100*t.values.sas)+"%":t.values.sas||""};return i.default.createElement(f.Cell,{width:"12%",cellClickHandler:function(e){return n(t,"sas",e)},className:(0,u.default)("value-cell",{overridden:(0,C.isOverriden)(t[O+"overrideList"],t[O+"unlock"],a,l,o,t.values.sas,"sas"),approved:(r&&a||l&&!A)&&!o,editable:"country"===t.type&&s,historical:d,dimmed:N,ignored:t.ignore_aggregation,generated:t.generatedFields&&t.generatedFields.includes("sas")},{"multiediting-cell":v&&"edit"===I})},"country"===t.type&&s&&i.default.createElement("div",null,i.default.createElement(h.default,{onFocus:function(e){return _(e,t.country_id)},onBlur:function(e,a){var n=a.isValid&&""!==a.value?{value:parseInt(a.value,10)/100,isValid:!0}:a;+n.value!=+t.values.sas&&g(t.country_id,O+"sas",n,null,t.values.sas)},onKeyDown:function(e){"Escape"!==e.key&&"Enter"!==e.key||e.target.blur()},narrow:!0,status:!w||t.invalidFields&&t.invalidFields.includes("sas")?"error":"success",value:D(),validators:[function(e){return""===e||c.default.isInt(e,{gt:0,lt:101})}],withoutBorder:!0,textAlign:"left",placeholder:""})),v&&"unlock"===I&&i.default.createElement(f.Cell,{className:"flex-col-12 multiediting-cell unlock"},i.default.createElement(y.default,{type:S.ENROLMENT_TABLE_FIELDS_LIST.SAS,unlock:t.unlock,onChange:g})),v&&"edit"===I&&i.default.createElement(m.default,{key:"multiediting_"+S.ENROLMENT_TABLE_FIELDS_LIST.SAS,value:D(),onChange:function(e){return g(null,S.ENROLMENT_TABLE_FIELDS_LIST.SAS,e.replace(/%$/,"")/100,"multiediting")},type:"text",validators:[function(e){return""===e||c.default.isInt(e,{gt:0,lt:101})}],isValid:R.sas,isEditMode:!0}),("country"!==t.type||!s)&&!v&&[i.default.createElement(E.default,{isNotEmpty:t.values.sas&&t.values.sas>0,key:1,generatedFields:t.generatedFields,cellName:S.ENROLMENT_TABLE_FIELDS_LIST.SAS}),i.default.createElement("div",{key:2,className:(0,u.default)("cell-renderer-not-editable-view",{error:t.values.invalids&&t.values.invalids.includes(S.ENROLMENT_TABLE_FIELDS_LIST.SAS)||t.invalidFields&&t.invalidFields.includes(S.ENROLMENT_TABLE_FIELDS_LIST.SAS)})},t.values.sas?Math.round(100*t.values.sas)+"%":"")])};O.propTypes={cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,isEditing:o.default.bool,activeRowValidationState:o.default.object,fromPrevApproved:o.default.bool,multiEditType:o.default.string},O.defaultProps={rowData:null,isMultiediting:!1,isEditable:!1,isEditing:!1,dataPrefix:"",isApproved:!1,isPrevApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",datePickerFormat:void 0,activeRowValidationState:{},fromPrevApproved:!1,multiEditType:"edit"},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(11),c=n(d),f=a(15),p=a(84),h=n(p),v=a(120),m=n(v),_=a(119),E=n(_),g=a(109),y=n(g),S=a(8),b=a(73),C=a(52),O=function(e){var t=e.cellName,a=e.rowData,n=e.isTracking,r=e.cellClickHandler,l=e.isApproved,o=e.isAdjusted,s=e.adjustedRow,d=e.isEditable,p=e.historicalEnabled,v=e.historicalDataKey,_=e.isMultiediting,g=e.onFocusCountry,O=e.startDate,T=e.datePickerFormat,R=e.onDataChange,A=e.dataPrefix,I=e.filterDate,w=e.activeRowValidationState,N=e.tooltip,D=e.rowFullData,P=e.fromPrevApproved,L=e.multiEditType,M=(0,S.isCellDimmed)(t,a,v,p),k=(0,c.default)();return i.default.createElement(f.Cell,{width:"22%",cellClickHandler:function(e){return r(a,t,e)},className:(0,u.default)("value-cell",{overridden:(0,C.isOverriden)(a[A+"overrideList"],a[A+"unlock"],n,o,s,a.values[t],t),approved:(l&&n||o&&!P)&&!s,editable:"country"===a.type&&d,historical:p,dimmed:M,ignored:a.ignore_aggregation,generated:a.generatedFields&&a.generatedFields.includes(t)},{"multiediting-cell":_&&"edit"===L})},"country"===a.type&&d&&i.default.createElement("div",null,i.default.createElement(h.default,{simpleView:!0,tooltip:N,onFocus:function(e){return g(e,a.country_id)},fixedHeight:!0,disabledKeyboardNavigation:!0,warningText:D["actual_"+t]&&a.values[t]&&k.isAfter(a.values[t])&&D["actual_"+t].isSame(a.values[t])?b.CHANGING_HISTORIC_DATA:null,defaultDate:O.clone().add(1,"w"),filterDate:I,dateFormat:T,onChange:function(e,n){return R(a.country_id,""+A+t,n,null,a.values[t])},status:a.values.invalids&&a.values.invalids.includes(t)||a.invalidFields&&a.invalidFields.includes(t)?"error":null,validators:[function(e){return c.default.isMoment(e)}],selected:c.default.isMoment(a.values[t])?a.values[t]:null})),_&&"unlock"===L&&i.default.createElement(f.Cell,{className:"flex-col-22 multiediting-cell unlock"},i.default.createElement(E.default,{type:t,unlock:a.unlock,onChange:R})),_&&"edit"===L&&i.default.createElement(m.default,{key:"multiediting_"+t,onChange:function(e){return R(null,t,e,"multiediting")},isValid:w[t],value:a.values[t]||null,type:"date",defaultDate:O.clone().add(1,"w"),filterDate:I,isEditMode:!0}),("country"!==a.type||!d)&&!_&&[i.default.createElement(y.default,{key:1,isNotEmpty:null!==a.values[t]&&void 0!==a.values[t],generatedFields:a.generatedFields,cellName:t}),i.default.createElement("div",{key:2,className:(0,u.default)("cell-renderer-not-editable-view",{error:a.values.invalids&&a.values.invalids.includes(t)||a.invalidFields&&a.invalidFields.includes(t)})},a.values[t]?(0,c.default)(a.values[t]).format("D MMM YY"):" ")])};O.propTypes={cellName:o.default.string.isRequired,cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,startDate:o.default.object.isRequired,datePickerFormat:o.default.string,filterDate:o.default.func.isRequired,activeRowValidationState:o.default.object,tooltip:o.default.string,rowFullData:o.default.object,fromPrevApproved:o.default.bool,multiEditType:o.default.string},O.defaultProps={rowData:null,rowFullData:{},isMultiediting:!1,isEditable:!1,isEditing:!1,dataPrefix:"",isApproved:!1,isPrevApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",datePickerFormat:void 0,activeRowValidationState:{},tooltip:null,fromPrevApproved:!1,multiEditType:"edit"},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(11),c=n(d),f=a(15),p=function(e){var t=e.rowData,a=e.isTracking;return i.default.createElement(f.CellGroup,{direction:"row",className:(0,u.default)("data-group active",{tracking:a})},i.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("actual",{empty:!t.values.fsiv,ignored:t.ignore_aggregation},"value-cell")},i.default.createElement("div",null,t.values.fsiv?(0,c.default)(t.values.fsiv).format("D MMM YY"):" ")),i.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("actual",{empty:!t.values.sas&&0!==t.values.sas,ignored:t.ignore_aggregation},"value-cell")},i.default.createElement("div",null,t.values.sas||0===t.values.sas?Math.round(100*t.values.sas)+"%":"")),i.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("actual",{empty:!t.values["25_si"],ignored:t.ignore_aggregation},"value-cell")},i.default.createElement("div",null,t.values["25_si"]?(0,c.default)(t.values["25_si"]).format("D MMM YY"):" ")),i.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("actual",{empty:!t.values["50_si"],ignored:t.ignore_aggregation},"value-cell")},i.default.createElement("div",null,t.values["50_si"]?(0,c.default)(t.values["50_si"]).format("D MMM YY"):" ")),i.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("actual",{empty:!t.values["90_si"],ignored:t.ignore_aggregation},"value-cell")},i.default.createElement("div",null,t.values["90_si"]?(0,c.default)(t.values["90_si"]).format("D MMM YY"):" ")))};p.propTypes={rowData:o.default.object,isTracking:o.default.bool},p.defaultProps={rowData:null,isTracking:!1},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(11),c=n(d),f=a(15),p=function(e){var t=e.rowData,a=e.isTracking;return i.default.createElement(f.CellGroup,{direction:"row",className:(0,u.default)("data-group active",{tracking:!0})},i.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("overallocated",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.fsiv,ignored:t.ignore_aggregation},"value-cell")},i.default.createElement("div",null,t.values.fsiv?(0,c.default)(t.values.fsiv).format("D MMM YY"):" ")),i.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("overallocated",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.sas&&0!==t.values.sas,ignored:t.ignore_aggregation},"value-cell")},i.default.createElement("div",null,t.values.sas||0===t.values.sas?Math.round(100*t.values.sas)+"%":"")),i.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("overallocated",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values["25_si"],ignored:t.ignore_aggregation},"value-cell")},i.default.createElement("div",null,t.values["25_si"]?(0,c.default)(t.values["25_si"]).format("D MMM YY"):" ")),i.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("overallocated",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values["50_si"],ignored:t.ignore_aggregation},"value-cell")},i.default.createElement("div",null,t.values["50_si"]?(0,c.default)(t.values["50_si"]).format("D MMM YY"):" ")),i.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("overallocated",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values["90_si"],ignored:t.ignore_aggregation},"value-cell")},i.default.createElement("div",null,t.values["90_si"]?(0,c.default)(t.values["90_si"]).format("D MMM YY"):" ")))};p.propTypes={rowData:o.default.object,isTracking:o.default.bool},p.defaultProps={rowData:null,isTracking:!1},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),l=n(i),o=a(1),s=n(o),u=a(2),d=n(u),c=a(11),f=n(c),p=a(15),h=a(918),v=n(h),m=a(914),_=n(m),E=a(916),g=n(E),y=a(917),S=n(y),b=a(10),C=a(85),O=a(919),T=n(O),R=function(e){var t=e.rowIndex,a=e.data,n=e.onFocusCountry,i=e.onDataChange,o=e.startDate,s=e.cellClickHandler,u=e.editingCountry,c=e.historicalEnabled,h=e.historicalFilter,m=e.isApproved,E=e.isPrevApproved,y=e.isAdjusted,C=e.isTracking,O=e.activeRowValidationState,R=e.isEditable,A=e.fullData,I=e.fromPrevApproved,w=e.isExactCopy,N=e.multiEditType,D=r({},a[t]),P=A.find(function(e){return e.country_id===D.country_id}),L="adjusted"===D.valuesType,M="generic"===D.valuesType&&(m||y),k=L?"adjusted_":"",x=u===D.country_id,j=x?void 0:"D MMM YY",F=D[k+"errorMessages"]||{},U=R&&!M&&!D.ignore_aggregation&&(!u||u===D.country_id||a.every(function(e){return!e.values.invalids||e.values.invalids&&0===e.values.invalids.length})),V="multiediting"===D.type,B="historical_reference_data_by_"+h.toLowerCase(),H=function(e){return e>=o.clone().add(1,"d")},G={cellClickHandler:s,onFocusCountry:n,onDataChange:i,isAdjusted:y,isTracking:C,isApproved:m,isPrevApproved:E,historicalEnabled:c,historicalDataKey:B,dataPrefix:k,adjustedRow:L,isEditable:U,isMultiediting:V,rowData:D,activeRowValidationState:O,today:(0,f.default)(),fromPrevApproved:I,isExactCopy:w,multiEditType:N},Y=l.default.createElement(p.CellGroup,{direction:"row",className:(0,d.default)("data-group active",{tracking:C&&!L,adjusted:L})},l.default.createElement(_.default,r({},G,{tooltip:F.fsiv,startDate:o,datePickerFormat:j,rowFullData:P,filterDate:H})),l.default.createElement(g.default,r({},G,{isEditing:x})),l.default.createElement(S.default,r({},G,{rowFullData:P,tooltip:F[b.ENROLMENT_TABLE_FIELDS_LIST.SI_25],startDate:o,datePickerFormat:j,filterDate:H,cellName:b.ENROLMENT_TABLE_FIELDS_LIST.SI_25})),l.default.createElement(S.default,r({},G,{rowFullData:P,startDate:o,datePickerFormat:j,filterDate:H,tooltip:F[b.ENROLMENT_TABLE_FIELDS_LIST.SI_50],cellName:b.ENROLMENT_TABLE_FIELDS_LIST.SI_50})),l.default.createElement(S.default,r({},G,{rowFullData:P,startDate:o,datePickerFormat:j,filterDate:H,tooltip:F[b.ENROLMENT_TABLE_FIELDS_LIST.SI_90],cellName:b.ENROLMENT_TABLE_FIELDS_LIST.SI_90})));return l.default.createElement(p.CellGroup,{direction:"column"},"generic"===D.valuesType&&Y,"generic_overallocated"===D.valuesType&&l.default.createElement(T.default,{rowData:D,isTracking:C}),"actual"===D.valuesType&&l.default.createElement(v.default,{rowData:D,isTracking:C}),"adjusted"===D.valuesType&&Y,"adjusted_overallocated"===D.valuesType&&l.default.createElement(T.default,{rowData:D,isTracking:C}))};R.displayName="SiteInitiationDataCell",R.defaultProps={rowIndex:-1,editingCountry:void 0,isEditable:!1,isApproved:!1,isPrevApproved:!1,isAdjusted:!1,isTracking:!1,historicalEnabled:!1,historicalFilter:C.FILTER_BY.STUDIES,activeRowValidationState:{},fromPrevApproved:!1,isExactCopy:!1,multiEditType:"edit"},R.propTypes={rowIndex:s.default.number,data:s.default.array.isRequired,onFocusCountry:s.default.func.isRequired,cellClickHandler:s.default.func.isRequired,onDataChange:s.default.func.isRequired,startDate:s.default.object.isRequired,editingCountry:s.default.oneOfType([s.default.string,s.default.number]),isEditable:s.default.bool,isApproved:s.default.bool,isPrevApproved:s.default.bool,isAdjusted:s.default.bool,isTracking:s.default.bool,historicalEnabled:s.default.bool,historicalFilter:s.default.oneOf(Object.keys(C.FILTER_BY)),activeRowValidationState:s.default.object,fullData:s.default.array.isRequired,fromPrevApproved:s.default.bool,isExactCopy:s.default.bool,multiEditType:s.default.string},t.default=R},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(15),u=function(e){var t=e.caption;return i.default.createElement(s.CellGroup,null,i.default.createElement(s.Cell,{className:"cell-caption"},i.default.createElement("h3",null,t)),i.default.createElement(s.CellGroup,{direction:"row",className:"header-group"},i.default.createElement(s.Cell,{width:"22%",className:"header-cell"},i.default.createElement("div",null,"FSIV")),i.default.createElement(s.Cell,{width:"12%",className:"header-cell"},i.default.createElement("div",null,"SAS%")),i.default.createElement(s.Cell,{width:"22%",className:"header-cell"},i.default.createElement("div",null,"25% SI")),i.default.createElement(s.Cell,{width:"22%",className:"header-cell"},i.default.createElement("div",null,"50% SI")),i.default.createElement(s.Cell,{width:"22%",className:"header-cell"},i.default.createElement("div",null,"90% SI"))))};u.propTypes={caption:o.default.string.isRequired},t.default=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PopupDialogComponent=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),l=n(i),o=a(1),s=n(o),u=a(56),d=n(u),c=a(2),f=n(c),p=a(481),h=n(p),v=a(487),m=n(v);a(2175);var _=function(e){var t=e.title,a=e.titleIcon,n=e.scenarioName,i=e.children,o=e.isShown,s=e.handleClose,u=e.buttons,c=e.size,p=e.className;if(!o)return null;var v=u&&u.length?u.map(function(e){return r({},e,{key:d.default.generate()})}):l.default.createElement(m.default,{action:s,primary:!0}),_=(0,f.default)("popup-dialog",c,p);return l.default.createElement(h.default,{handleClick:s},l.default.createElement("div",{className:_,onClick:function(e){return e.stopPropagation()}},l.default.createElement("div",{className:"popup-dialog__header"},l.default.createElement("div",{className:"popup-dialog__title"},a,t," ",n?l.default.createElement("span",{className:"popup-dialog__scenario"},n):null)),l.default.createElement("div",{className:"popup-dialog__content"},i),l.default.createElement("div",{className:"popup-dialog__action-panel"},v)))};_.propTypes={buttons:s.default.arrayOf(s.default.element),children:s.default.node.isRequired,handleClose:s.default.func,isShown:s.default.bool.isRequired,size:s.default.oneOf(["sm","md","lg","xl"]),className:s.default.string,title:s.default.oneOfType([s.default.string,s.default.node]),titleIcon:s.default.object,scenarioName:s.default.string},_.defaultProps={buttons:[],handleClose:void 0,size:"md",className:void 0,title:"Title",titleIcon:void 0,scenarioName:void 0};var E=_;t.PopupDialogComponent=E,t.default=l.default.memo(_)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(56),p=n(f),h=a(2),v=n(h);a(2176);var m=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={focused:!1,checked:e.checked},a.handleFocused=a.handleFocused.bind(a),a.handleBlur=a.handleBlur.bind(a),a}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({checked:e.checked}),(e.inFocus&&!this.state.focused||e.inFocus&&!this.props.inFocus)&&(this.setState({focused:!0}),this.input.focus())}},{key:"handleKeyPress",value:function(e){9===e.keyCode&&null!==this.props.tabPress&&(this.input.blur(),this.props.tabPress())}},{key:"handleFocused",value:function(){this.setState({focused:!0})}},{key:"handleBlur",value:function(){this.setState({focused:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.disabled,n=t.label,r=t.name,i=t.onChange,l=t.value,o=t.tabInd,s=this.state,d=s.focused,c=s.checked,f=p.default.generate(),h=(0,v.default)("fpo-radio-button-container",{"fpo-radio-button-disabled":a}),m=u.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},u.default.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeOpacity:".3",strokeWidth:"2",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18z"})),_=u.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.default.createElement("g",{fill:"none",fillRule:"evenodd"},u.default.createElement("circle",{cx:"12",cy:"12",r:"11",stroke:"#5291DD",strokeWidth:"2"}),u.default.createElement("circle",{cx:"12",cy:"12",r:"9",stroke:"#000",strokeWidth:"2"}),u.default.createElement("circle",{cx:"12",cy:"12",r:"5",fill:"#000"}))),E=u.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},u.default.createElement("g",{fill:"none",fillRule:"evenodd"},u.default.createElement("circle",{cx:"12",cy:"12",r:"9",stroke:"#000",strokeWidth:"2"}),u.default.createElement("circle",{cx:"12",cy:"12",r:"5",fill:"#000"}))),g=u.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},u.default.createElement("g",{fill:"none",fillRule:"evenodd",strokeWidth:"2"},u.default.createElement("circle",{cx:"12",cy:"12",r:"11",stroke:"#5291DD"}),u.default.createElement("circle",{cx:"12",cy:"12",r:"9",stroke:"#000"}))),y=u.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},u.default.createElement("circle",{cx:"12",cy:"12",r:"9",fill:"none",fillRule:"evenodd",stroke:"#000",strokeWidth:"2"}));return u.default.createElement("div",{className:h},u.default.createElement("input",{ref:function(t){e.input=t},tabIndex:o,checked:c,onKeyDown:function(t){9===t.keyCode&&(t.preventDefault(),e.handleKeyPress(t))},className:"fpo-toggle-input",disabled:a,onChange:function(){return i(l)},onFocus:this.handleFocused,onBlur:this.handleBlur,id:f,name:r,type:"radio",value:l}),u.default.createElement("label",{htmlFor:f,onClick:function(){return!a&&!c&&i(l)}},u.default.createElement("span",null,function(){return a?m:c&&d?_:c?E:d?g:y}()),u.default.createElement("span",null,n)))}}]),t}(u.default.PureComponent);m.propTypes={checked:c.default.bool,disabled:c.default.bool,inFocus:c.default.bool,label:c.default.string.isRequired,name:c.default.string.isRequired,onChange:c.default.func.isRequired,tabInd:c.default.number,tabPress:c.default.func,value:c.default.oneOfType([c.default.string,c.default.number,c.default.object]).isRequired},m.defaultProps={checked:null,disabled:!1,inFocus:!1,tabPress:null,tabInd:null},t.default=m},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(32),c=n(d),f=a(1),p=n(f),h=a(56),v=n(h),m=a(2),_=n(m),E=a(489),g=n(E),y=a(490),S=n(y),b=a(314),C=n(b),O=a(488),T=n(O),R=a(83),A=n(R),I=a(925);a(2180);var w=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.refreshState=a.refreshState.bind(a),a.state={firstItemIndex:0,lastItemIndex:-1},a}return l(t,e),o(t,[{key:"componentWillMount",value:function(){this._isMounted=!0}},{key:"componentDidMount",value:function(){this.domNode=c.default.findDOMNode(this),this.props.useWindowing&&(this.refreshState(),document.addEventListener("scroll",this.refreshState),document.addEventListener("resize",this.refreshState))}},{key:"componentWillReceiveProps",value:function(e){var t=e.rowsCount,a=e.rowHeight;e.useWindowing&&this.setStateIfNeeded(this.domNode,window,t,a)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,document.removeEventListener("scroll",this.refreshState),document.removeEventListener("resize",this.refreshState)}},{key:"setStateIfNeeded",value:function(e,t,a,n,r){var i=(0,I.getVisibleItemBounds)(e,t,a,n,r);i||0!==a||this.setState({firstItemIndex:-1,lastItemIndex:-1}),void 0!==i&&(i.firstItemIndex>i.lastItemIndex||i.firstItemIndex===this.state.firstItemIndex&&i.lastItemIndex===this.state.lastItemIndex||this.setState(i))}},{key:"refreshState",value:function(){if(this._isMounted){var e=this.props,t=e.rowsCount,a=e.rowHeight;this.setStateIfNeeded(this.domNode,window,t,a)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.rowsCount,n=t.children,r=t.headerHeight,i=t.rowHeight,l=t.width,o=t.onRowDoubleClick,s=t.onRowClick,d=t.borders,c=t.noHeader,f=t.stickyHeader,p=t.stickyPosition,h=t.useWindowing,m=t.collapsedBody,E=function(){if(!(n instanceof Array||n.type&&n.type.displayName&&"FlexTableColumn"===n.type.displayName))return n}(),g=function(){return n instanceof Array?n:E?E.props.children instanceof Array?E.props.children:[E.props.children]:[n]}(),y=function(e){var t=g.filter(function(e){return!e.props.hidden}).map(function(t){return u.default.cloneElement(t,{key:t.props.columnName?"column-"+t.props.columnName+"-"+e:v.default.generate(),rowIndex:e})});return E?u.default.cloneElement(E,{key:"row-"+e,rowHeight:i,rowIndex:e,children:t}):u.default.createElement(S.default,{key:"row-"+e,rowHeight:i,onRowClick:s,onRowDoubleClick:o,rowIndex:e},t)},b=l?l+"px":"100%",C=this.state.firstItemIndex*i;return u.default.createElement("div",{style:{width:b},className:(0,_.default)("react-flex-table","react-flex-table__table",{"react-flex-table__borders":!0===d},{"react-flex-table__inner-borders":d&&"inner"===d},{"react-flex-table_no-header":!0===c})},!c&&function(){var e=u.default.createElement("div",{className:"react-flex-table__header",style:{height:r+"px"}},g.filter(function(e){return!e.props.hidden}).map(function(e){return u.default.cloneElement(e,{key:e.props.columnName?"column-"+e.props.columnName+"-header":v.default.generate(),rowIndex:-1})}));return f?u.default.createElement(A.default,{key:v.default.generate(),style:{top:p+"px"}},e):e}(),u.default.createElement("div",{className:(0,_.default)("react-flex-table_body",{hidden:m}),ref:function(t){e.container=t},style:{paddingTop:C}},function(){var t=[];if(!h){for(var n=0;n<a;n+=1)t.push(y(n));return t}var r=e.state,i=r.firstItemIndex,l=r.lastItemIndex;if(-1===l)return t;for(var o=i;o<l+1;o+=1)t.push(y(o));return t}()))}}]),t}(s.Component);w.propTypes={borders:p.default.oneOfType([p.default.bool,p.default.string]),children:p.default.node.isRequired,headerHeight:p.default.number,onRowClick:p.default.func,onRowDoubleClick:p.default.func,rowHeight:p.default.number,rowsCount:p.default.number.isRequired,width:p.default.number,noHeader:p.default.bool,stickyHeader:p.default.bool,stickyPosition:p.default.number,useWindowing:p.default.bool,collapsedBody:p.default.bool},w.defaultProps={borders:!1,headerHeight:30,rowHeight:30,onRowClick:void 0,onRowDoubleClick:void 0,width:void 0,noHeader:!1,stickyHeader:!1,stickyPosition:0,useWindowing:!1,collapsedBody:!1},w.Table=w,w.Column=g.default,w.Row=S.default,w.Cell=C.default,w.CellGroup=T.default,t.default=w},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t){return void 0!==t&&t?(t.offsetTop||0)+e(t.offsetParent):0},r=function(e){return e.pageYOffset?e.pageYOffset:e.document?e.document.documentElement&&e.document.documentElement.scrollTop?e.document.documentElement.scrollTop:e.document.body&&e.document.body.scrollTop?e.document.body.scrollTop:0:e.scrollY||e.scrollTop||0},i=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;if(t&&i&&0!==a){var o=t.innerHeight,s=t.clientHeight,u=o||s;if(u){var d=r(t),c=d+u,f=n(e)-n(t),p=i*a,h=Math.max(0,d-f),v=Math.max(0,Math.min(p,c-f));return{firstItemIndex:Math.max(0,Math.floor(h/i)-l),lastItemIndex:Math.min(a,Math.ceil(v/i)+l)-1}}}};t.topFromWindow=n,t.getElementTop=r,t.getVisibleItemBounds=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.textSortTable=t.SortTypes=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),h=n(p),v=a(2),m=n(v),_=a(314),E=n(_);a(2181);var g={ASC:"ASC",DESC:"DESC"},y=function(e,t){return function(a,n){var r=a[e],i=n[e],l=0;return r>i&&(l=1),r<i&&(l=-1),0!==l&&t===g.DESC&&(l*=-1),l}},S=function(e){function t(e){l(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onSortChange=a.onSortChange.bind(a),a}return s(t,e),d(t,[{key:"onSortChange",value:function(e){e.preventDefault();var t=g.DESC,a=g.ASC;this.props.onSortChange&&this.props.onSortChange(this.props.sortKey,this.props.sortDir?function(e){return e===a?t:a}(this.props.sortDir):a)}},{key:"render",value:function(){var e=this.props,t=e.sortDir,a=e.children,n=e.className,l=i(e,["sortDir","children","className"]),o=(0,m.default)(r({},n,n));return f.default.createElement(E.default,u({},l,{className:"react-flex-table__sort-header-cell "+o}),f.default.createElement("span",{onClick:this.onSortChange},a," ",function(){var e=(0,m.default)({"react-flex-table__sort-header-cell_sort-desc":t===g.ASC},{"react-flex-table__sort-header-cell_sort-asc":t===g.DESC});return f.default.createElement("div",{className:"react-flex-table__sort-header-cell_sort-dir "+e},t?"":"")}()))}}]),t}(c.Component);S.propTypes={children:h.default.node.isRequired,className:h.default.string,columnName:h.default.string,onSortChange:h.default.func,sortDir:h.default.oneOf([g.ASC,g.DESC]),sortKey:h.default.string.isRequired},S.defaultProps={className:void 0,columnName:void 0,onSortChange:void 0,sortDir:void 0},t.default=S,t.SortTypes=g,t.textSortTable=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(928),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(476),p=n(f);a(2184);var h=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={mode:1},a}return l(t,e),o(t,[{key:"render",value:function(){var e=this;return 1===this.state.mode?u.default.createElement("div",{className:"region-context-menu"},u.default.createElement("div",{className:"region-context-menu__menu-mode"},!this.props.hideRemoveRegions&&u.default.createElement("div",{className:"region-context-menu__remove region-context-menu__item"},u.default.createElement("span",{onClick:function(t){t.stopPropagation(),e.props.onRemoveRegion&&e.props.onRemoveRegion()}}," Remove region ")),u.default.createElement("div",{className:"region-context-menu__add region-context-menu__item"},u.default.createElement("span",{onClick:function(t){t.stopPropagation(),e.setState({mode:2})}}," Include country ")))):u.default.createElement("div",{className:"region-context-menu"},u.default.createElement("div",{className:"region-context-menu__addcountry-mode"},u.default.createElement(p.default,{countries:this.props.countries,disabledCountries:this.props.assignedCountries,height:190,onSelect:this.props.onAddCountry})))}}]),t}(u.default.Component);h.propTypes={countries:c.default.array,assignedCountries:c.default.array,onRemoveRegion:c.default.func,onAddCountry:c.default.func,hideRemoveRegions:c.default.bool},h.defaultProps={countries:[],assignedCountries:[],onRemoveRegion:void 0,onAddCountry:void 0,hideRemoveRegions:!1},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(75),u=n(s),d=a(64),c=n(d);a(2185);var f=function(e){var t=e.listItems,a=e.nameFieldName,n=e.idFieldName,r=e.width,l=e.height,o=e.onChange,s=e.selectedItems,d=e.disabledItems,f={width:r,height:l},p=t.map(function(e){return i.default.createElement("div",{key:"list-item_"+e[a],className:"list-box-item"},i.default.createElement(c.default,{disabled:-1!==d.indexOf(e[n]),label:e[a],checked:-1!==s.indexOf(e[n]),onChange:function(t){return o(e[n],t)}}))});return i.default.createElement("div",{className:"fpo-list-box-container",style:{height:function(){return t.length>4?240:1===t.length?44:44*t.length+60}()+"px"}},p.length>1?i.default.createElement("div",{className:"list-box-control"},i.default.createElement(c.default,{label:"Select all",checked:function(){return s.length===t.length}(),onChange:function(e){return o("all",e)}})):null,i.default.createElement(u.default,{style:f,autoHide:!1},p))};f.defaultProps={height:168,listItems:[],disabledItems:[],idFieldName:"id",nameFieldName:"name",width:240},f.propTypes={height:o.default.number,idFieldName:o.default.string,nameFieldName:o.default.string,onChange:o.default.func.isRequired,selectedItems:o.default.array.isRequired,disabledItems:o.default.array,listItems:o.default.array,width:o.default.number},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),f=a(1),p=n(f),h=a(45),v=n(h),m=a(491),_=n(m),E=a(929),g=n(E);a(731);var y=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected:[],activeRegion:null,regions:e.regionsCountriesList},a.handleRegionClick=a.handleRegionClick.bind(a),a.state.regionStatistic=a.updateStatistic(),a}return l(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;(0,v.default)(e.regionsCountriesList,this.props.regionsCountriesList)||this.setState({regions:e.regionsCountriesList},function(){return t.setState({regionStatistic:t.updateStatistic()})})}},{key:"updateStatistic",value:function(){return this.state.regions.reduce(function(e,t){var a=e;a[t.id]={total:t.countries.length-(t.isCountryRegion?0:1),selected:0};var n=t.countries.reduce(function(e,n){var r=e;return n.isSelected&&n.id!=="unspecifiedCountry_"+t.id?(r[0]=e[0]+1,r):n.isSelected&&n.id==="unspecifiedCountry_"+t.id?(r[1]=e[1]+1,r):(n.isSelectedAsRegion&&(a[t.id].selectedRegion=!0),e)},[0,0]),r=s(n,2),i=r[0],l=r[1];return a[t.id].selected=i,a[t.id].selectedUnspecified=l,a},{})}},{key:"handleRegionClickInRegionMode",value:function(e){var t=this.state.regions.findIndex(function(t){return t.id===e});if(-1===t)return!1;var a=Object.assign({},this.state.regions[t]),n=!a.countries[0].isSelected;a.countries[0].isSelected=n;var r=this.state.regions.slice();r.splice(t,1,a);var i=Object.assign({},this.state.regionStatistic);return i[e].selected=n?i[e].selected+1:i[e].selected-1,this.setState({regions:r,regionStatistic:i,activeRegion:this.state.activeRegion===e?null:e}),this.valuesChanged(),!0}},{key:"handleRegionClickInCountryMode",value:function(e){this.setState({activeRegion:this.state.activeRegion===e?null:e})}},{key:"handleRegionClick",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.handleRegionClickInRegionMode(e):this.handleRegionClickInCountryMode(e)}},{key:"handleCountrySelection",value:function(e,t,a){var n=this.state.regions.findIndex(function(t){return t.id===e});if(-1===n)return!1;var r=o({},this.state.regions[n]);r.countries.forEach(function(e){var n=e;"all"!==t&&t!==e.id||n.forceDisabled||(n.isSelected=a)});var i=Object.assign({},this.state.regionStatistic),l=this.state.regions.slice();return l.splice(n,1,r),"all"===t?a?i[e].selected=r.countries.reduce(function(e,t){var a=e;return t.isSelected&&(a+=1),a},0):(i[e].selected=0,i[e].selectedUnspecified=0):t!=="unspecifiedCountry_"+e?i[e].selected=a?i[e].selected+1:i[e].selected-1:i[e].selectedUnspecified=a?i[e].selectedUnspecified+1:i[e].selectedUnspecified-1,this.setState({regions:l,regionStatistic:i}),this.valuesChanged(),!0}},{key:"valuesChanged",value:function(){var e=this.state,t=e.regionStatistic,a=e.regions;if(!Object.values(t).some(function(e){return 0!==e.selected||0!==e.selectedUnspecified}))return void this.props.onChange([]);var n=a.reduce(function(e,t){var a=t.countries.filter(function(e){return e.isSelected});if(0!==a.length){var n=Object.assign({},t,{countries:a});e.push(n)}return e},[]);this.props.onChange(n)}},{key:"render",value:function(){var e=this,t=this.props,a=t.disabled,n=t.width,r=this.state.regions.map(function(t){var r=!1,i=t.countries.reduce(function(e,a){return a.isSelected&&(e.push(a.id),a.id==="unspecifiedCountry_"+t.id&&(r=!0)),e},[]),l=t.countries.reduce(function(e,t){return t.forceDisabled&&e.push(t.id),e},[]),o=t.isCountryRegion&&t.countries[0]&&!!t.countries[0].forceDisabled;return c.default.createElement("div",{key:t.id},c.default.createElement(_.default,{disabled:a||t.filtered||o,regionName:t.name,showStat:!1,onClick:function(){return e.handleRegionClick(t.id,t.isCountryRegion)},hasUnspecifiedCountry:r,isSelected:e.state.regionStatistic[t.id].selected>0||e.state.regionStatistic[t.id].selectedUnspecified>0,selectedCountries:e.state.regionStatistic[t.id].selected,totalCountries:e.state.regionStatistic[t.id].total}),e.state.activeRegion!==t.id||t.isCountryRegion?null:c.default.createElement(g.default,{width:n,onChange:function(a,n){return e.handleCountrySelection(t.id,a,n)},selectedItems:i,disabledItems:l,listItems:t.countries}))});return c.default.createElement("div",{key:"event-country-selector",style:{outline:"0px",width:n},className:"fpo-region-country-selector",onKeyDown:function(e){return e.preventDefault()},onKeyUp:function(t){return e.tabPressActions(t)},ref:function(t){e.form=t}},c.default.createElement("div",{className:"regions-list"},r))}}]),t}(d.Component);y.defaultProps={disabled:!1,filterCountries:[],width:240},y.propTypes={disabled:p.default.bool,onChange:p.default.func.isRequired,regionsCountriesList:p.default.array.isRequired,width:p.default.number},t.default=y},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),f=a(1),p=n(f),h=a(40),v=n(h),m=a(491),_=n(m),E=a(860),g=n(E);a(731);var y=a(507),S=n(y),b=function(e,t,a){var n=!1;if(a&&a.length){var r=a.find(function(t){return"Unspecified country"===t.country_name&&t.region_name===e.name});r&&r.constraint===t.toUpperCase()&&(n=!0)}return{id:"unspecifiedCountry_"+e.id,name:"Unspecified country",region_id:e.id,isSelectedAsRegion:!1,isSelected:n}},C=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected:[],activeRegion:null,regionStatistic:null},a.handleRegionClick=a.handleRegionClick.bind(a),a.state.regions=a.props.regionsCountriesList.map(function(e){var t=(0,v.default)(e);return 1===t.countries.length?t.isCountryRegion=!0:t.countries.find(function(e){return"Unspecified country"===e.name})||(t.countries=[b(t,a.props.tabName,a.props.scenarioCountries)].concat(t.countries)),t}),a.state.regionStatistic=a.updateStatistic(),a}return l(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){e.activeTab!==this.props.activeTab&&this.setState({activeRegion:null})}},{key:"updateStatistic",value:function(){return this.state.regions.reduce(function(e,t){var a=e;a[t.id]={total:t.countries.length-(t.isCountryRegion?0:1),selected:0};var n=t.countries.reduce(function(e,n){var r=e;return n.isSelected&&n.id!=="unspecifiedCountry_"+t.id?(r[0]=e[0]+1,r):n.isSelected&&n.id==="unspecifiedCountry_"+t.id?(r[1]=e[1]+1,r):(n.isSelectedAsRegion&&(a[t.id].selectedRegion=!0),e)},[0,0]),r=s(n,2),i=r[0],l=r[1];return a[t.id].selected=i,a[t.id].selectedUnspecified=l,a},{})}},{key:"handleRegionClickInRegionMode",value:function(e){var t=this.props.selectorMode===S.default.REGIONS?"isSelectedAsRegion":"isSelected",a=this.state.regions.findIndex(function(t){return t.id===e});if(-1===a)return!1;var n=Object.assign({},this.state.regions[a]),r=b(e),i=n.isCountryRegion?0:n.countries.findIndex(function(e){return r.name===e.name}),l=!n.countries[i][t];n.countries[i][t]=l;var o=this.state.regions.slice();o.splice(a,1,n);var s=Object.assign({},this.state.regionStatistic);return this.props.selectorMode===S.default.REGIONS?s[e].selectedRegion=!s[e].selectedRegion:s[e].selected=l?s[e].selected+1:s[e].selected-1,this.setState({regions:o,regionStatistic:s,activeRegion:this.state.activeRegion===e?null:e}),this.valuesChanged(),!0}},{key:"handleRegionClickInCountryMode",value:function(e){this.setState({activeRegion:this.state.activeRegion===e?null:e})}},{key:"handleRegionClick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.props.selectorMode===S.default.REGIONS||t?this.handleRegionClickInRegionMode(e):this.handleRegionClickInCountryMode(e)}},{key:"handleCountrySelection",value:function(e,t,a){var n=this.state.regions.findIndex(function(t){return t.id===e});if(-1===n)return!1;var r=o({},this.state.regions[n]),i=this.props.filterCountries.find(function(e){return e.id===r.id});r.countries.forEach(function(n){var r=n;if("all"===t){var l={};i&&(l=i.countries.find(function(e){return e.id===n.id})||{}),a?n.id!=="unspecifiedCountry_"+e&&n.id!==l.id&&(r.isSelected=a):r.isSelected=a}else t===n.id&&(r.isSelected=a)});var l=Object.assign({},this.state.regionStatistic),s=this.state.regions.slice();return s.splice(n,1,r),"all"===t?a?l[e].selected=r.countries.reduce(function(e,t){var a=e;return t.isSelected&&(a+=1),a},0):(l[e].selected=0,l[e].selectedUnspecified=0):t!=="unspecifiedCountry_"+e?l[e].selected=a?l[e].selected+1:l[e].selected-1:l[e].selectedUnspecified=a?l[e].selectedUnspecified+1:l[e].selectedUnspecified-1,this.setState({regions:s,regionStatistic:l}),this.valuesChanged(),!0}},{key:"valuesChanged",value:function(e){var t=e;e||(t=this.props.selectorMode);var a=t===S.default.REGIONS?"isSelectedAsRegion":"isSelected";if(!Object.values(this.state.regionStatistic).some(function(e){return t===S.default.COUNTRIES&&(0!==e.selected||0!==e.selectedUnspecified)||t===S.default.REGIONS&&e.selectedRegion}))return void this.props.onChange([]);var n=this.state.regions.reduce(function(e,t){var n=t.countries.filter(function(e){return e[a]});if(0!==n.length){var r=Object.assign({},t,{countries:n});e.push(r)}return e},[]);this.props.onChange(n)}},{key:"tabPressActions",value:function(e){9===e.keyCode&&null!==this.props.tabPress&&(this.form.blur(),this.props.tabPress())}},{key:"render",value:function(){var e=this,t=this.props,a=t.recommendedByAnalytics,n=t.disabled,r=t.width,i=t.disabledCountries,l=void 0===i?[]:i,s=this.state.regions.map(function(t){var a=o({},t),n=e.props.filterCountries.find(function(e){return e.id===a.id});return n&&(a.isCountryRegion?a.filtered=!0:a.countries=a.countries.map(function(e){var t=o({},e);return n.countries.find(function(e){return e.name===t.name})&&(t.filtered=!0),t})),a}),u=s.map(function(t){var i=!1,o=t.countries.reduce(function(e,a){return a.isSelected&&(e.push(a.id),a.id==="unspecifiedCountry_"+t.id&&(i=!0)),e},[]),s=[],u=a.find(function(e){return e.name===t.name});u&&(s=u.countries);var d=void 0!==l.find(function(e){return e.region_name===t.name&&e.regionHasSingleCountry});return c.default.createElement("div",{key:t.id},c.default.createElement(_.default,{disabled:n||t.filtered||d,isRecommendedByAnalytics:!!u,regionName:t.name,showStat:!1,onClick:function(){return e.handleRegionClick(t.id,t.isCountryRegion)},hasUnspecifiedCountry:i,isSelected:e.state.regionStatistic[t.id].selectedRegion&&e.props.selectorMode===S.default.REGIONS||(e.state.regionStatistic[t.id].selected>0||e.state.regionStatistic[t.id].selectedUnspecified>0)&&e.props.selectorMode===S.default.COUNTRIES,selectedCountries:e.state.regionStatistic[t.id].selected,totalCountries:e.state.regionStatistic[t.id].total}),e.props.selectorMode!==S.default.COUNTRIES||e.state.activeRegion!==t.id||t.isCountryRegion?null:c.default.createElement(g.default,{width:r,disabledCountries:l,recommendedByAnalyticsCountries:s,activeTab:e.props.activeTab,onChange:function(a,n){return e.handleCountrySelection(t.id,a,n)},selectedItems:o,listItems:t.countries}))});return c.default.createElement("div",{key:"RCS",style:{outline:"0px",width:r},className:"fpo-region-country-selector",onKeyDown:function(e){return e.preventDefault()},onKeyUp:function(t){return e.tabPressActions(t)},ref:function(t){e.form=t},tabIndex:this.props.tabInd},c.default.createElement("div",{className:"regions-list"},u))}}]),t}(d.Component);C.defaultProps={selectorMode:S.default.COUNTRIES,tabPress:function(){},disabled:!1,filterCountries:[],tabInd:-1,width:240,disabledCountries:[],recommendedByAnalytics:[],scenarioCountries:[]},C.propTypes={activeTab:p.default.string.isRequired,tabName:p.default.string.isRequired,scenarioCountries:p.default.array,disabled:p.default.bool,onChange:p.default.func.isRequired,regionsCountriesList:p.default.array.isRequired,selectorMode:p.default.number,tabInd:p.default.number,tabPress:p.default.func,filterCountries:p.default.array,width:p.default.number,disabledCountries:p.default.array,recommendedByAnalytics:p.default.array},t.default=C},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(933),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveScenarioDialog=void 0;var r=a(0),i=n(r),l=a(1),o=n(l),s=a(39),u=a(73),d=function(e){var t=e.isShown,a=e.scenarioName,n=e.onClose,r=e.onSubmit;return i.default.createElement(s.PopupDialog,{title:"Delete scenario",isShown:t,handleClose:n,buttons:[i.default.createElement(s.ActionButton,{className:"optimise-scenario-dialog__button-cancel",action:n},u.CANCEL),i.default.createElement(s.ActionButton,{action:r,primary:!0},u.CONFIRM)]},i.default.createElement("div",null,"Are you sure you want to permanently delete ",i.default.createElement("b",null,a,"?")))};d.defaultProps={isShown:!1,onClose:void 0},d.propTypes={isShown:o.default.bool,scenarioName:o.default.string.isRequired,onClose:o.default.func,onSubmit:o.default.func.isRequired},t.RemoveScenarioDialog=d,t.default=i.default.memo(d)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(39),p=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleConfirm=a.handleConfirm.bind(a),a.handleCancel=a.handleCancel.bind(a),a}return l(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"handleConfirm",value:function(){this.props.onSubmit()}},{key:"handleCancel",value:function(){this.props.onClose()}},{key:"render",value:function(){return u.default.createElement(f.PopupDialog,{title:"Unsaved changes",className:"unsaved-changes-dialog",isShown:this.props.isShown,buttons:[u.default.createElement(f.ActionButton,{className:"unsaved-changes-dialog__button-cancel",action:this.handleCancel},"Discard"),u.default.createElement(f.ActionButton,{action:this.handleConfirm,primary:!0},"Continue")]},u.default.createElement("div",{className:"unsaved-changes-dialog-content"},"There are unsaved changes on this page"))}}]),t}(s.Component);p.defaultProps={actionType:"",callbackActions:[]},p.propTypes={onSubmit:c.default.func.isRequired,onClose:c.default.func.isRequired,isShown:c.default.bool.isRequired},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(6);a(2186);var u=function(e){var t=e.numberOfEvents;return i.default.createElement("div",{className:"scenario-events-title__container"},i.default.createElement("div",{className:"scenario-events-title__wrapper"},i.default.createElement("h1",null,"Events"),i.default.createElement("span",{className:"scenario-events-title__separator"},s.Icons.SEPARATOR),i.default.createElement("span",{className:"scenario-events-title__icon"},s.Icons.EVENT),i.default.createElement("span",{className:"scenario-events-title__value"},t)))};u.propTypes={numberOfEvents:o.default.number},u.defaultProps={numberOfEvents:0},t.default=u},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(937),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=a(0),u=n(s),d=a(56),c=n(d),f=a(12),p=n(f),h=a(17),v=a(6),m=a(66),_=a(28),E=a(42),g=n(E);a(2187);var y=function(){var e=(0,s.useContext)(m.ScenarioViewerState),t=e.scenario,a=e.activeUser,n=e.setState,d=(0,_.useLocalStorage)("fpo-failed-scenario-job",{}),f=o(d,2),E=f[0],y=f[1],S=(0,p.default)(E,t.id,[]),b=(0,s.useCallback)(function(){y(l({},E,r({},t.id,[].concat(i(S),[a.id])))),n({type:"SET_VALUES",payload:{key:c.default.generate()}})},[a.id,t.id,S,E,y,n]);return S.includes(a.id)?null:t.nerve_job_status!==g.default.FAILED?null:u.default.createElement(h.Grid,null,u.default.createElement(h.Row,null,u.default.createElement(h.Col,{offset:1,width:11},u.default.createElement("div",{className:"scenario-failed-status-bar"},v.Icons.ARROW_RIGHT_SQUARE_FILLED,u.default.createElement("span",{className:"dash"}),v.Icons.CIRCLE_FILLED_LARGE,u.default.createElement("span",{className:"message"},"Optimization Failed"),u.default.createElement("div",{className:"scenario-failed-closeContainer",onClick:b},v.Icons.CROSS_O)))))};t.default=y},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(11),c=n(d),f=a(6);a(2188);var p=a(17),h=a(82),v=n(h),m=a(14),_=n(m),E=function(e){var t=e.target,a=e.predicted,n=e.fpfv_lpfv,r=e.actual_fpfv_lpfv,l=e.fpp_fpfv,o=e.actual_date,s=e.startDate,d=e.actual_fpp_fpfv,h=e.actual_f_lpft,m=e.adjusted_fpp_fpfv,E=e.adjusted_fpfv_lpfv,g=e.adjustedLpft,y=e.showAdjusted,S=e.showActual,b=e.isOverallocated,C=e.isCohortView,O=e.isIgnored,T=e.isExactCopy;return i.default.createElement(p.Col,{offset:1,width:9,className:"scenario-highlights-bar__content"},i.default.createElement("div",{className:"icon-24x"},f.Icons.DATE_RANGE),i.default.createElement("div",{className:"fpp-fpfv__widget"},i.default.createElement(v.default,{className:"scenario-highlights-bar__separator"}),i.default.createElement(_.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:i.default.createElement("span",null,"Startup")},i.default.createElement("span",{className:"fpp-fpfv__label"},"FP - FPFV")),i.default.createElement("span",{className:"icon-24x"},f.Icons.ARROW_RIGHT),function(){return O?null:i.default.createElement("span",{className:"font-bold fpp-fpfv__caption"},i.default.createElement("div",{className:"fpp-fpfv__value"},l),l?"d":"-")}(),function(){return S?i.default.createElement("span",{className:"font-bold fpp-fpfv__caption"},i.default.createElement("div",{className:"fpp-fpfv__value actual-value"},d||"-"),d?"d":""):null}(),function(){if(!y||O)return null;var e=m&&s?s.clone().add(m,"d"):null,t=m;return o&&e&&(t=m&&(o.isSameOrAfter(e)||T)?m:null),i.default.createElement("span",{className:"font-bold fpp-fpfv__caption"},i.default.createElement("div",{className:"fpp-fpfv__value adjusted-value"},i.default.createElement("span",null,t||"-"),i.default.createElement("svg",{width:24,height:4},i.default.createElement("g",null,i.default.createElement("line",{x1:0,y1:2,x2:24,y2:2,strokeWidth:3}),i.default.createElement("line",{x1:0,y1:2,x2:24,y2:2,stroke:"white",strokeWidth:2,strokeDasharray:"3 4"})))),t?"d":"")}()),i.default.createElement("div",{className:"fpfv-lpfv__widget"},i.default.createElement(v.default,{className:"scenario-highlights-bar__separator"}),i.default.createElement(_.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:i.default.createElement("span",null,"Study Screening")},i.default.createElement("span",{className:"fpfv-lpfv__label"},"FPFV - LPFV")),i.default.createElement("span",{className:"icon-24x"},f.Icons.ARROW_RIGHT),function(){return O?null:i.default.createElement("span",{className:"font-bold fpfv-lpfv__caption"},i.default.createElement("div",{className:"fpfv-lpfv__value"},n),n?"d":"-")}(),function(){return S?i.default.createElement("span",{className:"font-bold fpfv-lpfv__caption"},i.default.createElement("div",{className:"fpfv-lpfv__value actual-value"},r||"-"),r?"d":""):null}(),function(){return!y||O?null:i.default.createElement("span",{className:"font-bold fpfv-lpfv__caption"},i.default.createElement("div",{className:"fpfv-lpfv__value adjusted-value"},i.default.createElement("span",null,E||"-"),i.default.createElement("svg",{width:24,height:4},i.default.createElement("g",null,i.default.createElement("line",{x1:0,y1:2,x2:24,y2:2,strokeWidth:3}),i.default.createElement("line",{x1:0,y1:2,x2:24,y2:2,stroke:"white",strokeWidth:2,strokeDasharray:"3 4"})))),E?"d":"")}(),function(){if(C&&S&&!y||O)return null;var e=a?Math.ceil(c.default.duration(new Date(S?h:t)-new Date(a)).asDays()):-1;if(!S)return i.default.createElement("div",{className:"lpft__widget"},f.Icons.ARROW_RIGHT_LONG,i.default.createElement("span",{style:{padding:"0 8px 0 21px",height:"24px"}},e<0?f.Icons.OFF_TARGET:f.Icons.ON_TARGET),i.default.createElement(v.default,{className:"scenario-highlights-bar__separator"}),i.default.createElement("div",{className:(0,u.default)("lpft__icon",{"bg-green":a&&e>=0},{"bg-red":a&&e<0})},i.default.createElement("span",null,"P/LPFT",i.default.createElement("span",{className:(0,u.default)("lpft__value",{"color-white":a},{"color-black":!a})},a?a.format("DD MMM YYYY"):"-"))));if(y){var n=g?g.diff(t,"days"):null;return i.default.createElement("div",{className:"lpft__widget"},f.Icons.ARROW_RIGHT_LONG,i.default.createElement("span",{style:{padding:"0 8px 0 21px",height:"24px"}},n>0?f.Icons.OFF_TARGET:f.Icons.ON_TARGET),i.default.createElement(v.default,{className:"scenario-highlights-bar__separator"}),i.default.createElement("div",{className:(0,u.default)("lpft__icon",{"bg-green":g&&null!==n&&n<=0},{"bg-red":g&&n&&n>0})},i.default.createElement("span",null,"A/LPFT",i.default.createElement("span",{className:(0,u.default)("lpft__value",{"color-white":g&&o},{"color-black":!g||!o})},g?g.format("DD MMM YYYY"):"-"))))}return i.default.createElement("div",{className:"lpft__widget"},f.Icons.ARROW_RIGHT_LONG,i.default.createElement("span",{style:{padding:"0 8px 0 21px",height:"24px"}},e<0?f.Icons.OFF_TARGET:f.Icons.ON_TARGET),i.default.createElement(v.default,{className:"scenario-highlights-bar__separator"}),i.default.createElement("div",{className:"lpft__icon predicted"},i.default.createElement("span",null,"F/LPFT"),i.default.createElement("span",{className:(0,u.default)("lpft__value",{"color-white":h},{"color-black":!h},{"bg-grey":h&&b},{"bg-green":h&&e<=0&&!b},{"bg-red":h&&e>0&&!b})},h?h.format("DD MMM YYYY"):"-")))}()))};E.defaultProps={target:void 0,predicted:void 0,fpfv_lpfv:void 0,fpp_fpfv:void 0,actual_fpp_fpfv:void 0,actual_fpfv_lpfv:void 0,actual_f_lpft:void 0,adjusted_fpp_fpfv:void 0,adjusted_fpfv_lpfv:void 0,actual_date:void 0,showAdjusted:!1,isOverallocated:!1,isImpact:!1,isCohortView:!1,adjustedLpft:null,isIgnored:!1,isExactCopy:!1},E.propTypes={target:o.default.object,predicted:o.default.object,fpfv_lpfv:o.default.number,fpp_fpfv:o.default.number,actual_fpp_fpfv:o.default.number,actual_fpfv_lpfv:o.default.number,actual_f_lpft:o.default.object,adjusted_fpp_fpfv:o.default.number,adjusted_fpfv_lpfv:o.default.number,showActual:o.default.bool.isRequired,showAdjusted:o.default.bool,actual_date:o.default.object,startDate:o.default.object.isRequired,isOverallocated:o.default.bool,isCohortView:o.default.bool,adjustedLpft:o.default.object,isIgnored:o.default.bool,isExactCopy:o.default.bool},t.default=i.default.memo(E)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(941),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(6),c=a(14),f=n(c),p=a(82),h=n(p);a(732);var v=function(e){var t=e.title,a=e.tooltip,n=e.value,r=e.className;return i.default.createElement("div",{className:(0,u.default)("bar-item",r)},i.default.createElement(h.default,{className:"bar-item-separator"}),i.default.createElement(f.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:i.default.createElement("span",null,a)},i.default.createElement("div",{className:"bar-item-label"},t)),i.default.createElement("span",{className:"bar-arrow-icon"},d.Icons.ARROW_RIGHT),i.default.createElement("div",{className:"bar-item-value"},n))};v.defaultProps={title:"",tooltip:"",value:"",className:null},v.propTypes={className:o.default.string,title:o.default.string,tooltip:o.default.string,value:o.default.oneOfType([o.default.string,o.default.number])},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,D.getRouteMatch)(t);return{approvedScenario:(0,P.getApprovedScenario)(e,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioListTitleBar=void 0;var i=a(0),l=n(i),o=a(1),s=n(o),u=a(7),d=a(2),c=n(d),f=a(16),p=a(133),h=a(940),v=n(h),m=a(14),_=n(m),E=a(82),g=n(E),y=a(58),S=n(y),b=a(326),C=n(b),O=a(97),T=n(O),R=a(118),A=n(R),I=a(20),w=n(I),N=a(8),D=a(28),P=a(51);a(732);var L=function(e){var t=e.title,a=e.patientsNumber,n=e.endDate,r=e.approvedScenario,i=e.studyStatus,o=e.studyOwner,s=e.fp,u=e.fpfvFpft,d=e.showCsmsLink,f=e.onNavigateViewCsmsList,h=i===w.default.ACTIVE&&null!==r&&void 0!==r,m=r&&r.fullData.find(function(e){return"rollup"===e.type}),E=m&&1===m.actual_overallocation;return l.default.createElement("div",{className:(0,c.default)("scenario-list-title_container",{expanded:h})},l.default.createElement("div",{className:"scenario-list-title__wrapper"},h?l.default.createElement("div",{className:"scenario-list_tracking-title"},l.default.createElement("h2",null,"Tracking - ")):null,l.default.createElement("div",{className:"scenario-list-title-bar__title"},l.default.createElement(_.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"right",overlay:l.default.createElement("span",null,t)},l.default.createElement("h2",{className:"scenario-list-title-bar__study"},t))),l.default.createElement("div",{className:"scenario-list-title-bar__wrapper"},l.default.createElement("span",{className:"scenario-list-title-bar__label"},"Study Owner"),"",l.default.createElement("span",{className:"scenario-list-title-bar__owner"},o&&o.trim().length>0?o:"-")),d&&l.default.createElement(l.default.Fragment,null,l.default.createElement(g.default,{className:"title-separator",size:"large"}),l.default.createElement("div",{className:"scenario-list-title-bar__wrapper"},l.default.createElement("span",{className:"scenario-list-title-bar__label"},"Country managers"),l.default.createElement("span",{className:"scenario-list-title-bar__owner"},l.default.createElement(C.default,{className:"change-study-level",tooltip:"View CSMs list",height:48,onClick:f},T.default.COHORTS))))),l.default.createElement("div",{className:"scenario-list-title-bar"},i===w.default.ACTIVE&&l.default.createElement(v.default,{title:"A/Patients",tooltip:"Actual enrolled patients. Data refreshed as of\n             "+(m&&m.actual_date?m.actual_date.format("DD MMM YYYY"):"now"),value:m&&m.actual_patient_allocation||"-"}),l.default.createElement(v.default,{className:(0,c.default)("patients-number",{empty:!a}),title:"T/Patients",tooltip:"Target Patients",value:a||"-"}),l.default.createElement(v.default,{className:(0,c.default)("target-fp",{empty:!s}),title:"FP",tooltip:"Target FP",value:s?(0,N.getMomentDate)(s).format("D MMM YYYY"):"-"}),l.default.createElement(v.default,{title:"FPFV-FPFT",tooltip:"FPFV-FPFT",value:u||0===u?u+"d":"14d (default)"}),l.default.createElement(v.default,{className:(0,c.default)("end-date",{empty:!n}),title:"T/LPFT",tooltip:"Target LPFT",value:n?(0,N.getMomentDate)(n).format("D MMM YYYY"):"-"})),h&&m?l.default.createElement(S.default,null,l.default.createElement(A.default,{isOverallocated:E,scenario:r,studyStatus:i,isImpact:r.isImpact,data:r.fullData.find(function(e){return"rollup"===e.type})},l.default.createElement(p.MinimisedEnrolmentChart,{hideAdjusted:!0}))):null)};L.defaultProps={patientsNumber:0,endDate:"",approvedScenario:null,studyStatus:w.default.PLANNED,fp:"",studyOwner:"",fpfvFpft:0,showCsmsLink:!1},L.propTypes={title:s.default.string.isRequired,patientsNumber:s.default.number,endDate:s.default.string,approvedScenario:s.default.object,studyStatus:s.default.string,studyOwner:s.default.string,fp:s.default.string,fpfvFpft:s.default.number,showCsmsLink:s.default.bool,onNavigateViewCsmsList:s.default.func.isRequired},t.ScenarioListTitleBar=L,t.default=(0,f.withRouter)((0,u.connect)(r)(L))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(943),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(0,c.default)(e),a=(0,c.default)().diff(t,"h");return a<=21?t.fromNow():a>21&&a<24?a+" hours ago":t.format("D MMM YYYY")}function i(e){var t=document.location,a=new RegExp("("+t.protocol+"\\/\\/"+t.host+"\\/[A-Za-z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])");return e.replace(a,'<a href="$1" target="_blank">$1</a>')}Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioNote=void 0;var l=a(0),o=n(l),s=a(1),u=n(s),d=a(11),c=n(d),f=a(6);a(2189);var p=function(e){var t=e.userName,a=e.text,n=e.userEmail,l=e.created;return o.default.createElement("div",{className:"scenario-note"},o.default.createElement("div",{className:"note-title-bar"},o.default.createElement("div",null,o.default.createElement("a",{className:"note-title",href:"mailto:"+n},t),o.default.createElement("span",null,f.Icons.EMAIL)),o.default.createElement("div",{className:"note-time"},r(l))),o.default.createElement("div",{className:"note-text",dangerouslySetInnerHTML:{__html:i(a)}}))};p.propTypes={userName:u.default.string.isRequired,text:u.default.string.isRequired,userEmail:u.default.string.isRequired,created:u.default.string.isRequired},t.ScenarioNote=p,t.default=o.default.memo(p)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioNotes=void 0;var r=a(0),i=n(r),l=a(1),o=n(l),s=a(11),u=n(s),d=a(942),c=n(d);a(2190);var f=function(e){var t=e.notesData;return i.default.createElement("div",{className:"note-wrapper"},i.default.createElement("div",{className:"note-keyline"}),function(e){return e.map(function(e){return i.default.createElement("div",{key:"note_"+(0,u.default)(e.createdAt).valueOf()},i.default.createElement(c.default,{userName:e.userName,text:e.text,created:e.createdAt,userEmail:e.userEmail}),i.default.createElement("div",{className:"note-keyline"}))})}(t))};f.propTypes={notesData:o.default.array.isRequired},t.ScenarioNotes=f,t.default=i.default.memo(f)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(946),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),i=a(6),l=a(17),o=a(66);a(2191);var s=function(){return(0,n.useContext)(o.ScenarioViewerState).metadata.optimizingStatus?r.default.createElement(l.Grid,null,r.default.createElement(l.Row,null,r.default.createElement(l.Col,{offset:1,width:11},r.default.createElement("div",{className:"scenario-optimization-status-bar"},i.Icons.ARROW_RIGHT_SQUARE_FILLED,r.default.createElement("span",{className:"dash"}),i.Icons.CIRCLE_FILLED_LARGE,r.default.createElement("span",{className:"message"},"Running optimization"))))):null};t.default=s},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioTitle=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),l=n(i),o=a(1),s=n(o),u=a(6),d=a(82),c=n(d),f=a(485),p=n(f),h=a(8),v=a(10);a(2192);var m=function(e){var t=e.adjusted,a=e.createdAt,n=e.exactCopy,i=e.isAdjusted,o=e.isCohort,s=e.modified,d=e.name,f=e.optimisationWarning,m=e.optimised,_=e.originScenario,E=e.status,g=e.studyId,y=e.approvedAt,S=function(e){return e?e.format("DD MMMM YYYY"):"-"},b={};null!==_&&(b.originScenarioName=_.name,b.originScenarioStatus=_.status,b.originIsAdjusted=_.isAdjusted,b.originStudyName=_.studyName,b.isAdjusted=i,b.exactCopy=n,b.status=E);var C=l.default.createElement("div",{className:"scenario-title__details"},u.Icons.APPROVE,l.default.createElement("span",{className:"scenario-title__last-modified approved"},"APPROVED PLAN  ",S(y||s))),O=l.default.createElement("div",{className:"scenario-title__details"},u.Icons.UPDATED,l.default.createElement("span",{className:"scenario-title__last-modified"},"Last modified ",s?s.fromNow():"-")),T=l.default.createElement("div",null,l.default.createElement("div",{className:"scenario-title__details"},u.Icons.OPTIMISE,l.default.createElement("span",{className:"scenario-title__last-optimisation-date"},"Last optimized: ",S(m))),f&&l.default.createElement("div",{className:"scenario-title__notOptimizedWarning"},"Constraints have been removed. Scenario is not optimized.")),R=void 0;return E===v.SCENARIO_STATUS.APPROVED?R="approved":i&&(R="adjusted"),l.default.createElement("div",{className:"scenario-title"},l.default.createElement("div",{className:"h2 scenario-title__name"},l.default.createElement("span",null,g),l.default.createElement(p.default,r({title:g+"  "+d,value:"  "+d,createdAt:(0,h.getMomentDate)(a||t)},b))),l.default.createElement("div",{className:"scenario-title__statistics"},function(e){switch(e){case"approved":return o?C:l.default.createElement(l.default.Fragment,null,C,l.default.createElement(c.default,{className:"scenario-title__separator"}),T);case"adjusted":return l.default.createElement("div",{className:"scenario-title__details"},u.Icons.ADJUSTMENT,l.default.createElement("span",{className:"scenario-title__last-modified adjusted"},"PLAN ADJUSTMENT ",l.default.createElement("span",null," ",S(t))));default:return o?O:l.default.createElement(l.default.Fragment,null,T,l.default.createElement(c.default,{className:"scenario-title__separator"}),O)}}(R)))};m.propTypes={modified:s.default.object,optimised:s.default.object,adjusted:s.default.object,name:s.default.string,studyId:s.default.string.isRequired,status:s.default.string.isRequired,optimisationWarning:s.default.bool,isAdjusted:s.default.bool.isRequired,originScenario:s.default.object,createdAt:s.default.oneOfType([s.default.string,s.default.object]),exactCopy:s.default.bool,isCohort:s.default.bool,approvedAt:s.default.object},m.defaultProps={name:"",modified:null,adjusted:null,optimised:null,optimisationWarning:!1,originScenario:null,createdAt:null,exactCopy:!1,isCohort:!1,approvedAt:null},t.ScenarioTitle=m,t.default=l.default.memo(m)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(949),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(951),p=n(f),h=a(952),v=n(h),m=a(950),_=n(m),E=a(199),g=n(E),y=a(6);a(733);var S=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.containerWidth=0,a.containerLeft=0,a.scrollTop=0,a.handleResize=a.handleResize.bind(a),a.handleStepClick=a.handleStepClick.bind(a),a}return l(t,e),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),window.addEventListener("scroll",this.handleResize),this.handleResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("scroll",this.handleResize)}},{key:"handleResize",value:function(e){var t=this.container,a=t?t.getBoundingClientRect():{};this.containerWidth=a.width,this.containerLeft=a.left;var n=document.querySelector(".application"),r=n?n.getBoundingClientRect().top:0;e&&("scroll"===e.type&&this.scrollTop===r||"resize"===e.type)?this.forceUpdate():this.scrollTop=r}},{key:"handleStepClick",value:function(e){this.props.navigate(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.activeStep,n=t.onCloseClick,r=this.props.steps.filter(function(e){return!e.hide}),i=r.find(function(e){return e.id===a});i||(i=r.find(function(e){return!e.hide}));var l=0,o=this.props.steps.filter(function(e){return e.status===g.default.COMPLETE||e.hide});o&&o.length>0&&(l=o[o.length-1].id);var s=r.map(function(t){return u.default.createElement(p.default,{key:t.id,step:t,activeStep:a,activeStepItem:i,lastCompleteStep:l,onStepClick:e.handleStepClick})});return u.default.createElement("div",{ref:function(t){e.container=t},className:"fpo-section-stepper-container"},u.default.createElement("div",{className:"section-stepper-back",style:{left:this.containerLeft+this.containerWidth,right:0}}),u.default.createElement("div",{className:"fpo-section-stepper-wrapper",style:{width:this.containerWidth,left:this.containerLeft}},u.default.createElement("div",{onClick:function(){return n()},className:"section-stepper-close-wrapper"},y.Icons.CROSS),u.default.createElement(_.default,{direction:"up",activeStep:a,activeStepItem:i,onArrowClick:this.handleStepClick,steps:r}),u.default.createElement("div",{className:"section-stepper-steps-wrapper"},s),u.default.createElement(v.default,{activeStep:a,activeStepItem:i,steps:r}),u.default.createElement(_.default,{direction:"down",activeStep:a,activeStepItem:i,onArrowClick:this.handleStepClick,steps:r})),u.default.createElement("div",{className:"section-stepper-border",style:{left:this.containerLeft+this.containerWidth-48}}))}}]),t}(u.default.Component);S.propTypes={steps:c.default.arrayOf(c.default.shape({id:c.default.number,status:c.default.string,title:c.default.string})).isRequired,activeStep:c.default.number.isRequired,navigate:c.default.func.isRequired,onCloseClick:c.default.func.isRequired},S.defaultProps={onCloseClick:void 0},t.default=S},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(199),c=n(d),f=function(e){var t=e.direction,a=e.activeStep,n=e.steps,r=e.activeStepItem,l=e.onArrowClick,o=i.default.createElement("svg",{width:"24",height:"48",viewBox:"0 0 24 24"},i.default.createElement("g",null,i.default.createElement("line",{x1:"12",y1:"1",x2:"12",y2:"48",strokeWidth:2}),i.default.createElement("line",{x1:"6",y1:"6",x2:"12",y2:"1",strokeWidth:2}),i.default.createElement("line",{x1:"18",y1:"6",x2:"12",y2:"1",strokeWidth:2}))),s=i.default.createElement("svg",{width:"24",height:"68",viewBox:"0 0 24 68"},i.default.createElement("g",null,i.default.createElement("line",{x1:"12",y1:"0",x2:"12",y2:"67",strokeWidth:2}),i.default.createElement("line",{x1:"6",y1:"61",x2:"12",y2:"67",strokeWidth:2}),i.default.createElement("line",{x1:"18",y1:"61",x2:"12",y2:"67",strokeWidth:2}))),d=void 0,f=void 0,p=void 0;return"up"===t?(d=(0,u.default)("nav-arrow","nav-arrow-up",{disabled:n[0].id===a}),f=n[n.indexOf(r)-1]?n[n.indexOf(r)-1].id:n[0].id,p=o):"down"===t&&(d=(0,u.default)("nav-arrow","nav-arrow-down",{disabled:r.status!==c.default.COMPLETE||n[n.length-1]&&r.id===n[n.length-1].id}),f=n[n.indexOf(r)+1]?n[n.indexOf(r)+1].id:r.id,p=s),i.default.createElement("div",{className:d,onClick:function(){return l(f)}},i.default.createElement("div",null,p))};f.propTypes={direction:o.default.oneOf(["up","down"]).isRequired,activeStep:o.default.number.isRequired,activeStepItem:o.default.shape({id:o.default.number,title:o.default.string,status:o.default.string}).isRequired,onArrowClick:o.default.func.isRequired,steps:o.default.arrayOf(o.default.shape({id:o.default.number,status:o.default.string,title:o.default.string})).isRequired},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(199),c=n(d);a(733);var f=function(e){var t=e.step,a=e.activeStep,n=e.activeStepItem,r=e.lastCompleteStep,l=e.onStepClick,o=i.default.createElement("svg",{width:"24",height:"8",viewBox:"0 0 24 8"},i.default.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#C6C6C6",d:"M.5 1.5h23v5H.5z"})),s=i.default.createElement("svg",{width:"24",height:"8",viewBox:"0 0 24 8"},i.default.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#000",d:"M.5 1.5h23v5H.5z"})),d=i.default.createElement("svg",{width:"24",height:"8",viewBox:"0 0 24 8"},i.default.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#EC3508",d:"M.5 1.5h23v5H.5z"})),f=i.default.createElement("svg",{width:"24",height:"8",viewBox:"0 0 24 8"},i.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M0 1h24v6H0z"})),p=i.default.createElement("svg",{className:"active-icon",width:"28",height:"16",viewBox:"0 0 28 16"},i.default.createElement("path",{fill:"#5291DD",fillRule:"evenodd",d:"M2 5h24v6H2z"})),h=o;t.id===a&&(h=s),t.status===c.default.COMPLETE&&(h=f),t.status===c.default.ERROR&&(h=d);var v=n.status===c.default.COMPLETE&&(t.id===r+1||t.id===n.id+1)||t.id<n.id||n.status===c.default.COMPLETE&&t.status===c.default.COMPLETE,m=(0,u.default)("step-item",{enabled:v});return i.default.createElement("div",{className:m,"data-test":"step-"+t.title,onClick:function(){return v&&l(t.id)}},h,p,i.default.createElement("div",{className:"step-title"},i.default.createElement("h3",null,t.title)))};f.propTypes={step:o.default.shape({id:o.default.number,title:o.default.string,status:o.default.string}).isRequired,activeStep:o.default.number.isRequired,activeStepItem:o.default.shape({id:o.default.number,title:o.default.string,status:o.default.string}).isRequired,lastCompleteStep:o.default.number.isRequired,onStepClick:o.default.func.isRequired},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(199),c=n(d),f=function(e){var t=e.activeStepItem,a=e.steps,n=i.default.createElement("svg",{width:"8",height:"28",viewBox:"0 0 8 28"},i.default.createElement("path",{fill:"#C6C6C6",fillRule:"evenodd",d:"M.996 0L8 28H7L0 0z"})),r=(0,u.default)("active-step",{error:t.status===c.default.ERROR,completed:t.status===c.default.COMPLETE});return i.default.createElement("div",{className:"steps-summary"},i.default.createElement("div",{className:r},a.indexOf(t)+1),i.default.createElement("div",null,n),i.default.createElement("div",null,a.length))};f.propTypes={activeStepItem:o.default.shape({id:o.default.number,title:o.default.string,status:o.default.string}).isRequired,steps:o.default.arrayOf(o.default.shape({id:o.default.number,status:o.default.string,title:o.default.string})).isRequired},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Separator=void 0;var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s);a(2193);var d=function(e){var t=e.size,a=e.className,n=(0,u.default)("fpo-separator",a),r={tiny:{width:4,height:12},small:{width:8,height:28},large:{width:12,height:48},extraLarge:{width:16,height:72}},l=r[t].width,o=r[t].height;return i.default.createElement("span",{className:n},i.default.createElement("svg",{height:o+"px",width:l+"px",viewBox:"0 0 "+l+" "+o},i.default.createElement("g",null,i.default.createElement("line",{stroke:"#9d9d9d",x1:l,y1:"0",x2:"0",y2:o,strokeWidth:"1"}))))};d.defaultProps={size:"small",className:null},d.propTypes={size:o.default.oneOf(["tiny","small","large","extraLarge"]),className:o.default.string},t.Separator=d,t.default=i.default.memo(d)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(955),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(196),u=n(s),d=a(61),c=n(d);a(2194);var f=function(e){var t=e.sessionExpired;return t&&(history.pushState(null,document.title,location.href),window.addEventListener("popstate",function(){history.pushState(null,document.title,location.href)})),i.default.createElement(u.default,{isShown:t,status:"warning",title:"Session has expired"},i.default.createElement("div",{className:"session-expired-warning-dialog-container"},i.default.createElement("div",{className:"session-expired-warning-dialog__content-wrapper"},i.default.createElement("span",null,"Your current session has expired. "),i.default.createElement("span",null,"Please refresh browser window to get a new session and keep all services working")),i.default.createElement("div",{className:"session-expired-warning-dialog__button-wrapper"},i.default.createElement(c.default,{onClick:function(){return window.location.reload()},label:"Refresh"}))))};f.propTypes={sessionExpired:o.default.bool},f.defaultProps={sessionExpired:!1},t.default=i.default.memo(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(291),f=a(1),p=n(f),h=a(14),v=n(h);a(2195);var m={transformOrigin:"center center"},_={entering:{transform:"rotate(0)",transition:"transform 300ms ease-out"},entered:{transform:"rotate(-360deg)",transition:"transform 300ms ease-out"},exiting:{transform:"rotate(-360deg)"},exited:{transform:"rotate(0)"}},E={entering:{transform:"scale3d(0,0,1)",transition:"all 300ms ease-out",opacity:1},entered:{transform:"scale3d(2,2,1)",transition:"all 300ms ease-out",opacity:.5},exiting:{transform:"scale3d(2,2,1)",transition:"all 100ms ease-out",opacity:.5},exited:{transform:"scale3d(0,0,1)",transition:"all 100ms ease-out",opacity:0}},g=function(e){function t(){var e,a,n,l;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={clicked:!1},n.handleClicked=function(){n.setState({clicked:!0})},n.handleTransitionEnd=function(){n.setState({clicked:!1})},l=a,i(n,l)}return l(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.styles,r=t.disabled,i=t.tooltip,l=this.state.clicked,s=n||_;return d.default.createElement("div",null,d.default.createElement(c.Transition,{in:l,addEndListener:function(t){t.addEventListener("transitionend",e.handleTransitionEnd,!1)},timeout:0},function(e){return d.default.createElement("div",{className:"click-background__wrapper",style:o({},m,E[e])},d.default.createElement("div",{className:"click-background"}))}),d.default.createElement(c.Transition,{in:l,addEndListener:function(t){t.addEventListener("transitionend",e.handleTransitionEnd,!1)},timeout:0},function(t){return d.default.createElement("div",{style:o({},m,s[t])},d.default.createElement("div",{onClick:r?void 0:e.handleClicked,className:"children-wrapper"},i?d.default.createElement(v.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlayClassName:"fpo-sidebar-button__tooltip",placement:"right",overlay:d.default.createElement("span",null,i)},a):{children:a}))}))}}]),t}(u.PureComponent);g.defaultProps={styles:null,disabled:!1,tooltip:null},g.propTypes={children:p.default.node.isRequired,styles:p.default.object,disabled:p.default.bool,tooltip:p.default.string},t.default=g},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(14),p=n(f),h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.tooltip,a=e.children;return t?u.default.createElement(p.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlayClassName:"fpo-sidebar-button__tooltip",placement:"right",overlay:u.default.createElement("span",null,t)},a):a}}]),t}(s.PureComponent);h.defaultProps={tooltip:null},h.propTypes={tooltip:c.default.string,children:c.default.node.isRequired},t.default=u.default.memo(h)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getScenarioSiteSelectionStatus=void 0;var n=a(47),r=a(12),i=function(e){return e&&e.__esModule?e:{default:e}}(r),l=a(53),o=a(312);t.default=(0,n.createSelector)(l.getScenarioCountries,function(e){return e.reduce(function(e,t){switch(e.countriesNum+=1,(0,i.default)(t,"country_sites_approval_status.status",o.COUNTRY_SITE_APPROVAL_STATUS.NOT_READY_TO_LOCAL_MANAGE)){case o.COUNTRY_SITE_APPROVAL_STATUS.READY_TO_LOCAL_MANAGE:e.readyToManage+=1;break;case o.COUNTRY_SITE_APPROVAL_STATUS.IN_GLOBAL_REVIEW:e.inReview+=1;break;case o.COUNTRY_SITE_APPROVAL_STATUS.APPROVED:e.approved+=1;break;default:e.notReady+=1}return e},{approved:0,inReview:0,readyToManage:0,notReady:0,countriesNum:0})}),t.getScenarioSiteSelectionStatus=(0,n.createSelector)(l.getScenarioData,function(e){return e&&e.site_selection_required})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=a(0),o=n(l),s=a(1),u=n(s),d=a(2),c=n(d),f=a(7),p=a(16),h=a(327),v=n(h),m=a(64),_=n(m),E=a(310),g=a(958),y=n(g),S=a(312),b=a(28);a(2199);var C=function(e){var t=e.approved,a=e.inReview,n=e.readyToManage,r=e.notReady,s=e.changeStatus,u=e.canChangeStatus,d=e.studyId,f=e.scenarioId,p=e.countriesNum,h=e.siteSelectionRequired,m=e.updateScenarioSiteSelectionStatus,E=(0,l.useState)(!1),g=i(E,2),y=g[0],b=g[1],C=(0,l.useCallback)(function(){s(d,f,S.COUNTRY_SITE_APPROVAL_STATUS.READY_TO_LOCAL_MANAGE)},[d,f,s]);return o.default.createElement("div",{className:"sites-approval-status-bar__container",onMouseLeave:function(){return b(!1)},onMouseEnter:function(){return b(!0)}},o.default.createElement("div",{className:(0,c.default)("sites-approval-status-bar__panel",{expanded:y})},u&&o.default.createElement("div",{className:(0,c.default)("control__link",{disabled:!h}),onClick:C},"Request site selection from all countries"),o.default.createElement("div",{className:(0,c.default)("sites-approval-status-bar__panel-content",{disabled:!h})},o.default.createElement("div",{className:"panel-list-header"},"Shown by countries"),o.default.createElement("div",null,o.default.createElement(v.default,{status:S.COUNTRY_SITE_APPROVAL_STATUS.APPROVED}),o.default.createElement("div",null,t),o.default.createElement("div",null,"Site selection agreed")),o.default.createElement("div",null,o.default.createElement(v.default,{status:S.COUNTRY_SITE_APPROVAL_STATUS.IN_GLOBAL_REVIEW}),o.default.createElement("div",null,a),o.default.createElement("div",null,"Site selection provided")),o.default.createElement("div",null,o.default.createElement(v.default,{status:S.COUNTRY_SITE_APPROVAL_STATUS.READY_TO_LOCAL_MANAGE}),o.default.createElement("div",null,n),o.default.createElement("div",null,"Site selection required")),o.default.createElement("div",null,o.default.createElement(v.default,{status:S.COUNTRY_SITE_APPROVAL_STATUS.NOT_READY_TO_LOCAL_MANAGE}),o.default.createElement("div",null,r),o.default.createElement("div",null,"No site selection required yet"))),o.default.createElement("div",{className:"bottom-control__wrapper"},u&&o.default.createElement(_.default,{label:"Scenario requires site selection",onChange:function(e){m(d,f,e)},checked:h}))),o.default.createElement("div",{className:"sites-approval-status-bar__title"},"Sites approval status"),o.default.createElement("div",{className:"sites-approval-status-bar"},o.default.createElement("div",{className:"approved",style:{width:100*t/p+"%"}}),o.default.createElement("div",{className:"in-review",style:{width:100*a/p+"%"}}),o.default.createElement("div",{className:"ready-to-manage",style:{width:100*n/p+"%"}})))};C.defaultProps={approved:9,inReview:5,readyToManage:1,notReady:3,canChangeStatus:!1,countriesNum:0,siteSelectionRequired:!0},C.propTypes={approved:u.default.number,inReview:u.default.number,readyToManage:u.default.number,notReady:u.default.number,changeStatus:u.default.func.isRequired,canChangeStatus:u.default.bool,studyId:u.default.number.isRequired,scenarioId:u.default.number.isRequired,countriesNum:u.default.number,siteSelectionRequired:u.default.bool,updateScenarioSiteSelectionStatus:u.default.func.isRequired};var O=function(e,t){var a=(0,p.matchPath)(e.router.location.pathname,{path:"/studies/:id/scenarios/:scenarioId/sites/:countryId/site/:siteId"}),n=(0,b.getRouteMatch)(a?{match:a}:t);return r({},(0,y.default)(e,n),{siteSelectionRequired:(0,g.getScenarioSiteSelectionStatus)(e,n)})};t.default=(0,p.withRouter)((0,f.connect)(O,{changeStatus:E.onChangeCountriesSitesStatus,updateScenarioSiteSelectionStatus:E.updateScenarioSiteSelection})(C))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(6),c=a(312);a(2200);var f=a(192),p=n(f),h=function(e){var t=e.status,a=e.showTooltip,n=void 0,r=void 0;switch(t){case c.COUNTRY_SITE_APPROVAL_STATUS.READY_TO_LOCAL_MANAGE:n=d.Icons.SITE_IN_PROGRESS,r="Site selection required";break;case c.COUNTRY_SITE_APPROVAL_STATUS.IN_GLOBAL_REVIEW:n=d.Icons.SITE_IN_REVIEW,r="Site selection provided";break;case c.COUNTRY_SITE_APPROVAL_STATUS.APPROVED:n=d.Icons.SITE_APPROVED,r="Site selection agreed";break;default:n=""}var l=i.default.createElement("span",{className:(0,u.default)("sites-status-icon")},n);return a&&(l=i.default.createElement(p.default,{placement:"top",overlay:i.default.createElement("span",null,r),mouseEnterDelay:.3},i.default.createElement("span",{className:(0,u.default)("sites-status-icon")},n))),i.default.createElement("div",{className:"sites-status-icon__wrapper"},l)};h.defaultProps={status:"",showTooltip:!1},h.propTypes={status:o.default.string,showTooltip:o.default.bool},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2114),h=n(p),v=h.default,m=function(){var e=document.createElement("a"),t=e.style;return t.cssText="position:sticky;position:-webkit-sticky;position:-ms-sticky;",-1!==t.position.indexOf("sticky")},_=function(){var e=navigator.userAgent.indexOf("Chrome")>-1,t=navigator.userAgent.indexOf("Safari")>-1;return e&&t&&(t=!1),t},E=function(){return m()&&!_()?"sticky":"-webkit-sticky"},g=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),s(t,[{key:"componentDidMount",value:function(){v.add(this.stickyElement)}},{key:"componentWillUnmount",value:function(){v.remove(this.stickyElement)}},{key:"render",value:function(){var e=this;return d.default.createElement("div",o({},this.props,{className:"sticky "+(this.props.className||""),ref:function(t){e.stickyElement=t},style:o({top:0,zIndex:1,backfaceVisibility:"hidden",position:E()},this.props.style)}))}}]),t}(d.default.PureComponent);g.defaultProps={style:{},className:""},g.propTypes={style:f.default.object,className:f.default.string},t.default=d.default.memo(g)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(963),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=a(0),u=n(s),d=a(2),c=n(d),f=a(56),p=n(f),h=a(12),v=n(h),m=a(7),_=a(6),E=a(66),g=a(17),y=a(28),S=a(328);a(2201);var b=function(){var e=(0,s.useContext)(E.ScenarioViewerState),t=e.study,a=e.activeUser,n=e.setState,d=(0,y.useLocalStorage)("fpo-changed-study-params",{}),f=o(d,2),h=f[0],b=f[1],C=(0,v.default)(h,t.id,{closedBy:[],updatedAt:null,updatedBy:null}),O=(0,m.useSelector)(function(e){return(0,S.isStudyChanged)(e,t.id)}),T=(0,s.useCallback)(function(){b(l({},h,r({},t.id,l({},C,{closedBy:[].concat(i(C.closedBy),[a.id]),updatedAt:t.study_details_updated_at})))),n({type:"SET_VALUES",payload:{key:p.default.generate()}})},[a.id,C,h,b,n,t]);return C.closedBy.includes(a.id)?null:O?u.default.createElement(g.Grid,null,u.default.createElement(g.Row,null,u.default.createElement(g.Col,{offset:1,width:11},u.default.createElement("div",{className:(0,c.default)("study-changed-status-bar")},u.default.createElement("span",{className:"message"},"The study owner has made changes to this study. Scenario details may be modified."),u.default.createElement("div",{className:"study-changed-closeContainer",onClick:T},_.Icons.CROSS_O))))):null};t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(966),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(11),c=n(d),f=a(15),p=a(6);a(2202);var h=function(e){var t=e.approvedParams,a=e.currentParams,n=e.invalidFields,r=["fp"],l=["target_lpft","therapeutic_area","indication","target_num_patients","phase"],o={target_lpft:"T/LPFT",target_num_patients:"T/Patients",fp:"FP",indication:"Indication",therapeutic_area:"TA",phase:"Phase"},s=r.map(function(e){return{key:e,title:o[e],approved:t[e],current:a[e],status:a[e]?!n.includes(e):null}}),u=l.map(function(e){return{key:e,title:o[e],approved:t[e],current:a[e],status:a[e]?!n.includes(e):null}});return i.default.createElement("div",{style:{marginTop:"16px"},className:"fpo-study-details-warning-table"},i.default.createElement(f.FlexTable,{headerHeight:60,rowHeight:35,rowsCount:s.length},i.default.createElement(f.Row,{data:s},i.default.createElement(f.Column,{header:i.default.createElement(v,{title:null,name:null}),data:i.default.createElement(m,{rows:s,dataField:"title"}),fixedWidth:!0,width:120}),i.default.createElement(f.Column,{header:i.default.createElement(v,{name:""},"Study parameters",i.default.createElement("br",null)," in FPO"),data:i.default.createElement(m,{rows:s,dataField:"approved"}),width:95}),i.default.createElement(f.Column,{header:i.default.createElement(v,{name:""},"Study parameters",i.default.createElement("br",null)," in Impact"),data:i.default.createElement(m,{rows:s,dataField:"current"}),width:95}),i.default.createElement(f.Column,{header:i.default.createElement(v,{title:null,name:null}),data:i.default.createElement(m,{rows:s,dataField:"status"}),fixedWidth:!0,width:60}))),i.default.createElement(f.FlexTable,{headerHeight:0,rowHeight:35,rowsCount:u.length},i.default.createElement(f.Row,{data:u},i.default.createElement(f.Column,{header:i.default.createElement(v,{title:null,name:null}),data:i.default.createElement(m,{rows:u,dataField:"title"}),fixedWidth:!0,width:120}),i.default.createElement(f.Column,{header:i.default.createElement(v,{title:null,name:null}),data:i.default.createElement(m,{rows:u,dataField:"approved"}),width:95}),i.default.createElement(f.Column,{header:i.default.createElement(v,{title:null,name:null}),data:i.default.createElement(m,{rows:u,dataField:"current"}),width:95}),i.default.createElement(f.Column,{header:i.default.createElement(v,{title:null,name:null}),data:i.default.createElement(m,{rows:u,dataField:"status"}),fixedWidth:!0,width:60}))))};h.defaultProps={inDuplicateDialog:!1,dashboard:!1,partial:!1,scenarioName:null,approvedLpft:"-",nextarget_lpft:"-",recalculateWithActualParams:!1,confirmActualStudyParams:!1,showWarningOnDuplicate:!1,recalculateOption:!1,hideConfirmOption:!1,duplicate:!1},h.propTypes={approvedParams:o.default.object.isRequired,currentParams:o.default.object.isRequired,invalidFields:o.default.array.isRequired};var v=function(e){var t=e.name,a=e.children;return i.default.createElement(f.Cell,{className:"header-cell"},a,i.default.createElement("div",{className:"name"},t))};v.defaultProps={children:null,name:null},v.propTypes={children:o.default.node,name:o.default.string};var m=function(e){var t=e.rowIndex,a=e.rows,n=e.dataField,r=a[t];if(!r)return null;var l=r.key,o=r[n];!o||"target_lpft"!==l&&"fp"!==l||"-"===o||"approved"!==n&&"current"!==n||(o=c.default.utc(o).format("DD MMM YYYY"));var s=void 0;return s="status"===n?i.default.createElement("div",{className:(0,u.default)("status-icon__wrapper",{success:o,error:!o&&null!==o})},o||null===o?p.Icons.SUCCESS:p.Icons.ERROR):!o&&0!==o&&"fpfvFpft"!==l||"target_num_patients"===l&&0===o?i.default.createElement("div",{className:"missing-value"},"Missing value"):i.default.createElement("div",null,o,"fpfvFpft"===l&&"title"!==n?"w":""),i.default.createElement(f.Cell,{className:"data-cell"},s,i.default.createElement("div",{className:"cell-underline"}))};m.defaultProps={rowIndex:null},m.propTypes={rowIndex:o.default.number,rows:o.default.array.isRequired,dataField:o.default.string.isRequired},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(6),f=a(495),p=n(f),h=a(14),v=n(h);a(2204);var m=function(e){function t(){var e,a,n,l;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={isShown:!1},n.onCloseDetails=function(){n.setState({isShown:!1})},n.toggleDetails=function(){n.setState({isShown:!n.state.isShown})},l=a,i(n,l)}return l(t,e),s(t,[{key:"render",value:function(){return d.default.createElement("div",{className:"study-details-warning"},d.default.createElement("span",{className:"message"},"Study parameters aren't consistent with Impact data."),d.default.createElement(v.default,{mouseEnterDelay:.7,placement:"top",overlay:"Click to see mismatched parameters"},d.default.createElement("div",{className:"study-details-warning-details__wrapper",onClick:this.toggleDetails},c.Icons.INFO_O)),d.default.createElement(p.default,o({},this.props,{isShown:this.state.isShown,onClose:this.onCloseDetails})))}}]),t}(d.default.PureComponent);t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(968),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StudyListTitleBar=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(65),h=n(p),v=a(14),m=n(v),_=a(6),E=a(167),g=a(853),y=n(g),S=a(58),b=n(S);a(2205);var C=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showMenu:!1},a.toggleMenu=a.toggleMenu.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a}return l(t,e),s(t,[{key:"toggleMenu",value:function(e){this.setState({showMenu:void 0!==e?e:!this.state.showMenu})}},{key:"handleClickOutside",value:function(e){this.state.showMenu&&e&&!e.target.getAttribute("data-ignore-click-outside")&&this.toggleMenu(!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.trackingStudies,n=t.planningStudies,r=t.userStudies,i=t.unknownStudies,l=t.userName,s=t.onStudyAdd,u=t.onImport,c=t.getStudies,f=t.studies,p=t.metadata,h=this.state.showMenu?{visible:!1}:{},v=d.default.createElement("div",{className:"user-profile"},d.default.createElement("div",{className:"user-profile-icon"},_.Icons.USER_PROFILE),d.default.createElement("div",{className:"user-profile-text"},d.default.createElement("span",{className:"greeting"},"Hello,"),d.default.createElement("span",{className:"user-name"},l)));return d.default.createElement("div",{className:"study-list-title-bar"},v,i>0&&d.default.createElement("div",{className:"study-list-title-bar__item study-list-title-bar__item--na"},d.default.createElement("div",{className:"study-list-title-bar__item-title"},"Completed / Cancelled"),d.default.createElement("div",{className:"study-list-title-bar__item-value"},i)),d.default.createElement("div",{className:"study-list-title-bar__item study-list-title-bar__item--tracking"},d.default.createElement("div",{className:"study-list-title-bar__item-title"},"Tracking"),d.default.createElement("div",{className:"study-list-title-bar__item-value"},a)),d.default.createElement("div",{className:"study-list-title-bar__item study-list-title-bar__item--planning"},d.default.createElement("div",{className:"study-list-title-bar__item-title"},"Planning"),d.default.createElement("div",{className:"study-list-title-bar__item-value"},n)),d.default.createElement("div",{className:"study-list-title-bar__item study-list-title-bar__item--import"},d.default.createElement(b.default,null,d.default.createElement(y.default,{className:"studies-page__import-study",studies:f,getStudies:c,onImport:u}))),p.userCanViewPlaygroundStudy&&d.default.createElement("div",{className:"study-list-title-bar__item fpo-separator"}),p.userCanViewPlaygroundStudy&&d.default.createElement("div",{className:"study-list-title-bar__item study-list-title-bar__item--user"},d.default.createElement("div",{className:"study-list-title-bar__item-title"},d.default.createElement(m.default,o({mouseEnterDelay:.3},h,{placement:"topRight",align:{offset:[20,0]},overlay:d.default.createElement("span",null,"Create study not already in",d.default.createElement("br",null)," IMPACT")}),d.default.createElement(m.default,{destroyTooltipOnHide:!0,align:{offset:[20,0]},placement:"bottomRight",visible:this.state.showMenu,trigger:["click"],overlay:d.default.createElement(E.ContextMenu,null,d.default.createElement(E.ContextMenuItem,{label:"Create study","data-ignore-click-outside":!0,icon:d.default.createElement("div",{className:"icon-color-white"},_.Icons.PLUS),onClick:function(){s()}}),d.default.createElement(E.ContextMenuItem,{label:"Create cohort study","data-ignore-click-outside":!0,icon:d.default.createElement("div",{className:"icon-color-white"},_.Icons.PLUS),onClick:function(){return s(!0)}}))},d.default.createElement("span",{className:"row-control-icon--more",onClick:function(){return e.toggleMenu()}},_.Icons.PLUS))),"My playground"),d.default.createElement("div",{className:"study-list-title-bar__item-value"},r)))}}]),t}(d.default.PureComponent);C.defaultProps={trackingStudies:0,planningStudies:0,userStudies:0,unknownStudies:0,userName:""},C.propTypes={trackingStudies:f.default.number,planningStudies:f.default.number,userStudies:f.default.number,unknownStudies:f.default.number,userName:f.default.string,onStudyAdd:f.default.func.isRequired,studies:f.default.array.isRequired,getStudies:f.default.func.isRequired,onImport:f.default.func.isRequired,metadata:f.default.object.isRequired},t.StudyListTitleBar=C,t.default=(0,h.default)(C)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(11),c=n(d),f=a(15),p=a(6);n(a(64)),a(2206);var h=function(e){var t=e.hideConfirmOption,a=e.approvedParams,n=e.currentParams,r=e.invalidFields,l=e.scenarioName,o=e.approvedLpft,s=e.nextLpft,u=(e.confirmActualStudyParams,e.handleConfirmActualStudyParamsCheck,e.showWarningOnDuplicate),d=e.duplicate,c=["fp","fpfvFpft"],p=["tLpft","therapeutic_area","indication","target_num_patients"],h={tLpft:"T/LPFT",target_num_patients:"T/Patients",fp:"FP",fpfvFpft:"FPFV-FPFT",indication:"Indication",therapeutic_area:"TA"},_=c.map(function(e){return{key:e,title:h[e],approved:a[e],current:n[e],status:!r.includes(e)}}),E=p.map(function(e){return{key:e,title:h[e],approved:a[e],current:n[e],status:!r.includes(e)}}),g=c.reduce(function(e,t){var a=e;return r.includes(t)&&(a=!0),a},!1);return p.reduce(function(e,t){var a=e;return r.includes(t)&&(a=!0),a},!1),i.default.createElement("div",{style:{marginTop:"16px"},className:"fpo-study-params-details-warning-table"},i.default.createElement(f.FlexTable,{headerHeight:60,rowHeight:35,rowsCount:_.length},i.default.createElement(f.Row,{data:_},i.default.createElement(f.Column,{header:i.default.createElement(v,{title:null,name:null}),data:i.default.createElement(m,{rows:_,dataField:"title"}),fixedWidth:!0,width:120}),i.default.createElement(f.Column,{header:i.default.createElement(v,{name:""},"Study parameters",i.default.createElement("br",null)," used for ",l," plan"),data:i.default.createElement(m,{rows:_,dataField:"approved"}),width:95}),i.default.createElement(f.Column,{header:i.default.createElement(v,{name:""},"Actual study",i.default.createElement("br",null)," parameters"),data:i.default.createElement(m,{rows:_,dataField:"current"}),width:95}),i.default.createElement(f.Column,{header:i.default.createElement(v,{title:null,name:null}),data:i.default.createElement(m,{rows:_,dataField:"status"}),fixedWidth:!0,width:60}))),!t&&g&&u&&i.default.createElement("div",{className:"table-inner-control__wrapper"},i.default.createElement("div",{className:"checkbox__wrapper"},d?i.default.createElement("div",null,i.default.createElement("strong",null," P/LPFT")," in duplicate will be adjusted accordingly: ",i.default.createElement("br",null),o&&i.default.createElement("strong",null," ",o)," to ",i.default.createElement("strong",null,s)):i.default.createElement("div",null,"Recalculate scenario with actual study parameters.",i.default.createElement("strong",null," P/LPFT")," will be adjusted accordingly:",o&&i.default.createElement("strong",null," ",o)," to ",i.default.createElement("strong",null,s)))),i.default.createElement(f.FlexTable,{headerHeight:0,rowHeight:35,rowsCount:E.length},i.default.createElement(f.Row,{data:E},i.default.createElement(f.Column,{header:i.default.createElement(v,{title:null,name:null}),data:i.default.createElement(m,{rows:E,dataField:"title"}),fixedWidth:!0,width:120}),i.default.createElement(f.Column,{header:i.default.createElement(v,{title:null,name:null}),data:i.default.createElement(m,{rows:E,dataField:"approved"}),width:95}),i.default.createElement(f.Column,{header:i.default.createElement(v,{title:null,name:null}),data:i.default.createElement(m,{rows:E,dataField:"current"}),width:95}),i.default.createElement(f.Column,{header:i.default.createElement(v,{title:null,name:null}),data:i.default.createElement(m,{rows:E,dataField:"status"}),fixedWidth:!0,width:60}))),!1)};h.defaultProps={inDuplicateDialog:!1,dashboard:!1,partial:!1,scenarioName:null,approvedLpft:"-",nextLpft:"-",recalculateWithActualParams:!1,confirmActualStudyParams:!1,showWarningOnDuplicate:!1,recalculateOption:!1,hideConfirmOption:!1,duplicate:!1},h.propTypes={approvedParams:o.default.object.isRequired,currentParams:o.default.object.isRequired,invalidFields:o.default.array.isRequired,scenarioName:o.default.string,approvedLpft:o.default.string,nextLpft:o.default.string,confirmActualStudyParams:o.default.bool,showWarningOnDuplicate:o.default.bool,handleConfirmActualStudyParamsCheck:o.default.func.isRequired,hideConfirmOption:o.default.bool,duplicate:o.default.bool};var v=function(e){var t=e.name,a=e.children;return i.default.createElement(f.Cell,{className:"header-cell"},a,i.default.createElement("div",{className:"name"},t))};v.defaultProps={children:null,name:null},v.propTypes={children:o.default.node,name:o.default.string};var m=function(e){var t=e.rowIndex,a=e.rows,n=e.dataField,r=a[t];if(!r)return null;var l=r.key,o=r[n];!o||"tLpft"!==l&&"fp"!==l||"-"===o||"approved"!==n&&"current"!==n||(o=(0,c.default)(o).format("DD MMM YYYY"));var s=void 0;return s="status"===n?i.default.createElement("div",{className:(0,u.default)("status-icon__wrapper",{success:o,error:!o})},o?p.Icons.SUCCESS:p.Icons.ERROR):!o&&0!==o&&"fpfvFpft"!==l||"target_num_patients"===l&&0===o?i.default.createElement("div",{className:"missing-value"},"Missing value"):i.default.createElement("div",null,o,"fpfvFpft"===l&&"title"!==n?"d":""),i.default.createElement(f.Cell,{className:"data-cell"},s,i.default.createElement("div",{className:"cell-underline"}))};m.defaultProps={rowIndex:null},m.propTypes={rowIndex:o.default.number,rows:o.default.array.isRequired,dataField:o.default.string.isRequired},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2),h=n(p),v=a(6),m=a(496),_=n(m);a(2208);var E=function(e){function t(){var e,a,n,l;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={isShown:!1},n.onCloseDetails=function(){n.setState({isShown:!1})},n.toggleDetails=function(){n.setState({isShown:!n.state.isShown})},l=a,i(n,l)}return l(t,e),s(t,[{key:"render",value:function(){return d.default.createElement("div",{className:(0,h.default)("study-params-warning",{narrow:this.props.dashboard})},d.default.createElement("span",{className:"message"},"Study parameters have been changed.",this.props.dashboard?" Approved ":" Current ","scenario was created with different study parameters."),!this.props.dashboard&&d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:"study-params-warning-details__wrapper",onClick:this.toggleDetails},v.Icons.INFO_O),d.default.createElement(_.default,o({},this.props,{isShown:this.state.isShown,onClose:this.onCloseDetails}))))}}]),t}(d.default.PureComponent);E.propTypes={dashboard:f.default.bool},E.defaultProps={dashboard:!1},t.default=E},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,b.getRouteMatch)(t),n=(0,C.getStudyData)(e,a),r=(0,T.default)(e,a),l=t.dataType===w.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",o=r[l][t.rowIndex],s=(0,S.default)(e.auth.user,n,i({},o,{state:o.state?o.state:{}})),u=s.isShareAvailable,d=s.isDuplicateAvailable,c=s.isAdmin,f=s.isUserHasScenarioFullControl;return{calculating:o.calculating,status:o.status,nerve_job_status:o.nerve_job_status,studyId:n.id,isDuplicateAvailable:d,isShareAvailable:u,isUserHasScenarioFullControl:f,isAdmin:c,scenarioId:o.id||"impact",isArchived:e.router.location.pathname.indexOf("archived")>-1}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=a(0),s=n(o),u=a(1),d=n(u),c=a(2),f=n(c),p=a(7),h=a(16),v=a(14),m=n(v),_=a(167),E=a(6),g=a(49),y=a(55),S=n(y),b=a(28),C=a(63),O=a(51),T=n(O),R=a(33),A=a(42),I=n(A),w=a(62),N=function(e){var t=e.isBold,a=e.duplicateScenario,n=e.archiveScenario,r=e.unarchiveScenario,i=e.shareScenario,u=e.removeScenario,d=e.calculating,c=e.status,p=e.nerve_job_status,h=e.studyId,v=e.isShareAvailable,y=e.isDuplicateAvailable,S=e.isUserHasScenarioFullControl,b=e.isAdmin,C=e.scenarioId,O=e.exportScenario,T=e.isArchived,R=(0,o.useRef)(),A=(0,o.useState)(!1),w=l(A,2),N=w[0],D=w[1],P=(0,f.default)("data-cell","study-scenarios-context-menu",{calculating:d,"cell-approved":"APPROVED"===c,failed_optimisation:p===I.default.FAILED&&"APPROVED"!==c,requested_optimisation:p===I.default.RUNNING||p===I.default.QUEUED,bold:t}),L=(0,o.useCallback)(function(){N&&D(!1)},[D,N]);return(0,o.useEffect)(function(){return N&&document.addEventListener("click",L),N||document.removeEventListener("click",L),function(){document.removeEventListener("click",L)}},[N,L]),s.default.createElement(g.Cell,{className:P},s.default.createElement(m.default,{mouseEnterDelay:.3,overlayClassName:"scenarios-table__more-tooltip",align:{offset:[0,0]},overlay:s.default.createElement("span",null,"Actions")},s.default.createElement(m.default,{visible:N,destroyTooltipOnHide:!0,overlayClassName:"scenarios-table__actions-tooltip",align:{offset:[12,0]},placement:"bottomRight",trigger:["click"],overlay:s.default.createElement("div",{ref:R},s.default.createElement(_.ContextMenu,null,!T&&y&&s.default.createElement(_.ContextMenuItem,{label:"Duplicate",icon:s.default.createElement(E.Icons.duplicateIconComponent,{isNegative:!0}),onClick:function(){D(!1),a(C)}}),s.default.createElement(_.ContextMenuItem,{label:"Export",icon:s.default.createElement(E.Icons.exportIconComponent,{isNegative:!0}),onClick:function(){D(!1),O(h,"impact"===C?null:C)}}),!T&&v&&s.default.createElement(_.ContextMenuItem,{label:"Share",icon:s.default.createElement(E.Icons.shareIconComponent,{isNegative:!0}),onClick:function(){D(!1),i(C)}}),["OPEN","PREV. APPROVED"].includes(c)&&s.default.createElement(_.ContextMenuItem,{label:T?"Unarchive":"Archive",icon:s.default.createElement(E.Icons.archiveIconComponent,{isNegative:!0}),onClick:function(){D(!1),T?r(C):n(C)}}),u&&"OPEN"===c&&(b||S)&&s.default.createElement(_.ContextMenuItem,{label:"Remove",icon:s.default.createElement(E.Icons.removeIconComponent,{isNegative:!0}),onClick:function(){D(!1),u(C)}})))},s.default.createElement("div",{className:"row-control-icon--more",onClick:function(e){e.stopPropagation(),D(!0)}},E.Icons.MORE_HORIZ))))};N.defaultProps={rowIndex:0,dataField:"",dateType:!1,isBold:!1,scenarioData:{},removeScenario:void 0,calculating:!1,status:null,nerve_job_status:null,isShareAvailable:!1,isDuplicateAvailable:!1,isUserHasScenarioFullControl:!1,isAdmin:!1,isArchived:!1},N.propTypes={isBold:d.default.bool,duplicateScenario:d.default.func.isRequired,archiveScenario:d.default.func.isRequired,shareScenario:d.default.func.isRequired,removeScenario:d.default.func,calculating:d.default.bool,status:d.default.string,nerve_job_status:d.default.string,studyId:d.default.number.isRequired,isShareAvailable:d.default.bool,isDuplicateAvailable:d.default.bool,isUserHasScenarioFullControl:d.default.bool,isAdmin:d.default.bool,scenarioId:d.default.oneOfType([d.default.number,d.default.string]).isRequired,exportScenario:d.default.func.isRequired,unarchiveScenario:d.default.func.isRequired,isArchived:d.default.bool};var D={exportScenario:R.exportScenarioData};t.default=(0,h.withRouter)((0,p.connect)(r,D)(N))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,S.getRouteMatch)(t),n=(0,_.default)(e,a),r=t.dataType===y.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",i=n[r][t.rowIndex];return{calculating:i.calculating,status:i.status,nerve_job_status:i.nerve_job_status,value:(0,p.default)(i,"fullData[0].uniqueCountries")||(0,p.default)(i,"countries",[]).length,failedFetch:i&&i.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(7),d=a(2),c=n(d),f=a(12),p=n(f),h=a(16),v=a(49),m=a(51),_=n(m),E=a(42),g=n(E),y=a(62),S=a(28),b=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.value,i=e.failedFetch,o=(0,c.default)("data-cell",{failedFetch:i,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===g.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===g.default.RUNNING||n===g.default.QUEUED});return l.default.createElement(v.Cell,{className:o},l.default.createElement("div",{className:"align-right"},r),l.default.createElement("div",{className:"cell-underline"}))};b.defaultProps={rowIndex:0,calculating:!1,status:null,nerve_job_status:null,value:0,failedFetch:!1},b.propTypes={calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,value:s.default.number,failedFetch:s.default.bool},t.default=(0,h.withRouter)((0,u.connect)(r)(b))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,g.getRouteMatch)(t),n=(0,S.default)(e,a),r=t.dataType===_.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",i=n[r][t.rowIndex],l=i.source_scenario_id,o=l?"adjusted_":"",s=i.fullData[0][o+"overallocatedData"],u=s?s.lpft:i.fullData[0][o+"lpft"],d=i.tooltipData;return{calculating:i.calculating,status:i.status,nerve_job_status:i.nerve_job_status,studyParamsWarning:i.studyParamsWarning,predicted:u,targetDate:i.targetDate,tooltipData:d,failedFetch:i&&i.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(7),d=a(2),c=n(d),f=a(16),p=a(49),h=a(42),v=n(h),m=a(10),_=a(62),E=a(8),g=a(28),y=a(51),S=n(y),b=a(192),C=n(b),O=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.isActive,i=e.studyParamsWarning,o=e.predicted,s=e.targetDate,u=e.tooltipData,d=e.failedFetch,f=a===m.SCENARIO_STATUS.APPROVED,h=(0,c.default)("data-cell",{failedFetch:d,calculating:t,"cell-approved":f,failed_optimisation:n===v.default.FAILED&&!f,requested_optimisation:n===v.default.RUNNING||n===v.default.QUEUED}),_=void 0;_=f&&r?o&&s?(0,E.getMomentDate)(o).diff((0,E.getMomentDate)(s),"days"):null:o&&s?(0,E.getMomentDate)(s).diff((0,E.getMomentDate)(o),"days"):null;var g=(0,c.default)({"color-green":o&&_>=0},{"color-red":o&&_<0}),y=void 0,S=void 0;return i&&i.showStudyParamsWarning&&(i.invalidFields.includes("tLpft")||i.invalidFields.includes("fp"))?S=l.default.createElement("div",{className:g},""):0===_?S=l.default.createElement("div",{className:g},"0d"):o&&null!==_?(y=_>0?"-":"+",S=l.default.createElement("div",{className:g},o?""+y+Math.abs(_):"-")):S=l.default.createElement("div",{className:g},"-"),l.default.createElement(p.Cell,{className:h},u?l.default.createElement(C.default,{overlay:l.default.createElement("div",null,u)},l.default.createElement("div",{className:"align-right"},S)):l.default.createElement("div",{className:"align-right"},S),l.default.createElement("div",{className:"cell-underline"}))};O.defaultProps={rowIndex:0,isActive:!1,calculating:!1,status:null,nerve_job_status:null,studyParamsWarning:null,predicted:null,targetDate:null,failedFetch:!1,tooltipData:null},O.propTypes={isActive:s.default.bool,calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,studyParamsWarning:s.default.object,predicted:s.default.oneOfType([s.default.string,s.default.object]),targetDate:s.default.oneOfType([s.default.string,s.default.object]),tooltipData:s.default.string,failedFetch:s.default.bool},t.default=(0,f.withRouter)((0,u.connect)(r)(O))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,g.getRouteMatch)(t),n=(0,_.default)(e,a),r=t.dataType===E.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",i=n[r][t.rowIndex],l=i.source_scenario_id,o=l?"adjusted_":"",s=i.fullData[0][o+"overallocatedData"],u=s?s.fpfv_lpfv:i.fullData[0][o+"fpfv_lpfv"];return{calculating:i.calculating,status:i.status,nerve_job_status:i.nerve_job_status,value:u,failedFetch:i&&i.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(7),d=a(2),c=n(d),f=a(16),p=a(49),h=a(42),v=n(h),m=a(51),_=n(m),E=a(62),g=a(28),y=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.value,i=e.failedFetch,o=(0,c.default)("data-cell",{failedFetch:i,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===v.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===v.default.RUNNING||n===v.default.QUEUED});return l.default.createElement(p.Cell,{className:o},l.default.createElement("div",{className:"align-right"},r?r+"d":"-"),l.default.createElement("div",{className:"cell-underline"}))};y.defaultProps={rowIndex:0,calculating:!1,status:null,nerve_job_status:null,value:0,failedFetch:!1},y.propTypes={calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,value:s.default.number,failedFetch:s.default.bool},t.default=(0,f.withRouter)((0,u.connect)(r)(y))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={createdAt:(0,h.getMomentDate)(t.createdAt||t.adjusted_createdAt),value:e};if(t.originScenario){var n=t.originScenario,r=n.name,i=n.studyName,l=n.status,s=n.isAdjusted;a.originScenarioName=r,a.originScenarioStatus=l,a.originIsAdjusted=s,t.platform_study_id!==i&&(a.originStudyName=i),a.exactCopy=!!t.exact_copy,a.isAdjusted=null!==t.source_scenario_id,a.status=t.status}return o.default.createElement("div",null,o.default.createElement("div",null,o.default.createElement(E.default,a)),o.default.createElement("div",{className:"cell-underline"}))}function i(e,t){var a=(0,v.getRouteMatch)(t),n=(0,C.default)(e,a),r=t.dataType===S.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",i=n[r][t.rowIndex],l=i[t.dataField]||"";return"owner_name"===t.dataField&&(l=l&&l.trim().length>0?l:"-"),{calculating:i.calculating,status:i.status,nerve_job_status:i.nerve_job_status,value:l,createdAt:i.createdAt,adjusted_createdAt:i.adjusted_createdAt,originScenario:i.originScenario,exact_copy:i.exact_copy,source_scenario_id:i.source_scenario_id,failedFetch:i&&i.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),o=n(l),s=a(1),u=n(s),d=a(7),c=a(2),f=n(c),p=a(16),h=a(8),v=a(28),m=a(49),_=a(485),E=n(_),g=a(42),y=n(g),S=a(62),b=a(51),C=n(b),O=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,i=e.value,l=e.dataField,s=e.dateType,u=e.isBold,d=e.createdAt,c=e.adjusted_createdAt,p=e.originScenario,v=e.exact_copy,_=e.source_scenario_id,E=e.failedFetch,g=(0,f.default)("data-cell",{failedFetch:E,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===y.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===y.default.RUNNING||n===y.default.QUEUED,bold:u}),S=i;s?S=(0,h.formatDate)(i):"status"===l&&_&&(S=o.default.createElement("div",{style:{position:"relative",display:"inline-block"}},i,o.default.createElement("div",{className:"sup",style:{right:"-134%",top:"-8px"}},"Adjusted")));var b=o.default.createElement("div",null,o.default.createElement("div",null,S),o.default.createElement("div",{className:"cell-underline"}));return o.default.createElement(m.Cell,{className:g},"name"===l?r(i,{createdAt:d,adjusted_createdAt:c,originScenario:p,exact_copy:v,source_scenario_id:_,status:a}):b)};O.defaultProps={rowIndex:0,dataField:"",dateType:!1,isBold:!1,calculating:!1,status:null,nerve_job_status:null,value:"",failedFetch:!1},O.propTypes={dataField:u.default.string,dateType:u.default.bool,isBold:u.default.bool,calculating:u.default.bool,status:u.default.string,nerve_job_status:u.default.string,value:u.default.string,createdAt:u.default.object,adjusted_createdAt:u.default.object,originScenario:u.default.object,exact_copy:u.default.bool,source_scenario_id:u.default.number,failedFetch:u.default.bool},t.default=(0,p.withRouter)((0,d.connect)(i)(O))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(49),c=function(e){var t=e.title,a=e.alignTo,n=e.hideUnderline,r=(0,u.default)({"align-right":"right"===a,"align-left":"left"===a});return i.default.createElement(d.Cell,{className:"header-cell"},i.default.createElement("div",{className:r},t),!n&&i.default.createElement("div",{className:"header-cell-underline"}))};c.defaultProps={title:"",alignTo:"left",hideUnderline:!1},c.propTypes={title:o.default.string,alignTo:o.default.oneOf(["left","right"]),hideUnderline:o.default.bool},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,g.getRouteMatch)(t),n=(0,E.default)(e,a),r=t.dataType===m.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",i=n[r][t.rowIndex],l=i.source_scenario_id,o=l?"adjusted_":"",s=i.fullData[0][o+"overallocatedData"],u=s?s.patient_allocation:i.fullData[0][o+"patient_allocation"];return{calculating:i.calculating,status:i.status,nerve_job_status:i.nerve_job_status,value:u,failedFetch:i&&i.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(7),d=a(2),c=n(d),f=a(16),p=a(49),h=a(42),v=n(h),m=a(62),_=a(51),E=n(_),g=a(28),y=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.value,i=e.failedFetch,o=(0,c.default)("data-cell",{failedFetch:i,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===v.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===v.default.RUNNING||n===v.default.QUEUED});return l.default.createElement(p.Cell,{className:o},l.default.createElement("div",{className:"align-right"},r),l.default.createElement("div",{className:"cell-underline"}))};y.defaultProps={rowIndex:0,calculating:!1,status:null,nerve_job_status:null,value:0,failedFetch:!1},y.propTypes={calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,value:s.default.number,failedFetch:s.default.bool},t.default=(0,f.withRouter)((0,u.connect)(r)(y))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,h.getRouteMatch)(t),n=(0,y.default)(e,a),r=t.dataType===E.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",i=n[r][t.rowIndex],l=i.source_scenario_id,o=l?"adjusted_":"",s=i.fullData[0][o+"overallocatedData"],u=s?s.lpft:i.fullData[0][o+"lpft"];return{calculating:i.calculating,status:i.status,nerve_job_status:i.nerve_job_status,predicted:u,targetDate:i.targetDate,failedFetch:i&&i.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(7),d=a(2),c=n(d),f=a(16),p=a(8),h=a(28),v=a(49),m=a(42),_=n(m),E=a(62),g=a(51),y=n(g),S=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.isActive,i=e.predicted,o=e.targetDate,s=e.failedFetch,u=(0,c.default)("data-cell",{failedFetch:s,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===_.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===_.default.RUNNING||n===_.default.QUEUED}),d=void 0;d="APPROVED"===a&&r?i&&o?(0,p.getMomentDate)(i).diff((0,p.getMomentDate)(o),"days"):null:i&&o?(0,p.getMomentDate)(o).diff((0,p.getMomentDate)(i),"days"):null;var f=(0,c.default)({"color-green":i&&d>=0},{"color-red":i&&d<0});return l.default.createElement(v.Cell,{className:u},l.default.createElement("div",{className:f},i?(0,p.formatDate)((0,p.getMomentDate)(i)):"-"),l.default.createElement("div",{className:"cell-underline"}))};S.defaultProps={rowIndex:0,target:"",isActive:!1,calculating:!1,status:null,nerve_job_status:null,value:0,predicted:null,targetDate:null,failedFetch:!1},S.propTypes={calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,isActive:s.default.bool,predicted:s.default.oneOfType([s.default.string,s.default.object]),targetDate:s.default.oneOfType([s.default.string,s.default.object]),failedFetch:s.default.bool},t.default=(0,f.withRouter)((0,u.connect)(r)(S))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,C.getRouteMatch)(t),n=(0,b.default)(e,a),r=t.dataType===y.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",i=n[r][t.rowIndex];return{data:i,calculating:i.calculating,status:i.status,nerve_job_status:i.nerve_job_status,scenarioId:i.id||"impact",showStudyParamsWarning:i.studyParamsWarning&&i.studyParamsWarning.showStudyParamsWarning,failedFetch:i&&i.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(7),d=a(2),c=n(d),f=a(16),p=a(235),h=n(p),v=a(6),m=a(14),_=n(m),E=a(42),g=n(E),y=a(62),S=a(51),b=n(S),C=a(28),O=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.onWarningIconClick,i=e.showStudyParamsWarning,o=e.failedFetch,s=e.data,u=(0,c.default)("data-cell","pull-center",{failedFetch:o,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===g.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===g.default.RUNNING||n===g.default.QUEUED});return l.default.createElement(h.default,{className:u},l.default.createElement(_.default,{mouseEnterDelay:.7,placement:"top",overlay:"Click to see mismatched parameters"},l.default.createElement("div",{className:"warning-icon",onClick:function(e){i&&(e.stopPropagation(),r(s))}},i?v.Icons.MISMATCH:"")))};O.defaultProps={rowIndex:0,calculating:!1,status:null,nerve_job_status:null,showStudyParamsWarning:!1,failedFetch:!1},O.propTypes={calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,onWarningIconClick:s.default.func.isRequired,data:s.default.object.isRequired,showStudyParamsWarning:s.default.bool,failedFetch:s.default.bool},t.default=(0,f.withRouter)((0,u.connect)(r)(O))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,b.getRouteMatch)(t),n=(0,S.default)(e,a),r=t.dataType===g.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",i=n[r][t.rowIndex],l=i.cohorts&&i.cohorts.length>0;return{isCohort:l,calculating:i.calculating,status:i.status,nerve_job_status:i.nerve_job_status,value:l?i.cohorts.length:"-",failedFetch:i&&i.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(7),d=a(2),c=n(d),f=a(16),p=a(49),h=a(6),v=a(14),m=n(v),_=a(42),E=n(_),g=a(62),y=a(51),S=n(y),b=a(28),C=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.value,i=e.isCohort,o=e.failedFetch,s=(0,c.default)("data-cell","cohort","pull-center",{failedFetch:o,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===E.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===E.default.RUNNING||n===E.default.QUEUED});return l.default.createElement(p.Cell,{className:s},i?l.default.createElement(m.default,{overlay:"Cohort scenario",mouseEnterDelay:.3},l.default.createElement("div",{className:"info-icon"},h.Icons.COHORTS,l.default.createElement("div",{className:"sup"},r))):l.default.createElement("div",null,r),l.default.createElement("div",{className:"cell-underline"}))};C.defaultProps={rowIndex:0,calculating:!1,status:null,nerve_job_status:null,value:"",isCohort:!1,failedFetch:!1},C.propTypes={calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,value:s.default.oneOfType([s.default.number,s.default.string]),isCohort:s.default.bool,failedFetch:s.default.bool},t.default=(0,f.withRouter)((0,u.connect)(r)(C))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,g.getRouteMatch)(t),n=(0,E.default)(e,a),r=t.dataType===m.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",i=n[r][t.rowIndex],l=i.source_scenario_id,o=l?"adjusted_num_sites":"num_sites",s=i.fullData[0][o];return{calculating:i.calculating,status:i.status,nerve_job_status:i.nerve_job_status,value:s,failedFetch:i&&i.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(7),d=a(2),c=n(d),f=a(16),p=a(49),h=a(42),v=n(h),m=a(62),_=a(51),E=n(_),g=a(28),y=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.value,i=e.failedFetch,o=(0,c.default)("data-cell",{failedFetch:i,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===v.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===v.default.RUNNING||n===v.default.QUEUED});return l.default.createElement(p.Cell,{className:o},l.default.createElement("div",{className:"align-right"},r),l.default.createElement("div",{className:"cell-underline"}))};y.defaultProps={rowIndex:0,calculating:!1,status:null,nerve_job_status:null,value:0,failedFetch:!1},y.propTypes={calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,value:s.default.number,failedFetch:s.default.bool},t.default=(0,f.withRouter)((0,u.connect)(r)(y))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,h.getRouteMatch)(t),n=(0,T.default)(e,a),r=t.dataType===C.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",i=n[r][t.rowIndex];return{calculating:i.calculating,status:i.status,nerve_job_status:i.nerve_job_status,hasCohorts:i.cohorts&&i.cohorts.length>0,showParamsWarning:i.studyParamsWarning&&i.studyParamsWarning.showStudyParamsWarning,id:i.id?i.id:"impact",value:i.updated,failedFetch:i&&i.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(7),d=a(2),c=n(d),f=a(16),p=a(8),h=a(28),v=a(49),m=a(64),_=n(m),E=a(6),g=a(192),y=n(g),S=a(42),b=n(S),C=a(62),O=a(51),T=n(O),R=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.hasCohorts,i=e.showParamsWarning,o=e.id,s=e.value,u=e.onSelect,d=e.checkedScenarios,f=e.failedFetch,h=(0,c.default)("data-cell",{failedFetch:f,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===b.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===b.default.RUNNING||n===b.default.QUEUED}),m=(0,c.default)("cell-control",{"cell-approved":"APPROVED"===a,requested_optimisation:n===b.default.RUNNING||n===b.default.QUEUED,failed_optimisation:n===b.default.FAILED&&"APPROVED"!==a,hidden:d.length>=3&&-1===d.indexOf(o)||r||i,"force-visibility":-1!==d.indexOf(o||"impact")||f}),g=void 0;return g=f?l.default.createElement(y.default,{mouseEnterDelay:.3,overlay:l.default.createElement("span",null,"There was an error occurred while fetching scenario data")},l.default.createElement("div",{className:"error-icon__wrapper"},E.Icons.ERROR)):l.default.createElement(_.default,{label:"",checked:d.indexOf(o||"impact")>-1,onChange:function(){u(o||"impact")}}),l.default.createElement(v.Cell,{className:h},l.default.createElement("div",null,s?(0,p.formatDate)((0,p.getMomentDate)(s)):""),l.default.createElement("div",{className:"cell-underline"}),t&&l.default.createElement("div",{className:"cell-control force-visibility calculate-progress"},E.Icons.ITEM_LOADER),l.default.createElement("div",{className:m,onClick:function(e){return e.stopPropagation()}},g))};R.defaultProps={rowIndex:0,dataField:"",dateType:!1,isBold:!1,calculating:!1,status:null,nerve_job_status:null,value:null,hasCohorts:!1,showParamsWarning:!1,failedFetch:!1},R.propTypes={onSelect:s.default.func.isRequired,checkedScenarios:s.default.array.isRequired,calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,value:s.default.oneOfType([s.default.object,s.default.string]),hasCohorts:s.default.bool,showParamsWarning:s.default.bool,id:s.default.oneOfType([s.default.number,s.default.string]).isRequired,failedFetch:s.default.bool},t.default=(0,f.withRouter)((0,u.connect)(r)(R))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TableToolbarFilter=void 0;var r=a(0),i=n(r),l=a(1),o=n(l),s=a(64),u=n(s);a(2209);var d=function(e){var t=e.overallocated,a=e.actualData,n=e.onChange,r=e.showOverallocation,l=e.showActual;return i.default.createElement("div",{className:"table-toolbar-filter"},i.default.createElement("span",{className:"table-toolbar-filter__label"},"Show in the table:"),i.default.createElement(u.default,{name:"overallocated",onChange:function(){return n("overallocated")},label:"Not over-enrolled",disabled:!r,checked:!!t}),l&&i.default.createElement(u.default,{name:"actualData",onChange:function(){return n("actualData")},label:"Actual data",checked:a}))};d.defaultProps={overallocated:void 0,actualData:void 0,showActual:!1,showOverallocation:!1},d.propTypes={overallocated:o.default.bool,actualData:o.default.bool,onChange:o.default.func.isRequired,showOverallocation:o.default.bool,showActual:o.default.bool},t.TableToolbarFilter=d,t.default=i.default.memo(d)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(985),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a(0),l=n(i),o=a(1),s=n(o),u=a(2),d=n(u);a(1779),a(2210);var c=function(e){var t=e.outsideLabel,a=e.insideLabel,n=e.status,o=e.statusMessage,s=e.disabled,u=e.height,c=e.value,f=e.onChange,p=e.placeholder,h=e.defaultValue,v=(0,i.useState)(!1),m=r(v,2),_=m[0],E=m[1],g=(0,i.useRef)(null),y=function(e){return e?l.default.createElement("label",{onClick:function(e){return e.stopPropagation()&&E(!0)},htmlFor:g},e):null},S=(0,d.default)("fpo-text-area-container",{disabled:s}),b=(0,d.default)("fpo-text-area-wrapper",{"wrapper-focused":_,enabled:!s,error:"error"===n,success:"success"===n});return l.default.createElement("div",{className:S},y(t),l.default.createElement("div",{style:{height:u},onClick:function(){return!s&&E(!0)},className:b},y(a),l.default.createElement("textarea",{style:{minHeight:u-4,height:20*c.split(/\r*\n/).length},ref:g,onFocus:function(){return E(!0)},onBlur:function(e){E(!1),f(e.target.value)},onKeyDown:function(e){return e.stopPropagation()},placeholder:p,defaultValue:h})),function(){if(!n||!o)return null;var e=(0,d.default)("fpo-text-input-status-message",{error:"error"===n,success:"success"===n});return l.default.createElement("div",{className:e},o)}())};c.defaultProps={height:116,outsideLabel:null,insideLabel:null,status:null,statusMessage:null,disabled:!1,value:"",onChange:void 0,placeholder:"",defaultValue:""},c.propTypes={height:s.default.number,outsideLabel:s.default.string,insideLabel:s.default.string,status:s.default.string,statusMessage:s.default.string,disabled:s.default.bool,value:s.default.string,onChange:s.default.func,placeholder:s.default.string,defaultValue:s.default.string},t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(987),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(e){var a=(0,f.findDOMNode)(e);a&&(t?a.classList.remove("clicked"):a.classList.add("clicked"))}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),f=a(32),p=n(f),h=a(1),v=n(h),m=a(2),_=n(m),E=a(82),g=n(E),y=a(133),S=a(85);a(2212);var b=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={parent:a.props.parent,data:a.props.data,cellName:a.props.cellName,uncertaintyLevel:a.props.uncertaintyLevel,studiesCount:a.props.studiesCount},a.orientationX="right",a.orientationY="top",a.updatePosition=a.updatePosition.bind(a),a}return l(t,e),u(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updatePosition),window.addEventListener("scroll",this.updatePosition),document.body.addEventListener("scroll",this.updatePosition)}},{key:"componentWillReceiveProps",value:function(e){var t={};if(this.props.parent!==e.parent&&(t={parent:e.parent},o(this.props.parent,!0)),this.props.data!==e.data&&(t=s({},t,{data:e.data})),this.props.cellName!==e.cellName&&(t=s({},t,{cellName:e.cellName})),this.props.uncertaintyLevel!==e.uncertaintyLevel&&(t=s({},t,{uncertaintyLevel:e.uncertaintyLevel})),this.props.studiesCount!==e.studiesCount&&(t=s({},t,{studiesCount:e.studiesCount})),this.element&&t.parent){var a=t.parent.getBoundingClientRect(),n=this.element.getBoundingClientRect();window.innerHeight-(a.bottom+n.height)<0?(t=s({},t,{top:a.top-n.height}),this.orientationY="top"):(t=s({},t,{top:a.bottom}),this.orientationY="bottom"),window.innerWidth-(a.left+n.width)<0?(t=s({},t,{left:a.right-n.width}),this.orientationX="left"):(t=s({},t,{left:a.left}),this.orientationX="right"),o(t.parent)}this.setState(t)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updatePosition),window.removeEventListener("scroll",this.updatePosition),document.body.removeEventListener("scroll",this.updatePosition),o(this.state.parent,!0)}},{key:"updatePosition",value:function(){if(this.element&&this.state.parent){var e=this.state.parent.getBoundingClientRect(),t=this.element.getBoundingClientRect(),a={};window.innerHeight-(e.bottom+t.height)<0?(a=s({},a,{top:e.top-t.height}),this.orientationY="top"):(a=s({},a,{top:e.bottom}),this.orientationY="bottom"),window.innerWidth-(e.left+t.width)<0?(a=s({},a,{left:e.right-t.width}),this.orientationX="left"):(a=s({},a,{left:e.left}),this.orientationX="right"),o(this.state.parent),this.setState(a)}}},{key:"render",value:function(){var e=this,t=this.state,a=t.top,n=t.left,r=t.parent,i=t.data,l=t.cellName,o=t.studiesCount,s={top:a+"px",left:n+"px"},u=this.props.viewType===S.FILTER_BY.INDICATION?"Indication":"Historical reference studies";return p.default.createPortal(c.default.createElement("div",{className:(0,_.default)("trials-panel",this.orientationX,this.orientationY,{hidden:i&&0===i.satellites.length&&!this.props.uncertaintyLevel}),style:r&&s,ref:function(t){e.element=t}},this.props.uncertaintyLevel&&c.default.createElement("div",{className:"forecast-uncertainty"},c.default.createElement("span",{className:"description"},"Forecast Uncertainty:"),c.default.createElement("span",{className:"value"},this.props.uncertaintyLevel)),i&&i.satellites.length>0&&c.default.createElement("div",{className:"mini-chart"},c.default.createElement(y.HistoricalBenchmarkChart,{data:i})),i&&i.satellites.length>0&&c.default.createElement("div",{className:"statistics"},c.default.createElement("div",{className:"benchmark"},c.default.createElement("div",{className:"label"},S.LABELS[l]+" Benchmark"),c.default.createElement("div",{className:"type"},u),c.default.createElement("div",{className:"dash"})),c.default.createElement("div",{className:"studies-counter"},c.default.createElement(g.default,{size:"large"}),c.default.createElement("div",{className:"content"},c.default.createElement("div",{className:"description"},"Studies"),c.default.createElement("div",{className:"value"},o),c.default.createElement("div",{className:"dash"})))),c.default.createElement("div",{"data-ignore-click-outside":!0,className:"overlay"})),document.body)}}]),t}(d.Component);b.defaultProps={parent:null,viewType:S.FILTER_BY.INDICATION,studiesCount:0,uncertaintyLevel:null,cellName:null,data:null},b.propTypes={parent:v.default.object,cellName:v.default.oneOf(Object.keys(S.LABELS)),viewType:v.default.oneOf(Object.keys(S.FILTER_BY)),uncertaintyLevel:v.default.oneOf([S.UNCERTAINTY.HIGH,S.UNCERTAINTY.LOW,S.UNCERTAINTY.MEDIUM,"N/A"]),studiesCount:v.default.number,data:v.default.object},t.default=b},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(39),p=a(10),h=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={submitted:!1},a.handleConfirm=a.handleConfirm.bind(a),a.handleCancel=a.handleCancel.bind(a),a}return l(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"handleConfirm",value:function(){var e=this;this.setState({submitted:!0},function(){e.props.onSubmit().then(function(){var t=e.props,a=t.callbackActions,n=t.actionType,r=a.find(function(e){return e.type===n}),i=r?r.action:void 0;setTimeout(function(){e.handleCancel(),i()},2e3)}).catch(function(){return e.handleCancel()})})}},{key:"handleCancel",value:function(){var e=this;this.setState({submitted:!1},function(){e.props.onClose()})}},{key:"render",value:function(){var e=this.props.actionType,t="You have unsaved changes, you need to save in order \n    to "+e.toLowerCase()+" this scenario.";return e===p.SIDEBAR_BUTTONS.EVENT&&(t="You have unsaved changes, you need to save in order \n    to navigate to events page."),u.default.createElement(f.PopupDialog,{title:"Unsaved changes",className:"unsaved-changes-dialog",isShown:this.props.isShown,handleClose:this.handleCancel,buttons:[u.default.createElement(f.ActionButton,{className:"unsaved-changes-dialog__button-cancel",action:this.handleCancel},"Cancel"),u.default.createElement(f.ActionButton,{disabled:this.state.submitted,action:this.handleConfirm,primary:!0},"Save")]},u.default.createElement("div",{className:"unsaved-changes-dialog-content"},t))}}]),t}(s.Component);h.defaultProps={actionType:"",callbackActions:[]},h.propTypes={actionType:c.default.string,callbackActions:c.default.arrayOf(c.default.shape({type:c.default.string,action:c.default.func})),onSubmit:c.default.func.isRequired,onClose:c.default.func.isRequired,isShown:c.default.bool.isRequired},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.UnsavedDialog=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(16),p=a(243),h=a(39),v=a(35),m=!1,_=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleBlockedNavigation=function(e){var t=a.state.confirmedNavigation,n=a.props,r=n.allowTabs,i=n.tabsCommonPath,l=n.location;if(!t&&a.hasUnsavedData()){var o=l.pathname,s=e.pathname,u=o.substr(0,o.indexOf(i)+i.length),d=s.substr(0,o.indexOf(i)+i.length),c=s.substr(d.length,s.length);return m||!a.hasUnsavedData()||r&&u===d&&(""===c||c.startsWith("/"))?(m=!1,!0):(a.setState({showDialog:!0,nextLocation:e}),!1)}return!0},a.state={showDialog:!1},a.hasUnsavedData=a.hasUnsavedData.bind(a),a.handleConfirm=a.handleConfirm.bind(a),a.handleCancel=a.handleCancel.bind(a),a.handleLeave=a.handleLeave.bind(a),a.handleUnload=a.handleUnload.bind(a),a}return l(t,e),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.handleLeave)}},{key:"componentDidUpdate",value:function(e){e.hasUnsaved?window.addEventListener("unload",this.handleUnload):window.removeEventListener("unload",this.handleUnload)}},{key:"componentWillUnmount",value:function(){this.remove&&this.remove(),window.removeEventListener("beforeunload",this.handleLeave),window.removeEventListener("unload",this.handleUnload)}},{key:"handleUnload",value:function(){var e=this.props.removeStoredData;e&&(0,v.removeParamItemStorage)("fpo-dirty-data",e)}},{key:"handleConfirm",value:function(){var e=this.props.removeStoredData;e&&(0,v.removeParamItemStorage)("fpo-dirty-data",e),this.setState({showDialog:!1}),m=!0,p.history.push(this.state.nextLocation.pathname)}},{key:"handleCancel",value:function(){this.setState({showDialog:!1})}},{key:"handleLeave",value:function(e){if(this.hasUnsavedData()){var t=this.props.warningMessage;return(e||window.event).returnValue=t,t}return null}},{key:"hasUnsavedData",value:function(){return this.props.hasUnsaved}},{key:"render",value:function(){var e=this.props.warningMessage;return u.default.createElement(u.default.Fragment,null,u.default.createElement(f.Prompt,{when:this.hasUnsavedData(),message:this.handleBlockedNavigation}),u.default.createElement(h.PopupDialog,{title:"Unsaved changes",className:"unsaved-changes-dialog",isShown:this.state.showDialog,handleClose:this.handleCancel,buttons:[u.default.createElement(h.ActionButton,{className:"unsaved-changes-dialog__button-cancel",action:this.handleCancel},"Cancel"),u.default.createElement(h.ActionButton,{action:this.handleConfirm,primary:!0},"Leave, anyway")]},u.default.createElement("div",{className:"unsaved-changes-dialog-content"},e)))}}]),t}(s.PureComponent);_.defaultProps={hasUnsaved:!1,router:void 0,routes:void 0,warningMessage:"Are you sure you want to leave? The changes you made will not be saved.",allowTabs:!1,tabsCommonPath:"",removeStoredData:null},_.propTypes={hasUnsaved:c.default.bool,warningMessage:c.default.string,allowTabs:c.default.bool,tabsCommonPath:c.default.string,removeStoredData:c.default.string,location:c.default.object.isRequired},t.UnsavedDialog=_,t.default=(0,f.withRouter)(_)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(991),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(39),u=function(e){var t=e.show,a=e.message,n=e.title,r=e.onOk,l=e.onCancel,o=e.onClose;return i.default.createElement(s.PopupDialog,{isShown:t,title:n,handleClose:o,buttons:[i.default.createElement(s.ActionButton,{action:l},"Cancel"),i.default.createElement(s.ActionButton,{action:r,primary:!0},"Yes")]},i.default.createElement("div",{className:"h2"},a))};u.defaultProps={title:"Warning!"},u.propTypes={show:o.default.bool.isRequired,message:o.default.string.isRequired,title:o.default.string,onOk:o.default.func.isRequired,onCancel:o.default.func.isRequired,onClose:o.default.func.isRequired},t.default=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(16),o=a(1),s=n(o),u=a(2),d=n(u),c=a(6),f=a(14),p=n(f);a(2213);var h=function(e){var t=e.target,a=e.predicted,n=e.title,r=e.href,o=a&&t?t.diff(a,"d"):-1,s=(0,d.default)({"color-green":a&&o>=0},{"color-red":a&&o<0}),u=void 0,f=void 0;return 0===o?f="0d":(u=o>0?"-":"+",f=i.default.createElement("div",{className:s},a&&""+u+Math.abs(o)+"d")),i.default.createElement("div",{className:"compare-scenario-widget"},i.default.createElement("div",{style:{flex:"auto",lineHeight:"28px"}},i.default.createElement("div",{className:"compare-scenario-widget__title"},i.default.createElement("span",null,n),i.default.createElement(l.NavLink,{to:r,target:"_blank",className:"compare-scenario-widget__expand-icon"},c.Icons.EXPAND)),i.default.createElement("div",{style:{height:"28px",display:"flex"}},i.default.createElement(p.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,align:{offset:[0,-5]},placement:"bottom",overlay:i.default.createElement("span",null,"Planned LPFT")},i.default.createElement("span",{className:"compare-scenario-widget__predicted-title"},"P/LPFT")),i.default.createElement("span",{className:(0,d.default)("compare-scenario-widget__predicted-value",s)},a?a.format("DD MMM YYYY"):"-"),i.default.createElement("span",{className:"compare-scenario-widget__arrow-icon"},c.Icons.ARROW_RIGHT),i.default.createElement("span",{className:"compare-scenario-widget__target-icon"},o>=0?c.Icons.ON_TARGET:c.Icons.OFF_TARGET),i.default.createElement("span",{className:s},f))))};h.defaultProps={predicted:null},h.propTypes={predicted:s.default.object,target:s.default.object.isRequired,title:s.default.string.isRequired,href:s.default.string.isRequired},t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(992),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){switch(t){case O.PATIENT_ALLOCATION:return 0===e?b.ON_TARGET:e>0?b.OVER:b.UNDER;case O.LPFT:default:return 0===e?b.ON_TIME:e>0?b.EARLY:b.LATE}}function u(e,t){var a,n,r,i;return(i={},o(i,b.LATE,(a={},o(a,b.OVER,C.BAD),o(a,b.ON_TARGET,C.BAD),o(a,b.UNDER,C.BAD),a)),o(i,b.ON_TIME,(n={},o(n,b.OVER,C.BAD),o(n,b.ON_TARGET,C.GOOD),o(n,b.UNDER,C.BAD),n)),o(i,b.EARLY,(r={},o(r,b.OVER,C.BAD),o(r,b.ON_TARGET,C.GOOD),o(r,b.UNDER,C.BAD),r)),i)[e][t]}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),h=n(p),v=a(2),m=n(v),_=a(6),E=a(8),g=a(10),y=a(20),S=n(y);a(2214);var b={OVER:"OVER",UNDER:"UNDER",ON_TARGET:"ON TARGET",ON_TIME:"ON TIME",LATE:"LATE",EARLY:"EARLY"},C={BAD:"BAD",GOOD:"GOOD"},O={PATIENT_ALLOCATION:"PATIENT_ALLOCATION",LPFT:"LPFT"},T=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showDiff:!1},a.handleMouseEnter=a.handleMouseEnter.bind(a),a.handleMouseLeave=a.handleMouseLeave.bind(a),a}return l(t,e),d(t,[{key:"handleMouseEnter",value:function(){var e=this.props,t=e.scenario,a=e.study,n=(t.status===g.SCENARIO_STATUS.APPROVED||t.status===g.SCENARIO_STATUS.PREV_APPROVED)&&a.state.status===S.default.ACTIVE,r=t.cohorts&&t.cohorts.length>0,i=null!==t.source_scenario_id;r&&(n||i)||this.setState({showDiff:!0})}},{key:"handleMouseLeave",value:function(){this.setState({showDiff:!1})}},{key:"render",value:function(){var e=this.props,t=e.scenario,a=e.study,n=e.globalData,r=this.state.showDiff,i=(t.status===g.SCENARIO_STATUS.APPROVED||t.status===g.SCENARIO_STATUS.PREV_APPROVED)&&a.state.status===S.default.ACTIVE,l=null!==t.source_scenario_id,o=t.cohorts&&t.cohorts.length>0,d=0,c=0,p="",h="",v=void 0,y=void 0,T="",R="";l&&o?(v=n.adjusted_overallocatedData?n.adjusted_overallocatedData.lpft:n.adjusted_lpft,T="A/"):l?(d=n.patient_allocation,c=n.adjusted_patient_allocation,p="P/",h="A/",v=n.overallocatedData?n.overallocatedData.lpft:n.lpft,y=n.adjusted_overallocatedData?n.adjusted_overallocatedData.lpft:n.adjusted_lpft,T="P/",R="A/"):i?(v=n.overallocatedData?n.overallocatedData.lpft:n.lpft,y=n.actual_f_lpft,T="P/",R="F/"):(d=t.target_num_patients,c=n.patient_allocation,p="T/",h="P/",v=t.target_lpft?(0,E.getMomentDate)(t.target_lpft):t.end_date,y=n.overallocatedData?n.overallocatedData.lpft:n.lpft,T="T/",R="P/");var A=c-d,I=s(A,O.PATIENT_ALLOCATION),w=y&&v?v.diff(y,"days"):null,N=s(w,O.LPFT);t.isImpact&&null===w&&(N=b.ON_TIME);var D=u(N,I);return f.default.createElement("div",{className:(0,m.default)("scenario-alerts-container",{success:D===C.GOOD,error:D===C.BAD,"show-diff":r,extended:i||l}),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},f.default.createElement("div",{className:(0,m.default)("widget-wrapper","status-bar",{success:D===C.GOOD,error:D===C.BAD,"show-diff":r,extended:i||l})},i||l?f.default.createElement("svg",{width:"32",height:"58"},f.default.createElement("g",null,f.default.createElement("polygon",{fill:"#ec3508",points:"0,0 23,0 10,58 0,58"}),f.default.createElement("line",{stroke:"#9d9d9d",x1:"31",x2:"18",y1:"0",y2:"58"}))):f.default.createElement("svg",{width:"32",height:"48"},f.default.createElement("g",null,f.default.createElement("polygon",{fill:"#ec3508",points:"0,0 23,0 10,48 0,48"}),f.default.createElement("line",{stroke:"#9d9d9d",x1:"31",x2:"18",y1:"0",y2:"48"})))),f.default.createElement("div",{className:(0,m.default)("widget-wrapper","pat-allocation",{success:r&&D===C.GOOD,error:r&&D===C.BAD,hidden:i||o&&l,extended:i||l})},function(){return r?[f.default.createElement("div",{className:"widget-column",key:"pat-icon"},f.default.createElement("div",{className:(0,m.default)("widget-icon",{"icon-black":r})}," ",_.Icons.VISITORS," ")),f.default.createElement("div",{className:"widget-column",key:"pat-label"},f.default.createElement("div",{className:"patient-allocation-widget__target"},0!==A?Math.abs(A):"Patients"),f.default.createElement("div",{className:"patient-allocation-widget__predicted"},0!==A?"Patients "+I.toLowerCase():f.default.createElement("span",{className:"capitalize"},I.toLowerCase())))]:[f.default.createElement("div",{className:"widget-column",key:"pat-icon"},f.default.createElement("div",{className:(0,m.default)("widget-icon",{"icon-black":r})}," ",_.Icons.VISITORS," "),f.default.createElement("div",null,"Patients")),f.default.createElement("div",{className:"widget-column",key:"pat-label"},i||l?f.default.createElement("div",{className:"patient-allocation-widget__target"},"T/"):null,f.default.createElement("div",{className:"patient-allocation-widget__target"},p),f.default.createElement("div",{className:"patient-allocation-widget__predicted"},h)),f.default.createElement("div",{className:"widget-column",key:"pat-value"},i||l?f.default.createElement("div",{className:"patient-allocation-widget__target","data-test":"patient-allocation-target"},t.target_num_patients):null,f.default.createElement("div",{className:"patient-allocation-widget__target","data-test":"patient-allocation-target"},d),f.default.createElement("div",{className:(0,m.default)("patient-allocation-widget__predicted"),"data-test":"patient-allocation-predicted"},c),f.default.createElement("div",{className:(0,m.default)("widget-value-underline",{success:I===b.ON_TARGET,error:I!==b.ON_TARGET})}))]}()),!(i||l)&&f.default.createElement("div",null,f.default.createElement("svg",{width:"13",height:"48"},f.default.createElement("g",null,f.default.createElement("line",{stroke:"#9d9d9d",x1:"13",x2:"0",y1:"0",y2:"48"})))),f.default.createElement("div",{className:(0,m.default)("widget-wrapper","lpft",{success:r&&D===C.GOOD,error:r&&D===C.BAD,extended:i||l})},function(){if(r)return null===w?[f.default.createElement("div",{className:"widget-column",key:"lpft-icon"},f.default.createElement("div",{className:(0,m.default)("widget-icon",{"icon-black":r})},w>=0?_.Icons.ON_TARGET:_.Icons.OFF_TARGET)),f.default.createElement("div",{className:"widget-column",key:"lpft-label"},f.default.createElement("div",null,"N/A"))]:[f.default.createElement("div",{className:"widget-column",key:"lpft-icon"},f.default.createElement("div",{className:(0,m.default)("widget-icon",{"icon-black":r})},w>=0?_.Icons.ON_TARGET:_.Icons.OFF_TARGET)),f.default.createElement("div",{className:"widget-column",key:"lpft-label"},f.default.createElement("div",null,0!==w?Math.abs(w):""),f.default.createElement("div",null,0!==w?"Days "+N.toLowerCase():"LPFT "+N.toLowerCase()))];var e=[f.default.createElement("div",{key:"lpft-pred-value",className:(0,m.default)("lpft-widget__predicted"),"data-test":"lpft-widget-predicted"},y?y.format("DD MMM YYYY"):"-"),f.default.createElement("div",{key:"lpft-pred-underline",className:(0,m.default)("widget-value-underline",{success:N===b.EARLY||N===b.ON_TIME,error:N===b.LATE})})],a=t.target_lpft||t.end_date,n=f.default.createElement("div",{key:"lpft-pred-value",className:(0,m.default)("lpft-widget__predicted"),"data-test":"lpft-widget-predicted"},a?(0,E.getMomentDate)(a).format("DD MMM YYYY"):"-");return[f.default.createElement("div",{className:"widget-column",key:"lpft-icon"},f.default.createElement("div",{className:(0,m.default)("widget-icon",{"icon-black":r})},w>=0?_.Icons.ON_TARGET:_.Icons.OFF_TARGET),f.default.createElement("div",null,"LPFT")),f.default.createElement("div",{className:"widget-column",key:"lpft-label"},i||l?f.default.createElement("div",{className:"lpft-widget__target"},"T/"):null,f.default.createElement("div",{className:"lpft-widget__target"},T),o&&(i||l)?null:f.default.createElement("div",{className:"lpft-widget__predicted"},R)),f.default.createElement("div",{className:"widget-column",key:"lpft-value"},i||l?n:null,f.default.createElement("div",{className:"lpft-widget__target","data-test":"lpft-widget-target"},v?v.format("DD MMM YYYY"):"-"),o&&(i||l)?null:e)]}()))}}]),t}(f.default.PureComponent);T.defaultProps={predicted:null,actual:null},T.propTypes={scenario:h.default.object.isRequired,study:h.default.object.isRequired,globalData:h.default.object.isRequired},t.default=T},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(65),p=n(f),h=a(2),v=n(h),m=a(27),_=n(m),E=a(1001),g=n(E),y=a(1002),S=n(y),b=a(6),C=a(14),O=n(C),T=a(167),R=a(883),A=n(R),I=a(111),w=a(98),N=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showMenu:!1},a.toggleMenu=a.toggleMenu.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a}return l(t,e),o(t,[{key:"toggleMenu",value:function(e){this.setState({showMenu:void 0!==e?e:!this.state.showMenu})}},{key:"handleClickOutside",value:function(e){this.state.showMenu&&e&&!e.target.getAttribute("data-ignore-click-outside")&&this.toggleMenu(!1)}},{key:"render",value:function(){var e=this,t=this.state.showMenu,a=this.props,n=a.item,r=a.index,i=a.cohorts,l=a.onRemove,o=a.onUpdate,s=a.isDisabled,d=a.locations,c=a.minDate,f=a.isAdjusted,p=(0,v.default)("wizard-cohorts-item__wrapper",{hovered:t});return u.default.createElement("div",{key:n.id,className:p},u.default.createElement("div",{className:"single-line-component__content"},u.default.createElement("div",{className:"single-line-component__element-wrapper"},u.default.createElement("div",{className:"element-wrapper__label"},"Cohort "+(r+1)),u.default.createElement(_.default,{maxLength:255,status:function(){if(""===n.name)return"error";for(var e=null,t=i.filter(function(e){return e.state!==w.ITEM_STATE.DELETED}),a=0;a<t.length;a+=1)if(t[a].id!==n.id&&t[a].name===n.name){e="error";break}return e}(),disabled:s,placeholder:"Add short, clear name",onBlur:function(e){return n.name!==e.target.value&&o(n.id,"name",e.target.value)},value:n.name}))),u.default.createElement(S.default,{minDate:c,cohorts:i,cohort:n,onUpdate:o,isDisabled:s}),u.default.createElement(g.default,{locations:d,cohorts:i,cohort:n,onUpdate:o,isDisabled:s}),u.default.createElement(A.default,{cohort:n,onUpdate:o,isDisabled:s||0===n.locations.length}),u.default.createElement("div",{className:(0,v.default)("wizard-cohorts-item__control",{hide:(0,I.isReadOnly)(n,i)||f})},u.default.createElement(O.default,{mouseEnterDelay:.3,align:{offset:[0,0]},overlay:u.default.createElement("span",null,"Actions")},u.default.createElement(O.default,{destroyTooltipOnHide:!0,align:{offset:[12,0]},placement:"bottomRight",visible:this.state.showMenu&&!s,trigger:["click"],overlay:u.default.createElement(T.ContextMenu,null,u.default.createElement(T.ContextMenuItem,{label:"Remove","data-ignore-click-outside":!0,icon:u.default.createElement("div",{className:"icon-color-white"},b.Icons.CROSS_O),onClick:function(){s||(n.id!==w.INITIAL_COHORT_ID&&l(n.id),e.toggleMenu(!1))}}))},u.default.createElement("div",{className:"row-control-icon--more",onClick:function(){return!s&&e.toggleMenu()}},b.Icons.MORE_HORIZ)))))}}]),t}(u.default.Component);N.defaultProps={locations:[],scenario:null,cohorts:[],isDisabled:!1,isAdjusted:!1},N.propTypes={index:c.default.number.isRequired,item:c.default.object.isRequired,cohorts:c.default.array,isDisabled:c.default.bool,onRemove:c.default.func.isRequired,onUpdate:c.default.func.isRequired,locations:c.default.array,minDate:c.default.object.isRequired,isAdjusted:c.default.bool},t.default=(0,p.default)(N)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(6),u=a(82),d=n(u),c=a(8),f=function(e){var t=e.study;return i.default.createElement("div",{className:"scenario-details-subheader__container"},i.default.createElement("div",{className:"scenario-details-bar__wrapper"},i.default.createElement("div",{className:"scenario-details-bar"},i.default.createElement("span",{className:"icon-color-grey"},s.Icons.VISITORS),i.default.createElement("span",null,"T/Patients"),i.default.createElement("span",null,t.target_num_patients||"-")),i.default.createElement(d.default,{className:"bar-item-separator"}),i.default.createElement("div",{className:"scenario-details-bar"},i.default.createElement("span",{className:"icon-color-grey"},s.Icons.DATE_RANGE),i.default.createElement("span",null,"FP"),i.default.createElement("span",null,t.fp?(0,c.getMomentDate)(t.fp).format("D MMM YY"):"-")),i.default.createElement(d.default,{className:"bar-item-separator"}),i.default.createElement("div",{className:"scenario-details-bar"},i.default.createElement("span",null,"FPFV-FPFT"),i.default.createElement("span",{className:"icon-color-grey"},s.Icons.ARROW_RIGHT),i.default.createElement("span",{className:"font-bold underline"},t.fpfv_fpft||0===t.fpfv_fpft?t.fpfv_fpft+"d":"14d (default)")),i.default.createElement("div",{className:"scenario-details-bar padding-left-1"},i.default.createElement("span",{className:"icon-color-grey"},s.Icons.ARROW_RIGHT_LONG),i.default.createElement("span",{className:"icon-color-grey"},s.Icons.ON_TARGET),i.default.createElement("span",null,"T/LPFT"),i.default.createElement("span",null,t.target_lpft?(0,c.getMomentDate)(t.target_lpft).format("D MMM YY"):"-"))))};f.defaultProps={study:null},f.propTypes={study:o.default.object},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(11),u=n(s),d=a(6),c=a(84),f=n(c),p=function(e){var t=e.onUpdate,a=e.value,n=e.cohortId,r=e.minDate,l=function(e){var t=(0,u.default)(e).utcOffset(0,!0),a=r.day();return t.day()===a&&t>=r};return i.default.createElement("div",{className:"single-line__datepicker-wrapper"},i.default.createElement(f.default,{simpleView:!0,defaultDate:r,filterDate:l,selected:a?(0,u.default)(a):null,onChange:function(e){t(n,"start_date",e.format("YYYY-MM-DD"),"trigger")}}),i.default.createElement("span",null,d.Icons.CALENDAR))};p.defaultProps={value:null},p.propTypes={cohortId:o.default.oneOfType([o.default.number,o.default.string]).isRequired,onUpdate:o.default.func.isRequired,value:o.default.string,minDate:o.default.object.isRequired},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(74),u=n(s),d=a(98),c=function(e){var t=e.onUpdate,a=e.data,n=e.cohortId,r=e.cohorts,l=e.isDisabled;return i.default.createElement("div",{className:"single-line__milestones-wrapper"},i.default.createElement("div",{style:{width:"150px"}},i.default.createElement(u.default,{disabled:l,onOptionSelect:function(e){t(n,"start_milestone",e.value,"trigger"),e.value===d.TRIGGER_START_MILESTONES.GLOBAL_FP&&t(n,"source_cohort_id",null,"trigger")}},i.default.createElement(s.DropdownOption,{label:"Global FP",selected:a.start_milestone===d.TRIGGER_START_MILESTONES.GLOBAL_FP,value:d.TRIGGER_START_MILESTONES.GLOBAL_FP}),i.default.createElement(s.DropdownOption,{label:"FSIV",selected:a.start_milestone===d.TRIGGER_START_MILESTONES.FSIV,value:d.TRIGGER_START_MILESTONES.FSIV}),i.default.createElement(s.DropdownOption,{label:"FPFV",selected:a.start_milestone===d.TRIGGER_START_MILESTONES.FPFV,value:d.TRIGGER_START_MILESTONES.FPFV}),i.default.createElement(s.DropdownOption,{label:"FPFT",selected:a.start_milestone===d.TRIGGER_START_MILESTONES.FPFT,value:d.TRIGGER_START_MILESTONES.FPFT}))),i.default.createElement("div",{style:{width:"140px"}},i.default.createElement(u.default,{resultsHeight:180,disabled:1===r.length||l||a.start_milestone===d.TRIGGER_START_MILESTONES.GLOBAL_FP,onOptionSelect:function(e){return t(n,"source_cohort_id",e.value,"trigger")}},r.filter(function(e){return e.id!==n&&e.state!==d.ITEM_STATE.DELETED}).map(function(e){return i.default.createElement(s.DropdownOption,{key:e.id,label:e.name,selected:a.source_cohort_id===e.id,value:e.id})}))))};c.defaultProps={cohorts:[],isDisabled:!1,data:{}},c.propTypes={cohortId:o.default.oneOfType([o.default.number,o.default.string]).isRequired,cohorts:o.default.array,onUpdate:o.default.func.isRequired,data:o.default.object,isDisabled:o.default.bool},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(74),c=n(d),f=a(27),p=n(f),h=a(82),v=n(h),m=a(98),_=function(e){var t=e.onUpdate,a=e.data,n=e.cohortId,r=e.cohorts,l=e.isDisabled;return i.default.createElement("div",{className:"single-line__milestones-wrapper"},i.default.createElement("div",{style:{width:"60px"}},i.default.createElement(p.default,{type:"number",status:""===a.num_patients?"error":null,disabled:l,placeholder:"",onBlur:function(e){if(a.num_patients!==e.target.value){var r=e.target.value;a.num_patients_abs||r>100&&(r=100),r<=0&&(r=1),t(n,"num_patients",+r,"trigger")}},value:a.num_patients||""})),i.default.createElement("div",{className:"trigger-panel__type-toggle"},i.default.createElement("span",{onClick:function(){return!l&&t(n,"num_patients_abs",!0,"trigger")},className:(0,u.default)({active:a.num_patients_abs})},"#"),i.default.createElement(v.default,{size:"tiny",className:(0,u.default)({"turn-left":!a.num_patients_abs})}),i.default.createElement("span",{onClick:function(){l||(a.num_patients>100&&t(n,"num_patients",100,"trigger"),t(n,"num_patients_abs",!1,"trigger"))},className:(0,u.default)({active:!a.num_patients_abs})},"%")),i.default.createElement("div",{className:"font-bold"},"from"),i.default.createElement("div",{style:{width:"140px"}},i.default.createElement(c.default,{disabled:1===r.length||l,onOptionSelect:function(e){return t(n,"source_cohort_id",e.value,"trigger")}},r.filter(function(e){return e.id!==n&&e.state!==m.ITEM_STATE.DELETED}).map(function(e){return i.default.createElement(d.DropdownOption,{key:e.id,label:e.name,selected:a.source_cohort_id===e.id,value:e.id})}))))};_.defaultProps={cohorts:[],isDisabled:!1,data:{}},_.propTypes={cohortId:o.default.oneOfType([o.default.number,o.default.string]).isRequired,cohorts:o.default.array,onUpdate:o.default.func.isRequired,data:o.default.object,isDisabled:o.default.bool},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(11),p=n(f),h=a(2),v=n(h),m=a(61),_=n(m),E=a(6),g=a(996),y=n(g),S=a(995),b=n(S);a(2215);var C=a(98),O=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.cohorts,a=e.activeStep,n=e.onAdd,r=e.onRemove,i=e.onUpdate,l=e.study,o=e.isDisabled,s=e.locations,d=e.isAdjusted,c=t.filter(function(e){return e.state!==C.ITEM_STATE.DELETED}).map(function(e,a){return u.default.createElement(b.default,{isAdjusted:d,index:a,key:e.id,isDisabled:o,cohorts:t,minDate:l?(0,p.default)(l.fp):(0,p.default)(),onUpdate:i,locations:s,item:e,onRemove:r})}),f=(0,v.default)("wizard-step","fpo-row","fpo-wizard-cohorts-container",{"wizard-active-step":a}),h=(0,v.default)("fpo-col-offset-1","fpo-col-9"),m=c.length<10&&!d;return u.default.createElement("div",{className:f},u.default.createElement("div",{className:h},u.default.createElement("h1",null,"Cohorts"),u.default.createElement(y.default,{study:l}),u.default.createElement("div",{className:"wizard-cohorts-list__wrapper"},c),u.default.createElement("div",{className:"wizard-cohorts-control__wrapper"},u.default.createElement(_.default,{onClick:n,disabled:!m||!a},u.default.createElement("div",{className:"wizard-cohorts-control"},u.default.createElement("div",{style:{opacity:m&&a?1:.3}},E.Icons.PLUS),u.default.createElement("span",null,"Add cohort"))))))}}]),t}(u.default.Component);O.propTypes={cohorts:c.default.array,activeStep:c.default.bool,onAdd:c.default.func.isRequired,onRemove:c.default.func.isRequired,onUpdate:c.default.func.isRequired,study:c.default.object,isDisabled:c.default.bool,locations:c.default.array,isAdjusted:c.default.bool},O.defaultProps={cohorts:[],activeStep:!1,study:null,isDisabled:!1,locations:[],isAdjusted:!1},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(65),h=n(p),v=a(2),m=n(v),_=a(40),E=n(_),g=a(6),y=a(198),S=a(74),b=n(S),C=a(111),O=a(98),T=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=[];return e.cohort&&e.cohort.locations&&e.locations&&(n=(0,C.prepareLocationsData)(e.cohort,e.locations)),a.state={locations:n,showLocationsPanel:!1,copyCohortInitialSelect:null},a.handleClickOutside=a.handleClickOutside.bind(a),a.toggleLocationsPanel=a.toggleLocationsPanel.bind(a),a}return l(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){var t={};(this.props.locations.length!==e.locations.length||e.locations&&0!==e.locations.length&&e.cohort&&this.state.showLocationsPanel)&&(t={locations:(0,C.prepareLocationsData)(e.cohort,e.locations)}),e.isDisabled&&this.state.showLocationsPanel&&(t=o({},t,{showLocationsPanel:!1})),this.setState(t)}},{key:"handleClickOutside",value:function(){this.state.showLocationsPanel&&this.toggleLocationsPanel()}},{key:"toggleLocationsPanel",value:function(){this.setState({showLocationsPanel:!this.state.showLocationsPanel})}},{key:"render",value:function(){var e=this,t=this.props,a=t.cohort,n=t.onUpdate,r=t.isDisabled,i=t.cohorts,l=this.state,o=l.showLocationsPanel,s=l.locations,u=l.copyCohortInitialSelect;if(!a)return null;var c=(0,m.default)("selector__content-wrapper",{visible:o}),f=[];return s&&s.length>0&&a.locations.forEach(function(e){var t=e.name;if(!e.isCountryRegion&&!e.hasSingleCountry){var a=s.find(function(t){return t.name===e.name}).countries.length;t+=" (",t+=e.countries.length===a?"All":e.countries.length,t+=")"}f.push(t)}),d.default.createElement("div",{className:"single-line-component__content"},d.default.createElement("div",{className:"single-line-component__element-wrapper"},d.default.createElement("div",{className:"element-wrapper__label"},"Region/Country"),d.default.createElement("div",{className:"selector__wrapper"},d.default.createElement("div",{className:"selector__label-wrapper",onClick:r?void 0:this.toggleLocationsPanel},d.default.createElement("div",{className:"control-label"},f.length>0?d.default.createElement("div",{className:"success"},f.join(", ")):d.default.createElement("div",{className:"select-placeholder"},d.default.createElement("div",{className:"error"},"Select regions/countries"))),d.default.createElement("div",{className:"control-icon"},o?g.Icons.CHEVRON_UP:g.Icons.CHEVRON_DOWN)),d.default.createElement("div",{className:c},i.length>1&&d.default.createElement("div",{className:"selector__copy-cohort"},d.default.createElement("span",null,"same as"),d.default.createElement(b.default,{narrow:!0,initialSelect:u,onOptionSelect:function(t){var r=(0,E.default)(i.find(function(e){return e.id===t.value}).locations);e.setState({copyCohortInitialSelect:null},function(){return n(a.id,"locations",r,!1,!0)})}},i.filter(function(e){return e.id!==a.id&&e.state!==O.ITEM_STATE.DELETED}).map(function(e){return d.default.createElement(S.DropdownOption,{key:e.id,label:e.name,value:e.id})}))),s&&s.length>0&&d.default.createElement(y.EventCountrySelector,{disabled:r,width:290,regionsCountriesList:s,onChange:function(t){e.setState({copyCohortInitialSelect:{}},function(){return n(a.id,"locations",t)})}})))))}}]),t}(d.default.Component);T.defaultProps={locations:[],scenario:null,isDisabled:!1,cohorts:[]},T.propTypes={cohort:f.default.object.isRequired,onUpdate:f.default.func.isRequired,locations:f.default.array,isDisabled:f.default.bool,cohorts:f.default.array},t.default=(0,h.default)(T)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(65),p=n(f),h=a(2),v=n(h),m=a(6),_=a(313),E=n(_),g=a(997),y=n(g),S=a(998),b=n(S),C=a(999),O=n(C),T=a(111),R=a(98),A=n(R),I=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showPanel:!1},a.handleClickOutside=a.handleClickOutside.bind(a),a.togglePanel=a.togglePanel.bind(a),a.handleTriggerSelect=a.handleTriggerSelect.bind(a),a}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){e.isDisabled&&this.state.showPanel&&this.setState({showPanel:!1})}},{key:"handleClickOutside",value:function(e){!this.state.showPanel||"calendar"===e.target.getAttribute("data-element-id")||e.target.classList.contains("react-datepicker")||e.target.classList.contains("react-datepicker__week")||e.target.classList.contains("react-datepicker__month")||e.target.classList.contains("react-datepicker__day")||e.target.classList.contains("react-datepicker__day--disabled")||e.target.classList.contains("react-datepicker__day-name")||e.target.classList.contains("react-datepicker__day-names")||e.target.classList.contains("date-picker-control")||e.target.classList.contains("react-datepicker__header")||e.target.classList.contains("controls")||this.togglePanel()}},{key:"togglePanel",value:function(){this.setState({showPanel:!this.state.showPanel})}},{key:"handleTriggerSelect",value:function(e){var t=this.props.cohort;this.props.onUpdate(t.id,"trigger_type",e,"trigger")}},{key:"render",value:function(){var e=this.props,t=e.cohort,a=e.cohorts,n=e.onUpdate,r=e.isDisabled,i=e.minDate,l=this.state.showPanel,o=(0,v.default)("selector__content-wrapper","standalone","right-align",{visible:l}),s=t.id===R.INITIAL_COHORT_ID||r||0===t.rank,d=(0,T.getLabelValue)(t,a);return u.default.createElement("div",{className:"single-line-component__content"},u.default.createElement("div",{className:"single-line-component__element-wrapper"},u.default.createElement("div",{className:"element-wrapper__label"},"Triggered by"),u.default.createElement("div",{className:"selector__wrapper",style:{width:"236px"}},u.default.createElement("div",{className:"selector__label-wrapper",onClick:r?void 0:this.togglePanel},u.default.createElement("div",{className:"control-label"},u.default.createElement("span",{className:"select-placeholder"},d)),u.default.createElement("div",{className:"control-icon"},l?m.Icons.CHEVRON_UP:m.Icons.CHEVRON_DOWN)),u.default.createElement("div",{className:o,style:{width:"330px"}},u.default.createElement("div",{className:"trigger-panel_wrapper"},u.default.createElement("div",{className:"trigger-panel_radio-group"},u.default.createElement(E.default,{disabled:r,value:A.default.MILESTONES,checked:t.trigger.trigger_type===A.default.MILESTONES,name:"trigger-option",onChange:this.handleTriggerSelect,label:"Milestones"}),u.default.createElement(E.default,{disabled:s,value:A.default.PATIENTS_RANDOMIZED,checked:t.trigger.trigger_type===A.default.PATIENTS_RANDOMIZED,name:"trigger-option",onChange:this.handleTriggerSelect,label:"Patients randomized"}),u.default.createElement(E.default,{disabled:s,value:A.default.DATE,checked:t.trigger.trigger_type===A.default.DATE,name:"trigger-option",onChange:this.handleTriggerSelect,label:"Date"})),u.default.createElement("div",{className:"trigger-panel_inputs"},function(){switch(t.trigger.trigger_type){case A.default.PATIENTS_RANDOMIZED:return u.default.createElement(O.default,{isDisabled:s,cohorts:a,onUpdate:n,data:t.trigger,cohortId:t.id});case A.default.DATE:return u.default.createElement(y.default,{minDate:i,cohort:t,onUpdate:n,value:t.trigger.start_date,cohortId:t.id});case A.default.MILESTONES:default:return u.default.createElement(b.default,{isDisabled:s,cohorts:a,onUpdate:n,data:t.trigger,cohortId:t.id})}}()))))))}}]),t}(u.default.Component);I.defaultProps={scenario:null,cohorts:[],isDisabled:!1},I.propTypes={cohort:c.default.object.isRequired,cohorts:c.default.array,onUpdate:c.default.func.isRequired,isDisabled:c.default.bool,minDate:c.default.object.isRequired},t.default=(0,p.default)(I)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1004),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),h=a(313),v=n(h);a(2216);var m=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.createConstraints,n=e.onChange,r=(0,p.default)("wizard-step","fpo-row","fpo-wizard-constraints-container",{"wizard-active-step":t}),i=(0,p.default)("fpo-col-offset-4","fpo-col-5");return u.default.createElement("div",{className:r},u.default.createElement("div",{className:i},u.default.createElement("h1",null,"Country and Regional considerations"),u.default.createElement("div",{className:"fpo-wizard-constraints__checkbox-wrapper"},u.default.createElement(v.default,{tabInd:6,autoFocus:!0,label:"Let FPO suggest countries and regions to include",name:"fpo_suggest",onChange:n,disabled:!t,checked:!1===a,value:0}),u.default.createElement(v.default,{tabInd:7,label:"I have countries or regions that I want to be considered in FPO suggestions",name:"fpo_suggest",onChange:n,disabled:!t,checked:void 0!==a&&a,value:1})),u.default.createElement("div",{className:"keyline-separator"})))}}]),t}(u.default.Component);m.propTypes={activeStep:c.default.bool.isRequired,createConstraints:c.default.bool,onChange:c.default.func.isRequired},m.defaultProps={createConstraints:void 0},t.default=m},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),h=a(198),v=n(h);a(2217);var m={INCLUDE:"Include",EXCLUDE:"Exclude"},_=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={valid:!1,activeTab:m.INCLUDE},a}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.props.valid===e.valid&&e.anyTouched===this.props.anyTouched||this.props.onValidationChange&&this.props.onValidationChange(e.valid,e.anyTouched)}},{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"handleChange",value:function(e,t){var a=void 0;a=0!==e.length,this.state.valid!==a&&(this.setState({valid:a}),this.props.onValidationChange(a,!0)),this.props.onChange(e,t)}},{key:"toggleTab",value:function(e){this.setState({activeTab:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.activeStep,n=t.scenarioCountries,r=t.includeCountries,i=t.excludeCountries,l=t.disabledIncludedCountries,o=t.disabledExcludedCountries,s=t.recommendedByAnalytics,d=t.hidden,c=(0,p.default)("wizard-step","fpo-row","fpo-wizard-locations-container",{"wizard-active-step":a}),f=(0,p.default)("fpo-col-offset-4","fpo-col-4"),h=0,_=0,E=0;return r.forEach(function(e){e.isCountryRegion?h+=1:e.countries.forEach(function(e){"Unspecified country"===e.name?_+=1:h+=1})}),i.forEach(function(e){e.isCountryRegion?E+=1:e.countries.forEach(function(e){"Unspecified country"!==e.name&&(E+=1)})}),u.default.createElement("div",{className:c,style:{display:d?"none":null}},u.default.createElement("div",{className:f},u.default.createElement("h1",null,"Locations"),u.default.createElement("div",{className:"fpo-wizard-locations__tabs"},[m.INCLUDE,m.EXCLUDE].map(function(t){return u.default.createElement("div",{key:t,className:(0,p.default)("fpo-wizard-locations__tabs__item",{"fpo-wizard-locations__tabs__item--active":e.state.activeTab===t}),onClick:function(){return e.toggleTab(t)}},t)})),u.default.createElement("div",{className:(0,p.default)("fpo-wizard-locations__tab__content",{"fpo-wizard-locations__tab-content--visible":this.state.activeTab===m.INCLUDE})},u.default.createElement("div",{className:"fpo-wizard-locations__tab__content__title"},"Specify ",u.default.createElement("strong",null,"countries")," that must be ",u.default.createElement("strong",null,"included")," in the scenario"),u.default.createElement(v.default,{key:1,tabName:m.INCLUDE,scenarioCountries:n,tabInd:5,activeTab:this.state.activeTab,filterCountries:i,disabledCountries:l,recommendedByAnalytics:s,disabled:!a,tabPress:function(){e.state.valid&&e.props.onTabNavigate()},regionsCountriesList:this.props.includedRegionsCountries,onChange:function(t){return e.handleChange(t,m.INCLUDE)},selectorMode:2})),u.default.createElement("div",{className:(0,p.default)("fpo-wizard-locations__tab__content",{"fpo-wizard-locations__tab-content--visible":this.state.activeTab===m.EXCLUDE})},u.default.createElement("div",{className:"fpo-wizard-locations__tab__content__title"},"Specify ",u.default.createElement("strong",null,"countries")," that must be ",u.default.createElement("strong",null,"excluded")," in the scenario"),u.default.createElement(v.default,{key:2,tabName:m.EXCLUDE,scenarioCountries:n,activeTab:this.state.activeTab,filterCountries:r,disabledCountries:o,recommendedByAnalytics:s,disabled:!a,tabPress:function(){e.state.valid&&e.props.onTabNavigate()},regionsCountriesList:this.props.excludedRegionsCountries,onChange:function(t){return e.handleChange(t,m.EXCLUDE)},selectorMode:2})),u.default.createElement("div",{className:"fpo-wizard-locations__summary"},u.default.createElement("div",{className:"separator__short"}),u.default.createElement("div",{className:"fpo-wizard-locations__summary-block"},u.default.createElement("div",null,"Must include:"),u.default.createElement("div",{className:"fpo-wizard-locations__summary-block__wrapper"},u.default.createElement("span",{className:(0,p.default)("fpo-wizard-locations__summary-block__value",{active:h>0})},h),u.default.createElement("span",null,0===h||h>1?"countries":"country")),u.default.createElement("div",{className:"fpo-wizard-locations__summary-block__wrapper"},u.default.createElement("span",{className:(0,p.default)("fpo-wizard-locations__summary-block__value",{active:_>0})},_),u.default.createElement("span",null,"unspecified "+(0===_||_>1?"countries":"country")))),u.default.createElement("div",{className:"separator__short"}),u.default.createElement("div",{className:"fpo-wizard-locations__summary-block"},u.default.createElement("div",null,"Must exclude:"),u.default.createElement("div",{className:"fpo-wizard-locations__summary-block__wrapper"},u.default.createElement("span",{className:(0,p.default)("fpo-wizard-locations__summary-block__value",{active:E>0})},E),u.default.createElement("span",null,0===E||E>1?"countries":"country")))),u.default.createElement("div",{className:"keyline-separator"})))}}]),t}(s.Component);_.defaultProps={scenarioCountries:[],includeCountries:[],excludeCountries:[],onTabNavigate:void 0,hidden:!1,disabledIncludedCountries:[],disabledExcludedCountries:[],recommendedByAnalytics:[]},_.propTypes={activeStep:c.default.bool.isRequired,scenarioCountries:c.default.array,includeCountries:c.default.array,excludeCountries:c.default.array,onChange:c.default.func.isRequired,onValidationChange:c.default.func.isRequired,includedRegionsCountries:c.default.array.isRequired,excludedRegionsCountries:c.default.array.isRequired,disabledIncludedCountries:c.default.array,disabledExcludedCountries:c.default.array,recommendedByAnalytics:c.default.array,hidden:c.default.bool,onTabNavigate:c.default.func},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WizardMilestonesComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=a(0),d=n(u),c=a(1),f=n(c),p=a(71),h=a(2),v=n(h),m=a(11),_=n(m),E=a(12),g=n(E),y=a(14),S=n(y),b=a(97),C=n(b),O=a(27),T=n(O),R=a(84),A=n(R),I=a(137),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(I),N=a(8);a(2218);var D=function(e){var t=e.input,a=e.disabled,n=e.insideLabel,r=e.placeholder,i=e.meta,l=i.touched,o=i.error,u=e.autoFocus,c=e.tabPress;return d.default.createElement("div",null,d.default.createElement(T.default,s({tabPress:c},t,{autoFocus:u&&!l,type:"text",tabInd:3,disabled:a,placeholder:r,status:l&&o?"error":null,insideLabel:n})))},P=void 0,L=function(e){var t=e.input,a=e.disabled,n=e.maxDate,r=e.label,i=e.anyTouched,l=e.placeholder,o=e.isEditing,u=e.meta.error;return P=(0,N.getMomentDate)(t.value),d.default.createElement("div",null,d.default.createElement(A.default,s({},t,{selected:(0,N.getMomentDate)(t.value)||null,label:r,maxDate:n,disabled:a,placeholder:l,status:(i||o)&&u?"error":null})))},M=function(e){var t=e.input,a=e.disabled,n=e.label,r=e.anyTouched,i=e.placeholder,l=e.isEditing,o=e.meta.error;return d.default.createElement("div",null,d.default.createElement(A.default,s({},t,{selected:(0,N.getMomentDate)(t.value)||null,label:n,filterDate:function(e){return P?e>=P.clone().add(1,"d"):e>(0,_.default)()},disabled:a,placeholder:i,defaultDate:P?P.clone().add(1,"d"):void 0,status:(r||l)&&o?"error":null})))},k=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.props.valid===e.valid&&e.anyTouched===this.props.anyTouched||this.props.onValidationChange&&this.props.onValidationChange(e.valid,e.anyTouched)}},{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.isEditing,n=e.maxStartDate,r=e.onTabNavigate,i=e.anyTouched,l=e.showCohorts,o=e.invalidFields,s=e.impactParams,u=e.study,c=(0,v.default)("wizard-step","fpo-row","fpo-wizard-milestones-container",{"wizard-active-step":t}),f=(0,v.default)("fpo-col-4",{"fpo-col-offset-4":!l,"fpo-col-offset-1":l});return d.default.createElement("div",{className:c},d.default.createElement("div",{className:f},d.default.createElement("h1",null,"Milestones"),d.default.createElement("form",{action:"javascript:void(0);"},d.default.createElement("div",{className:"data-row"},d.default.createElement("span",{className:"data-row-col-1"},d.default.createElement(p.Field,{name:"fp",isEditing:a,label:"Start date (FP)",placeholder:"D MMM YY",component:L,disabled:!a&&!t||!!(0,g.default)(u,"synchronizedWithImpact",!1),anyTouched:i,maxDate:n,validate:[w.required]}),o.includes("fp")&&d.default.createElement(S.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:d.default.createElement("span",null,"Impact value:",d.default.createElement("br",null),s.fp)},d.default.createElement("div",{className:"misaligned-warning__icon"},C.default.INFO_O)))),d.default.createElement("div",{className:"data-row"},d.default.createElement("span",{className:"data-row-col-1"},d.default.createElement(p.Field,{name:"end_date",label:"Target (T/LPFT)",placeholder:"D MMM YY",component:M,disabled:!a&&!t||!!(0,g.default)(u,"synchronizedWithImpact",!1),isEditing:a,anyTouched:i,validate:[w.required]}),o.includes("target_lpft")&&d.default.createElement(S.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:d.default.createElement("span",null,"Impact value:",d.default.createElement("br",null),s.target_lpft)},d.default.createElement("div",{className:"misaligned-warning__icon"},C.default.INFO_O)))),d.default.createElement("div",{className:"data-row"},d.default.createElement("span",{className:"data-row-col-1"},function(){return d.default.createElement(p.Field,{name:"fpfv_fpft",tabPress:r,insideLabel:"FPFV-FPFT (days)",placeholder:"# Days",component:D,autoFocus:!a&&t,disabled:!a&&!t,validate:[w.required,w.isInteger]})}()))),d.default.createElement("div",{className:"keyline-separator"})))}}]),t}(u.Component);k.defaultProps={activeStep:!1,isEditing:!1,startDate:null,targetDate:null,anyTouched:!1,maxStartDate:null,showCohorts:!1,invalidFields:[],impactParams:{},study:null},k.propTypes={activeStep:f.default.bool,isEditing:f.default.bool,anyTouched:f.default.bool,maxStartDate:f.default.object,onTabNavigate:f.default.func,showCohorts:f.default.bool,invalidFields:f.default.array,impactParams:f.default.object,study:f.default.object};var x=function(e,t){e.fp&&e.end_date&&_.default.duration(e.end_date-e.fp).asDays()<1&&t.dispatch((0,p.change)("wizardMilestones","end_date",e.fp.clone().add(1,"d")))};t.WizardMilestonesComponent=k,t.default=(0,p.reduxForm)({form:"wizardMilestones",enableReinitialize:!0,keepDirtyOnReinitialize:!0,validate:x})(k)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(240),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(27),c=n(d),f=function(e){var t=e.activeStep,a=e.studyId,n=e.studyDescription,r=e.studyTa,l=e.studyIndication,o=e.isNewStudy,s=e.showCohorts,d=e.value,f=e.onChange,p=e.onBlur,h=e.status,v=(0,u.default)("wizard-step","fpo-row","fpo-wizard-scenario-details-container",{"wizard-active-step":t}),m=(0,u.default)("fpo-col-4",{"fpo-col-offset-4":!s,"fpo-col-offset-1":s}),_="";return h||d?h||(_="Please enter a unique scenario ID"):_="Please enter scenario ID",i.default.createElement("div",{className:v},i.default.createElement("div",{className:m},i.default.createElement("h1",null,o?"First scenario details":"Scenario details"),i.default.createElement(c.default,{value:d,onChange:function(e){return f(e.target.value)},onBlur:function(e){return p(e.target.value)},tabInd:1,type:"text",maxLength:45,placeholder:"Enter scenario title",outsideLabel:"Scenario ID",status:h?null:"error",statusMessage:_,insideLabel:a+" -"}),i.default.createElement("h4",null,r+"  "+l),i.default.createElement("p",null,n),i.default.createElement("div",{className:"keyline-separator"})))};f.defaultProps={activeStep:!1,isEditing:!1,studyDescription:"",showCohorts:!1,isNewStudy:!1,status:!0},f.propTypes={activeStep:o.default.bool,studyId:o.default.string.isRequired,studyDescription:o.default.string,studyTa:o.default.string.isRequired,studyIndication:o.default.string.isRequired,isNewStudy:o.default.bool,showCohorts:o.default.bool,value:o.default.string.isRequired,onChange:o.default.func.isRequired,onBlur:o.default.func.isRequired,status:o.default.bool},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WizardScenarioDetailsComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=a(0),d=n(u),c=a(1),f=n(c),p=a(71),h=a(2),v=n(h),m=a(27),_=n(m);a(2220);var E=a(33),g=function(e){var t=e.input,a=e.disabled,n=e.insideLabel,r=e.outsideLabel,i=e.placeholder,l=e.meta,o=l.touched,u=l.error,c=e.autoFocus,f=e.tabPress;return d.default.createElement("div",null,d.default.createElement(_.default,s({},t,{autoFocus:c,tabPress:f,tabInd:1,type:"text",maxLength:45,disabled:a,placeholder:i,outsideLabel:r,status:o&&u?"error":null,statusMessage:u,insideLabel:n})))},y=function(e){return function(t){return t&&-1===e.indexOf(t)?void 0:"Please enter a unique scenario ID"}},S=function(e){return e?void 0:"Please enter scenario ID"},b=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.isExist=y(e.existingScenariosNames),a}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.valid,n=t.anyTouched,r=t.onValidationChange,i=t.dirty,l=t.activeStep,o=t.asyncValidate,s=t.initialValues;a===e.valid&&e.anyTouched===n||r&&r(e.valid,e.anyTouched),i&&l!==e.activeStep&&!e.activeStep&&o("name",s.name,"blur")}},{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.isEditing,n=e.studyId,r=e.studyDescription,i=e.studyTa,l=e.studyIndication,o=e.onTabNavigate,s=e.isNewStudy,u=e.showCohorts,c=(0,v.default)("wizard-step","fpo-row","fpo-wizard-scenario-details-container",{"wizard-active-step":t}),f=(0,v.default)("fpo-col-4",{"fpo-col-offset-4":!u,"fpo-col-offset-1":u});return d.default.createElement("div",{className:c},d.default.createElement("div",{className:f},d.default.createElement("h1",null,s?"First scenario details":"Scenario details"),d.default.createElement("form",{action:"javascript:void(0);"},d.default.createElement(p.Field,{name:"name",tabPress:o,insideLabel:n+" -",outsideLabel:"Scenario ID",placeholder:"Enter scenario title",autoFocus:!a&&t,disabled:!a&&!t,component:g,validate:[S,this.isExist]})),d.default.createElement("h4",null,i+"  "+l),d.default.createElement("p",null,r),d.default.createElement("div",{className:"keyline-separator"})))}}]),t}(u.Component);b.defaultProps={activeStep:!1,isEditing:!1,studyDescription:"",showCohorts:!1,isNewStudy:!1},b.propTypes={activeStep:f.default.bool,isEditing:f.default.bool,existingScenariosNames:f.default.array.isRequired,onValidationChange:f.default.func.isRequired,onTabNavigate:f.default.func,studyId:f.default.string,studyDescription:f.default.string,studyTa:f.default.string,studyIndication:f.default.string,isNewStudy:f.default.bool,showCohorts:f.default.bool},t.WizardScenarioDetailsComponent=b,t.default=(0,p.reduxForm)({form:"wizardScenarioDetails",asyncValidate:E.validateScenarioNameOnCreate,asyncBlurFields:["name"]})(b)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1012),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=function(e){var t=e.icon,a=e.children;return i.default.createElement("div",null,i.default.createElement("div",{className:"summary-row-icon"},t),a,i.default.createElement("div",{className:"keyline-separator"}))};s.propTypes={icon:o.default.node.isRequired,children:o.default.node.isRequired},t.default=s},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),h=a(11),v=n(h),m=a(61),_=n(m),E=a(1011),g=n(E),y=a(6),S=a(8),b=a(111);a(2221);var C=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.dataStudyId,n=e.dataScenarioName,r=e.dataTargetPatients,i=e.dataFpp,l=e.dataFpfvFpft,o=e.dataTargetLpft,s=e.includeCountries,d=e.excludeCountries,c=e.isNewStudy,f=e.onSubmitClick,h=e.createConstraints,v=e.showCohorts,m=e.cohorts,E=e.isNewScenario,C=e.disableSubmit,O=(0,p.default)("wizard-step","fpo-row","fpo-wizard-scenario-summary-container",{"wizard-active-step":t}),T=(0,p.default)("fpo-col-5",{"fpo-col-offset-4":!v,"fpo-col-offset-1":v}),R=0,A=0,I=0;return s.forEach(function(e){e.isCountryRegion?R+=1:e.countries.forEach(function(e){"Unspecified country"===e.name?A+=1:R+=1})}),d.forEach(function(e){e.isCountryRegion?I+=1:e.countries.forEach(function(e){"Unspecified country"===e.name||(I+=1)})}),u.default.createElement("div",{className:O},u.default.createElement("div",{className:T},u.default.createElement("h1",null,"Summary scenario inputs"),u.default.createElement("div",{className:"summary-data-wrapper"},u.default.createElement(g.default,{icon:y.Icons.DETAILS},u.default.createElement("span",{className:"summary-row-wrapper"},u.default.createElement("span",{className:"data-label"},u.default.createElement("span",{className:"data-content"},a)),u.default.createElement("span",{className:"data-value",title:n},n))),c&&u.default.createElement(g.default,{icon:y.Icons.VISITORS},u.default.createElement("span",{className:"summary-row-wrapper"},u.default.createElement("span",{className:"data-label"},"Target Patients"),u.default.createElement("span",{className:"data-value",title:r},r))),c&&u.default.createElement(g.default,{icon:y.Icons.DATE_RANGE},u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"FP"),u.default.createElement("span",{className:"data-value",title:i?(0,S.getMomentDate)(i).format("DD MMM YYYY"):""},i?(0,S.getMomentDate)(i).format("DD MMM YYYY"):"")),u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"FPFV-FPFT"),u.default.createElement("span",{className:"data-value",title:l+" "+(l>1?"days":"day")},l," ",l>1?"days":"day")),u.default.createElement("span",{className:"summary-row-wrapper"},u.default.createElement("span",{className:"data-label"},"Target LPFT"),u.default.createElement("span",{className:"data-value",title:o?(0,S.getMomentDate)(o).format("DD MMM YYYY"):""},o?(0,S.getMomentDate)(o).format("DD MMM YYYY"):""))),!v&&function(){return h?u.default.createElement(g.default,{icon:y.Icons.LANGUAGE},u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"Countries included"),u.default.createElement("span",{className:"data-value"},R)),u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"Unspecified countries included"),u.default.createElement("span",{className:"data-value"},A)),u.default.createElement("div",{className:"keyline-separator"}),u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"Countries excluded"),u.default.createElement("span",{className:"data-value"},I))):u.default.createElement(g.default,{icon:y.Icons.LANGUAGE},u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"FPO to suggest countries and regions to include")))}(),v&&m.map(function(e,t){var a=0;return e.locations.forEach(function(e){return e.countries.forEach(function(e){var t=e.patients;a+=t})}),u.default.createElement(g.default,{icon:"",key:e.id},u.default.createElement("div",null,u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"Cohort ",t+1),u.default.createElement("span",{className:"data-value"},e.name)),u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"Patients"),u.default.createElement("span",{className:"data-value"},a)),u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"Trigger"),u.default.createElement("span",{className:"data-value"},(0,b.getLabelValue)(e,m)))))})),u.default.createElement("span",{className:"summary-button-wrapper"},!E&&u.default.createElement("div",{className:"summary-attention"},"Editing the target patients or T/LPFT will effect all scenarios within this study, including the approved plan."),u.default.createElement(_.default,{className:"summary-button",label:"Run scenario",disabled:C,onClick:function(){return f()}}))))}}]),t}(u.default.Component);C.propTypes={activeStep:c.default.bool.isRequired,dataStudyId:c.default.string.isRequired,dataScenarioName:c.default.string,dataTargetPatients:c.default.oneOfType([c.default.number,c.default.string]),dataFpp:c.default.object,dataFpfvFpft:c.default.oneOfType([c.default.number,c.default.string]),dataTargetLpft:c.default.object,isNewStudy:c.default.bool,onSubmitClick:c.default.func.isRequired,includeCountries:c.default.array,excludeCountries:c.default.array,createConstraints:c.default.bool,showCohorts:c.default.bool,cohorts:c.default.array,isNewScenario:c.default.bool,disableSubmit:c.default.bool},C.defaultProps={dataScenarioName:"",dataTargetPatients:0,dataFpfvFpft:0,dataFpp:(0,v.default)(),dataTargetLpft:(0,v.default)(),dataCountries:[],isNewStudy:!1,includeCountries:[],excludeCountries:[],createConstraints:!0,showCohorts:!1,cohorts:[],isNewScenario:!1,disableSubmit:!1},t.default=C},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),h=a(117),v=n(h),m=a(313),_=n(m),E=a(27),g=n(E),y=a(84),S=n(y),b=a(8);a(2222);var C=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onBlurValidationHandler=a.onBlurValidationHandler.bind(a),a}return l(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"onBlurValidationHandler",value:function(e,t){t||this.props.validationChangeHandler&&this.props.validationChangeHandler("studyConstraints",!1)}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.ownStudyConstraints,n=e.onChange,r=e.values,i=e.status,l=e.showCohorts,o=(0,p.default)("wizard-step","fpo-row","fpo-wizard-study-constraints-container",{"wizard-active-step":t}),s=(0,p.default)("fpo-col-4",{"fpo-col-offset-4":!l,"fpo-col-offset-1":l});return u.default.createElement("div",{className:o},u.default.createElement("div",{className:s},u.default.createElement("div",{className:"fpo-grid no-gaps"},u.default.createElement("div",{className:"fpo-row"},u.default.createElement("div",{className:"fpo-col-5"},u.default.createElement("h1",null,"Study constraints"),u.default.createElement("div",{className:"fpo-wizard-constraints__checkbox-wrapper"},u.default.createElement(_.default,{tabInd:4,label:"Keep scenario aligned with constraints defined on study level",name:"studyConstraints",onChange:n,checked:void 0!==a&&!a,value:0}),u.default.createElement(_.default,{tabInd:5,label:"Scenario has own set of constraints",name:"studyConstraints",onChange:n,checked:void 0!==a&&a,value:1})))),u.default.createElement("div",{className:(0,p.default)("fpo-row",{hidden:!a})},u.default.createElement("div",{className:"fpo-col-3"},u.default.createElement("h1",null,"Target patients"),u.default.createElement(g.default,{tabInd:6,status:i||r.target_num_patients?null:"error",value:r.target_num_patients||"",validators:[function(e){return""===e||v.default.isInt(e,{min:1,max:1e6})}],onChange:function(e){return n(e.target.value,"target_num_patients")},insideLabel:"Target patients (N)",placeholder:"Patients"}),u.default.createElement("h1",{className:(0,p.default)({disabled:!a})},"Milestones"),u.default.createElement(S.default,{disabled:!t,tabInd:7,status:i||r.fp?null:"error",selected:(0,b.getMomentDate)(r.fp),label:"Start date (FP)",onChange:function(e){return n(e,"fp")}}),u.default.createElement(S.default,{disabled:!t,minDate:(0,b.getMomentDate)(r.fp).add(1,"day"),status:i||r.target_lpft?null:"error",selected:(0,b.getMomentDate)(r.target_lpft),label:"Target (T/LPFT)",onBlur:this.onBlurValidationHandler,onChange:function(e){return n(e,"target_lpft")}}),u.default.createElement(g.default,{value:r.fpfv_fpft||0===r.fpfv_fpft?r.fpfv_fpft:"",status:i||r.fpfv_fpft||0===r.fpfv_fpft?null:"error",validators:[function(e){return""===e||v.default.isInt(e,{min:0,max:1e4})}],onChange:function(e){return n(e.target.value,"fpfv_fpft")},insideLabel:"FPFV-FPFT (days)",placeholder:"Days"}))))))}}]),t}(u.default.Component);C.defaultProps={ownStudyConstraints:!1,values:{},status:!0,showCohorts:!1,validationChangeHandler:void 0},C.propTypes={activeStep:c.default.bool.isRequired,ownStudyConstraints:c.default.bool,onChange:c.default.func.isRequired,validationChangeHandler:c.default.func,values:c.default.object,status:c.default.bool,showCohorts:c.default.bool},C.defaultProps={createConstraints:void 0},t.default=C},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1015),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WizardStudyDetailsComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=a(0),d=n(u),c=a(1),f=n(c),p=a(71),h=a(2),v=n(h),m=a(137),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(m),E=a(27),g=n(E),y=a(74),S=n(y),b=a(106),C=a(30),O=a(1146);a(2223);var T=function(e){var t=e.input,a=e.disabled,n=e.maxLength,r=e.insideLabel,i=e.outsideLabel,l=e.placeholder,o=e.meta,u=(o.asyncValidating,o.touched),c=o.error;return d.default.createElement("div",null,d.default.createElement(g.default,s({},t,{defaultValue:t.value,onChange:void 0,onBlur:t.onChange,type:"text",maxLength:n,disabled:a,placeholder:l,outsideLabel:i,status:u&&c?"error":null,statusMessage:c,insideLabel:r})))},R=function(e){var t=e.input,a=e.disabled,n=e.outsideLabel,r=e.options,i=e.placeholder,l=e.initialSelect,o=e.meta,s=o.touched,u=o.error;return d.default.createElement("div",null,d.default.createElement(S.default,{initialSelect:l,onOptionSelect:t.onChange,label:n,disabled:a,status:s&&u?"error":null,placeholder:i},r.map(function(e){return d.default.createElement(y.DropdownOption,{selected:l&&l.name===e.name,key:"drop-down-option_"+e.name,label:e.name,value:e})})))},A=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.props.valid===e.valid&&e.anyTouched===this.props.anyTouched||this.props.onValidationChange&&this.props.onValidationChange(e.valid,e.anyTouched),e.selectedTa&&this.props.selectedTa&&e.selectedTa.label!==this.props.selectedTa.label&&this.props.dispatch((0,p.change)("wizardStudyDetails","indication",null))}},{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.availableIndications,n=e.availableTherapeuticAreas,r=e.selectedTa,i=e.showCohorts,l=e.study,o=(0,v.default)("wizard-step","fpo-row","fpo-wizard-study-details-container",{"wizard-active-step":t}),s=(0,v.default)("fpo-col-4",{"fpo-col-offset-4":!i,"fpo-col-offset-1":i}),u=null,c=null;return l&&l.therapeutic_area&&(u=n.filter(function(e){return e.name===l.therapeutic_area.label}).pop(),l.indication&&(c=a.filter(function(e){return e.name===l.indication.label}).pop())),d.default.createElement("div",{className:o},d.default.createElement("div",{className:s},d.default.createElement("h1",null,"Study details"),d.default.createElement("form",{action:"javascript:void(0);"},d.default.createElement(p.Field,{initialSelect:u,name:"therapeutic_area",outsideLabel:"Therapeutic area",placeholder:"Select therapeutic area",options:n,component:R,disabled:!t,validate:[_.required]}),d.default.createElement(p.Field,{initialSelect:c,name:"indication",outsideLabel:"Indication",placeholder:"Select indication",options:r?(0,b.getIndications)(r.value,a):[],component:R,disabled:!t||!r,validate:[_.required]}),d.default.createElement(p.Field,{initialSelect:null,name:"phase",outsideLabel:"Phase",placeholder:"Select phase",options:Object.keys(O.PHASE).map(function(e){return{id:e,name:O.PHASE[e]}}),component:R,disabled:!t,validate:[_.required]}),d.default.createElement(p.Field,{name:"study_id",outsideLabel:"Study",placeholder:"Add study code",maxLength:45,component:T,disabled:!t,validate:[_.requiredStudy]}),d.default.createElement(p.Field,{name:"description",outsideLabel:"Description (optional)",placeholder:"Add description",maxLength:1e3,component:T,disabled:!t})),d.default.createElement("div",{className:"keyline-separator"})))}}]),t}(u.Component);A.propTypes={activeStep:f.default.bool.isRequired,availableIndications:f.default.array,availableTherapeuticAreas:f.default.array,onValidationChange:f.default.func.isRequired,selectedTa:f.default.object,showCohorts:f.default.bool,study:f.default.object.isRequired},A.defaultProps={availableTherapeuticAreas:[],availableIndications:[],selectedTa:null,showCohorts:!1},t.WizardStudyDetailsComponent=A,t.default=(0,p.reduxForm)({form:"wizardStudyDetails",asyncValidate:C.validateStudyName,asyncBlurFields:["study_id"]})(A)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),o=n(l),s=a(1),u=n(s),d=a(984),c=n(d),f=function(e){var t=e.input,a=e.meta,n=(a.asyncValidating,a.touched,a.error,r(e,["input","meta"]));return o.default.createElement(c.default,i({},t,n))};f.propTypes={input:u.default.object.isRequired,meta:u.default.object.isRequired},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(71),p=a(2),h=n(p),v=a(1016),m=n(v),_=a(132),E=n(_),g=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.props.valid===e.valid&&e.anyTouched===this.props.anyTouched||this.props.onValidationChange&&this.props.onValidationChange(e.valid,e.anyTouched)}},{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.showCohorts,n=e.study,r=(0,h.default)("wizard-step","fpo-row","fpo-wizard-study-details-container","wizard-study-filters",{"wizard-active-step":t}),i=(0,h.default)("fpo-col-4",{"fpo-col-offset-4":!a,"fpo-col-offset-1":a});return u.default.createElement("div",{className:r},u.default.createElement("div",{className:i},u.default.createElement("h1",null,"Inclusion and Exclusion criteria (optional)"),u.default.createElement("form",{action:"javascript:void(0);"},u.default.createElement(f.Field,{name:"inclusion",outsideLabel:"Inclusion",defaultValue:n.inclusion,placeholder:"Add inclusion criteria",component:m.default,disabled:!t}),u.default.createElement(f.Field,{name:"exclusion",outsideLabel:"Exclusion",defaultValue:n.exclusion,placeholder:"Add exclusion criteria",component:m.default,disabled:!t})),u.default.createElement(E.default,{isShown:!0,multiline:!0,status:"reminder",title:"Changes in this section will be delivered to Nerve within 24 hours."},"Please re-optimize the scenario again in 24 hours."),u.default.createElement("div",{className:"keyline-separator"})))}}]),t}(s.Component);g.propTypes={activeStep:c.default.bool.isRequired,onValidationChange:c.default.func.isRequired,showCohorts:c.default.bool,study:c.default.object.isRequired},g.defaultProps={showCohorts:!1},t.default=(0,f.reduxForm)({form:"wizardStudyFilters"})(g)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WizardTargetPatientsComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=a(0),d=n(u),c=a(1),f=n(c),p=a(71),h=a(2),v=n(h),m=a(117),_=n(m),E=a(137),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(E),y=a(27),S=n(y);a(2224);var b=a(14),C=n(b),O=a(97),T=n(O),R=function(e){var t=e.input,a=e.disabled,n=e.insideLabel,r=e.placeholder,i=e.meta,l=i.touched,o=i.error,u=e.autoFocus,c=e.tabPress;return d.default.createElement("div",null,d.default.createElement(S.default,s({},t,{tabPress:c,autoFocus:u,tabInd:2,type:"text",disabled:a,placeholder:r,validators:[function(e){return""===e||_.default.isInt(e,{min:1,max:1e6})}],status:l&&o?"error":null,insideLabel:n})))},A=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.props.valid===e.valid&&e.anyTouched===this.props.anyTouched||this.props.onValidationChange&&this.props.onValidationChange(e.valid,e.anyTouched)}},{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.isEditing,n=e.onTabNavigate,r=e.disabled,i=e.placeholder,l=e.showCohorts,o=e.impactTooltip,s=(0,v.default)("wizard-step","fpo-row","fpo-wizard-target-patients-container",{"wizard-active-step":t}),u=(0,v.default)("fpo-col-2",{"fpo-col-offset-4":!l,"fpo-col-offset-1":l});return d.default.createElement("div",{className:s},d.default.createElement("div",{className:u},d.default.createElement("h1",null,"Target patients"),d.default.createElement("form",{action:"javascript:void(0);"},d.default.createElement(p.Field,{name:"target_num_patients",tabPress:n,insideLabel:"Target patients (N)",placeholder:i,component:R,autoFocus:!a&&t,disabled:r||!a&&!t,validate:[g.required,g.isInteger,g.minValue1,g.maxValue1m]}),o&&0!==o?d.default.createElement(C.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:d.default.createElement("span",null,"Impact value:",d.default.createElement("br",null),o)},d.default.createElement("div",{className:"misaligned-warning__icon"},T.default.INFO_O)):null),d.default.createElement("div",{className:"keyline-separator"})))}}]),t}(u.Component);A.defaultProps={activeStep:!1,isEditing:!1,placeholder:"# Patients",showCohorts:!1,impactTooltip:null},A.propTypes={activeStep:f.default.bool,isEditing:f.default.bool,onValidationChange:f.default.func.isRequired,onTabNavigate:f.default.func,disabled:f.default.bool,placeholder:f.default.string,showCohorts:f.default.bool,impactTooltip:f.default.oneOfType([f.default.number,f.default.string])},t.WizardTargetPatientsComponent=A,t.default=(0,p.reduxForm)({form:"wizardTargetPatients",enableReinitialize:!0,keepDirtyOnReinitialize:!0})(A)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){var t=(0,v.matchPath)(e.router.location.pathname,{path:"/studies/:id"}),a=Number.parseInt((0,_.default)(t,"params.id"),0);return{studiesIds:Number.isNaN(a)?null:a,jobs:e.jobs,scenarios:e.scenarios,errors:e.errors,showBrand:(0,N.isDisplayBrand)(e.router.location.pathname)}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(7),h=a(19),v=a(16),m=a(12),_=n(m),E=a(775),g=n(E),y=a(196),S=n(y),b=a(773),C=n(b),O=a(954),T=n(O),R=a(1056),A=n(R),I=a(44),w=n(I),N=a(34),D=a(765),P=n(D),L=a(30),M=a(33),k=a(131),x=a(451),j=n(x),F=a(318),U=n(F),V=a(310);a(2225);var B=function(e){function t(){var e,a,n,l;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.sessionExpired=function(){n.props.sessionExpired()},n.internalServerError=function(){n.props.internalServerError("Error")},l=a,i(n,l)}return l(t,e),s(t,[{key:"componentDidMount",value:function(){var e=setTimeout(function t(){var a=this.props,n=a.scenarios,r=a.getStudyDashboardData,i=a.getScenarioViewerDataWithFullStudy,l=a.updateScenarioJobStatus,o=a.updateStudyScenarioJobStatus,s=a.showNotificationOnJobFinished,u=a.studiesIds;return this.props.scenarioJobStatus({studiesIds:u,scenarios:n,dispatchGetStudy:r,dispatchGetScenario:i,dispatchUpdateScenarioJobStatus:l,dispatchUpdateStudyScenarioJobStatus:o,showNotificationMessage:s}),e=setTimeout(t.bind(this),6e4)}.bind(this),1e3),t=setTimeout(function e(){return this.props.getSitesHealth(),t=setTimeout(e.bind(this),3e5)}.bind(this),1e3);this.props.getContextHelpPageList()}},{key:"render",value:function(){var e=this,t=this.props.errors,a=t.forbidden,n=t.internalServer,r=t.notFound,i=t.approveODA,l=t.sessionExpired,o=t.badRequest;return d.default.createElement("div",{className:"application"},d.default.createElement(g.default,{showBrand:this.props.showBrand,onTestSession:this.sessionExpired,onTestError:this.internalServerError}),d.default.createElement("div",{className:"application-content-wrapper"},this.props.children),d.default.createElement(C.default,{showBrand:this.props.showBrand}),d.default.createElement(S.default,{isShown:null!==a&&void 0!==a,status:"error",title:"Forbidden",handleClose:function(){e.props.forbiddenError(),e.props.push("/")}},a),d.default.createElement(S.default,{isShown:null!==n&&void 0!==n,status:"error",title:"An unexpected error occurred"},"We are sorry, but there was a problem dealing with your request. Please refresh the page and try again."),d.default.createElement(S.default,{isShown:null!==r&&void 0!==r,status:"error",title:"Not Found",handleClose:function(){return e.props.notFoundError()}},r),d.default.createElement(S.default,{isShown:null!==i&&void 0!==i,status:"error",title:"ODA API Server issue",handleClose:function(){return e.props.ODAError()}},i),d.default.createElement(S.default,{isShown:null!==o&&void 0!==o,status:"error",title:"Request error",handleClose:function(){return e.props.badRequestError()}},o),d.default.createElement(T.default,{sessionExpired:l}),d.default.createElement(A.default,null),d.default.createElement(w.default,null))}}]),t}(u.Component);B.propTypes={children:f.default.node,errors:f.default.object.isRequired,showBrand:f.default.bool,forbiddenError:f.default.func.isRequired,notFoundError:f.default.func.isRequired,badRequestError:f.default.func.isRequired,scenarioJobStatus:f.default.func,getStudyDashboardData:f.default.func,getScenarioViewerDataWithFullStudy:f.default.func.isRequired,updateScenarioJobStatus:f.default.func,updateStudyScenarioJobStatus:f.default.func,scenarios:f.default.object.isRequired,ODAError:f.default.func.isRequired,getSitesHealth:f.default.func.isRequired,internalServerError:f.default.func.isRequired,sessionExpired:f.default.func.isRequired,push:f.default.func.isRequired,showNotificationOnJobFinished:f.default.func.isRequired,studiesIds:f.default.number,getContextHelpPageList:f.default.func.isRequired},B.defaultProps={children:null,showBrand:!0,scenarioJobStatus:void 0,getStudyDashboardData:void 0,getScenario:void 0,updateScenarioJobStatus:void 0,updateStudyScenarioJobStatus:void 0,studiesIds:null},t.default=(0,v.withRouter)((0,p.connect)(o,{internalServerError:k.internalServerError,sessionExpired:k.sessionExpired,forbiddenError:k.forbiddenError,notFoundError:k.notFoundError,ODAError:k.ODAError,scenarioJobStatus:P.default,getScenarioViewerDataWithFullStudy:M.getScenarioViewerDataWithFullStudy,getStudyDashboardData:L.getStudyDashboardData,showNotificationOnJobFinished:D.showNotificationOnJobFinished,getScenario:M.getScenario,updateScenarioJobStatus:M.updateScenarioJobStatus,updateStudyScenarioJobStatus:L.updateStudyScenarioJobStatus,getApplicationMetaData:j.default,push:h.push,badRequestError:k.badRequestError,getContextHelpPageList:U.default,getSitesHealth:V.getSitesHealth})(B))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{availableUsers:(0,_.getActionableUsers)(e)}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(7),h=a(39),v=a(74),m=a(33),_=a(511),E=a(44);a(2226);var g=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={newOwnerId:null},a.handleSubmit=a.handleSubmit.bind(a),a.handleCancel=a.handleCancel.bind(a),a.handleSelectNewOwner=a.handleSelectNewOwner.bind(a),a}return l(t,e),s(t,[{key:"handleSelectNewOwner",value:function(e){var t=e.value;this.setState({newOwnerId:t})}},{key:"handleSubmit",value:function(){var e=this,t=this.props.studyId;this.props.setNewStudyOwner(t,this.state.newOwnerId).then(function(){e.handleCancel()}).catch(function(){return e.handleCancel()})}},{key:"handleCancel",value:function(){var e=this;this.setState({newOwnerId:null},function(){e.props.onClose()})}},{key:"render",value:function(){var e=this.props,t=e.isShown,a=e.availableUsers,n=this.state.newOwnerId;return d.default.createElement(h.PopupDialog,{title:"Change study owner",isShown:t,handleClose:this.handleCancel,buttons:[d.default.createElement(h.ActionButton,{action:this.handleCancel},"Cancel"),d.default.createElement(h.ActionButton,{disabled:!n,action:this.handleSubmit,primary:!0},"Change owner")]},d.default.createElement("div",{className:"change-owner-dialog-content"},"Changing ownership will allow the new owner to edit study details. The new owner can ",d.default.createElement("ul",null,d.default.createElement("li",null,"Have access and permission to edit study characteristics"),d.default.createElement("li",null,"Select reference studies"),d.default.createElement("li",null,"Change study ownership")),"You will ",d.default.createElement("b",null,"no longer")," be the study owner. Are you sure?",d.default.createElement("div",{className:"dropdown-container"},d.default.createElement("span",{className:"__title"},"New study owner"),d.default.createElement(v.DropdownSelectFilterable,{narrow:!0,placeholder:"Search by email",onOptionSelect:this.handleSelectNewOwner},a.filter(function(e){return e.email}).map(function(e){return d.default.createElement(v.DropdownOption,{key:e.id,label:e.email,value:e.id,selected:e.id===n})}))),d.default.createElement(E.ContextHelpButton,{page:"popup__change-study-owner",popup:!0})))}}]),t}(u.Component),y={setNewStudyOwner:m.setNewStudyOwner};g.defaultProps={availableUsers:[]},g.propTypes={studyId:f.default.number.isRequired,isShown:f.default.bool.isRequired,onClose:f.default.func.isRequired,availableUsers:f.default.array,setNewStudyOwner:f.default.func.isRequired},t.default=(0,p.connect)(o,y)(g)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1020),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=parseInt(t.match.params.scenarioId,10),n=parseInt(t.match.params.cohortId,10),r=e.scenarios[a],i=r&&r.cohorts?r.cohorts.find(function(e){return e.id===n}):void 0,l=parseInt(t.match.params.id,10);return{cohort:i,cohortId:n,scenario:r,studyId:l,study:e.study[l]||{state:{status:B.default.PLANNED}},scenarioId:a,events:(0,U.getEvents)(e,t),locations:(0,U.getAvailableLocations)(e,t),stat:(0,U.getEventsStatistics)(e,t),eventsAreValid:(0,U.areEventsValid)(e,t),allEvents:(0,U.getEventsFromStore)(e,t),activeUser:e.auth.user,groupByType:e.events.groupByType}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(7),h=a(19),v=a(16),m=a(40),_=n(m),E=a(81),g=n(E),y=a(17),S=a(107),b=a(6),C=a(492),O=n(C),T=a(61),R=n(T),A=a(508),I=n(A),w=a(474),N=n(w),D=a(461),P=a(108),L=a(30),M=a(46),k=a(77),x=a(55),j=n(x),F=a(33),U=a(1023);a(734);var V=a(20),B=n(V),H=a(10),G=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.sortEventsByStartDate=function(){a.props.sortEventsByStartDate(a.props.scenarioId,a.state.sortOrder),a.setState({sortOrder:!a.state.sortOrder})},a.toggleGroupByType=function(){a.props.toggleGroupEventsByType(),a.props.sortEventsByStartDate(a.props.scenarioId,!a.state.sortOrder,!1)},a.state={sortOrder:!1},a.scrollTop=0,a.containerWidth=0,a.containerLeft=0,a.handleResize=a.handleResize.bind(a),a.handleAddNewEvent=a.handleAddNewEvent.bind(a),a.handleEventUpdate=a.handleEventUpdate.bind(a),a.handleEventDuplicate=a.handleEventDuplicate.bind(a),a.handleEventRemove=a.handleEventRemove.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.handleEventDisable=a.handleEventDisable.bind(a),a}return l(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.studyId,a=e.scenarioId,n=e.cohortId,r=e.scenario,i=e.study,l=e.locations;window.addEventListener("resize",this.handleResize),window.addEventListener("scroll",this.handleResize),this.handleResize(),i.id!==t&&this.props.getPlainStudy(t),l&&0!==l.length||this.props.getPlatformRegions(),r||this.props.getScenario(t,a),this.props.getScenarioCohortEvents(a,t,n)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("scroll",this.handleResize)}},{key:"handleResize",value:function(e){var t=this.container;if(t){var a=t.getBoundingClientRect();this.containerWidth=a.width,this.containerLeft=a.left;var n=document.querySelector(".application").getBoundingClientRect().top;e&&("scroll"===e.type&&this.scrollTop===n||"resize"===e.type)?this.forceUpdate():this.scrollTop=n}}},{key:"handleAddNewEvent",value:function(e){var t=(0,k.getNewEventByType)(e);this.props.addNewEvent(this.props.scenarioId,t)}},{key:"handleEventUpdate",value:function(e,t,a){this.props.updateEvent(this.props.scenarioId,e,t,a)}},{key:"handleEventDuplicate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.props.duplicateEvent(this.props.scenarioId,e,t)}},{key:"handleEventRemove",value:function(e){this.props.removeEvent(this.props.scenarioId,e)}},{key:"handleEventDisable",value:function(e,t){this.props.disableEvent(this.props.scenarioId,e,t)}},{key:"handleSubmit",value:function(){var e=this,t=this.props,a=t.allEvents,n=t.scenarioId,r=t.studyId,i=t.cohortId,l=[];a.forEach(function(e){if(e.state){var t=(0,_.default)(e);t.locations=[],e.locations.forEach(function(e){e.countries.forEach(function(a){t.locations.push({platform_country_id:a.platform_country_id,country_name:a.name,region_name:e.name})})}),l.push((0,g.default)(t,"isValid"))}}),this.props.applyScenarioCohortEventsChanges(n,i,l).then(function(){return e.props.push("/studies/"+r+"/scenarios/"+n+"/cohorts/"+i)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.cohort,n=t.cohortId,r=t.events,i=t.studyId,l=t.scenarioId,o=t.locations,s=t.scenario,u=t.study,c=t.stat,f=t.activeUser,p=t.groupByType,h=(0,j.default)(f,u,s),m=h.isTracking,_=h.isAdjusted,E=h.isUserHasScenarioFullControl,g=E&&s&&s.status!==H.SCENARIO_STATUS.APPROVED&&a&&a.countries.length>0&&!(m&&!_);return d.default.createElement("div",{className:"scenario-events"},d.default.createElement(S.Sidebar,null,d.default.createElement(S.Button,{height:60},d.default.createElement(v.NavLink,{to:"/"},b.Icons.HOME)),d.default.createElement(S.Separator,{height:20}),d.default.createElement(S.Button,{height:56,onClick:this.sortEventsByStartDate,tooltip:"Sort events by start date"},this.state.sortOrder?b.Icons.FILTER_DESCENDING:b.Icons.FILTER_ASCENDING),d.default.createElement(S.Button,{height:56,onClick:this.toggleGroupByType,tooltip:this.props.groupByType?"Ungroup events":"Group events by type"},this.props.groupByType?b.Icons.UNGROUP:b.Icons.GROUP)),d.default.createElement(y.Grid,null,d.default.createElement(y.Row,null,d.default.createElement(y.Col,{offset:1,width:10},d.default.createElement(O.default,{numberOfEvents:r.filter(function(e){return e.isValid}).length})),d.default.createElement("div",{className:"fpo-col-1",width:1,ref:function(t){e.container=t}},d.default.createElement("div",{className:"scenario-events__fixed-bar",style:{width:this.containerWidth,left:this.containerLeft}},d.default.createElement("div",{className:"fixed-bar_line"}),d.default.createElement("div",{className:"scenario-events__close-button",onClick:function(){return e.props.push("/studies/"+i+"/scenarios/"+l+"/cohorts/"+n)}},b.Icons.CROSS)))),d.default.createElement(y.Row,null,d.default.createElement(y.Col,{offset:1,width:10,style:{display:"flex"}},d.default.createElement(N.default,{actionable:g,type:M.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE,counters:c[M.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE],isTracking:m,onAdd:function(){return e.handleAddNewEvent(M.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE)}}),d.default.createElement(N.default,{actionable:g,type:M.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS,counters:c[M.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS],isTracking:m,onAdd:function(){return e.handleAddNewEvent(M.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS)}}),d.default.createElement(N.default,{actionable:g,type:M.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE,counters:c[M.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE],isTracking:m,onAdd:function(){return e.handleAddNewEvent(M.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE)}}),d.default.createElement(N.default,{actionable:g,type:M.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE,counters:c[M.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE],isTracking:m,onAdd:function(){return e.handleAddNewEvent(M.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE)}})))),d.default.createElement("div",{style:{height:"20px"}}),d.default.createElement(I.default,{metadata:h,isTracking:u.state.status===B.default.ACTIVE,events:r,scenario:a,onUpdate:this.handleEventUpdate,onDuplicate:this.handleEventDuplicate,onRemove:this.handleEventRemove,onDisable:this.handleEventDisable,locations:o,groupByType:p,isAdjusted:_,activeUser:f}),d.default.createElement(y.Grid,null,d.default.createElement(y.Row,null,d.default.createElement(y.Col,{offset:1,width:10},d.default.createElement("div",{className:"scenario-events-control-buttons__wrapper"},d.default.createElement(R.default,{label:"Cancel",className:"secondary-button",onClick:function(){return e.props.push("/studies/"+i+"/scenarios/"+l+"/cohorts/"+n)}}),d.default.createElement(R.default,{disabled:!this.props.eventsAreValid,label:"Apply",onClick:this.handleSubmit}))))))}}]),t}(u.Component);G.defaultProps={events:[],scenario:null,cohort:null,allEvents:[],eventsAreValid:!1},G.propTypes={studyId:f.default.number.isRequired,scenarioId:f.default.number.isRequired,events:f.default.array,getScenarioCohortEvents:f.default.func.isRequired,push:f.default.func.isRequired,addNewEvent:f.default.func.isRequired,updateEvent:f.default.func.isRequired,locations:f.default.array.isRequired,getPlatformRegions:f.default.func.isRequired,getPlainStudy:f.default.func.isRequired,duplicateEvent:f.default.func.isRequired,removeEvent:f.default.func.isRequired,study:f.default.object.isRequired,stat:f.default.object.isRequired,allEvents:f.default.array,eventsAreValid:f.default.bool,getScenario:f.default.func.isRequired,scenario:f.default.object,applyScenarioCohortEventsChanges:f.default.func.isRequired,activeUser:f.default.object.isRequired,cohortId:f.default.number.isRequired,cohort:f.default.object,sortEventsByStartDate:f.default.func.isRequired,toggleGroupEventsByType:f.default.func.isRequired,groupByType:f.default.bool.isRequired,disableEvent:f.default.func.isRequired};var Y={getScenarioCohortEvents:D.getScenarioCohortEvents,addNewEvent:D.addNewEvent,updateEvent:D.updateEvent,duplicateEvent:D.duplicateEvent,removeEvent:D.removeEvent,getPlatformRegions:P.getPlatformRegions,getPlainStudy:L.getPlainStudy,getScenario:F.getScenario,applyScenarioCohortEventsChanges:D.applyScenarioCohortEventsChanges,sortEventsByStartDate:D.sortEventsByStartDate,toggleGroupEventsByType:D.toggleGroupEventsByType,disableEvent:D.disableEvent,push:h.push};t.default=(0,p.connect)(o,Y)(G)},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.areEventsValid=t.getEventsStatistics=t.getAvailableLocations=t.getEvents=t.getScenarioFromStore=t.getEventsFromStore=void 0;var r=a(47),i=a(77),l=a(46),o=t.getEventsFromStore=function(e,t){return e.events[t.match.params.scenarioId]||[]},s=t.getScenarioFromStore=function(e,t){return e.scenarios[t.match.params.scenarioId]||{}},u=function(e,t){return t.match.params.cohortId},d=t.getEvents=(0,r.createSelector)([o,s,u],function(e,t,a){var n=t.cohorts?t.cohorts.find(function(e){return e.id===+a}):{},r=e.filter(function(e){return e.state!==l.EVENT_STATE.DELETED});return r.forEach(function(e){e.isValid=(0,i.validateByType)(e,t,n)}),r});t.getAvailableLocations=function(e){return e.platform.regions},t.getEventsStatistics=(0,r.createSelector)(d,function(e){var t;return e.reduce(function(e,t){if(!t.isValid)return e;switch(t.status){case l.EVENT_STATUS.ACTIVE:e[t.event_type].inProgress+=1;break;case l.EVENT_STATUS.PENDING:e[t.event_type].pending+=1;break;case l.EVENT_STATUS.COMPLETED:default:e[t.event_type].completed+=1}return e[t.event_type].total+=1,e},(t={},n(t,l.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),n(t,l.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS,{inProgress:0,pending:0,completed:0,total:0}),n(t,l.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),n(t,l.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),t))}),t.areEventsValid=(0,r.createSelector)(o,function(e){var t=e.filter(function(e){return!e.isValid}),a=e.filter(function(e){return e.state});return 0===t.length&&a.length>0})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1022),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var a=t.match.params,n=a.scenarioId,r=a.id,i=a.cohortId,l=(0,ee.getStudyData)(e,t),o=(0,ee.getScenarioData)(e,t),s=o.cohorts.find(function(e){return e.id===+i})||{};return{scenarioId:n,scenario:o,studyId:r,cohortId:i,cohort:s,study:l,isTrackingEventsPanel:function(){return l.state.status===re.default.ACTIVE&&(o.status!==te.SCENARIO_STATUS.OPEN||null!==o.source_scenario_id)},activeUser:e.auth.user,platformRegions:e.platform.regions,clipboardEmpty:!e.scenarios.clipboard||0===Object.keys(e.scenarios.clipboard).length}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),h=n(p),v=a(7),m=a(2),_=n(m),E=a(19),g=a(129),y=n(g),S=a(16),b=a(232),C=n(b),O=a(17),T=a(238),R=n(T),A=a(133),I=n(A),w=a(324),N=n(w),D=a(132),P=n(D),L=a(464),M=n(L),k=a(475),x=n(k),j=a(83),F=n(j),U=a(881),V=n(U),B=a(239),H=n(B),G=a(329),Y=n(G),z=a(58),W=n(z),q=a(118),K=n(q),X=a(33),Z=a(8),J=a(35),Q=a(52),$=a(77),ee=a(63),te=a(10),ae=n(te),ne=a(20),re=n(ne);a(2227);var ie=(0,y.default)(Q.getStudyParamsWarning),le=(0,y.default)(Q.getFilteredData),oe=(0,y.default)(Q.getFilteredTableData),se=(0,y.default)(Q.getTableHeaderPosition),ue=(0,y.default)(Q.getGlobalRollupData),de=function(e){function t(e){i(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));ce.call(a);var n=(0,J.getParamItemStorage)("fpo-ui-settings","chartState","collapsed"),r=(0,J.getParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter")||{overallocated:!1,actualData:!0};return a.state={filter:{name:ae.default,type:te.ROLLUP,subject:null},historicalEnabled:!1,historicalFilter:"INDICATION",currentEvents:[],currentLocation:"",currentRegion:"",eventsPanelOpen:!1,isMultiEditing:!1,multiEditingValues:{},isShowApplyingEditsDialog:!1,multiRegionsData:{},chartCollapsed:n,tableFilter:r},a.alertsHeight=44,a.alertsPosition=149,a.historicalBenchmarkHeight=50,a.historicalBenchmarkPosition=n?204:412,a.tableFilterPosition=n?204:412,a.locationsFilterPosition=149,a.tableHeaderPosition=n?254:460,a.miniChartPosition=208,a.handleFilterSelect=a.handleFilterSelect.bind(a),a.onMultiEditingCancel=a.onMultiEditingCancel.bind(a),a.setHistoricalStatus=a.setHistoricalStatus.bind(a),a.setHistoricalFilter=a.setHistoricalFilter.bind(a),a.handleDeleteRegion=a.handleDeleteRegion.bind(a),a.handleDeleteCountry=a.handleDeleteCountry.bind(a),a.handleAddRegion=a.handleAddRegion.bind(a),a.handleAddCountry=a.handleAddCountry.bind(a),a.handleMultiEditingClick=a.handleMultiEditingClick.bind(a),a.handleCloseApplyingEditsDialog=a.handleCloseApplyingEditsDialog.bind(a),a.handleSubmitApplyingEditsDialog=a.handleSubmitApplyingEditsDialog.bind(a),a.closeEventsPanel=a.closeEventsPanel.bind(a),a.toggleEvents=a.toggleEvents.bind(a),a.multiCheck=a.multiCheck.bind(a),a.saveMultiColumnData=a.saveMultiColumnData.bind(a),a.onMultiEditingApply=a.onMultiEditingApply.bind(a),a.onMultiEditingCellChange=a.onMultiEditingCellChange.bind(a),a.resetCountryData=a.resetCountryData.bind(a),a}return o(t,e),d(t,[{key:"componentDidMount",value:function(){var e={root:null,rootMargin:"80px 0px 0px 0px",threshold:.75},t=this.handleMiniChart;this.observer=new IntersectionObserver(t,e),this.chartContainer&&this.observer.observe(this.chartContainer)}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.filter,a=!1;e.cohort&&e.cohort.fullData&&(t.type===te.REGION?a=e.cohort.fullData.find(function(e){return e.region_name===t.name}):t.type===te.COUNTRY&&(a=e.cohort.fullData.find(function(e){return e.country_name===t.name}))),a&&this.props.scenario.id===e.scenario.id||this.setState({filter:{name:ae.default,type:te.ROLLUP,subject:null}})}},{key:"componentDidUpdate",value:function(){this.chartContainer&&this.observer.observe(this.chartContainer)}},{key:"componentWillUnmount",value:function(){this.chartContainer&&this.observer.unobserve(this.chartContainer)}},{key:"onMultiEditingCancel",value:function(){this.setState({isMultiEditing:!1,multiEditingValues:{},multiRegionsData:{}})}},{key:"onMultiEditingApply",value:function(){(0,J.getParamItemStorage)("applyingEditsMultiColumnDialog",this.props.activeUser.id,"applyingEditsDialogCheckedClose")?this.saveMultiColumnData():this.setState({isShowApplyingEditsDialog:!0})}},{key:"onMultiEditingCellChange",value:function(e){this.setState({multiEditingValues:u({},this.state.multiEditingValues,e)})}},{key:"getCurrentEvents",value:function(e,t){var a=this.props,n=a.study,r=a.scenario,i=a.cohort,l=[];return(n.state.status===re.default.ACTIVE&&r.status!==te.SCENARIO_STATUS.APPROVED&&null!==r.source_scenario_id?i.adjusted_events:i.events).forEach(function(a,n,r){return a.locations.forEach(function(a){a.name===e&&a.countries.forEach(function(e){e.name===t&&l.push(r[n])})})}),l}},{key:"setHistoricalStatus",value:function(e){this.setState({historicalEnabled:e})}},{key:"setHistoricalFilter",value:function(e){this.setState({historicalFilter:e})}},{key:"handleCloseApplyingEditsDialog",value:function(){this.setState({isShowApplyingEditsDialog:!1})}},{key:"handleSubmitApplyingEditsDialog",value:function(e){e&&(0,J.addToStorage)("applyingEditsMultiColumnDialog",{id:this.props.activeUser.id,applyingEditsDialogCheckedClose:!0}),this.saveMultiColumnData()}},{key:"saveMultiColumnData",value:function(){var e=this.props,t=e.scenario,a=e.cohort,n=this.state,r=n.multiRegionsData,i=n.multiEditingValues,l=a.fullData.filter(function(e){return"country"===e.type}).reduce(function(e,t){var a=e,n=r[t.region_name];return n&&n.includes(t.country_name)&&(a[t.country_id]=Object.keys(i).reduce(function(e,a){var n=i[a],r=t[a];return e.push({fieldName:a,newValue:null!==n&&void 0!==n&&""!==n?n:null,oldValue:void 0!==r?r:null}),e},[])),a},{});this.props.changeCohortCountriesData(t.id,a.id,l),this.setState({isMultiEditing:!1,multiEditingValues:{},multiRegionsData:{},isShowApplyingEditsDialog:!1})}},{key:"handleAddCountry",value:function(e,t,a){var n=this,r=this.props,i=r.scenario,l=r.cohort,o=this.props.platformRegions.find(function(e){return e.name===t}),s=o.countries.find(function(t){return t.name===e});this.props.getParametersByCohortAndCountry(this.props.study.id,l.id,s?s.id:null,t).then(function(r){var s=null!==i.source_scenario_id,u=(0,Z.getNewCountryObject)(e,t,a,1===o.countries.length,s);r&&Object.keys(r).length>0&&(u=(0,Z.mergeCountryParameters)(l,r,u,s,!0)),n.props.addCohortCountry(i.id,l.id,u)}).catch(function(){var r=null!==i.source_scenario_id,s=(0,Z.getNewCountryObject)(e,t,a,1===o.countries.length,r);n.props.addCohortCountry(i.id,l.id,s)})}},{key:"handleAddRegion",value:function(e,t,a){var n=this.props.platformRegions.find(function(e){return e.name===a}),r="Unspecified country";1===n.countries.length&&(r=n.countries[0].name),this.handleAddCountry(r,a,a)}},{key:"handleDeleteRegion",value:function(e,t,a){var n=this.props,r=n.cohort,i=n.platformRegions,l=i.find(function(e){return e.name===a});this.props.deleteCohortCountry(e,r.id,{regionId:t,regionName:l&&l.name})}},{key:"handleDeleteCountry",value:function(e,t,a,n){var r=this.props,i=r.cohort,l=r.platformRegions,o=l.find(function(e){return e.name===n});this.props.deleteCohortCountry(e,i.id,{countryName:t,regionId:a,regionName:o&&o.name})}},{key:"toggleEvents",value:function(e){e.stopPropagation();var t=e.currentTarget.dataset.region,a=e.currentTarget.dataset.loc,n=this.state,r=n.currentRegion,i=n.currentLocation;if(t&&a&&t===r&&a===i)return void this.setState({eventsPanelOpen:!1,currentRegion:"",currentLocation:"",currentEvents:[]});this.setState({eventsPanelOpen:!0,currentRegion:t,currentLocation:a,currentEvents:(0,$.sortEventsByField)(this.getCurrentEvents(t,a),"start_date","ASC",!0)})}},{key:"closeEventsPanel",value:function(){this.setState({eventsPanelOpen:!1})}},{key:"handleFilterSelect",value:function(e){this.setState({filter:e,isMultiEditing:!1,multiEditingValues:{},multiRegionsData:{}})}},{key:"multiCheck",value:function(e,t,a,n){var i=function(e){var n=Object.assign({},e);return e[a]?delete n[a]:delete n[t],n},l=Object.assign({},this.state.multiRegionsData),o={};return e?(o=a?Object.assign({},l,r({},a,l[a]&&!l[a].includes(t)?l[a].concat([t]):[t])):Object.assign({},l,r({},t,n[0])),this.setState({multiRegionsData:o})):(a?l[a].filter(function(e){return e!==t}):[]).length?this.setState({multiRegionsData:Object.assign({},l,r({},a,l[a].filter(function(e){return e!==t})))}):(i(l),this.setState({multiRegionsData:i(l)})),o}},{key:"handleMultiEditingClick",value:function(){var e={};this.props.cohort.fullData.forEach(function(t){var a=t.type,n=t.location,r=t.region_name,i=t.country_name;"region"!==a||e[n]||(e[n]=[]),"country"===a&&e[r].push(i)}),this.setState({isMultiEditing:!0,multiEditingValues:{},multiRegionsData:e})}},{key:"resetCountryData",value:function(e,t){var a=this.props,n=a.scenario,r=a.cohort;this.props.revertCohortCountryData(n.id,r.id,e,t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.scenario,n=t.study,r=t.cohort,i=t.platformRegions,l=t.activeUser,o=t.isTrackingEventsPanel,s=this.state,d=s.filter,c=s.historicalEnabled,p=s.isMultiEditing,h=s.multiEditingValues,v=s.tableFilter;if(r&&null===r.fp||!a)return null;var m=n.state.status===re.default.ACTIVE,E=(0,Z.isEditableScenario)(a,l,n)&&(n.state.status===re.default.PLANNED||m&&null!==a.source_scenario_id||null===n.state.status)&&!p,g=le(r.fullData,d),y=void 0!==g.actual_overallocation&&0!==g.actual_overallocation,S=g&&g.ignore_aggregation,b=ue(r.fullData),T=a.aggregatedGlobalData||{},w=oe(r.fullData,b,d,p,h),D=ie(n,a),L=a.cohorts.filter(function(e){var t=e.fullData[0].curves;return 0!==t[0].length&&0!==t[1].length&&0!==t[2].length}),k=L.length!==a.cohorts.length||D.showStudyParamsWarning,j=se(this.tableHeaderPosition,k||y,this.alertsHeight);return f.default.createElement("div",{className:(0,_.default)("cohort-scenario-container",{"show-alert":k,overallocated:y})},k&&!D.showStudyParamsWarning&&f.default.createElement(F.default,{style:{top:this.alertsPosition+"px"}},f.default.createElement("div",{className:"cohorts-alerts-container"},f.default.createElement(O.Grid,null,f.default.createElement(O.Row,null,f.default.createElement(O.Col,{offset:1,width:11},f.default.createElement(P.default,{isShown:!0,title:"",status:"info",className:"cohorts-alert"},"There are missing parameters in some cohorts. Go to individual cohort\n                    tabs and enter the relevant values.")))))),y&&f.default.createElement(V.default,{topOffset:this.alertsPosition,type:g.type,isRegionCountry:g.isRegionCountry,overallocation:g.actual_overallocation,location:g.location,originalLpft:g.original_f_lpft}),D.showStudyParamsWarning&&f.default.createElement(F.default,{style:{top:this.alertsPosition+"px",zIndex:4}},f.default.createElement("div",{className:(0,_.default)("cohorts-alerts-container")},f.default.createElement(O.Grid,null,f.default.createElement(O.Row,null,f.default.createElement(O.Col,{offset:1,width:11},f.default.createElement(H.default,{status:a.status,study:n,scenario:a,data:D,studyId:n.id,scenarioId:a.id})))))),f.default.createElement(F.default,{key:k||y?this.locationsFilterPosition+this.alertsHeight:this.locationsFilterPosition,style:{top:(k||y?this.locationsFilterPosition+this.alertsHeight:this.locationsFilterPosition)+"px",zIndex:4}},f.default.createElement("div",{className:"filters-container"},f.default.createElement(O.Grid,null,f.default.createElement(O.Row,null,f.default.createElement(O.Col,{offset:1,width:11},f.default.createElement(W.default,null,f.default.createElement(C.default,{activeFilter:d,data:r.fullData,platformRegions:i,onFilterSelect:this.handleFilterSelect}))))))),f.default.createElement("div",null,f.default.createElement(O.Grid,null,f.default.createElement(O.Row,null,f.default.createElement(O.Col,{offset:8,width:4},f.default.createElement(x.default,{onClose:this.closeEventsPanel,currentLocation:this.state.currentLocation,currentRegion:this.state.currentRegion,currentEvents:this.state.currentEvents,eventTrackingStatus:o(),expanded:this.state.eventsPanelOpen}))))),f.default.createElement("div",null,f.default.createElement(O.Grid,null,f.default.createElement(O.Row,{className:"scenario-highlights-bar"},f.default.createElement(W.default,null,f.default.createElement(R.default,{globalData:T,target:null!==a.source_scenario_id?g.lpft:a.end_date,predicted:g.lpft,fpfv_lpfv:g.fpfv_lpfv,fpp_fpfv:g.fpp_fpfv,actual_date:g.actual_date,startDate:r.fp,isCohortView:!0,actual_fpfv_lpfv:g.actual_fpfv_lpfv,actual_fpp_fpfv:g.actual_fpp_fpfv,actual_f_lpft:g.actual_f_lpft,adjusted_fpfv_lpfv:g.adjusted_fpfv_lpfv,adjusted_fpp_fpfv:g.adjusted_fpp_fpfv,adjustedLpft:g.adjusted_lpft,isIgnored:S,showAdjusted:null!==a.source_scenario_id,showActual:(a.status===te.SCENARIO_STATUS.APPROVED||a.status===te.SCENARIO_STATUS.PREV_APPROVED||null!==a.source_scenario_id)&&"ACTIVE"===n.state.status,isExactCopy:a.exact_copy})),f.default.createElement(O.Col,{width:1},f.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"flex-end"}},f.default.createElement(A.ChartCollapseControl,{isCollapsed:this.state.chartCollapsed,onOptionSelect:this.handleChartCollapse})))))),!this.state.chartCollapsed&&f.default.createElement(K.default,{scenario:r,isImpact:!1,studyStatus:n.state.status,cohortName:{shortName:"C"+(a.cohorts.findIndex(function(e){return e.name===r.name})+1),fullName:r.name},data:g},f.default.createElement("div",{className:"minimised-chart-container exclude-from-screenshot",style:{top:(k||y?this.miniChartPosition+this.alertsHeight:this.miniChartPosition)+"px",width:"100%"},ref:function(t){e.miniChartContainer=t}},f.default.createElement(O.Grid,null,f.default.createElement(O.Row,null,f.default.createElement(O.Col,{offset:1,width:11},f.default.createElement("div",{className:"minimised-chart"},f.default.createElement(W.default,null,f.default.createElement(A.MinimisedEnrolmentChart,null))))))),f.default.createElement(O.Grid,null,f.default.createElement(O.Row,null,f.default.createElement(O.Col,{className:"highlights-bar-separator",offset:1},f.default.createElement("div",null))),f.default.createElement(O.Row,null,f.default.createElement(O.Col,{offset:1,width:11},f.default.createElement("div",{className:"full-chart chart-container",ref:function(t){e.chartContainer=t}},f.default.createElement(W.default,null,f.default.createElement(I.default,null))))))),f.default.createElement(O.Grid,null,(!m||a.status===te.SCENARIO_STATUS.OPEN&&null===a.source_scenario_id)&&f.default.createElement(F.default,{className:"exclude-from-screenshot",style:{top:(k||y?this.historicalBenchmarkPosition+this.alertsHeight:this.historicalBenchmarkPosition)+"px",backgroundColor:"white"}},f.default.createElement(O.Grid,{noGaps:!0},f.default.createElement(O.Row,null,f.default.createElement(O.Col,{offset:1,width:11},f.default.createElement(W.default,null,f.default.createElement(M.default,{isCohortView:!0,onCloseDialog:this.handleCloseApplyingEditsDialog,onSubmitDialog:this.handleSubmitApplyingEditsDialog,enableMultiedit:d.type===te.ROLLUP&&(n.state.status===re.default.PLANNED||null===n.state.status&&n.state.isOwner)&&(n.state.isOwner||"FPO_ADMIN"===l.role)&&E,isShowApplyingEditsDialog:this.state.isShowApplyingEditsDialog,hasTrials:n.historical_references.length>0,uncertaintyLevel:"N/A",isActive:c,isMultiEditing:p,onFilterChange:this.setHistoricalFilter,onActiveChange:this.setHistoricalStatus,onEdit:this.handleMultiEditingClick})))))),m&&f.default.createElement(F.default,{key:k||y?this.tableFilterPosition+this.alertsHeight:this.tableFilterPosition,className:"exclude-from-screenshot",style:{top:(k||y?this.tableFilterPosition+this.alertsHeight:this.tableFilterPosition)+"px",backgroundColor:"white",height:"50px",zIndex:2}},f.default.createElement(O.Grid,{noGaps:!0},f.default.createElement(O.Row,null,f.default.createElement(O.Col,{offset:1,width:11},f.default.createElement("div",{className:"table-filter"},f.default.createElement(W.default,null,f.default.createElement(Y.default,{showOverallocation:!!b.overallocatedData||!!b.adjusted_overallocatedData,onChange:this.handleTableFilterChange,actualData:v&&v.actualData,overallocated:v&&v.overallocated}))))))),f.default.createElement(O.Row,{className:"exclude-from-screenshot"},f.default.createElement(O.Col,{offset:1,width:11},f.default.createElement(W.default,null,f.default.createElement(N.default,{data:w,scenario:u({},r,{exact_copy:a.exact_copy}),study:n,isCohortView:!0,tableFilter:v,historicalFilter:this.state.historicalFilter,navigateToViewSites:this.props.navigateToViewSites,platformRegions:i,tableHeaderPosition:j,onInvalidData:function(){return e.props.changeCohortEnableSave(!1)},isEditable:E&&!c,isHistoricalDataViewEnabled:c,isAdjusted:null!==a.source_scenario_id,isTracking:m&&(a.status===te.SCENARIO_STATUS.APPROVED||null!==a.source_scenario_id||a.status===te.SCENARIO_STATUS.PREV_APPROVED),onDataChange:function(t,n){e.props.changeCohortCountryData(a.id,r.id,t,n)},batchUpdate:function(t,n){var i=n.map(function(e){return{fieldName:e.name,newValue:e.value,oldValue:e.value}});e.props.changeCohortCountryData(a.id,r.id,t,i)},handleAddRegion:this.handleAddRegion,handleAddCountry:this.handleAddCountry,handleDeleteRegion:function(t,a){return e.handleDeleteRegion(e.props.scenario.id,t,a)},handleDeleteCountry:function(t,a,n){return e.handleDeleteCountry(e.props.scenario.id,t,a,n)},onToggleEvents:this.toggleEvents,resetCountryData:this.resetCountryData,isMultiEditing:p,multiEditType:"edit",multiRegionsData:this.state.multiRegionsData,onMultiCheck:this.multiCheck,onMultiEditingCancel:this.onMultiEditingCancel,onMultiEditingApply:this.onMultiEditingApply,onMultiEditingCellChange:this.onMultiEditingCellChange,onCopy:this.onCopy,onPaste:this.onPaste,clipboardEmpty:this.props.clipboardEmpty}))))))}}]),t}(c.PureComponent),ce=function(){var e=this;this.onCopy=function(t){var a=e.props,n=a.scenario,r=a.cohort;e.props.onCopy(n.id,r.id,t)},this.onPaste=function(t){var a=e.props,n=a.scenario,r=a.cohort;e.props.onPaste(n.id,r.id,t)},this.handleMiniChart=function(t){t.forEach(function(t){t.boundingClientRect.top<=-150&&!e.state.fixedChart?(e.miniChartContainer.style.visibility="visible",e.chartContainer.style.visibility="hidden",e.setState({fixedChart:!0})):e.state.fixedChart&&(e.miniChartContainer.style.visibility="hidden",e.chartContainer.style.visibility="visible",e.setState({fixedChart:!1}))})},this.handleChartCollapse=function(t){t?(e.historicalBenchmarkPosition=204,e.tableHeaderPosition=254,e.tableFilterPosition=204):(e.historicalBenchmarkPosition=412,e.tableHeaderPosition=460,e.tableFilterPosition=412),null===e.state.chartCollapsed?(0,J.addToStorage)("fpo-ui-settings",{id:"chartState",selected:t}):(0,J.setParamItemStorage)("fpo-ui-settings","chartState","collapsed",t),e.setState({chartCollapsed:t})},this.handleTableFilterChange=function(t){var a=u({},e.state.tableFilter,r({},t,!e.state.tableFilter[t]));(0,J.getParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter")?(0,J.setParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter",a):(0,J.addToStorage)("fpo-ui-settings",{id:"tableFilter",tableFilter:a}),e.setState({tableFilter:a})}};de.defaultProps={clipboardEmpty:!0},de.propTypes={scenario:h.default.object.isRequired,study:h.default.object.isRequired,platformRegions:h.default.array.isRequired,cohort:h.default.object.isRequired,changeCohortCountryData:h.default.func.isRequired,changeCohortEnableSave:h.default.func.isRequired,activeUser:h.default.object.isRequired,navigateToViewSites:h.default.func.isRequired,addCohortCountry:h.default.func.isRequired,deleteCohortCountry:h.default.func.isRequired,isTrackingEventsPanel:h.default.func.isRequired,changeCohortCountriesData:h.default.func.isRequired,getParametersByCohortAndCountry:h.default.func.isRequired,revertCohortCountryData:h.default.func.isRequired,onCopy:h.default.func.isRequired,onPaste:h.default.func.isRequired,clipboardEmpty:h.default.bool};var fe={changeCohortCountryData:X.changeCohortCountryData,changeCohortEnableSave:X.changeCohortEnableSave,addCohortCountry:X.addCohortCountry,deleteCohortCountry:X.deleteCohortCountry,navigateToViewSites:function(e,t,a){return(0,E.push)("/studies/"+e+"/scenarios/"+t+"/sites/"+a)},changeCohortCountriesData:X.changeCohortCountriesData,getParametersByCohortAndCountry:X.getParametersByCohortAndCountry,revertCohortCountryData:X.revertCohortCountryData,onCopy:X.onCopy,onPaste:X.onPaste};t.default=(0,S.withRouter)((0,v.connect)(s,fe)(de))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1025),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var a=t.match.params,n=a.scenarioId,i=a.id,l=(0,y.matchPath)(t.location.pathname,{path:"/studies/:id/scenarios/:scenarioId/cohorts/:cohortId"}),o=void 0;l&&(o=l.params.cohortId);var s=e.auth.user,u=e.scenarios[n],d=e.errors.sessionExpired||e.errors.internalServer,c=(0,oe.getParamItemStorage)("fpo-dirty-data",s.id+"-"+i+"-"+n,"values"),f=null;if(c&&c.valuesToSave){var p=(0,ne.getDateFields)();f=c.valuesToSave.map(function(e){var t=e;return t.fp=(0,ne.getMomentDate)(t.fp),p.has(t.fieldName)&&(t.fieldValue=(0,ne.getMomentDate)(t.fieldValue),t.oldValue=(0,ne.getMomentDate)(t.oldValue)),t})}var h=null;return c&&c.deleteCountries&&(h=[].concat(r(c.deleteCountries))),{dataToRestore:f||h?{valuesToSave:f,deleteCountries:h}:null,requirePageRefresh:d,scenarioId:n,enableSave:e.scenarios.enableSave,dataToSave:e.scenarios.dataToSave,deleteCountries:e.scenarios.deleteCountries,hasInvalidCohorts:!!u&&u.hasInvalidCohorts,scenario:u,studyId:i,aggregatedGlobalData:u?u.aggregatedGlobalData:{},cohortId:+o,study:(0,fe.getStudyData)(e,t),platformRegions:e.platform.regions,activeUser:e.auth.user,notes:(0,pe.getScenarioNotesFromStore)(e,n).length,undoStack:e.scenarios.past?e.scenarios.past.length:0,redoStack:e.scenarios.future?e.scenarios.future.length:0,studies:e.studies.studies}}function u(e,t){return{addScenarioNote:function(t,a){return e((0,ae.addScenarioNote)(t,a))},getScenarioNotes:function(t,a){return e((0,ae.getScenarioNotes)(t,a))},duplicateScenario:function(t,a,n,r,i,l){return e((0,$.duplicateScenario)(t,a,n,r,i,l))},createAdjustmentScenario:function(t,a,n,r,i){return e((0,$.createAdjustmentScenario)(t,a,n,r,i))},approveScenario:function(t,a,n){return e((0,$.approveScenario)(t,a,n))},saveOverrides:function(t,a,n){return e((0,$.saveOverrides)(t,a,n))},getScenario:function(t,a){return e((0,$.getScenario)(t,a))},getPlainStudy:function(t){return e((0,te.getPlainStudy)(t))},getPlatformRegions:function(){return e((0,ee.getPlatformRegions)())},backToStudy:function(){return e((0,g.push)("/studies/"+t.match.params.id))},goToScenario:function(t,a){return e((0,g.push)("/studies/"+t+"/scenarios/"+a))},goToScenarioEdit:function(t,a){return e((0,g.push)("/studies/"+t+"/scenarios/"+a+"/edit?cohorts=true"))},goToScenarioWithCohorts:function(t,a){return e((0,g.push)("/studies/"+t+"/scenarios/"+a+"/cohorts"))},navigateToEvents:function(t,a,n){return e((0,g.push)("/studies/"+t+"/scenarios/"+a+"/cohorts-events/"+n))},changeCohortEnableSave:function(t){return e((0,$.changeCohortEnableSave)(t))},removeCohortCountry:function(t,a,n){return e((0,$.removeCohortCountry)(t,a,n))},restoreUnsavedData:function(t){return e((0,$.restoreUnsavedData)(t))},resetUnsavedData:function(){return e((0,$.resetUnsavedData)())},getScenarioViewerData:function(t,a){return e((0,$.getScenarioViewerData)(t,a))},undoLastAction:function(t){return e((0,$.undoLastAction)(t))},redoLastAction:function(t){return e((0,$.redoLastAction)(t))},getStudies:function(t){return e((0,te.getStudies)(t))},createApprovedSnapshot:function(t,a,n){return e((0,$.createApprovedSnapshot)(t,a,n))}}}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a(0),p=n(f),h=a(32),v=n(h),m=a(1),_=n(m),E=a(7),g=a(19),y=a(16),S=a(2),b=n(S),C=a(278),O=n(C),T=a(107),R=a(6),A=a(17),I=a(325),w=n(I),N=a(786),D=n(N),P=a(330),L=n(P),M=a(322),k=n(M),x=a(320),j=n(x),F=a(463),U=n(F),V=a(855),B=n(V),H=a(193),G=n(H),Y=a(134),z=n(Y),W=a(83),q=n(W),K=a(165),X=n(K),Z=a(321),J=n(Z),Q=a(44),$=a(33),ee=a(108),te=a(30),ae=a(230),ne=a(8),re=a(202),ie=a(34),le=a(111),oe=a(35),se=a(55),ue=n(se),de=a(96),ce=a(52),fe=a(63),pe=a(53),he=a(10),ve=a(20),me=n(ve);a(2228);var _e=function(e){function t(e){i(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleUndoAction=function(){a.props.undoLastAction(a.props.scenarioId)},a.handleRedoAction=function(){a.props.redoLastAction(a.props.scenarioId)},a.createApprovedSnapshot=function(){var e=a.props,t=e.study,n=e.scenario;a.props.createApprovedSnapshot(t.id,n.id,(0,de.serializeScenarioData)(t,n,null))},a.handleApproveAction=function(){var e=a.props,t=e.study,n=e.scenario;a.setState({showLoader:!0},function(){a.props.approveScenario(t.id,n.id,(0,de.serializeScenarioData)(t,n,null)).then(function(){return a.setState({isApproveScenarioDialogShown:!1,stopEditMode:-1*a.state.stopEditMode,showLoader:!1})})})},a.state={notesPanelOpen:!1,isDuplicateScenarioDialogShown:!1,isApproveScenarioDialogShown:!1,isSaveChangesDialogShown:!1,isIncompleteDataDialogShown:!1,isRestoredDialogShown:!1,saveChangesActionType:void 0,showLoader:!1},a.exportToExcel=a.exportToExcel.bind(a),a.toggleNotes=a.toggleNotes.bind(a),a.handleDuplicateScenarioDialogClose=a.handleDuplicateScenarioDialogClose.bind(a),a.handleDuplicateScenarioDialogSubmit=a.handleDuplicateScenarioDialogSubmit.bind(a),a.handleDuplicateScenarioClick=a.handleDuplicateScenarioClick.bind(a),a.navigateToEvents=a.navigateToEvents.bind(a),a.handlerEditScenarioClick=a.handlerEditScenarioClick.bind(a),a.handlerApproveScenario=a.handlerApproveScenario.bind(a),a.handleSaveAction=(0,O.default)(a.handleSaveAction.bind(a),2e3),a.handleUnsavedAction=a.handleUnsavedAction.bind(a),a.handleSaveData=a.handleSaveData.bind(a),a.handleSaveDataDialogClose=a.handleSaveDataDialogClose.bind(a),a.applyRestoredData=a.applyRestoredData.bind(a),a}return o(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scenarioId,a=e.studyId;this.controller=new AbortController;var n=this.controller.signal;this.props.studies||this.props.getStudies(n),this.props.getScenarioViewerData(a,t)}},{key:"componentWillReceiveProps",value:function(e){e.scenarioId!==this.props.scenarioId&&(this.props.getScenarioViewerData(e.studyId,e.scenarioId),this.props.getScenarioNotes(e.scenarioId,this.controller.signal));var t=e.deleteCountries,a=e.dataToSave;e.requirePageRefresh&&(a&&a.length>0||t&&t.length>0)&&((0,oe.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"-"+this.props.studyId+"-"+this.props.scenarioId),(0,oe.addToStorage)("fpo-dirty-data",{id:e.activeUser.id+"-"+e.studyId+"-"+e.scenarioId,values:{valuesToSave:a,deleteCountries:t}})),this.setState({isRestoredDialogShown:!!e.dataToRestore})}},{key:"componentWillUnmount",value:function(){this.props.resetUnsavedData(),this.controller.abort()}},{key:"exportToExcel",value:function(){var e=this.props,t=e.study,a=e.scenario;(0,re.exportToExcelCohorts)(t,a)}},{key:"toggleNotes",value:function(){this.setState({notesPanelOpen:!this.state.notesPanelOpen})}},{key:"handleSaveData",value:function(){var e=this.props,t=e.scenario,a=e.study,n=a.state.status===me.default.ACTIVE&&t.status!==he.SCENARIO_STATUS.APPROVED&&null!==t.source_scenario_id,i=[];n?t.cohorts.forEach(function(e){var t=e.fullData.filter(function(e){return e.type.toUpperCase()===he.COUNTRY}).reduce(function(e,t){if(t.adjusted_invalids&&t.adjusted_invalids.length>0){if(t.invalidFields&&1===t.invalidFields.length&&"start_date"===t.invalidFields[0])return e;if(t.adjusted_invalids&&1===t.adjusted_invalids.length&&"start_date"===t.adjusted_invalids[0])return e;e.push(t.id)}return e},[]);i=[].concat(r(i),r(t))}):t.cohorts.forEach(function(e){var t=e.fullData.filter(function(e){return e.type.toUpperCase()===he.COUNTRY}).reduce(function(e,t){if(t.invalidFields&&t.invalidFields.length>0){if(1===t.invalidFields.length&&"start_date"===t.invalidFields[0])return e;e.push(t.id)}return e},[]);i=[].concat(r(i),r(t))}),i.length>0?this.setState({isIncompleteDataDialogShown:!0}):this.handleSaveAction()}},{key:"handleSaveDataDialogClose",value:function(){this.setState({isIncompleteDataDialogShown:!1})}},{key:"handleDuplicateScenarioClick",value:function(){this.setState({isDuplicateScenarioDialogShown:!0})}},{key:"handleDuplicateScenarioDialogClose",value:function(){this.setState({isDuplicateScenarioDialogShown:!1})}},{key:"handleDuplicateScenarioDialogSubmit",value:function(e,t,a,n,r){var i=this,l=this.props,o=l.studyId,s=l.scenario,u=l.goToScenario,d=l.goToScenarioWithCohorts,c=l.study,f=(s&&s.status===he.SCENARIO_STATUS.APPROVED||s&&s.status===he.SCENARIO_STATUS.PREV_APPROVED)&&c.state.status===me.default.ACTIVE;new Promise(function(l){if(r){var o=(0,le.getCohortsFpOffsets)(s);return l(i.props.createAdjustmentScenario(s.id,e,o,a,n))}return l(i.props.duplicateScenario(s.id,e,t,a,n,f))}).then(function(e){var a=e.id;s.cohorts.length>0?d(t||o,a):u(t||o,a)}),this.handleDuplicateScenarioDialogClose()}},{key:"navigateToEvents",value:function(){this.props.navigateToEvents(this.props.studyId,this.props.scenarioId,this.props.cohortId)}},{key:"handlerEditScenarioClick",value:function(){var e=this.props,t=e.studyId,a=e.scenarioId;(0,e.goToScenarioEdit)(t,a)}},{key:"handlerApproveScenario",value:function(){this.setState({isApproveScenarioDialogShown:!0})}},{key:"handleSaveAction",value:function(){var e=this,t=this.props,a=t.dataToSave,n=t.scenarioId,r=t.cohortId,i=t.platformRegions,l=t.deleteCountries,o=l.reduce(function(e,t){return e[t.cohort_id]?e[t.cohort_id].push(t.country_id):e[t.cohort_id]=[t.country_id],e},{}),s=a.filter(function(e){return!o[e.cohortId]||!o[e.cohortId].includes(e.countryId)});this.props.changeCohortEnableSave(!1);var u=(0,ne.prepareDataToSaveOverrides)(s,i,!0);return new Promise(function(t){Object.keys(o).length>0&&t(Promise.all(Object.keys(o).map(function(t){return e.props.removeCohortCountry(e.props.scenario.id,t,o[t])}))),t()}).then(function(){return(0,oe.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-"+e.props.scenarioId),e.props.saveOverrides(u,e.props.studyId,n,r)}).then(function(){return e.props.changeCohortEnableSave(!1)}).catch(function(){return e.props.changeCohortEnableSave(!0)}).finally(function(){e.state.isIncompleteDataDialogShown&&e.setState({isIncompleteDataDialogShown:!1})})}},{key:"handleUnsavedAction",value:function(e){this.setState({isSaveChangesDialogShown:!0,saveChangesActionType:e})}},{key:"applyRestoredData",value:function(){var e=this.props.dataToRestore;(0,oe.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"-"+this.props.studyId+"-"+this.props.scenarioId),this.props.restoreUnsavedData(d({},e,{scenario:this.props.scenario}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.scenarioId,n=t.scenario,i=t.studyId,l=t.study,o=t.platformRegions,s=t.notes,u=t.cohortId,c=t.activeUser,f=t.aggregatedGlobalData,h=t.hasInvalidCohorts,m=t.enableSave,_=t.dataToSave,E=t.requirePageRefresh,g=t.deleteCountries,S=t.studies,C=this.state,O=C.isDuplicateScenarioDialogShown,I=C.isApproveScenarioDialogShown,N=C.isIncompleteDataDialogShown,P=C.showLoader;if(!(n&&l&&o.length&&S))return p.default.createElement(z.default,null);var M=(0,ue.default)(c,l,n),x=M.isEditable&&!this.state.historicalEnabled,F=M.isApprovable&&!h,V=M.isAdjusted,Y=M.isDuplicateAvailable,W=n.cohorts.find(function(e){return e.id===u}),K=0;W&&(K=(V?W.adjusted_events:W.events).length);var Z=(_.length>0||g.length>0)&&!E,$=(0,ce.getStudyParamsWarning)(l,n);n.studyParamsWarning=$;var ee=function(t){var a=[];return V?n.cohorts.forEach(function(e){var t=e.fullData.filter(function(e){return e.type.toUpperCase()===he.COUNTRY}).reduce(function(e,t){if(t.adjusted_invalids&&t.adjusted_invalids.length>0){if(1===t.adjusted_invalids.length&&"start_date"===t.adjusted_invalids[0])return e;e.push(t.id)}return e},[]);a=[].concat(r(a),r(t))}):n.cohorts.forEach(function(e){var t=e.fullData.filter(function(e){return e.type.toUpperCase()===he.COUNTRY}).reduce(function(e,t){if(t.invalidFields&&t.invalidFields.length>0){if(1===t.invalidFields.length&&"start_date"===t.invalidFields[0])return e;e.push(t.id)}return e},[]);a=[].concat(r(a),r(t))}),a.length>0&&n.status!==he.SCENARIO_STATUS.APPROVED?e.handleSaveData:Z?e.handleUnsavedAction:t},te="scenario-viewer__";return l.state.status?"ACTIVE"===l.state.status?"APPROVED"===n.status?te+="tracking--cohort-approved":n.source_scenario_id?(te="scenario-viewer__tracking--cohort-",te+=n.exact_copy?"adjusted-exact":"adjusted-weighted"):te+="tracking--cohort":te+="planning--cohort":te+="playground--cohort",p.default.createElement("div",{className:"cohorts-scenario-container screenshot-container"},p.default.createElement(T.Sidebar,null,p.default.createElement(T.Button,{className:"fpo-exit-button",height:60},p.default.createElement(y.NavLink,{to:"/"},R.Icons.HOME)),p.default.createElement(T.Separator,{height:20}),p.default.createElement(T.Button,{className:"fpo-exit-button",height:51,onClick:function(){return e.props.backToStudy()}},R.Icons.CHEVRON_LEFT),p.default.createElement(T.Separator,{height:22,noLine:!0}),p.default.createElement(T.Button,{height:56,onClick:this.toggleNotes,tooltip:"Notes"},p.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},R.Icons.NOTES,p.default.createElement("div",{className:"sup"},s>0?(0,ie.kFormatter)(s):""))),p.default.createElement(T.Button,{height:56,onClick:ee(this.navigateToEvents),actionName:he.SIDEBAR_BUTTONS.EVENT,tooltip:"Events",disabled:!u},p.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},R.Icons.EVENT,p.default.createElement("div",{className:"sup"},K>0?(0,ie.kFormatter)(K):""))),p.default.createElement(T.Separator,{height:20}),p.default.createElement(T.Button,{className:"fpo-exit-button",height:56,disabled:!this.props.undoStack,onClick:this.handleUndoAction},p.default.createElement(T.AnimatedContent,{disabled:!this.props.undoStack,tooltip:"Undo"},R.Icons.UNDO)),p.default.createElement(T.Button,{className:"fpo-exit-button flip-vertical",height:56,disabled:!this.props.redoStack,onClick:this.handleRedoAction},p.default.createElement(T.AnimatedContent,{disabled:!this.props.redoStack,tooltip:"Redo"},R.Icons.UNDO)),p.default.createElement(T.Button,{height:56,disabled:!m,onClick:this.handleSaveData,tooltip:"Save"},R.Icons.SAVE),p.default.createElement(T.Button,{height:56,tooltip:"Duplicate and edit",disabled:!Y,actionName:he.SIDEBAR_BUTTONS.DUPLICATE,onClick:ee(this.handleDuplicateScenarioClick)},R.Icons.DUPLICATE),p.default.createElement(J.default,{exportToExcel:this.exportToExcel,study:l,scenario:n,notCollapsibleChart:!u}),p.default.createElement(T.Button,{height:56,disabled:!x,tooltip:"Edit",actionName:he.SIDEBAR_BUTTONS.EDIT,onClick:ee(this.handlerEditScenarioClick)},R.Icons.EDIT),p.default.createElement(T.Separator,{height:20}),p.default.createElement(T.Button,{height:56,disabled:!0,tooltip:"Optimize scenario"},R.Icons.OPTIMISE),p.default.createElement(T.Button,{height:56,disabled:!F||!f.lpft,tooltip:"Approve scenario",actionName:he.SIDEBAR_BUTTONS.APPROVE,onClick:ee(this.handlerApproveScenario)},R.Icons.APPROVE)),p.default.createElement(A.Grid,null,p.default.createElement(A.Row,null,p.default.createElement(A.Col,{offset:8,width:4},p.default.createElement(k.default,{isEditable:!0,scenarioId:n.id,onSubmitNote:this.props.addScenarioNote,onClose:this.toggleNotes,expanded:this.state.notesPanelOpen})))),p.default.createElement(q.default,{style:{zIndex:4}},p.default.createElement("div",{ref:function(t){e.titleBar=t},className:(0,b.default)({fixed:this.fixedHeader})},p.default.createElement("div",{className:(0,b.default)("scenario__title-bar",{approved:n.status===he.SCENARIO_STATUS.APPROVED})},p.default.createElement(A.Grid,null,p.default.createElement(A.Row,{className:(0,b.default)({approved:n.status===he.SCENARIO_STATUS.APPROVED}),style:{height:"87px"}},p.default.createElement(A.Col,{offset:1,width:6},p.default.createElement(w.default,{adjusted:n.adjusted_createdAt,approvedAt:n.approvedAt,createdAt:n.createdAt,exactCopy:!!n.exact_copy,isAdjusted:V,isCohort:!!n.cohorts.length,modified:n.updated,name:n.name,originScenario:n.originScenario,status:n.status,studyId:l.study_id})),p.default.createElement(A.Col,{width:5},p.default.createElement("div",{className:"scenario-alerts-wrapper"},p.default.createElement(L.default,{scenario:n,globalData:f,study:l})))),p.default.createElement(A.Row,{className:(0,b.default)({approved:n.status===he.SCENARIO_STATUS.APPROVED}),style:{height:"62px"}},p.default.createElement(A.Col,{offset:1,width:11},p.default.createElement(D.default,{studyId:i,scenarioId:a,active:u,cohorts:n.cohorts}))))))),this.props.children,p.default.createElement(H.SaveChangesDialog,{isShown:this.state.isSaveChangesDialogShown,onSubmit:this.handleSaveAction,actionType:this.state.saveChangesActionType,callbackActions:[{type:he.SIDEBAR_BUTTONS.EVENT,action:this.navigateToEvents},{type:he.SIDEBAR_BUTTONS.DUPLICATE,action:this.handleDuplicateScenarioClick},{type:he.SIDEBAR_BUTTONS.EXPORT,action:this.exportToExcel},{type:he.SIDEBAR_BUTTONS.EDIT,action:this.handlerEditScenarioClick},{type:he.SIDEBAR_BUTTONS.APPROVE,action:this.handlerApproveScenario}],onClose:function(){return e.setState({isSaveChangesDialogShown:!1})}}),p.default.createElement(B.default,{isShown:N,onClose:this.handleSaveDataDialogClose,onSubmit:this.handleSaveAction}),p.default.createElement(G.default,{allowTabs:!0,tabsCommonPath:"/cohorts",removeStoredData:this.props.activeUser.id+"-"+this.props.studyId+"-"+this.props.scenarioId,hasUnsaved:Z}),l&&p.default.createElement(j.default,{studyParamsWarning:$,study:l,scenario:d({},n,{fullData:f}),studies:S,isShown:O,onClose:this.handleDuplicateScenarioDialogClose,onSubmit:this.handleDuplicateScenarioDialogSubmit,showCreateAdjustedOption:(n.status===he.SCENARIO_STATUS.APPROVED||n.status===he.SCENARIO_STATUS.PREV_APPROVED)&&l.state.status===me.default.ACTIVE,isPrevApproved:n.status===he.SCENARIO_STATUS.PREV_APPROVED,isApproved:n.status===he.SCENARIO_STATUS.APPROVED}),p.default.createElement(X.default,{isShown:this.state.isRestoredDialogShown,onSubmit:function(){return e.applyRestoredData()},onClose:function(){(0,oe.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-"+e.props.scenarioId),e.setState({isRestoredDialogShown:!1})}}),l&&p.default.createElement(U.default,{fullData:[],studyParamsWarning:$,willOverride:l.scenarios.some(function(e){return e.status===he.SCENARIO_STATUS.APPROVED}),isAdjusted:V,predictedPatients:(V?f.adjusted_patient_allocation:f.patient_allocation)||0,targetPatients:(V?f.patient_allocation:n.target_num_patients)||0,targetDate:V?f.lpft:n.end_date,predictedDate:V?f.adjusted_lpft:f.lpft,isShown:I,onClose:function(){return e.setState({isApproveScenarioDialogShown:!1})},onSubmit:this.handleApproveAction}),p.default.createElement(Q.ContextHelpButton,{page:te}),P&&v.default.createPortal(p.default.createElement(z.default,null),document.body))}}]),t}(f.PureComponent);_e.propTypes={activeUser:_.default.object.isRequired,scenario:_.default.object,scenarioId:_.default.string.isRequired,study:_.default.object,studyId:_.default.string.isRequired,getScenarioViewerData:_.default.func.isRequired,platformRegions:_.default.array.isRequired,cohortId:_.default.oneOfType([_.default.number,_.default.string]),hasInvalidCohorts:_.default.bool,children:_.default.node.isRequired,enableSave:_.default.bool,backToStudy:_.default.func.isRequired,addScenarioNote:_.default.func.isRequired,getScenarioNotes:_.default.func.isRequired,notes:_.default.number,duplicateScenario:_.default.func.isRequired,createAdjustmentScenario:_.default.func.isRequired,approveScenario:_.default.func.isRequired,aggregatedGlobalData:_.default.object,goToScenario:_.default.func.isRequired,goToScenarioEdit:_.default.func.isRequired,goToScenarioWithCohorts:_.default.func.isRequired,navigateToEvents:_.default.func.isRequired,changeCohortEnableSave:_.default.func.isRequired,dataToSave:_.default.array,deleteCountries:_.default.array,saveOverrides:_.default.func.isRequired,removeCohortCountry:_.default.func.isRequired,resetUnsavedData:_.default.func.isRequired,restoreUnsavedData:_.default.func.isRequired,requirePageRefresh:_.default.bool,dataToRestore:_.default.object,undoLastAction:_.default.func.isRequired,redoLastAction:_.default.func.isRequired,undoStack:_.default.number,redoStack:_.default.number,studies:_.default.array,getStudies:_.default.func.isRequired,createApprovedSnapshot:_.default.func.isRequired},_e.defaultProps={scenario:void 0,study:void 0,cohortId:void 0,goToStudy:void 0,notes:0,aggregatedGlobalData:{},hasInvalidCohorts:!1,enableSave:!1,dataToSave:[],deleteCountries:[],requirePageRefresh:!1,dataToRestore:null,undoStack:0,redoStack:0,studies:null},t.default=(0,y.withRouter)((0,E.connect)(s,u)(_e))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1027),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=t.match.params,n=a.scenarioId,r=a.id,i=e.scenarios[n];return{hasInvalidCohorts:!!i&&i.hasInvalidCohorts,aggregatedGlobalData:i?i.aggregatedGlobalData:null,scenarioId:n,scenario:i,studyId:r,study:e.study[r]}}function i(e){return{navigateToCohort:function(t,a,n){return e((0,p.push)("/studies/"+t+"/scenarios/"+a+"/cohorts/"+n))}}}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=a(0),s=n(o),u=a(1),d=n(u),c=a(7),f=a(758),p=a(19),h=a(2),v=n(h),m=a(11),_=n(m),E=a(16),g=a(17),y=a(784),S=n(y),b=a(133),C=n(b),O=a(6),T=a(132),R=n(T),A=a(83),I=n(A),w=a(238),N=n(w),D=a(239),P=n(D),L=a(118),M=n(L),k=a(111),x=a(52),j=a(20),F=n(j);a(2229);var U=a(10),V=function(e){var t=e.scenario,a=e.study,n=e.navigateToCohort,r=e.aggregatedGlobalData,i=void 0===r?{}:r,o=t.cohorts.filter(function(e){var a=null!==t.source_scenario_id?"adjusted_curves":"curves",n=e.fullData[0][a];return 0!==n[0].length&&0!==n[1].length&&0!==n[2].length}),u=(0,_.default)(t.fp),d=t.cohorts.map(function(e,t){var a=e.fullData[0].curves,n=e.fullData[0].actual_curves,r=e.fullData[0].adjusted_curves,i=0===a[0].length||0===a[1].length||0===a[2].length||!e.fullData[0].lpft,l=0===n[0].length||0===n[1].length||0===n[2].length,o=0===r[0].length||0===r[1].length||0===r[2].length||!e.fullData[0].adjusted_lpft;return{cohortId:e.id,cohortName:"C"+(t+1),countriesLength:e.countries.length,startDate:e.fp,fromPrevApproved:e.fromPrevApproved,isEmptyGeneric:i,isEmptyActual:l,isEmptyAdjusted:o,data:e.fullData.find(function(e){return"rollup"===e.type})}});d.unshift({cohortId:0,cohortName:"All",countriesLength:i.uniqueCountries&&i.uniqueCountries.length,startDate:u,isEmpty:0===o.length,fromPrevApproved:t.fromPrevApproved,data:i});var c=(0,k.getMilestonesChartCohortsData)(d,t),p=l({},t,{fp:u}),h=(0,x.getStudyParamsWarning)(a,t),m=o.length!==t.cohorts.length;return s.default.createElement("div",{className:(0,v.default)("fpo-all-cohorts__container",{"show-alert":m})},m&&!h.showStudyParamsWarning&&s.default.createElement("div",{className:"alerts-container"},s.default.createElement(g.Grid,null,s.default.createElement(g.Row,null,s.default.createElement(g.Col,{offset:1,width:11},s.default.createElement(R.default,{isShown:!0,title:"",status:"info",className:"cohorts-alert"},"There are missing parameters in some cohorts. Go to individual cohort\n                  tabs and enter the relevant values."))))),h.showStudyParamsWarning&&s.default.createElement(I.default,{style:{top:"149px",zIndex:2}},s.default.createElement("div",{className:(0,v.default)("alerts-container")},s.default.createElement(g.Grid,null,s.default.createElement(g.Row,null,s.default.createElement(g.Col,{offset:1,width:11},s.default.createElement(P.default,{status:t.status,study:a,scenario:t,studyId:a.id,scenarioId:t.id,data:h})))))),s.default.createElement(g.Grid,null,s.default.createElement(g.Row,{style:{minHeight:"87px"}},s.default.createElement(g.Col,{offset:1,width:11},s.default.createElement(f.Tabs,{selectedTabClassName:"fpo-all-cohorts__tab-active"},s.default.createElement(f.TabList,{className:"fpo-all-cohorts__tabs-wrapper"},s.default.createElement(f.Tab,{className:"fpo-all-cohorts__tab"},s.default.createElement("div",null,O.Icons.ROMB_EMPTY),s.default.createElement("div",null,"Milestones")),s.default.createElement(f.Tab,{className:"fpo-all-cohorts__tab"},s.default.createElement("div",null,O.Icons.CHART_MENU),s.default.createElement("div",null,"Curves"))),s.default.createElement(f.TabPanel,null,s.default.createElement(S.default,{isAdjusted:null!==t.source_scenario_id,isTracking:a.state.status===F.default.ACTIVE&&(t.status===U.SCENARIO_STATUS.APPROVED||null!==t.source_scenario_id||t.status===U.SCENARIO_STATUS.PREV_APPROVED),onCohortClick:n,studyId:a.id,data:c,scenario:p})),s.default.createElement(f.TabPanel,null,s.default.createElement(g.Row,{className:"scenario-highlights-bar"},s.default.createElement(N.default,{globalData:i,target:null!==t.source_scenario_id?i.lpft:t.end_date,predicted:i.lpft,fpfv_lpfv:i.fpfv_lpfv,fpp_fpfv:i.fpp_fpfv,actual_date:i.actual_date,startDate:(0,_.default)(t.fp),actual_fpfv_lpfv:i.actual_fpfv_lpfv,actual_fpp_fpfv:i.actual_fpp_fpfv,actual_f_lpft:i.actual_f_lpft,adjusted_fpfv_lpfv:i.adjusted_fpfv_lpfv,adjusted_fpp_fpfv:i.adjusted_fpp_fpfv,adjustedLpft:i.adjusted_lpft,showAdjusted:null!==t.source_scenario_id,isCohortView:!0,showActual:(t.status===U.SCENARIO_STATUS.APPROVED||t.status===U.SCENARIO_STATUS.PREV_APPROVED||null!==t.source_scenario_id)&&"ACTIVE"===a.state.status})),s.default.createElement("div",{className:"cohorts-highlights-bar__separator"}),s.default.createElement(M.default,{scenario:p,isImpact:!1,studyStatus:a.state.status,data:i},s.default.createElement(C.default,null))))))))};V.defaultProps={scenario:null,aggregatedGlobalData:null},V.propTypes={scenario:d.default.object,study:d.default.object.isRequired,navigateToCohort:d.default.func.isRequired,aggregatedGlobalData:d.default.object},t.default=(0,E.withRouter)((0,c.connect)(r,i)(V))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1029),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=b.default.parse(t.location.search);return{scenariosIds:a.scenario,activeFilter:a.activeFilter,studyId:t.match.params.id,scenarios:e.comparator.scenarios,error:e.comparator.error}}function s(e){return{goToHome:function(){return e((0,m.push)("/"))},goToStudy:function(t){return e((0,m.push)("/studies/"+t))},applyFilter:function(t){return e((0,m.push)(t))},getStudyScenariosToCompare:function(t,a){return e((0,M.getStudyScenariosToCompare)(t,a))}}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),h=n(p),v=a(7),m=a(19),_=a(191),E=n(_),g=a(645),y=n(g),S=a(1823),b=n(S),C=a(107),O=a(792),T=n(O),R=a(788),A=n(R),I=a(17),w=a(790),N=n(w),D=a(866),P=n(D),L=a(6),M=a(30),k=a(8),x=a(1108),j=a(34),F=a(197),U=n(F),V=a(10),B=a(44);a(2230);var H=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={preparedScenarios:[],filteredScenarios:[],activeRegion:null,activeCountry:null,allRegions:[],allCountries:[],filteredCountries:[],srRrViewType:"SR"},a.onFilterSetHandler=a.onFilterSetHandler.bind(a),a.handleResize=a.handleResize.bind(a),a.handleFixHeader=a.handleFixHeader.bind(a),a.handleRegionSelect=a.handleRegionSelect.bind(a),a.handleCountrySelect=a.handleCountrySelect.bind(a),a.toggleSrRrViewType=a.toggleSrRrViewType.bind(a),a.debounced=(0,E.default)(a.forceUpdate,200),a.scrollTop=0,a}return l(t,e),d(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.studyId,a=e.scenariosIds;this.props.getStudyScenariosToCompare(t,a);var n=!!(0,j.isSupportPassive)()&&{passive:!0};window.addEventListener("resize",this.handleFixHeader,n),window.addEventListener("scroll",this.handleFixHeader,n),document.body.addEventListener("scroll",this.handleFixHeader,n),this.handleFixHeader()}},{key:"componentWillReceiveProps",value:function(e){var t=e.scenarios.filter(function(e){return!e.cohorts||0===e.cohorts.length}).map(function(e){if(e){var t=(0,k.prepareScenarioObject)(e);return t.source_scenario_id&&(t.hasAdjustedOrigin=!0),t.countries=(0,k.prepareScenarioCountriesObject)(t).map(function(e){var t="Unspecified country"===e.country_name?"Unspecified country ("+e.region_name+")":e.country_name;return u({},e,{location:t})}),u({},t,{fullData:(0,k.getScenarioCalculatedData)(t.countries,t)})}return null}),a=[{value:F.LOCATION_FILTER_OPTIONS.GLOBALS_ONLY,label:F.LOCATION_FILTER_OPTIONS.GLOBALS_ONLY},{value:F.LOCATION_FILTER_OPTIONS.ALL_REGIONS,label:F.LOCATION_FILTER_OPTIONS.ALL_REGIONS}],n=[{value:F.LOCATION_FILTER_OPTIONS.ALL,label:F.LOCATION_FILTER_OPTIONS.ALL}];t.forEach(function(e){e.fullData.forEach(function(e){e.type===V.SCENARIO_DATA_TYPE.REGION?a.push({label:e.location,value:e.location}):e.type!==V.SCENARIO_DATA_TYPE.COUNTRY||e.isRegionCountry||n.push({label:e.location,value:e.location,region:e.region})})});var r=this.state.allRegions.find(function(e){return e.selected}),i=this.state.filteredCountries.find(function(e){return e.selected});if(r){var l=a.find(function(e){return e.value===r.value});l?l.selected=!0:a[0].selected=!0}else a[0].selected=!0;this.setState({preparedScenarios:t,allRegions:(0,y.default)(a,"value"),allCountries:(0,y.default)(n,"value"),filteredCountries:r?(0,y.default)(n,"value").filter(function(e){return e.region===r.value||e.value===F.LOCATION_FILTER_OPTIONS.ALL||r.value===F.LOCATION_FILTER_OPTIONS.ALL_REGIONS}).map(function(e){return i&&e.value===i.value?u({},e,{selected:!0}):e}):(0,y.default)(n,"value")})}},{key:"componentDidUpdate",value:function(){if(!this.initialRender||this.prevFilter!==this.props.activeFilter){var e=this.filtersBar;if(!e)return;var t=e.getBoundingClientRect(),a=t.width,n=t.left;this.timeline.style.left=n+"px",this.timeline.style.width=a+"px",this.dashedLine.style.height=window.innerHeight-this.scenariosWrapper.getBoundingClientRect().bottom+"px",this.initialRender=!0,this.prevFilter=this.props.activeFilter,(0,x.fireResize)()}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleFixHeader),window.removeEventListener("scroll",this.handleFixHeader),document.body.removeEventListener("scroll",this.handleFixHeader)}},{key:"onFilterSetHandler",value:function(e){if(this.state.activeFilter!==e){var t="?";this.props.scenariosIds.forEach(function(e){t+="scenario="+e+"&"}),this.props.applyFilter("/studies/"+this.props.studyId+"/compare"+t+"activeFilter="+e+"&")}}},{key:"handleFixHeader",value:function(e){var t=this.container;if(t){var a=t.getBoundingClientRect(),n=a.width,r=a.left,i=[this.titleBar,this.filtersBar],l=document.querySelector(".application").getBoundingClientRect().top;l<=-80&&!this.fixedHeader?(i.forEach(function(e){e.classList.add("fixed")}),this.placeholder.style.display="block",this.fixedHeader=!0):l>-80&&this.fixedHeader&&(i.forEach(function(e){e.classList.remove("fixed")}),this.placeholder.style.display="none",this.fixedHeader=!1),this.fixedHeader?i.forEach(function(e){var t=e;t.style.left=r+"px",t.style.width=n+"px"}):i.forEach(function(e){var t=e;t.style.left=null,t.style.width=null}),e&&("scroll"===e.type&&this.scrollTop===l||"resize"===e.type)?(this.timeline.style.left=r+"px",this.timeline.style.width=n+"px",this.dashedLine.style.height=window.innerHeight-this.scenariosWrapper.getBoundingClientRect().bottom+"px",this.forceUpdate()):this.scrollTop=l}}},{key:"handleResize",value:function(){this.debounced()}},{key:"handleRegionSelect",value:function(e){var t=this.state,a=t.allRegions,n=t.allCountries;this.setState({activeRegion:e.value,activeCountry:null,allRegions:a.map(function(t){return Object.assign({},t,{selected:t.value===e.value})}),filteredCountries:n.filter(function(t){return t.region!==t.value&&(t.region===e.value||t.value===F.LOCATION_FILTER_OPTIONS.ALL||e.value===F.LOCATION_FILTER_OPTIONS.ALL_REGIONS)}).map(function(t){return t.value===F.LOCATION_FILTER_OPTIONS.ALL&&"All regions"!==e.value?Object.assign({},t,{selected:!0}):Object.assign({},t,{selected:!1})})},function(){(0,x.fireResize)()})}},{key:"handleCountrySelect",value:function(e){var t=this.state,a=t.allRegions,n=t.allCountries,r=t.activeRegion,i=t.filteredCountries,l=n.find(function(t){return t.value===e.value});this.setState({activeCountry:e.value,activeRegion:l.region?l.region:r,allRegions:r&&r!==F.LOCATION_FILTER_OPTIONS.ALL_REGIONS?a:a.map(function(e){return Object.assign({},e,{selected:e.value===l.region})}),filteredCountries:i.filter(function(e){return e.region===l.region||e.value===F.LOCATION_FILTER_OPTIONS.ALL||l.value===F.LOCATION_FILTER_OPTIONS.ALL}).map(function(t){return Object.assign({},t,{selected:t.value===e.value})})},function(){(0,x.fireResize)()})}},{key:"toggleSrRrViewType",value:function(e){this.setState({srRrViewType:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.preparedScenarios,n=t.activeRegion,r=t.activeCountry,i=t.allRegions,l=t.filteredCountries,o=this.props,s=o.error,u=o.activeFilter;if(0===a.length)return null;if(s)return f.default.createElement("div",{className:"error-message-container"},"There was an error during data loading.");var d=(0,x.filterSelectedScenarios)(a,u,n,r),c=(0,x.getMinMaxDates)(d),p=f.default.createElement(D.MilestonesTimelineTooltip,{data:{minMaxDates:c,tLpft:d[0].end_date}}),h=d.map(function(t,a){return f.default.createElement(N.default,{key:"compare-milestone-view_"+t.id,activeFilter:u,scenario:t,scenarioNumber:a+1,minDate:c[0],maxDate:c[1],srRrViewType:e.state.srRrViewType})});return f.default.createElement("div",{ref:function(t){e.container=t},className:"compare-scenarios"},f.default.createElement(C.Sidebar,null,f.default.createElement(C.Button,{height:80,onClick:function(){return e.props.goToHome()}},L.Icons.HOME),f.default.createElement(C.Separator,null),f.default.createElement(C.Button,{height:51,onClick:function(){return e.props.goToStudy(e.props.studyId)}},L.Icons.CHEVRON_LEFT)),f.default.createElement("div",{className:"fixed-placeholder",ref:function(t){e.placeholder=t}}),f.default.createElement("div",{className:"title-bar",ref:function(t){e.titleBar=t}},f.default.createElement(T.default,{scenarios:a})),f.default.createElement("div",{className:"filters-bar",ref:function(t){e.filtersBar=t}},f.default.createElement(I.Grid,null,f.default.createElement(I.Row,null,f.default.createElement(I.Col,{offset:1,width:11},f.default.createElement(A.default,{regions:i,countries:l,onRegionSelect:this.handleRegionSelect,onCountrySelect:this.handleCountrySelect,activeFilter:u,onClickHandler:this.onFilterSetHandler}))),f.default.createElement(w.CompareMilestonesViewRow,{srRrViewType:this.state.srRrViewType,setSrRrViewType:this.toggleSrRrViewType,activeFilter:u,graphElement:p,isTitle:!0}))),f.default.createElement("div",{id:"scenarios-wrapper",ref:function(t){e.scenariosWrapper=t},style:{width:"100%"}},h),f.default.createElement("div",{ref:function(t){e.dashedLine=t}},f.default.createElement(I.Grid,null,f.default.createElement(I.Row,null,f.default.createElement(I.Col,{offset:3,width:7},f.default.createElement(D.MilestonesTimelinePlaceholder,{data:{minMaxDates:c,tLpft:d[0].end_date}}))))),f.default.createElement("div",{className:"timeline",ref:function(t){e.timeline=t}},f.default.createElement(I.Grid,null,f.default.createElement(I.Row,null,f.default.createElement(I.Col,{offset:3,width:7},f.default.createElement(P.default,{data:{minMaxDates:c,tLpft:d[0].end_date}}))))),f.default.createElement(B.ContextHelpButton,{page:"scenario-comparator"}))}}]),t}(c.Component);H.propTypes={activeFilter:h.default.string,applyFilter:h.default.func.isRequired,error:h.default.bool,getStudyScenariosToCompare:h.default.func.isRequired,goToStudy:h.default.func.isRequired,goToHome:h.default.func.isRequired,scenarios:h.default.array.isRequired,scenariosIds:h.default.array.isRequired,studyId:h.default.string.isRequired},H.contextTypes={router:h.default.object},H.defaultProps={error:!1,activeFilter:U.default.LPFT_ALL},t.default=(0,v.connect)(o,s)(H)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1031),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScenariosListLoader=t.LocationsFilterLoader=t.UsersListLoader=void 0;var r=a(0),i=n(r),l=a(456),o=n(l);t.UsersListLoader=function(){return i.default.createElement(o.default,{height:440},i.default.createElement("rect",{x:"0",y:"10",width:"80",height:"20"}),i.default.createElement("rect",{x:"0",y:"50",width:"340",height:"20"}),i.default.createElement("rect",{x:"0",y:"90",width:"80",height:"20"}),i.default.createElement("rect",{x:"0",y:"130",width:"340",height:"20"}),i.default.createElement("rect",{x:"0",y:"170",width:"340",height:"20"}),i.default.createElement("rect",{x:"0",y:"210",width:"340",height:"20"}),i.default.createElement("rect",{x:"0",y:"250",width:"340",height:"20"}),i.default.createElement("rect",{x:"0",y:"290",width:"80",height:"20"}),i.default.createElement("rect",{x:"0",y:"330",width:"340",height:"20"}),i.default.createElement("rect",{x:"0",y:"370",width:"340",height:"20"}),i.default.createElement("rect",{x:"0",y:"410",width:"340",height:"20"}))},t.LocationsFilterLoader=function(){return i.default.createElement(o.default,null,i.default.createElement("rect",{x:"80",y:"10",width:"100",height:"10"}))},t.ScenariosListLoader=function(){return i.default.createElement(o.default,{height:400},i.default.createElement("rect",{x:"0",y:"0",width:"400",height:"400"}))}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a(0),l=n(i),o=a(7),s=a(16),u=a(19),d=a(2),c=n(d),f=a(12),p=n(f),h=a(11),v=n(h),m=a(107),_=a(6),E=a(17),g=a(1038),y=n(g),S=a(510),b=n(S),C=a(15),O=a(497),T=a(1036),R=n(T),A=a(44),I=a(232),w=n(I),N=a(1033),D=a(452),P=n(D),L=a(310),M=a(764),k=n(M),x=a(30),j=a(63),F=a(53),U=a(1037),V=a(8),B=a(106),H=a(10),G=n(H);a(2231);var Y=function(){var e=(0,o.useDispatch)(),t=(0,s.useParams)(),a=t.id,n=+a,d={match:{params:{id:a}}},f=(0,o.useSelector)(function(e){return e.auth.user}),h=(0,o.useSelector)(function(e){return(0,j.getStudyData)(e,d)}),g=(0,o.useSelector)(F.getPlatformRegionsFromStore),S=(0,o.useSelector)(function(e){return(0,U.getCsmsListFromStore)(e,d)}),T=(0,o.useSelector)(U.getPlainLocations),I=(0,o.useSelector)(function(e){return(0,U.getFullData)(e,d)}),D=(0,o.useSelector)(U.getSelectedUserFromStore),M=(0,o.useSelector)(function(e){return(0,U.getUserScenarios)(e,d)}),Y=(0,o.useSelector)(function(e){return(0,U.getCheckedScenarios)(e,d)}),z=(0,o.useSelector)(function(e){return e.csms.studyScenarios}),W=(0,o.useSelector)(function(e){return(0,U.getSelectedUsername)(e,d)});(0,i.useEffect)(function(){e((0,L.getCsmsByStudy)(n))},[n,e]),(0,i.useEffect)(function(){e((0,x.getStudyScenariosList)(n))},[n,e]),(0,i.useEffect)(function(){e((0,L.getCsmsScenariosData)(n,D))},[n,D,e]),(0,i.useEffect)(function(){h.is_imported||e((0,u.push)("/studies/"+n))},[n,h,e]),(0,i.useEffect)(function(){return function(){return e((0,L.onCsmUserSelect)(null))}},[e]);var q=(0,i.useState)({name:G.default,type:H.ROLLUP,subject:null}),K=r(q,2),X=K[0],Z=K[1];(0,i.useEffect)(function(){if(S){for(var t=Object.keys(S).filter(function(e){return X.type===H.ROLLUP||(X.type===H.REGION?!!T.filter(function(e){return e.region_name===X.name}).find(function(t){return t.country_name===e}):X.type===H.COUNTRY&&e===X.name)}).sort(),a=void 0,n=0;n<t.length;n+=1){var r=t[n];if(a=!!S[r].find(function(e){return e.id===D}))break}a||e((0,L.onCsmUserSelect)((0,p.default)(S,"["+t[0]+"][0].id",null)))}},[e,T,X,S,D]);var J=function(t){e((0,k.default)(n,t,D,[{id:D}],Y.includes(t)))},Q=S?Object.keys(S).filter(function(e){return X.type===H.ROLLUP||(X.type===H.REGION?!!T.filter(function(e){return e.region_name===X.name}).find(function(t){return t.country_name===e}):X.type===H.COUNTRY&&e===X.name)}).sort().map(function(t){return l.default.createElement("div",{key:t},l.default.createElement("h3",null,t),l.default.createElement("ul",{className:"csms-list"},S[t].map(function(t){var a=(0,V.getMomentDate)(t.startDate);return l.default.createElement("li",{key:t.name,className:(0,c.default)({selected:D===t.id}),onClick:function(){return e((0,L.onCsmUserSelect)(t.id))}},l.default.createElement("div",null,t.name),a&&(0,v.default)().isSameOrBefore(a,"day")?l.default.createElement("div",{className:"secondary-label"},"(start date - ",(0,B.formatDate)(a),")"):null)})))}):null;return l.default.createElement("div",{className:"csms-container"},l.default.createElement(m.Sidebar,null,l.default.createElement(m.Button,{height:80,onClick:function(){e((0,u.push)("/studies/"+n))}},_.Icons.CHEVRON_LEFT),l.default.createElement(m.Separator,{height:1})),l.default.createElement(E.Grid,null,l.default.createElement(E.Row,{className:"csms-filter__wrapper"},l.default.createElement(E.Col,{offset:2,width:8},l.default.createElement(P.default,null,l.default.createElement("h1",{className:"csms-title"},l.default.createElement("span",null,h.study_id," - CSMs list")),I&&g?l.default.createElement(w.default,{activeFilter:X,data:I,platformRegions:g,onFilterSelect:function(e){return Z(e)}}):l.default.createElement(N.LocationsFilterLoader,null)))),l.default.createElement(E.Row,null,l.default.createElement(E.Col,{offset:2,width:4},l.default.createElement(P.default,null,l.default.createElement("div",{className:"csms-content__wrapper"},S?Q:l.default.createElement(N.UsersListLoader,null)))),l.default.createElement(E.Col,{width:4},l.default.createElement(P.default,null,z?l.default.createElement("div",{className:"csms-content__wrapper bordered"},l.default.createElement("div",{className:"csms-sub-title"},l.default.createElement("h3",null,"Shared study scenarios"),l.default.createElement("div",{className:"shared-scenarios__counter"},l.default.createElement("span",null,Y.length),l.default.createElement("span",null,"/"),l.default.createElement("span",null,z.length))),l.default.createElement("h4",{className:"csms-sub-title__secondary"},W,""),l.default.createElement(C.FlexTable,{headerHeight:48,rowHeight:48,rowsCount:z.length},l.default.createElement(b.default,{params:{id:n},onRowClick:function(){}},l.default.createElement(C.Column,{header:l.default.createElement(O.HeaderCell,{title:"Shared"}),data:l.default.createElement(y.default,{study:h,selectedUser:D,activeUser:f,preparedScenarios:z,onSelect:J,checkedScenarios:Y}),width:60,fixedWidth:!0}),l.default.createElement(C.Column,{overflow:!1,header:l.default.createElement(O.HeaderCell,{title:"Scenario name"}),data:l.default.createElement(R.default,{preparedScenarios:z,dataField:"name"}),width:400}))),l.default.createElement("div",{className:"csms-scenarios-list-loader",style:{display:M?"none":"flex"}},l.default.createElement("div",{className:"calculate-progress"},_.Icons.ITEM_LOADER))):l.default.createElement("div",{className:"csms-content__wrapper"},l.default.createElement(N.ScenariosListLoader,null)))))),l.default.createElement(A.ContextHelpButton,{page:"csm-list"}))};t.default=Y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1034),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),l=n(i),o=a(1),s=n(o),u=a(2),d=n(u),c=a(49),f=function(e){var t=e.rowIndex,a=e.preparedScenarios,n=r({},a[t]),i=(0,d.default)("data-cell");return l.default.createElement(c.Cell,{className:i},l.default.createElement("div",null,l.default.createElement("div",null,n.name),l.default.createElement("div",{className:"cell-underline"})),");")};f.defaultProps={rowIndex:0,dataField:"",dateType:!1,isBold:!1,study:null,selectedUser:null},f.propTypes={preparedScenarios:s.default.array.isRequired,rowIndex:s.default.number},t.default=f},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getCheckedScenarios=t.getSelectedUsername=t.getFullData=t.getPlainLocations=t.getUserScenarios=t.getUserScenariosFromStore=t.getSelectedUserFromStore=t.getCsmsListFromStore=void 0;var r=a(11),i=function(e){return e&&e.__esModule?e:{default:e}}(r),l=a(47),o=a(53),s=a(8),u=a(201),d=t.getCsmsListFromStore=function(e,t){return e.csms[t.match.params.id]},c=t.getSelectedUserFromStore=function(e){return e.csms.selectedUser},f=t.getUserScenariosFromStore=function(e){return e.csms.userScenarios},p=t.getUserScenarios=(0,l.createSelector)([c,f],function(e,t){return t[e]}),h=t.getPlainLocations=(0,l.createSelector)(o.getPlatformRegionsFromStore,function(e){return e.reduce(function(e,t){var a=t,r=a.countries.map(function(e){return{platform_country_id:e.id,country_name:e.name,region_name:a.name,region_id:e.region_id,hasSingleCountry:1===a.countries.length}});return[].concat(n(e),n(r))},[])}),v=(t.getFullData=(0,l.createSelector)([d,h],function(e,t){var a=[];return e&&Object.keys(e).forEach(function(e){var n=e,r=t.find(function(e){return e.country_name===n});r&&a.push((0,s.getNewCountryObject)(r.country_name,r.region_name,r.region_id,r.hasSingleCountry,!1))}),(0,u.calculateTableData)(a,i.default.now(),{},!1)}),t.getSelectedUsername=(0,l.createSelector)([d,c],function(e,t){var a="";return e&&t&&Object.keys(e).forEach(function(n){var r=e[n].find(function(e){return e.id===t});r&&(a=r.name)}),a}),[]);t.getCheckedScenarios=(0,l.createSelector)([p],function(e){return e?e.filter(function(e){return e.shared}).map(function(e){return e.id}):v})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),l=n(i),o=a(1),s=n(o),u=a(2),d=n(u),c=a(49),f=a(64),p=n(f),h=a(55),v=n(h),m=function(e){var t=e.rowIndex,a=e.preparedScenarios,n=e.onSelect,i=e.checkedScenarios,o=e.activeUser,s=e.study,u=e.selectedUser,f=r({},a[t]),h=(0,d.default)("data-cell"),m=(0,d.default)("cell-control"),_=(0,v.default)(o,s,r({},f,{state:f.state?f.state:{}})),E=_.isShareAvailable;return l.default.createElement(c.Cell,{className:h},l.default.createElement("div",{className:"cell-underline"}),l.default.createElement("div",{className:m,onClick:function(e){return e.stopPropagation()}},l.default.createElement(p.default,{disabled:!E||!u,label:"",checked:i.indexOf(f.id)>-1,onChange:function(){n(f.id)}})))};m.defaultProps={rowIndex:0,dataField:"",dateType:!1,isBold:!1,study:null,selectedUser:null},m.propTypes={preparedScenarios:s.default.array.isRequired,rowIndex:s.default.number,onSelect:s.default.func.isRequired,checkedScenarios:s.default.array.isRequired,activeUser:s.default.object.isRequired,study:s.default.object,selectedUser:s.default.string},t.default=m},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(7),h=a(19),v=a(11),m=n(v),_=a(30),E=a(33),g=a(108),y=a(8),S=a(35),b=a(809),C=n(b),O=a(165),T=n(O),R=a(134),A=n(R),I=a(44),w=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isRestoredDialogShown:!1},a.onClose=a.onClose.bind(a),a.onSubmit=a.onSubmit.bind(a),a.applyRestoredData=a.applyRestoredData.bind(a),a}return l(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scenarioId,a=e.studyId;this.props.getScenarioViewerData(a,t,!0)}},{key:"componentWillReceiveProps",value:function(e){var t=e.scenario,a=e.studyId,n=e.scenarioId;t&&!(0,y.isEditableScenario)(t,this.props.activeUser,this.props.study)&&this.props.replace("/studies/"+a+"/scenarios/"+n),!e.dirtyData||this.state.isRestoredDialogShown||this.state.restored||this.setState({isRestoredDialogShown:!0})}},{key:"onClose",value:function(){var e=this.props,t=e.showCohorts,a=e.studyId,n=e.scenarioId;this.props.push("/studies/"+a+"/scenarios/"+n+(t?"/cohorts":""))}},{key:"onSubmit",value:function(e){this.props.updateScenario(this.props.studyId,this.props.scenarioId,e).then(this.onClose)}},{key:"applyRestoredData",value:function(){this.setState({isRestoredDialogShown:!1,restored:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.study,n=t.studyId,r=t.scenario,i=t.regionsCountries,l=t.showCohorts,o=t.requirePageRefresh,s=t.scenarioId,u=t.activeUser,c=t.dirtyData,f=t.validateScenarioNameOnEdit;if(!r||!a||!i.length)return d.default.createElement(A.default,null);var p=l?"scenario-wizard__edit--cohort":"scenario-wizard__edit";return d.default.createElement("div",null,!this.state.isRestoredDialogShown&&d.default.createElement(C.default,{key:r.countries.length,activeUser:u,dirtyData:!this.state.discardChanges&&c?c:null,requirePageRefresh:o,showCohorts:l,regionsCountries:i,study:a,studyId:n,scenarioId:s,scenario:r,onClose:this.onClose,validateScenarioName:f,onSubmit:this.onSubmit}),d.default.createElement(T.default,{isShown:this.state.isRestoredDialogShown&&!o,onSubmit:function(){return e.applyRestoredData()},onClose:function(){(0,S.removeParamItemStorage)("fpo-dirty-data",u.id+"-"+n+"-"+s+"-edit"),e.setState({isRestoredDialogShown:!1,discardChanges:!0})}}),d.default.createElement(I.ContextHelpButton,{page:p}))}}]),t}(u.Component);w.defaultProps={study:null,scenario:null,showCohorts:!1,requirePageRefresh:!1,dirtyData:null},w.propTypes={studyId:f.default.number.isRequired,scenarioId:f.default.number.isRequired,study:f.default.object,scenario:f.default.object,updateScenario:f.default.func.isRequired,push:f.default.func.isRequired,replace:f.default.func.isRequired,regionsCountries:f.default.array.isRequired,getScenarioViewerData:f.default.func.isRequired,activeUser:f.default.object.isRequired,showCohorts:f.default.bool,requirePageRefresh:f.default.bool,dirtyData:f.default.object,validateScenarioNameOnEdit:f.default.func.isRequired};var N=function(e,t){var a=+t.match.params.id,n=+t.match.params.scenarioId,r=e.errors.sessionExpired||e.errors.internalServer,i=e.auth.user,l=(0,S.getParamItemStorage)("fpo-dirty-data",i.id+"-"+a+"-"+n+"-edit","values"),s={dirtyData:l,activeUser:i,requirePageRefresh:r,study:e.study[a],studyId:a,scenario:null,scenarioId:n,regionsCountries:e.platform.regions,showCohorts:!!t.location.search&&t.location.search.indexOf("cohorts=true")>-1},u=e.scenarios[n];return u&&(s.scenario=o({},u,{fp:(0,y.getMomentDate)(u.fp),end_date:(0,y.getMomentDate)(u.end_date),updated:(0,m.default)(u.updated)})),s},D={getPlainStudy:_.getPlainStudy,updateScenario:E.updateScenario,validateScenarioNameOnEdit:E.validateScenarioNameOnEdit,getScenario:E.getScenario,getPlatformRegions:g.getPlatformRegions,getScenarioViewerData:E.getScenarioViewerData,push:h.push,replace:h.replace};t.default=(0,p.connect)(N,D)(w)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1039),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{closeWizard:function(t){return e((0,y.push)("/studies/"+t))},getStudyOptions:function(){return e((0,w.getStudyOptions)())},getStudy:function(t){return e((0,N.getStudy)(t))},updateStudy:function(t,a){return e((0,N.updateStudy)(t,a))},replace:function(t){return e((0,y.replace)(t))},forbiddenError:function(t){return e((0,D.forbiddenError)(t))},getStudyDashboardData:function(t){return e((0,N.getStudyDashboardData)(t))}}}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),p=a(0),h=n(p),v=a(1),m=n(v),_=a(7),E=a(12),g=n(E),y=a(19),S=a(816),b=n(S),C=a(165),O=n(C),T=a(44),R=a(35),A=a(106),I=a(63),w=a(108),N=a(30),D=a(131),P=a(20),L=a(28),M=function(e){function t(e){l(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={apiError:!1,isRestoredDialogShown:!1},a.handleSubmit=a.handleSubmit.bind(a),a.applyRestoredData=a.applyRestoredData.bind(a),a}return s(t,e),f(t,[{key:"componentDidMount",value:function(){this.props.getStudyOptions()}},{key:"componentWillReceiveProps",value:function(e){var t=e.study,a=e.studyId;t&&!(0,A.isEditableStudy)(t,this.props.activeUser)&&this.props.replace("/studies/"+a),!e.dirtyData||this.state.isRestoredDialogShown||this.state.restored||this.setState({isRestoredDialogShown:!0})}},{key:"handleSubmit",value:function(e){var t=this,a=["id","study_id","description"].concat(i(P.STUDY_PARAMS),i(P.STUDY_FILTERS));e.synchronizedWithImpact&&(a=["id","study_id","fpfv_fpft","synchronizedWithImpact"].concat(i(P.STUDY_FILTERS)));var n=Object.entries(e).filter(function(e){return a.includes(e[0])}).reduce(function(e,t){var a=c(t,2),n=a[0],i=a[1];return d({},e,r({},n,i))},{});this.props.updateStudy(this.props.studyId,n).then(function(e){var t=n.study_id,a=e.study_details_updated_by;(0,R.setParamItemStorage)("studiesChanged",t,"usersWhoClosed",[]),(0,R.setParamItemStorage)("studiesChanged",t,"updatedBy",a)}).then(function(){t.props.closeWizard(t.props.studyId)}).catch(function(e){var t=new Error(e.message);throw t.status=e.status,t})}},{key:"applyRestoredData",value:function(){this.setState({isRestoredDialogShown:!1,restored:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.availableTherapeuticAreas,n=t.availableIndications,r=t.study,i=t.studyId,l=t.closeWizard,o=t.dirtyData,s=t.activeUser,u=t.requirePageRefresh,d="study-wizard__edit--";return(0,g.default)(r,"state.status")?d+=r.scenarios.length?"ws":"wos":d+="playground",h.default.createElement("div",null,h.default.createElement(b.default,{forbiddenError:this.props.forbiddenError,activeUser:s,studyId:i,dirtyData:!this.state.discardChanges&&o?o:null,requirePageRefresh:u,onClose:l,onSubmit:this.handleSubmit,study:r,availableTherapeuticAreas:a,availableIndications:n}),h.default.createElement(O.default,{isShown:this.state.isRestoredDialogShown&&!u,onSubmit:function(){return e.applyRestoredData()},onClose:function(){(0,R.removeParamItemStorage)("fpo-dirty-data",s.id+"-"+i+"-edit"),e.setState({isRestoredDialogShown:!1,discardChanges:!0})}}),h.default.createElement(T.ContextHelpButton,{page:d}))}}]),t}(p.Component),k=function(e,t){var a=(0,L.getRouteMatch)(t),n=a.match.params.id,r=e.errors.sessionExpired||e.errors.internalServer,i=e.auth.user;return{activeUser:i,requirePageRefresh:r,dirtyData:(0,R.getParamItemStorage)("fpo-dirty-data",i.id+"-"+n+"-edit","values"),study:(0,I.getStudyData)(e,a),studyId:n,availableTherapeuticAreas:(0,g.default)(e.platform.studyOptions,"therapeuticAreas",[]),availableIndications:(0,g.default)(e.platform.studyOptions,"indications",[])}};M.propTypes={closeWizard:m.default.func.isRequired,availableTherapeuticAreas:m.default.array.isRequired,availableIndications:m.default.array.isRequired,getStudyOptions:m.default.func.isRequired,updateStudy:m.default.func.isRequired,studyId:m.default.oneOfType([m.default.string,m.default.number]).isRequired,study:m.default.object,replace:m.default.func.isRequired,requirePageRefresh:m.default.bool,dirtyData:m.default.object,activeUser:m.default.object.isRequired,forbiddenError:m.default.func.isRequired},M.defaultProps={study:null,requirePageRefresh:!1,dirtyData:null},t.default=(0,_.connect)(k,u)(M)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1041),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=parseInt(t.match.params.id,10);return{studyId:a,study:e.study[a],historicalStudies:(0,E.getFilteredHistoricalStudies)(e,t),selectedHistoricalStudies:(0,E.getSelectedHistoricalStudies)(e,t),activeUser:e.auth.user}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(7),h=a(19),v=a(16),m=a(30),_=a(319),E=a(331);a(444);var g=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.historicalStudies,a=e.study,n=e.studyId;a||this.props.getPlainStudy(n),t&&0!==t.length||this.props.getHistoricalStudies(n)}},{key:"render",value:function(){var e=this.props,t=e.study,a=e.historicalStudies,n=e.children;return t&&a?d.default.createElement("div",null,n):null}}]),t}(u.Component);g.defaultProps={historicalStudies:[],filterValue:"",study:null},g.propTypes={studyId:f.default.number.isRequired,children:f.default.node.isRequired,historicalStudies:f.default.array,getHistoricalStudies:f.default.func.isRequired,getPlainStudy:f.default.func.isRequired,study:f.default.object};var y={getPlainStudy:m.getPlainStudy,getHistoricalStudies:_.getHistoricalStudies,push:h.push};t.default=(0,v.withRouter)((0,p.connect)(o,y)(g))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=parseInt(t.match.params.id,10);return{activeUser:e.auth.user,studyId:a,study:e.study[a],historicalStudies:(0,N.getSelectedHistoricalStudies)(e,t),statistics:(0,N.getSelectedStudiesStatistic)(e,t)}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(7),h=a(19),v=a(16),m=a(17),_=a(107),E=a(6),g=a(61),y=n(g),S=a(15),b=a(478),C=n(b),O=a(468),T=n(O),R=a(479),A=a(44),I=a(30),w=a(319),N=a(331),D=a(34),P=a(55),L=n(P);a(444);var M=a(20),k=n(M),x=a(135),j=n(x),F=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.sortData={fpfv:"DESC",indication:"DESC"},a.scrollTop=0,a.containerWidth=0,a.containerLeft=0,a.initUpdate=!1,a.handleResize=a.handleResize.bind(a),a.handleRowSelect=a.handleRowSelect.bind(a),a.handleSort=a.handleSort.bind(a),a.handleApply=a.handleApply.bind(a),a.handleCancel=a.handleCancel.bind(a),a.handleEdit=a.handleEdit.bind(a),a.metadata=(0,L.default)(e.activeUser,e.study),a}return l(t,e),s(t,[{key:"componentDidMount",value:function(){var e=!!(0,D.isSupportPassive)()&&{passive:!0};window.addEventListener("resize",this.handleResize,e),window.addEventListener("scroll",this.handleResize,e),this.handleResize()}},{key:"componentWillReceiveProps",value:function(e){var t=e.study,a=e.activeUser,n=e.studyId;this.metadata=(0,L.default)(a,t),t&&t.historical_references&&0===t.historical_references.length&&t.state.status!==k.default.ACTIVE&&this.metadata.isUserHasStudyFullControl&&this.props.replace((0,N.getHistoricalUrl)(n))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("scroll",this.handleResize)}},{key:"getCountSelectedHistorical",value:function(){return this.props.historicalStudies.filter(function(e){return e.selected}).length}},{key:"handleResize",value:function(e){var t=this.container;if(t){var a=t.getBoundingClientRect();this.containerWidth=a.width,this.containerLeft=a.left;var n=document.querySelector(".application").getBoundingClientRect().top;this.initUpdate||(this.initUpdate=!0,this.forceUpdate()),e&&("scroll"===e.type&&this.scrollTop===n||"resize"===e.type)?this.forceUpdate():this.scrollTop=n}}},{key:"handleRowSelect",value:function(e){this.props.toggleCheckbox(e,this.props.studyId)}},{key:"handleSort",value:function(e,t){this.sortData[e]=t,this.props.sortData(e,t,this.props.studyId)}},{key:"handleApply",value:function(){var e=this,t=this.props.historicalStudies.filter(function(e){return e.selected}).map(function(e){return e.study_id});this.props.applyHistoricalStudiesChanges(this.props.studyId,t).then(function(){e.props.rollbackChanges(e.props.studyId)})}},{key:"handleCancel",value:function(){this.props.rollbackChanges(this.props.studyId),this.props.push("/studies/"+this.props.studyId)}},{key:"handleEdit",value:function(){this.props.push((0,N.getHistoricalUrl)(this.props.studyId))}},{key:"render",value:function(){var e=this,t=this.props,a=t.studyId,n=t.study,r=t.activeUser,i=t.historicalStudies,l=t.statistics;if(n&&n.historical_references&&0===n.historical_references.length&&n.state.status!==k.default.ACTIVE&&this.metadata.isUserHasStudyFullControl&&0===i.length)return null;var o=n.state.status!==k.default.ACTIVE&&(n.state.isOwner||r.role===j.default.ADMIN)&&this.metadata.isUserHasStudyFullControl;return d.default.createElement("div",{className:"historical-reference-trials"},d.default.createElement(_.Sidebar,null,d.default.createElement(_.Button,{height:60},d.default.createElement(v.NavLink,{to:o?"/studies/"+a+"/historical":"/studies/"+a},E.Icons.CHEVRON_LEFT)),d.default.createElement(_.Separator,{height:20})),d.default.createElement(m.Grid,null,d.default.createElement(m.Row,null,d.default.createElement(m.Col,{offset:1,width:9},d.default.createElement("div",null,d.default.createElement("div",{className:"historical-reference-trials__title"},"Historical reference studies"),d.default.createElement("div",null,"Select studies to setup as Historical References. Studies available here are those which have enrolled more than 50% of their patient target, and operated in the last 10 years"))),d.default.createElement("div",{className:"fpo-col-1",width:1,ref:function(t){e.container=t}},d.default.createElement("div",{className:"historical-reference-trials__fixed-bar",style:{width:this.containerWidth,left:this.containerLeft}},d.default.createElement("div",{className:"fixed-bar_line"}),d.default.createElement("div",{className:"historical-reference-trials__close-button",onClick:this.handleCancel},E.Icons.CROSS))))),d.default.createElement("div",{style:{height:"20px"}}),d.default.createElement("div",{style:{minHeight:"calc(100vh - 290px)"}},d.default.createElement(m.Grid,null,d.default.createElement(m.Row,null,d.default.createElement(m.Col,{offset:1,width:9},d.default.createElement(C.default,{columnWidth:2*this.containerWidth+72,isEditable:o,historicalStudies:i,sortData:this.sortData,handleRowSelect:this.handleRowSelect}))),d.default.createElement(m.Row,null,d.default.createElement(m.Col,{offset:1,width:9},d.default.createElement("div",{className:"historical-reference-summary__stat-table-wrapper"},d.default.createElement(S.FlexTable,{noHeader:!0,rowHeight:48,rowsCount:l.length},d.default.createElement(S.Row,{data:l},d.default.createElement(S.Column,{data:d.default.createElement(R.GenericDataCell,{rows:l,dataField:"title"}),width:90,fixedWidth:!0}),d.default.createElement(S.Column,{data:d.default.createElement(R.GenericDataCell,{rows:l,alignTo:"right",dataField:"target_num_patients"}),width:90,fixedWidth:!0}),d.default.createElement(S.Column,{data:d.default.createElement(R.GenericDataCell,{rows:l,alignTo:"right",dataField:"num_countries"}),width:90,fixedWidth:!0}),d.default.createElement(S.Column,{data:d.default.createElement(R.GenericDataCell,{rows:l,alignTo:"right",dataField:"num_sites"}),width:70,fixedWidth:!0}),d.default.createElement(S.Column,{data:d.default.createElement(R.GenericDataCell,{rows:l,alignTo:"right",type:"percentage",dataField:"screen_failure_rate"}),width:72,fixedWidth:!0}),d.default.createElement(S.Column,{data:d.default.createElement(R.GenericDataCell,{rows:l,alignTo:"right",dataField:"enrollment_rate"}),width:70,fixedWidth:!0})))))))),d.default.createElement(m.Grid,null,d.default.createElement(m.Row,null,d.default.createElement(m.Col,{offset:1,width:2},d.default.createElement(T.default,{count:this.getCountSelectedHistorical()})),d.default.createElement(m.Col,{offset:1,width:6},function(){return n.state.status===k.default.ACTIVE||!n.state.isOwner&&r.role!==j.default.ADMIN||!e.metadata.isUserHasStudyFullControl?d.default.createElement("div",{className:"historical-reference-trials-control-buttons__wrapper"},d.default.createElement(y.default,{label:"Cancel",className:"secondary-button",onClick:e.handleCancel})):d.default.createElement("div",{className:"historical-reference-trials-control-buttons__wrapper"},d.default.createElement(y.default,{label:"Edit",className:"secondary-button",onClick:e.handleEdit}),d.default.createElement(y.default,{label:"Apply",onClick:e.handleApply}))}()))),d.default.createElement(A.ContextHelpButton,{page:"historical-reference-studies"}))}}]),t}(u.Component);F.defaultProps={historicalStudies:[],statistics:[]},F.propTypes={activeUser:f.default.object.isRequired,studyId:f.default.number.isRequired,study:f.default.object.isRequired,push:f.default.func.isRequired,replace:f.default.func.isRequired,historicalStudies:f.default.array,toggleCheckbox:f.default.func.isRequired,sortData:f.default.func.isRequired,statistics:f.default.array,applyHistoricalStudiesChanges:f.default.func.isRequired,rollbackChanges:f.default.func.isRequired};var U={getPlainStudy:I.getPlainStudy,getHistoricalStudies:w.getHistoricalStudies,toggleCheckbox:w.toggleCheckbox,sortData:w.sortData,applyHistoricalStudiesChanges:w.applyHistoricalStudiesChanges,rollbackChanges:w.rollbackChanges,push:h.push,replace:h.replace};t.default=(0,p.connect)(o,U)(F)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=parseInt(t.match.params.id,10);return{activeUser:e.auth.user,studyId:a,study:e.study[a],historicalStudies:(0,I.getFilteredHistoricalStudies)(e,t),filterValue:(0,I.getFilterValue)(e)}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(7),h=a(19),v=a(17),m=a(107),_=a(6),E=a(61),g=n(E),y=a(478),S=n(y),b=a(468),C=n(b),O=a(498),T=n(O),R=a(30),A=a(319),I=a(331),w=a(34),N=a(55),D=n(N),P=a(20),L=n(P);a(444);var M=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.sortData={indication:"ASC",active:"indication"},a.metadata=(0,D.default)(e.activeUser,e.study),a.scrollTop=0,a.containerWidth=0,a.containerLeft=0,a.initUpdate=!1,a.handleResize=a.handleResize.bind(a),a.handleRowSelect=a.handleRowSelect.bind(a),a.handleSort=a.handleSort.bind(a),a.handleFilter=a.handleFilter.bind(a),a.handleCancel=a.handleCancel.bind(a),a}return l(t,e),s(t,[{key:"componentDidMount",value:function(){var e=!!(0,w.isSupportPassive)()&&{passive:!0};window.addEventListener("resize",this.handleResize,e),window.addEventListener("scroll",this.handleResize,e),this.handleResize()}},{key:"componentWillReceiveProps",value:function(e){var t=e.study,a=e.activeUser,n=e.studyId;this.metadata=(0,D.default)(a,t),this.metadata.isUserHasStudyFullControl&&t.state.status!==L.default.ACTIVE||this.props.push("/studies/"+n+"/historical/summary")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("scroll",this.handleResize)}},{key:"getCountSelectedHistorical",value:function(){return this.props.historicalStudies.filter(function(e){return e.selected}).length}},{key:"handleResize",value:function(e){var t=this.container;if(t){var a=t.getBoundingClientRect();this.containerWidth=a.width,this.containerLeft=a.left;var n=document.querySelector(".application").getBoundingClientRect().top;this.initUpdate||(this.initUpdate=!0,this.forceUpdate()),e&&("scroll"===e.type&&this.scrollTop===n||"resize"===e.type)?this.forceUpdate():this.scrollTop=n}}},{key:"handleRowSelect",value:function(e){this.props.toggleCheckbox(e,this.props.studyId)}},{key:"handleSort",value:function(e,t){this.sortData[e]=t,this.sortData.active=e,this.props.sortData(e,t,this.props.studyId)}},{key:"handleFilter",value:function(e){this.props.filterData(e.target.value)}},{key:"handleCancel",value:function(){this.handleFilter({target:{value:""}}),this.props.rollbackChanges(this.props.studyId),this.props.push("/studies/"+this.props.studyId)}},{key:"render",value:function(){var e=this,t=this.props,a=t.studyId,n=t.study,r=t.historicalStudies,i=t.filterValue,l=n.state.status!==L.default.ACTIVE&&this.metadata.isUserHasStudyFullControl;return d.default.createElement("div",{className:"historical-reference-trials"},d.default.createElement(m.Sidebar,null,d.default.createElement(m.Button,{height:60,onClick:this.handleCancel},_.Icons.CHEVRON_LEFT),d.default.createElement(m.Separator,{height:20})),d.default.createElement(v.Grid,null,d.default.createElement(v.Row,null,d.default.createElement(v.Col,{offset:1,width:9},d.default.createElement("div",null,d.default.createElement("h1",null,"Historical reference studies"),d.default.createElement("div",null,"Select studies to setup as Historical References. Studies available here are those which have enrolled more than 50% of their patient target, and operated in the last 10 years"))),d.default.createElement("div",{className:"fpo-col-1",width:1,ref:function(t){e.container=t}},d.default.createElement("div",{className:"historical-reference-trials__fixed-bar",style:{width:this.containerWidth,left:this.containerLeft}},d.default.createElement("div",{className:"fixed-bar_line"}),d.default.createElement("div",{className:"historical-reference-trials__close-button",onClick:this.handleCancel},_.Icons.CROSS))))),d.default.createElement("div",{style:{height:"20px"}}),d.default.createElement(v.Grid,null,d.default.createElement(v.Row,null,d.default.createElement(v.Col,{offset:1,width:4},d.default.createElement("div",{className:"historical-reference-trials__search-input-wrapper"},d.default.createElement("div",{className:"icon-wrapper"},_.Icons.SEARCH_HISTORICAL),d.default.createElement(T.default,{withoutBorder:!0,placeholder:"Search for study by name, TA or indication",value:i,clearIcon:!0,onClick:function(){return e.handleFilter({target:{value:""}})},onChange:this.handleFilter})))),d.default.createElement(v.Row,null,d.default.createElement(v.Col,{offset:1,width:9},d.default.createElement("div",{style:{minHeight:"calc(100vh - 390px)"}},d.default.createElement(S.default,{columnWidth:2*this.containerWidth+72,isEditable:l,historicalStudies:r,sortData:this.sortData,handleSort:this.handleSort,handleRowSelect:this.handleRowSelect}))))),d.default.createElement(v.Grid,null,d.default.createElement(v.Row,null,d.default.createElement(v.Col,{offset:1,width:1},d.default.createElement(C.default,{count:this.getCountSelectedHistorical()})),d.default.createElement(v.Col,{offset:6,width:2},d.default.createElement("div",{className:"historical-reference-trials-control-buttons__wrapper"},d.default.createElement(g.default,{label:"Cancel",className:"secondary-button",onClick:this.handleCancel}),d.default.createElement(g.default,{label:"Continue",onClick:function(){e.handleFilter({target:{value:""}}),e.props.push("/studies/"+a+"/historical/summary")}}))))))}}]),t}(u.Component);M.defaultProps={historicalStudies:[],filterValue:"",study:null},M.propTypes={studyId:f.default.number.isRequired,push:f.default.func.isRequired,historicalStudies:f.default.array,toggleCheckbox:f.default.func.isRequired,sortData:f.default.func.isRequired,filterValue:f.default.string,filterData:f.default.func.isRequired,rollbackChanges:f.default.func.isRequired,study:f.default.object,activeUser:f.default.object.isRequired};var k={getPlainStudy:R.getPlainStudy,getHistoricalStudies:A.getHistoricalStudies,toggleCheckbox:A.toggleCheckbox,sortData:A.sortData,filterData:A.filterData,rollbackChanges:A.rollbackChanges,push:h.push};t.default=(0,p.connect)(o,k)(M)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HistoricalDataPreloader=t.HistoricalReferenceSummary=t.HistoricalReferenceTrials=void 0;var r=a(1045),i=n(r),l=a(1044),o=n(l),s=a(1043),u=n(s);t.HistoricalReferenceTrials=i.default,t.HistoricalReferenceSummary=o.default,t.HistoricalDataPreloader=u.default,t.default=i.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(39),u=a(17),d=a(73),c=function(e){var t=e.extra,a=e.missing,n=e.onClose;return i.default.createElement(s.PopupDialog,{title:d.MISMATCHED_STUDY_DETAILS,className:"study-params-warning-details",isShown:!0,handleClose:n,buttons:[i.default.createElement(s.ActionButton,{primary:!0,disabled:!0,action:function(){}},d.ALIGN_AUTOMATICALLY),i.default.createElement(s.ActionButton,{primary:!0,action:n},d.CLOSE)]},i.default.createElement("div",{className:"list-overlay__wrapper"},i.default.createElement(u.Grid,{noGaps:!0,style:{minWidth:520}},i.default.createElement(u.Row,null,i.default.createElement(u.Col,{width:6},i.default.createElement("h5",null,"Extra countries")),i.default.createElement(u.Col,{width:6},i.default.createElement("h5",null,"Missing countries"))),i.default.createElement(u.Row,null,i.default.createElement(u.Col,{width:6},i.default.createElement("div",null,Object.keys(t).map(function(e){return i.default.createElement("div",null,i.default.createElement("div",{className:"list-region-title"},e),i.default.createElement("ul",{className:"list-countries__wrapper"},t[e].map(function(e){return i.default.createElement("li",{key:e.country_id,className:"list-country-title"},e.country_name)})))}))),i.default.createElement(u.Col,{width:6},Object.keys(a).map(function(e){return i.default.createElement("div",null,i.default.createElement("div",{className:"list-region-title"},e),i.default.createElement("ul",{className:"list-countries__wrapper"},a[e].map(function(e){return i.default.createElement("li",{className:"list-country-title"},e.country_name)})))}))))))};c.defaultProps={extra:{},missing:{}},c.propTypes={extra:o.default.object,missing:o.default.object,onClose:o.default.func.isRequired},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a(0),l=n(i),o=a(7),s=a(2),u=n(s),d=a(220),c=n(d),f=a(192),p=n(f),h=a(6),v=a(1047),m=n(v),_=a(28),E=n(_),g=a(53);a(2232);var y=function(){var e=(0,E.default)(),t=(0,o.useSelector)(function(t){return(0,g.isImpactDataAvailable)(t,e)}),a=(0,o.useSelector)(function(t){return(0,g.getImpactScenarioCountriesList)(t,e)}),n=a.extra,s=a.missing,d=(0,i.useState)(!1),f=r(d,2),v=f[0],_=f[1],y=void 0,S=void 0,b=void 0;return t?(0,c.default)(n)&&(0,c.default)(s)?(y=h.Icons.SUCCESS,S="success",b=l.default.createElement("div",null,"Scenario countries list is the same as in Impact plan")):(y=h.Icons.WARNING,S="warning",b=l.default.createElement("div",null,"Scenario countries list differs from Impact. Click for details")):(y=h.Icons.ERROR,S="no-data",b=l.default.createElement("div",null,"There is no impact plan for selected study")),l.default.createElement("div",{className:"impact-countries-widget__container"},l.default.createElement(p.default,{mouseEnterDelay:.3,overlay:b},l.default.createElement("div",{className:(0,u.default)("list-icon",S),onClick:function(){"warning"===S&&_(!0)}},y,l.default.createElement("span",null,"Impact"))),v&&l.default.createElement(m.default,{extra:n,missing:s,onClose:function(){return _(!1)}}))};t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1048),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var a=t.match.params.id;return{scenario:e.impactScenarios[a]||{},studyId:a,notes:e.impactNotes[a]||[],study:e.study[a],platformRegions:e.platform.regions}}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a(0),p=n(f),h=a(1),v=n(h),m=a(7),_=a(19),E=a(16),g=a(2),y=n(g),S=a(17),b=a(107),C=a(34),O=a(6),T=a(322),R=n(T),A=a(330),I=n(A),w=a(238),N=n(w),D=a(133),P=n(D),L=a(324),M=n(L),k=a(232),x=n(k),j=a(325),F=n(j),U=a(132),V=n(U),B=a(486),H=n(B),G=a(83),Y=n(G),z=a(321),W=n(z),q=a(329),K=n(q),X=a(58),Z=n(X),J=a(118),Q=n(J),$=a(33),ee=a(108),te=a(30),ae=a(230),ne=a(10),re=n(ne),ie=a(202),le=a(334),oe=a(35);a(2233);var se=function(){},ue=function(e){function t(e){l(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));de.call(a);var n=(0,oe.getParamItemStorage)("fpo-ui-settings","chartState","collapsed"),r=(0,oe.getParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter")||{overallocated:!1,actualData:!0};return a.state={notesPanelOpen:!1,filter:{name:re.default,type:ne.ROLLUP,subject:null},isDuplicateScenarioDialogShown:!1,chartCollapsed:n,tableFilter:r,showOverallocation:!1},a.alertsHeight=44,a.alertsPosition=87,a.locationsFilterPosition=87,a.tableHeaderPosition=n?196:398,a.miniChartPosition=146,a.tableFilterPosition=n?146:352,a.exportToExcel=a.exportToExcel.bind(a),a.toggleNotes=a.toggleNotes.bind(a),a.handleFilterSelect=a.handleFilterSelect.bind(a),a}return s(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scenario,a=e.studyId,n=e.platformRegions;this.controller=new AbortController;var r=this.controller.signal;t&&t.study_id===+a||this.props.getImpactScenario(a,r),n.length||this.props.getPlatformRegions();var i={root:null,rootMargin:"80px 0px 0px 0px",threshold:.75},l=this.handleMiniChart;this.observer=new IntersectionObserver(l,i),this.chartContainer&&this.observer.observe(this.chartContainer)}},{key:"componentWillReceiveProps",value:function(e){this.props.studyId!==e.studyId&&(this.props.getPlainStudy(e.studyId),this.props.getImpactScenario(e.studyId)),this.setState({filter:{name:re.default,type:ne.ROLLUP,subject:null}})}},{key:"componentDidUpdate",value:function(){this.chartContainer&&this.observer.observe(this.chartContainer)}},{key:"componentWillUnmount",value:function(){this.controller.abort(),this.chartContainer&&this.observer.unobserve(this.chartContainer)}},{key:"handleFilterSelect",value:function(e){this.setState({filter:e})}},{key:"exportToExcel",value:function(){var e=this.props,t=e.study,a=e.scenario;(0,ie.exportToExcel)(t,a,a.fullData)}},{key:"toggleNotes",value:function(){this.setState({notesPanelOpen:!this.state.notesPanelOpen})}},{key:"render",value:function(){var e=this,t=this.props,a=t.scenario,n=t.study,r=t.platformRegions,l=t.notes,o=this.state,s=o.filter,u=o.tableFilter,d=o.chartCollapsed;if(!a.study_id||!n||!r.length)return null;var c=a.fullData.find(function(e){return e.type.toUpperCase()===ne.ROLLUP})||{},f=a.fullData.find(function(e){return e.location===s.name&&e.type===s.type.toLowerCase()&&(!s.subject||e.region===s.subject)}),h=[];if(h.push(c),s.type===ne.REGION){var v=a.fullData.filter(function(e){return e.location===s.name||e.region_name===s.name});h=[].concat(i(h),i(v))}else if(s.type===ne.COUNTRY){var m=a.fullData.find(function(e){return e.location===s.name&&e.type.toUpperCase()===ne.COUNTRY&&(!s.subject||e.region===s.subject)}),_=a.fullData.find(function(e){return e.location===m.region_name});h=[].concat(i(h),[_,m])}else h=a.fullData;var g=void 0!==f.actual_overallocation&&0!==f.actual_overallocation;return p.default.createElement("div",{className:"cohorts-scenario-container screenshot-container"},p.default.createElement(b.Sidebar,null,p.default.createElement(b.Button,{height:60},p.default.createElement(E.NavLink,{to:"/"},O.Icons.HOME)),p.default.createElement(b.Separator,{height:20}),p.default.createElement(b.Button,{height:51,onClick:function(){return e.props.backToStudy()}},O.Icons.CHEVRON_LEFT),p.default.createElement(b.Separator,{height:22,noLine:!0}),p.default.createElement(b.Button,{height:56,onClick:this.toggleNotes,tooltip:"Notes"},p.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},O.Icons.NOTES,p.default.createElement("div",{className:"sup"},l.length>0?(0,C.kFormatter)(l.length):""))),p.default.createElement(b.Button,{height:56,onClick:se,tooltip:"Events",disabled:!0},p.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},O.Icons.EVENT,p.default.createElement("div",{className:"sup"}))),p.default.createElement(b.Separator,{height:20}),p.default.createElement(b.Button,{height:56,disabled:!0,onClick:se,tooltip:"Save"},O.Icons.SAVE),p.default.createElement(b.Button,{height:56,tooltip:"Duplicate and edit",disabled:!0,actionName:ne.SIDEBAR_BUTTONS.DUPLICATE,onClick:this.handleDuplicateScenarioClick},O.Icons.DUPLICATE),p.default.createElement(W.default,{exportToExcel:this.exportToExcel,study:n,scenario:a,filter:s.name}),p.default.createElement(b.Button,{height:56,disabled:!0,tooltip:"Edit",onClick:se},O.Icons.EDIT),p.default.createElement(b.Separator,{height:20}),p.default.createElement(b.Button,{height:56,disabled:!0,tooltip:"Optimize scenario"},O.Icons.OPTIMISE),p.default.createElement(b.Button,{height:56,disabled:!0,tooltip:"Approve scenario",actionName:ne.SIDEBAR_BUTTONS.APPROVE,onClick:se},O.Icons.APPROVE)),p.default.createElement(S.Grid,null,p.default.createElement(S.Row,null,p.default.createElement(S.Col,{offset:8,width:4},p.default.createElement(R.default,{isImpact:a.isImpact,notes:l,isEditable:!0,scenarioId:a.study_id,onSubmitNote:this.props.addImpactScenarioNote,onClose:this.toggleNotes,expanded:this.state.notesPanelOpen})))),p.default.createElement(Y.default,{style:{zIndex:4}},p.default.createElement("div",{ref:function(t){e.titleBar=t}},p.default.createElement("div",{className:"scenario__title-bar approved"},p.default.createElement(S.Grid,null,p.default.createElement(S.Row,{className:"approved",style:{height:"87px"}},p.default.createElement(S.Col,{offset:1,width:6},p.default.createElement(Z.default,null,p.default.createElement(F.default,{name:a.name,modified:null,approvedAt:a.approvedAt,optimised:a.last_optimisation_date,adjusted:a.adjusted_createdAt,status:a.status,isAdjusted:!1,optimisationWarning:!1,studyId:n.study_id}))),p.default.createElement(S.Col,{width:5},p.default.createElement("div",{className:"scenario-alerts-wrapper"},p.default.createElement(Z.default,null,p.default.createElement(I.default,{scenario:a,globalData:c,study:n}))))))))),p.default.createElement("div",{ref:function(t){e.container=t},className:(0,y.default)("impact-scenario-container",{"show-alert":g})},g&&p.default.createElement(Y.default,{style:{top:this.alertsPosition+"px",zIndex:4}},p.default.createElement("div",{className:"alerts-container"},p.default.createElement(S.Grid,null,p.default.createElement(S.Row,null,p.default.createElement(S.Col,{offset:1,width:11},p.default.createElement(Z.default,null,p.default.createElement(V.default,{isShown:!0,title:"",status:"info",className:"overallocation-alert"},p.default.createElement(H.default,{isAggregatedRowSelected:"country"!==f.type&&!f.isRegionCountry,numberOfPatients:f.actual_overallocation,countryName:f.location,originalLpft:f.original_f_lpft})))))))),p.default.createElement(Y.default,{key:g?this.locationsFilterPosition+this.alertsHeight:this.locationsFilterPosition,style:g?{top:this.locationsFilterPosition+this.alertsHeight+"px",zIndex:4}:{top:this.locationsFilterPosition+"px",zIndex:4}},p.default.createElement("div",{className:"filters-container"},p.default.createElement(S.Grid,null,p.default.createElement(S.Row,null,p.default.createElement(S.Col,{offset:1,width:11},p.default.createElement(Z.default,null,p.default.createElement(x.default,{activeFilter:s,data:a.fullData,platformRegions:r,onFilterSelect:this.handleFilterSelect}))))))),p.default.createElement("div",null,p.default.createElement(S.Grid,null,p.default.createElement(S.Row,{className:"scenario-highlights-bar"},p.default.createElement(Z.default,null,p.default.createElement(N.default,{globalData:c,target:a.end_date,predicted:f.lpft,fpfv_lpfv:f.fpfv_lpfv,fpp_fpfv:f.fpp_fpfv,actual_date:f.actual_date,startDate:a.fp,actual_fpfv_lpfv:f.actual_fpfv_lpfv,actual_fpp_fpfv:f.actual_fpp_fpfv,actual_f_lpft:f.actual_f_lpft,adjusted_fpfv_lpfv:f.adjusted_fpfv_lpfv,adjusted_fpp_fpfv:f.adjusted_fpp_fpfv,showAdjusted:!1,showActual:!0,isOverallocated:g,isImpact:!0})),p.default.createElement(S.Col,{width:1},p.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"flex-end"}},p.default.createElement(D.ChartCollapseControl,{isCollapsed:this.state.chartCollapsed,onOptionSelect:this.handleChartCollapse})))))),!d&&p.default.createElement(Q.default,{scenario:a,isImpact:!0,showOverallocation:this.state.showOverallocation,studyStatus:n.state.status,data:f},p.default.createElement("div",{ref:function(t){e.chartContainer=t},className:"chart-container"},p.default.createElement(S.Grid,null,p.default.createElement(S.Row,null,p.default.createElement(S.Col,{offset:1,width:11},p.default.createElement("div",{className:"full-chart"},p.default.createElement(Z.default,null,p.default.createElement(P.default,{onToggleOverallocation:this.handleShowOverallocation}))))))),p.default.createElement("div",{ref:function(t){e.miniChartContainer=t},style:{top:(g?this.miniChartPosition+this.alertsHeight:this.miniChartPosition)+"px"},className:"minimised-chart-container exclude-from-screenshot"},p.default.createElement(S.Grid,null,p.default.createElement(S.Row,null,p.default.createElement(S.Col,{offset:1,width:11},p.default.createElement("div",{className:"minimised-chart"},p.default.createElement(Z.default,null,p.default.createElement(D.MinimisedEnrolmentChart,null)))))))),p.default.createElement(Y.default,{key:g?this.tableFilterPosition+this.alertsHeight:this.tableFilterPosition,className:"exclude-from-screenshot",style:{top:(g?this.tableFilterPosition+this.alertsHeight:this.tableFilterPosition)+"px",backgroundColor:"white",height:"50px",zIndex:2}},p.default.createElement(S.Grid,null,p.default.createElement(S.Row,null,p.default.createElement(S.Col,{offset:1,width:11},p.default.createElement("div",{className:"table-filter"},p.default.createElement(Z.default,null,p.default.createElement(K.default,{showOverallocation:!!c.overallocatedData||!!c.adjusted_overallocatedData,onChange:this.handleTableFilterChange,actualData:u&&u.actualData,overallocated:u&&u.overallocated}))))))),p.default.createElement(S.Grid,null,p.default.createElement(S.Row,{className:"exclude-from-screenshot"},p.default.createElement(S.Col,{offset:1,width:11},p.default.createElement(Z.default,null,p.default.createElement(M.default,{batchUpdate:se,onMultiCheck:se,onMultiEditingApply:se,onMultiEditingCancel:se,onMultiEditingCellChange:se,isMultiEditing:!1,multiRegionsData:{},data:h,scenario:a,study:n,onCopy:se,onPaste:se,isCohortView:!0,navigateToViewSites:se,platformRegions:r,tableFilter:u,tableHeaderPosition:g?this.tableHeaderPosition+this.alertsHeight:this.tableHeaderPosition,onInvalidData:se,isEditable:!1,isHistoricalDataViewEnabled:!1,isAdjusted:!1,isTracking:!0,onDataChange:se,handleAddRegion:se,handleAddCountry:se,handleDeleteRegion:se,handleDeleteCountry:se,resetCountryData:se,onToggleEvents:se})))))))}}]),t}(f.Component),de=function(){var e=this;this.handleMiniChart=function(t){t.forEach(function(t){t.boundingClientRect.top<=-150&&!e.state.fixedChart?(e.miniChartContainer.style.visibility="visible",e.chartContainer.style.visibility="hidden",e.setState({fixedChart:!0})):e.state.fixedChart&&(e.miniChartContainer.style.visibility="hidden",e.chartContainer.style.visibility="visible",e.setState({fixedChart:!1}))})},this.handleDuplicateScenarioClick=function(){e.setState({isDuplicateScenarioDialogShown:!0})},this.handleDuplicateScenarioDialogClose=function(){e.setState({isDuplicateScenarioDialogShown:!1})},this.handleDuplicateScenarioDialogSubmit=function(t){var a=e.props,n=a.studyId,r=a.scenario,i=a.navigateToScenario,l=(0,le.prepareImpactScenarioData)(r);l.name=t,e.props.duplicateImpactScenario(n,l).then(function(e){var t=e.id;return i(n,t)}),e.handleDuplicateScenarioDialogClose()},this.handleChartCollapse=function(t){e.tableHeaderPosition=t?196:398,e.tableFilterPosition=t?146:352,null===e.state.chartCollapsed?(0,oe.addToStorage)("fpo-ui-settings",{id:"chartState",selected:t}):(0,oe.setParamItemStorage)("fpo-ui-settings","chartState","collapsed",t),e.setState({chartCollapsed:t})},this.handleTableFilterChange=function(t){var a=d({},e.state.tableFilter,r({},t,!e.state.tableFilter[t]));(0,oe.getParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter")?(0,oe.setParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter",a):(0,oe.addToStorage)("fpo-ui-settings",{id:"tableFilter",tableFilter:a}),e.setState({tableFilter:a})},this.handleShowOverallocation=function(t){e.setState({showOverallocation:t})}};ue.propTypes={getImpactScenario:v.default.func.isRequired,scenario:v.default.object,study:v.default.object,studyId:v.default.string.isRequired,getPlainStudy:v.default.func.isRequired,getPlatformRegions:v.default.func.isRequired,platformRegions:v.default.array.isRequired,duplicateImpactScenario:v.default.func.isRequired,backToStudy:v.default.func.isRequired,notes:v.default.array,navigateToScenario:v.default.func.isRequired,addImpactScenarioNote:v.default.func.isRequired},ue.defaultProps={scenario:void 0,study:void 0,notes:[]};var ce={getImpactScenario:$.getImpactScenario,getPlainStudy:te.getPlainStudy,getPlatformRegions:ee.getPlatformRegions,addImpactScenarioNote:ae.addImpactScenarioNote,duplicateImpactScenario:$.duplicateImpactScenario,push:_.push,navigateToScenario:function(e,t){return(0,_.push)("/studies/"+e+"/scenarios/"+t)}},fe=function(e,t,a){var n=t.push,r=e.scenario;return d({},a,e,t,{backToStudy:function(){return n("/studies/"+a.match.params.id+(r&&r.is_archived?"/archived":""))}})};t.default=(0,m.connect)(u,ce,fe)(ue)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1050),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1053),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=parseInt(t.match.params.id,10),n=e.errors.sessionExpired||e.errors.internalServer,r=e.auth.user;return{dirtyData:(0,N.getParamItemStorage)("fpo-dirty-data",r.id+"-"+a+"-new","values"),activeUser:r,requirePageRefresh:n,studyId:a,study:e.study[a],regionsCountries:e.platform.regions.map(function(e){var t=e.countries.map(function(e){return u({},e,{platform_country_id:e.id})});return u({},e,{countries:t})}),showCohorts:t.location.search&&t.location.search.indexOf("cohorts=true")>-1}}function s(e){return{goToStudy:function(t){return e((0,v.push)("/studies/"+t))},loadRegions:function(){return e((0,A.getPlatformRegions)())},getStudy:function(t){return e((0,R.getPlainStudy)(t))},forbiddenError:function(t){return e((0,D.forbiddenError)(t))},createNewScenario:function(t,a,n){return e((0,T.default)(t,a,n))}}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),h=n(p),v=a(19),m=a(7),_=a(482),E=n(_),g=a(196),y=n(g),S=a(165),b=n(S),C=a(44),O=a(33),T=n(O),R=a(30),A=a(108),I=a(20),w=n(I),N=a(35),D=a(131),P=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={apiError:!1,isRestoredDialogShown:!1},a.createNewScenario=a.createNewScenario.bind(a),a.applyRestoredData=a.applyRestoredData.bind(a),a}return l(t,e),d(t,[{key:"componentDidMount",value:function(){null===this.props.study&&this.props.getStudy(this.props.studyId),0===this.props.regionsCountries.length&&this.props.loadRegions()}},{key:"componentWillReceiveProps",value:function(e){e.dirtyData&&!this.state.isRestoredDialogShown&&this.setState({isRestoredDialogShown:!0})}},{key:"createNewScenario",value:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.props.createNewScenario.apply(this,Object.values(t))}},{key:"applyRestoredData",value:function(){(0,N.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"-"+this.props.studyId+"-new"),this.setState({isRestoredDialogShown:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.studyId,n=t.study,r=t.regionsCountries,i=t.goToStudy,l=t.showCohorts,o=t.requirePageRefresh,s=t.activeUser,u=t.dirtyData;if(!n||!r||0===r.length)return null;var d=l?"scenario-wizard__create--cohort":"scenario-wizard__create";return n.state.status===w.default.ACTIVE?f.default.createElement(y.default,{isShown:!0,status:"error",title:"Forbidden",handleClose:function(){return i(a)}},"You do not have access to view this page"):f.default.createElement("div",null,!this.state.isRestoredDialogShown&&f.default.createElement(E.default,{showCohorts:l,studyId:a,study:n,regionsCountries:r,onClose:i,activeUser:s,dirtyData:this.state.discardChanges?null:u,requirePageRefresh:o,forbiddenError:this.props.forbiddenError,onSubmit:this.createNewScenario}),f.default.createElement(b.default,{isShown:this.state.isRestoredDialogShown&&!o,onSubmit:function(){return e.applyRestoredData()},onClose:function(){(0,N.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-new"),e.setState({isRestoredDialogShown:!1,discardChanges:!0})}}),f.default.createElement(C.ContextHelpButton,{page:d}))}}]),t}(c.Component);P.defaultProps={study:null,showCohorts:!1,requirePageRefresh:!1,dirtyData:null},P.propTypes={createNewScenario:h.default.func.isRequired,getStudy:h.default.func.isRequired,goToStudy:h.default.func.isRequired,loadRegions:h.default.func.isRequired,regionsCountries:h.default.array.isRequired,study:h.default.object,studyId:h.default.number.isRequired,showCohorts:h.default.bool,activeUser:h.default.object.isRequired,requirePageRefresh:h.default.bool,dirtyData:h.default.object,forbiddenError:h.default.func.isRequired},t.default=(0,m.connect)(o,s)(P)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1055),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=e.errors.sessionExpired||e.errors.internalServer,n=e.auth.user;return{dirtyData:(0,R.getParamItemStorage)("fpo-dirty-data",n.id+"--1-new","values"),activeUser:n,requirePageRefresh:a,availableIndications:(0,E.default)(e.platform.studyOptions,"indications",[]),availableTherapeuticAreas:(0,E.default)(e.platform.studyOptions,"therapeuticAreas",[]),regionsCountries:e.platform.regions.map(function(e){var t=e.countries.map(function(e){return u({},e,{platform_country_id:e.id})});return u({},e,{countries:t})}),showCohorts:t.location.search&&t.location.search.indexOf("cohorts=true")>-1}}function s(e){return{closeWizard:function(){return e((0,v.push)("/studies"))},loadRegions:function(){return e((0,T.getPlatformRegions)())},createNewStudyAndScenario:function(t){return e((0,O.createNewStudyAndScenario)(t))},getStudyOptions:function(){return e((0,T.getStudyOptions)())},forbiddenError:function(t){return e((0,A.forbiddenError)(t))}}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),h=n(p),v=a(19),m=a(7),_=a(12),E=n(_),g=a(482),y=n(g),S=a(165),b=n(S),C=a(44),O=a(30),T=a(108),R=a(35),A=a(131),I=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={apiError:!1,isRestoredDialogShown:!1},a.handleSubmit=a.handleSubmit.bind(a),a.applyRestoredData=a.applyRestoredData.bind(a),a}return l(t,e),d(t,[{key:"componentDidMount",value:function(){0===this.props.regionsCountries.length&&this.props.loadRegions(),this.props.getStudyOptions()}},{key:"componentWillReceiveProps",value:function(e){e.dirtyData&&!this.state.isRestoredDialogShown&&this.setState({isRestoredDialogShown:!0})}},{key:"handleSubmit",value:function(e,t){var a={study:e,scenario:t};this.props.createNewStudyAndScenario(a)}},{key:"applyRestoredData",value:function(){(0,R.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"--1-new"),this.setState({isRestoredDialogShown:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.regionsCountries,n=t.availableIndications,r=t.availableTherapeuticAreas,i=t.closeWizard,l=t.showCohorts,o=t.requirePageRefresh,s=t.activeUser,u=t.dirtyData;if(!a||0===a.length)return null;var d=l?"study-wizard__create--cohort":"study-wizard__create";return f.default.createElement("div",null,!this.state.isRestoredDialogShown&&f.default.createElement(y.default,{forbiddenError:this.props.forbiddenError,activeUser:s,requirePageRefresh:o,dirtyData:this.state.discardChanges?null:u,newStudy:!0,showCohorts:l,studyId:-1,study:{},regionsCountries:a,onClose:i,onSubmit:this.handleSubmit,availableIndications:n,availableTherapeuticAreas:r}),f.default.createElement(b.default,{isShown:this.state.isRestoredDialogShown&&!o,onSubmit:function(){return e.applyRestoredData()},onClose:function(){(0,R.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"--1-new"),e.setState({isRestoredDialogShown:!1,discardChanges:!0})}}),f.default.createElement(C.ContextHelpButton,{page:d}))}}]),t}(c.Component);I.defaultProps={showCohorts:!1,requirePageRefresh:!1,dirtyData:null},I.propTypes={availableIndications:h.default.array.isRequired,availableTherapeuticAreas:h.default.array.isRequired,getStudyOptions:h.default.func.isRequired,createNewStudyAndScenario:h.default.func.isRequired,closeWizard:h.default.func.isRequired,loadRegions:h.default.func.isRequired,regionsCountries:h.default.array.isRequired,showCohorts:h.default.bool,activeUser:h.default.object.isRequired,requirePageRefresh:h.default.bool,dirtyData:h.default.object,forbiddenError:h.default.func.isRequired},t.default=(0,m.connect)(o,s)(I)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1057),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{notifications:e.notification.notifications}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),f=a(32),p=n(f),h=a(1),v=n(h),m=a(291),_=a(7),E=a(19),g=a(2),y=n(g),S=a(6),b=a(766),C=n(b),O=a(13);a(2234);var T={entering:{transform:"translate3d(0, 0, 0)"},entered:{transform:"translate3d(-340px, 0, 0)"},exiting:{transform:"translate3d(-340px, 0, 0)"},exited:{transform:"translate3d(0, 0, 0)"}},R=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.notifications,a=e.push,n=e.hideNotification;return p.default.createPortal(c.default.createElement("div",{className:"fpo-notifications"},t.map(function(e){var t=e.animateIn,r=e.notificationType,i=e.message,l=e.id,o=e.link;return c.default.createElement(m.Transition,{in:t,timeout:0,key:l,appear:!0},function(e){return c.default.createElement("div",{onClick:function(){o&&(n(l),a(o))},className:(0,y.default)("fpo-notifications-panel",{clickable:o}),style:s({},T[e])},c.default.createElement("div",{className:"fpo-notifications-panel__content-wrapper"},r&&(r===O.SUCCESS||r===O.ERROR)&&c.default.createElement("div",{className:(0,y.default)("status-icon__wrapper",{success:r===O.SUCCESS,error:r===O.ERROR})},r===O.SUCCESS?S.Icons.SUCCESS:S.Icons.CROSS_O),c.default.createElement("div",{className:"notification-message__wrapper"},i),c.default.createElement("div",{className:"notification-close",onClick:function(e){e.stopPropagation(),n(l)}},S.Icons.CROSS)))})})),document.body)}}]),t}(d.Component);R.defaultProps={notifications:[]},R.propTypes={notifications:v.default.array,push:v.default.func.isRequired,hideNotification:v.default.func.isRequired};var A={hideNotification:C.default,push:E.push};t.default=(0,_.connect)(o,A)(R)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(12),o=n(l),s=a(17),u=a(945),d=n(u),c=a(936),f=n(c),p=a(962),h=n(p),v=a(239),m=n(v),_=a(58),E=n(_),g=a(66),y=function(){var e=(0,r.useContext)(g.ScenarioViewerState),t=e.study,a=e.scenario;return i.default.createElement(E.default,null,i.default.createElement(h.default,null),i.default.createElement(f.default,null),i.default.createElement(d.default,null),(0,o.default)(a,"studyParamsWarning.showStudyParamsWarning",!1)&&i.default.createElement(s.Grid,null,i.default.createElement(s.Row,null,i.default.createElement(s.Col,{offset:1,width:11},i.default.createElement(m.default,{study:t,scenario:a,data:(0,o.default)(a,"studyParamsWarning"),studyId:t.id,scenarioId:a.id,status:a.status})))))};t.default=i.default.memo(y)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(2),u=n(s),d=a(17),c=a(325),f=n(c),p=a(330),h=n(p),v=a(83),m=n(v),_=a(58),E=n(_),g=function(e){var t=e.isApproved,a=e.isAdjusted,n=e.scenario,r=e.globalRollupData,l=e.fullData,o=e.study;return i.default.createElement(m.default,{style:{zIndex:4}},i.default.createElement("div",{className:(0,u.default)("scenario__title-bar",{approved:t})},i.default.createElement(d.Grid,null,i.default.createElement(d.Row,{style:{height:"87px"}},i.default.createElement(d.Col,{offset:1,width:6},i.default.createElement(E.default,null,i.default.createElement(f.default,{name:n.name,modified:n.updatedAt,optimised:n.last_optimisation_date,adjusted:n.adjusted_createdAt,approvedAt:n.approvedAt,status:n.status,isAdjusted:a,optimisationWarning:l.some(function(e){return e.unlock&&e.unlock.length>0}),originScenario:n.originScenario,createdAt:n.createdAt,studyId:o.study_id}))),i.default.createElement(d.Col,{width:5},i.default.createElement("div",{className:"scenario-alerts-wrapper"},i.default.createElement(E.default,null,i.default.createElement(h.default,{scenario:n,globalData:r,study:o}))))))))};g.defaultProps={isApproved:!1,isAdjusted:!1},g.propTypes={isApproved:o.default.bool,isAdjusted:o.default.bool,scenario:o.default.object.isRequired,globalRollupData:o.default.object.isRequired,study:o.default.object.isRequired,fullData:o.default.array.isRequired},t.default=i.default.memo(g)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1061),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(7),o=a(16);a(1778),a(1786);var s=a(1091),u=n(s),d=a(1035),c=n(d),f=a(1046),p=a(1028),h=n(p),v=a(1097),m=n(v),_=a(885),E=n(_),g=a(1019),y=n(g),S=a(1083),b=n(S),C=a(1081),O=n(C),T=a(779),R=n(T),A=a(1054),I=n(A),w=a(135),N=n(w),D=a(1093),P=n(D),L=a(1042),M=n(L),k=a(1032),x=n(k),j=a(1051),F=n(j),U=a(1078),V=n(U),B=a(1063),H=n(B),G=a(1030),Y=n(G),z=a(1026),W=n(z),q=a(1024),K=n(q),X=a(1040),Z=n(X),J=a(1052),Q=n(J),$=a(236),ee=n($),te=a(460),ae=n(te);a(2116),a(1780),Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject&&new Promise(function(e){a.e(7).then(function(t){e(a(2307))}.bind(null,a)).catch(a.oe)});var ne=(0,r.lazy)(function(){return new Promise(function(e){a.e(4).then(function(t){e(a(2306))}.bind(null,a)).catch(a.oe)})}),re=(0,r.lazy)(function(){return new Promise(function(e){a.e(1).then(function(t){e(a(2305))}.bind(null,a)).catch(a.oe)})}),ie=(0,r.lazy)(function(){return new Promise(function(e){a.e(3).then(function(t){e(a(2304))}.bind(null,a)).catch(a.oe)})}),le=(0,R.default)(I.default,[N.default.ADMIN,N.default.USER,N.default.PLAYGROUND]),oe=(0,R.default)(M.default,[N.default.ADMIN,N.default.USER,N.default.PLAYGROUND]),se=(0,R.default)(Z.default,[N.default.ADMIN,N.default.USER,N.default.PLAYGROUND,N.default.READONLY]),ue=(0,R.default)(Q.default,[N.default.ADMIN,N.default.USER,N.default.PLAYGROUND]),de=function(){var e=(0,l.useDispatch)();return(0,l.useSelector)(function(e){return e.auth.user&&e.auth.user.id})?i.default.createElement("div",{className:"full-height"},i.default.createElement(y.default,null,i.default.createElement(o.Switch,null,i.default.createElement(o.Route,{exact:!0,path:"/"},i.default.createElement(o.Redirect,{to:"/studies"})),i.default.createElement(o.Route,{path:"/studies"},i.default.createElement(b.default,null,i.default.createElement(o.Switch,null,i.default.createElement(o.Route,{exact:!0,path:"/studies",component:O.default}),i.default.createElement(o.Route,{exact:!0,path:"/studies/new",component:le}),i.default.createElement(o.Route,{path:"/studies/:id"},i.default.createElement(u.default,null,i.default.createElement(o.Switch,null,i.default.createElement(o.Route,{path:"/studies/:id/archived",component:P.default}),i.default.createElement(o.Route,{path:"/studies/:id/edit",component:oe}),i.default.createElement(o.Route,{path:"/studies/:id/compare",component:x.default}),i.default.createElement(o.Route,{path:"/studies/:id/csms"},i.default.createElement(c.default,null)),i.default.createElement(o.Route,{path:"/studies/:id/historical"},i.default.createElement(f.HistoricalDataPreloader,null,i.default.createElement(o.Route,{exact:!0,path:"/studies/:id/historical",component:f.HistoricalReferenceTrials}),i.default.createElement(o.Route,{path:"/studies/:id/historical/summary",component:f.HistoricalReferenceSummary}))),i.default.createElement(o.Route,{path:"/studies/:id/scenarios"},i.default.createElement(o.Switch,null,i.default.createElement(o.Route,{path:"/studies/:id/scenarios/new",component:ue}),i.default.createElement(o.Route,{path:"/studies/:id/scenarios/impact",component:F.default}),i.default.createElement(o.Route,{path:"/studies/:id/scenarios/:scenarioId/edit",component:se}),i.default.createElement(o.Route,{path:"/studies/:id/scenarios/:scenarioId/events",component:H.default}),i.default.createElement(o.Route,{path:"/studies/:id/scenarios/:scenarioId/sites/:countryId"},i.default.createElement(r.Suspense,{fallback:i.default.createElement(ee.default,null)},i.default.createElement(ne,null,i.default.createElement(o.Route,{exact:!0,path:"/studies/:id/scenarios/:scenarioId/sites/:countryId",component:re}),i.default.createElement(o.Route,{path:"/studies/:id/scenarios/:scenarioId/sites/:countryId/site/:siteId",component:ie})))),i.default.createElement(o.Route,{path:"/studies/:id/scenarios/:scenarioId/cohorts"},i.default.createElement(h.default,null,i.default.createElement(o.Route,{exact:!0,path:"/studies/:id/scenarios/:scenarioId/cohorts",component:Y.default}),i.default.createElement(o.Route,{path:"/studies/:id/scenarios/:scenarioId/cohorts/:cohortId",component:W.default}))),i.default.createElement(o.Route,{path:"/studies/:id/scenarios/:scenarioId/cohorts-events/:cohortId",component:K.default}),i.default.createElement(o.Route,{path:"/studies/:id/scenarios/:scenarioId",component:V.default}))),i.default.createElement(o.Route,{path:"/studies/:id",component:P.default}))))))),i.default.createElement(o.Route,{path:"/tests",component:m.default}),i.default.createElement(o.Route,{path:"*",component:function(){return i.default.createElement(E.default,{title:"Oops! The page you are trying to reach does not exist (404)"})}})))):(e((0,ae.default)()),null)};t.default=de},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.areEventsValid=t.getEventsStatistics=t.getAvailableLocations=t.getEvents=t.getScenarioFromStore=t.getEventsFromStore=void 0;var r=a(47),i=a(77),l=a(46),o=t.getEventsFromStore=function(e,t){return e.events[t.match.params.scenarioId]||[]},s=t.getScenarioFromStore=function(e,t){return e.scenarios[t.match.params.scenarioId]||{}},u=t.getEvents=(0,r.createSelector)([o,s],function(e,t){var a=e.filter(function(e){return e.state!==l.EVENT_STATE.DELETED});return a.forEach(function(e){e.isValid=(0,i.validateByType)(e,t)}),a});t.getAvailableLocations=function(e){return e.platform.regions},t.getEventsStatistics=(0,r.createSelector)(u,function(e){var t;return e.reduce(function(e,t){if(!t.isValid)return e;switch(t.status){case l.EVENT_STATUS.ACTIVE:e[t.event_type].inProgress+=1;break;case l.EVENT_STATUS.PENDING:e[t.event_type].pending+=1;break;case l.EVENT_STATUS.COMPLETED:default:e[t.event_type].completed+=1}return e[t.event_type].total+=1,e},(t={},n(t,l.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),n(t,l.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS,{inProgress:0,pending:0,completed:0,total:0}),n(t,l.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),n(t,l.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),t))}),t.areEventsValid=(0,r.createSelector)(o,function(e){var t=e.filter(function(e){return!e.isValid}),a=e.filter(function(e){return e.state});return 0===t.length&&a.length>0})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1064),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=parseInt(t.match.params.scenarioId,10),n=parseInt(t.match.params.id,10);return{scenario:e.scenarios[a],studyId:n,study:e.study[n]||{state:{status:z.default.PLANNED}},scenarioId:a,events:(0,G.getEvents)(e,t),locations:(0,G.getAvailableLocations)(e,t),stat:(0,G.getEventsStatistics)(e,t),eventsAreValid:(0,G.areEventsValid)(e,t),allEvents:(0,G.getEventsFromStore)(e,t),activeUser:e.auth.user,groupByType:e.events.groupByType}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(7),h=a(19),v=a(16),m=a(40),_=n(m),E=a(81),g=n(E),y=a(12),S=n(y),b=a(17),C=a(107),O=a(6),T=a(492),R=n(T),A=a(61),I=n(A),w=a(508),N=n(w),D=a(474),P=n(D),L=a(44),M=a(461),k=a(108),x=a(30),j=a(46),F=a(77),U=a(55),V=n(U),B=a(33),H=a(8),G=a(1062);a(734);var Y=a(20),z=n(Y),W=a(10),q=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.sortEventsByStartDate=function(){a.props.sortEventsByStartDate(a.props.scenarioId,a.state.sortOrder,!1),a.setState({sortOrder:!a.state.sortOrder})},a.toggleGroupByType=function(){a.props.toggleGroupEventsByType(),a.props.sortEventsByStartDate(a.props.scenarioId,!a.state.sortOrder,!1)},a.state={sortOrder:!1},a.scrollTop=0,a.containerWidth=0,a.containerLeft=0,a.handleResize=a.handleResize.bind(a),a.handleAddNewEvent=a.handleAddNewEvent.bind(a),a.handleEventUpdate=a.handleEventUpdate.bind(a),a.handleEventDuplicate=a.handleEventDuplicate.bind(a),a.handleEventRemove=a.handleEventRemove.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.handleEventDisable=a.handleEventDisable.bind(a),a}return l(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.studyId,a=e.scenarioId;window.addEventListener("resize",this.handleResize),window.addEventListener("scroll",this.handleResize),this.handleResize(),this.props.getScenarioViewerData(t,a),this.props.getScenarioEvents(a,t)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("scroll",this.handleResize)}},{key:"handleResize",value:function(e){var t=this.container;if(t){var a=t.getBoundingClientRect();this.containerWidth=a.width,this.containerLeft=a.left;var n=document.querySelector(".application").getBoundingClientRect().top;e&&("scroll"===e.type&&this.scrollTop===n||"resize"===e.type)?this.forceUpdate():this.scrollTop=n}}},{key:"handleAddNewEvent",value:function(e){var t=(0,F.getNewEventByType)(e);this.props.addNewEvent(this.props.scenarioId,t)}},{key:"handleEventUpdate",value:function(e,t,a){this.props.updateEvent(this.props.scenarioId,e,t,a)}},{key:"handleEventDuplicate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.props.duplicateEvent(this.props.scenarioId,e,t)}},{key:"handleEventRemove",value:function(e){this.props.removeEvent(this.props.scenarioId,e)}},{key:"handleSubmit",value:function(){var e=this,t=this.props,a=t.allEvents,n=t.scenarioId,r=t.studyId,i=[];a.forEach(function(e){if(e.state){var t=(0,_.default)(e);t.locations=[],e.locations.forEach(function(e){e.countries.forEach(function(a){t.locations.push({platform_country_id:a.platform_country_id,country_name:a.name,region_name:e.name})})}),i.push((0,g.default)(t,"isValid"))}}),this.props.applyScenarioEventsChanges(r,n,i).then(function(){return e.props.push("/studies/"+r+"/scenarios/"+n)})}},{key:"handleEventDisable",value:function(e,t){this.props.updateEvent(this.props.scenarioId,e,"disabled",t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.events,n=t.studyId,r=t.scenarioId,i=t.locations,l=t.scenario,o=t.study,s=t.stat,u=t.activeUser,c=t.groupByType,f=(0,V.default)(u,o,l),p=f.isTracking,h=f.isAdjusted,m=f.isUserHasScenarioFullControl,_=m&&l&&l.status!==W.SCENARIO_STATUS.APPROVED&&l.status!==W.SCENARIO_STATUS.PREV_APPROVED&&l.countries.length>0&&!(p&&!h)&&(0,H.isEditableScenario)(l,u,o),E=(0,H.isOptimizing)(l),g="ACTIVE"===(0,S.default)(o,"state.status")?"events-page--tracking":"events-page";return d.default.createElement("div",{className:"scenario-events"},d.default.createElement(C.Sidebar,null,d.default.createElement(C.Button,{height:60},d.default.createElement(v.NavLink,{to:"/"},O.Icons.HOME)),d.default.createElement(C.Separator,{height:20}),d.default.createElement(C.Button,{height:56,onClick:this.sortEventsByStartDate,tooltip:"Sort events by start date"},this.state.sortOrder?O.Icons.FILTER_DESCENDING:O.Icons.FILTER_ASCENDING),d.default.createElement(C.Button,{height:56,onClick:this.toggleGroupByType,tooltip:this.props.groupByType?"Ungroup events":"Group events by type"},this.props.groupByType?O.Icons.UNGROUP:O.Icons.GROUP)),d.default.createElement(b.Grid,null,d.default.createElement(b.Row,null,d.default.createElement(b.Col,{offset:1,width:10},d.default.createElement(R.default,{numberOfEvents:a.filter(function(e){return e.isValid}).length})),d.default.createElement("div",{className:"fpo-col-1",width:1,ref:function(t){e.container=t}},d.default.createElement("div",{className:"scenario-events__fixed-bar",style:{width:this.containerWidth,left:this.containerLeft}},d.default.createElement("div",{className:"fixed-bar_line"}),d.default.createElement("div",{className:"scenario-events__close-button",onClick:function(){return e.props.push("/studies/"+n+"/scenarios/"+r)}},O.Icons.CROSS)))),d.default.createElement(b.Row,null,d.default.createElement(b.Col,{offset:1,width:10,style:{display:"flex"}},d.default.createElement(P.default,{isOptimizing:E,actionable:_,type:j.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE,counters:s[j.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE],isTracking:p,onAdd:function(){return e.handleAddNewEvent(j.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE)}}),d.default.createElement(P.default,{isOptimizing:E,actionable:_,type:j.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS,counters:s[j.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS],isTracking:p,onAdd:function(){return e.handleAddNewEvent(j.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS)}}),d.default.createElement(P.default,{isOptimizing:E,actionable:_,type:j.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE,counters:s[j.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE],isTracking:p,onAdd:function(){return e.handleAddNewEvent(j.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE)}}),d.default.createElement(P.default,{isOptimizing:E,actionable:_,type:j.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE,counters:s[j.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE],isTracking:p,onAdd:function(){return e.handleAddNewEvent(j.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE)}})))),d.default.createElement("div",{style:{height:"20px"}}),d.default.createElement(N.default,{onDisable:this.handleEventDisable,isTracking:o.state.status===z.default.ACTIVE,events:a,scenario:l,onUpdate:this.handleEventUpdate,onDuplicate:this.handleEventDuplicate,onRemove:this.handleEventRemove,locations:i,isAdjusted:h,metadata:f,groupByType:c,activeUser:u}),d.default.createElement(b.Grid,null,d.default.createElement(b.Row,null,d.default.createElement(b.Col,{offset:1,width:10},d.default.createElement("div",{className:"scenario-events-control-buttons__wrapper"},d.default.createElement(I.default,{label:"Cancel",className:"secondary-button",onClick:function(){return e.props.push("/studies/"+n+"/scenarios/"+r)}}),d.default.createElement(I.default,{disabled:!this.props.eventsAreValid,label:"Apply",onClick:this.handleSubmit}))))),d.default.createElement(L.ContextHelpButton,{page:g}))}}]),t}(u.Component);q.defaultProps={events:[],scenario:null,allEvents:[],eventsAreValid:!1},q.propTypes={studyId:f.default.number.isRequired,scenarioId:f.default.number.isRequired,events:f.default.array,getScenarioEvents:f.default.func.isRequired,push:f.default.func.isRequired,addNewEvent:f.default.func.isRequired,updateEvent:f.default.func.isRequired,locations:f.default.array.isRequired,duplicateEvent:f.default.func.isRequired,removeEvent:f.default.func.isRequired,study:f.default.object.isRequired,stat:f.default.object.isRequired,allEvents:f.default.array,eventsAreValid:f.default.bool,getScenarioViewerData:f.default.func.isRequired,scenario:f.default.object,applyScenarioEventsChanges:f.default.func.isRequired,sortEventsByStartDate:f.default.func.isRequired,activeUser:f.default.object.isRequired,toggleGroupEventsByType:f.default.func.isRequired,groupByType:f.default.bool.isRequired};var K={getScenarioEvents:M.getScenarioEvents,addNewEvent:M.addNewEvent,updateEvent:M.updateEvent,duplicateEvent:M.duplicateEvent,removeEvent:M.removeEvent,getPlatformRegions:k.getPlatformRegions,getPlainStudy:x.getPlainStudy,getScenarioViewerData:B.getScenarioViewerData,applyScenarioEventsChanges:M.applyScenarioEventsChanges,sortEventsByStartDate:M.sortEventsByStartDate,toggleGroupEventsByType:M.toggleGroupEventsByType,push:h.push};t.default=(0,p.connect)(o,K)(q)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1058),o=n(l),s=a(83),u=n(s),d=a(34),c=function(){return i.default.createElement(u.default,{style:{top:(0,d.getStickyPosition)("ALERTS")+"px",zIndex:4},className:"scenario-viewer-alerts__container"},i.default.createElement(o.default,null))};t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a(0),l=n(i),o=a(7),s=a(17),u=a(58),d=n(u),c=a(133),f=n(c),p=a(118),h=n(p),v=a(66),m=a(750),_=a(34),E=function(){var e=(0,i.useContext)(v.ScenarioViewerState),t=e.selectedCountryData,a=e.study,n=e.scenario,u=e.showAlert,p=e.metadata,E=(0,o.useSelector)(function(e){return e.scenarios.chartCollapsed}),g=(0,i.useState)(!1),y=r(g,2),S=y[0],b=y[1],C=(0,i.useRef)(),O=(0,i.useRef)(function(){return!1}),T=(0,m.useIntersect)({threshold:.75,rootMargin:"80px 0px 0px 0px"}),R=r(T,2),A=R[0],I=R[1];return(0,i.useLayoutEffect)(function(){I.current&&C.current&&(A&&A.boundingClientRect&&A.boundingClientRect.top<=-150&&!O.current?(C.current.style.visibility="visible",I.current.style.visibility="hidden",O.current=!0):O.current&&(C.current.style.visibility="hidden",I.current.style.visibility="visible",O.current=!1))},[I,A]),l.default.createElement(h.default,{isOptimizing:p.optimizingStatus,scenario:n,isImpact:!1,studyStatus:a.state.status,showOverallocation:S,showAlert:u,data:t},l.default.createElement("div",{ref:I,className:"chart-container"},l.default.createElement(s.Grid,null,l.default.createElement(s.Row,null,l.default.createElement(s.Col,{offset:1,width:11},l.default.createElement("div",{className:"full-chart"},l.default.createElement(d.default,null,l.default.createElement(f.default,{onToggleOverallocation:b}))))))),l.default.createElement("div",{ref:C,style:{top:(0,_.getStickyPosition)("MINI_CHART",u,E)+"px"},className:"minimised-chart-container exclude-from-screenshot"},l.default.createElement(s.Grid,null,l.default.createElement(s.Row,null,l.default.createElement(s.Col,{offset:1,width:11},l.default.createElement("div",{className:"minimised-chart"},l.default.createElement(d.default,null,l.default.createElement(c.MinimisedEnrolmentChart,null))))))))};t.default=E},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(7),o=a(1066),s=n(o),u=function(){return(0,l.useSelector)(function(e){return e.scenarios.chartCollapsed})?null:i.default.createElement(s.default,null)};t.default=u},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.STICKY_PARAMS={alertsHeight:44,alertsPosition:87,historicalBenchmarkHeight:50,historicalBenchmarkPosition:344,locationsFilterPosition:87,tableHeaderPosition:394,miniChartPosition:146,miniChartHeight:200};t.default=n},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),l=n(i),o=a(7),s=a(54),u=n(s),d=a(12),c=n(d),f=a(19),p=a(16),h=a(58),v=n(h),m=a(193),_=n(m),E=a(320),g=n(E),y=a(463),S=n(y),b=a(877),C=n(b),O=a(165),T=n(O),R=a(10),A=a(20),I=n(A),w=a(42),N=n(w),D=a(33),P=a(66),L=a(332),M=a(96),k=a(35),x=function(){var e=(0,o.useDispatch)(),t=(0,p.useParams)(),a=t.id,n=t.scenarioId,s=(0,i.useContext)(P.ScenarioViewerState),d=s.study,h=s.scenario,E=s.fullData,y=s.state,b=s.setState,O=s.platformRegions,A=s.activeUser,w=s.metadata,x=s.globalData,j=s.isPersisted,F=s.requirePageRefresh,U=(0,o.useSelector)(function(e){return(0,u.default)(e.scenarios,["dataToSave","deleteCountries","enableSave"])}),V=U.dataToSave,B=U.deleteCountries,H=(0,o.useSelector)(function(e){return e.studies.studies}),G=(V.length>0||B.length>0)&&!F,Y=(0,i.useCallback)(function(){return(0,L.saveData)(e,a,n,V,B,O,A)},[A,V,B,e,a,O,n]),z=(0,i.useCallback)(function(){b({type:"SET_VALUES",payload:{showDuplicateDialog:!0}})},[b]),W=(0,i.useCallback)(function(t,n,r,i,l){var o=(h.status===R.SCENARIO_STATUS.APPROVED||h.status===R.SCENARIO_STATUS.PREV_APPROVED)&&d.state.status===I.default.ACTIVE;new Promise(function(a){return a(e(l?(0,D.createAdjustmentScenario)(h.id,t,null,r,i):(0,D.duplicateScenario)(h.id,t,null,r,i,o)))}).then(function(t){var r=t.id;return e((0,f.push)("/studies/"+(n||a)+"/scenarios/"+r))})},[e,a,h.id,h.status,d.state.status]),q=(0,i.useCallback)(function(){b({type:"SET_VALUES",payload:{showOptimizeDialog:!0}})},[b]),K=(0,i.useCallback)(function(){var t=(0,k.getLocalStorageItem)("fpo-failed-scenario-job",{});delete t[h.id],(0,k.setLocalStorageItem)("fpo-failed-scenario-job",t),e((0,D.optimiseScenario)(n)).then(function(){return e((0,D.updateScenarioJobStatus)(n,h.study_id,N.default.QUEUED))}).then(function(){return b({type:"SET_VALUES",payload:{showOptimizeDialog:!1}})})},[e,n,b,h.study_id,h.id]),X=(0,i.useCallback)(function(){b({type:"SET_VALUES",payload:{showApproveDialog:!0}})},[b]),Z=(0,i.useCallback)(function(){var t=null!==h.source_scenario_id?"adjusted_":"",r=E[0],i=(0,c.default)(r,t+"overallocatedData");e((0,D.approveScenario)(a,n,(0,M.serializeScenarioData)(d,h,E),{predicted_lpft:i?i.lpft:r[t+"lpft"],predicted_fpfv_lpfv:i?i.fpfv_lpfv:r[t+"fpfv_lpfv"],predicted_patient_allocation:i?i.patient_allocation:r[t+"patient_allocation"],predicted_num_sites:i?i.num_sites:r[t+"num_sites"],predicted_num_countries:r.amount_countries}))},[a,n,e,d,h,E]),J=(0,i.useCallback)(function(){e({type:"[SCENARIO VIEWER] APPLY_RESTORED_DATA"})},[e]),Q=(0,i.useCallback)(function(){e({type:"[SCENARIO VIEWER] IGNORE_RESTORED_DATA",studyId:a,scenarioId:n}),e((0,D.getScenarioViewerData)(a,n))},[e,a,n]);return(0,i.useEffect)(function(){j?b({type:"SET_VALUES",payload:{showRestoredDataDialog:!0}}):!j&&y.showRestoredDataDialog&&b({type:"SET_VALUES",payload:{showRestoredDataDialog:!1}})},[j,b,y.showRestoredDataDialog]),l.default.createElement(l.default.Fragment,null,l.default.createElement(v.default,{hidden:!0},l.default.createElement(m.SaveChangesDialog,{isShown:y.showSaveChangesDialog,onSubmit:Y,actionType:y.saveChangesActionType,callbackActions:[{type:R.SIDEBAR_BUTTONS.EVENT,action:function(){return e((0,f.push)("/studies/"+a+"/scenarios/"+n+"/events"))}},{type:R.SIDEBAR_BUTTONS.DUPLICATE,action:z},{type:R.SIDEBAR_BUTTONS.EXPORT,action:function(){return e((0,D.exportScenarioData)(a,n))}},{type:R.SIDEBAR_BUTTONS.EDIT,action:function(){return e((0,f.push)("/studies/"+a+"/scenarios/"+n+"/edit"))}},{type:R.SIDEBAR_BUTTONS.APPROVE,action:X},{type:R.SIDEBAR_BUTTONS.OPTIMISE,action:q}],onClose:function(){return b({type:"SET_VALUES",payload:{showSaveChangesDialog:!1}})}})),l.default.createElement(v.default,{hidden:!0},y.showDuplicateDialog&&l.default.createElement(g.default,{study:d,scenario:r({},h,{fullData:E}),studies:H,isShown:y.showDuplicateDialog,onClose:function(){return b({type:"SET_VALUES",payload:{showDuplicateDialog:!1}})},onSubmit:W,showCreateAdjustedOption:(h.status===R.SCENARIO_STATUS.APPROVED||h.status===R.SCENARIO_STATUS.PREV_APPROVED)&&d.state.status===I.default.ACTIVE,isAdjusted:!!h.source_scenario_id,isApproved:h.status===R.SCENARIO_STATUS.APPROVED,isPrevApproved:h&&h.status===R.SCENARIO_STATUS.PREV_APPROVED}),l.default.createElement(C.default,{isShown:y.showOptimizeDialog,scenarioName:h.name,onClose:function(){return b({type:"SET_VALUES",payload:{showOptimizeDialog:!1}})},onSubmit:K}),l.default.createElement(S.default,{willOverride:d.scenarios.some(function(e){return e.status===R.SCENARIO_STATUS.APPROVED}),predictedPatients:(w.isAdjusted?x.adjusted_patient_allocation:x.patient_allocation)||0,targetPatients:h.target_num_patients||0,targetDate:w.isAdjusted?h.adjusted_createdAt:h.end_date,predictedDate:w.isAdjusted?x.adjusted_lpft:x.lpft,fullData:E,isShown:y.showApproveDialog,onClose:function(){return b({type:"SET_VALUES",payload:{showApproveDialog:!1}})},onSubmit:Z}),l.default.createElement(T.default,{isShown:y.showRestoredDataDialog,onSubmit:J,onClose:Q})),l.default.createElement(_.default,{hasUnsaved:G}))};t.default=x},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(7),o=a(17),s=a(232),u=n(s),d=a(83),c=n(d),f=a(66),p=a(53),h=a(34),v=function(){var e=(0,l.useDispatch)(),t=(0,r.useContext)(f.ScenarioViewerState),a=t.showAlert,n=t.fullData,s=t.platformRegions,d=(0,l.useSelector)(p.getScenarioViewerFilter),v=(0,r.useCallback)(function(t){e({type:"[SCENARIO VIEWER] SET_FIELD_VALUE",field:"filter",payload:t})},[e]);return i.default.createElement(c.default,{key:(0,h.getStickyPosition)("FILTER",a,!1),style:{top:(0,h.getStickyPosition)("FILTER",a,!1)+"px",zIndex:4}},i.default.createElement("div",{className:"filters-container"},i.default.createElement(o.Grid,null,i.default.createElement(o.Row,null,i.default.createElement(o.Col,{offset:1,width:11},i.default.createElement(u.default,{activeFilter:d,data:n,platformRegions:s,onFilterSelect:v}))))))};v.defaultProps={},v.propTypes={},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(7),o=a(17),s=a(58),u=n(s),d=a(238),c=n(d),f=a(755),p=n(f),h=a(133),v=a(53),m=a(66),_=a(241),E=a(28),g=n(E),y=a(10),S=function(){var e=(0,l.useDispatch)(),t=(0,g.default)(),a=(0,l.useSelector)(function(e){return(0,v.getUserAccessDetails)(e,t)}),n=(0,r.useContext)(m.ScenarioViewerState),s=n.study,d=n.globalData,f=n.scenario,E=n.selectedCountryData,S=(0,l.useSelector)(function(e){return e.scenarios.chartCollapsed});return i.default.createElement(o.Grid,null,i.default.createElement(o.Row,{className:"scenario-highlights-bar"},i.default.createElement(u.default,null,i.default.createElement(c.default,{target:null!==f.source_scenario_id&&E?E.lpft:f.end_date,predicted:E.overallocatedData?E.overallocatedData.lpft:E.lpft,fpfv_lpfv:E.overallocatedData?E.overallocatedData.fpfv_lpfv:E.fpfv_lpfv,fpp_fpfv:E.fpp_fpfv,actual_date:E.actual_date,startDate:f.fp,actual_fpfv_lpfv:E.actual_fpfv_lpfv,actual_fpp_fpfv:E.actual_fpp_fpfv,actual_f_lpft:E.actual_f_lpft,adjusted_fpfv_lpfv:E.adjusted_fpfv_lpfv,adjusted_fpp_fpfv:f.exact_copy?E.adjusted_fpp_fpfv:null,adjustedLpft:(0,_.getPredictedDate)(d,!!f.source_scenario_id),showAdjusted:null!==f.source_scenario_id,showActual:(f.status===y.SCENARIO_STATUS.APPROVED||f.status===y.SCENARIO_STATUS.PREV_APPROVED||null!==f.source_scenario_id)&&"ACTIVE"===s.state.status,isOverallocated:void 0!==E.actual_overallocation&&0!==E.actual_overallocation,isIgnored:E.ignore_aggregation,globalData:d})),i.default.createElement(o.Col,{width:2},i.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"flex-end"}},i.default.createElement(p.default,{canChangeStatus:a.isAdmin||a.isUserHasScenarioFullControl,studyId:s.id,scenarioId:f.id}),i.default.createElement(h.ChartCollapseControl,{isCollapsed:S,onOptionSelect:function(){return e({type:"[SCENARIO VIEWER] SET_FIELD_VALUE",field:"chartCollapsed",payload:!S})}})))),!S&&i.default.createElement(o.Row,null,i.default.createElement(o.Col,{className:"highlights-bar-separator",offset:1},i.default.createElement("div",null))))};S.propTypes={},t.default=S},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(66),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(e,t){switch(t.type){case"SET_FIELD_VALUE":return r({},e,n({},t.field,t.payload));case"SET_VALUES":return r({},e,t.payload);default:return e}};var i=a(10);t.initialState={showMultiedit:!1,historicalView:!1,historicalFilter:"INDICATION",multiEditView:!1,multiEditType:i.MULTI_EDIT_TYPE.EDIT,showSaveChangesDialog:!1,showDuplicateDialog:!1,showOptimizeDialog:!1,showApproveDialog:!1,showRestoredDataDialog:!1,key:null}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(7),o=a(17),s=a(322),u=n(s),d=a(475),c=n(d),f=a(20),p=n(f),h=a(10),v=a(66),m=a(230),_=function(){var e=(0,l.useDispatch)(),t=(0,r.useContext)(v.ScenarioViewerState),a=t.scenario,n=t.study,s=t.setState,d=t.state;return i.default.createElement(o.Grid,null,i.default.createElement(o.Row,null,i.default.createElement(o.Col,{offset:8,width:4},i.default.createElement(u.default,{isEditable:!0,onClose:function(){return s({type:"SET_FIELD_VALUE",field:"showNotes",payload:!1})},expanded:d.showNotes,onSubmitNote:function(t,a){return e((0,m.addScenarioNote)(t,a))},scenarioId:a.id}),i.default.createElement(c.default,{onClose:function(){return s({type:"SET_FIELD_VALUE",field:"showEvents",payload:!1})},currentLocation:d.currentLocation,currentRegion:d.currentRegion,currentEvents:d.currentEvents,eventTrackingStatus:n.state.status===p.default.ACTIVE&&a.status!==h.SCENARIO_STATUS.OPEN,expanded:d.showEvents}))))};t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(16),o=a(7),s=a(19),u=a(54),d=n(u),c=a(107),f=a(6),p=a(58),h=n(p),v=a(34),m=a(332),_=a(451),E=a(33),g=a(53),y=a(10),S=a(66),b=a(321),C=n(b),O=function(){var e=(0,o.useDispatch)(),t=(0,l.useParams)(),a=t.id,n=t.scenarioId,u=(0,o.useSelector)(function(e){return(0,g.getScenarioNotesCount)(e,n)}),p=(0,o.useSelector)(g.getScenarioUndoLength),b=(0,o.useSelector)(g.getScenarioRedoLength),O=(0,o.useSelector)(g.getScenarioViewerFilter),T=(0,o.useSelector)(function(e){return(0,d.default)(e.scenarios,["dataToSave","deleteCountries","enableSave"])}),R=T.dataToSave,A=T.deleteCountries,I=T.enableSave,w=(0,r.useContext)(S.ScenarioViewerState),N=w.study,D=w.scenario,P=w.state,L=w.setState,M=w.isEditable,k=w.platformRegions,x=w.activeUser,j=w.metadata,F=w.globalData,U=w.requirePageRefresh,V=(R.length>0||A.length>0)&&!U,B=(0,r.useCallback)(function(){return(0,m.saveData)(e,a,n,R,A,k,x,F,null!==D.source_scenario_id)},[x,R,A,e,F,a,k,n,D.source_scenario_id]),H=(0,r.useCallback)(function(e){L({type:y.SCENARIO_VIEWER.SET_VALUES,payload:{showSaveChangesDialog:!0,saveChangesActionType:e}})},[L]),G=(0,r.useCallback)(function(){L({type:y.SCENARIO_VIEWER.SET_VALUES,payload:{showDuplicateDialog:!0}})},[L]),Y=(0,r.useCallback)(function(){L({type:y.SCENARIO_VIEWER.SET_VALUES,payload:{showOptimizeDialog:!0}})},[L]),z=(0,r.useCallback)(function(){L({type:y.SCENARIO_VIEWER.SET_VALUES,payload:{showApproveDialog:!0}})},[L]),W=(0,r.useCallback)(function(){e((0,E.exportScenarioData)(a,n))},[e,a,n]),q=function(e){return V?H:e};return i.default.createElement(h.default,null,i.default.createElement(c.Sidebar,null,i.default.createElement(c.Button,{className:"fpo-exit-button",height:60},i.default.createElement(l.NavLink,{to:"/studies"},f.Icons.HOME)),i.default.createElement(c.Separator,{height:20}),i.default.createElement(c.Button,{className:"fpo-exit-button",height:51,onClick:function(){return e((0,_.navigateToStudy)(a,D.is_archived))}},f.Icons.CHEVRON_LEFT),i.default.createElement(c.Separator,{height:22,noLine:!0}),i.default.createElement(c.Button,{height:56,onClick:function(){return L({type:"SET_FIELD_VALUE",field:"showNotes",payload:!P.showNotes})}},i.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},f.Icons.NOTES,i.default.createElement("div",{className:"sup"},u>0?(0,v.kFormatter)(u):""))),i.default.createElement(c.Button,{height:56,onClick:function(){return e((0,s.push)("/studies/"+a+"/scenarios/"+n+"/events"))},tooltip:"Events",actionName:y.SIDEBAR_BUTTONS.EVENT},i.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},f.Icons.EVENT,i.default.createElement("div",{className:"sup"},D.events&&D.events.length>0?(0,v.kFormatter)(D.events.length):""))),i.default.createElement(c.Separator,{height:20}),i.default.createElement(c.Button,{className:"fpo-exit-button",height:56,disabled:!p,onClick:function(){return e((0,E.undoLastAction)(n))}},i.default.createElement(c.AnimatedContent,{tooltip:"Undo",disabled:!p},f.Icons.UNDO)),i.default.createElement(c.Button,{className:"fpo-exit-button flip-vertical",height:56,disabled:!b,onClick:function(){return e((0,E.redoLastAction)(n))}},i.default.createElement(c.AnimatedContent,{tooltip:"Redo",disabled:!b},f.Icons.UNDO)),i.default.createElement(c.Button,{height:56,tooltip:"Save",disabled:!M||!I,onClick:B},f.Icons.SAVE),i.default.createElement(c.Button,{height:56,tooltip:"Duplicate and edit",disabled:!j.isDuplicateAvailable,actionName:y.SIDEBAR_BUTTONS.DUPLICATE,onClick:q(G)},f.Icons.DUPLICATE),i.default.createElement(C.default,{exportToExcel:q(W),study:N,scenario:D,filter:O.name}),i.default.createElement(c.Button,{height:56,tooltip:"Edit",actionName:y.SIDEBAR_BUTTONS.EDIT,disabled:!M,onClick:function(){return e((0,s.push)("/studies/"+a+"/scenarios/"+n+"/edit"))}},f.Icons.EDIT),i.default.createElement(c.Separator,{height:20}),i.default.createElement(c.Button,{height:56,disabled:!j.canBeOptimised,tooltip:"Optimize scenario",actionName:y.SIDEBAR_BUTTONS.OPTIMISE,onClick:q(Y)},f.Icons.OPTIMISE),i.default.createElement(c.Button,{height:56,disabled:!j.isApprovable||!F.lpft,tooltip:"Approve scenario",actionName:y.SIDEBAR_BUTTONS.APPROVE,onClick:q(z)},f.Icons.APPROVE)))};O.propTypes={},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(7),o=a(17),s=a(58),u=n(s),d=a(464),c=n(d),f=a(329),p=n(f),h=a(83),v=n(h),m=a(1049),_=n(m),E=a(10),g=a(135),y=n(g),S=a(20),b=n(S),C=a(8),O=a(34),T=a(66),R=a(53),A=function(){var e=(0,l.useDispatch)(),t=(0,r.useContext)(T.ScenarioViewerState),a=t.globalData,n=t.study,s=t.scenario,d=t.showAlert,f=t.activeUser,h=t.isEditable,m=(0,l.useSelector)(function(e){return e.scenarios.chartCollapsed}),g=(0,l.useSelector)(R.getScenarioViewerFilter),S=(0,l.useSelector)(function(e){return e.scenarios.historicalView}),A=(0,l.useSelector)(function(e){return e.scenarios.multiEditView}),I=(0,l.useSelector)(function(e){return e.scenarios.tableFilter}),w=(0,r.useCallback)(function(){return e({type:E.SCENARIO_VIEWER.SET_FIELD_VALUE,field:"showMultieditDialog",payload:!1})},[e]),N=(0,r.useCallback)(function(t){return e({type:E.SCENARIO_VIEWER.SET_FIELD_VALUE,field:"historicalFilter",payload:t})},[e]),D=(0,r.useCallback)(function(t){return e({type:E.SCENARIO_VIEWER.SET_FIELD_VALUE,field:"historicalView",payload:t})},[e]),P=(0,r.useCallback)(function(t){return e({type:E.SCENARIO_VIEWER.SET_FIELD_VALUE,field:"multiEditView",payload:t})},[e]),L=(0,r.useCallback)(function(){return e({type:"[SCENARIO VIEWER] SET_VALUES",payload:{tableFilter:{overallocated:!I.overallocated}}})},[e,I]);return i.default.createElement(v.default,{key:(0,O.getStickyPosition)("TABLE_CONTROL",d,m),className:"exclude-from-screenshot",style:{top:(0,O.getStickyPosition)("TABLE_CONTROL",d,m)+"px",backgroundColor:"white",zIndex:2}},i.default.createElement("div",{className:"benchmarks-toolbar-container"},i.default.createElement(o.Grid,null,i.default.createElement(o.Row,null,i.default.createElement(o.Col,{offset:1,width:11},i.default.createElement(u.default,null,i.default.createElement(c.default,{hideHistorical:!!s.source_scenario_id||s.status===E.SCENARIO_STATUS.APPROVED||s.status===E.SCENARIO_STATUS.PREV_APPROVED,enableMultiedit:g.type===E.ROLLUP&&(n.state.status===b.default.PLANNED||null===n.state.status&&n.state.isOwner)&&(n.state.isOwner||f.role===y.default.ADMIN)&&h,isShowApplyingEditsDialog:!1,onCloseDialog:w,onSubmitDialog:void 0,disabled:(0,C.isOptimizing)(s),hasTrials:n.historical_references.length>0,uncertaintyLevel:a.uncertainty,isActive:S,isMultiEditing:A,onFilterChange:N,onActiveChange:D,onEdit:P,multiEditType:A},i.default.createElement(p.default,{showOverallocation:!!a.overallocatedData||!!a.adjusted_overallocatedData,onChange:L,overallocated:I.overallocated}),i.default.createElement(_.default,null))))))))};t.default=A},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=a(0),u=n(s),d=a(7),c=a(19),f=a(180),p=n(f),h=a(40),v=n(h),m=a(54),_=n(m),E=a(17),g=a(58),y=n(g),S=a(324),b=n(S),C=a(462),O=n(C),T=a(52),R=a(35),A=a(8),I=a(77),w=a(332),N=a(66),D=a(20),P=n(D),L=a(53),M=a(33),k=a(34),x=function(){var e=(0,d.useDispatch)(),t=(0,s.useContext)(N.ScenarioViewerState),a=t.tableData,n=t.fullData,f=t.scenario,h=t.study,m=t.activeUser,g=t.platformRegions,S=t.showAlert,C=t.metadata,D=t.isEditable,x=t.setState,j=(0,d.useSelector)(function(e){return e.scenarios.chartCollapsed}),F=(0,d.useSelector)(function(e){return e.scenarios.historicalView}),U=(0,d.useSelector)(function(e){return e.scenarios.historicalFilter}),V=(0,d.useSelector)(function(e){return e.scenarios.multiEditView}),B=(0,d.useSelector)(function(e){return e.scenarios.tableFilter}),H=(0,d.useSelector)(function(e){return e.scenarios.clipboard}),G=(0,d.useSelector)(L.getScenarioViewerMultiEditValues),Y=(0,d.useSelector)(function(e){return(0,_.default)(e.scenarios,["dataToSave"])}),z=Y.dataToSave,W=(0,s.useState)(!1),q=o(W,2),K=q[0],X=q[1],Z=(0,s.useState)(function(){var e={};return n.forEach(function(t){var a=t.type,n=t.location,r=t.region_name,i=t.country_name;"region"!==a||e[n]||(e[n]=[]),"country"===a&&e[r].push(i)}),e}),J=o(Z,2),Q=J[0],$=J[1],ee=(0,s.useCallback)(function(e,t,a,n){var r=function(e){var n=l({},e);return e[a]?delete n[a]:delete n[t],n},o=l({},Q),s={};return e?(s=a?l({},o,i({},a,o[a]&&!o[a].includes(t)?o[a].concat([t]):[t])):l({},o,i({},t,n[0])),$(s)):(a?o[a].filter(function(e){return e!==t}):[]).length?$(l({},o,i({},a,o[a].filter(function(e){return e!==t})))):(r(o),$(r(o))),s},[Q]),te=(0,s.useCallback)(function(t){e({type:"[SCENARIO VIEWER] SET_MULTIEDIT_VALUES",payload:t})},[e]),ae=(0,s.useCallback)(function(){var t=n.filter(function(e){return"country"===e.type}).reduce(function(e,t){var a=e,n=Q[t.region_name];return n&&n.includes(t.country_name)&&(a[t.country_id]=Object.keys(G).reduce(function(e,a){var n=G[a],i=t[a];if("unlock"===a){var l=z.find(function(e){return e.overrideId===t.override_id&&"unlock"===e.fieldName}),o=l?(0,v.default)(l.fieldValue):[],s=t.unlock?t.unlock:[],u=Object.keys(n).reduce(function(e,t){return n[t]&&e.push(t),e},[].concat(r(o),r(s)));e.push({fieldName:a,newValue:(0,p.default)(u),oldValue:void 0!==i?i:null})}else e.push({fieldName:a,newValue:null!==n&&void 0!==n&&""!==n?n:null,oldValue:void 0!==i?i:null});return e},[])),a},{});X(!1),e({type:"[SCENARIO VIEWER] COUNTRIES_DATA_CHANGE",scenarioId:f.id,payload:t,options:{multiEditView:null,multiEditValues:{}}})},[n,e,f.id,Q,G,z]),ne=(0,s.useCallback)(function(){(0,R.getParamItemStorage)("applyingEditsMultiColumnDialog",m.id,"applyingEditsDialogCheckedClose")?ae():X(!0)},[m.id,ae]),re=(0,s.useCallback)(function(t,a,n){var r=g.find(function(e){return e.name===a}),i=r.countries.find(function(e){return e.name===t});e((0,M.getParametersByScenarioAndCountry)(h.id,f.id,i?i.id:null,a)).then(function(i){var l=(0,A.getNewCountryObject)(t,a,n,1===r.countries.length,!1);i&&Object.keys(i).length>0&&(l=(0,A.mergeCountryParameters)((void 0).props.scenario,i,l,!1)),e({type:"[SCENARIO VIEWER] ADD_COUNTRY",scenarioId:f.id,payload:l})}).catch(function(){var i=(0,A.getNewCountryObject)(t,a,n,1===r.countries.length,!1);e({type:"[SCENARIO VIEWER] ADD_COUNTRY",scenarioId:f.id,payload:i})})},[e,g,f.id,h.id]),ie=(0,s.useCallback)(function(e,t,a){var n=g.find(function(e){return e.name===a}),r="Unspecified country";1===n.countries.length&&(r=n.countries[0].name),re(r,a,a)},[re,g]),le=(0,s.useCallback)(function(t,a,n){var r=g.find(function(e){return e.name===n});e({type:"[SCENARIO VIEWER] REMOVE_COUNTRY",scenarioId:f.id,payload:{countryName:t,regionId:a,regionName:r&&r.name}})},[f.id,e,g]),oe=(0,s.useCallback)(function(t,a){var n=g.find(function(e){return e.name===a});e({type:"[SCENARIO VIEWER] REMOVE_COUNTRY",scenarioId:f.id,payload:{regionId:t,regionName:n&&n.name}})},[f.id,g,e]),se=(0,s.useCallback)(function(t){e({type:"[SCENARIO VIEWER] COPY_COUNTRY_DATA",scenarioId:f.id,countryId:t})},[f.id,e]),ue=(0,s.useCallback)(function(t){e({type:"[SCENARIO VIEWER] PASTE_COUNTRY_DATA",scenarioId:f.id,countryId:t})},[f.id,e]),de=(0,s.useCallback)(function(e){e.stopPropagation();var t=e.currentTarget.dataset.region,a=e.currentTarget.dataset.loc;x({type:"SET_VALUES",payload:{showEvents:!0,currentRegion:t,currentLocation:a,currentEvents:(0,I.sortEventsByField)((0,w.getCurrentEvents)(t,a,n),"start_date","ASC",!0)}})},[x,n]),ce=(0,s.useCallback)(function(t,a,n){return e((0,c.push)("/studies/"+t+"/scenarios/"+a+"/sites/"+n))},[e]),fe=(0,s.useCallback)(function(t,a){e({type:"[SCENARIO VIEWER] COUNTRY_DATA_CHANGE",scenarioId:f.id,countryId:t,payload:a})},[e,f.id]),pe=(0,s.useCallback)(function(t,a){var n=a.map(function(e){return{fieldName:e.name,newValue:e.value,oldValue:e.value}});e({type:"[SCENARIO VIEWER] COUNTRY_DATA_CHANGE",scenarioId:f.id,countryId:t,payload:n})},[e,f.id]),he=(0,s.useCallback)(function(){e({type:"[SCENARIO VIEWER] SET_FIELD_VALUE",field:"multiEditView",payload:null})},[e]);return u.default.createElement(E.Grid,null,u.default.createElement(E.Row,{className:"exclude-from-screenshot"},u.default.createElement(E.Col,{offset:1,width:11},u.default.createElement(y.default,null,u.default.createElement(b.default,{data:a,scenario:f,study:h,tableFilter:B,historicalFilter:U,navigateToViewSites:ce,platformRegions:g,tableHeaderPosition:(0,k.getStickyPosition)("TABLE",S,j),isEditable:D,isHistoricalDataViewEnabled:F,isAdjusted:null!==f.source_scenario_id,isTracking:h.state.status===P.default.ACTIVE,onDataChange:fe,batchUpdate:pe,handleAddRegion:ie,handleAddCountry:re,handleDeleteRegion:oe,handleDeleteCountry:le,onToggleEvents:de,resetCountryData:T.noop,isMultiEditing:!!V,multiEditType:V,multiRegionsData:Q,onMultiCheck:ee,onMultiEditingCancel:he,onMultiEditingApply:ne,onMultiEditingCellChange:te,canManageSites:C.canManageSites,onCopy:se,onPaste:ue,clipboardEmpty:0===Object.keys(H).length}),u.default.createElement(O.default,{multiEditType:V,isShow:K,onChange:T.noop,onClose:function(){return X(!1)},onSubmit:ae})))))};t.default=x},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1079),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(16),o=a(7),s=a(134),u=n(s),d=a(1072),c=n(d),f=a(58),p=n(f),h=a(53),v=a(33),m=a(28),_=n(m);a(2236);var E=function(){var e=(0,o.useDispatch)(),t=(0,l.useParams)(),a=t.id,n=t.scenarioId,s=(0,_.default)(),d=(0,o.useSelector)(function(e){return(0,h.isScenarioDataExist)(e,s)});return(0,r.useEffect)(function(){e((0,v.getScenarioViewerData)(a,n))},[e,a,n]),d?i.default.createElement(p.default,null,i.default.createElement(c.default,null)):i.default.createElement(u.default,null)};t.default=E},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{availableUsers:(0,S.default)(e),inProgress:e.users.isLoading,activeUser:e.auth.user}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),f=a(1),p=n(f),h=a(7),v=a(39),m=a(44),_=a(871),E=n(_),g=a(33),y=a(511),S=n(y);a(2237);var b=a(767),C=n(b),O=function(e){function t(e){i(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={availableUsers:e.availableUsers,sharedWith:[],suggestions:[]},a.handleSubmit=a.handleSubmit.bind(a),a.handleCancel=a.handleCancel.bind(a),a.getSuggestions=a.getSuggestions.bind(a),a.handleTagAdd=a.handleTagAdd.bind(a),a.handleTagRemove=a.handleTagRemove.bind(a),a}return o(t,e),u(t,[{key:"componentDidMount",value:function(){0===this.props.availableUsers.length&&this.props.getAvailableUsers()}},{key:"componentWillReceiveProps",value:function(e){e.availableUsers&&e.availableUsers.length>0&&this.setState({availableUsers:e.availableUsers})}},{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"getSuggestions",value:function(e){var t=this;this.setState({suggestions:this.state.availableUsers.filter(function(a){return!!a.email&&(-1!==a.email.toLowerCase().indexOf(e.toLowerCase())&&a.id!==t.props.activeUser.id)})})}},{key:"handleTagAdd",value:function(e){this.setState({sharedWith:[].concat(r(this.state.sharedWith),[e])})}},{key:"handleTagRemove",value:function(e){this.setState({sharedWith:this.state.sharedWith.filter(function(t){return t.id!==e.id})})}},{key:"handleSubmit",value:function(){var e=this;this.props.shareScenario(this.props.studyId,this.props.scenario.id,this.state.sharedWith).then(function(){e.handleCancel()}).catch(function(){return e.handleCancel()})}},{key:"handleCancel",value:function(){var e=this;this.setState({sharedWith:[]},function(){e.props.onClose()})}},{key:"render",value:function(){var e=this.state,t=e.sharedWith,a=e.suggestions,n=this.props.isShown;return c.default.createElement(v.PopupDialog,{title:"Share scenario",isShown:n,handleClose:this.handleCancel,buttons:[c.default.createElement(v.ActionButton,{action:this.handleCancel},"Cancel"),c.default.createElement(v.ActionButton,{action:this.handleSubmit,disabled:0===t.length,primary:!0},"Share")]},c.default.createElement("div",{className:"share-scenario-dialog-content"},c.default.createElement("div",{className:"share-scenario-dialog__warning-message"},"Sharing with another user will give them access and permissions to duplicate scenario"),c.default.createElement(E.default,{onTagAdd:this.handleTagAdd,onTagRemove:this.handleTagRemove,tags:t,suggestions:a,getSuggestions:this.getSuggestions}),c.default.createElement(m.ContextHelpButton,{page:"popup__share-scenario",popup:!0})))}}]),t}(d.Component),T={shareScenario:g.shareScenario,getAvailableUsers:C.default};O.defaultProps={sharedWith:[],availableUsers:[],inProgress:!1},O.propTypes={activeUser:p.default.object.isRequired,studyId:p.default.number.isRequired,scenario:p.default.object.isRequired,isShown:p.default.bool.isRequired,onClose:p.default.func.isRequired,availableUsers:p.default.array,getAvailableUsers:p.default.func.isRequired,shareScenario:p.default.func.isRequired},t.default=(0,h.connect)(s,T)(O)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1082),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(7),o=a(19),s=a(17),u=a(967),d=n(u),c=a(44),f=a(1086),p=n(f),h=a(1090),v=n(h),m=a(200),_=a(333),E=a(53),g=a(28),y=n(g),S=a(108);a(2238);var b=a(1084),C=n(b),O=a(1085),T=n(O),R=function(){var e=(0,l.useDispatch)(),t=(0,y.default)(),a=(0,l.useSelector)(function(e){return e.auth.user}),n=(0,l.useSelector)(_.getStudiesData),u=n.tracking,f=n.planning,h=n.playground,g=n.unknown,b=(0,l.useSelector)(_.getStudiesToImport),O=(0,l.useSelector)(function(e){return(0,E.getUserAccessDetails)(e,t)}),R=(0,r.useCallback)(function(t){e((0,o.push)("/studies/new?cohorts="+(t||"false")))},[e]),A=(0,r.useCallback)(function(t){return e((0,S.importPlatformStudy)(t))},[e]);return i.default.createElement("div",{className:"studies-page"},i.default.createElement(s.Grid,null,i.default.createElement(s.Row,null,i.default.createElement(s.Col,{offset:1,width:11},i.default.createElement(v.default,null),i.default.createElement(d.default,{userName:a.name,trackingStudies:u.length,planningStudies:f.length,userStudies:h.length,unknownStudies:g.length,onStudyAdd:R,studies:b,getStudies:function(t){return e((0,S.getPlatformStudies)(t))},metadata:O,onImport:A}))),i.default.createElement(T.default,null),O.userCanViewTrackingStudy&&i.default.createElement(p.default,{type:m.SECTIONS.TRACKING}),O.userCanViewPlanningStudy&&i.default.createElement(p.default,{type:m.SECTIONS.PLANNING}),!!g.length&&i.default.createElement(p.default,{type:m.SECTIONS.UNKNOWN}),O.userCanViewPlaygroundStudy&&i.default.createElement(p.default,{type:m.SECTIONS.PLAYGROUND})),i.default.createElement(C.default,null),i.default.createElement(c.ContextHelpButton,{page:"dashboard"}))};t.default=R},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(7),u=a(30),d=a(236),c=n(d),f=function(e){var t=e.children,a=(0,s.useDispatch)(),n=(0,s.useSelector)(function(e){return!!e.studies.studies&&!e.studies.isLoading});return(0,r.useEffect)(function(){return a((0,u.getStudies)())},[a]),i.default.createElement(i.default.Fragment,null,n?t:i.default.createElement(c.default,null))};f.propTypes={children:o.default.node.isRequired},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(7),o=a(196),s=n(o),u=a(30),d=function(){var e=(0,l.useDispatch)(),t=(0,l.useSelector)(function(e){return e.studies.missingIndicationStudy}),a=(0,r.useCallback)(function(){return e((0,u.closeMissingIndicationError)())},[e]);return t?i.default.createElement(s.default,{isShown:t,status:"info",title:"Missing Indication",handleClose:a},"There is no indication for this study. Study with no indication cannot be imported into FPO, and will be updated once a day."):null};t.default=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(7),o=a(17),s=a(6),u=a(27),d=n(u),c=a(30),f=function(){var e=(0,l.useDispatch)(),t=(0,l.useSelector)(function(e){return e.studies.TAFilterValue});return i.default.createElement(o.Row,null,i.default.createElement(o.Col,{offset:1,width:2},i.default.createElement("div",{className:"search-input-wrapper"},i.default.createElement("div",{className:"icon-wrapper"},s.Icons.SEARCH_HISTORICAL),i.default.createElement(d.default,{withoutBorder:!0,placeholder:"Search for study, TA or indication",value:t,clearIcon:!0,onClick:function(){return e((0,c.setFilterValue)(""))},onChange:function(t){return e((0,c.setFilterValue)(t.currentTarget.value))}}))))};t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a(0),l=n(i),o=a(1),s=n(o),u=a(19),d=a(7),c=a(1087),f=n(c),p=a(17),h=a(6),v=a(39),m=a(30),_=a(333),E=a(200),g=function(e){var t=e.type,a=(0,d.useDispatch)(),n=(0,d.useSelector)(function(e){return(0,_.getStudiesDataByType)(e,t)}),o=(0,d.useSelector)(function(e){return(0,_.getIsCollapsedByType)(e,t)}),s=(0,d.useSelector)(function(e){return(0,_.getSortingByType)(e,t)}),c=t===E.SECTIONS.PLAYGROUND,g=(0,i.useState)(null),y=r(g,2),S=y[0],b=y[1],C=(0,i.useCallback)(function(){return a((0,m.setCollapsedSection)(t))},[a,t]),O=(0,i.useCallback)(function(e){return a((0,u.push)("/studies/"+e))},[a]),T=(0,i.useCallback)(function(){return b(null)},[b]),R=(0,i.useCallback)(function(e){return a((0,m.setSortingOrder)(t,e))},[a,t]),A=(0,i.useCallback)(function(){return a((0,m.deleteStudy)(S.id))},[a,S]),I=(0,i.useCallback)(function(e){b({id:e.id,name:e.study})},[b]);return l.default.createElement(l.default.Fragment,null,l.default.createElement(p.Row,{className:"studies-page__section"},l.default.createElement(p.Col,{width:1},!!n&&l.default.createElement("div",{className:"collapse-icon-container",onClick:C},o?h.Icons.CHEVRON_DOWN:h.Icons.CHEVRON_UP)),l.default.createElement(p.Col,{offset:0,width:11,className:"studies-page__section-separator"},l.default.createElement("div",{className:"studies-page__section-title h1"},t),!!n.length&&!o&&l.default.createElement(f.default,{studies:n,sorting:s,sortingClickHandler:R,onStudyClick:O,onStudyDelete:I}),!n.length&&l.default.createElement("div",null,"There are currently no studies in this section."))),S&&l.default.createElement(v.PopupDialog,{isShown:!0,title:(S?"Delete":"Remove")+" study",handleClose:T,buttons:[l.default.createElement(v.ActionButton,{action:T},"Cancel"),l.default.createElement(v.ActionButton,{action:A,primary:!0},"Confirm")]},l.default.createElement("div",{className:"h2"},"Are you sure you want to "+(c?"permanently delete ":"remove "),l.default.createElement("b",null,""+S.name),(c?"":" from your dashboard")+"?")))};g.propTypes={type:s.default.oneOf([E.SECTIONS.TRACKING,E.SECTIONS.PLANNING,E.SECTIONS.PLAYGROUND,E.SECTIONS.UNKNOWN]).isRequired},t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1088),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),l=n(i),o=a(1),s=n(o),u=a(11),d=n(u),c=a(49),f=n(c),p=a(6),h=a(509),v=n(h),m=a(1089),_=n(m),E=a(200);a(735);var g=function(e,t,a){if(!t||t.column!==e)return l.default.createElement(c.Cell,{className:"sort-cell-default"},l.default.createElement("div",{onClick:function(){return a(e)}},l.default.createElement("div",null,E.COLUMN_TITLES[e]),l.default.createElement("div",null,p.Icons.FILTER_ASCENDING)));var n=t.order,r=p.Icons.FILTER_ASCENDING;return n===E.SORTING_ORDER.DESC&&(r=p.Icons.FILTER_DESCENDING),l.default.createElement(c.Cell,{className:"sort-cell-default active"},l.default.createElement("div",{onClick:function(){return a(e)}},l.default.createElement("div",null,E.COLUMN_TITLES[e]),l.default.createElement("div",null,r)))},y=function(e){var t=e.studies,a=e.onStudyClick,n=e.onStudyDelete,i=e.sorting,o=e.sortingClickHandler;return l.default.createElement("div",{className:"studies-table","data-test":"studies-table"},l.default.createElement(f.default,{rowHeight:56,headerHeight:30,onRowClick:function(e,n){e.preventDefault(),e.stopPropagation(),a(t[n].id)},rowsCount:t.length},l.default.createElement(c.Column,{header:g(E.COLUMN_NAMES.STUDY_NAME,i,o),data:function(e){return l.default.createElement(v.default,r({},e,{studies:t,getCellValue:function(e){return e.study},className:"h2",dataTest:"study-container"}))},width:400}),l.default.createElement(c.Column,{header:g(E.COLUMN_NAMES.TA_INDICATION,i,o),data:function(e){return l.default.createElement(v.default,r({},e,{studies:t,getCellValue:function(e){return e.therapeutic_area+"/"+e.indication}}))},width:400}),l.default.createElement(c.Column,{header:l.default.createElement(c.Cell,{className:"sort-cell-default"},l.default.createElement("div",null,"Number of scenarios")),data:function(e){return l.default.createElement(v.default,r({},e,{studies:t,getCellValue:function(e){return e.scenarios},icon:p.Icons.DETAILS}))},width:100}),l.default.createElement(c.Column,{header:l.default.createElement(c.Cell,{className:"sort-cell-default"},l.default.createElement("div",null,"Owner")),data:function(e){return l.default.createElement(v.default,r({},e,{studies:t,className:"ellipse-text",getCellValue:function(e){return e.owner_name||"-"},icon:p.Icons.USER_PROFILE}))},width:160}),l.default.createElement(c.Column,{header:g(E.COLUMN_NAMES.UPDATE_TIME,i,o),data:function(e){return l.default.createElement(v.default,r({},e,{studies:t,className:"ellipse-text",getCellValue:function(e){var t=e.lastUpdatedAt;return t&&d.default.duration((0,d.default)(t)-(0,d.default)()).humanize(!0)},icon:p.Icons.UPDATED}))},width:140}),l.default.createElement(c.Column,{header:l.default.createElement(c.Cell,{className:"without-underline-header"},""),data:function(e){return l.default.createElement(v.default,r({},e,{studies:t,getCellValue:function(){return p.Icons.CROSS_O},className:"studies-table__remove-button studies-table__cell-icon",dataTest:"study-remove",onStudyDelete:n}))},fixedWidth:!0,width:48}),l.default.createElement(c.Column,{header:l.default.createElement(c.Cell,{className:"without-underline-header"},""),data:function(e){return l.default.createElement(_.default,r({},e,{studies:t}))},fixedWidth:!0,width:0})))};y.propTypes={studies:s.default.array,onStudyClick:s.default.func.isRequired,onStudyDelete:s.default.func.isRequired,sortingClickHandler:s.default.func.isRequired,sorting:s.default.object},y.defaultProps={studies:[],sorting:{column:E.COLUMN_NAMES.UPDATE_TIME,order:E.SORTING_ORDER.DESC}},t.default=y},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),l=n(i),o=a(1),s=n(o),u=a(129),d=n(u),c=a(45),f=n(c),p=a(54),h=n(p),v=a(106),m=a(14),_=n(m),E=a(8),g=a(97),y=n(g),S=a(509),b=n(S),C=(0,d.default)(v.getMisalignedDetails,function(e,t){return(0,f.default)(e,t)}),O=function(e){var t=e.studies,a=e.rowIndex,n=t[a],i=(0,h.default)(n,["impactStudyParams","fp","target_lpft","therapeutic_area","indication","target_num_patients","fpfv_fpft"]),o=C(i),s=o.invalidFields,u=s&&s.length>0,d=[],c=null;n.showApproveAlert&&d.push(l.default.createElement("div",{key:1,className:"tooltip-row-item"},"This study still doesn`t have approved plan.",l.default.createElement("br",null),"Study FP - ",(0,v.formatDate)((0,E.getMomentDate)(n.fp)))),n.showOutdatedApproveAlert&&d.push(l.default.createElement("div",{key:2,className:"tooltip-row-item"},"Approved plan in this study created ",l.default.createElement("br",null),"considering different study parameters")),u&&d.push(l.default.createElement("div",{key:3,className:"tooltip-row-item"},"Study parameters aren't consistent with Impact data")),d.length>1?c=l.default.createElement("div",{className:"multiple-icons__wrapper"},l.default.createElement("div",null,y.default.INFO_O),l.default.createElement("div",null,y.default.INFO_O)):n.showApproveAlert?c=l.default.createElement("div",null,y.default.ALARM):(n.showOutdatedApproveAlert||u)&&(c=l.default.createElement("div",null,y.default.MISMATCH));var f=l.default.createElement(_.default,{mouseEnterDelay:.7,placement:"top",align:{offset:[0,-10]},overlay:l.default.createElement(l.default.Fragment,null,d.length>1&&l.default.createElement("h3",null,"Multiple alerts:"),d)},c);return l.default.createElement(b.default,r({},e,{studies:t,getCellValue:function(){return n.showApproveAlert||n.showOutdatedApproveAlert||u?f:""},className:"approve-alert"}))};O.propTypes={studies:s.default.array,rowIndex:s.default.number},O.defaultProps={studies:[],rowIndex:-1},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a(0),l=n(i),o=a(654),s=n(o),u=a(7),d=a(856),c=n(d),f=a(61),p=n(f),h=a(6),v=a(39),m=a(333),_=function(){var e=(0,u.useSelector)(m.getStudiesData),t=e.unknown,a=(0,i.useState)(!1),n=r(a,2),o=n[0],d=n[1],f=(0,i.useCallback)(function(){d(!0)},[d]),_=(0,i.useCallback)(function(){d(!1)},[d]);return t.length?l.default.createElement(l.default.Fragment,null,l.default.createElement(c.default,{message:"\n        "+t.length+" \n        "+(0,s.default)("study",t.length)+"\n        in FPO currently do not have any analytics data associated.\n         Usually, this is caused by the study status changing to completed or cancelled.\n          Please click on the icon to see the full list.",messageSide:"right",type:"alert"},l.default.createElement(p.default,{onClick:f,type:"transparent"},h.Icons.INFO_O)),o&&l.default.createElement(v.PopupDialog,{title:"FPO studies with unknown status",isShown:!0,handleClose:_,buttons:[l.default.createElement(v.ActionButton,{action:_},"Close")]},l.default.createElement("div",{className:"unknown-stadies-dialog"},l.default.createElement("header",{className:"unknown-stadies-dialog__header"},l.default.createElement("h3",{className:"unknown-stadies-dialog__headline"},"Study"),l.default.createElement("h3",{className:"unknown-stadies-dialog__headline"},"Owner")),l.default.createElement("section",{className:"unknown-stadies-dialog__content-wrapper"},l.default.createElement("div",{className:"unknown-stadies-dialog__content"},t.map(function(e){return l.default.createElement(l.default.Fragment,{key:e.id},l.default.createElement("span",{className:"unknown-stadies-dialog__column"},e.study),l.default.createElement("span",{className:"unknown-stadies-dialog__column"},e.owner||"-"))})))))):null};t.default=_},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1092),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),l=a(1),o=n(l),s=a(7),u=a(16),d=a(236),c=n(d),f=a(30),p=function(e){var t=e.children,a=(0,s.useDispatch)(),n=(0,u.useParams)(),l=n.id,o=(0,u.useLocation)(),d=o.pathname.indexOf("archived")>-1,p=(0,s.useSelector)(function(e){return d?!!e.study[+l]&&e.study[+l].isArchivedScenarios:!!e.study[+l]});return(0,r.useEffect)(function(){a((0,f.getStudyDashboardData)(l,d,!1))},[l,a,d,o]),i.default.createElement(i.default.Fragment,null,p?t:i.default.createElement(c.default,null))};p.propTypes={children:o.default.node.isRequired},t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(62),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),h=a(7),v=a(12),m=n(v),_=a(17),E=a(239),g=n(E),y=a(964),S=n(y),b=a(132),C=n(b),O=a(6),T=a(28),R=a(328),A=function(e){var t=e.study,a=e.studyParamsWarning,n=e.invalidFields,d=e.metadata,c=e.showApproveAbsenceWarning,f=(0,h.useSelector)(function(e){return e.auth.user}),v=(0,T.useLocalStorage)("fpo-changed-study-params",{}),E=o(v,2),y=E[0],b=E[1],A=(0,m.default)(y,t.id,{closedBy:[],updatedAt:null,updatedBy:null}),I=(0,h.useSelector)(function(e){return(0,R.isStudyChanged)(e,t.id)}),w=(0,s.useCallback)(function(){b(l({},y,r({},t.id,l({},A,{closedBy:[].concat(i(A.closedBy),[f.id]),updatedAt:t.study_details_updated_at}))))},[f.id,A,y,b,t]);return u.default.createElement(u.default.Fragment,null,(!t.target_lpft||!t.fp||!t.target_num_patients)&&u.default.createElement(_.Row,null,u.default.createElement(_.Col,{offset:1,width:11},u.default.createElement(C.default,{title:"",status:"error",isShown:!0},"All milestones need to be set by the study owner before creating scenarios within the study"))),I&&!A.closedBy.includes(f.id)&&u.default.createElement(_.Row,null,u.default.createElement(_.Col,{offset:1,width:11},u.default.createElement("div",{className:(0,p.default)("study-changed-status-bar narrow")},u.default.createElement("span",{className:"message"},"The study owner has made changes to this study. Scenario details may be modified."),u.default.createElement("div",{className:"study-changed-closeContainer",onClick:w},O.Icons.CROSS_O)))),a.showStudyParamsWarning&&u.default.createElement(_.Row,null,u.default.createElement(_.Col,{offset:1,width:11},u.default.createElement(g.default,{dashboard:!0,data:a}))),n&&n.length>0&&u.default.createElement(_.Row,null,u.default.createElement(_.Col,{offset:1,width:11},u.default.createElement(S.default,{study:t,infoOnly:!d||!d.isAdmin&&!d.isUserHasStudyFullControl}))),c&&u.default.createElement(_.Row,null,u.default.createElement(_.Col,{offset:1,width:11},u.default.createElement(C.default,{title:"",status:"error",isShown:!0},"This study still doesn`t have Approved plan"))))};A.defaultProps={isShowStatusBar:!1,studyParamsWarning:null,invalidFields:null,metadata:null,showApproveAbsenceWarning:!1},A.propTypes={study:c.default.object.isRequired,studyParamsWarning:c.default.object,invalidFields:c.default.array,metadata:c.default.object,showApproveAbsenceWarning:c.default.bool},t.default=A},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,R.getRouteMatch)(t),n=(0,T.getStudyData)(e,a),r=(0,T.getMetadata)(e,a);return{historicalReferences:(0,p.default)(n,"historical_references",[]).length>0?(0,p.default)(n,"historical_references").length:"",isImported:(0,p.default)(n,"is_imported",!1),isUserHasStudyFullControl:r.isUserHasStudyFullControl,isEditable:!!n&&(0,O.isEditableStudy)(n,e.auth.user),id:t.studyId,targetLpft:(0,p.default)(n,"target_lpft"),fp:(0,p.default)(n,"fp"),targetNumPatients:(0,p.default)(n,"target_num_patients"),archivedCount:(0,p.default)(n,"archivedCount"),userCanCreateNewScenario:r.userCanCreateNewScenario,isArchived:e.router.location.pathname.indexOf("archived")>-1}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(7),d=a(16),c=a(19),f=a(12),p=n(f),h=a(494),v=n(h),m=a(326),_=n(m),E=a(97),g=n(E),y=a(493),S=n(y),b=a(873),C=n(b),O=a(106),T=a(63),R=a(28),A=function(e){var t=e.navigate,a=e.id,n=e.targetLpft,r=e.fp,o=e.targetNumPatients,s=e.archivedCount,u=e.historicalReferences,d=e.isImported,c=e.compareScenariosLink,f=e.userCanCreateNewScenario,p=e.markedScenarios,h=e.handleChangeOwnerClick,m=e.handleEditStudyLevelClick,E=e.isUserHasStudyFullControl,y=e.isEditable,b=e.isArchived,O=(0,i.useCallback)(function(e){t(e)},[t]),T=(0,i.useCallback)(function(){O("/studies")},[O]),R=(0,i.useCallback)(function(){O("/studies/"+a)},[O,a]),A=(0,i.useCallback)(function(e){O("/studies/"+a+"/scenarios/new?cohorts="+(e||"false"))},[O,a]),I=(0,i.useCallback)(function(){O("/studies/"+a+"/compare?"+c())},[O,a,c]),w=(0,i.useCallback)(function(){O("/studies/"+a+"/archived")},[O,a]),N=(0,i.useCallback)(function(){O("/studies/"+a+"/historical/summary")},[O,a]);return l.default.createElement(v.default,null,l.default.createElement(_.default,{height:80,onClick:b?R:T},g.default.CHEVRON_LEFT),l.default.createElement(S.default,{height:1}),!b&&l.default.createElement(l.default.Fragment,null,l.default.createElement(S.default,{noLine:!0,height:190}),l.default.createElement(C.default,{isDisabled:!(n&&r&&o&&f),onItemClick:A}),l.default.createElement(_.default,{tooltip:"To compare select up to 3 scenarios",disabled:p.length<2,onClick:I,height:48},l.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},g.default.COMPARE,l.default.createElement("div",{className:"sup"},p.length>0?p.length:""))),l.default.createElement(_.default,{tooltip:"View archived scenarios",height:48,onClick:w},l.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},g.default.ARCHIVE,l.default.createElement("div",{className:"sup"},s))),l.default.createElement(S.default,{height:20}),l.default.createElement(_.default,{tooltip:"Select historical reference trials",onClick:N,height:48},l.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},g.default.REFERENCE_STUDIES,l.default.createElement("div",{className:"sup"},u))),d&&E?l.default.createElement(_.default,{className:"change-study-owner",tooltip:"Change study owner",height:48,onClick:h},g.default.USER_OWNER):null,E&&y&&l.default.createElement(_.default,{className:"change-study-level",tooltip:"Edit study level characteristics",height:48,onClick:m},g.default.EDIT)))},I={navigate:c.push};A.propTypes={compareScenariosLink:s.default.func.isRequired,markedScenarios:s.default.array,handleChangeOwnerClick:s.default.func.isRequired,handleEditStudyLevelClick:s.default.func.isRequired,navigate:s.default.func.isRequired,id:s.default.number.isRequired,targetLpft:s.default.string,fp:s.default.string,targetNumPatients:s.default.number,archivedCount:s.default.number,historicalReferences:s.default.oneOfType([s.default.string,s.default.number]),isImported:s.default.bool,userCanCreateNewScenario:s.default.bool,isUserHasStudyFullControl:s.default.bool,isEditable:s.default.bool,isArchived:s.default.bool},A.defaultProps={study:null,compareScenariosLink:null,markedScenarios:[],targetLpft:null,fp:null,targetNumPatients:null,archivedCount:null,historicalReferences:"",isImported:!1,userCanCreateNewScenario:!1,isUserHasStudyFullControl:!1,isEditable:!1,isArchived:!1},t.default=(0,d.withRouter)((0,u.connect)(r,I)(A))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,g.getRouteMatch)(t),n=(0,E.getStudyData)(e,a),r=(0,S.default)(e,a);return{studyId:t.studyId,targetLpft:n.target_lpft,isActive:n.state.status===m.default.ACTIVE,rowsCount:t.dataType===_.COLLECTION_TYPES.APPROVED?r.approvedScenarios.length:r.preparedScenarios.length}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),l=n(i),o=a(1),s=n(o),u=a(7),d=a(16),c=a(15),f=a(510),p=n(f),h=a(497),v=a(20),m=n(v),_=a(62),E=a(63),g=a(28),y=a(51),S=n(y),b=function(e){var t=e.dataType,a=e.markedScenarios,n=e.activeUser,r=e.handleScenarioCheckboxClick,i=e.handleShareScenarioClick,o=e.handleDuplicateScenarioClick,s=e.handleRowClick,u=e.headerHeight,d=e.handleArchiveScenario,f=e.handleUnarchiveScenario,v=e.showScenarioWarningColumn,m=e.onWarningIconClick,_=e.removeScenario,E=e.targetLpft,g=e.isActive,y=e.studyId,S=e.rowsCount;return l.default.createElement(c.FlexTable,{headerHeight:u,rowHeight:48,rowsCount:S},l.default.createElement(p.default,{dataType:t,params:{id:y},checkedScenarios:a,onRowClick:s},l.default.createElement(c.Column,{header:l.default.createElement(h.HeaderCell,{title:"Updated"}),data:l.default.createElement(h.UpdatedDataCell,{dataType:t,params:{id:y},onSelect:r,checkedScenarios:a}),width:130,fixedWidth:!0}),l.default.createElement(c.Column,{header:l.default.createElement(h.HeaderCell,{hideUnderline:!0}),data:l.default.createElement(h.ScenarioDetailsDataCell,{onWarningIconClick:m,dataType:t,params:{id:y}}),fixedWidth:!0,width:v?36:0}),l.default.createElement(c.Column,{overflow:!1,header:l.default.createElement(h.HeaderCell,{title:"Scenario name"}),data:l.default.createElement(h.GenericDataCell,{dataType:t,params:{id:y},dataField:"name"}),width:400}),l.default.createElement(c.Column,{header:l.default.createElement(h.HeaderCell,{title:"Type"}),data:l.default.createElement(h.ScentarioTypeDataCell,{dataType:t,params:{id:y}}),fixedWidth:!0,width:50}),l.default.createElement(c.Column,{header:l.default.createElement(h.HeaderCell,{title:"Countries",alignTo:"right"}),data:l.default.createElement(h.CountriesDataCell,{dataType:t,params:{id:y}}),fixedWidth:!0,width:84}),l.default.createElement(c.Column,{header:l.default.createElement(h.HeaderCell,{title:"Patients",alignTo:"right"}),data:l.default.createElement(h.PatientsDataCell,{dataType:t,params:{id:y}}),fixedWidth:!0,width:74}),l.default.createElement(c.Column,{header:l.default.createElement(h.HeaderCell,{title:"Sites",alignTo:"right"}),data:l.default.createElement(h.SitesDataCell,{dataType:t,params:{id:y}}),fixedWidth:!0,width:59}),l.default.createElement(c.Column,{header:l.default.createElement(h.HeaderCell,{title:"FPFV-LPFV"}),data:l.default.createElement(h.FpfvLpfvDataCell,{dataType:t,params:{id:y}}),fixedWidth:!0,width:101}),l.default.createElement(c.Column,{header:l.default.createElement(h.HeaderCell,{title:"P/LPFT"}),data:l.default.createElement(h.PlpftDataCell,{dataType:t,params:{id:y},target:E,isActive:g}),fixedWidth:!0,width:90}),l.default.createElement(c.Column,{header:l.default.createElement(h.HeaderCell,{title:"Days (+/-)"}),data:l.default.createElement(h.DaysDataCell,{dataType:t,params:{id:y},target:E,isActive:g}),fixedWidth:!0,width:90}),l.default.createElement(c.Column,{header:l.default.createElement(h.HeaderCell,{title:"Owner"}),data:l.default.createElement(h.GenericDataCell,{dataType:t,params:{id:y},dataField:"owner_name"}),width:200}),l.default.createElement(c.Column,{header:l.default.createElement(h.HeaderCell,{title:"Status"}),data:l.default.createElement(h.GenericDataCell,{dataType:t,params:{id:y},dataField:"status",isBold:!0}),width:110}),l.default.createElement(c.Column,{header:l.default.createElement(c.Cell,null,""),fixedWidth:!0,data:l.default.createElement(h.ActionDataCell,{params:{id:y},activeUser:n,shareScenario:i,duplicateScenario:o,removeScenario:_,archiveScenario:d,unarchiveScenario:f,dataType:t}),width:40})))};b.propTypes={activeUser:s.default.object.isRequired,markedScenarios:s.default.array.isRequired,handleScenarioCheckboxClick:s.default.func.isRequired,handleShareScenarioClick:s.default.func.isRequired,handleDuplicateScenarioClick:s.default.func.isRequired,handleRowClick:s.default.func.isRequired,headerHeight:s.default.number,handleArchiveScenario:s.default.func.isRequired,showScenarioWarningColumn:s.default.bool,onWarningIconClick:s.default.func.isRequired,removeScenario:s.default.func,dataType:s.default.string.isRequired,targetLpft:s.default.string,isActive:s.default.bool,studyId:s.default.number.isRequired,rowsCount:s.default.number.isRequired,handleUnarchiveScenario:s.default.func.isRequired},b.defaultProps={headerHeight:void 0,showScenarioWarningColumn:!1,removeScenario:null,selectedScenario:null,targetLpft:null,isActive:!1},t.default=(0,d.withRouter)((0,u.connect)(r)(b))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n);a(2240);var i=function(){return r.default.createElement("div",{className:"wrapper"},r.default.createElement("div",{className:"gutter"}),r.default.createElement("div",{className:"main"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-offset-1 col-width-3 area-red"}))),r.default.createElement("div",{className:"gutter"}))};t.default=i},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t){var a=void 0;try{a=0===t.length?[].concat(n(e)):e.reduce(function(e,t,a){var n=e;return n[a]?n[a]=[n[a][0],n[a][1]+Math.trunc(t[1])]:n.push([t[0],n[a-1][1]+Math.trunc(t[1])]),n},t)}catch(e){return console.error(e),a}return a}function i(e,t,a,r){var i=e.slice(0);t&&(i=i.map(function(e,t){var i=e.slice(0),l=r[t],o=l.diff(a,"d");if(o<=0||isNaN(o)||0===i.length)return i;for(var s=new Array(o),u=0;u<s.length;u+=1)s[u]=[u+1,0];for(var d=0;d<i.length;d+=1){var c=i[d][0]+o,f=i[d][1];i[d]=[c,f]}return[].concat(s,n(i))})),i.sort(function(e,t){return e.length>t.length?-1:e.length<t.length?1:0});var l=i[0].length;return i.filter(function(e){return e.length>0}).map(function(e){if(e.length<l){var t=e.slice();do{var a=e[e.length-1]||0;t.push(a)}while(t.length<l);return t}return e})}function l(e,t){return!(null===e[t+"curves"]||void 0===e[t+"curves"]||e[t+"curves"].length<3||0===e[t+"curves"][0].length||0===e[t+"curves"][1].length||0===e[t+"curves"][2].length)}function o(e){var t=e.reduce(function(e,t){var a=e,n=t[t.length-1];return n[0]>e&&(a=n[0]),a},0),a=e.map(function(e){for(var a=e.slice(),n=0;a[a.length-1][0]<t&&!(n>=1e4);){var r=e[e.length-1][1],i=a[a.length-1][0]+1;a.push([i,r]),n+=1}return a.reduce(function(e,t){return e[t[0]]?e[t[0]].length<=2&&e[t[0]].push(t[1]):e[t[0]]=[t[1]],e},{})}).reduce(function(e,t){return Object.keys(t).forEach(function(a){var r=t[a],i=e[a];if(i){var l=[i,r];l.sort(function(e,t){return e.length>t.length?-1:e.length<t.length?1:0});for(var o=l[0].length,s=[],u=0;u<o;u+=1){var d=void 0!==l[0][u]?l[0][u]:0,c=void 0!==l[1][u]?l[1][u]:l[1][0];s.push(d+c)}e[a]=s}else e[a]=[].concat(n(r))}),e},{}),r=Object.keys(a).reduce(function(e,t){var r=a[t].sort(function(e,t){return e<t?-1:e>t?1:0}).map(function(e){return[+t,e]});return[].concat(n(e),n(r))},[]),i=e.reduce(function(e,t){var a=t[t.length-1],n=a[0];return n>e?n:e},0),l=(0,d.default)(r,function(e){return e[0]===i});return l>-1?r.slice(0,l+1):r}function s(e,t,a,s,u){var d=e,f=[],p=[],h=[],v=[],m=[],_=[];if(t.forEach(function(e){if(l(e,"")){a&&_.push(e.fp);var t=e.curves[0];f.push(t);var n=e.curves[1];p.push(n);var r=e.curves[2];if(h.push(r),"actual"===e.valuesType&&e.curves[3]&&e.curves[4]){var i=e.curves[3];v.push(i);var o=e.curves[4];m.push(o)}}}),0===f.length||0===p.length||0===h.length)return d;var E=i(f,a,s,_);if("actual"===e.valuesType)E.forEach(function(t){d.curves[0]=r(t,e.curves[0])});else{var g=o(E);d.curves[0]=[].concat(n(g))}return i(p,a,s,_).forEach(function(t){"adjusted"===e.valuesType||u?d.curves[1]=r(t,e.curves[1]):d.curves[1]=(0,c.updateCurveWithZeroToOne)(r(t,e.curves[1]),e.fsiv,e.fpfv,s)}),i(h,a,s,_).forEach(function(t){"adjusted"===e.valuesType||u?d.curves[2]=r(t,e.curves[2]):d.curves[2]=(0,c.updateCurveWithZeroToOne)(r(t,e.curves[2]),e.fpfv,e.fpft,s)}),0===v.length||0===m.length?d:("actual"===e.valuesType&&(i(v).forEach(function(t){t.length>0&&(d.curves[3]=r(t,e.curves[3]))}),i(m).forEach(function(t){t.length>0&&(d.curves[4]=r(t,e.curves[4]))})),d)}Object.defineProperty(t,"__esModule",{value:!0}),t.aggregateCurveData=r,t.prepareCurvesForAggregation=i,t.aggregateCurvesData=s;var u=a(1788),d=function(e){return e&&e.__esModule?e:{default:e}}(u),c=a(110)},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(e){return e.reduce(function(e,t){var a=t.curves,n=t.patient_allocation,l=t.patient_allocation_min,o=t.patient_allocation_max,s=t.num_sites,u=t.fsiv,d=t.sas,c=t["25_si"],f=t["50_si"],p=t["90_si"],h=t.fpfv,v=t.lpfv,m=t.fpfv_lpfv,_=t.fpfv_fpft,E=t.randomisation_rate,g=t.screening_failure,y=t.sr,S=t.lpft,b=t.fpft,C=t.fpp_fpfv,O=t.invalidFields,T=t.generatedFields,R=t.actual_curves,A=t.actual_patient_allocation,I=t.actual_num_sites,w=t.actual_fsiv,N=t.actual_sas,D=t.actual_25_si,P=t.actual_50_si,L=t.actual_90_si,M=t.actual_fpfv,k=t.actual_fpfv_lpfv,x=t.actual_randomisation_rate,j=t.actual_screening_failure,F=t.actual_screening_rate,U=t.actual_f_lpft,V=t.actual_date,B=t.actual_fpft,H=t.actual_fpp_fpfv,G=t.actual_lpfv,Y=t.actual_overallocation,z=t.actual_randomized,W=t.actual_screened,q=t.actual_siv,K=t.q25_actual_randomized,X=t.q75_actual_randomized,Z=t.adjusted_curves,J=t.adjusted_patient_allocation,Q=t.adjusted_patient_allocation_min,$=t.adjusted_patient_allocation_max,ee=t.adjusted_num_sites,te=t.adjusted_fsiv,ae=t.adjusted_sas,ne=t.adjusted_25_si,re=t.adjusted_50_si,ie=t.adjusted_90_si,le=t.adjusted_fpfv,oe=t.adjusted_lpfv,se=t.adjusted_fpfv_lpfv,ue=t.adjusted_fpfv_fpft,de=t.adjusted_fpp_fpfv,ce=t.adjusted_fpft,fe=t.adjusted_unlock,pe=t.adjusted_randomisation_rate,he=t.adjusted_screening_failure,ve=t.adjusted_sr,me=t.adjusted_lpft,_e=(t.adjusted_invalids,t.adjusted_invalidFields),Ee=t.adjusted_overrideList,ge=t.adjusted_errorMessages,ye=r(t,["curves","patient_allocation","patient_allocation_min","patient_allocation_max","num_sites","fsiv","sas","25_si","50_si","90_si","fpfv","lpfv","fpfv_lpfv","fpfv_fpft","randomisation_rate","screening_failure","sr","lpft","fpft","fpp_fpfv","invalidFields","generatedFields","actual_curves","actual_patient_allocation","actual_num_sites","actual_fsiv","actual_sas","actual_25_si","actual_50_si","actual_90_si","actual_fpfv","actual_fpfv_lpfv","actual_randomisation_rate","actual_screening_failure","actual_screening_rate","actual_f_lpft","actual_date","actual_fpft","actual_fpp_fpfv","actual_lpfv","actual_overallocation","actual_randomized","actual_screened","actual_siv","q25_actual_randomized","q75_actual_randomized","adjusted_curves","adjusted_patient_allocation","adjusted_patient_allocation_min","adjusted_patient_allocation_max","adjusted_num_sites","adjusted_fsiv","adjusted_sas","adjusted_25_si","adjusted_50_si","adjusted_90_si","adjusted_fpfv","adjusted_lpfv","adjusted_fpfv_lpfv","adjusted_fpfv_fpft","adjusted_fpp_fpfv","adjusted_fpft","adjusted_unlock","adjusted_randomisation_rate","adjusted_screening_failure","adjusted_sr","adjusted_lpft","adjusted_invalids","adjusted_invalidFields","adjusted_overrideList","adjusted_errorMessages"]),Se={ignoreGenericData:ye.ignoreGenericData,fp:ye.fp,constraint:ye.constraint,country_id:ye.country_id,country_name:ye.country_name,events:ye.events,adjusted_events:ye.adjusted_events,id:ye.id,location:ye.location,lockedFields:ye.lockedFields,name:ye.name,overrideList:ye.overrideList,override_id:ye.override_id,platform_country_id:ye.platform_country_id,region:ye.region,region_id:ye.region_id,region_name:ye.region_name,scenario_id:ye.scenario_id,regionHasSingleCountry:ye.regionHasSingleCountry,unlock:ye.unlock,actualTimeseriesSnapshot:ye.actualTimeseriesSnapshot,errorMessages:ye.errorMessages,hasActuals:ye.hasActuals,canBeIgnored:ye.canBeIgnored,onlyActuals:ye.onlyActuals,ignoreAdjustedData:ye.ignoreAdjustedData,country_sites_approval_status:ye.country_sites_approval_status};return e.genericDataRows.push(i({},Se,{valuesType:"generic",curves:a,patient_allocation:n,patient_allocation_min:l,patient_allocation_max:o,num_sites:s,fsiv:u,sas:d,"25_si":c,"50_si":f,"90_si":p,fpfv:h,fpfv_lpfv:m,lpfv:v,fpfv_fpft:_,randomisation_rate:E,screening_failure:g,sr:y,lpft:S,fpft:b,fpp_fpfv:C,invalidFields:O,uncertainty:ye.uncertainty,historical_reference_data_by_indication:ye.historical_reference_data_by_indication,historical_reference_data_by_studies:ye.historical_reference_data_by_studies,generatedFields:T,ignore_aggregation:ye.ignore_aggregation})),e.actualDataRows.push(i({},Se,{valuesType:"actual",curves:R,patient_allocation:A,num_sites:I,fsiv:w,sas:N,"25_si":D,"50_si":P,"90_si":L,fpfv:M,fpfv_lpfv:k,randomisation_rate:x,screening_failure:j,sr:F||ye.actual_sr,lpft:U,actual_date:V,fpft:B,fpp_fpfv:H,lpfv:G,overallocation:Y,actual_siv:q,actual_randomized:z,actual_screened:W,q75_actual_randomized:X,q25_actual_randomized:K,original_f_lpft:ye.original_f_lpft,planned_num_sites:s})),e.adjustedDataRows.push(i({},Se,{valuesType:"adjusted",curves:Z,patient_allocation:J,patient_allocation_min:Q,patient_allocation_max:$,num_sites:ee,fsiv:te,sas:ae,"25_si":ne,"50_si":re,"90_si":ie,fpfv:le,lpfv:oe,fpfv_lpfv:se,randomisation_rate:pe,screening_failure:he,sr:ve,lpft:me,fpfv_fpft:ue,fpp_fpfv:de,fpft:ce,invalidFields:_e,ignore_aggregation:ye.ignore_aggregation,overrideList:Ee,unlock:fe,errorMessages:ge})),e},{genericDataRows:[],actualDataRows:[],adjustedDataRows:[]})},o=function(e,t,a){var n={valuesType:a,location:e,type:t,patient_allocation:0,num_sites:0,fsiv:null,sas:0,"25_si":null,"50_si":null,"90_si":null,fpfv_fpft:null,randomisation_rate:0,screening_failure:0,overrideList:[],sr:0,amount_countries:0,fpfv:null,fpfv_lpfv:0,lpft:null,fpft:null,fpp_fpfv:0,unlock:[],generatedFields:[],errorMessages:{}},r={};return"actual"===a&&(r={actual_date:null,lpfv:null,overallocation:0,planned_num_sites:0}),i({},n,r)},s=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.valuesType+"_",r=(e={},n(e,a+"curves",t.curves),n(e,a+"lpft",t.lpft),n(e,a+"lpfv",t.lpfv),n(e,a+"fpfv_lpfv",t.fpfv_lpfv),n(e,a+"fpp_fpfv",t.fpp_fpfv),n(e,a+"fpfv",t.fpfv),n(e,a+"fpft",t.fpft),n(e,a+"fsiv",t.fsiv),n(e,a+"fpfv_fpft",t.fpfv_fpft),n(e,a+"25_si",t["25_si"]),n(e,a+"50_si",t["50_si"]),n(e,a+"90_si",t["90_si"]),n(e,a+"num_sites",t.num_sites),n(e,a+"patient_allocation",t.patient_allocation),n(e,a+"patient_allocation_min",t.patient_allocation_min),n(e,a+"patient_allocation_max",t.patient_allocation_max),n(e,a+"sas",t.sas),n(e,a+"screening_failure",t.screening_failure),n(e,a+"sr",t.sr),n(e,a+"randomisation_rate",t.randomisation_rate),n(e,a+"invalids",t.invalidFields),n(e,a+"errorMessages",t.errorMessages),n(e,a+"overrideList",t.overrideList),n(e,a+"unlock",t.unlock),e);return"actual"===t.valuesType&&(r=i({},r,{actual_date:t.actual_date,actual_f_lpft:t.lpft,actual_overallocation:t.overallocation,actual_siv:t.actual_siv,actual_screened:t.actual_screened,actual_randomized:t.actual_randomized,q75_actual_randomized:t.q75_actual_randomized,q25_actual_randomized:t.q25_actual_randomized,original_f_lpft:t.original_f_lpft})),r};t.rowDataTemplate=o,t.getPrefixedData=s,t.default=l},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t){var a=["sas","fpfv_lpfv","sr","screening_failure","randomisation_rate","25_si","50_si","90_si"],r=[].concat(n(e.generatedFields),a),i=["fsiv","fpfv","lpft"];return t.forEach(function(t){t.generatedFields&&(t.generatedFields.includes("num_sites")&&r.push("num_sites"),i.forEach(function(a){t.generatedFields.includes(a)&&e[a]&&t[a]&&e[a].isSame(t[a])&&r.push(a)}))}),r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,a){"use strict";function n(e,t){var a=t.cohorts&&t.cohorts.length>0,n=a?{"_Global Rollup":t.approvedData.aggregatedGlobalData}:t.approvedData.fullData;return e.map(function(e){var t=r({},e),a=(void 0!==t.country_name?t.region_name:"")+"_"+t.location,l=n[a];return l&&i.APPROVED_COUNTRY_DATA_FIELDS.filter(function(e){return"override_id"!==e}).forEach(function(e){t[e]=l[e]}),t.sr=t.randomisation_rate/(1-t.screening_failure),t})}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=n;var i=a(10)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a,n){(t||0===t)&&(e.GR[a]+=t,n&&(e[n][a]+=t))}function i(e,t,a,n){t&&(e.GR[a]=e.GR[a]?Math.min(t,e.GR[a]):t,n&&(e[n][a]=e[n][a]?Math.min(t,e[n][a]):t))}function l(e,t,a,n){if(t){var r=(0,d.default)(e.GR,a);if((0,f.default)(e.GR,a,r?h.default.min(t,r):t),n){var i=(0,d.default)(e,n+"."+a);(0,f.default)(e,n+"."+a,i?h.default.min(t,i):t)}}}function o(e,t,a,n){if(t){var r=(0,d.default)(e.GR,a);if((0,f.default)(e.GR,a,r?h.default.max(t,r):t),n){var i=(0,d.default)(e,n+"."+a);(0,f.default)(e,n+"."+a,i?h.default.max(t,i):t)}}}function s(e,t,a,n,r){return(r?a.filter(function(e){return!e.ignoreGenericData}):a).filter(function(e){return e[t]}).reduce(function(a,r){var i=r[t]/n,l=r[e];return void 0===l||null===l?(l=0,a):a+ +l*i},null)}Object.defineProperty(t,"__esModule",{value:!0}),t.aggregateNumValue=r,t.aggregateNumValueMin=i,t.aggregateDateValueMin=l,t.aggregateDateValueMax=o,t.getWeightedBySitesValue=s;var u=a(12),d=n(u),c=a(1792),f=n(c),p=a(11),h=n(p)},function(e,t,a){"use strict";function n(e,t){var a=null,n=null,i=null,l=null,o=e.actual_fpfv_lpfv;if(e.actual_siv&&e.actual_siv.length>0&&e.actual_screened&&e.actual_screened.length>0&&e.actual_randomized&&e.actual_randomized.length>0){var s=e.actual_screened.find(function(e){return e[1]>0&&"ACTUALS"===e[2]});s&&(i=s[0]?(0,r.getMomentDate)(s[0]):null,a=o&&i?i.clone().add(o,"d"):null,l=i?Math.ceil(i.diff(t,"day",!0)):null);var u=e.actual_randomized.find(function(e){return e[1]>0&&"ACTUALS"===e[2]});n=u?(0,r.getMomentDate)(u[0]):null}var d=e.actual_fsiv,c=e.actual_sr||e.actual_screening_rate;return{actual_siv:e.actual_siv,actual_screened:e.actual_screened,actual_randomized:e.actual_randomized,actual_curves:e.actual_curves?e.actual_curves:[e.actual_siv||[],e.actual_screened||[],e.actual_randomized||[],e.q75_actual_randomized||[],e.q25_actual_randomized||[]],actual_fsiv:d,actual_fpfv:i,actual_fpft:n,actual_lpfv:a,actual_fpp_fpfv:l,actual_fpfv_lpfv:o,actual_sr:c}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(8);t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(8),i=function(e,t,a,i){var l=t.aggregatedHistoricalDataByIndication,o=t.aggregatedHistoricalDataByStudy,s=t.approvedData,u=t.exact_copy,d=t.hasAdjustedOrigin,c=t.source_scenario_id,f=t.state,p=n({},(0,r.prepareScenarioObject)(e),{aggregatedHistoricalDataByIndication:l,aggregatedHistoricalDataByStudy:o,exact_copy:u,hasAdjustedOrigin:d,source_scenario_id:c,state:f});if(p.countries=a?p.countries:(0,r.prepareScenarioCountriesObject)(p,!1),s&&s.cohorts){var h=s.cohorts.find(function(e){return e[i]===p[i]});h&&h.fullData&&(p.approvedData={fullData:h.fullData,fp:h.fp})}return n({},p,{fullData:(0,r.getScenarioCalculatedData)(p.countries,p,!0)})};t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a,n,l,o,f,h,m,E,S,b,C,O){var T=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[],R=(arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]),A=arguments[20],I=arguments[21],w=C?C/(365/12):C,N=(0,u.validateCurvesCalcArguments)(e,t,n,l,o,f,h,m,E,S,b,w,a,null,A,I),D=N.invalidFields,P=N.skipCalculation,L=N.errorMessages;if(P)return(0,d.getErrorCalculationResultObject)({invalidFields:D,fpfv:l,fsiv:n,fpfvFpft:a,si25:o,si50:f,si90:h,nSites:m,patientAllocation:E,randomisationRate:C,SAS:S,SF:b,prefix:O,events:T,errorMessages:L});try{var M,k,x=T.reduce(function(e,t){switch(t.event_type){case y.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE:e.type3Events.push(t);break;case y.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE:e.type4Events.push(t);break;case y.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE:e.type1Events.push(t);break;case y.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS:e.type2Events.push(t)}return e},{type3Events:[],type4Events:[],type1Events:[],type2Events:[]}),j=x.type3Events,F=x.type4Events,U=x.type1Events,V=x.type2Events,B=(0,d.prepareCountryEventsForCalculation)(j,e),H=(0,d.prepareCountryEventsForCalculation)(F,e),G=(0,d.prepareCountryEventsForCalculation)(U,e),Y=V,z=a,W=n.diff(e,"d"),q=l.diff(n,"d"),K=W+q,X=W+q+z,Z=+E,J=l.clone().add(a,"d"),Q=Math.ceil(s.default.duration(t.diff(e)).asDays()),$=Q>d.MAX_CALCULATION_PERIOD?Q:d.MAX_CALCULATION_PERIOD,ee=(0,p.default)({startDate:e,FPP_FSIV:W,fsiv:n,si25:o,si50:f,si90:h,nSites:m}),te=ee.sivCurve,ae=void 0===te?[]:te,ne=ee.siteInitiated,re=void 0===ne?[]:ne,ie=W+q+z+1+(re.length-1),le=new Array(ie>$?ie:$+q).fill(0);(M=le).splice.apply(M,[q,re.length].concat(i(re))),le.fill(re[re.length-1],q+re.length),le=!R&&(G.length>0||Y.length>0||B.length>0||H.length>0)?(0,c.applySiteTerminationWithEvents)(le,H,B,Y,G,Z/(m*S)*1.1,S,w,b,W,q,z,$,O,e,t,l,K):(0,c.applySiteTerminationUpdate)(le,B,G,Z,m,S,w);var oe=(0,v.default)(le,[],B,G,b,w,R);0===oe.length&&(oe=[0]);var se=(0,_.default)({countryScreeningRate:oe,nPatients:Z,SF:b,fpfvInd:K});if(se.length===d.MAX_CURVE_LENGTH)return(0,d.getErrorCalculationResultObject)({invalidFields:["patient_allocation","num_sites","randomisation_rate","screening_failure"],fpfv:l,fsiv:n,fpfvFpft:a,si25:o,si50:f,si90:h,nSites:m,patientAllocation:E,randomisationRate:C,SAS:S,SF:b,prefix:O,events:T,errorMessages:{patient_allocation:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,num_sites:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,randomisation_rate:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,screening_failure:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE}});oe=(0,v.default)(le,[],B,[],b,w,R);var ue=(0,g.default)({FPP_FSIV:W,FSIV_FPFV:q,FPFV_FPFT:z,countryScreeningRate:oe,totalDuration:$,SF:b,nPatients:Z,preparedType1Events:G,preparedType2Events:Y,screeningCurve:se,prefix:O,startDate:e,endDate:t,preparedType4Events:H,protectedScenario:R,fpft:J,fpftInd:X});if(ue.length===d.MAX_CURVE_LENGTH)return(0,d.getErrorCalculationResultObject)({invalidFields:["patient_allocation","num_sites","randomisation_rate","screening_failure"],fpfv:l,fsiv:n,fpfvFpft:a,si25:o,si50:f,si90:h,nSites:m,patientAllocation:E,randomisationRate:C,SAS:S,SF:b,prefix:O,events:T,errorMessages:{patient_allocation:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,num_sites:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,randomisation_rate:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,screening_failure:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE}});var de=ue.length;se=se.length>de?se.slice(0,de):se;var ce=ue.map(function(e){return e[1]}),fe=ce.indexOf(Math.max.apply(Math,i(ce))),pe=fe>-1?e.clone().add(fe+1,"d"):null,he=se.map(function(e){return e[1]}),ve=he.indexOf(Math.max.apply(Math,i(he))),me=ve-K+1;se=se.slice(0,ve+1),ve>fe&&(se=se.map(function(e,t){var a=e.slice();return t>=fe-z&&(a[1]=he[fe-z]),a}),he=se.map(function(e){return e[1]}),ve=he.indexOf(Math.max.apply(Math,i(he))),me=ve-K+1);var _e=ve>-1?e.clone().add(ve+1,"d"):null;ae.length>fe&&(ae=ae.slice(0,fe));var Ee=ae.find(function(e){return e[0]===W});return Ee&&(Ee[1]=1),se=(0,d.updateCurveWithZeroToOne)(se,n,l,e),ue=(0,d.updateCurveWithZeroToOne)(ue,l,J,e),k={},r(k,O+"curves",[ae,se,ue]),r(k,O+"lpft",pe),r(k,O+"lpfv",_e),r(k,O+"fpfv_lpfv",me<0?null:me),r(k,O+"fpp_fpfv",K),r(k,O+"fpfv",l),r(k,O+"fpft",J),r(k,O+"fsiv",n),r(k,O+"fpfv_fpft",z),r(k,O+"25_si",o),r(k,O+"50_si",f),r(k,O+"90_si",h),r(k,O+"num_sites",m),r(k,O+"patient_allocation",Z),r(k,O+"sas",S),r(k,O+"randomisation_rate",C),r(k,O+"screening_failure",b),r(k,O+"sr",C/(1-b)),r(k,"prefix",O),r(k,O+"events",T),r(k,"errorMessages",L),k}catch(e){return(0,d.getErrorCalculationResultObject)({invalidFields:D,fpfv:l,fsiv:n,fpfvFpft:a,si25:o,si50:f,si90:h,nSites:m,patientAllocation:E,randomisationRate:C,SAS:S,SF:b,prefix:O,events:T,errorMessages:L})}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(11),s=n(o),u=a(242),d=a(110),c=a(514),f=a(513),p=n(f),h=a(336),v=n(h),m=a(337),_=n(m),E=a(335),g=n(E),y=a(46);t.default=l},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t,a,n,l,s,p,_,E,g,y,S,b,C){var O=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[],T=arguments[15],R=arguments[16],A=arguments[17],I=arguments[18],w=arguments[19],N=arguments[20],D=arguments[21],P=b?b/(365/12):b,L=(0,d.validateCurvesCalcArguments)(e,t,n,l,s,p,_,E,g,y,S,P,a,null,N,D),M=L.invalidFields,k=L.skipCalculation,x=L.errorMessages;if(R&&T||M.push("latest_actual"),k){var j;return j={error:!0},i(j,C+"invalidFields",M),i(j,C+"curves",[[],[],[]]),i(j,C+"lpft",null),i(j,C+"fpfv_lpfv",null),i(j,C+"fpp_fpfv",null),i(j,C+"fpfv",l),i(j,C+"fpft",null),i(j,C+"fsiv",n),i(j,C+"fpfv_fpft",a),i(j,C+"25_si",s),i(j,C+"50_si",p),i(j,C+"90_si",_),i(j,C+"num_sites",E),i(j,C+"patient_allocation",g),i(j,C+"randomisation_rate",b),i(j,C+"sas",y),i(j,C+"screening_failure",S),i(j,C+"sr",b/(1-S)),i(j,"prefix",C),i(j,C+"events",O),i(j,C+"errorMessages",x),j}try{var F,U,V,B=O.reduce(function(e,t){switch(t.event_type){case m.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE:e.type3Events.push(t);break;case m.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE:e.type4Events.push(t);break;case m.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE:e.type1Events.push(t);break;case m.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS:e.type2Events.push(t)}return e},{type3Events:[],type4Events:[],type1Events:[],type2Events:[]}),H=B.type3Events,G=B.type4Events,Y=B.type1Events,z=B.type2Events,W=(0,c.prepareCountryEventsForCalculation)(H,e),q=(0,c.prepareCountryEventsForCalculation)(G,e),K=(0,c.prepareCountryEventsForCalculation)(Y,e),X=z,Z=l.diff(n,"d"),J=n.diff(e,"d"),Q=l.diff(n,"d"),$=J+Q,ee=J+Q+a,te=l.clone().add(a,"d"),ae=T.diff(e,"d"),ne=+g,re=+E,ie=[],le=[],oe=[],se=R,ue=25*re/100,de=50*re/100,ce=90*re/100,fe=0,pe=0,he=0,ve=0;se>0&&se<=ue?(fe=ue-se,pe=.25*re,he=.4*re,ve=.1*re):se>ue&&se<=de?(fe=0,pe=de-se,he=.4*re,ve=.1*re):se>de&&se<=ce?(fe=0,pe=0,he=ce-se,ve=.1*re):(fe=.25*re,pe=.25*re,he=.4*re,ve=.1*re);var me=Math.ceil(u.default.duration(t.diff(e)).asWeeks()),_e=s.diff(e,"d")-J,Ee=p.diff(e,"d")-J,ge=_.diff(e,"d")-J,ye=ge+(ge-Ee)/4*2;0===ye&&(ye=1);var Se=a,be=Array(J+Math.ceil(ye)).fill(0);be.fill(fe/(0===_e?1:_e),J,J+(0===_e?1:_e));var Ce=Ee-_e==0?1:Ee-_e;be.fill(pe/Ce,J+_e,J+Ee);var Oe=ge-Ee==0?1:ge-Ee;be.fill(he/Oe,J+Ee,J+ge);var Te=Math.ceil(ye-ge==0?1:ye-ge);be.fill(ve/Te,J+ge,J+Math.ceil(ye));var Re=be.reduce(function(e,t,a){var n=t;return 0!==a&&(n+=e[e.length-1]),e.push(n),e},[]),Ae=[],Ie=Re.reduce(function(e,t,a){var n=Math.ceil(t.toFixed(6));return a+1===ae?(e[0].push([a+1,+se]),e[1].push(+se)):a+1>ae?n>0?(n+=+se,n=n>re?re:n,e[0].push([a+1,+n]),e[1].push(+n)):(e[0].push([a+1,+se]),e[1].push(+se)):e[1].push(0),e},[[],[]]),we=o(Ie,2);ie=we[0],Ae=we[1],0===ie.length&&(ie.push([ae,re]),Ae[Ae.length-1]=re);var Ne=Array(me+Z).fill(0);(F=Ne).splice.apply(F,[Z,Ae.length].concat(r(Ae))),Ne.fill(Ae[Ae.length-1],Z+Ae.length),Ne=!w&&(K.length>0||X.length>0||W.length>0||q.length>0)?(0,f.applySiteTerminationWithEvents)(Ne,q,W,X,K,ne/(re*y)*1.1,y,P,S,J,Q,Se,me,C,e,t,$):(0,f.applySiteTerminationUpdate)(Ne,W,K,ne,re,y,P);var De=(0,h.default)(Ne,[],W,K,S,P,w);0===De.length&&(De=[0]);var Pe=Math.max.apply(Math,r(De));if(Pe&&0!==Pe){var Le=void 0,Me=0,ke=ne/(1-S);do{Le=void 0!==De[Me]?De[Me]:Pe,0!==Me&&le[le.length-1]&&($===Me+1&&(Le+=1),Le+=le[le.length-1][1]),Me+1>=ae&&0===le.length?le.push([Me+1,A]):Me+1>ae&&le.push([Me+1,Le>ke?ke:Le]),Me+=1}while(Le<=ke&&le.length<c.MAX_CURVE_LENGTH)}if(0===le.length&&le.push([1,0]),le.length===c.MAX_CURVE_LENGTH)return(0,c.getErrorCalculationResultObject)({invalidFields:["patient_allocation","num_sites","randomisation_rate","screening_failure"],fpfv:l,fsiv:n,fpfvFpft:a,si25:s,si50:p,si90:_,nSites:re,nPatients:ne,randomisationRate:b,SAS:y,SF:S,prefix:C,events:O,errorMessages:{patient_allocation:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,num_sites:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,randomisation_rate:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,screening_failure:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE},actualTimeseriesSnapshot:{actual_date:T,sites_initiated:R,patients_screened:A,patients_randomized:I}});De=(0,h.default)(Ne,[],W,[],S,P,w);var xe=J+Z+Se+1+De.indexOf(Math.max.apply(Math,r(De))),je=Array(xe>me?xe:me).fill(0);(U=je).splice.apply(U,[Se,De.length].concat(r(De))),je.fill(Math.max.apply(Math,r(De)),Se+De.length),je=(0,v.getEnrolmentRateWithType4EventsApplied)(je,q,S),0===je.length&&(je=[0]),je=je.map(function(e,t){var a=e;return w?K.forEach(function(e){t>=e.startWeek&&t<e.endWeek&&(a=0)}):K.forEach(function(e){t>e.startWeek&&t-Se<=e.endWeek&&(a=0)}),a});var Fe=Math.max.apply(Math,r(je));if(Fe&&0!==Fe){var Ue=0,Ve=0;do{Ue=void 0!==je[Ve]?je[Ve]:Fe,0!==Ve&&oe[oe.length-1]&&(Ve+1===ee&&(Ue+=1),Ue+=oe[oe.length-1][1]),Ve+1>=ae&&0===oe.length?oe.push([Ve+1,I]):Ve+1>ae&&oe.push([Ve+1,Ue>ne?ne:Ue]),Ve+=1}while(Ue<=ne&&oe.length<c.MAX_CURVE_LENGTH);if(oe.length===c.MAX_CURVE_LENGTH)return(0,c.getErrorCalculationResultObject)({invalidFields:["patient_allocation","num_sites","randomisation_rate","screening_failure"],fpfv:l,fsiv:n,fpfvFpft:a,si25:s,si50:p,si90:_,nSites:re,nPatients:ne,randomisationRate:b,SAS:y,SF:S,prefix:C,events:O,errorMessages:{patient_allocation:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,num_sites:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,randomisation_rate:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,screening_failure:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE},actualTimeseriesSnapshot:{actual_date:T,sites_initiated:R,patients_screened:A,patients_randomized:I}});var Be=X.reduce(function(e,t){var a=oe.findIndex(function(e){return e[1]>=t.patients});if(-1!==a){var n=a+t.start_after,r=t.duration;return e[n]?e[n]=r>e[n]?r:e[n]:e[n]=r,e}},{});X.sort(function(e,t){var a=oe.findIndex(function(t){return t[1]>=e.patients}),n=oe.findIndex(function(e){return e[1]>=t.patients});if(-1!==a&&-1!==n){var r=a+e.start_after,i=n+t.start_after;return r<i?-1:r>i?1:0}return 0}),X.forEach(function(e,t){var a=oe.findIndex(function(t){return t[1]>=e.patients});if(-1!==a){var n=a+e.start_after,r=e.duration,i=le[n],l=void 0;if(i){l=i[2];var o=Be[n];void 0!==o&&(r=o)}if(i&&!l){for(var s=[],u=0;u<r;u+=1)s.push([i[0]+u,i[1],"pause"]);le.splice.apply(le,[n,0].concat(s)),le.forEach(function(e,t){t>=n+r&&(e[0]+=r)})}var d=oe[n];if(d&&!l){for(var c=[],f=0;f<r;f+=1)c.push([d[0]+f,d[1],"pause"]);oe.splice.apply(oe,[n,0].concat(c)),oe.forEach(function(e,t){t>=n+r&&(e[0]+=r)})}}})}ie=(0,c.unshiftElementsToCurve)(ie),le=(0,c.unshiftElementsToCurve)(le),oe=(0,c.unshiftElementsToCurve)(oe);var He=oe.length;le=le.length>He?le.slice(0,He):le;var Ge=oe.map(function(e){return e[1]}),Ye=Ge.indexOf(Math.max.apply(Math,r(Ge))),ze=oe[Ye]?oe[Ye][0]:null,We=Ye>-1&&null!==ze?e.clone().add(ze,"d"):null,qe=le.map(function(e){return e[1]}),Ke=qe.indexOf(Math.max.apply(Math,r(qe))),Xe=le[Ke]&&le[Ke][0],Ze=l.diff(e,"d"),Je=Xe-Ze;Ke>Ye&&(le=le.map(function(e,t){var a=e.slice();return t>=Ye&&(a[1]=qe[Ye]),a}),qe=le.map(function(e){return e[1]}),Ke=qe.indexOf(Math.max.apply(Math,r(qe))),Xe=le[Ke][0],Ze=l.diff(e,"d"),Je=Xe-Ze);var Qe=Ke>-1?e.clone().add(Ke+1,"d"):null;return V={},i(V,C+"curves",[ie,le,oe]),i(V,C+"lpft",We),i(V,C+"lpfv",Qe),i(V,C+"fpfv_lpfv",Je<0?null:Je),i(V,C+"fpp_fpfv",$),i(V,C+"fpfv",l),i(V,C+"fpft",te),i(V,C+"fsiv",n),i(V,C+"fpfv_fpft",Se),i(V,C+"25_si",s),i(V,C+"50_si",p),i(V,C+"90_si",_),i(V,C+"num_sites",re),i(V,C+"patient_allocation",ne),i(V,C+"randomisation_rate",b),i(V,C+"sas",y),i(V,C+"screening_failure",S),i(V,C+"sr",b/(1-S)),i(V,"prefix",C),i(V,C+"events",O),i(V,"actualTimeseriesSnapshot",{actual_date:T,sites_initiated:R,patients_screened:A,patients_randomized:I}),V}catch(e){return console.error(e),(0,c.getErrorCalculationResultObject)({invalidFields:[],fpfv:l,fsiv:n,fpfvFpft:a,si25:s,si50:p,si90:_,nSites:E,patientAllocation:g,randomisationRate:b,SAS:y,SF:S,prefix:C,events:O,errorMessages:{patient_allocation:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,num_sites:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,randomisation_rate:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,screening_failure:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE},actualTimeseriesSnapshot:{actual_date:T,sites_initiated:R,patients_screened:A,patients_randomized:I}})}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=a(11),u=n(s),d=a(242),c=a(110),f=a(514),p=a(336),h=n(p),v=a(335),m=a(46);t.default=l},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(45),r=function(e){return e&&e.__esModule?e:{default:e}}(n),i=function(e){var t={};return function(){for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];try{var l=n[5];if(l in t){var o=t[l],s={fp:n[0],endDate:n[1],country:n[2],fpfvFpft:n[3],isAdjusted:n[4]};if(o.fp.isSame(s.fp,"day")&&o.endDate.isSame(s.endDate,"day")&&o.fpfvFpft===s.fpfvFpft&&o.isAdjusted===s.isAdjusted){var u=o.country,d=s.country,c="";if(s.isAdjusted&&(c="adjusted_"),u[c+"patient_allocation"]===d[c+"patient_allocation"]&&u[c+"num_sites"]===d[c+"num_sites"]&&u[c+"fsiv"]&&u[c+"fsiv"].isSame(d[c+"fsiv"])&&u[c+"sas"]===d[c+"sas"]&&u[c+"25_si"]&&u[c+"25_si"].isSame(d[c+"25_si"])&&u[c+"50_si"]&&u[c+"50_si"].isSame(d[c+"50_si"])&&u[c+"90_si"]&&u[c+"90_si"].isSame(d[c+"90_si"])&&u[c+"fpfv"]&&u[c+"fpfv"].isSame(d[c+"fpfv"])&&+u[c+"screening_failure"]==+d[c+"screening_failure"]&&+u[c+"randomisation_rate"]==+d[c+"randomisation_rate"]&&(0,r.default)(u[c+"events"],d[c+"events"])&&(0,r.default)(o.unlock,d.unlock)&&u.actual_siv&&d.actual_siv&&u.actual_siv.length===d.actual_siv.length&&u.actual_screened&&d.actual_screened&&u.actual_screened.length===d.actual_screened.length&&u.actual_randomized&&d.actual_randomized&&u.actual_randomized.length===d.actual_randomized.length)return o.country}}var f=e.apply(void 0,n);return Object.keys(t).length>=500&&(t={}),n[0]&&n[1]&&(t[l]={fp:n[0],endDate:n[1],country:f,fpfvFpft:n[3],isAdjusted:n[4],unlock:n[2]&&n[2].unlock}),f}catch(t){return console.log("Failed to cache calculated data - ",n,t),e.apply(void 0,n)}}};t.default=i},function(e,t,a){"use strict";function n(e,t,a,n){var r=[],i=void 0;switch(t){case o.default.LPFT_EARLY:i="isSameOrBefore";break;case o.default.LPFT_LATE:i="isAfter";break;default:i=null}return r=null!==i?e.map(function(e){var t=e.fullData.filter(function(t){return t.type===s.SCENARIO_DATA_TYPE.REGION&&!t.isRegionCountry&&t.lpft&&t.lpft[i](e.end_date)||t.type===s.SCENARIO_DATA_TYPE.ROLLUP||t.type===s.SCENARIO_DATA_TYPE.COUNTRY&&t.lpft&&t.lpft[i](e.end_date)});return Object.assign({},e,{fullData:t})}):e.map(function(e){var t=e.fullData.filter(function(e){return e.type===s.SCENARIO_DATA_TYPE.REGION&&!e.isRegionCountry||e.type===s.SCENARIO_DATA_TYPE.ROLLUP||e.type===s.SCENARIO_DATA_TYPE.COUNTRY});return Object.assign({},e,{fullData:t})}),r=r.map(function(e){var t=e.fullData.filter(function(e){return e.type===s.SCENARIO_DATA_TYPE.ROLLUP||e.type===s.SCENARIO_DATA_TYPE.REGION&&(a===e.location||a===l.LOCATION_FILTER_OPTIONS.ALL_REGIONS)||!(e.type!==s.SCENARIO_DATA_TYPE.COUNTRY||e.region!==e.location&&!e.regionHasSingleCountry||a!==l.LOCATION_FILTER_OPTIONS.ALL_REGIONS)||e.type===s.SCENARIO_DATA_TYPE.COUNTRY&&a===l.LOCATION_FILTER_OPTIONS.ALL_REGIONS&&n===l.LOCATION_FILTER_OPTIONS.ALL||e.type===s.SCENARIO_DATA_TYPE.COUNTRY&&a===e.region&&(null===n||n===e.location||n===l.LOCATION_FILTER_OPTIONS.ALL)});return Object.assign({},e,{fullData:t})})}function r(e){var t=void 0,a=void 0;return e.forEach(function(e){t?t.isAfter(e.fp)&&(t=e.fp):t=e.fp,a||(a=e.end_date),e.fullData.forEach(function(e){var t=(0,u.getPredictedDate)(e,!1);t&&t.isAfter(a)&&(a=t)})}),[t,a]}function i(){var e=document.createEvent("Event");e.initEvent("resize",!0,!0),window.dispatchEvent(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.filterSelectedScenarios=n,t.getMinMaxDates=r,t.fireResize=i;var l=a(197),o=function(e){return e&&e.__esModule?e:{default:e}}(l),s=a(10),u=a(241)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.processApprovedScenario=t.processScenariosPreparation=t.processStudyChanges=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(12),o=n(l),s=a(81),u=n(s),d=a(35),c=a(8),f=a(96),p=a(136),h=a(201),v=a(110),m=a(52),_=a(13),E=a(10),g=a(20),y=n(g);t.processStudyChanges=function(e,t,a){var n=e.study_details_updated_by,r=e.study_details_updated_at,i=t.auth.user,l=(0,o.default)((0,d.getLocalStorageItem)("fpo-changed-study-params",{}),e.id,{closedBy:[],updatedAt:null,updatedBy:null});if(l.updatedAt&&l.updatedAt!==r&&l.updatedBy!==i.id&&e.is_imported)a({type:"[ALERTS] STUDY_CHANGED",payload:e.id});else{var s=(0,d.getLocalStorageItem)("fpo-changed-study-params",{});s[e.id]={closedBy:[],updatedAt:r,updatedBy:n},(0,d.setLocalStorageItem)("fpo-changed-study-params",s)}},t.processScenariosPreparation=function(e,t){return t.scenarios.reduce(function(a,n){var l=(0,o.default)(t,"state.status")===y.default.ACTIVE;if(n.predicted_lpft&&(n.status!==E.SCENARIO_STATUS.APPROVED&&l||!l)){var s,u=n.source_scenario_id?"adjusted_":"";a.preparedScenarios.push((0,c.prepareScenarioObject)(i({},n,{study_id:e,fullData:[(s={},r(s,u+"patient_allocation",n.predicted_patient_allocation),r(s,u+"num_sites",n.predicted_num_sites),r(s,u+"fpfv_lpfv",n.predicted_fpfv_lpfv),r(s,u+"lpft",n.predicted_lpft),r(s,"uniqueCountries",n.predicted_num_countries),s)]})))}else a.notPreparedScenarios.push((0,c.prepareScenarioObject)(n));return a},{preparedScenarios:[],notPreparedScenarios:[]})},t.processApprovedScenario=function(e,t,a,n){if(a){var r=void 0;try{if(a.cohorts&&a.cohorts.length>0){r=(0,c.prepareScenarioObject)(a),r.end_date=(0,c.getMomentDate)(a.end_date),r.updated=(0,c.getMomentDate)(a.updated);var l=void 0;if(r.approved_data_snapshot&&(l=(0,f.deserializeScenarioData)(r))){r=i({},(0,u.default)(r,"approved_data_snapshot"),{approvedData:l,fp:l.fp,end_date:l.target_lpft,fpfv_fpft:l.fpfv_fpft}),r.cohorts=(0,p.calculateCohortsData)(a);var o=(0,h.getAggregatedGlobalRow)(r.cohorts.filter(function(e){return e.countries.length>0&&e.fp}).map(function(e){return e.fullData.find(function(e){return"rollup"===e.type})}),r.cohorts.map(function(e){return e.aggregatedActuals})[0],(0,c.getMomentDate)(r.fp),a);r.approvedData&&r.approvedData.aggregatedGlobalData&&E.APPROVED_COUNTRY_DATA_FIELDS.forEach(function(e){o[0][e]=r.approvedData.aggregatedGlobalData[e]}),r=i({},r,{fullData:o})}var s=(0,v.getUniqueCohortsCountries)(r.cohorts),d=(0,m.getStudyParamsWarning)(t,r);r=i({},r,{studyId:e,scenarioId:r.id,studyParamsWarning:d,calculating:!r.fullData&&!r.failedFetch,countries:new Array(s.length),fullData:r.fullData?r.fullData:[{}]})}else{r=(0,c.prepareScenarioObject)(a);var g=void 0;r.approved_data_snapshot&&(g=(0,f.deserializeScenarioData)(r))&&(r=i({},(0,u.default)(r,"approved_data_snapshot"),{approvedData:g,fp:g.fp,end_date:g.target_lpft,fpfv_fpft:g.fpfv_fpft}),r.countries=(0,c.prepareScenarioCountriesObject)(r,r.isImpact),r=i({},r,{studyId:e,scenarioId:r.id,fullData:(0,c.getScenarioCalculatedData)(r.countries,r)}));var y=(0,m.getStudyParamsWarning)(t,r);r=i({},r,{studyParamsWarning:y,calculating:!r.fullData&&!r.failedFetch,fullData:r.fullData?r.fullData:[{}]})}}catch(e){console.log(e)}r&&n(i({type:_.UPDATE_STUDY_SCENARIO_FULL_DATA},r))}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(13),i=function(e){switch(e.type){case"SUCCESS_"+r.GET_SCENARIO:case r.ADD_SCENARIO_TO_CACHE:return e.payload?n({},e,{payload:n({},e.payload,{approved_data_snapshot:e.payload.approved_data_snapshot?"<< APPROVED_DATA_SNAPSHOT >>":null,countries:"<< COUNTRIES >>"})}):e;case"SUCCESS_"+r.GET_STUDY_BY_ID:return e.payload?n({},e,{payload:n({},e.payload,{scenarios:"<< SCENARIOS >>"})}):e;case"SUCCESS_"+r.FETCH_ACTUALS_DATA:return e.payload?n({},e,{payload:"<< ACTUALS_DATA >>"}):e;default:return e}};t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(54),o=n(l),s=a(243),u=n(s),d=a(35),c=a(519);u.default.subscribe(function(){var e=u.default.getState(),t=!(!e.errors.sessionExpired&&!e.errors.internalServer),a={scenarios:i({},(0,o.default)(e.scenarios,Object.keys(c.initialState)),{past:[],future:[]})};t&&(a.sites=i({},e.sites,{searchSitesValue:""}),e.scenarios.dirtyDataFor&&(a.scenarios=i({},(0,o.default)(e.scenarios,[].concat(r(Object.keys(c.initialState)),[e.scenarios.dirtyDataFor])),{persisted:e.scenarios.dirtyDataFor})),a.studies=i({},e.studies,{studies:[]})),(0,d.saveState)("fpo-persisted-state",a)})},function(t,a,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,i){try{var l=t[r](i),o=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}return n("next")})}}Object.defineProperty(a,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){var t=i(regeneratorRuntime.mark(function t(a,n,o,h,v,m){var _,E,g,y,S,b,C,O,T,R,A=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return _=void 0,E=o(),t.next=4,(0,c.fetchPlatformRegions)(E,h);case 4:if(!m&&E.study[a]&&E.study[a].isArchivedScenarios===v){t.next=23;break}return t.prev=5,t.next=8,(0,c.fetchStudy)(a,E,!1,v);case 8:if(!(_=t.sent)){t.next=15;break}return g=(0,p.processScenariosPreparation)(a,_),y=g.preparedScenarios,S=g.notPreparedScenarios,h({type:"SUCCESS_"+s.GET_STUDY_BY_ID,payload:l({},_,{scenarios:[].concat(r(S),r(y))}),isArchivedScenarios:v}),t.next=14,(0,c.fetchImpactScenario)(a,_,E,h);case 14:(0,c.getScenariosData)(_,S,a,n,E,h).then(function(){var e=i(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.reduce(function(e,t){return t.approved_data_snapshot&&t.status===u.SCENARIO_STATUS.APPROVED?e.approvedScenario=t:t.failedFetch||e.restScenarios.push(t),e},{approvedScenario:null,restScenarios:[]}),r=n.approvedScenario,i=n.restScenarios,setTimeout(function(){return(0,p.processApprovedScenario)(a,_,r,h)},0),setTimeout(function(){return(0,f.calcScenarioMilestones)(a,i,h,!1,!0)},0);case 3:case"end":return e.stop()}},e,A)}));return function(t){return e.apply(this,arguments)}}());case 15:t.next=21;break;case 17:throw t.prev=17,t.t0=t.catch(5),console.error(e),new Error("Error calculating study scenarios data");case 21:t.next=43;break;case 23:return t.next=25,(0,c.fetchStudyScenariosDetails)(a,E);case 25:if(!(b=t.sent)||!b.data){t.next=43;break}if(t.prev=27,C=[],O=[],T=b.data.filter(function(e){return e.is_archived===v}),R=E.study[a].scenarios.filter(function(e){return e.is_archived===v}),T.forEach(function(e){var t=R.find(function(t){return+t.id==+e.id});t?t.updated&&!(0,d.getMomentDate)(t.updated).isSame((0,d.getMomentDate)(e.updated))||!t.fullData?O.push({id:e.id}):t.status===e.status&&t.nerve_job_status===e.nerve_job_status||O.push({id:e.id}):C.push({id:e.id})}),0!==C.length||0!==O.length){t.next=35;break}return t.abrupt("return",!0);case 35:_=E.study[a],_&&((0,c.getScenariosData)(_,C,a,n,E,h).then(function(e){(0,f.calcScenarioMilestones)(a,e.filter(function(e){return!(e.approved_data_snapshot||e.failedFetch||e.predicted_lpft||e.predicted_fpfv_lpfv)}),h,!0,!1,o,!0)}),(0,c.getScenariosData)(_,O,a,n,E,h).then(function(e){(0,f.calcScenarioMilestones)(a,e.filter(function(e){return!e.failedFetch}),h,!1,!1,o)})),t.next=43;break;case 39:throw t.prev=39,t.t1=t.catch(27),console.error(t.t1),new Error("Error calculating study scenarios data");case 43:return t.abrupt("return",!0);case 44:case"end":return t.stop()}},t,this,[[5,17],[27,39]])}));return function(e,a,n,r,i,l){return t.apply(this,arguments)}}(),s=n(13),u=n(10),d=n(8),c=n(516),f=n(515),p=n(1109);a.default=o},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n(this,e),this.curves=t[a+"curves"],this.type=t.type,this.location=t.location,this.patient_allocation=t[a+"patient_allocation"],this.patient_allocation_min=t[a+"patient_allocation_min"],this.num_sites=t[a+"num_sites"],this.fsiv=t[a+"fsiv"],this["25_si"]=null,this["50_si"]=null,this["90_si"]=null,this.fpfv=t[a+"fpfv"],this.fpfv_fpft=t[a+"fpfv_fpft"],this.fpfv_lpfv=t[a+"fpfv_lpfv"],this.sas=t[a+"sas"],this.screening_failure=t[a+"screening_failure"],this.sr=t[a+"sr"],this.randomisation_rate=t[a+"randomisation_rate"],this.lpft=t[a+"lpft"],this.overrideList=[]};t.default=r},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1145),i=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function e(){var t=this;n(this,e),this.size=navigator.hardwareConcurrency||4,this.workers=0,this.jobs=[],this.queueJob=function(e,a,n){var r={msg:e,cb:a,ctx:n};t.jobs.push(r),t.workers<t.size&&t.nextJob()},this.getJobsQueue=function(){return t.jobs.length},this.nextJob=function(){t.jobs.length&&function(){var e=t.jobs.shift(),a=new i.default;t.workers+=1,a.onmessage=function(n){e.cb.call(e.ctx,n.data,a)&&(a.terminate(),t.workers-=1,t.nextJob())},a.postMessage(e.msg)}()}};t.default=l},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(13),r=a(338),i=function(e){return e&&e.__esModule?e:{default:e}}(r),l=a(202),o=a(8),s=a(136),u=a(749),d=a(96),c=a(752),f=a(751),p=function(e){var t=e.dispatch,a=e.getState;return function(e){return function(p){if(p.type===n.EXPORT_SCENARIO_DATA||p.type===n.EXPORT_COUNTRY_SITES_SELECTION){var h=p.studyId,v=p.scenarioId,m=p.countryId,_=a(),E=_.auth&&_.auth.user&&_.auth.user.id;(v?i.default:r.getImpactScenarioData)(h,v,E,_,t).then(function(e){var t=(0,d.extractApprovedData)(e.scenario);if(p.type===n.EXPORT_SCENARIO_DATA)t&&t.cohorts&&t.cohorts.length>0?(t=(0,s.calculateCohorts)(t),(0,l.exportToExcelCohorts)(e.study,t)):t&&(t.fullData=(0,o.getScenarioCalculatedData)(t.countries,t),(0,l.exportToExcel)(e.study,t,t.fullData));else if(p.type===n.EXPORT_COUNTRY_SITES_SELECTION){var a=(0,u.getSelectedSites)(_,{scenarioId:v,countryId:m}),r=(0,c.getOtherSites)(_,{scenarioId:v,countryId:m}),i=(0,f.getExternalSites)(_,{scenarioId:v,countryId:m}),h=_.sites.siteEditReasons,E=t.countries.find(function(e){return e.platform_country_id===m});(0,l.exportToExcelCountrySitesSelection)(e.study,t,a,r,i,E,h)}}).catch(function(e){t({type:"ERROR_"+p.type,payload:e})})}return e(p)}}};t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(12),i=n(r),l=a(56),o=n(l),s=a(13),u=function(e){var t=e.dispatch;return function(e){return function(a){var n=(0,i.default)(a,"meta.notification");return n?((Array.isArray(n)?n:[n]).forEach(function(e){var n=o.default.generate(),r=(0,i.default)(e,"trigger");r&&0===a.type.indexOf(r)&&(t({type:s.SHOW_NOTIFICATION,id:n,notificationType:r,message:(0,i.default)(e,"message"),link:(0,i.default)(e,"link")}),setTimeout(function(){t({type:s.HIDE_NOTIFICATION,id:n})},(0,i.default)(e,"timeout",3e3)))}),e(a)):e(a)}}};t.default=u},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(13),r=a(338),i=function(e){return e&&e.__esModule?e:{default:e}}(r),l=null,o=function(e){var t=e.dispatch,a=e.getState;return function(e){return function(r){if(r.type===n.GET_SCENARIO_VIEWER_DATA||r.type==="SUCCESS_"+n.UPDATE_SCENARIO||r.type==="SUCCESS_"+n.BATCH_OVERRIDE_FIELD_UPDATE){var o=r.studyId,s=r.scenarioId,u=r.fetchFullStudyData,d=r.refreshScenarioCache,c=r.clearScenarioCache,f=r.allConstraints,p=a(),h=p.auth&&p.auth.user&&p.auth.user.id;if(+p.scenarios.persisted==+s)return e(r);var v=(new Date).getTime();(!l||l<v)&&(l=v),(0,i.default)(o,s,h,p,t,u,d,c,f).then(function(e){l===v&&t({type:"SUCCESS_"+n.GET_SCENARIO,studyId:o,scenarioId:s,payload:e.scenario})}).catch(function(e){t({type:"ERROR_"+n.GET_SCENARIO_VIEWER_DATA,payload:e})})}return e(r)}}};t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(13),r=function(e){var t=e.dispatch;return function(e){return function(a){if(a.type===n.SITE_ACTION||"[SITES.MULTI-EDIT] SUBMIT_MULTIEDIT"===a.type){var r=a.scenarioId;t({type:n.ADD_SITE_HISTORY_STEP,scenarioId:r})}return e(a)}}};t.default=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(13),r=a(1112),i=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(e){var t=e.dispatch,a=e.getState;return function(e){return function(r){switch(r.type){case n.GET_STUDY_DASHBOARD_DATA:case"SUCCESS_"+n.UPDATE_STUDY_OWNER:case"SUCCESS_"+n.APPLY_HISTORICAL_STUDIES_CHANGES:var l=r.studyId,o=r.isArchived,s=r.forceUpdate,u=a(),d=u.auth&&u.auth.user&&u.auth.user.id,c=s||r.type==="SUCCESS_"+n.UPDATE_STUDY;return(0,i.default)(l,d,a,t,o,c).catch(function(e){t({type:"ERROR_"+n.GET_STUDY_DASHBOARD_DATA,payload:e})}),e(r);default:return e(r)}}}};t.default=l},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(13),r=function(e){var t=e.dispatch;return function(e){return function(a){if(a.type===n.CHANGE_COHORT_COUNTRY||a.type===n.CHANGE_COHORT_COUNTRIES||a.type===n.ADD_COHORT_COUNTRY||a.type===n.DELETE_COHORT_COUNTRY||a.type===n.PASTE_COUNTRY_DATA||"[SCENARIO VIEWER] COUNTRY_DATA_CHANGE"===a.type||"[SCENARIO VIEWER] COUNTRIES_DATA_CHANGE"===a.type||"[SCENARIO VIEWER] ADD_COUNTRY"===a.type||"[SCENARIO VIEWER] REMOVE_COUNTRY"===a.type||"[SCENARIO VIEWER] PASTE_COUNTRY_DATA"===a.type){var r=a.scenarioId;t({type:n.ADD_HISTORY_STEP,scenarioId:r})}return e(a)}}};t.default=r},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case"SUCCESS_"+i.FETCH_ACTUALS_DATA:return r({},e,n({},t.studyId,r({},e[t.studyId],t.payload)));default:return e}};var i=a(13),l={}},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case"SUCCESS_"+i.FETCH_AGGREGATED_ACTUALS_DATA:return r({},e,n({},t.studyId,r({},e[t.studyId],t.payload)));default:return e}};var i=a(13),l={}},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case"[ALERTS] STUDY_CHANGED":return r({},e,{studyChanged:[].concat(n(e.studyChanged),[t.payload])});default:return e}};var i={studyChanged:[]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case"REQUEST_"+r.LOGIN:return n({},i);case"SUCCESS_"+r.LOGIN:return n({},t.payload);default:return e}};var r=a(13),i={user:void 0,autoLoginUser:void 0}},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case i.ADD_SCENARIO_TO_CACHE:return r({},e,n({},t.scenarioId,t.payload));case i.CLEAR_SCENARIO_CACHE:return l;default:return e}};var i=a(13),l={}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1];switch(t.type){case"SUCCESS_"+d.GET_STUDY_SCENARIOS_TO_COMPARE:var a=[];return t.payload.forEach(function(e){if(e&&e.id||e&&"IMPACT plan"===e.name)if(e.approved_data_snapshot){var t=(0,o.default)(e);t=(0,f.prepareScenarioObject)(t);var n=(0,c.deserializeScenarioData)(t);n&&(t=i({},(0,u.default)(t,"approved_data_snapshot"),{approvedData:n,fp:n.fp,end_date:n.target_lpft,fpfv_fpft:n.fpfv_fpft}),t.countries=(0,f.prepareScenarioCountriesObject)(t,t.isImpact),t=i({},t,{fullData:(0,f.getScenarioCalculatedData)(t.countries,t)})),a.push(t)}else a.push(e)}),{scenarios:a};case"ERROR_"+d.GET_STUDY_SCENARIOS_TO_COMPARE:return i({},e,{scenarios:[],error:!0});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=r;var l=a(40),o=n(l),s=a(81),u=n(s),d=a(13),c=a(96),f=a(8),p={scenarios:[],error:!1}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case"SUCCESS_"+r.CONTEXT_HELP_PAGE_LIST:return n({},e,{pageList:t.payload});case r.CONTEXT_HELP_PAGE:return n({},e,{page:t.page});case r.IS_SHOW_CONTEXT_HELP:return n({},e,{isShow:t.val});default:return e}};var r=a(13),i={pageList:[],isShow:!1,page:""}},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case"REQUEST_"+o.GET_CSMS:return r({},e,{isLoading:!0});case"SUCCESS_"+o.GET_CSMS:var a,i=t.payload,u=Object.keys(i).sort(),d=e.selectedUser?null:(0,l.default)(i,"["+u[0]+"][0].id",null);return r({},e,(a={},n(a,t.studyId,i),n(a,"isLoading",!1),n(a,"selectedUser",d),a));case"ERROR_"+o.GET_CSMS:return r({},e,{isLoading:!1,error:!0});case"SUCCESS_"+o.GET_CSM_SCENARIOS:return r({},e,{userScenarios:n({},t.userId,t.payload)});case"SUCCESS_"+o.GET_STUDY_SCENARIOS_LIST:return r({},e,{studyScenarios:t.payload});case"SUCCESS_"+o.SHARE_SCENARIO:if(!t.userId)return e;var c=e.userScenarios[t.userId];return r({},e,{userScenarios:n({},t.userId,c.map(function(e){return+e.id==+t.scenarioId?r({},e,{shared:!t.unshare}):e}))});case o.CSM_USER_SELECT:return r({},e,{selectedUser:t.userId});default:return e}};var i=a(12),l=function(e){return e&&e.__esModule?e:{default:e}}(i),o=a(13),s={isLoading:!1,error:null,selectedUser:null,userScenarios:{}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case r.ROUTER_LOCATION_CHANGE:return i;case r.FORBIDDEN_ERROR:return n({},e,{forbidden:t.payload.message});case r.INTERNAL_SERVER_ERROR:return n({},e,{internalServer:t.payload.message});case r.NOT_FOUND_ERROR:return n({},e,{notFound:t.payload.message});case r.ODA_API_ERROR:return n({},e,{approveODA:t.payload.message});case r.SESSION_EXPIRED:return n({},e,{sessionExpired:!0});case r.BAD_REQUEST:return n({},e,{badRequest:t.payload.message});default:return e}};var r=a(13),i={forbidden:void 0,internalServer:void 0,notFound:void 0,sessionExpired:!1,badRequest:void 0}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments[1];switch(t.type){case"ERROR_"+p.GET_SCENARIO_EVENTS:return l({},e,i({},t.scenarioId,[]));case"SUCCESS_"+p.GET_SCENARIO_EVENTS:var a=t.payload,n=e.groupByType;return l({},e,i({},t.scenarioId,(0,c.sortEventsByField)(a,"start_date","ASC",n)));case p.ADD_NEW_EVENT:var o=e[t.scenarioId];return l({},e,i({},t.scenarioId,[].concat(r(o),[t.payload])));case p.UPDATE_EVENT:var u=e[t.scenarioId].map(function(e){var a=e;return a.id===t.id&&(a[t.field]=t.value,a.state!==f.EVENT_STATE.NEW&&(a.state=f.EVENT_STATE.UPDATED)),a});return l({},e,i({},t.scenarioId,u));case p.DUPLICATE_EVENT:var v=e[t.scenarioId],m=v.find(function(e){return e.id===t.id}),_=l({},(0,s.default)(m),t.defaultValues);return _.id=d.default.generate(),_.state=f.EVENT_STATE.NEW,_.status=f.EVENT_STATUS.PENDING,_.name="(Copy) "+_.name,l({},e,i({},t.scenarioId,[].concat(r(v),[_])));case p.REMOVE_EVENT:var E=e[t.scenarioId].reduce(function(e,a){var n=a;return n.id!==t.id?e.push(n):n.id===t.id&&n.state!==f.EVENT_STATE.NEW&&(n.state=f.EVENT_STATE.DELETED,n.isValid=!0,e.push(n)),e},[]);return l({},e,i({},t.scenarioId,E));case p.SORT_EVENTS:var g=t.field,y=t.sortOrder?"ASC":"DESC",S=e[t.scenarioId],b=e.groupByType;return l({},e,i({},t.scenarioId,(0,c.sortEventsByField)(S,g,y,b)));case p.TOGGLE_GROUP_EVENTS_BY_TYPE:return l({},e,{groupByType:!e.groupByType});case"SUCCESS_"+p.APPLY_DISABLE_EVENT:var C=e[t.scenarioId],O=C.map(function(e){return e.id===t.eventId&&(e.disabled=t.isDisabled),e});return l({},e,i({},t.scenarioId,O));default:return e}};var o=a(40),s=n(o),u=a(56),d=n(u),c=a(77),f=a(46),p=a(13),h={groupByType:!0}},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case"SUCCESS_"+l.GET_HISTORICAL_STUDIES:return i({},e,{historicalStudies:r({},t.studyId,t.payload.map(function(e){return i({},e,{therapeutic_area:e.therapeutic_area||"-",indication:e.indication||"-",fpfv:e.fpfv||"-",screen_failure_rate:e.screen_failure_rate||0===e.screen_failure_rate?e.screen_failure_rate:null,enrollment_rate:e.enrollment_rate||0===e.enrollment_rate?e.enrollment_rate:null})}).sort((0,s.default)("indication","ASC")))});case"SUCCESS_"+l.APPLY_HISTORICAL_STUDIES_CHANGES:return i({},e,{historicalStudies:r({},t.studyId,t.payload.sort((0,s.default)("indication","ASC")))});case l.TOGGLE_HISTORICAL_STUDY:return i({},e,{historicalStudies:r({},t.studyId,e.historicalStudies[t.studyId].map(function(e){var a=e;return a.study_id===t.study_id&&(a.selected=!e.selected),a}))});case l.SORT_HISTORICAL_DATA:var a=[].concat(n(e.historicalStudies[t.studyId])),o=a.reduce(function(e,a){return null===a[t.columnName]?e.nullValues.push(a):0===a[t.columnName]?e.zeroValues.push(a):e.rest.push(a),e},{nullValues:[],zeroValues:[],rest:[]}),d=void 0;return d="ASC"===t.sortDirection?[].concat(n(o.nullValues),n(o.zeroValues),n(o.rest.sort((0,s.default)(t.columnName,t.sortDirection)))):[].concat(n(o.rest.sort((0,s.default)(t.columnName,t.sortDirection))),n(o.zeroValues),n(o.nullValues)),i({},e,{historicalStudies:r({},t.studyId,d)});case l.FILTER_HISTORICAL_DATA:return i({},e,{filterValue:t.pattern});case l.CLEAR_HISTORICAL_DATA:return i({},e,{historicalStudies:r({},t.studyId,[])});case"SUCCESS_"+l.GET_HISTORICAL_DATA:return i({},e,{data:i({},e.data,r({},t.studyId,i({},t.payload)))});default:return e}};var l=a(13),o=a(34),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u={historicalStudies:[],filterValue:"",data:{}}},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case"SUCCESS_"+o.GET_IMPACT_SCENARIO_NOTES:return n({},t.impactScenarioId,t.payload);case"SUCCESS_"+o.ADD_IMPACT_SCENARIO_NOTE:var a=e[t.impactScenarioId];if(a){var i=a.slice(),u=(0,l.default)(a,function(e){return e.id===t.payload.id});return-1!==u&&i.splice(u,1),i.unshift(t.payload),r({},e,n({},t.impactScenarioId,i))}return n({},t.impactScenarioId,t.payload);default:return e}};var i=a(642),l=function(e){return e&&e.__esModule?e:{default:e}}(i),o=a(13),s={}},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case"REQUEST_"+i.GET_IMPACT_SCENARIO:return r({},e,{loading:!0});case"ERROR_"+i.GET_IMPACT_SCENARIO:return r({},e,{loading:!1,error:!0});case"SUCCESS_"+i.GET_IMPACT_SCENARIO:var a=(0,l.prepareScenarioObject)(t.payload);return a.countries=(0,l.prepareScenarioCountriesObject)(a,!0),r({},e,n({loading:!1},t.studyId,r({},a,{fullData:(0,l.getScenarioCalculatedData)(a.countries,a)})));default:return e}};var i=a(13),l=a(8),o={loading:!1,error:!1}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(189),i=a(19),l=a(71),o=a(1142),s=n(o),u=a(1124),d=n(u),c=a(1141),f=n(c),p=a(1137),h=n(p),v=a(519),m=n(v),_=a(1133),E=n(_),g=a(1126),y=n(g),S=a(1143),b=n(S),C=a(1129),O=n(C),T=a(1135),R=n(T),A=a(1132),I=n(A),w=a(1130),N=n(w),D=a(1131),P=n(D),L=a(1140),M=n(L),k=a(1138),x=n(k),j=a(1121),F=n(j),U=a(1125),V=n(U),B=a(1122),H=n(B),G=a(1127),Y=n(G),z=a(1136),W=n(z),q=a(1128),K=n(q),X=a(1139),Z=n(X),J=a(1123),Q=n(J);t.default=function(e){return(0,r.combineReducers)({alerts:Q.default,auth:d.default,study:s.default,studies:f.default,platform:h.default,scenarios:m.default,impactScenarios:E.default,impactNotes:I.default,comparator:y.default,users:b.default,notes:R.default,countryNotes:T.countryNotes,errors:O.default,events:N.default,historical:P.default,sites:M.default,site:x.default,actuals:F.default,cache:V.default,aggregatedActuals:H.default,router:(0,i.connectRouter)(e),form:l.reducer,contextHelp:Y.default,notification:W.default,csms:K.default,sitesSearch:Z.default})}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1];switch(t.type){case"SUCCESS_"+c.GET_SCENARIO_COUNTRY_NOTES:return r({},t.scenarioId,l({},e[t.scenarioId],r({},t.countryId,t.payload)));case"SUCCESS_"+c.ADD_COUNTRY_SITES_NOTE:var a=(0,d.default)(e,[t.scenarioId]+"."+[t.countryId],[]);if(a){var n=a.slice();return n.unshift(t.payload),l({},e,r({},t.scenarioId,l({},e[t.scenarioId],r({},t.countryId,n))))}return l({},e,r({},t.scenarioId,l({},e[t.scenarioId],r({},t.countryId,[t.payload]))));default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1];switch(t.type){case"SUCCESS_"+c.GET_SCENARIO_NOTES:return r({},t.scenarioId,t.payload);case"SUCCESS_"+c.ADD_SCENARIO_NOTE:var a=e[t.scenarioId];if(a){var n=a.slice(),i=(0,s.default)(a,function(e){return e.id===t.payload.id});return-1!==i&&n.splice(i,1),n.unshift(t.payload),l({},e,r({},t.scenarioId,n))}return l({},e,r({},t.scenarioId,[t.payload]));default:return e}},t.countryNotes=i;var o=a(642),s=n(o),u=a(12),d=n(u),c=a(13),f={},p={}},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case i.SHOW_NOTIFICATION:var a=t.message,o=t.notificationType,s=t.id,u=t.link;return r({},e,{notifications:[].concat(n(e.notifications.filter(function(e){return e.animateIn}).map(function(t,a){return 0===a&&e.notifications.length>=3?r({},t,{animateIn:!1}):t})),[{id:s,animateIn:!0,notificationType:o,message:a,link:u}])});case i.HIDE_NOTIFICATION:var d=t.id;return r({},e,{notifications:e.notifications.filter(function(e){return e.animateIn}).map(function(e){return e.id===d?r({},e,{animateIn:!1}):e})});default:return e}};var i=a(13),l={notifications:[]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case"REQUEST_"+r.GET_PLATFORM_STUDIES:return n({},e,{isStudiesLoading:!0,studiesError:null});case"SUCCESS_"+r.GET_PLATFORM_STUDIES:return n({},e,{studies:t.payload,isStudiesLoading:!1});case"ERROR_"+r.GET_PLATFORM_STUDIES:return n({},e,{isStudiesLoading:!1,studiesError:!0});case"REQUEST_"+r.GET_PLATFOTM_REGIONS:return n({},e,{isRegionsLoading:!0});case"SUCCESS_"+r.GET_PLATFOTM_REGIONS:return n({},e,{regions:t.payload,isRegionsLoading:!1});case"ERROR_"+r.GET_PLATFOTM_REGIONS:return n({},e,{isRegionsLoading:!1,regionsError:!0});case"REQUEST_"+r.GET_STUDY_OPTIONS:return n({},e,{isStudyOptionsLoading:!0,studyOptionsError:null});case"SUCCESS_"+r.GET_STUDY_OPTIONS:return n({},e,{studyOptions:t.payload,isStudyOptionsLoading:!1});case"ERROR_"+r.GET_STUDY_OPTIONS:return n({},e,{isStudyOptionsLoading:!1,studyOptionsError:!0});default:return e}};var r=a(13),i={studies:[],regions:[],studyOptions:{},historicalStudies:[],isStudiesLoading:!1,isRegionsLoading:!1,isStudyOptionsLoading:!1,studiesError:null,regionsError:null,studyOptionsError:null}},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case"SUCCESS_"+i.GET_COUNTRY_SITE:return r({},e,n({},t.siteId,t.payload));case i.SET_SITE_METRICS_FILTER:return r({},e,{metricsFilter:t.payload});case i.SET_SITE_MILESTONES_FILTER:return r({},e,{milestonesFilter:t.payload});default:return e}};var i=a(13),l={metricsFilter:"median_time_to_query",milestonesFilter:"fp_siv"}},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case"ERROR_"+i.SEARCH_FOR_SITES:return r({},e,{loading:!1,error:!0});case"REQUEST_"+i.SEARCH_FOR_SITES:var a=t.requestId;return r({},e,{loading:!0,error:!1,requestId:a});case"SUCCESS_"+i.SEARCH_FOR_SITES:var o=t.dataType,s=t.requestId,u=t.existingSites||[];return e.requestId===s?r({},e,n({loading:!1,error:!1},o,t.payload.map(function(e){return u.some(function(t){return t.investigator_center_id===e.investigator_center_id})?r({},e,{exist:!0}):e}))):e;case"REQUEST_"+i.GET_COUNTRY_SITES:return l;default:return e}};var i=a(13),l={loading:!1,error:!1,RAW:null,EXTERNAL:null}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments[1];switch(t.type){case"ERROR_"+u.GET_COUNTRY_SITES:return l({},e,{loadingSites:!1,errorLoadingSites:!0});case"REQUEST_"+u.GET_COUNTRY_SITES:return l({},e,{loadingSites:!0,errorLoadingSites:!1});case"SUCCESS_"+u.GET_COUNTRY_SITES:var a=t.payload.map(function(e){return 0===Object.keys(e.state).length?l({},e,{country_id:t.countryId,state:{status:null,reason_id:null,comment:null,dirty:!1,randomization_rate:null}}):e.state.randomization_rate||0===e.state.randomization_rate?l({},e,{hasOverrodeRR:!0}):e}),n=e.sortData,o=n.active,d=n.direction,f=(0,p.default)(o);return l({},e,i({loadingSites:!1,errorLoadingSites:!1,sitesDataAvailable:!e.sitesDataAvailable&&a.length>0||e.sitesDataAvailable},t.scenarioId,l({},e[t.scenarioId],i({},t.countryId,a.sort(f(o,d))))));case"SUCCESS_"+u.BATCH_OVERRIDE_FIELD_UPDATE:return t.refreshSitesData?l({},e,{past:[],future:[],hasChanges:!1,dirtyDataFor:null}):e;case"SUCCESS_"+u.UPDATE_SITES:return t.skipDataRefresh?e:l({},e,{past:[],future:[],hasChanges:!1,dirtyDataFor:null});case u.SORT_SITES_DATA:return l({},e,{sortData:{direction:t.sortDirection,active:t.columnName}});case u.TOGGLE_TABLE_VIEW:return l({},e,{tableView:t.payload});case u.TOGGLE_INTERNAL_SITES_VIEW:return l({},e,{showInternalSites:!e.showInternalSites});case u.TOGGLE_EXTERNAL_SITES_VIEW:return l({},e,{showExternalSites:!e.showExternalSites});case u.SITE_ACTION:var v=e[t.scenarioId][t.countryId],m=v.map(function(e){if(e.investigator_center_id===t.id){if(t.field)return l({},e,{hasOverrodeRR:!0,state:l({},e.state,{randomization_rate:t.value,dirty:!0})});var a=e.state.dirty;return l({},e,{state:{status:a?null:t.status,reason_id:a?null:t.reason_id,comment:a?null:t.comment,dirty:!a}})}return l({},e)}),_=m.filter(function(e){return e.state.dirty}).length>0;return l({},e,i({hasChanges:_,dirtyDataFor:{scenarioId:t.scenarioId,countryId:e.dirtyDataFor?(0,s.default)([].concat(r(e.dirtyDataFor.countryId),[t.countryId])):[t.countryId]}},t.scenarioId,l({},e[t.scenarioId],i({},t.countryId,m))));case u.ADD_SITE_HISTORY_STEP:var E=e.past?[].concat(r(e.past)):[];E.length===c.UNDO_HISTORY_LENGTH&&E.shift();var g=i({hasChanges:e.hasChanges},t.scenarioId,l({},e[t.scenarioId]));return E.push(g),l({},e,{past:E,future:[]});case u.UNDO_SITE_ACTION:var y=e.past?[].concat(r(e.past)):[];if(0===y.length)return e;var S=i({hasChanges:e.hasChanges},t.scenarioId,l({},e[t.scenarioId]));return l({},e,y.pop(),{past:y,future:[S].concat(r(e.future))});case u.REDO_SITE_ACTION:var b=e.future[0],C=e.future.slice(1),O=i({hasChanges:e.hasChanges},t.scenarioId,l({},e[t.scenarioId]));return l({},e,b,{past:[].concat(r(e.past),[O]),future:C});case u.RESET_SITES:return l({},h,{siteEditReasons:e.siteEditReasons,editableCountriesIds:e.editableCountriesIds,showInitialSelection:e.showInitialSelection,showInternalSites:e.showInternalSites,showExternalSites:e.showExternalSites,sitesFilter:e.sitesFilter,studiesFilter:e.studiesFilter,metricsFilter:e.metricsFilter,sortData:e.sortData,tableView:e.tableView});case u.TOGGLE_INITIAL_SITES_SELECTION:return l({},e,{showInitialSelection:!e.showInitialSelection});case"SUCCESS_"+u.GET_EDITABLE_SITES_COUNTRIES:return l({},e,{editableCountriesIds:t.payload});case u.SET_STUDIES_FILTER:return l({},e,{studiesFilter:t.payload});case u.SET_METRICS_FILTER:return l({},e,{metricsFilter:t.payload});case"TOGGLE_SITES_FILTER_PANEL":return l({},e,{showFilterPanel:!e.showFilterPanel});case"TOGGLE_SITES_FILTERED_DATA_VIEW":return l({},e,i({},t.payload,!e[t.payload]));case"[SITES.MULTI-EDIT] SET_SITES_MULTIEDIT_VIEW":return"NONE"===t.payload?l({},e,i({multieditView:t.payload},t.scenarioId,l({},e[t.scenarioId],i({},t.countryId,e[t.scenarioId][t.countryId].map(function(e){return e.multiSelected?l({},e,{multiSelected:!1}):e}))))):l({},e,{multieditView:t.payload});case"[SITES.MULTI-EDIT] SELECT_ALL_SITES":return l({},e,i({},t.scenarioId,l({},e[t.scenarioId],i({},t.countryId,e[t.scenarioId][t.countryId].map(function(e){return t.sitesIds.includes(e.investigator_center_id)?l({},e,{multiSelected:t.payload}):e})))));case"[SITES.MULTI-EDIT] SELECT_SITE":return l({},e,i({},t.scenarioId,l({},e[t.scenarioId],i({},t.countryId,e[t.scenarioId][t.countryId].map(function(e){return t.siteId===e.investigator_center_id?l({},e,{multiSelected:!e.multiSelected}):e})))));case"[SITES.MULTI-EDIT] SUBMIT_MULTIEDIT":var T=[].concat(r(e[t.scenarioId][t.countryId])),R=T.map(function(e){if(e.multiSelected){var a=e.state.dirty;return l({},e,{multiSelected:!1,state:{status:a?null:t.status,reason_id:a?null:t.reason_id,comment:a?null:t.comment,dirty:!a}})}return l({},e)}),A=R.filter(function(e){return e.state.dirty}).length>0;return l({},e,i({hasChanges:A,multieditView:"NONE",dirtyDataFor:{scenarioId:t.scenarioId,countryId:e.dirtyDataFor?(0,s.default)([].concat(r(e.dirtyDataFor.countryId),[t.countryId])):[t.countryId]}},t.scenarioId,l({},e[t.scenarioId],i({},t.countryId,R))));case"SUCCESS_"+u.SITE_EDIT_REASON:return l({},e,{siteEditReasons:t.payload});case"UPDATE_SITE_VALUE":return e;case"TOGGLE_VIEW_FORECAST_AS_DECILE":return l({},e,{viewForecastAsDecile:!e.viewForecastAsDecile});case u.TOGGLE_OTHER_TABLE_VIEW_STATE:return l({},e,{otherTableExpanded:!e.otherTableExpanded});case u.TOGGLE_EXTERNAL_TABLE_VIEW_STATE:return l({},e,{externalTableExpanded:!e.externalTableExpanded});case u.TOGGLE_RAW_TABLE_VIEW_STATE:return l({},e,{rawTableExpanded:!e.rawTableExpanded});case u.TOGGLE_SELECTED_TABLE_VIEW_STATE:return l({},e,{selectedTableExpanded:!e.selectedTableExpanded});case u.SEARCH_SITES_VALUE_ACTION:return l({},e,{searchSitesValue:t.payload});case u.SET_ACTIVE_SITES_PAGE:return l({},e,{activePages:l({},e.activePages,i({},t.section,t.page))});case u.SET_ACTIVE_PAGES:return l({},e,{activePages:l({},e.activePages,t.payload)});case u.ADD_SELECTED_SITE:var I=e[t.scenarioId][t.countryId],w=t.payload;return w.state&&0!==Object.keys(w.state).length||(w=l({},w,{country_id:t.countryId,state:{status:null,reason_id:null,comment:null,dirty:!1,randomization_rate:null}})),(w.state.randomization_rate||0===w.state.randomization_rate)&&(w=l({},w,{hasOverrodeRR:!0})),w.addedViaSearch=!0,l({},e,i({},t.scenarioId,l({},e[t.scenarioId],i({},t.countryId,[w].concat(r(I))))));case"SUCCESS_"+u.GET_SITES_HEALTH:return l({},e,t.payload);case"SUCCESS_"+u.GET_COUNTRY_MANAGER:return l({},e,{countrySitesManager:i({},t.countryId,t.payload)});default:return e}};var o=a(180),s=n(o),u=a(13),d=a(748),c=a(10),f=a(233),p=n(f),h={sitesDataAvailable:!0,sitesFilter:d.SITES_FILTER_KEYS.ALL,studiesFilter:d.STUDIES_FILTER_KEYS.COMPLETED,metricsFilter:d.METRICS_FILTER_KEYS.MEDIAN_TIME_TO_QUERY,sortData:{direction:"ASC",active:"ranking"},tableView:d.TABLE_VIEW.HISTORICAL,showInternalSites:!1,showExternalSites:!1,past:[],future:[],hasChanges:!1,showInitialSelection:!1,multieditView:"NONE",editableCountriesIds:null,piPediatric:!1,piAdolescence:!1,piPhase:!1,pcPediatric:!1,pcAdolescence:!1,pcPhase:!1,viewForecastAsDecile:!0,loadingSites:!1,errorLoadingSites:!1,otherTableExpanded:!0,rawTableExpanded:!1,selectedTableExpanded:!0,searchSitesValue:"",activePages:{SELECTED:0,OTHER:0,EXTERNAL:0,RAW:0},countrySitesManager:[]}},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];switch(t.type){case"SUCCESS_"+s.GET_STUDIES:return o({},e,t.payload,{TAFilterValue:e.TAFilterValue,collapsedSections:e.collapsedSections,sorting:e.sorting});case"SUCCESS_"+s.IMPORT_PLATFORM_STUDY:return o({},e,{isImporting:!1,studies:[].concat(n(e.studies),[t.payload])});case"REQUEST_"+s.IMPORT_PLATFORM_STUDY:return o({},e,{isImporting:!0});case"ERROR_"+s.IMPORT_PLATFORM_STUDY:return t.payload&&452===t.payload.status?o({},e,{error:!0,isImporting:!1,missingIndicationStudy:!0}):o({},e,{isLoading:!1,error:!0});case"SUCCESS_"+s.CREATE_NEW_STUDY:var a=o({},t.payload);return o({},e,{studies:[].concat(n(e.studies),[a]),isLoading:!1});case"REQUEST_"+s.DELETE_STUDY:return o({},e,{isLoading:!0});case"SUCCESS_"+s.DELETE_STUDY:return o({},e,{studies:[].concat(n(e.studies.filter(function(e){return e.id!==t.id}))),isLoading:!1});case"ERROR_"+s.DELETE_STUDY:return o({},e,{isLoading:!1,error:!0});case s.CLOSE_MISSING_INDICATOR_DIALOG:return o({},e,{missingIndicationStudy:!1});case s.STUDIES_SET_FILTER_VALUE:return o({},e,{TAFilterValue:t.filterValue});case s.STUDIES_COLLAPSE_SECTIONS:var i=t.section,l=e.collapsedSections.indexOf(i),d=[].concat(n(e.collapsedSections));return-1===l?d.push(i):d.splice(l,1),o({},e,{collapsedSections:d});case s.STUDIES_SET_SORTING_ORDER:var f=t.section+"_sorting",p=o({},e.sorting[f]),h=null;if(p.column===t.column){var v=u.SORTING_ORDER.ASC;p.order===u.SORTING_ORDER.ASC&&(v=u.SORTING_ORDER.DESC),h=o({},e.sorting,r({},f,{column:t.column,order:v}))}else h=o({},e.sorting,r({},f,{column:t.column,order:u.SORTING_ORDER.DESC}));return o({},e,{sorting:h});case"SUCCESS_"+s.REMOVE_SCENARIO:return o({},e,{studies:[]});case"SUCCESS_"+s.CREATE_NEW_STUDY_AND_SCENARIO:return o({},e,{studies:[].concat(n(e.studies),[t.payload.study])});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var l,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=i;var s=a(13),u=a(200),d={column:u.COLUMN_NAMES.STUDY_NAME,order:u.SORTING_ORDER.ASC},c={isLoading:!1,error:null,missingIndicationStudy:!1,TAFilterValue:"",collapsedSections:[],sorting:(l={},r(l,u.SECTIONS.TRACKING+"_sorting",d),r(l,u.SECTIONS.PLANNING+"_sorting",d),r(l,u.SECTIONS.PLAYGROUND+"_sorting",d),r(l,u.SECTIONS.UNKNOWN+"_sorting",d),l)}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments[1];switch(t.type){case"REQUEST_"+c.GET_STUDY_BY_ID:return l({},e,{isLoading:!0,progress:i({},t.studyId,{total:t.payload,loaded:0})});case"REQUEST_"+c.GET_STUDY_BY_ID+"_PROGRESS":return l({},e,{progress:i({},t.studyId,l({},e.progress[t.studyId],{loaded:e.progress[t.studyId].loaded+1}))});case"SUCCESS_"+c.GET_STUDY_BY_ID:var a,n=t.payload.scenarios||[],o=l({},t.payload,{isArchivedScenarios:t.isArchivedScenarios,scenarios:n.map(function(e){try{var t=(0,p.getStudyParamsWarning)(o,e);return l({},e,{studyParamsWarning:t,calculating:!e.fullData&&!e.failedFetch,fullData:e.fullData?e.fullData:[{}]})}catch(e){console.log(e)}return e})});return l({},e,(a={},i(a,o.id,o),i(a,"isLoading",!1),a));case"ERROR_"+c.GET_STUDY_BY_ID:return l({},e,{isLoading:!1,error:!0});case"SUCCESS_"+c.ARCHIVE_SCENARIO:var u=e[t.studyId].scenarios.filter(function(e){return e.id!==t.scenarioId}),h=e[t.studyId].archivedCount+1;return l({},e,i({},t.studyId,l({},e[t.studyId],{scenarios:u,archivedCount:h})));case"SUCCESS_"+c.UNARCHIVE_SCENARIO:var _=e[t.studyId].scenarios.filter(function(e){return e.id!==t.scenarioId}),y=e[t.studyId].archivedCount-1;return l({},e,i({},t.studyId,l({},e[t.studyId],{scenarios:_,archivedCount:y})));case c.UPDATE_STUDY_SCENARIO_JOB_STATUS:return l({},e,i({},t.studyId,l({},e[t.studyId],{scenarios:e[t.studyId].scenarios.map(function(e){return+e.id==+t.scenarioId&&(e.nerve_job_status=t.jobStatus),e})})));case"REQUEST_"+c.UPDATE_STUDY_OWNER:return l({},e,{isLoading:!0});case"SUCCESS_"+c.REMOVE_SCENARIO:var S=e[t.studyId].scenarios.filter(function(e){return e.id!==t.scenarioId});return l({},e,i({},t.studyId,l({},e[t.studyId],{scenarios:S})));case c.UPDATE_STUDY_SCENARIO_FULL_DATA:var b=l({},e[t.studyId]);return+t.studyId==+b.id&&(b.scenarios=b.scenarios.map(function(a){if(+a.id==+t.scenarioId){var n=(0,p.getStudyParamsWarning)(e[t.studyId],t);return l({},a,(0,s.default)(t,"type"),{calculating:!1,studyParamsWarning:n})}return a})),l({},e,i({},t.studyId,b));case c.ADD_STUDY_SCENARIO:var C=l({},e[t.studyId]);return+t.studyId==+C.id&&(C.scenarios=[].concat(r(C.scenarios),[t.payload]).sort((0,v.default)("updatedAt"))),l({},e,i({},t.studyId,C));case"SUCCESS_"+c.GET_IMPACT_SCENARIO:var O=l({},e[t.studyId]),T=(0,f.prepareScenarioObject)(t.payload);return(0,d.default)(O,"state.status")!==E.default.ACTIVE||(0,d.default)(O,"scenarios",[]).find(function(e){return e.status===m.SCENARIO_STATUS.APPROVED})?e:(T.countries=(0,f.prepareScenarioCountriesObject)(T,!0),O.scenarios=[].concat(r(O.scenarios.filter(function(e){return!e.isImpact})),[l({},T,{fullData:(0,f.getScenarioCalculatedData)(T.countries,T)})]),l({},e,i({},t.studyId,O)));case"SUCCESS_"+c.UPDATE_STUDY:var R=l({},e);return delete R[t.studyId],l({},R);default:return e}};var o=a(81),s=n(o),u=a(12),d=n(u),c=a(13),f=a(8),p=a(52),h=a(34),v=n(h),m=a(10),_=a(20),E=n(_),g={isLoading:!1,error:null}},function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case"SUCCESS_"+i.GET_AVAILABLE_USERS:return r({},e,{isLoading:!1,error:null,availableUsers:t.payload});case"REQUEST_"+i.GET_AVAILABLE_USERS:return r({},e,{isLoading:!0});case"ERROR_"+i.GET_AVAILABLE_USERS:return r({},e,{isLoading:!1,error:!0});case"SUCCESS_"+i.GET_COUNTRY_USERS:return r({},e,{isLoading:!1,countryUsers:t.payload});case"REQUEST_"+i.GET_COUNTRY_USERS:return r({},e,{isLoading:!0});case"ERROR_"+i.GET_COUNTRY_USERS:return r({},e,{isLoading:!1,error:!0});case"SUCCESS_"+i.SET_COUNTRY_TO_USER:var a=t.payload,n=a.userId,o=a.country,s=e.countryUsers.findIndex(function(e){return e.id===n}),u=r({},e.countryUsers[s]);return u.countries.push(o),e.countryUsers.splice(s,1,u),r({},e);case"SUCCESS_"+i.REMOVE_COUNTRY_FROM_USER:var d=t.payload,c=d.userId,f=d.countryId,p=e.countryUsers.findIndex(function(e){return e.id===c}),h=r({},e.countryUsers[p]),v=h.countries.filter(function(e){return e.id!==f});return h.countries=v,e.countryUsers.splice(p,1,h),r({},e);default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=n;var i=a(13),l={availableUsers:[],isLoading:!1,error:null}},function(e,t,a){"use strict";e.exports=function(){return new Worker(a.p+"e577b7385ef9ff58e2cb.worker.js")}},function(e,t,a){"use strict";e.exports=function(){return new Worker(a.p+"6071a60ca4e1aa9c9110.worker.js")}},function(e,t){const a={1:"I",2:"II",3:"III",4:"IV",5:"NA",6:"UD"};e.exports={PHASE:a}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,function(e,t,a){e.exports=a.p+"assets/images/novartis-logo-pos-rgb@3x.c827ed.jpg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n=a(1401);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1402);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1403);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1404);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1405);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1406);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1407);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1408);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1409);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1410);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1411);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1412);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1413);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1414);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1416);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1417);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1419);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1420);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1421);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1422);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1423);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1424);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1426);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1427);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1428);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1429);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1430);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1432);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1433);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1436);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1437);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1438);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1439);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1440);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1441);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1442);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1443);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1444);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1445);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1446);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1447);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1448);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1449);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1450);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1451);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1452);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1453);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1456);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1457);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1458);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1459);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1460);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1461);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1462);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1463);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1464);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1465);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1466);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1467);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1468);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1469);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1470);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1471);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1472);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1473);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1474);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1475);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1476);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1477);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1478);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1480);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1481);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1482);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1484);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1485);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1486);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1487);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1489);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1490);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1491);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1492);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1493);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1494);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1495);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1496);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1497);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1498);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1499);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1500);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1501);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1502);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1503);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1504);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1505);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1506);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1507);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1508);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1509);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1510);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1511);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1512);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1513);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1514);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1515);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1516);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1517);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1518);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1519);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1520);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1521);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1522);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1523);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1524);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1525);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1526);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1527);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1529);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1530);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1531);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1533);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1534);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1535);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1537);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1538);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1539);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){a(747),e.exports=a(746)}],[2303]);
webpackJsonp([3],[,,,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Icons=void 0;var r=a(100),l=n(r),i=a(924),o=n(i);t.default=o.default,t.Icons=l.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){return Math.ceil(U.default.duration(new Date(e)-new Date(t)).asWeeks())}function o(e){return e.format("DD MMM YY")}function s(e){return e?(0,U.default)(e).format("YYYY-MM-DD"):null}function u(e){return(0,$.default)(e,function(e,t){return"target_num_patients"===t||"fpfv_fpft"===t?parseInt(e,10):"fp"===t||"target_lpft"===t?s(e):e})}function d(e){return e?U.default.isMoment(e)?e.clone():U.default.utc(e,["YYYY-MM-DD","DD-MM-YYYY","DD MMM YYYY",U.default.ISO_8601]):null}function c(e){switch(e){case 2:return"Enrollment";case 1:return"Screening";case 0:default:return"SIV"}}function f(e){var t={};return e&&e.filter(function(e){return!e.disabled}).forEach(function(e){e.locations.forEach(function(a){a.countries.forEach(function(a){t[a.id]?t[a.id].push((0,B.default)(e,"locations")):t[a.id]=[(0,B.default)(e,"locations")]})})}),t}function p(e){return e?j({},e,{fp:d(e.fp),end_date:d(e.end_date),updated:d(e.updated),updatedAt:d(e.updatedAt),createdAt:d(e.createdAt),approvedAt:d(e.approvedAt),last_optimisation_date:e.last_optimisation_date?(0,U.default)(e.last_optimisation_date):null,adjusted_createdAt:d(e.adjusted_createdAt)}):null}function m(e,t){return e&&U.default.isMoment(e)?e:e&&"string"==typeof e?d(e):(e||0===e)&&t?t.clone().add(e,"d"):null}function h(e){return{actual_patient_allocation:e.actual_patient_allocation,actual_num_sites:e.actual_num_sites,actual_date:e.actual_date?d(e.actual_date):null,actual_f_lpft:e.actual_f_lpft?d(e.actual_f_lpft):null,actual_fsiv:e.actual_fsiv?d(e.actual_fsiv):null,actual_fpfv:e.actual_fpfv?d(e.actual_fpfv):null,actual_fpft:e.actual_fpft?d(e.actual_fpft):null,actual_lpfv:e.actual_lpfv?d(e.actual_lpfv):null,actual_25_si:e.actual_25_si?d(e.actual_25_si):null,actual_50_si:e.actual_50_si?d(e.actual_50_si):null,actual_90_si:e.actual_90_si?d(e.actual_90_si):null,actual_screened:e.actual_screened||[],actual_siv:e.actual_siv||[],actual_randomized:e.actual_randomized||[],q75_actual_randomized:e.q75_actual_randomized||[],q25_actual_randomized:e.q25_actual_randomized||[],actual_sas:e.actual_sas||0===e.actual_sas?+e.actual_sas:null,actual_randomisation_rate:e.actual_randomization_rate?+e.actual_randomization_rate:null,actual_overallocation:e.actual_overallocation?e.actual_overallocation:0,original_f_lpft:e.original_f_lpft?d(e.original_f_lpft):null}}function v(e,t,a){if(!e)return null;var n=d(a||e.fp),r=f(e.events),l=f(e.adjusted_events);return e.countries.map(function(a){var i=null,o=null,s=void 0,u=void 0,d=void 0;return t?(i=a.fpfv,o=a.fsiv):(i=m(a.fpfv,e.fp),o=m(a.fsiv,e.fp),s=m(a["25_si"],e.fp),u=m(a["50_si"],e.fp),d=m(a["90_si"],e.fp)),j({},a,{events:r[a.country_id]||[],location:a.country_name,region:a.region_name,randomisation_rate:a.randomisation_rate&&+a.randomisation_rate,fpfv_fpft:e.fpfv_fpft,fpfv:i,fsiv:o,"25_si":s,"50_si":u,"90_si":d,uncertainty:a.uncertainty?+a.uncertainty:null},h(a),{adjusted_events:l[a.country_id]||[],adjusted_patient_allocation:a.adjusted_patient_allocation,adjusted_num_sites:a.adjusted_num_sites,adjusted_randomisation_rate:a.adjusted_randomisation_rate,adjusted_fpfv_fpft:e.fpfv_fpft,adjusted_25_si:m(a.adjusted_25_si,n),adjusted_50_si:m(a.adjusted_50_si,n),adjusted_90_si:m(a.adjusted_90_si,n),adjusted_fsiv:m(a.adjusted_fsiv,n),adjusted_fpfv:m(a.adjusted_fpfv,n),hasAdjustedOrigin:e.hasAdjustedOrigin})})}function _(e,t){return e instanceof U.default?i(e,t):+e}function E(e,t,a){if("rollup"!==e.type||a)return null;var n=le.CELL_TO_PARAMETER_UNCERTAINTY[t],r=e.uncertaintyUnavailableFields.filter(function(e){return e===t}).length>0;return e.parameter_uncertainty?r?"N/A":e.parameter_uncertainty[n]:"N/A"}function g(e,t,a){var n=e;if(n&&t){(t.isImpact||"IMPACT"===t.origin)&&(n=(0,re.generateMissingValuesForImpactScenarioCountries)(n,t.fp,t.end_date));var r=(t.status===se.SCENARIO_STATUS.APPROVED||t.status===se.SCENARIO_STATUS.PREV_APPROVED)&&t.updated&&t.updated.isSameOrBefore(d("02-11-2018")),l=n.map(function(e){var a=null;if(e.isImpact||"IMPACT"===t.origin)a=(0,re.calculateImpactCurvesData)(t.fp,t.end_date,e,t.fpfv_fpft,"IMPACT"===t.origin);else{var n=null!==t.source_scenario_id||null!==t.adjust_source_cohort_id&&void 0!==t.adjust_source_cohort_id;a=_e(t.fp,t.end_date,e,t.fpfv_fpft,n,t.study_id+"-"+(t.scenario_id?t.scenario_id+"-"+t.id:t.id)+"-"+e.country_id,r,t.approvedData)}return j({},e,a)});try{var i=(0,ne.calculateTableData)(l,t.fp,t,a);return t.approvedData&&(i=(0,ve.default)(i,t)),null!==t.source_scenario_id&&(i=(0,me.default)(i,t,e,a,"adjusted_",t.target_num_patients)),t.approvedData&&!t.approvedData.daily||(i=(0,me.default)(i,t,e,a,"",(0,G.default)(t,"approvedData.target_num_patients",t.target_num_patients))),i}catch(e){return console.log(e),[]}}return[]}function y(e,t,a){var n=(0,G.default)(a,"is_imported",!1);return(t.role!==oe.default.PLAYGROUND||!n)&&t.role!==oe.default.READONLY&&!(t.role===oe.default.ADMIN&&!n&&!e.state.isOwner)&&!e.is_archived&&e.status!==se.SCENARIO_STATUS.APPROVED&&e.status!==se.SCENARIO_STATUS.PREV_APPROVED&&(e.state.isOwner||t.role===oe.default.ADMIN)}function S(e,t){if(!t.length)return e;if(!e.length)return t;var a=e.reduce(function(e,a){var n=(0,q.default)(a),r=t.find(function(e){return e.name===a.name});return r&&(n.countries=(0,X.default)(n.countries.concat(r.countries),["name"])),e.push(n),e},[]);return(0,X.default)((0,J.default)([].concat(l(a),l(t)),"name"),["id"])}function b(e,t,a,n,r){var l=e.find(function(e){return e.name.toLowerCase()===a.name.toLowerCase()});if(l){var i=l.countries.find(function(e){return e.name.toLowerCase()===n.name.toLowerCase()});i?(r.patients_min=i.patients_min,r.patients=i.patients,r.patients_max=i.patients_max,r.isOverridden=i.isOverridden,l.countries=l.countries.filter(function(e){return e.name.toLowerCase()!==n.name.toLowerCase()})):t.length&&b(t,[],a,n,r)}else t.length&&b(t,[],a,n,r)}function C(e,t){var a=e.countries;1===a.length||a.find(function(e){return"Unspecified country"===e.name})||(a=[Ee(e.id)].concat(a));var n=a.find(function(e){return e.name===t.country_name});n&&(n.isSelected=!0)}function O(e,t,a,n,r){var l=se.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION,i=se.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION_MIN,o=se.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION_MAX,s=se.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK,u={id:t.platform_country_id||"fpo_"+t.country_id,name:t.country_name,isSelected:!0,region_id:e,disabled:!1,patients:t[""+r+l],patients_min:t[""+r+i],patients_max:t[""+r+o],platform_country_id:t.platform_country_id,unlock:t.unlock,constraint:t.constraint,isOverridden:t.overrideList.includes(l)&&t[""+r+s]&&!t[""+r+s].includes(l)},d=n.find(function(e){return e.name===t.region_name});if(d)d.countries.push(u);else{var c=a.find(function(e){return e.name===t.region_name}),f=1===c.countries.length,p=(0,B.default)(c,"countries");p.isCountryRegion=f,p.countries=[u],n.push(p)}}function T(e,t,a){var n=t.map(function(e){var t=e.countries.map(function(e){return j({},e,{platform_country_id:e.id})});return j({},e,{countries:t})}),r=(0,q.default)(n),l=(0,q.default)(n),i=[],o=[],s=[],u=[],d=[],c=a?"adjusted_":"";return e.countries.forEach(function(t){if("INCLUDE"===t.constraint){var a=r.find(function(e){return e.name===t.region_name});C(a,t),O(a.id,t,r,i,c)}else if("EXCLUDE"===t.constraint){var f=l.find(function(e){return e.name===t.region_name});C(f,t),O(f.id,t,l,o,c)}else{var p=n.find(function(e){return e.name===t.region_name});O(p.id,t,n,s,c)}null!==e.source_scenario_id&&(0,fe.default)(t)&&(u.push(t),d.push(t))}),{includeCountries:i,excludeCountries:o,otherCountries:s,initialIncludedRegionsCountries:r,initialExcludedRegionsCountries:l,disabledIncludedCountries:u,disabledExcludedCountries:d}}function R(e,t,a){var n=t.map(function(e){var t=e.countries.map(function(e){return j({},e,{platform_country_id:e.id})});return j({},e,{countries:t})}),r=(0,q.default)(n),l=[];return e.countries.forEach(function(e){var t=r.find(function(t){return t.name===e.region_name});1===t.countries.length||t.countries.find(function(e){return"Unspecified country"===e.name})||(t.countries=[Ee(t.id)].concat(t.countries));var i=t.countries.find(function(t){return t.name===e.country_name});i&&(i.isSelected=!0);var o=(0,fe.default)(e),s=a?"adjusted_":"",u={id:e.platform_country_id,name:e.country_name,isSelected:!0,region_id:t.id,disabled:!1,patients:e[s+"patient_allocation"]||null,sites:e[s+"num_sites"],platform_country_id:e.platform_country_id,hasActuals:o},d=l.find(function(t){return t.name===e.region_name});if(d)d.countries.push(u);else{var c=n.find(function(t){return t.name===e.region_name}),f=1===c.countries.length,p=(0,B.default)(c,"countries");p.isCountryRegion=f,p.countries=[u],l.push(p)}}),l}function w(e,t,a){return e.map(function(e){return{id:e.id,name:e.name,rank:e.rank,locations:R(e,t,a),trigger:{trigger_type:e.trigger_type,start_date:e.fp&&e.fp.isValid()?(0,U.default)(e.fp).format("YYYY-MM-DD"):null,num_patients:e.target_num_patients,num_patients_abs:e.num_patients_abs,start_milestone:e.start_milestone,source_cohort_id:e.source_cohort_id}}})}function A(){return new Set(["fsiv","25_si","50_si","90_si","fpfv"])}function I(e,t,a){var n=A(),l=[];return e.forEach(function(e){var t=j({},e);if(t.fieldName=t.fieldName?t.fieldName.replace("adjusted_",""):t.fieldName,n.has(t.fieldName)){var a=m(e.fieldValue);t.fieldValue=a&&e.fp?(0,U.default)(a.format("LL")).diff((0,U.default)(e.fp.format("LL")),"d"):null}l.push(t)}),l.reduce(function(e,n){var l=e.findIndex(function(e){return a?e.countryName===n.countryName&&e.regionName===n.regionName&&e.overrideId===n.overrideId&&e.cohortId===n.cohortId:e.countryName===n.countryName&&e.regionName===n.regionName&&e.overrideId===n.overrideId}),i=e;if(-1===l?(i.push((0,B.default)(n,["fieldName","fieldValue"])),l=i.length-1,i[l].values=[r({},n.fieldName,n.fieldValue)]):i[l].values.push(r({},n.fieldName,n.fieldValue)),!n.overrideId){var o=null;t.reduce(function(e,t){var a=t.countries.find(function(e){return e.name===n.countryName});return a&&(o=a.id),e},null),Object.assign(i[l],{countryPlatformId:o,regionName:n.regionName})}return i},[])}function N(e){var t=(0,G.default)(e,"nerve_job_status");return t===de.default.QUEUED||t===de.default.RUNNING}function D(e,t,a,n){var i=n,o=Object.keys(a);return{cohorts:t.map(function(t){if(t.id!==e)return t;var n=t.countries.map(function(n){if(!o.includes(String(n.country_id)))return n;var s=a[n.country_id],u=s.reduce(function(e,t){return j({},e,r({},t.fieldName,t.newValue))},n);return s.forEach(function(a){var n=i.findIndex(function(t){return null!==u.override_id?t.overrideId===u.override_id&&t.fieldName===a.fieldName:t.cohortId===e&&t.countryName===u.country_name&&t.regionName===u.region_name&&t.fieldName===a.fieldName});if(n>-1){var r=i[n];i.splice(n,1),i=[].concat(l(i),[j({},r,{fieldValue:a.newValue})])}else i.push({overrideId:u.override_id,countryName:u.location,regionName:u.region,fieldName:a.fieldName,fieldValue:a.newValue,oldValue:a.oldValue,fp:t.fp,cohortId:e})}),u});return j({},t,{countries:n,state:j({},t.state,{isDirty:!0})})}),dataToSave:i}}function P(e,t,a,n,l){var i=l;return{cohorts:t.map(function(t){if(t.id!==e)return t;var l=!1,o=t.countries.map(function(e){if(!a.includes(e.country_id))return e;var t=i.filter(function(t){return t.overrideId===e.override_id&&t.fieldName===n});return i=(0,W.default)(i,t,function(e,t){return e.overrideId===t.overrideId&&e.fieldName===t.fieldName}),l||(l=i.some(function(t){return t.overrideId===e.override_id})),t.reduce(function(e,t){return j({},e,r({},t.fieldName,t.oldValue))},e)});return j({},t,{countries:o,state:j({},t.state,{isDirty:l})})}),dataToSave:i}}function L(e,t,a,n){return{ignoreGenericData:!(arguments.length>4&&void 0!==arguments[4])||arguments[4],fsiv:null,"25_si":null,"50_si":null,"90_si":null,fpfv:null,num_sites:"",overrideList:[],override_id:null,patient_allocation:"",randomisation_rate:"",curves:[[],[],[]],actual_overallocation:0,sas:"",screening_failure:null,region:t,regionHasSingleCountry:n,region_id:a,region_name:t,country_id:"Unspecified country"===e?e+"-"+t+"-"+t:e+"-"+a+"-"+t,location:e,country_name:e,adjusted_num_sites:null,adjusted_patient_allocation:null,adjusted_25_si:null,adjusted_50_si:null,adjusted_90_si:null,adjusted_fpfv:null,adjusted_fsiv:null,adjusted_randomisation_rate:null,adjusted_sas:null,adjusted_screening_failure:null,adjusted_invalids:[],unlock:[]}}function M(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=n?"adjusted_":"",i=["patient_allocation","patient_allocation_min","patient_allocation_max","num_sites","sas","25_si","50_si","90_si","fpfv","fsiv","screening_failure","randomisation_rate"],o={cohort_id:t.cohort_id,constraint:t.constraint,overrideList:t.overrideList,unlock:t.unlock,historical_reference_data_by_studies:t.historical_reference_data_by_studies,historical_reference_data_by_indication:t.historical_reference_data_by_indication};i.forEach(function(e){void 0!==t[e]&&(o[""+l+e]=t[e])});var s=Object.assign(a,o);return r&&(s[l+"fsiv"]&&(s[l+"fsiv"]=e.fp.clone().add(s[l+"fsiv"],"w")),s[l+"fpfv"]&&(s[l+"fpfv"]=e.fp.clone().add(s[l+"fpfv"],"w")),s[l+"25_si"]&&(s[l+"25_si"]=e.fp.clone().add(s[l+"25_si"],"w")),s[l+"50_si"]&&(s[l+"50_si"]=e.fp.clone().add(s[l+"50_si"],"w")),s[l+"90_si"]&&(s[l+"90_si"]=e.fp.clone().add(s[l+"90_si"],"w"))),s}function x(e,t,a,n){if(!n)return!1;var r=le.FIELDS[e],l=t[a]&&t[a][r]||[],i=l.filter(function(e){return null!==e&&e>=0}).length>0;return"rollup"!==t.type&&!i}function k(e){return new Set(["japan","us","china"]).has(e.toLowerCase())}Object.defineProperty(t,"__esModule",{value:!0}),t.createUnspecifiedCountry=void 0;var j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.getDurationInWeeks=i,t.formatDate=o,t.prepareToStudyEditFormat=s,t.prepareForComparison=u,t.getMomentDate=d,t.getCurveName=c,t.prepareCountriesEvents=f,t.prepareScenarioObject=p,t.prepareCountryActualData=h,t.prepareScenarioCountriesObject=v,t.getParamShift=_,t.getParameterUncertainty=E,t.getScenarioCalculatedData=g,t.isEditableScenario=y,t.mergeLocations=S,t.changeRegionsCountries=b,t.updateInitialRegionsCountries=C,t.updateRegionsCountries=O,t.prepareLocationsData=T,t.prepareCohortLocations=R,t.prepareCohortsData=w,t.getDateFields=A,t.prepareDataToSaveOverrides=I,t.isOptimizing=N,t.updateCohortCountriesData=D,t.revertCohortCountriesData=P,t.getNewCountryObject=L,t.mergeCountryParameters=M,t.isCellDimmed=x,t.isSingleCountry=k;var F=a(10),U=n(F);a(1964);var V=a(83),B=n(V),H=a(11),G=n(H),Y=a(31),q=n(Y),z=a(697),W=n(z),K=a(701),X=n(K),Z=a(702),J=n(Z),Q=a(1938),$=n(Q),ee=a(1212),te=n(ee),ae=a(130),ne=a(223),re=a(362),le=a(87),ie=a(182),oe=n(ie),se=a(14),ue=a(47),de=n(ue),ce=a(562),fe=n(ce),pe=a(556),me=n(pe),he=a(1205),ve=n(he),_e=(0,te.default)(ae.calculateCurvesData),Ee=t.createUnspecifiedCountry=function(e){return{id:"unspecifiedCountry_"+e,name:"Unspecified country",region_id:e,isSelectedAsRegion:!1,isSelected:!1}}},,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CellGroup=t.textSortTable=t.SortTypes=t.SortHeaderCell=t.Row=t.Cell=t.Column=t.FlexTable=void 0;var r=a(998),l=n(r),i=a(521),o=n(i),s=a(264),u=n(s),d=a(522),c=n(d),f=a(520),p=n(f),m=a(1e3),h=n(m);t.default=l.default,t.FlexTable=l.default,t.Column=o.default,t.Cell=u.default,t.Row=c.default,t.SortHeaderCell=h.default,t.SortTypes=m.SortTypes,t.textSortTable=m.textSortTable,t.CellGroup=p.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(181),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROLLUP="ROLLUP",t.REGION="REGION",t.COUNTRY="COUNTRY",t.UNSPECIFIED_COUNTRY="Unspecified country",t.UNDO_HISTORY_LENGTH=11,t.SCENARIO_DATA_TYPE={ROLLUP:"rollup",REGION:"region",COUNTRY:"country"},t.SCENARIO_STATUS={APPROVED:"APPROVED",PREV_APPROVED:"PREV. APPROVED",OPEN:"OPEN"},t.SIDEBAR_BUTTONS={EVENT:"EVENT",DUPLICATE:"DUPLICATE",NOTES:"NOTES",COHORTS:"COHORTS",SAVE:"SAVE",EXPORT:"EXPORT",EDIT:"EDIT",OPTIMISE:"OPTIMISE",APPROVE:"APPROVE"},t.ENROLMENT_TABLE_FIELDS_LIST={PATIENT_ALLOCATION:"patient_allocation",PATIENT_ALLOCATION_MIN:"patient_allocation_min",PATIENT_ALLOCATION_MAX:"patient_allocation_max",NUM_SITES:"num_sites",SAS:"sas",SI_25:"25_si",SI_50:"50_si",SI_90:"90_si",RANDOMISATION_RATE:"randomisation_rate",SCREENING_FAILURE:"screening_failure",FPFV:"fpfv",FSIV:"fsiv",UNLOCK:"unlock"},t.ADJUSTED_COUNTRY_DATA_FIELDS=["adjusted_25_si","adjusted_50_si","adjusted_90_si","adjusted_events","adjusted_fpfv","adjusted_fpp_fpfv","adjusted_fpfv_lpfv","adjusted_fpfv_fpft","adjusted_fsiv","adjusted_num_sites","adjusted_patient_allocation","adjusted_patient_allocation_min","adjusted_patient_allocation_max","adjusted_randomisation_rate","adjusted_sas","adjusted_screening_failure","adjusted_unlock","adjusted_lpft","adjusted_curves","adjusted_fpft","adjusted_overallocatedData","cohort_id","constraint","country_id","country_name","id","adjusted_lockedFields","name","adjusted_overrideList","override_id","platform_country_id","region","regionHasSingleCountry","region_id","region_name","scenario_id","location","ignore_aggregation","actualTimeseriesSnapshot"],t.APPROVED_COUNTRY_DATA_FIELDS=["25_si","50_si","90_si","events","fpfv","fpp_fpfv","fpfv_lpfv","fpfv_fpft","fsiv","num_sites","patient_allocation","patient_allocation_min","patient_allocation_max","randomisation_rate","sas","screening_failure","unlock","lpft","curves","fpft","overallocatedData","cohort_id","constraint","country_id","country_name","id","lockedFields","name","overrideList","override_id","platform_country_id","region","regionHasSingleCountry","region_id","region_name","scenario_id","location"],t.COUNTRY_DATA_FIELDS=["25_si","50_si","90_si","events","fpfv","fpfv_fpft","fpfv_lpfv","fsiv","num_sites","patient_allocation","patient_allocation_min","patient_allocation_max","randomisation_rate","sas","screening_failure","unlock","lpft","overrideList"],t.SCENARIO_DASHBOARD_DATA_FIELDS=["fpfv_lpfv","num_sites","patient_allocation","lpft","overallocatedData"],t.SCENARIO_DASHBOARD_APPROVED_DATA_FIELDS=["fpfv_lpfv","num_sites","patient_allocation","lpft","fpfv","fpft","fpfv_fpft","lpfv","fsiv","overallocatedData","curves","type","actual_curves","actual_date","actual_f_lpft","actual_fsiv","actual_fpfv","actual_fpft","actual_lpfv"],t.COUNTRY_COMMON_FIELDS=["actualTimeseriesSnapshot","cohort_id","constraint","country_id","country_name","id","lockedFields","name","original_f_lpft","overrideList","override_id","platform_country_id","region","regionHasSingleCountry","region_id","region_name","scenario_id","ignoreGenericData","ignore_aggregation","onlyActuals","ignoreAdjustedData","country_sites_approval_status"],t.MULTI_EDIT_TYPE={EDIT:"edit",UNLOCK:"unlock"},t.WORKER_MESSAGE_TYPES={RESULT:"RESULT",ERROR:"ERROR",IN_PROGRESS:"IN_PROGRESS",COMPLETED:"COMPLETED"},t.default="Global Rollup"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GET_PLATFORM_STUDIES="GET_PLATFORM_STUDIES",t.IMPORT_PLATFORM_STUDY="IMPORT_PLATFORM_STUDY",t.GET_PLATFOTM_REGIONS="GET_PLATFOTM_REGIONS",t.GET_AVAILABLE_STUDIES="GET_AVAILABLE_STUDIES",t.GET_STUDY_OPTIONS="GET_STUDY_OPTIONS",t.GET_REGIONS_COUNTRIES="GET_REGIONS_COUNTRIES",t.GET_HISTORICAL_STUDIES="GET_HISTORICAL_STUDIES",t.TOGGLE_HISTORICAL_STUDY="TOGGLE_HISTORICAL_STUDY",t.SORT_HISTORICAL_DATA="SORT_HISTORICAL_DATA",t.FILTER_HISTORICAL_DATA="FILTER_HISTORICAL_DATA",t.APPLY_HISTORICAL_STUDIES_CHANGES="APPLY_HISTORICAL_STUDIES_CHANGES",t.CLEAR_HISTORICAL_DATA="CLEAR_HISTORICAL_DATA",t.GET_HISTORICAL_DATA="GET_HISTORICAL_DATA",t.GET_STUDY_DASHBOARD_DATA="GET_STUDY_DASHBOARD_DATA",t.UPDATE_STUDY_SCENARIO_FULL_DATA="UPDATE_STUDY_SCENARIO_FULL_DATA",t.ADD_STUDY_SCENARIO="ADD_STUDY_SCENARIO",t.GET_STUDIES="GET_STUDIES",t.GET_STUDY_BY_ID="GET_STUDY_BY_ID",t.CREATE_NEW_STUDY="CREATE_NEW_STUDY",t.DELETE_STUDY="DELETE_STUDY",t.CREATE_NEW_STUDY_AND_SCENARIO="CREATE_NEW_STUDY_AND_SCENARIO",t.UPDATE_STUDY_OWNER="UPDATE_STUDY_OWNER",t.UPDATE_STUDY="UPDATE_STUDY",t.GET_COUNTRY_SITES="GET_COUNTRY_SITES",t.GET_COUNTRY_SITE="GET_COUNTRY_SITE",t.SORT_SITES_DATA="SORT_SITES_DATA",t.GET_UNKNOWN_STUDIES="GET_UNKNOWN_STUDIES",t.GET_STUDY_SCENARIOS_LIST="GET_STUDY_SCENARIOS_LIST",t.STUDIES_SET_FILTER_VALUE="STUDIES_SET_FILTER_VALUE",t.STUDIES_SET_SORTING_ORDER="STUDIES_SET_SORTING_ORDER",t.STUDIES_COLLAPSE_SECTIONS="STUDIES_COLLAPSE_SECTIONS",t.GET_STUDY_SCENARIOS_TO_COMPARE="GET_STUDY_SCENARIOS_TO_COMPARE",t.GET_SCENARIO_VIEWER_DATA="GET_SCENARIO_VIEWER_DATA",t.FETCH_ACTUALS_DATA="FETCH_ACTUALS_DATA",t.FETCH_AGGREGATED_ACTUALS_DATA="FETCH_AGGREGATED_ACTUALS_DATA",t.ADD_SCENARIO_TO_CACHE="ADD_SCENARIO_TO_CACHE",t.CLEAR_SCENARIO_CACHE="CLEAR_SCENARIO_CACHE",t.ADD_SCENARIO="ADD_SCENARIO",t.REMOVE_SCENARIO="REMOVE_SCENARIO",t.GET_SCENARIO="GET_SCENARIO",t.GET_IMPACT_SCENARIO="GET_IMPACT_SCENARIO",t.UPDATE_SCENARIO="UPDATE_SCENARIO",t.OPTIMISE_SCENARIO="OPTIMISE_SCENARIO",t.ARCHIVE_SCENARIO="ARCHIVE_SCENARIO",t.UNARCHIVE_SCENARIO="UNARCHIVE_SCENARIO",t.REMOVE_SCENARIO_COUNTRY="REMOVE_SCENARIO_COUNTRY",t.SHARE_SCENARIO="SHARE_SCENARIO",t.EXPORT_SCENARIO_DATA="EXPORT_SCENARIO_DATA",t.ADD_COHORT_COUNTRY="ADD_COHORT_COUNTRY",t.DELETE_COHORT_COUNTRY="DELETE_COHORT_COUNTRY",t.CHANGE_COHORT_COUNTRY="CHANGE_COHORT_COUNTRY",t.CHANGE_COHORT_COUNTRIES="CHANGE_COHORT_COUNTRIES",t.CHANGE_COHORT_SAVE="CHANGE_COHORT_SAVE",t.REVERT_COHORT_CONTRY="REVERT_COHORT_CONTRY",t.RESTORE_UNSAVED_DATA="RESTORE_UNSAVED_DATA",t.RESET_UNSAVED_DATA="RESET_UNSAVED_DATA",t.COPY_COUNTRY_DATA="COPY_COUNTRY_DATA",t.PASTE_COUNTRY_DATA="PASTE_COUNTRY_DATA",t.ADD_SCENARIO_NOTE="ADD_SCENARIO_NOTE",t.ADD_IMPACT_SCENARIO_NOTE="ADD_IMPACT_SCENARIO_NOTE",t.GET_SCENARIO_NOTES="GET_SCENARIO_NOTES",t.GET_IMPACT_SCENARIO_NOTES="GET_IMPACT_SCENARIO_NOTES",t.GET_SCENARIO_EVENTS="GET_SCENARIO_EVENTS",t.GET_SCENARIO_COHORT_EVENTS="GET_SCENARIO_COHORT_EVENTS",t.APPLY_SCENARIO_EVENTS_CHANGES="APPLY_SCENARIO_EVENTS_CHANGES",t.ADD_NEW_EVENT="ADD_NEW_EVENT",t.UPDATE_EVENT="UPDATE_EVENT",t.DUPLICATE_EVENT="DUPLICATE_EVENT",t.REMOVE_EVENT="REMOVE_EVENT",t.SORT_EVENTS="SORT_EVENTS",t.TOGGLE_GROUP_EVENTS_BY_TYPE="TOGGLE_GROUP_EVENTS_BY_TYPE",t.APPLY_DISABLE_EVENT="APPLY_DISABLE_EVENT",t.BATCH_OVERRIDE_FIELD_UPDATE="BATCH_OVERRIDE_FIELD_UPDATE",t.UNLOCK_COUNTRY="UNLOCK_COUNTRY",t.GET_PARAMETERS_BY_COUNTRY_SCENARIO="GET_PARAMETERS_BY_COUNTRY_SCENARIO",t.ADD_COUNTRY_TO_THE_REDUX_COUNTRY_LIST="ADD_COUNTRY_TO_THE_REDUX_COUNTRY_LIST",t.REMOVE_COUNTRY_FROM_THE_REDUX_COUNTRY_LIST="REMOVE_COUNTRY_FROM_THE_REDUX_COUNTRY_LIST",t.VALIDATE_STUDY_ID="VALIDATE_STUDY_ID",t.VALIDATE_SCENARIO_NAME="VALIDATE_SCENARIO_NAME",t.GET_AVAILABLE_USERS="GET_AVAILABLE_USERS",t.GET_COUNTRY_USERS="GET_COUNTRY_USERS",t.SET_COUNTRY_TO_USER="SET_COUNTRY_TO_USER",t.REMOVE_COUNTRY_FROM_USER="REMOVE_COUNTRY_FROM_USER",t.GET_USER_DETAILS="GET_USER_DETAILS",t.CLOSE_MISSING_INDICATOR_DIALOG="CLOSE_MISSING_INDICATOR_DIALOG",t.SCENARIO_JOB_STATUS_CHANGED="SCENARIO_JOB_STATUS_CHANGED",t.LOGIN="LOGIN",t.FORBIDDEN_ERROR="FORBIDDEN_ERROR",t.NOT_FOUND_ERROR="NOT_FOUND_ERROR",t.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",t.ODA_API_ERROR="ODA_API_APPROVE_ERROR",t.SESSION_EXPIRED="SESSION_EXPIRED",t.BAD_REQUEST="BAD_REQUEST",t.UPDATE_SCENARIO_JOB_STATUS="UPDATE_SCENARIO_JOB_STATUS",t.UPDATE_STUDY_SCENARIO_JOB_STATUS="UPDATE_STUDY_SCENARIO_JOB_STATUS",t.CHECK_JOB_STATUS="CHECK_JOB_STATUS",t.ROUTER_LOCATION_CHANGE="@@router/LOCATION_CHANGE",t.GET_APPLICATION_METADATA="GET_APPLICATION_METADATA",t.UNDO_LAST_ACTION="UNDO_LAST_ACTION",t.REDO_LAST_ACTION="REDO_LAST_ACTION",t.ADD_HISTORY_STEP="ADD_HISTORY_STEP",t.RESTORE_SCENARIO_DATA="RESTORE_SCENARIO_DATA",t.CONTEXT_HELP_PAGE_LIST="CONTEXT_HELP_PAGE_LIST",t.CONTEXT_HELP_PAGE="CONTEXT_HELP_PAGE",t.IS_SHOW_CONTEXT_HELP="IS_SHOW_CONTEXT_HELP",t.SHOW_NOTIFICATION="SHOW_NOTIFICATION",t.HIDE_NOTIFICATION="HIDE_NOTIFICATION",t.SUCCESS="SUCCESS",t.ERROR="ERROR",t.SET_SITES_FILTER="SET_SITES_FILTER",t.SET_STUDIES_FILTER="SET_STUDIES_FILTER",t.SET_METRICS_FILTER="SET_METRICS_FILTER",t.HANDLE_SITES_SORT="HANDLE_SITES_SORT",t.TOGGLE_TABLE_VIEW="TOGGLE_TABLE_VIEW",t.TOGGLE_INTERNAL_SITES_VIEW="TOGGLE_INTERNAL_SITES_VIEW",t.TOGGLE_EXTERNAL_SITES_VIEW="TOGGLE_EXTERNAL_SITES_VIEW",t.UPDATE_SITES="UPDATE_SITES",t.SITE_ACTION="SITE_ACTION",t.ADD_SITE_HISTORY_STEP="ADD_SITE_HISTORY_STEP",t.UNDO_SITE_ACTION="UNDO_SITE_ACTION",t.REDO_SITE_ACTION="REDO_SITE_ACTION",t.RESET_SITES="RESET_SITES",t.TOGGLE_INITIAL_SITES_SELECTION="TOGGLE_INITIAL_SITES_SELECTION",t.GET_EDITABLE_SITES_COUNTRIES="GET_EDITABLE_SITES_COUNTRIES",t.CHANGE_COUNTRY_SITES_STATUS="CHANGE_COUNTRY_SITES_STATUS",t.SET_SITE_METRICS_FILTER="SET_SITE_METRICS_FILTER",t.SET_SITE_MILESTONES_FILTER="SET_SITE_MILESTONES_FILTER",t.GET_COUNTRY_MANAGER="GET_COUNTRY_MANAGER",t.GET_CSMS="GET_CSMS",t.GET_CSM_SCENARIOS="GET_CSM_SCENARIOS",t.CSM_USER_SELECT="CSM_USER_SELECT",t.SITE_EDIT_REASON="SITE_EDIT_REASON",t.EXPORT_COUNTRY_SITES_SELECTION="[SITES] EXPORT_COUNTRY_SITES_SELECTION",t.TOGGLE_RAW_TABLE_VIEW_STATE="[SITES] TOGGLE_RAW_TABLE_VIEW_STATE",t.TOGGLE_OTHER_TABLE_VIEW_STATE="[SITES] TOGGLE_OTHER_TABLE_VIEW_STATE",t.TOGGLE_EXTERNAL_TABLE_VIEW_STATE="[SITES] TOGGLE_EXTERNAL_TABLE_VIEW_STATE",t.TOGGLE_SELECTED_TABLE_VIEW_STATE="[SITES] TOGGLE_SELECTED_TABLE_VIEW_STATE",t.SEARCH_SITES_VALUE_ACTION="[SITES] SEARCH_SITES_VALUE_ACTION",t.SET_ACTIVE_SITES_PAGE="[SITES] SET_ACTIVE_SITES_PAGE",t.SET_ACTIVE_PAGES="[SITES] SET_ACTIVE_PAGES",t.SEARCH_FOR_SITES="[SITES] SEARCH_FOR_SITES",t.ADD_SELECTED_SITE="[SITES] ADD_SELECTED_SITE",t.SCENARIO_SITE_SELECTION_STATUS="SCENARIO_SITE_SELECTION_STATUS",t.GET_SITES_HEALTH="[SITES] GET_SITES_HEALTH"},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ACTIVE:"ACTIVE",PLANNED:"PLANNED",COMPLETED:"COMPLETED"};t.DATE_FORMAT="DD MMM YYYY",t.PHASE=[{id:1,name:"I"},{id:2,name:"II"},{id:3,name:"III"},{id:4,name:"IV"}],t.STUDY_PARAMS=["fp","target_lpft","therapeutic_area","indication","phase","target_num_patients","fpfv_fpft"],t.STUDY_FILTERS=["inclusion","exclusion"],t.default=n},,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Gutter=t.Grid=t.Row=t.Col=void 0,a(2324);var r=a(917),l=n(r),i=a(919),o=n(i),s=a(920),u=n(s),d=a(918),c=n(d);t.Col=l.default,t.Row=o.default,t.Grid=u.default,t.Gutter=c.default,t.default=u.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(533),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},,,,,function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return function(t){t((0,R.fetchApi)(N.GET_STUDIES,A.GET_STUDIES,"GET",null,{signal:e})).catch(function(e){return e})}}function l(e){return function(t){t((0,R.fetchApi)(N.CREATE_STUDY,A.CREATE_NEW_STUDY,"POST",e)).then(function(){return t((0,O.push)("/studies"))}).catch(function(e){return e})}}function i(e){var t=(0,D.getMomentDate)(e.scenario.fp),a=(0,D.getMomentDate)(e.scenario.end_date),n=C({},e,{scenario:C({},e.scenario,{fp:t.startOf("day").add(t.utcOffset()/60,"hours").utc(),end_date:a.startOf("day").add(a.utcOffset()/60,"hours").utc()})});return function(t){return t((0,R.fetchApi)(N.CREATE_STUDY_AND_SCENARIO,A.CREATE_NEW_STUDY_AND_SCENARIO,"POST",n)).then(function(a){return t((0,O.push)("/studies/"+a.studyId+"/scenarios/"+a.scenarioId+(e.scenario.cohorts?"/cohorts":"")))})}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments[2];return function(n){var r=t&&{archived:!0};return n((0,R.fetchApi)(N.STUDY_BY_ID.replace(/:id/,e),{type:A.GET_STUDY_BY_ID,isArchivedScenarios:t},"GET",r,{signal:a})).catch(function(e){return e})}}function s(e,t){return function(a){a((0,R.fetchApi)(N.PLAIN_STUDY_BY_ID.replace(/:id/,e),A.GET_STUDY_BY_ID,"GET",null,{signal:t})).catch(function(e){return e})}}function u(e){return function(t){t((0,R.fetchApi)(N.STUDY_BY_ID.replace(/:id/,e),A.GET_STUDY_BY_ID)).then(function(a){var n=a.scenarios[0].id;t((0,O.push)("/studies/"+e+"/scenarios/"+n))}).catch(function(e){return e})}}function d(e,t){var a={};return t.forEach(function(e,t){a["id_"+t]=e}),function(t){t((0,R.fetchApi)(N.GET_STUDY_SCENARIOS.replace(/:studyId/,e),A.GET_STUDY_SCENARIOS_TO_COMPARE,"GET",a)).catch(function(e){return e})}}function c(e){return function(t){return t((0,R.fetchApi)(N.DELETE_STUDY.replace(/:id/,e),{type:A.DELETE_STUDY,id:e},"DELETE"))}}function f(e,t,a){return t((0,R.fetchApi)(N.VALIDATE_STUDY_UNIQUE,A.VALIDATE_STUDY_ID,"POST",{study_id:e.study_id,id:a.study.id})).then(function(e){"valid"!==e.result&&setTimeout(function(){t((0,T.stopAsyncValidation)(a.form,e))},0)}).catch(function(e){return e})}function p(e,t,a){return{type:A.UPDATE_STUDY_SCENARIO_JOB_STATUS,scenarioId:e,studyId:t,jobStatus:a}}function m(e,t){return function(a){return a((0,R.fetchApi)(N.UPDATE_STUDY.replace(/:id/,e),{type:A.UPDATE_STUDY,studyId:e},"PUT",{study:t}))}}function h(){return function(e){return e({type:A.CLOSE_MISSING_INDICATOR_DIALOG})}}function v(e){return{type:A.STUDIES_SET_FILTER_VALUE,filterValue:e}}function _(e){return{type:A.STUDIES_COLLAPSE_SECTIONS,section:e}}function E(e,t){return{type:A.STUDIES_SET_SORTING_ORDER,section:e,column:t}}function g(e){return function(t){return t((0,R.fetchApi)(""+N.ALIGN_STUDY_PARAMS_WITH_IMPACT.replace(/:studyId/,e),{type:A.UPDATE_STUDY,studyId:e},"PUT"))}}function y(){return function(e){return e((0,R.fetchApi)(N.UNKNOWN_STUDIES,{type:A.GET_UNKNOWN_STUDIES}))}}function S(e,t,a){return{type:A.GET_STUDY_DASHBOARD_DATA,studyId:e,isArchived:t,forceUpdate:a}}function b(e){return function(t){return t((0,R.fetchApi)(""+N.STUDY_SCENARIOS_LIST.replace(/:studyId/,e),{type:A.GET_STUDY_SCENARIOS_LIST,studyId:e}))}}Object.defineProperty(t,"__esModule",{value:!0});var C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.getStudies=r,t.createNewStudy=l,t.createNewStudyAndScenario=i,t.getStudy=o,t.getPlainStudy=s,t.getStudyAndRedirect=u,t.getStudyScenariosToCompare=d,t.deleteStudy=c,t.validateStudyName=f,t.updateStudyScenarioJobStatus=p,t.updateStudy=m,t.closeMissingIndicationError=h,t.setFilterValue=v,t.setCollapsedSection=_,t.setSortingOrder=E,t.alignStudyParamsWithImpact=g,t.getUnknownStudies=y,t.getStudyDashboardData=S,t.getStudyScenariosList=b;var O=a(18),T=a(75),R=a(44),w=a(15),A=n(w),I=a(45),N=n(I),D=a(7)},,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ContextHelpButton=void 0;var r=a(853),l=n(r),i=a(852),o=n(i);t.ContextHelpButton=o.default,t.default=l.default},,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(Object.prototype.hasOwnProperty.call(e,"ownStudyConstraints"))return X({},e,{study:{}});var a=["target_num_patients","target_lpft"],n=void 0;return t?(a.push("fp"),n=(0,J.default)(e,"end_date")):n=(0,J.default)(e,"fp","end_date"),e.end_date&&(n.target_lpft=e.end_date.startOf("day").add(e.end_date.utcOffset()/60,"hours").utc()),X({},(0,J.default)(n,a),{study:(0,$.default)(n,a)})}function l(e,t,a){return function(n){return n((0,le.fetchApi)(oe.CREATE_NEW_SCENARIO.replace(":studyId",e.id),re.ADD_SCENARIO,"POST",r(t,a))).then(function(a){return n((0,ae.push)("/studies/"+e.id+"/scenarios/"+a.id+(t.cohorts?"/cohorts":"")))})}}function i(e,t,a,n,r,l){return function(i){return i((0,le.fetchApi)(oe.DUPLICATE_SCENARIO.replace(/:scenarioId/,e),{type:re.ADD_SCENARIO,refreshScenarioCache:!0,meta:{notification:{trigger:re.SUCCESS,message:"Successfully duplicated scenario"}}},"POST",{newName:t,targetStudyId:a,recalculateWithActualParams:n,confirmActualStudyParams:r,exactAdjustedCopy:l}))}}function o(e,t,a,n,r){return function(l){var i=a?{scenarioName:t,cohortsOffset:a,recalculateWithActualParams:n,confirmActualStudyParams:r}:{scenarioName:t,recalculateWithActualParams:n,confirmActualStudyParams:r};return l((0,le.fetchApi)(oe.CREATE_ADJUSTMENT_SCENARIO.replace(/:scenarioId/,e),{type:re.ADD_SCENARIO,meta:{notification:{trigger:re.SUCCESS,message:"Successfully created adjusted scenario"}}},"POST",i))}}function s(e,t){return function(a){return a((0,le.fetchApi)(oe.DUPLICATE_IMPACT_SCENARIO.replace(/:studyId/,e),re.ADD_SCENARIO,"POST",t))}}function u(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments[3];return function(r){var l=a&&{simplified:!0};return r((0,le.fetchApi)(""+oe.GET_SCENARIO.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:re.GET_SCENARIO,studyId:e,scenarioId:t},"GET",l,{signal:n})).catch(function(e){return e})}}function d(e){return{type:re.RESTORE_UNSAVED_DATA,payload:e}}function c(){return{type:re.RESET_UNSAVED_DATA}}function f(e,t){return function(a){return a((0,le.fetchApi)(oe.GET_IMPACT_SCENARIO.replace(/:id/,e),{type:re.GET_IMPACT_SCENARIO,studyId:e},"GET",null,{signal:t})).catch(function(e){return e})}}function p(e){return function(t){return t((0,le.fetchApi)(oe.GET_SCENARIO_WITH_LOCATIONS.replace(/:id/,e),{type:re.GET_SCENARIO,scenarioId:e})).catch(function(e){return e})}}function m(e,t){return function(a){return a((0,le.fetchApi)(""+oe.SCENARIO_COUNTRY.replace(/:id/,e),{type:re.REMOVE_SCENARIO_COUNTRY,scenarioId:e,countryIds:t},"DELETE",{countryIds:t}))}}function h(e,t,a,n){return function(r,l){var i=(0,te.default)(l(),"scenarios["+a+"]",[]),o=(0,te.default)(i,"name","");return r((0,le.fetchApi)(oe.SAVE_PLAYGROUND.replace(/:id/,a),{type:re.BATCH_OVERRIDE_FIELD_UPDATE,studyId:t,scenarioId:a,refreshSitesData:n,meta:{notification:{trigger:re.SUCCESS,message:'Successfully saved data for scenario "'+o+'"'}}},"PUT",{overridesList:e}))}}function v(e,t,a,n){return function(r,l){var i=(0,te.default)(l(),"scenarios["+a+"]",[]),o=(0,te.default)(i,"name","");return r((0,le.fetchApi)(oe.SAVE_COHORT.replace(/:scenarioId/,a).replace(/:cohortId/,n),{type:re.BATCH_OVERRIDE_FIELD_UPDATE,studyId:t,scenarioId:a,meta:{notification:{trigger:re.SUCCESS,message:'Successfully saved data for scenario "'+o+'"'}}},"PUT",{overridesList:e}))}}function _(e,t,a){return function(n){return n((0,le.fetchApi)(oe.COHORT_COUNTRY.replace(/:scenarioId/,e).replace(/:cohortId/,t),{type:re.REMOVE_SCENARIO_COUNTRY,scenarioId:e,countryIds:a},"DELETE",{countryIds:a}))}}function E(e,t,a){return function(n){return n((0,le.fetchApi)(""+oe.UPDATE_SCENARIO.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:re.UPDATE_SCENARIO,studyId:e,scenarioId:t},"PUT",r(a)))}}function g(e,t,a){return function(n,r){var l=(0,te.default)(r(),"scenarios["+t+"]",{}),i=(0,te.default)(l,"name","");return n((0,le.fetchApi)(oe.APPROVE_SCENARIO.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:re.UPDATE_SCENARIO,studyId:e,scenarioId:t,clearScenarioCache:!0,refreshScenarioCache:!0,meta:{notification:{trigger:re.SUCCESS,message:'Successfully approved scenario "'+i+'"'}}},"PUT",{approvedData:a}))}}function y(e,t,a){return function(n){return n((0,le.fetchApi)(oe.CREATE_APPROVED_SCENARIO_SNAPSHOT.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:re.UPDATE_SCENARIO,studyId:e,scenarioId:t,refreshScenarioCache:!0},"PUT",{approvedData:a}))}}function S(e){return function(t){return t((0,le.fetchApi)(oe.OPTIMISE_SCENARIO.replace(/:scenarioId/,e),{type:re.OPTIMISE_SCENARIO,scenarioId:e},"POST"))}}function b(e,t){return function(a,n){var r=(0,te.default)(n(),"study["+e+"].scenarios",[]),l=(0,te.default)(r.find(function(e){return e.id===t}),"name","");return a((0,le.fetchApi)(oe.ARCHIVE_SCENARIO.replace(/:scenarioId/,t),{type:re.ARCHIVE_SCENARIO,studyId:e,scenarioId:t,meta:{notification:{trigger:re.SUCCESS,message:'Successfully archived scenario "'+l+'"'}}},"POST",{is_archived:!0}))}}function C(e,t){return function(a,n){var r=(0,te.default)(n(),"study["+e+"].scenarios",[]),l=(0,te.default)(r.find(function(e){return e.id===t}),"name","");return a((0,le.fetchApi)(oe.ARCHIVE_SCENARIO.replace(/:scenarioId/,t),{type:re.UNARCHIVE_SCENARIO,studyId:e,scenarioId:t,meta:{notification:{trigger:re.SUCCESS,message:'Successfully unarchived scenario "'+l+'"'}}},"DELETE",{is_archived:!1}))}}function O(e,t,a,n){return function(r){return r((0,le.fetchApi)(oe.GET_PARAMETERS_BY_COUNTRY_SCENARIO.replace(/:studyId/,e).replace(/:scenarioId/,t).replace(/:countryId/,a).replace(/:regionName/,n),{type:re.GET_PARAMETERS_BY_COUNTRY_SCENARIO,scenarioId:t,countryId:a},"GET"))}}function T(e,t,a,n){return function(r){return r((0,le.fetchApi)(oe.GET_PARAMETERS_BY_COUNTRY_COHORT.replace(/:studyId/,e).replace(/:cohortId/,t).replace(/:countryId/,a).replace(/:regionName/,n),{type:re.GET_PARAMETERS_BY_COUNTRY_SCENARIO,cohortId:t,countryId:a},"GET"))}}function R(e,t){return{type:re.ADD_COUNTRY_TO_THE_REDUX_COUNTRY_LIST,scenarioId:e,country:t}}function w(e,t,a,n){return function(r){return r((0,le.fetchApi)(oe.SHARE_SCENARIO.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:re.SHARE_SCENARIO,studyId:e,scenarioId:t,meta:{notification:{trigger:re.SUCCESS,message:"Scenario was successfully "+(n?"unshared":"shared")}}},"POST",{sharedWith:a,unshare:n}))}}function A(e,t,a){return{type:re.REMOVE_COUNTRY_FROM_THE_REDUX_COUNTRY_LIST,scenarioId:e,country:a,regionId:t}}function I(e,t,a){return{type:re.UPDATE_SCENARIO_JOB_STATUS,scenarioId:e,studyId:t,jobStatus:a}}function N(e,t){return function(a){return a((0,le.fetchApi)(oe.UPDATE_STUDY_OWNER.replace(/:studyId/,e),{type:re.UPDATE_STUDY_OWNER,studyId:e,newOwnerId:t,forceUpdate:!0,meta:{notification:{trigger:re.SUCCESS,message:"Study owner was changed successfully"}}},"PUT",{newOwnerId:t}))}}function D(e,t,a,n){return{type:re.CHANGE_COHORT_COUNTRY,scenarioId:e,cohortId:t,countryId:a,payload:n}}function P(e,t,a){return{type:re.CHANGE_COHORT_COUNTRIES,scenarioId:e,cohortId:t,payload:a}}function L(e,t,a,n){return{type:re.REVERT_COHORT_CONTRY,scenarioId:e,cohortId:t,countryId:a,fieldName:n}}function M(e,t,a){return{type:re.ADD_COHORT_COUNTRY,scenarioId:e,cohortId:t,payload:a}}function x(e,t,a){return{type:re.DELETE_COHORT_COUNTRY,scenarioId:e,cohortId:t,payload:a}}function k(e){return{type:re.CHANGE_COHORT_SAVE,payload:e}}function j(e,t,a,n){return{type:re.GET_SCENARIO_VIEWER_DATA,studyId:e,scenarioId:t,allConstraints:a,clearScenarioCache:n}}function F(e,t){return{type:re.GET_SCENARIO_VIEWER_DATA,studyId:e,scenarioId:t,fetchFullStudyData:!0}}function U(e,t){return{type:re.EXPORT_SCENARIO_DATA,studyId:e,scenarioId:t}}function V(e){return{type:re.UNDO_LAST_ACTION,scenarioId:e}}function B(e){return{type:re.REDO_LAST_ACTION,scenarioId:e}}function H(e){return{type:re.RESTORE_SCENARIO_DATA,payload:e}}function G(e,t,a){return{type:re.COPY_COUNTRY_DATA,scenarioId:e,cohortId:t,countryId:a}}function Y(e,t,a){return{type:re.PASTE_COUNTRY_DATA,scenarioId:e,cohortId:t,countryId:a}}function q(e,t,a,n){return function(r){return r((0,le.fetchApi)(""+oe.CONFIRM_ACTUAL_STUDY_PARAMS.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:a?"":re.UPDATE_SCENARIO,studyId:e,scenarioId:t},"PUT",n))}}function z(e,t){return function(a,n){var r=(0,te.default)(n(),"study["+e+"].scenarios",[]),l=(0,te.default)(r.find(function(e){return e.id===t}),"name");return a((0,le.fetchApi)(""+oe.REMOVE_SCENARIO.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:re.REMOVE_SCENARIO,studyId:e,scenarioId:t,meta:{notification:{trigger:re.SUCCESS,message:'Successfully deleted scenario "'+l+'"'}}},"DELETE"))}}function W(e,t){return function(a){return a((0,le.fetchApi)(""+oe.VALIDATE_SCENARIO_UNIQUE.replace(/:studyId/,e),{type:re.VALIDATE_SCENARIO_NAME},"POST",{newName:t})).catch(function(e){return e})}}function K(e,t,a){return a.isNewStudy?new Promise(function(){}):t((0,le.fetchApi)(""+oe.VALIDATE_SCENARIO_UNIQUE.replace(/:studyId/,a.studyNumId),{type:re.VALIDATE_SCENARIO_NAME},"POST",{newName:e.name})).then(function(e){e.value&&setTimeout(function(){t((0,ne.stopAsyncValidation)(a.form,{name:"Please enter a unique scenario ID"}))},0)}).catch(function(e){return e})}Object.defineProperty(t,"__esModule",{value:!0});var X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=l,t.duplicateScenario=i,t.createAdjustmentScenario=o,t.duplicateImpactScenario=s,t.getScenario=u,t.restoreUnsavedData=d,t.resetUnsavedData=c,t.getImpactScenario=f,t.getScenarioWithLocations=p,t.removeScenarioCountry=m,t.saveOverrides=h,t.saveCohortOverrides=v,t.removeCohortCountry=_,t.updateScenario=E,t.approveScenario=g,t.createApprovedSnapshot=y,t.optimiseScenario=S,t.archiveScenario=b,t.unarchiveScenario=C,t.getParametersByScenarioAndCountry=O,t.getParametersByCohortAndCountry=T,t.addCountryToTheCountryList=R,t.shareScenario=w,t.removeCountryFromCountriesList=A,t.updateScenarioJobStatus=I,t.setNewStudyOwner=N,t.changeCohortCountryData=D,t.changeCohortCountriesData=P,t.revertCohortCountryData=L,t.addCohortCountry=M,t.deleteCohortCountry=x,t.changeCohortEnableSave=k,t.getScenarioViewerData=j,t.getScenarioViewerDataWithFullStudy=F,t.exportScenarioData=U,t.undoLastAction=V,t.redoLastAction=B,t.restoreScenarioData=H,t.onCopy=G,t.onPaste=Y,t.confirmActualStudyParams=q,t.removeScenario=z,t.validateScenarioNameOnEdit=W,t.validateScenarioNameOnCreate=K;var Z=a(83),J=n(Z),Q=a(65),$=n(Q),ee=a(11),te=n(ee),ae=a(18),ne=a(75),re=a(15),le=a(44),ie=a(45),oe=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(ie)},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(e){return null===localStorage.getItem(e)};t.addToStorage=function(e,t){if(l(e))localStorage.setItem(e,JSON.stringify([t]));else{var a=JSON.parse(localStorage.getItem(e));a.map(function(e){return e.id}).includes(t.id)||localStorage.setItem(e,JSON.stringify(a.concat(t)))}return JSON.parse(localStorage.getItem(e))},t.getParamItemStorage=function(e,t,a){var n=null;return l(e)||JSON.parse(localStorage.getItem(e)).forEach(function(e){e.id===t&&(n=e[a])}),n},t.setParamItemStorage=function(e,t,a,i){if(!l(e)){var o=JSON.parse(localStorage.getItem(e)).map(function(e){return e.id===t?r({},e,n({},a,i)):e});return localStorage.setItem(e,JSON.stringify(o)),o}return null},t.removeParamItemStorage=function(e,t){if(!l(e)){var a=JSON.parse(localStorage.getItem(e)).filter(function(e){return e.id!==t});return localStorage.setItem(e,JSON.stringify(a)),a}return null},t.loadState=function(){try{var e=localStorage.getItem("fpo-sites-state");if(null===e)return;return JSON.parse(e)}catch(e){return void console.log(e)}},t.saveState=function(e){try{var t=JSON.stringify(e);localStorage.setItem("fpo-sites-state",t)}catch(e){console.log(e)}},t.resetState=function(e){try{localStorage.removeItem(e)}catch(e){console.log(e)}}},,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionButton=t.PopupDialog=void 0;var r=a(996),l=n(r),i=a(519),o=n(i);t.default=l.default,t.PopupDialog=l.default,t.ActionButton=o.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e){var t=(0,u.default)(e,"nerve_job_status");return t===f.default.QUEUED||t===f.default.RUNNING}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return e.role!==m.default.READONLY&&(e.role!==m.default.PLAYGROUND||!t||!t.is_imported)&&(t&&t.state.isOwner||e.role===m.default.ADMIN)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=(0,u.default)(t,"is_imported");if(!e||!(0,u.default)(t,"state.status")&&n||!(0,u.default)(t,"state.isOwner")&&!1===n)return new _;var r=l(a),o=t;t&&!t.state&&(o.state={});var s=a&&a.state.isOwner,c=s&&e.role!==m.default.READONLY||e.role===m.default.ADMIN,p=i(e,o),h=o&&a&&o.state.status===v.default.ACTIVE&&a.status!==d.SCENARIO_STATUS.APPROVED&&(null!==a.source_scenario_id||"IMPACT"===a.origin),E=a&&o&&(s&&e.role!==m.default.READONLY||p)&&!a.is_archived&&a.status!==d.SCENARIO_STATUS.APPROVED&&a.status!==d.SCENARIO_STATUS.PREV_APPROVED&&!r&&(o.state.status!==v.default.ACTIVE||h)&&o.state.status!==v.default.COMPLETED,g=a&&o&&p&&!a.is_archived&&a.status!==d.SCENARIO_STATUS.APPROVED&&a.status!==d.SCENARIO_STATUS.PREV_APPROVED&&a.nerve_job_status!==f.default.RUNNING&&a.nerve_job_status!==f.default.QUEUED&&(o.state.status!==v.default.ACTIVE||h)&&o.state.status!==v.default.COMPLETED,y=a&&o&&a.status!==d.SCENARIO_STATUS.APPROVED&&a.status!==d.SCENARIO_STATUS.PREV_APPROVED&&a.nerve_job_status!==f.default.RUNNING&&a.nerve_job_status!==f.default.QUEUED&&o.state.status!==v.default.ACTIVE&&o.state.status!==v.default.COMPLETED||a&&o&&!a.is_archived&&a.status!==d.SCENARIO_STATUS.APPROVED&&a.status!==d.SCENARIO_STATUS.PREV_APPROVED&&s&&a.nerve_job_status!==f.default.RUNNING&&a.nerve_job_status!==f.default.QUEUED&&o.state.status!==v.default.ACTIVE&&o.state.status!==v.default.COMPLETED,S=o&&a&&o.state.status===v.default.ACTIVE&&a.status===d.SCENARIO_STATUS.APPROVED,b=a&&o&&(s||a.state.isShared||e.role===m.default.ADMIN)&&(o.state.status!==v.default.ACTIVE||h||S)&&!a.isImpact&&o.state.status!==v.default.COMPLETED,C=o&&a&&o.is_imported&&!a.isImpact,O=o&&o.state.status===v.default.ACTIVE,T=o&&!o.is_imported,R=!O&&!T,w=(0,u.default)(o,"state.status")===v.default.COMPLETED;return new _(E,g,y,h,r,S,b,C,O,c,p,e.role,T,R,w,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.AccessList=void 0,t.isOptimizing=l,t.default=o;var s=a(11),u=n(s),d=a(14),c=a(47),f=n(c),p=a(182),m=n(p),h=a(17),v=n(h),_=t.AccessList=function e(t,a,n,l,i,o,s,u,d,c,f,p,h,v,_,E){switch(r(this,e),this.optimizingStatus=i||!1,this.isAdjusted=l||!1,this.isActiveApprovedPlan=o||!1,this.isTracking=d||!1,this.isUserHasScenarioFullControl=c||!1,this.isUserHasStudyFullControl=f||!1,this.isCompleted=_,p){case m.default.ADMIN:this.isPlaygroundUser=!1,this.isAdmin=!0,this.isRegularUser=!1,this.isReadonlyUser=!1,this.userCanViewTrackingStudy=!0,this.userCanViewPlanningStudy=!0,this.userCanViewPlaygroundStudy=!0,this.userCanCreateNewScenario=!_&&(h||v),this.userCanCreateNewPlayGroundScenario=!0,this.userCanCreateNewPlannedScenario=!_,this.isDuplicateAvailable=s||!1,this.isEditable=t||!1,this.isApprovable=a||!1,this.canBeOptimised=n||!1,this.isShareAvailable=u||!1,this.canManageSites=!0;break;case m.default.USER:this.isPlaygroundUser=!1,this.isAdmin=!1,this.isRegularUser=!0,this.isReadonlyUser=!1,this.userCanViewTrackingStudy=!0,this.userCanViewPlanningStudy=!0,this.userCanViewPlaygroundStudy=!0,this.userCanCreateNewScenario=!_&&(h||v),this.userCanCreateNewPlayGroundScenario=!0,this.userCanCreateNewPlannedScenario=!_,this.isDuplicateAvailable=s||!1,this.isEditable=t&&E,this.isApprovable=a,this.canBeOptimised=n&&E,this.isShareAvailable=u&&E,this.canManageSites=!1;break;case m.default.READONLY:this.isPlaygroundUser=!1,this.isAdmin=!1,this.isRegularUser=!1,this.isReadonlyUser=!0,this.userCanViewTrackingStudy=!0,this.userCanViewPlanningStudy=!0,this.userCanViewPlaygroundStudy=!1,this.userCanCreateNewScenario=!1,this.userCanCreateNewPlayGroundScenario=!1,this.userCanCreateNewPlannedScenario=!1,this.isDuplicateAvailable=!1,this.isEditable=!1,this.isApprovable=!1,this.canBeOptimised=!1,this.isShareAvailable=!1,this.canManageSites=!1;break;case m.default.COUNTRY_USER:this.isPlaygroundUser=!1,this.isAdmin=!1,this.isRegularUser=!1,this.isReadonlyUser=!0,this.userCanViewTrackingStudy=!0,this.userCanViewPlanningStudy=!0,this.userCanViewPlaygroundStudy=!1,this.userCanCreateNewScenario=!1,this.userCanCreateNewPlayGroundScenario=!1,this.userCanCreateNewPlannedScenario=!1,this.isDuplicateAvailable=!1,this.isEditable=!1,this.isApprovable=!1,this.canBeOptimised=!1,this.isShareAvailable=!1,this.canManageSites=!0;break;default:this.isPlaygroundUser=!0,this.isAdmin=!1,this.isRegularUser=!1,this.isReadonlyUser=!1,this.userCanViewTrackingStudy=!0,this.userCanViewPlanningStudy=!0,this.userCanViewPlaygroundStudy=!0,this.userCanCreateNewScenario=!_&&h,this.userCanCreateNewPlayGroundScenario=!0,this.userCanCreateNewPlannedScenario=!1,this.isDuplicateAvailable=h&&s,this.isEditable=h&&E&&t,this.isApprovable=h&&a&&E,this.canBeOptimised=h&&n,this.isShareAvailable=h&&u&&E,this.canManageSites=!1}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCENARIO_EVENT_TYPES={SCREENING_RANDOMIZATION_PAUSE_BY_DATE:"SCREENING_RANDOMIZATION_PAUSE_BY_DATE",SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS:"SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS",SCREENING_RATE_BY_DATE:"SCREENING_RATE_BY_DATE",SCREENING_FAILURE_BY_DATE:"SCREENING_FAILURE_BY_DATE"},t.EVENT_STATE={NEW:"NEW",UPDATED:"UPDATED",DELETED:"DELETED"},t.OPERATION_TYPE={DECREASE_BY:"DECREASE_BY",INCREASE_BY:"INCREASE_BY"},t.EVENT_STATUS={ACTIVE:"ACTIVE",PENDING:"PENDING",COMPLETED:"COMPLETED"}},,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t,a,n,l){var i=e,s={method:t||"GET"},d=a?Object.assign({},a):{};return d.req_timestamp=(new Date).getTime(),"GET"===s.method?(i=Object.keys(d).reduce(function(e,t){return Object.prototype.hasOwnProperty.call(d,t)?""+e+t+"="+encodeURIComponent(d[t])+"&":e},i+"?"),i=i.substring(0,i.length-1),s.headers={Accept:"application/json","Content-Type":"application/json"}):d instanceof FormData?s={method:"post",body:d}:(s.body=JSON.stringify(d),s.headers={Accept:"application/json","Content-Type":"application/json"}),l&&(s=o({},s,l)),n&&(s.headers=o({},s.headers,r({},"OAM_REMOTE_USER",n))),s.credentials="same-origin",fetch(i,s).then(function(e){var t=e.headers.get("Content-Type");if(e.ok&&200===e.status)return/text\/plain/.test(t)?e.text():/application\/json/.test(t)?e.json():e.body;var a={status:e.status||500,message:e.statusText,statusText:e.statusText,response:e};return/application\/json/.test(t)?e.json().then(function(t){return a.message=t.message||e.statusText,Promise.resolve({response:o({},t,{statusText:e.statusText}),error:a})}):Promise.reject(a)}).then(function(e){if(e.error){var t={status:e.error.status,statusText:e.error.statusText,message:e.error.message,response:e.response};return Promise.reject(t)}return(0,u.default)(e)?e:{value:e}}).catch(function(e){if(void 0===e.status&&e.name&&"AbortError"!==e.name)return Promise.reject({status:302,message:"",statusText:""});var t=e;return e.status&&5===e.status.toString()[0]&&(t.message="Sorry, server is unavailable. Please, try again later"),Promise.reject(t)})}function i(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n=arguments[3],r=arguments[4],i={};return"string"==typeof t?i.type=t:i=o({},t),function(t,s){t(o({},i,{type:"REQUEST_"+i.type}));var u=s(),p=u.auth&&u.auth.user&&u.auth.user.id;return l(e,a,n,p,r).then(function(e){return t(o({},i,{type:"SUCCESS_"+i.type,payload:e})),e},function(e){return 401===e.status?(t((0,d.SignOut)()),t((0,c.default)())):500===e.status?t((0,f.internalServerError)("Internal Server Error!")):404===e.status?t((0,f.notFoundError)(e.message||"Not Found Error")):403===e.status?t((0,f.forbiddenError)(e.message||"Forbidden Error")):503===e.status?t((0,f.ODAError)(e.message||"ODA API Server Error")):302===e.status?t((0,f.sessionExpired)()):400===e.status&&t((0,f.badRequestError)(e.message||"Request error")),t(o({},i,{type:"ERROR_"+i.type,payload:e})),Promise.reject(e)})}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.fetchApiNative=l,t.fetchApi=i,a(2478),a(817);var s=a(1937),u=n(s),d=a(492),c=n(d),f=a(144)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return"/api/v1"+e};t.AUTO_LOGIN_STATUS=n("/autologin"),t.PLATFORM_STUDIES=n("/platform/studies"),t.CHECK_UPDATES=n("/studies/checkJobStatus"),t.PLATFORM_STUDIES_IMPORT=n("/platform/studies/import"),t.PLATFORM_REGIONS=n("/platform/regions"),t.HISTORICAL_STUDIES=n("/historical/:studyId"),t.HISTORICAL_DATA=n("/historical/:studyId/data"),t.COUNTRY_SITES=n("/studies/:studyId/scenarios/:scenarioId/sites/byCountry/:countryId"),t.SEARCH_FOR_SITES=n("/studies/:studyId/scenarios/:scenarioId/sites/:countryId/search"),t.UPDATE_COUNTRIES_SITES=n("/studies/:studyId/scenarios/:scenarioId/sites"),t.COUNTRY_SITE=n("/studies/:studyId/scenarios/:scenarioId/sites/:siteId"),t.GET_EDITABLE_SITES_COUNTRIES=n("/studies/:studyId/scenarios/:scenarioId/editable-countries"),t.COUNTRY_MANAGER=n("/studies/:studyId/scenarios/:scenarioId/country/:countryId/country-site-manager"),t.CSMS=n("/studies/:studyId/csms"),t.SITE_EDIT_REASON=n("/site-edit-reason"),t.CSM_SCENARIOS=n("/studies/:studyId/csms/:userId/scenarios"),t.CHANGE_COUNTRY_SITES_STATUS=n("/override/:overrideId/sites/countryApproveStatus"),t.CHANGE_COUNTRIES_SITES_STATUS=n("/studies/:studyId/scenarios/:scenarioId/sites-status"),t.SCENARIO_SITE_SELECTION_STATUS=n("/studies/:studyId/scenarios/:scenarioId/scenario-sites-selection-status"),t.STUDY_OPTIONS=n("/platform/study/options"),t.STUDY_BY_ID=n("/studies/:id"),t.PLAIN_STUDY_BY_ID=n("/studies/:id/plain"),t.STUDY_SCENARIOS_DETAILS=n("/studies/:id/scenarios-details"),t.FETCH_ACTUALS_DATA_BY_COUNTRIES_IDS=n("/studies/:id/actuals"),t.FETCH_AGGREGATED_ACTUALS_DATA_BY_COUNTRIES_IDS=n("/studies/:id/aggregated-actuals"),t.DELETE_STUDY=n("/studies/:id"),t.CREATE_STUDY=n("/studies"),t.UPDATE_STUDY=n("/studies/:id/edit"),t.UPDATE_STUDY_OWNER=n("/studies/:studyId/updateOwner"),t.CREATE_STUDY_AND_SCENARIO=n("/studies/new/scenarios/new"),t.UNKNOWN_STUDIES=n("/unknown-studies"),t.GET_STUDY_SCENARIOS=n("/studies/:studyId/scenarios"),t.STUDY_SCENARIOS_LIST=n("/studies/:studyId/scenarios-list"),t.DUPLICATE_SCENARIO=n("/scenarios/:scenarioId/duplicate"),t.DUPLICATE_IMPACT_SCENARIO=n("/studies/:studyId/duplicate/impact"),t.CREATE_ADJUSTMENT_SCENARIO=n("/scenarios/:scenarioId/createAdjustment"),t.GET_STUDIES=n("/studies"),t.CREATE_NEW_SCENARIO=n("/studies/:studyId/scenarios/new"),t.UPDATE_SCENARIO=n("/studies/:studyId/scenarios/:scenarioId"),t.REMOVE_SCENARIO=n("/scenarios/:scenarioId"),t.OPTIMISE_SCENARIO=n("/oda/scenarios/:scenarioId"),t.ARCHIVE_SCENARIO=n("/scenarios/:scenarioId/archive"),t.APPROVE_SCENARIO=n("/studies/:studyId/scenarios/:scenarioId/approve"),t.CREATE_APPROVED_SCENARIO_SNAPSHOT=n("/studies/:studyId/scenarios/:scenarioId/approved-snapshot"),t.CONFIRM_ACTUAL_STUDY_PARAMS=n("/studies/:studyId/scenarios/:scenarioId/confirm-study-params"),t.ALIGN_STUDY_PARAMS_WITH_IMPACT=n("/studies/:studyId/align-study-params"),t.GET_SCENARIO=n("/studies/:studyId/scenarios/:scenarioId"),t.GET_SCENARIO_WITH_LOCATIONS=n("/scenarios/:id/edit_locations"),t.GET_IMPACT_SCENARIO=n("/scenarios/impact/:id"),t.SCENARIO_COUNTRY=n("/scenarios/:id/country/"),t.COHORT_COUNTRY=n("/scenarios/:scenarioId/cohorts/:cohortId/country/"),t.SCENARIO_REGION=n("/scenarios/:id/region/"),t.SAVE_PLAYGROUND=n("/scenarios/:id/override/batchUpdate"),t.SAVE_COHORT=n("/scenarios/:scenarioId/cohorts/:cohortId/override/batchUpdate"),t.VALIDATE_STUDY_UNIQUE=n("/studies/validate_study_unique"),t.VALIDATE_SCENARIO_UNIQUE=n("/studies/:studyId/scenarios/validate_scenario_unique"),t.GET_PARAMETERS_BY_COUNTRY_SCENARIO=n("/studies/:studyId/byScenarioCountry/:scenarioId/:countryId/:regionName"),t.GET_PARAMETERS_BY_COUNTRY_COHORT=n("/studies/:studyId/byCohortCountry/:cohortId/:countryId/:regionName"),t.GET_AVAILABLE_USERS=n("/users"),t.GET_COUNTRY_USERS=n("/countryUsers"),t.SET_COUNTRY_USER=n("//countryUser/addCountry"),t.UNLINK_COUNTRY_USER=n("//countryUser/removeCountry"),t.SHARE_SCENARIO=n("/studies/:studyId/scenarios/:scenarioId/share"),t.SCENARIO_NOTE=n("/scenarios/:scenarioId/notes"),t.IMPACT_SCENARIO_NOTE=n("/scenarios/impact/:impactScenarioId/notes"),t.SCENARIO_EVENTS=n("/study/:studyId/scenarios/:scenarioId/events"),t.APPLY_SCENARIO_EVENTS=n("/scenarios/:scenarioId/events/apply_changes"),t.APPLY_DISABLE_EVENT_API=n("/scenarios/:scenarioId/event/:eventId/:isDisabled"),t.SCENARIO_COHORT_EVENTS=n("/study/:studyId/scenarios/:scenarioId/cohort/:cohortId/events"),t.APPLY_SCENARIO_COHORT_EVENTS=n("/scenarios/:scenarioId/cohort/:cohortId/events/apply_changes"),t.USER_DETAILS=n("/user-details/:userId"),t.GET_USER=n("/getUser"),t.LOGOUT=n("/logout"),t.APPLICATION_METADATA=n("/app/metadata"),t.CONTEXT_HELP_DATA=n("/context-help"),t.GET_STUDY_SCENARIOS_COUNT=n("/scenarios-count/"),t.SITES_HEALTH=n("/sites-health")},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WARNING="Warning",t.MULTI_COLUMN_EDIT="Multi column edit",t.REMOVE_USER_CONSTRAINTS="Remove user constraints",t.MISMATCHED_SCENARIO_DETAILS="Mismatched scenario details",t.MISMATCHED_STUDY_DETAILS="Mismatched study details",t.CLOSE="Close",t.CANCEL="Cancel",t.REMOVE="Remove",t.CONFIRM="Confirm",t.ADD="Add",t.CONTINUE="Continue",t.YES_CONTINUE="Yes, continue",t.OK="OK",t.OPTIMIZE="Optimize",t.ALIGN_SCENARIO_WITH_STUDY_PARAMETERS="Align scenario with study parameters",t.ALIGN_AUTOMATICALLY="Align automatically",t.ALIGN_IN_EDITOR="Align in editor",t.CORRECT_INVALID_DATA="Please correct or remove the invalid data.",t.UNLOCK_USER_CONSTRAINTS_BY_COLUMN="User constraints will be removed from every selected row\n in this view.",t.APPLY_MULTIEDIT_DATA="These values will be applied to every selected country row in this view.",t.OPTIMIZE_WARNING="Optimizing this scenario will give you new forecasts in both the table and chart.\n      Footprint optimizer will keep all your changes and apply these constraints to the forecasts.",t.REMOVE_SCENARIO_WARNING="This scenario will be permanently deleted.",t.CHANGING_HISTORIC_DATA="You are changing Historic Data",t.CONFIRM_TO_CONTINUE="Are you sure you want to continue?",t.CONFIRM_TO_APPROVE="Are you sure you want to approve this scenario?",t.MISSED_THINGS="Some things you might have missed:",t.DONT_HAVE_ACCESS_TO_VIEW_PAGE="You do not have access to view this page",t.SELECTED_SITES="Selected sites",t.VIEW_NOT_SELECTED_SITES="Other internal sites",t.VIEW_EXTERNAL_SITES="Other new sites",t.VIEW_RAW_SITES="Other, not recommended",t.OTHER_INTERNAL_SITES_EXP="Sites with Novartis experience (historical data available) -\n currently not selected in this scenario",t.OTHER_NEW_SITES_EXP="Sites without Novartis experience (external sites, no historical data available) -\n currently not selected in this scenario",t.OTHER_SITES_EXP="Not recommended sites due to insufficient data"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={RUNNING:"running",QUEUED:"queued",FAILED:"failed",FINISHED:"finished"};t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getScenarioFullData=t.getActiveCountry=t.getScenarioNotesFromStore=t.getPlatformRegionsList=t.getPlatformRegionsFromStore=t.getScenarioCountries=t.getScenarioData=t.getScenarioFromStore=t.getStudyData=void 0;var n=a(43),r=a(7),l=[],i=[],o=[],s=function(e,t){return e.study[+t.params.id]?e.study[+t.params.id]:null},u=(t.getStudyData=(0,n.createSelector)(s,function(e){return e}),t.getScenarioFromStore=function(e,t){return e.scenarios[t.params.scenarioId]||null}),d=t.getScenarioData=(0,n.createSelector)(u,function(e){return e}),c=t.getScenarioCountries=(0,n.createSelector)(d,function(e){return e?e.countries:i}),f=t.getPlatformRegionsFromStore=function(e){return e.platform.regions||l},p=(t.getPlatformRegionsList=(0,n.createSelector)(f,function(e){return e}),t.getScenarioNotesFromStore=function(e,t){return e.notes[t]||o},function(e,t){return t.params.countryId});t.getActiveCountry=(0,n.createSelector)([c,p],function(e,t){return e.find(function(e){return+e.platform_country_id==+t})}),t.getScenarioFullData=(0,n.createSelector)([c,d],function(e,t){return(0,r.getScenarioCalculatedData)(e,t).filter(function(e){return!e.onlyActuals&&"Unspecified country"!==e.location})})},function(e,t,a){"use strict";function n(e,t){var a="ASC"===t;return function(t,n){return t[e]<n[e]?a?-1:1:t[e]>n[e]?a?1:-1:0}}function r(e){return e>999?(e/1e3).toFixed(1)+"k":e}function l(e){return 0===["/compare","/new","/edit","/historical","/events"].filter(function(t){return-1!==e.indexOf(t)}).length}function i(){var e=!1;try{if(Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject)return!1;var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(t){return e}return e}function o(e){return"number"==typeof e}function s(e){var t=function(e){return e.split("").map(function(e){return e+String.fromCharCode(173)}).join("")};return Array.isArray(e)?e.map(function(e){return"string"==typeof e?t(e):e}):t(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,t.kFormatter=r,t.isDisplayBrand=l,t.isSupportPassive=i,t.isNumber=o,t.skypeToCallPrevent=s},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(495),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CellGroup=t.textSortTable=t.SortTypes=t.SortHeaderCell=t.Row=t.Cell=t.Column=void 0;var r=a(915),l=n(r),i=a(914),o=n(i),s=a(259),u=n(s),d=a(507),c=n(d),f=a(913),p=n(f),m=a(916),h=n(m);t.default=l.default,t.Column=o.default,t.Cell=u.default,t.Row=c.default,t.SortHeaderCell=h.default,t.SortTypes=m.SortTypes,t.textSortTable=m.textSortTable,t.CellGroup=p.default},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(839),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getApprovedScenario=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(697),o=n(i),s=a(11),u=n(s),d=a(43),c=a(103),f=a(47),p=n(f),m=a(14),h=a(17),v=n(h),_={preparedScenarios:[],approvedScenarios:[],optimisingScenarios:[],errorScenarios:[],showScenarioWarningColumn:!1},E=(0,d.createSelector)(c.getStudyData,function(e){if(!e)return _;var t=!1,a=e.scenarios.sort(function(e,t){return e.updated>t.updated?-1:e.updated<t.updated?1:0}).map(function(a){(0,u.default)(a,"studyParamsWarning.showStudyParamsWarning")&&(t=!0);var n=null!==a.source_scenario_id,r=a.status===m.SCENARIO_STATUS.APPROVED,i=(0,u.default)(a,"cohorts",[]).length>0,o=void 0,s=void 0;if(n){var d=e.scenarios.find(function(e){return e.status===m.SCENARIO_STATUS.APPROVED});o=(0,u.default)(d,"fullData[0].lpft"),s="Compared to P/LPFT"}else r&&e.state.status===v.default.ACTIVE&&!i?(o=(0,u.default)(a,"fullData[0].actual_f_lpft"),s="Compared to F/LPFT"):r&&e.state.status===v.default.ACTIVE&&i?(o=null,s=null):(o=a.end_date,s="Compared to T/LPFT");return l({},a,{targetDate:o,tooltipData:s})}),n=a.filter(function(e){return e.status===m.SCENARIO_STATUS.APPROVED}),i=(0,o.default)(a,n),s=i.filter(function(e){return e.nerve_job_status===p.default.QUEUED||e.nerve_job_status===p.default.RUNNING}),d=i.filter(function(e){return e.nerve_job_status===p.default.FAILED});return{preparedScenarios:[].concat(r(d),r(s),r((0,o.default)((0,o.default)(i,s),d))),approvedScenarios:n,optimisingScenarios:s,errorScenarios:d,showScenarioWarningColumn:t}});t.getApprovedScenario=(0,d.createSelector)(c.getStudyData,function(e){return e.scenarios.filter(function(e){return e.status===m.SCENARIO_STATUS.APPROVED})[0]}),t.default=E},,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(){return function(e){return e((0,te.fetchApi)(re.SITES_HEALTH,{type:ae.GET_SITES_HEALTH}))}}function i(e,t,a){return function(n){return n((0,te.fetchApi)(re.COUNTRY_SITES.replace(/:studyId/,e).replace(/:scenarioId/,t).replace(/:countryId/,a),{type:ae.GET_COUNTRY_SITES,scenarioId:t,countryId:a}))}}function o(e,t,a){return function(n){return n((0,te.fetchApi)(re.COUNTRY_SITE.replace(/:studyId/,e).replace(/:scenarioId/,t).replace(/:siteId/,a),{type:ae.GET_COUNTRY_SITE,scenarioId:t,siteId:a}))}}function s(e,t,a,n){return{type:ae.SORT_SITES_DATA,columnName:e,sortDirection:t,countryId:a,scenarioId:n}}function u(e){return{type:ae.SET_SITES_FILTER,payload:e}}function d(e){return{type:ae.SET_STUDIES_FILTER,payload:e}}function c(e){return{type:ae.SET_METRICS_FILTER,payload:e}}function f(){return{type:ae.HANDLE_SITES_SORT}}function p(e){return{type:ae.TOGGLE_TABLE_VIEW,payload:e}}function m(){return{type:ae.TOGGLE_INTERNAL_SITES_VIEW}}function h(){return{type:ae.TOGGLE_EXTERNAL_SITES_VIEW}}function v(){return{type:ae.TOGGLE_INITIAL_SITES_SELECTION}}function _(e){return{type:ae.RESET_SITES,scenarioId:e}}function E(e,t,a,n,r,l){return{type:ae.SITE_ACTION,status:n,countryId:t,scenarioId:e,id:a,reason_id:r,comment:l}}function g(e,t,a,n){return function(l,i){var o=(0,Q.default)(i(),"sites["+t+"]",[]),s=[].concat.apply([],[].concat(r(Object.values(o)))),u=s.reduce(function(e,t){return(0,Q.default)(t,"state.dirty",!1)&&e.push((0,ee.default)(t,["study_id","scenario_id","country_id","investigator_center_id","state"])),e},[]);return l((0,te.fetchApi)(re.UPDATE_COUNTRIES_SITES.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:ae.UPDATE_SITES,studyId:e,scenarioId:t,countryId:a,skipDataRefresh:n,meta:{notification:{trigger:ae.SUCCESS,message:"Successfully updated sites data"}}},"PUT",{sites:u}))}}function y(e){return{type:ae.UNDO_SITE_ACTION,scenarioId:e}}function S(e){return{type:ae.REDO_SITE_ACTION,scenarioId:e}}function b(e,t){return function(a){return a((0,te.fetchApi)(re.GET_EDITABLE_SITES_COUNTRIES.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:ae.GET_EDITABLE_SITES_COUNTRIES,studyId:e,scenarioId:t},"GET"))}}function C(e,t,a,n,r){return function(l){return l((0,te.fetchApi)(re.CHANGE_COUNTRY_SITES_STATUS.replace(/:overrideId/,n),{type:ae.UPDATE_SCENARIO,studyId:e,scenarioId:t,refreshScenarioCache:!0},"PUT",{status:r,studyId:e,scenarioId:t,countryId:a}))}}function O(e,t,a){return function(n){return n((0,te.fetchApi)(re.CHANGE_COUNTRIES_SITES_STATUS.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:ae.UPDATE_SCENARIO,studyId:e,scenarioId:t,refreshScenarioCache:!0},"PUT",{status:a}))}}function T(e){return{type:ae.SET_SITE_METRICS_FILTER,payload:e}}function R(e){return{type:ae.SET_SITE_MILESTONES_FILTER,payload:e}}function w(e,t,a){return function(n){return n((0,te.fetchApi)(re.COUNTRY_MANAGER.replace(/:studyId/,e).replace(/:scenarioId/,t).replace(/:countryId/,a),{type:ae.GET_COUNTRY_MANAGER,scenarioId:t,countryId:a}))}}function A(e){return function(t){return t((0,te.fetchApi)(re.CSMS.replace(/:studyId/,e),{type:ae.GET_CSMS,studyId:e}))}}function I(e,t){return function(a){return a((0,te.fetchApi)(re.CSM_SCENARIOS.replace(/:studyId/,e).replace(/:userId/,t),{type:ae.GET_CSM_SCENARIOS,studyId:e,userId:t}))}}function N(e){return{type:"CSM_USER_SELECT",userId:e}}function D(){return{type:"TOGGLE_SITES_FILTER_PANEL"}}function P(e){return{type:"TOGGLE_SITES_FILTERED_DATA_VIEW",payload:e}}function L(e,t,a){return{type:"[SITES.MULTI-EDIT] SET_SITES_MULTIEDIT_VIEW",scenarioId:e,countryId:t,payload:a}}function M(e,t,a,n){return{type:"[SITES.MULTI-EDIT] SELECT_ALL_SITES",scenarioId:e,countryId:t,sitesIds:a,payload:n}}function x(e,t,a){return{type:"[SITES.MULTI-EDIT] SELECT_SITE",scenarioId:e,countryId:t,siteId:a}}function k(e,t,a,n){return{type:"[SITES.MULTI-EDIT] SUBMIT_MULTIEDIT",scenarioId:e,countryId:t,status:a,reason_id:n}}function j(){return function(e){return e((0,te.fetchApi)(re.SITE_EDIT_REASON,{type:ae.SITE_EDIT_REASON}))}}function F(e,t,a,n,r){return{type:ae.SITE_ACTION,scenarioId:e,countryId:t,id:a,field:n,value:r}}function U(){return{type:"TOGGLE_VIEW_FORECAST_AS_DECILE"}}function V(e,t,a){return{type:ae.EXPORT_COUNTRY_SITES_SELECTION,studyId:e,scenarioId:t,countryId:a}}function B(){return{type:ae.TOGGLE_RAW_TABLE_VIEW_STATE}}function H(){return{type:ae.TOGGLE_OTHER_TABLE_VIEW_STATE}}function G(){return{type:ae.TOGGLE_EXTERNAL_TABLE_VIEW_STATE}}function Y(){return{type:ae.TOGGLE_SELECTED_TABLE_VIEW_STATE}}function q(e){return{type:ae.SEARCH_SITES_VALUE_ACTION,payload:e}}function z(e,t,a,n,r,l){var i=re.SEARCH_FOR_SITES.replace(":studyId",e).replace(":scenarioId",t).replace(":countryId",a);return function(e,o){var s=o(),u=s.sites[t][a];return e((0,te.fetchApi)(i,{type:ae.SEARCH_FOR_SITES,dataType:n,existingSites:u,requestId:l},"GET",{pattern:r,dataType:n}))}}function W(e,t){return{type:ae.SET_ACTIVE_SITES_PAGE,section:e,page:t}}function K(e){return{type:ae.SET_ACTIVE_PAGES,payload:e}}function X(e,t,a){return{type:ae.ADD_SELECTED_SITE,scenarioId:e,countryId:t,payload:a}}function Z(e,t,a){return function(n){return n((0,te.fetchApi)(re.SCENARIO_SITE_SELECTION_STATUS.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:ae.SCENARIO_SITE_SELECTION_STATUS,studyId:e,scenarioId:t},"POST",{status:a}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.getSitesHealth=l,t.default=i,t.getCountrySite=o,t.sortData=s,t.setSitesFilter=u,t.setStudiesFilter=d,t.setMetricsFilter=c,t.handleSort=f,t.toggleTableViewMode=p,t.toggleInternalSitesView=m,t.toggleExternalSitesView=h,t.toggleInitialSelection=v,t.resetSites=_,t.onSiteAction=E,t.updateSites=g,t.undoSiteAction=y,t.redoSiteAction=S,t.getEditableCountries=b,t.onChangeCountrySitesStatus=C,t.onChangeCountriesSitesStatus=O,t.setSiteMetricsFilter=T,t.setSiteMilestonesFilter=R,t.getCountryManager=w,t.getCsmsByStudy=A,t.getCsmsScenariosData=I,t.onCsmUserSelect=N,t.toggleFilterPanel=D,t.toggleShowFilteredDataView=P,t.setSitesMultieditView=L,t.onSelectAllSitesAction=M,t.onSelectSiteAction=x,t.onSubmitMultieditAction=k,t.getSiteEditReasonsAction=j,t.updateSiteValue=F,t.toggleViewForecastAsDecileAction=U,t.exportCountrySitesSelection=V,t.setRawTableState=B,t.setOtherTableState=H,t.setExternalTableState=G,t.setSelectedTableState=Y,t.searchSitesValueAction=q,t.searchForSitesAction=z,t.setActiveSitesPage=W,t.setActivePages=K,t.addSelectedSiteAction=X,t.updateScenarioSiteSelection=Z;var J=a(11),Q=n(J),$=a(65),ee=n($),te=a(44),ae=a(15),ne=a(45),re=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(ne)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1027),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var a=(0,de.getStudyData)(e,t),n=(0,b.default)(a,["impactStudyParams","fp","target_lpft","therapeutic_area","indication","target_num_patients","fpfv_fpft","phase"]),r=_e(n),l=r.invalidFields;return u({id:+t.params.id,study:a,activeUser:e.auth.user,invalidFields:l},(0,fe.default)(e,t),{metadata:Ee(e.auth.user,a)})}Object.defineProperty(t,"__esModule",{value:!0}),t.COLLECTION_TYPES=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),m=n(p),h=a(10),v=n(h),_=a(8),E=a(18),g=a(11),y=n(g),S=a(65),b=n(S),C=a(50),O=n(C),T=a(84),R=n(T),w=a(22),A=a(257),I=n(A),N=a(1006),D=n(N),P=a(1013),L=n(P),M=a(525),x=n(M),k=a(1196),j=n(k),F=a(1182),U=n(F),V=a(1102),B=n(V),H=a(101),G=n(H),Y=a(531),q=n(Y),z=a(1195),W=n(z),K=a(1194),X=n(K),Z=a(78),J=n(Z),Q=a(32),$=a(37),ee=a(559),te=a(40),ae=n(te),ne=a(362),re=a(117),le=a(88),ie=a(28),oe=a(36),se=a(824),ue=n(se),de=a(103),ce=a(55),fe=n(ce),pe=a(14),me=a(17),he=n(me);a(2414);var ve=t.COLLECTION_TYPES={APPROVED:"approved",PREPARED:"prepared"},_e=(0,R.default)(le.getMisalignedDetails,function(e,t){return(0,O.default)(e,t)}),Ee=(0,R.default)(ae.default),ge=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.unarchiveScenario=function(e){a.props.unarchiveScenario(a.props.id,e)},a.handleScenarioParamsWarningClose=function(){a.setState({isScenarioParamsWarningShown:!1,selectedScenario:null})},a.handleWarningIconClick=function(e){a.setState({isScenarioParamsWarningShown:!0,selectedScenario:e})},a.compareScenariosLink=function(){var e="";return a.state.markedScenarios.forEach(function(t){e+="scenario="+t+"&"}),e},a.navigateViewCsmsList=function(){a.props.push("/studies/"+a.props.id+"/csms")},a.handleRowClick=function(e){e.cohorts&&e.cohorts.length?a.props.navigateToScenarioCohortsViewer(e.study_id,e.id):e.isImpact?a.props.navigateToImpactScenario(e.study_id):a.props.navigateToScenarioViewer(e.study_id,e.id)},a.handleRowClickApproved=function(e,t){var n=a.props.approvedScenarios,r=u({},n[t]);r.calculating||a.handleRowClick(r)},a.handleRowClickPrepared=function(e,t){var n=a.props.preparedScenarios,r=u({},n[t]);r.calculating||a.handleRowClick(r)},a.state={isDuplicateScenarioDialogShown:!1,isShareScenarioDialogShown:!1,selectedScenario:null,markedScenarios:[],apiError:!1,isChangeOwnerDialogShown:!1,isStudyChangedDialogClose:!1,isRemoveDialogShown:!1},a.handleDuplicateScenarioClick=a.handleDuplicateScenarioClick.bind(a),a.handleDuplicateScenarioDialogClose=a.handleDuplicateScenarioDialogClose.bind(a),a.handleDuplicateScenarioDialogSubmit=a.handleDuplicateScenarioDialogSubmit.bind(a),a.handleScenarioCheckboxClick=a.handleScenarioCheckboxClick.bind(a),a.handleShareScenarioClick=a.handleShareScenarioClick.bind(a),a.handleShareScenarioDialogClose=a.handleShareScenarioDialogClose.bind(a),a.archiveScenario=a.archiveScenario.bind(a),a.handleChangeOwnerClick=a.handleChangeOwnerClick.bind(a),a.handleEditStudyLevelClick=a.handleEditStudyLevelClick.bind(a),a.handleChangeOwnerDialogClose=a.handleChangeOwnerDialogClose.bind(a),a.onStudyChangedDialogClose=a.onStudyChangedDialogClose.bind(a),a.handleRemoveScenario=a.handleRemoveScenario.bind(a),a.handleRemoveScenarioDialogClose=a.handleRemoveScenarioDialogClose.bind(a),a.handleRemoveScenarioSubmit=a.handleRemoveScenarioSubmit.bind(a),a}return o(t,e),d(t,[{key:"componentDidMount",value:function(){this.controller=new AbortController;var e=this.controller.signal;0===this.props.availableUsers.length&&this.props.getAvailableUsers(),this.props.studies||this.props.getStudies(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.study;t&&!1===(0,y.default)(t,"state",{}).isOwner&&!1===(0,y.default)(t,"is_imported")&&this.props.replace("/")}},{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"onStudyChangedDialogClose",value:function(){this.setState({isStudyChangedDialogClose:!0}),(0,ee.hideDialogStudyChanged)(this.props.study.study_id,this.props.activeUser.id)}},{key:"handleDuplicateScenarioClick",value:function(e){var t=this.props.study,a=(0,y.default)(t,"scenarios",[]).find(function(t){return t.id===e});a&&this.setState({isDuplicateScenarioDialogShown:!0,selectedScenario:a})}},{key:"handleShareScenarioClick",value:function(e){var t=this.props.study,a=(0,y.default)(t,"scenarios",[]).find(function(t){return t.id===e});a&&this.setState({isShareScenarioDialogShown:!0,selectedScenario:a})}},{key:"handleShareScenarioDialogClose",value:function(){this.setState({isShareScenarioDialogShown:!1,selectedScenario:null})}},{key:"handleDuplicateScenarioDialogClose",value:function(){this.setState({isDuplicateScenarioDialogShown:!1,selectedScenario:null})}},{key:"handleRemoveScenario",value:function(e){var t=this.props.study,a=(0,y.default)(t,"scenarios",[]).find(function(t){return t.id===e});a&&this.setState({isRemoveDialogShown:!0,selectedScenario:a})}},{key:"handleRemoveScenarioDialogClose",value:function(){this.setState({isRemoveDialogShown:!1,selectedScenario:null})}},{key:"handleRemoveScenarioSubmit",value:function(){this.props.removeScenario(this.state.selectedScenario.study_id,this.state.selectedScenario.id),this.handleRemoveScenarioDialogClose()}},{key:"handleDuplicateScenarioDialogSubmit",value:function(e,t,a,n,r){var l=this,i=this.state.selectedScenario,o=this.props.study,s=i.cohorts.length,u=(i&&i.status===pe.SCENARIO_STATUS.APPROVED||i&&i.status===pe.SCENARIO_STATUS.PREV_APPROVED)&&o.state.status===he.default.ACTIVE;new Promise(function(d){if(i.isImpact){var c=(0,ne.prepareImpactScenarioData)(i);return c.name=e,d(l.props.duplicateImpactScenario(o.id,c))}if(r){var f=void 0;return s&&(f=(0,re.getCohortsFpOffsets)(i)),d(l.props.createAdjustmentScenario(i.id,e,f,a,n))}return d(l.props.duplicateScenario(i.id,e,t,a,n,u))}).then(function(e){var a=e.id;l.props.push("/studies/"+(t||l.props.id)+"/scenarios/"+a+"/"+(s?"cohorts":""))}).catch(function(e){400===e.status&&l.setState({apiError:{message:e.message,statusText:e.statusText,status:e.status}})}),this.handleDuplicateScenarioDialogClose()}},{key:"handleScenarioCheckboxClick",value:function(e){var t=this.state.markedScenarios,a=t.find(function(t){return t===e});void 0!==a?this.setState({markedScenarios:t.filter(function(e){return e!==a})}):this.setState({markedScenarios:[].concat(r(t),[e])})}},{key:"handleChangeOwnerClick",value:function(){this.setState({isChangeOwnerDialogShown:!0})}},{key:"handleEditStudyLevelClick",value:function(){var e=this.props;(0,e.navigateToStudyLevelEdit)(e.id)}},{key:"handleChangeOwnerDialogClose",value:function(){this.setState({isChangeOwnerDialogShown:!1})}},{key:"archiveScenario",value:function(e){this.props.archiveScenario(this.props.id,e,!0)}},{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.study,n=e.activeUser,r=e.approvedScenarios,l=e.optimisingScenarios,i=e.showScenarioWarningColumn,o=e.invalidFields,s=e.metadata,u=this.state,d=u.markedScenarios,c=u.isDuplicateScenarioDialogShown,p=u.isShareScenarioDialogShown,m=u.isChangeOwnerDialogShown,h=u.isScenarioParamsWarningShown,_=u.isStudyChangedDialogClose,E=u.selectedScenario,g=u.isRemoveDialogShown;if(!a||t||!1===(0,y.default)(a,"state",{}).isOwner&&!1===(0,y.default)(a,"is_imported"))return f.default.createElement(G.default,null);var S=a.study_id,b=a.study_details_updated_by,C=a.study_details_updated_at,O=r.find(function(e){return e.status===pe.SCENARIO_STATUS.APPROVED}),T=(0,y.default)(O,"studyParamsWarning",{showWarningOnDuplicate:!1});(0,$.addToStorage)("studiesChanged",{id:S,usersWhoClosed:[],updateDate:C,lastClose:C,updatedBy:b});var R=!_&&(0,ee.isShowDialogStudyChanged)("studiesChanged",S,C,b,this.props.activeUser.id)&&a.is_imported,A=a.state.status===he.default.PLANNED&&a.is_imported&&0===r.length&&(0,v.default)().diff(a.fp,"w")>=12,N="study-dashboard--";return a.state.status?N+="ACTIVE"===a.state.status?"tracking":"planning":N+=a.is_imported?"na":"playground",f.default.createElement("div",{className:"study-scenarios-container"},f.default.createElement(W.default,{studyId:this.props.id,compareScenariosLink:this.compareScenariosLink,markedScenarios:d,handleChangeOwnerClick:this.handleChangeOwnerClick,handleEditStudyLevelClick:this.handleEditStudyLevelClick}),f.default.createElement(w.Grid,null,f.default.createElement(w.Row,null,f.default.createElement(w.Col,{offset:1,width:11},f.default.createElement(J.default,null,f.default.createElement(L.default,{studyId:this.props.id,title:a.study_id,patientsNumber:a.target_num_patients,studyStatus:a.state.status,endDate:a.target_lpft,fp:a.fp,fpfvFpft:a.fpfv_fpft,studyOwner:a.state.owner_name,showCsmsLink:a.is_imported,onNavigateViewCsmsList:this.navigateViewCsmsList})))),f.default.createElement(J.default,null,f.default.createElement(X.default,{study:a,studyParamsWarning:T,invalidFields:o,isShowStatusBar:R,metadata:s,showApproveAbsenceWarning:A,onStudyChangedDialogClose:this.onStudyChangedDialogClose})),f.default.createElement(w.Row,null,f.default.createElement(w.Col,{offset:1,width:11},f.default.createElement(J.default,null,f.default.createElement(j.default,{dataType:ve.APPROVED,studyId:this.props.id,key:1,headerHeight:50,markedScenarios:d,activeUser:n,handleRowClick:this.handleRowClickApproved,handleScenarioCheckboxClick:this.handleScenarioCheckboxClick,handleShareScenarioClick:this.handleShareScenarioClick,handleDuplicateScenarioClick:this.handleDuplicateScenarioClick,handleArchiveScenario:this.archiveScenario,handleUnarchiveScenario:this.unarchiveScenario,onWarningIconClick:this.handleWarningIconClick,showScenarioWarningColumn:i})))),l&&l.length>0?f.default.createElement(w.Row,{style:{marginTop:"8px"}},f.default.createElement(w.Col,{offset:1,width:11},f.default.createElement(x.default,null))):f.default.createElement(w.Row,null),f.default.createElement(w.Row,null,f.default.createElement(w.Col,{offset:1,width:11},f.default.createElement(J.default,null,f.default.createElement(j.default,{dataType:ve.PREPARED,studyId:this.props.id,key:2,selectedScenario:E,markedScenarios:d,activeUser:n,headerHeight:0,handleRowClick:this.handleRowClickPrepared,handleScenarioCheckboxClick:this.handleScenarioCheckboxClick,handleShareScenarioClick:this.handleShareScenarioClick,handleDuplicateScenarioClick:this.handleDuplicateScenarioClick,handleArchiveScenario:this.archiveScenario,handleUnarchiveScenario:this.unarchiveScenario,onWarningIconClick:this.handleWarningIconClick,removeScenario:this.handleRemoveScenario,showScenarioWarningColumn:i}))))),p&&f.default.createElement(J.default,{hidden:!0},f.default.createElement(U.default,{studyId:a.id,scenario:E||{},isShown:p,onClose:this.handleShareScenarioDialogClose})),f.default.createElement(D.default,{scenarioName:E?E.name:"",isShown:g,onClose:this.handleRemoveScenarioDialogClose,onSubmit:this.handleRemoveScenarioSubmit}),f.default.createElement(J.default,{hidden:!0},f.default.createElement(I.default,{showMissingCountriesWarning:!0,study:a,scenario:E,isAdjusted:E&&null!==E.source_scenario_id,isApproved:E&&E.status===pe.SCENARIO_STATUS.APPROVED,isPrevApproved:E&&E.status===pe.SCENARIO_STATUS.PREV_APPROVED,isShown:c,onClose:this.handleDuplicateScenarioDialogClose,onSubmit:this.handleDuplicateScenarioDialogSubmit,showCreateAdjustedOption:(E&&E.status===pe.SCENARIO_STATUS.APPROVED||E&&E.status===pe.SCENARIO_STATUS.PREV_APPROVED)&&a.state.status===he.default.ACTIVE})),m&&f.default.createElement(J.default,{hidden:!0},f.default.createElement(B.default,{studyId:a.id,isShown:m,onClose:this.handleChangeOwnerDialogClose})),(0,y.default)(E,"studyParamsWarning.showStudyParamsWarning",null)&&f.default.createElement(J.default,{hidden:!0},f.default.createElement(q.default,{metadata:s,study:a,scenario:E,studyId:a.id,scenarioId:E.id,scenarioName:E.name,data:E.studyParamsWarning,status:E.status,isShown:h,onClose:this.handleScenarioParamsWarningClose})),f.default.createElement(Q.ContextHelpButton,{page:N}))}}]),t}(c.Component);ge.propTypes={activeUser:m.default.object.isRequired,duplicateScenario:m.default.func.isRequired,duplicateImpactScenario:m.default.func.isRequired,createAdjustmentScenario:m.default.func.isRequired,archiveScenario:m.default.func.isRequired,push:m.default.func.isRequired,replace:m.default.func.isRequired,id:m.default.number.isRequired,study:m.default.shape({id:m.default.number,study_id:m.default.string,indication:m.default.string,therapeutic_area:m.default.string,scenarios:m.default.array,plain:m.default.bool}),navigateToScenarioViewer:m.default.func.isRequired,navigateToStudyLevelEdit:m.default.func.isRequired,navigateToImpactScenario:m.default.func.isRequired,navigateToScenarioCohortsViewer:m.default.func.isRequired,isLoading:m.default.bool,availableUsers:m.default.array,getAvailableUsers:m.default.func.isRequired,studies:m.default.array,getStudies:m.default.func.isRequired,approvedScenarios:m.default.array,preparedScenarios:m.default.array,optimisingScenarios:m.default.array,showScenarioWarningColumn:m.default.bool,removeScenario:m.default.func.isRequired,invalidFields:m.default.array,metadata:m.default.object.isRequired,unarchiveScenario:m.default.func.isRequired},ge.defaultProps={study:null,isLoading:!1,availableUsers:[],studies:null,approvedScenarios:[],preparedScenarios:[],optimisingScenarios:[],errorScenarios:[],invalidFields:[],showScenarioWarningColumn:!1};var ye={navigateToScenarioViewer:function(e,t){return(0,E.push)("/studies/"+e+"/scenarios/"+t)},navigateToImpactScenario:function(e){return(0,E.push)("/studies/"+e+"/scenarios/impact/"+e)},navigateToScenarioCohortsViewer:function(e,t){return(0,E.push)("/studies/"+e+"/scenarios/"+t+"/cohorts")},navigateToStudyLevelEdit:function(e){return(0,E.push)("/studies/"+e+"/edit")},getStudy:ie.getStudy,duplicateScenario:oe.duplicateScenario,archiveScenario:oe.archiveScenario,unarchiveScenario:oe.unarchiveScenario,createAdjustmentScenario:oe.createAdjustmentScenario,getAvailableUsers:ue.default,duplicateImpactScenario:oe.duplicateImpactScenario,getStudies:ie.getStudies,removeScenario:oe.removeScenario,push:E.push,replace:E.replace};t.default=(0,_.connect)(s,ye)(ge)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){var n=t.countries.reduce(function(e,t){var n=(0,m.getMomentDate)((0,p.default)(t,"actualTimeseriesSnapshot.actual_date",a.clone()));return!e||n>e?n:e},null),r=n?n.diff(a,"w")+1:1;Object.values(e).map(function(e){var t=e;return t.curves=t.curves.map(function(e){return e.reduce(function(e,t){if(0===e.length)e.push(t);else{var a=e[e.length-1];if(a[0]===t[0]){var n=e[e.length-2];n&&n[0]===a[0]||a[1]===t[1]||e.push(t)}else e.push(t)}return e},[]).reduce(function(e,t){var a=e.day,n=e.arr,l=t[0],i=n[n.length-1]?n[n.length-1][1]:0;if(l===r){for(var o=0;o<=6;o+=1)n.push([a+=1,t[1]]);e.week=l,e.day=a}else if(e.week!==l){for(var s=0;s<=6;s+=1)s<=5?n.push([a+=1,i]):n.push([a+=1,t[1]]);e.week=l,e.day=a}else n.push([e.day,t[1]]);return e},{day:0,arr:[],week:0}).arr}),t.fpfv_lpfv*=7,t.fpfv_fpft*=7,t.fpp_fpfv*=7,t})}Object.defineProperty(t,"__esModule",{value:!0}),t.extractApprovedData=t.getFormattedDate=t.serializeScenarioData=t.deserializeScenarioData=t.dateDeserializer=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(31),o=n(i),s=a(83),u=n(s),d=a(65),c=n(d),f=a(11),p=n(f),m=a(7),h=a(14),v=a(17),_=["fsiv","25_si","50_si","90_si","fpfv","lpft","fpft","original_f_lpft","actual_date","actual_f_lpft","actual_fsiv","actual_fpfv","actual_fpft","actual_lpfv","lpfv","target_lpft","createdAt","updated","updatedAt","end_date"],E=function(e){var t=e;if(e){var a=e.toString(),n=a.indexOf(".");if(n>0){var r=a.substring(0,n),l=a.substring(n,a.length);t=r+(l&&l.length>3?l.substring(0,3)+"...":l)}}return t},g=t.dateDeserializer=function(e,t){return-1!==_.indexOf(e)?(0,m.getMomentDate)(t):t},y=t.deserializeScenarioData=function(e){try{var t=e.approved_data_snapshot,a=(0,m.getMomentDate)(t.fp),n=(0,m.getMomentDate)(t.target_lpft),l=t.fpfv_fpft,i=t.therapeutic_area,s=t.indication,u=t.target_num_patients;if(e.cohorts&&e.cohorts.length>0){var d=JSON.parse(t.aggregatedGlobalData,g);!t.daily&&d&&r({"_Global Rollup":d},e,a);var c=JSON.parse(t.cohorts,g);return c=c.map(function(e){var a=(0,o.default)(e);return a.fp=(0,m.getMomentDate)(e.fp),a.end_date=(0,m.getMomentDate)(e.end_date),a.fpfv_fpft=l,a.therapeutic_area=i,a.indication=s,a.target_num_patients=u,!t.daily&&a.fullData&&r(a.fullData,a,a.fp),a}),{aggregatedGlobalData:d,cohorts:c,fp:a,target_lpft:n,fpfv_fpft:l,therapeutic_area:i,indication:s,target_num_patients:u,daily:t.daily}}if(t.fullData){var f=JSON.parse(t.fullData,g);return!t.daily&&f&&r(f,e,a),{fullData:f,fp:a,target_lpft:n,fpfv_fpft:l,therapeutic_area:i,indication:s,target_num_patients:u,daily:t.daily}}throw new Error("No snapshot available - scenarioId: "+e.name+";\n     scenarioName: "+e.name+"; status: "+e.status)}catch(e){return console.log(e),null}};t.serializeScenarioData=function(e,t,a){try{var n=t.source_scenario_id,r=n?h.ADJUSTED_COUNTRY_DATA_FIELDS:h.APPROVED_COUNTRY_DATA_FIELDS;if(t.cohorts&&t.cohorts.length>0){var i=t.cohorts.map(function(e){var t=e.fullData.map(function(e){var t=(0,c.default)(e,r);return void 0!==t.region_id&&void 0===t.country_name&&(t.region_name=t.location),Object.keys(t).reduce(function(e,a){var n=l({},e);return n[a.replace("adjusted_","")]=t[a],n},{})}).reduce(function(e,t){return e[(void 0!==t.country_name?t.region_name:"")+"_"+t.location]=t,e},{});return l({},e,{fullData:t,daily:!0})}),o=(0,c.default)(t.aggregatedGlobalData,r),s=Object.keys(o).reduce(function(e,t){var a=l({},e);return a[t.replace("adjusted_","")]=o[t],a},{});return{daily:!0,aggregatedGlobalData:JSON.stringify(s),cohorts:JSON.stringify(i),fp:t.fp,target_lpft:t.end_date,target_num_patients:e.target_num_patients,fpfv_fpft:e.fpfv_fpft,therapeutic_area:e.therapeutic_area,indication:e.indication}}var u=a.map(function(e){var t=(0,c.default)(e,r);return void 0!==t.region_id&&void 0===t.country_name&&(t.region_name=t.location),Object.keys(t).reduce(function(e,a){var n=l({},e);return n[a.replace("adjusted_","")]=t[a],n},{})}).reduce(function(e,t){return e[(void 0!==t.country_name?t.region_name:"")+"_"+t.location]=t,e},{});return{daily:!0,fullData:JSON.stringify(u),fp:t.fp,target_lpft:t.end_date,target_num_patients:e.target_num_patients,fpfv_fpft:e.fpfv_fpft>=0?e.fpfv_fpft:14,therapeutic_area:e.therapeutic_area,indication:e.indication}}catch(e){return console.log(e),null}},t.getFormattedDate=function(e){var t=(0,m.getMomentDate)(e);return t?t.format(v.DATE_FORMAT):""},t.default=E,t.extractApprovedData=function(e){if(e&&e.approved_data_snapshot){var t=y(e);if(t)return l({},(0,u.default)(e,"approved_data_snapshot"),{approvedData:t,approved_fp:t.fp,approved_end_date:t.target_lpft,approved_fpfv_fpft:t.fpfv_fpft,approved_target_num_patients:t.target_num_patients,cohorts:e.cohorts.map(function(e){var a=t.cohorts.find(function(t){return t.name===e.name});return a?l({},e,{approved_fp:a.fp,approved_end_date:a.end_date}):e})})}return e}},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e){return e.find(function(e){return e.type.toUpperCase()===d.ROLLUP})||{}}function l(e,t,a,n,r,l,i){return e&&e.includes(i)&&(n&&r||!n&&null!==l&&!a)&&t&&!t.includes(i)}function i(e,t){var a=Object.assign({},t),r=Object.keys(a);return r.forEach(function(e){var t=[].concat(n(a[e]));r.push.apply(r,n(t.map(function(t){return t===d.UNSPECIFIED_COUNTRY?e+"_"+t:t})))}),Object.entries(e).filter(function(e){return e[1].location===d.UNSPECIFIED_COUNTRY?r.includes(e[1].region_name+"_"+e[1].country_name):r.includes(e[1].location||e[1].country_name)}).map(function(e){return e[1]}).concat(e[0])}Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.getStudyParamsWarning=t.getFilteredTableData=t.getFilteredData=t.getTableHeaderPosition=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.getGlobalRollupData=r,t.isOverriden=l,t.filterMultiColumnBeforeApply=i;var s=a(10),u=function(e){return e&&e.__esModule?e:{default:e}}(s),d=a(14),c=a(7);t.getTableHeaderPosition=function(e,t,a){var n=e;return t&&(n+=a),n},t.getFilteredData=function(e,t){return e.find(function(e){return e.location===t.name&&e.type===t.type.toLowerCase()&&(!t.subject||e.region===t.subject)})||e.find(function(e){return e.type.toUpperCase()===d.ROLLUP})},t.getFilteredTableData=function(e,t,a,r,l){var i=[];if(i.push(t),a.type===d.REGION){var s=e.filter(function(e){return e.location===a.name||e.region_name===a.name});i=[].concat(n(i),n(s))}else if(a.type===d.COUNTRY){var u=e.find(function(e){return e.location===a.name&&e.type.toUpperCase()===d.COUNTRY&&(!a.subject||e.region===a.subject)}),c=e.find(function(e){return e.location===u.region_name});i=[].concat(n(i),[c,u])}else i=r?[o({type:"multiediting"},l,{overrideList:[]})].concat(n(e)):e;return i},t.getStudyParamsWarning=function(e,t){if(!e||!t)return{showStudyParamsWarning:!1,showWarningOnDuplicate:!1};if(t.approvedData||t.study_level_data){var a=t.approvedData||t.study_level_data,n=t.approvedData,r=a.fp,l=a.target_lpft,i=a.fpfv_fpft,o=a.target_num_patients,s=a.therapeutic_area,d=a.indication;r=(0,c.getMomentDate)(r),l=(0,c.getMomentDate)(l);var f=e.fp,p=e.target_lpft,m=e.fpfv_fpft,h=e.target_num_patients,v=e.therapeutic_area,_=e.indication;f=(0,c.getMomentDate)(f),p=(0,c.getMomentDate)(p);var E=!1,g=!1,y=[];return i!==m&&(y.push("fpfvFpft"),E=!0,g=!0),f&&u.default.isMoment(f)&&f.isValid()&&r&&u.default.isMoment(r)&&r.isValid()&&f.isSame(r)||(y.push("fp"),E=!0,g=!0),p&&u.default.isMoment(p)&&p.isValid()&&l&&u.default.isMoment(l)&&l.isValid()&&p.isSame(l)||(y.push("tLpft"),E=!0),d&&_&&d.toLowerCase()!==_.toLowerCase()&&(y.push("indication"),E=!0),s&&v&&s.toLowerCase()!==v.toLowerCase()&&(y.push("therapeutic_area"),E=!0),o!==h&&(y.push("target_num_patients"),E=!0),{showWarningOnDuplicate:g&&!!n,showStudyParamsWarning:E,approvedParams:{fp:r,tLpft:l,fpfvFpft:i,target_num_patients:o,indication:d,therapeutic_area:s},currentParams:{fp:f,tLpft:p,fpfvFpft:m,target_num_patients:h,indication:_,therapeutic_area:v},invalidFields:y}}return{showStudyParamsWarning:!1,showWarningOnDuplicate:!1}},t.noop=function(){}},,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DropdownSelectFilterable=t.DropdownOption=void 0;var r=a(878),l=n(r),i=a(876),o=n(i),s=a(877),u=n(s);t.DropdownOption=o.default,t.DropdownSelectFilterable=u.default,t.default=l.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){switch(e){case g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS:return{id:v.default.generate(),event_type:e,name:"",state:g.EVENT_STATE.NEW,status:g.EVENT_STATUS.PENDING,patients:"",duration:"",start_after:"",locations:[]};case g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE:return{id:v.default.generate(),event_type:e,name:"",status:g.EVENT_STATUS.PENDING,state:g.EVENT_STATE.NEW,start_date:null,end_date:null,locations:[]};case g.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE:case g.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE:default:return{id:v.default.generate(),event_type:e,name:"",state:g.EVENT_STATE.NEW,status:g.EVENT_STATUS.PENDING,operation_value:"",operation:g.OPERATION_TYPE.INCREASE_BY,start_date:null,end_date:null,locations:[]}}}function o(e){switch(e){case g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE:return 1;case g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS:return 2;case g.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE:return 3;case g.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE:default:return 4}}function s(e){var t;return e.reduce(function(e,t){switch(t.status){case g.EVENT_STATUS.ACTIVE:e[t.type].inProgress+=1;break;case g.EVENT_STATUS.PENDING:e[t.type].pending+=1;break;case g.EVENT_STATUS.COMPLETED:default:e[t.type].completed+=1}return e[t.type].total+=1,e},(t={},l(t,g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),l(t,g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS,{inProgress:0,pending:0,completed:0,total:0}),l(t,g.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),l(t,g.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),t))}function u(e,t){if(!t)return y.Icons.EVENT;switch(e){case g.EVENT_STATUS.ACTIVE:return y.Icons.STAR_IN_PROGRESS;case g.EVENT_STATUS.COMPLETED:return y.Icons.STAR_COMPLETED;case g.EVENT_STATUS.PENDING:default:return y.Icons.STAR_PENDING}}function d(e,t,a){switch(e.event_type){case g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS:var n=!0;if(t&&t.countries){var l=a?a.countries:t.countries,i=[];e.locations.forEach(function(e){i.push.apply(i,r(e.countries.map(function(e){return e.id})))});var o=Math.min.apply(Math,r(l.filter(function(e){return i.includes(e.country_id)}).map(function(e){return t.source_scenario_id?e.adjusted_patient_allocation:e.patient_allocation})));(t.target_num_patients&&e.patients>t.target_num_patients||e.patients>o)&&(n=!1)}return e.name.length>0&&n&&e.patients>0&&""!==e.duration&&e.duration>=0&&""!==e.start_after&&e.start_after>=0&&e.locations.length>0;case g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE:return e.name.length>0&&e.start_date&&e.end_date&&e.locations.length>0&&(0,S.getMomentDate)(e.start_date).isSameOrAfter(t.fp)&&(0,S.getMomentDate)(e.end_date).isSameOrAfter(t.fp);case g.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE:case g.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE:default:return e.name.length>0&&e.operation_value>0&&e.start_date&&e.end_date&&e.locations.length>0&&(0,S.getMomentDate)(e.start_date).isSameOrAfter(t.fp)&&(0,S.getMomentDate)(e.end_date).isSameOrAfter(t.fp)}}function c(e,t,a){var n=a.countries,r=t.reduce(function(e,t){var a=t.countries.length,r=1===a,l=t.countries.reduce(function(e,a){return n.find(function(e){return e.platform_country_id===a.id})&&e.push(m({},a,{platform_country_id:a.id,region_name:t.name})),e},[]);return n.find(function(e){return"Unspecified country"===e.country_name&&e.region_name===t.name})&&l.push({id:"unspecifiedCountry_"+t.id,platform_country_id:null,name:"Unspecified country",region_id:t.id,isSelectedAsRegion:!1,isSelected:!1}),l.length>0&&e.push(m({},t,{isCountryRegion:r,initialLength:a,countries:l})),e},[]),l=(0,E.default)(r);return e.locations.forEach(function(e){e.countries.forEach(function(t){var a=l.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()}),n=a?a.countries.find(function(e){return e.name.toLowerCase()===t.name.toLowerCase()}):null;n&&(n.isSelected=!0)})}),l}function f(e){var t=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE}),a=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS}),n=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE}),l=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE});return[].concat(r(t),r(a),r(n),r(l))}function p(e,t,a,n){var l=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE}),i=l.reduce(function(e,a){return a[t]?("start_date"===t&&(a[t]=(0,S.getMomentDate)(a[t])),e.type1sortable.push(a)):e.type1NonSortable.push(a),e},{type1sortable:[],type1NonSortable:[]}),o=i.type1sortable,s=i.type1NonSortable,u=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS}),d=u.reduce(function(e,t){return t.patients?e.type2sortable.push(t):e.type2NonSortable.push(t),e},{type2sortable:[],type2NonSortable:[]}),c=d.type2sortable,f=d.type2NonSortable,p=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE}),m=p.reduce(function(e,a){return a[t]?("start_date"===t&&(a[t]=(0,S.getMomentDate)(a[t])),e.type3sortable.push(a)):e.type3NonSortable.push(a),e},{type3sortable:[],type3NonSortable:[]}),h=m.type3sortable,v=m.type3NonSortable,_=e.filter(function(e){return e.event_type===g.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE}),E=_.reduce(function(e,a){return a[t]?("start_date"===t&&(a[t]=(0,S.getMomentDate)(a[t])),e.type4sortable.push(a)):e.type4NonSortable.push(a),e},{type4sortable:[],type4NonSortable:[]}),y=E.type4sortable,b=E.type4NonSortable;return n?(l=[].concat(r(o.sort((0,C.default)(t,a))),r(s)),u=[].concat(r(c.sort((0,C.default)("patients",a))),r(f)),p=[].concat(r(h.sort((0,C.default)(t,a))),r(v)),_=[].concat(r(y.sort((0,C.default)(t,a))),r(b)),[].concat(r(l),r(u),r(p),r(_))):[].concat(r([].concat(r(o),r(h),r(y)).sort((0,C.default)(t,a))),r(c.sort((0,C.default)("patients",a))),r(s),r(f),r(v),r(b))}Object.defineProperty(t,"__esModule",{value:!0});var m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.getNewEventByType=i,t.getEventType=o,t.getEventsStat=s,t.getEventIcon=u,t.validateByType=d,t.prepareLocationsData=c,t.sortEvents=f,t.sortEventsByField=p;var h=a(67),v=n(h),_=a(31),E=n(_),g=a(41),y=a(6),S=a(7),b=a(49),C=n(b)},,,,,,,function(e,t,a){"use strict";function n(e){return function(t){return t((0,s.fetchApi)(d.PLATFORM_STUDIES,u.GET_PLATFORM_STUDIES,"GET",{pattern:e}))}}function r(e){return function(t){return t((0,s.fetchApi)(d.PLATFORM_STUDIES_IMPORT,u.IMPORT_PLATFORM_STUDY,"POST",{id:e}))}}function l(){return function(e){return e((0,s.fetchApi)(d.PLATFORM_REGIONS,u.GET_PLATFOTM_REGIONS))}}function i(){return function(e){return e((0,s.fetchApi)(d.STUDY_OPTIONS,u.GET_STUDY_OPTIONS))}}function o(){return function(e){return e((0,s.fetchApi)(d.HISTORICAL_STUDIES,u.GET_HISTORICAL_STUDIES))}}Object.defineProperty(t,"__esModule",{value:!0}),t.getPlatformStudies=n,t.importPlatformStudy=r,t.getPlatformRegions=l,t.getStudyOptions=i,t.getHistoricalStudies=o;var s=a(44),u=a(15),d=a(45)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(351),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1042),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},,,,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatedContent=t.Button=t.Separator=t.Sidebar=void 0;var r=a(527),l=n(r),i=a(526),o=n(i),s=a(355),u=n(s),d=a(1030),c=n(d);t.default=l.default,t.Sidebar=l.default,t.Separator=o.default,t.Button=u.default,t.AnimatedContent=c.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FILTER_BY={INDICATION:"INDICATION",STUDIES:"STUDIES"},t.UNCERTAINTY={LOW:"LOW",MEDIUM:"MEDIUM",HIGH:"HIGH"},t.LABELS={patient_allocation:"Patients",num_sites:"Sites",fsiv:"FP to FSIV",sas:"SAS","25_si":"FP to 25%SI","50_si":"FP to 50%SI","90_si":"FP to 90%SI",fpfv:"SIV to FPFV",randomisation_rate:"RR",screening_failure:"SF%"},t.FIELDS={num_sites:"num_sites",patient_allocation:"num_patients",fsiv:"fp_fsiv",sas:"sas","25_si":"si_25","50_si":"si_50","90_si":"si_90",fpfv:"fsiv_fpfv",randomisation_rate:"randomisation_rate",screening_failure:"screening_failure"},t.CELL_TO_PARAMETER_UNCERTAINTY={fsiv:"fsiv",sas:"sas","25_si":"si_25","50_si":"si_50","90_si":"si_90",fpfv:"fpfv",randomisation_rate:"randomisation_rate",screening_failure:"screen_failure_rate"},t.PERCENTAGE_COLUMNS=["screening_failure","sas"]},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return(0,f.default)(e).format("DD MMM YY")}function l(){for(var e="NERVE_",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<5;a+=1)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function i(e,t){var a=e.id;return t.filter(function(e){return e.ta_id===a})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];return e.filter(function(e){return e.id===+t})[0]}function s(e,t){return!(t.role===E.default.PLAYGROUND&&e.is_imported||!e.state.status&&e.is_imported||e.state.status===v.default.COMPLETED)}function u(e){var t=[],a=void 0,n=void 0;if(e&&e.impactStudyParams){a={fp:e.fp,target_lpft:e.target_lpft,therapeutic_area:e.therapeutic_area,indication:e.indication,target_num_patients:e.target_num_patients,fpfv_fpft:e.fpfv_fpft,phase:e.phase||""},n=d({},e.impactStudyParams);var r=(0,m.default)(a,"indication",""),l=(0,m.default)(a,"therapeutic_area",""),i=(0,m.default)(a,"phase",""),o=(0,m.default)(a,"target_num_patients",null),s=(0,g.getMomentDate)(a.fp),u=(0,g.getMomentDate)(a.target_lpft),c=(0,g.getMomentDate)(n.fp),p=(0,g.getMomentDate)(n.target_lpft),v=(0,m.default)(n,"indication",null);null!==v&&v.toLowerCase()!==r.toLowerCase()&&t.push("indication");var _=(0,m.default)(n,"therapeutic_area",null);null!==_&&_.toLowerCase()!==l.toLowerCase()&&t.push("therapeutic_area");var E=(0,m.default)(n,"phase",null);null!==E&&E.toLowerCase()!==i.toLowerCase()&&t.push("phase");var y=(0,m.default)(n,"target_num_patients",null);return 0!==y&&null!==y&&y!==o&&t.push("target_num_patients"),null===c||s&&f.default.isMoment(s)&&s.isValid()&&c&&f.default.isMoment(c)&&c.isValid()&&s.isSame(c,"day")||t.push("fp"),null===p||u&&f.default.isMoment(u)&&u.isValid()&&p&&f.default.isMoment(p)&&p.isValid()&&u.isSame(p,"day")||t.push("target_lpft"),{invalidFields:t,fpoParams:{fp:s&&s.format(h.DATE_FORMAT),target_lpft:u&&u.format(h.DATE_FORMAT),therapeutic_area:l,indication:r,target_num_patients:o,phase:i},impactParams:{fp:c&&c.format(h.DATE_FORMAT),target_lpft:p&&p.format(h.DATE_FORMAT),therapeutic_area:_,indication:v,target_num_patients:y,phase:E}}}return{invalidFields:t,fpoParams:a,impactParams:n}}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.formatDate=r,t.generateStudyId=l,t.getIndications=i,t.getSelectedItem=o,t.isEditableStudy=s,t.getMisalignedDetails=u;var c=a(10),f=n(c),p=a(11),m=n(p),h=a(17),v=n(h),_=a(182),E=n(_),g=a(7)},,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(875),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s={isNegative:o.default.bool},u={isNegative:!1},d=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{fill:"#000",d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}))),c=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{stroke:"#000",strokeWidth:"2",d:"M20.999 19.864L20.99 5c0-.551-.446-1-.99-1H4c-.548 0-1 .452-1 1v10c0 .548.452 1 1 1h12.362l4.637 3.864z"}),l.default.createElement("path",{fill:"#000",d:"M6 7h12v2H6zM6 11h12v2H6z"}))),f=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M0 0h24v24H0z"}),l.default.createElement("path",{fill:"#000",d:"M16.5 13c-1.2 0-3.07.34-4.5 1-1.43-.67-3.3-1-4.5-1C5.33 13 1 14.08 1\n          16.25V19h22v-2.75c0-2.17-4.33-3.25-6.5-3.25zm-4 4.5h-10v-1.25c0-.54 2.56-1.75 5-1.75s5 1.21 5 1.75v1.25zm9\n          0H14v-1.25c0-.46-.2-.86-.52-1.22.88-.3 1.96-.53 3.02-.53 2.44 0 5 1.21 5 1.75v1.25zM7.5 12c1.93 0 3.5-1.57\n          3.5-3.5S9.43 5 7.5 5 4 6.57 4 8.5 5.57 12 7.5 12zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9\n          5.5c1.93 0 3.5-1.57 3.5-3.5S18.43 5 16.5 5 13 6.57 13 8.5s1.57 3.5 3.5 3.5zm0-5.5c1.1 0 2 .9 2 2s-.9\n          2-2 2-2-.9-2-2 .9-2 2-2z"}))),p=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12.5 6H11v6l4.75 2.85.75-1.23-4-2.37V6zM12 2a9 9 0 0 0-9 9c0 4.97 4.02 9 9 9a9 9 0 0 0 0-18zm0\n        16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})),m=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"#9d9d9d",fillRule:"evenodd"},l.default.createElement("path",{d:"M10 19h3v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5h4.286c.786 0 1.428.675 1.428\n          1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2s.893-2 2-2 2 .893 2 2-.893 2-2 2z"}),l.default.createElement("path",{d:"M18 19h3v3H11v-3h3v-5h-1.571V8.5c0-.825.642-1.5 1.428-1.5h4.286c.786 0 1.428.675 1.428\n          1.5V14H18v5zM16 6c-1.107 0-2-.893-2-2s.893-2 2-2 2 .893 2 2-.893 2-2 2z"}))),h=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#9d9d9d",fillRule:"evenodd",d:"M16.53 11.06L15.47 10l-4.88 4.88-2.12-2.12-1.06 1.06L10.59 17l5.94-5.94zM19 3h-1V1h-2v2H8V1H6v2H5c-1.11\n        0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"})),v=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M0 0h24v24H0z"}),l.default.createElement("path",{fill:"#000",d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))),_=l.default.createElement("svg",{width:"48px",height:"24px",viewBox:"0 0 48 24"},l.default.createElement("g",{stroke:"#9d9d9d"},l.default.createElement("line",{x1:"2",y1:"12",x2:"46",y2:"12",strokeWidth:2}),l.default.createElement("line",{x1:"40",y1:"6",x2:"46",y2:"12",strokeWidth:2}),l.default.createElement("line",{x1:"40",y1:"18",x2:"46",y2:"12",strokeWidth:2}))),E=l.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{stroke:"#9d9d9d"},l.default.createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12",strokeWidth:2}),l.default.createElement("line",{x1:"16",y1:"6",x2:"22.5",y2:"12.5",strokeWidth:2}),l.default.createElement("line",{x1:"16",y1:"18",x2:"22.5",y2:"11.5",strokeWidth:2}))),g=l.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{stroke:"#000000"},l.default.createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12",strokeWidth:2}),l.default.createElement("line",{x1:"2",y1:"12",x2:"9",y2:"6",strokeWidth:2}),l.default.createElement("line",{x1:"2",y1:"12",x2:"9",y2:"18",strokeWidth:2}))),y=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5\n          4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})),S=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M14.5 15h-.79l-.28-.27A6.471 6.471 0 0 0 15 10.5 6.5 6.5 0 1 0 8.5 17c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L19.49 20l-4.99-5zm-6 0C6.01 15 4 12.99 4 10.5S6.01 6 8.5 6 13 8.01 13 10.5 10.99 15 8.5 15zM15 2h8l-3 5v2l-2 1V6.984L15 2z"})),b=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"#000",fillRule:"evenodd"},l.default.createElement("path",{fillRule:"nonzero",d:"M14.5 15h-.79l-.28-.27A6.471 6.471 0 0 0 15 10.5 6.5 6.5 0 1 0 8.5\n          17c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L19.49 20l-4.99-5zm-6\n          0C6.01 15 4 12.99 4 10.5S6.01 6 8.5 6 13 8.01 13 10.5 10.99 15 8.5 15z"}),l.default.createElement("path",{d:"M20 5V2h-2v3h-3v2h3v3h2V7h3V5h-3z"}))),C=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"21",viewBox:"0 0 23 21"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M-1 0h24v24H-1z"}),l.default.createElement("path",{fill:"#000",d:"M2 3C.9 3 0 3.9 0 5v12c0 1.1.9 2 2 2h5v2h8v\n      -2h5c1.1 0 1.99-.9 1.99-2l.006-7L22 3H2zm0 14V5h10V3h10v8h-2v6H2zm11-9H7v2h6V8zm5 4H7v2h11v\n      -2zM4 8v2h2V8H4zm2 4v2H4v-2h2zm15.704-7.044l.96.745c.08.071.107.188.053.287l-.897 1.55c-.062.1\n      -.179.135-.278.1l-1.12-.45c-.224.18-.484.324-.753.44l-.17 1.184a.23.23 0 0 1-.225.188h-1.793a.223.223 0 0 1\n      -.224-.188l-.17-1.184a3.067 3.067 0 0 1-.763-.44l-1.111.45c-.108.035-.224 0-.278-.1l-.897-1.55a.233.233 0 0\n      1 .054-.287l.95-.745a3.504 3.504 0 0 1 0-.878l-.95-.744a.222.222 0 0 1-.054-.287l.897-1.551c.063-.099.18\n      -.135.278-.099l1.111.448c.234-.179.494-.322.763-.439l.17-1.183a.23.23 0 0 1 .224-.189h1.793c.108 0\n      .206.081.215.189l.17 1.183c.279.108.53.26.763.44l1.112-.449c.107-.036.224 0 .277.099l.897 1.55a.233.233 0 0 1\n      -.054.288l-.95.744c.027.143.036.287.036.44 0 .152-.018.295-.036.438zm-3.326.906c.744 0 1.344-.6 1.344-1.345 0\n      -.744-.6-1.345-1.344-1.345-.745 0-1.345.601-1.345 1.345s.6 1.345 1.345 1.345z"}))),O=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"18",viewBox:"0 0 22 18"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M-1-3h24v24H-1z"}),l.default.createElement("path",{fill:"#000",d:"M20 0H2C.9 0 0 .9 0 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L22 2c0-1.1-.9-2-2-2zm0 14H2V2h18v12zM4 5v2h2V5H4zm2 4H4v2h2V9z"}),l.default.createElement("path",{fill:"#000",d:"M7 5v2h6V5H7zm2 4H7v2h2v1h2V8H9v1zm9 2V9h-6v2h6zm-2-3V7h2V5h-2V4h-2v4h2z"}))),T=l.default.createElement("svg",{style:{width:"18px",height:"18px"},version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 563.43 563.43"},l.default.createElement("path",{d:"M280.79,314.559c83.266,0,150.803-67.538,150.803-150.803S364.055,13.415,280.79,13.415S129.987,80.953,\n        129.987,163.756 S197.524,314.559,280.79,314.559z M280.79,52.735c61.061,0,111.021,49.959,111.021,\n        111.021S341.851,274.776,280.79,274.776 s-111.021-49.959-111.021-111.021S219.728,52.735,280.79,52.735z"}),l.default.createElement("path",{d:"M19.891,550.015h523.648c11.102,0,19.891-8.789,\n        19.891-19.891c0-104.082-84.653-189.198-189.198-189.198H189.198 C85.116,340.926,0,425.579,0,530.124C0,541.226,\n        8.789,550.015,19.891,550.015z M189.198,380.708h185.034 c75.864,0,138.313,56.436,148.028,129.524H41.17C50.884,\n        437.607,113.334,380.708,189.198,380.708z"})),R=l.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{fill:"#000",d:"M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9\n          1.99-2L23 5c0-1.1-.9-2-2-2zm0 14H3V5h18v12zm-2-9H8v2h11V8zm0 4H8v2h11v-2zM7 8H5v2h2V8zm0 4H5v2h2v-2z"}))),w=l.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#9d9d9d",fillRule:"evenodd",d:"M9 11H7v2h2v-2zm3 3h-2v2h2v-2zm3 2v2h2v-2h-2zm0-5h2v2h-2v-2zm4-7h-1V2h-2v2H8V2H6v2H5c-1.11\n        0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"})),A=l.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24","data-test":"globe-btn"},l.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93\n        6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91\n        3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14\n        1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0\n        1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12\n        19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91\n        3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07\n        1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2\n        0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"})),I=l.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),N=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#9d9d9d",fillRule:"evenodd",d:"M9.31 17l2.44-2.44L14.19 17l1.06-1.06-2.44-2.44 2.44-2.44L14.19 10l-2.44 2.44L9.31 10l-1.06 1.06 2.44\n        2.44-2.44 2.44L9.31 17zM19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9\n        2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"})),D=l.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41\n                12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0\n                18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})),P=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"#000",fillRule:"evenodd"},l.default.createElement("path",{d:"M16 20.377V21h6v-6.623l-2 2V19h-2v-.623l-2 2zm0-10.692V3h6v.685l-2 2V5h-2v2.685l-2 2zm-7 7V3h6v7.685l-2 2V5h-2v9.685l-2 2zM3 21H2V3h6v18H3zm1-2h2V5H4v14zM22.8 9.793a.678.678 0 0 1 0 .96L20.555 13 18 10.446l2.246-2.247a.678.678 0 0 1 .96 0l1.595 1.594zM10 18.468L17.468 11 20 13.532 12.532 21H10v-2.532z"}))),L=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",style:{background:"#fff"},viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"#000",fillRule:"evenodd"},l.default.createElement("path",{fillRule:"nonzero",d:"M2 4h10v2H2V4zm2 4h8v2H4V8zm4 4h4v2H8v-2z"}),l.default.createElement("path",{d:"M16 2v16.17l-2.59-2.58L12 17l5 5 5-5-1.41-1.41L18 18.17V2z"}))),M=l.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M15.755 8.817l1.428 1.414-4.996 4.952-5.004-4.946 1.432-1.418 3.586 3.55z"})),x=l.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M15.755 15.183l1.428-1.414-4.996-4.952-5.004 4.946 1.432 1.418 3.586-3.55z"})),k=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",style:{background:"#fff"},viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"#000",fillRule:"evenodd"},l.default.createElement("path",{fillRule:"nonzero",d:"M2 20h10v-2H2v2zm2-4h8v-2H4v2zm4-4h4v-2H8v2z"}),l.default.createElement("path",{d:"M16 22V5.83l-2.59 2.58L12 7l5-5 5 5-1.41 1.41L18 5.83V22z"}))),j=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},l.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M8.6 7.4L10 6l6 6-6 6-1.4-1.4 4.6-4.6z"})),F=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},l.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m16,16.6l-1.4,1.4l-6,-6l6,-6l1.4,1.4l-4.6,4.6l4.6,4.6z"})),U=l.default.createElement("svg",{width:"20",height:"18",viewBox:"0 0 20 18"},l.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M10 4V0H0v18h20V4H10zM4 16H2v-2h2v2zm0-4H2v-2h2v2zm0-4H2V6h2v2zm0-4H2V2h2v2zm4\n      12H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V6h2v2zm0-4H6V2h2v2zm10\n      12h-8v-2h2v-2h-2v-2h2V8h-2V6h8v10zm-2-8h-2v2h2V8zm0 4h-2v2h2v-2z"})),V=l.default.createElement("div",{width:"24",height:"24",style:{padding:"2px"}},l.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M-3-3h24v24H-3z"}),l.default.createElement("path",{d:"M-3-3h24v24H-3z"}),l.default.createElement("path",{fill:"#000",d:"M0 14v2h6v-2H0zM0 2v2h10V2H0zm10 16v-2h8v-2h-8v-2H8v6h2zM4\n          6v2H0v2h4v2h2V6H4zm14 4V8H8v2h10zm-6-4h2V4h4V2h-4V0h-2v6z"})))),B=l.default.createElement("svg",{className:"icon-more-horiz",width:"24px",height:"24px",viewBox:"0 0 24 24","data-test":"more-btn"},l.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},l.default.createElement("g",{fill:"#000000"},l.default.createElement("path",{d:"M6,10 C4.9,10 4,10.9 4,12 C4,13.1 4.9,14 6,14 C7.1,14 8,13.1 8,12 C8,10.9 7.1,10 6,10 L6,10 Z M18,10\n          C16.9,10 16,10.9 16,12 C16,13.1 16.9,14 18,14 C19.1,14 20,13.1 20,12 C20,10.9 19.1,10 18,10 L18,10 Z M12,10\n          C10.9,10 10,10.9 10,12 C10,13.1 10.9,14 12,14 C13.1,14 14,13.1 14,12 C14,10.9 13.1,10 12,10 L12,10 Z"})))),H=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24","data-test":"duplicate-btn"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M-1-2h24v24H-1z"}),l.default.createElement("path",{fill:"#000",d:"M6 4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h4v2h6v-2h\n        4c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H6zm14 12H6V6h14v10zm-2-8h\n          -7v2h7V8zm0 4h-7v2h7v-2zM8 8v2h2V8H8zm0 4h2v2H8v-2zM2 0h16v2H2v12H0V2C0 .9.9 0 2 0z"}))),G=function(e){var t=e.isNegative;return l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M-1-2h24v24H-1z"}),l.default.createElement("path",{fill:t?"#FFF":"#000",d:"M6 4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h4v2h6v-2h\n        4c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H6zm14 12H6V6h14v10zm-2-8h\n          -7v2h7V8zm0 4h-7v2h7v-2zM8 8v2h2V8H8zm0 4h2v2H8v-2zM2 0h16v2H2v12H0V2C0 .9.9 0 2 0z"})))};G.propTypes=s,G.defaultProps=u;var Y=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24","data-test":"edit-btn"},l.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},l.default.createElement("polygon",{points:"0 0 24 0 24 24 0 24"}),l.default.createElement("path",{fill:"#000000",d:"M3,17.25 L3,21 L6.75,21 L17.81,9.94 L14.06,6.19 L3,\n          17.25 L3,17.25 Z M20.71,7.04 C21.1,6.65 21.1,6.02 20.71,\n          5.63 L18.37,3.29 C17.98,2.9 17.35,2.9 16.96,3.29 L15.13,\n          5.12 L18.88,8.87 L20.71,7.04 L20.71,7.04 Z"}))),q=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"21",viewBox:"0 0 22 21","data-test":"create-new-scenario"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M-1 0h24v24H-1z"}),l.default.createElement("path",{fill:"#000",d:"M2 3C.9 3 0 3.9 0 5v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2l.006-7L22 3H2zm0\n          14V5h9V3h11v6h-2v8H2zm12-9H7v2h7V8zm4 4H7v2h11v-2zM4 8v2h2V8H4zm2 4H4v2h2v-2z"}),l.default.createElement("path",{fill:"#000",d:"M19 3V0h-2v3h-3v2h3v3h2V5h3V3h-3z"}))),z=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"18",viewBox:"0 0 22 18"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M-1-3h24v24H-1z"}),l.default.createElement("path",{fill:"#000",d:"M20 0H2C.9 0 0 .9 0 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L22 2c0-1.1-.9-2-2-2zm0\n        14H2V2h18v12z"}),l.default.createElement("path",{fill:"#000",d:"M12 2h8v12h-8z"}),l.default.createElement("path",{fill:"#FFF",d:"M10 0h2v16h-2z"}),l.default.createElement("path",{fill:"#000",d:"M4 10.175l1.41 1.41L9 8.005l-3.59-3.59L4 5.835l2.17 2.17z"}),l.default.createElement("path",{fill:"#FFF",d:"M19 10.175l-1.41 1.41L14 8.005l3.59-3.59L19 5.835l-2.17 2.17z"}))),W=l.default.createElement("svg",{className:"icon-archive",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"22",viewBox:"0 0 24 22"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{fill:"#000",d:"M3 5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 1.99-.9 1.99-2L23 7c0-1.1-.9-2-2-2H3zm18\n        14H3V7h18v12zm-2-9H8v2h11v-2zm0 4H8v2h11v-2zM7 10H5v2h2v-2zm0 4H5v2h2v-2zM21 4.01h1.997L23\n        2c0-1.1-.9-2-2-2H3C1.9 0 1 .9 1 2v2l2 .001V2h18v2.01z"}),l.default.createElement("g",{transform:"translate(0 -2)"},l.default.createElement("path",{stroke:"#000",fill:"#000",strokeWidth:"2",d:"M1 16h22v7H1z"})),l.default.createElement("path",{fill:"#FFF",d:"M8 15h8v4H8z"}))),K=function(e){var t=e.isNegative;return l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"22",viewBox:"0 0 24 22"},l.default.createElement("defs",null,l.default.createElement("path",{id:"a",d:"M0 15h24v9H0z"})),l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M0-2h24v24H0z"}),l.default.createElement("path",{fill:t?"#FFF":"#000",d:"M3 5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 1.99-.9 1.99-2L23 7c0-1.1-.9-2-2-2H3zm18\n        14H3V7h18v12zm-2-9H8v2h11v-2zm0 4H8v2h11v-2zM7 10H5v2h2v-2zm0 4H5v2h2v-2zM21 4.01h1.997L23\n        2c0-1.1-.9-2-2-2H3C1.9 0 1 .9 1 2v2l2 .001V2h18v2.01z"}),l.default.createElement("g",{transform:"translate(0 -2)"},l.default.createElement("path",{stroke:t?"#FFF":"#000",fill:t?"#FFF":"#000",strokeWidth:"2",d:"M1 16h22v7H1z"})),l.default.createElement("path",{fill:t?"#000":"#FFF",d:"M8 15h8v4H8z"})))};K.propTypes=s,K.defaultProps=u;var X=function(e){var t=e.isNegative;return l.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:t?"#FFF":"#000",fillRule:"evenodd",d:"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41\n                12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0\n                18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}))};X.propTypes=s,X.defaultProps=u;var Z=l.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24","data-test":"export-btn"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M0 0h24v24H0z"}),l.default.createElement("path",{fill:"#000",d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}))),J=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","data-test":"save-btn"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M0 0h24v24H0z"}),l.default.createElement("path",{d:"M0 0h24v24H0z"}),l.default.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}))),Q=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2\n      2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})),$=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16.66 11.003h-3.663V7.34h-1.994v3.663H7.34v1.994h3.663v3.663h1.994v\n        -3.663h3.663v-1.994zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10\n        -10S17.53 2 12 2zM4 12c0-4.41 3.59-8 8-8s8 3.59 8 8-3.59 8-8 8-8-3.59-8-8z"})),ee=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 14"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M-1-3h24v24H-1z"}),l.default.createElement("path",{fill:"#000",d:"M20 0H2C.9 0 0 .9 0 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L22 2c0-1.1-.9-2-2-2zm0 14H2V2h18v12z"}),l.default.createElement("path",{fill:"#000",d:"M12.722 5.4V3L17 7.2l-4.278 4.2V8.94C9.667 8.94 7.528 9.9 6 12c.611-3 2.444-6 6.722-6.6z"}))),te=function(e){var t=e.isNegative;return l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M-1-3h24v24H-1z"}),l.default.createElement("path",{fill:t?"#FFF":"#000",d:"M20 0H2C.9 0 0 .9 0 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L22 2c0-1.1-.9-2-2-2zm0 14H2V2h18v12z"}),l.default.createElement("path",{fill:t?"#FFF":"#000",d:"M12.722 5.4V3L17 7.2l-4.278 4.2V8.94C9.667 8.94 7.528 9.9 6 12c.611-3 2.444-6 6.722-6.6z"})))};te.propTypes=s,te.defaultProps=u;var ae=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"20",viewBox:"0 0 18 20"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M-3-2h24v24H-3z"}),l.default.createElement("path",{fill:"#000",d:"M15 14.08c-.76 0-1.44.3-1.96.77L5.91 10.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L5.04 7.81C4.5 7.31 3.79 7 3 7c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92 0-1.61-1.31-2.92-2.92-2.92z"}))),ne=function(e){var t=e.isNegative;return l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"20",viewBox:"0 0 18 20"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M-3-2h24v24H-3z"}),l.default.createElement("path",{fill:t?"#FFF":"#000",d:"M15 14.08c-.76 0-1.44.3-1.96.77L5.91 10.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L5.04 7.81C4.5 7.31 3.79 7 3 7c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92 0-1.61-1.31-2.92-2.92-2.92z"})))},re=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"21",viewBox:"0 0 23 21","data-test":"approve-scenario-btn"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M-1 0h24v24H-1z"}),l.default.createElement("path",{fill:"#000",d:"M2 3C.9 3 0 3.9 0 5v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2l.006-7L22 3H2zm0 14V5h9V3h11v6h-2v8H2zm12-9H7v2h7V8zm4 4H7v2h11v-2zM4 8v2h2V8H4zm2 4H4v2h2v-2z"}),l.default.createElement("path",{fill:"#000",d:"M16.469 8L13 4.5l1.397-1.41 2.072 2.08L21.603 0 23 1.41 16.469 8z"}))),le=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"24",height:"24"},l.default.createElement("g",null,l.default.createElement("path",{d:"M 9 2 L 9 3 L 12.292969 3 L 6.023438 9.273438 L 6.726563 9.976563 L 13 3.707031 L 13 7 L 14 7 L 14 2 Z M 4 4 C 2.894531 4 2 4.894531 2 6 L 2 12 C 2 13.105469 2.894531 14 4 14 L 10 14 C 11.105469 14 12 13.105469 12 12 L 12 7 L 11 8 L 11 12 C 11 12.550781 10.550781 13 10 13 L 4 13 C 3.449219 13 3 12.550781 3 12 L 3 6 C 3 5.449219 3.449219 5 4 5 L 8 5 L 9 4 Z "}))),ie=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},l.default.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M5.494 8.99L2.37 12.178l-1.09-1.09c-.235-.235-.474-.486-.76-.487a.514.514 0 0\n      0-.515.516l.006 4.307a.51.51 0 0 0 .174.38.513.513 0 0 0 .38.174l4.308.006c.285 0\n      .516-.23.515-.515 0-.285-.333-.606-.476-.749l-1.09-1.09 3.17-3.14-1.498-1.498zM15.973.574a.523.523 0 0\n      0-.177-.39.52.52 0 0 0-.387-.177L11.03 0a.525.525 0 0 0-.525.528c0 .291.339.62.484.766l1.108 1.115-3.105\n      3.084 1.499 1.5 3.083-3.098 1.108 1.115c.24.242.483.498.773.499.29 0 .525-.236.525-.528L15.973.573z"})),oe=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},l.default.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M6.815 9.181a.512.512 0 0 0-.381-.174l-4.311-.006a.515.515 0 0 0-.516.516c0\n      .286.333.607.476.75l1.09 1.09L0 14.5 1.5 16l3.127-3.189 1.09 1.09c.236.237.476.488.761.488.286 0\n      .517-.23.516-.516l-.006-4.311a.512.512 0 0 0-.173-.381zm6.077-4.593L16 1.5 14.5 0l-3.087\n      3.1-1.109-1.116c-.24-.242-.483-.499-.773-.5a.526.526 0 0 0-.525.528l.006 4.413c0\n      .156.07.293.177.39a.52.52 0 0 0 .387.178l4.385.006c.29 0\n      .525-.236.525-.528 0-.292-.339-.621-.484-.767l-1.11-1.116z"})),se=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},l.default.createElement("g",{fill:"#000",fillRule:"nonzero"},l.default.createElement("path",{d:"M5.494 8.99L2.37 12.178l-1.09-1.09c-.235-.235-.474-.486-.76-.487a.514.514 0 0\n      0-.515.516l.006 4.307a.51.51 0 0 0 .174.38.513.513 0 0 0 .38.174l4.308.006c.285 0\n      .516-.23.515-.515 0-.285-.333-.606-.476-.749l-1.09-1.09 3.17-3.14-1.498-1.498zM15.973.574a.523.523 0 0\n      0-.177-.39.52.52 0 0 0-.387-.177L11.03 0a.525.525 0 0 0-.525.528c0 .291.339.62.484.766l1.108 1.115-3.105\n      3.084 1.499 1.5 3.083-3.098 1.108 1.115c.24.242.483.498.773.499.29 0 .525-.236.525-.528L15.973.573zM10.506\n      8.99l3.124 3.187 1.09-1.09c.235-.235.474-.486.76-.487.285 0 .516.23.515.516l-.006 4.307a.51.51 0 0\n      1-.174.38.513.513 0 0 1-.38.174l-4.308.006a.514.514 0 0 1-.515-.515c0-.285.333-.606.476-.749l1.09-1.09-3.17-3.14\n      1.498-1.498zM.027.574c0-.156.07-.292.177-.39A.52.52 0 0 1 .591.007L4.97 0c.29 0 .525.236.525.528 0\n      .291-.339.62-.484.766L3.904 2.409l3.105 3.084-1.499 1.5-3.083-3.098L1.319\n      5.01c-.24.242-.483.498-.773.499a.525.525 0 0 1-.525-.528L.027.573z"}))),ue=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"#000",fillRule:"evenodd"},l.default.createElement("path",{d:"M10 19h3v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5h4.286c.786 0 1.428.675 1.428 1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2s.893-2 2-2 2 .893 2 2-.893 2-2 2z"}),l.default.createElement("path",{d:"M19.5 22H11v-3h3v-5h-1.571V8.5c0-.825.642-1.5 1.428-1.5h4.286c.786 0 1.428.675 1.428 1.5V11H18v11h1.5zM16 6c-1.107 0-2-.893-2-2s.893-2 2-2 2 .893 2 2-.893 2-2 2z"}),l.default.createElement("circle",{cx:"21",cy:"21",r:"1"}),l.default.createElement("path",{d:"M20 13h2v6h-2z"}))),de=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M0 0h24v24H0z"}),l.default.createElement("circle",{cx:"12",cy:"12",r:"11",fill:"#9D9D9D"}),l.default.createElement("path",{stroke:"#FFF",strokeWidth:"2",d:"M12 11c1.66 0 2.99-1.34 2.99-3S13.66 5 12 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zM12 13c-2 0-6 1-6 3v2h12v-2c0-2-4-3-6-3z"}))),ce=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fillRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})),fe=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fillRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55\n        1.69-4.9L16.9 18.31A7.902 7.902 0 0 1 12 20zm6.31-3.1L7.1 5.69A7.902 7.902 0 0 1 12 4c4.42 0 8 3.58 8 8 0\n        1.85-.63 3.55-1.69 4.9z"})),pe=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fillRule:"evenodd",d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})),me=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fillRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM6 12.42l1.41-1.41L10 13.59 16.59 7\n        18 8.42l-8 8-4-4z"})),he=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M0 0h24v24H0z"}),l.default.createElement("path",{fill:"#000",d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"}))),ve=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",style:{background:"#fff"},viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{stroke:"#9C28C6",strokeWidth:"2",d:"M5 19c4-3.333 6.5-5.667 7.5-7C14 10 15 9 20 9"}),l.default.createElement("path",{stroke:"#19A9E0",strokeWidth:"2",d:"M6 19c2.667-1.333 5-2.667 7-4 3-2 5-2 7-2"}),l.default.createElement("path",{stroke:"#FCB13B",strokeWidth:"2",d:"M5 18c1.333-.667 2.333-2 3-4 1-3 2-9 6-9"}),l.default.createElement("path",{fill:"#000",d:"M6 4H4v14a2 2 0 0 0 2 2h14v-2H6V4z"}))),_e=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",style:{background:"#000"},viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M0 0h24v24H0z"}),l.default.createElement("path",{fill:"#FFF",d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12\n        17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3\n        3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}))),Ee=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M0 0h24v24H0z"}),l.default.createElement("path",{fill:"#FFF",d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89\n        3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12\n        7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0\n        3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0\n        1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55\n        1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15\n        3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}))),ge=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"#000",fillRule:"evenodd"},l.default.createElement("path",{d:"M10 7l5 5-5 5-5-5z"}),l.default.createElement("path",{d:"M10.005 3l9 9-9 9-1-1 8-8L9 4z"}))),ye=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("circle",{cx:"12",cy:"12",r:"9",stroke:"#000",strokeWidth:"2"}),l.default.createElement("circle",{cx:"12",cy:"12",r:"6",fill:"#000"}))),Se=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9\n      2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11zm-7-3.57L14.472 17l-.656-2.96L16\n      12.048l-2.876-.256L12 9l-1.124 2.792L8 12.048l2.184 1.992L9.528 17 12 15.43z"})),be=l.default.createElement("svg",{height:"28px",width:"8px",viewBox:"0 0 8 28"},l.default.createElement("g",{stroke:"#c6c6c6"},l.default.createElement("line",{x1:"8",y1:"0",x2:"0",y2:"28",strokeWidth:"1"}))),Ce=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M19 4V2h-2v2h-7V2H8v2H7c-1.11 0-1.99.9-1.99 2L5 17a2 2 0 0 0 2 2h13c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-1zm1\n      13H7V8h13v9zm-6.5-2.374L11.337 16l.574-2.59L10 11.667l2.517-.224L13.5 9l.983 2.443\n      2.517.224-1.911 1.743.574 2.59-2.163-1.374zM4 22c-1.1 0-2-.9-2-2V8h2v12h16v2H4z"})),Oe=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M22 8.986l-7.19-.598L12 2 9.19 8.397 2 8.986l5.46 4.564-1.64 6.783L12 16.734l6.18 3.6-1.63-6.784L22\n      8.986zM12 14.93V5.956l1.71 3.898 4.38.367L14.77 13l1 4.13-3.77-2.2z"})),Te=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M22 8.986l-7.19-.598L12 2 9.19 8.397 2 8.986l5.46 4.564-1.64 6.783L12 16.734l6.18 3.6-1.63-6.784L22\n      8.986zM12 14.93l-3.76 2.19 1-4.13-3.32-2.779 4.38-.366L12 5.956l1.71 3.898 4.38.367L14.77 13l1 4.13-3.77-2.2z"})),Re=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12 16.734l6.18 3.6-1.64-6.784L22 8.986l-7.19-.589L12 2 9.19 8.397 2 8.986l5.46 4.564-1.64 6.783z"})),we=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"20",viewBox:"0 0 16 20"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M-4-2h24v24H-4z"}),l.default.createElement("path",{fill:"#000",d:"M14 0H2C.9 0 0 .9 0 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9\n      2-2V2c0-1.1-.9-2-2-2zm0 10H6v2h8v-2zM4 10H2v2h2v-2zm10 4H6v2h8v-2zM4 14H2v2h2v-2zM2 2h5v6L4.5 6.5 2 8V2z"}))),Ae=l.default.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16"},l.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(-28.000000, -528.000000)"},l.default.createElement("g",null,l.default.createElement("g",{transform:"translate(0.000000, 31.000000)"},l.default.createElement("g",{transform:"translate(24.000000, 493.000000)"},l.default.createElement("g",null,l.default.createElement("polygon",{points:"0 0 24 0 24 24 0 24"}),l.default.createElement("path",{d:"M12,12 C14.21,12 16,10.21 16,8 C16,5.79 14.21,\n                4 12,4 C9.79,4 8,5.79 8,8 C8,10.21 9.79,12 12,12 L12,\n                12 Z M12,14 C9.33,14 4,15.34 4,18 L4,20 L20,20 L20,18 C20,15.34 14.67,14 12,14 L12,14 Z",id:"Shape",fill:"#000000"}))))))),Ie=l.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("g",{transform:"rotate(90 12 12)"},l.default.createElement("path",{stroke:"#000",strokeWidth:"2",d:"M12 3.414L3.414 12 12 20.586 20.586 12 12 3.414z"})),l.default.createElement("path",{fill:"#000",d:"M16 12l-4 4-4-4 4-4z"}))),Ne=l.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M0 0h24v24H0z"}),l.default.createElement("path",{d:"M0 0h24v24H0z"}),l.default.createElement("path",{fill:"#000",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1\n      17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1\n      1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4\n      4c0 .88-.36 1.68-.93 2.25z"}))),De=l.default.createElement("svg",{width:"24",height:"24",style:{background:"#fff"},viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{fill:"#19A9E0",fillOpacity:".2",d:"M5 19c3.115-4.76 5.876-7.711 8.283-8.855C15.69 9 17.929 8.285\n      20 8v8.234c-1.097 0-2.448.125-4.052.374-2.407.374-5.477 1.608-6.467 2-.66.263-1.868.393-3.625.392H5z"}),l.default.createElement("path",{stroke:"#19A9E0",strokeWidth:"2",d:"M6 19c2.895-1.948 4.895-3.293 6-4.034\n      1.657-1.112 4.996-2.914 8.005-2.966"}),l.default.createElement("path",{fill:"#000",d:"M6 4H4v14a2 2 0 0 0 2 2h14v-2H6V4z"}))),Pe=l.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"#000",fillRule:"evenodd"},l.default.createElement("path",{d:"M10 19h11v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5\n      h4.286c.786 0 1.428.675 1.428 1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2\n      s.893-2 2-2 2 .893 2 2-.893 2-2 2zM13 5h8v2h-8z"}))),Le=l.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"#000",fillRule:"evenodd"},l.default.createElement("path",{d:"M10 19h11v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5\n      h4.286c.786 0 1.428.675 1.428 1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2\n      s.893-2 2-2 2 .893 2 2-.893 2-2 2zM16 2h2v8h-2z"}),l.default.createElement("path",{d:"M13 5h8v2h-8z"}))),Me=l.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"#000",fillRule:"evenodd"},l.default.createElement("path",{d:"M10 19h11v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5\n      h4.286c.786 0 1.428.675 1.428 1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2\n      s.893-2 2-2 2 .893 2 2-.893 2-2 2zM16 2h2v5h-2zM16 9h2v2h-2z"}))),xe=l.default.createElement("svg",{height:"24px",version:"1.1",viewBox:"0 0 16 16",width:"24px"},l.default.createElement("g",{fill:"none",fillRule:"evenodd",id:"Icons with numbers",stroke:"none",strokeWidth:"1"},l.default.createElement("g",{fill:"#000000",id:"Group",transform:"translate(-384.000000, -144.000000)"},l.default.createElement("path",{d:"M391.5,157 C389.014719,157 387,154.985281 387,152.5 C387,152.331018 387.009314,152.164211\n        387.027464,152 L385.018945,152 C385.00639,152.165053 385,152.33178 385,152.5 C385,156.089851 387.910149,159\n        391.5,159 C395.089851,159 398,156.089851 398,152.5 C398,149.078368 395.356198,146.27423 392,146.018945\n        L392,148.027464 C394.249941,148.27615 396,150.183701 396,152.5 C396,154.985281 393.985281,157 391.5,157\n        L391.5,157 Z M388,147 L392,150 L392,144 L388,147 L388,147 Z M388,147"})))),ke=l.default.createElement("svg",{viewBox:"0 0 24 24",width:"22",height:"22"},l.default.createElement("g",null,l.default.createElement("path",{d:"M 12 1 C 9.1277778 1 6.7189086 3.0461453 6.1230469 5.7871094 L 8.078125 6.2128906 C 8.4822632 4.3538547\n        10.072222 3 12 3 C 14.27619 3 16 4.7238095 16 7 L 16 8 L 6 8 C 4.9069372 8 4 8.9069372 4 10 L 4 20 C 4 21.093063\n        4.9069372 22 6 22 L 18 22 C 19.093063 22 20 21.093063 20 20 L 20 10 C 20 8.9069372 19.093063 8 18 8 L 18 7 C\n        18 3.6761905 15.32381 1 12 1 z M 6 10 L 18 10 L 18 20 L 6 20 L 6 10 z M 12 13 C 10.9 13 10 13.9 10 15 C 10 16.1\n        10.9 17 12 17 C 13.1 17 14 16.1 14 15 C 14 13.9 13.1 13 12 13 z"}))),je=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0\n      18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})),Fe=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),l.default.createElement("path",{d:"M12.5 8H11v6l4.75 2.85.75-1.23-4-2.37zm4.837-6.19l4.607 3.845-1.28 1.535-4.61-3.843zm-10.674 0l1.282\n    1.536L3.337 7.19l-1.28-1.536zM12 4c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zm0 16c-3.86\n    0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7z"})),Ue=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),l.default.createElement("path",{d:"M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12\n    16zm0-11.47L17.74 9 12 13.47 6.26 9 12 4.53z"})),Ve=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),l.default.createElement("path",{d:"M12 4.53L17.74 9l-1.89 1.47 1.43 1.42L21 9l-9-7-2.59 2.02 1.42 1.42zm9 9.54l-1.63-1.27-.67.52 1.43\n    1.43zM3.41.86L2 2.27l4.22 4.22L3 9l9 7 2.1-1.63 1.42 1.42-3.53 2.75-7.37-5.73L3 14.07l9 7 4.95-3.85L20.73\n    21l1.41-1.41L3.41.86zM12 13.47L6.26 9l1.39-1.08 5.02 5.02-.67.53z"})),Be=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),l.default.createElement("path",{d:"M14 4l2.29 2.29-2.88 2.88 1.42 1.42 2.88-2.88L20 10V4zm-4 0H4v6l2.29-2.29\n     4.71 4.7V20h2v-8.41l-5.29-5.3z"})),He=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M0 0v24h24V0z"}),l.default.createElement("path",{fill:"#000",d:"M12 4.055c-.69 0-1.25.56-1.25 1.25v8.05c0 .6903559.5596441 1.25 1.25 1.25s1.25-.5596441\n       1.25-1.25v-8.05c0-.69-.56-1.25-1.25-1.25z"}),l.default.createElement("circle",{cx:"12",cy:"17.823",r:"1.688",fill:"#000"}))),Ge=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"20",viewBox:"0 0 26 20"},l.default.createElement("g",{fill:"#000",fillRule:"evenodd"},l.default.createElement("ellipse",{cx:"3.888",cy:"1.875",fillRule:"nonzero",rx:"1.944",ry:"1.875"}),l.default.createElement("path",{fillRule:"nonzero",d:"M0 12.5V6.28C0 5.573.573 5 1.28 5h5.216c.707 0 1.28.573 1.28 1.28v6.22H6.221V20H1.555v-7.5H0z"}),l.default.createElement("ellipse",{cx:"12.96",cy:"1.875",fillRule:"nonzero",rx:"1.944",ry:"1.875"}),l.default.createElement("path",{fillRule:"nonzero",d:"M9.072 12.5V6.28c0-.707.573-1.28 1.28-1.28h5.216c.707 0\n        1.28.573 1.28 1.28v6.22h-1.555V20h-4.666v-7.5H9.072z"}),l.default.createElement("path",{d:"M26 10.756h-3.028v2.994h-1.72v-2.994h-3.028V9.244h3.028V6.25h1.72v2.994H26z"}))),Ye=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},l.default.createElement("g",{fill:"#979797",fillRule:"nonzero"},l.default.createElement("path",{d:"M8.826 7.955a1.714 1.714 0 0 0-2.167 1.65c0 .943.767 1.711 1.711 1.711a1.714 1.714 0 0 0\n      1.65-2.167l4.768-4.768.771.102 2.413-2.413-1.825-.242-.243-1.826-2.413 2.413.103.772-4.768 4.768z"}),l.default.createElement("path",{d:"M8.554 6.317l1.41-1.411a4.954 4.954 0 0 0-5.102 1.19 4.964 4.964 0 0 0 0 7.016 4.964 4.964 0 0 0\n      7.016 0 4.96 4.96 0 0 0 1.19-5.106l-1.41 1.41A3.295 3.295 0 1 1 6.04 7.275a3.277 3.277 0 0 1 2.513-.957z"}),l.default.createElement("path",{d:"M14.284 6.794A6.544 6.544 0 0 1 13 14.233a6.545 6.545 0 0 1-9.258 0 6.545 6.545 0 0 1 0-9.257\n      6.55 6.55 0 0 1 7.44-1.286l1.347-1.348C9.332.509 5.181.957 2.452 3.686a8.363 8.363 0 0 0 0 11.833 8.363\n      8.363 0 0 0 11.832 0c2.73-2.73 3.178-6.88 1.345-10.077l-1.345 1.352z"}))),qe=l.default.createElement("svg",{x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 40 40",enableBackground:"new 0 0 40 40"},l.default.createElement("path",{opacity:"0.2",fill:"#000",d:"M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n      s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,\n      5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n      c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,\n      11.634C31.834,26.541,26.626,31.749,20.201,31.749z"}),l.default.createElement("path",{fill:"#000",d:"M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n      C22.32,8.481,24.301,9.057,26.013,10.047z"},l.default.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"0.5s",repeatCount:"indefinite"}))),ze=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.default.createElement("path",{fillRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})),We=l.default.createElement("svg",{width:"12px",height:"12px",viewBox:"0 0 12 12"},l.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},l.default.createElement("g",{transform:"translate(-12.000000, -96.000000)",fill:"#0FC62C"},l.default.createElement("rect",{x:"12",y:"96",width:"12",height:"12"})))),Ke=l.default.createElement("svg",{width:"12px",height:"12px",viewBox:"0 0 12 12"},l.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},l.default.createElement("g",{transform:"translate(-12.000000, -21.000000)",fill:"#CDCDCD"},l.default.createElement("path",{d:"M12,21 L24,21 L24,33 L12,33 L12,21 Z M14,23 L14,31 L22,31 L22,23 L14,23 Z M19,24\n        L19,30 L17,30 L17,24 L19,24 Z"})))),Xe=l.default.createElement("svg",{width:"12px",height:"12px",viewBox:"0 0 12 12"},l.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},l.default.createElement("g",{transform:"translate(-12.000000, -59.000000)",fill:"#5291DD"},l.default.createElement("path",{d:"M12,59 L24,59 L24,71 L12,71 L12,59 Z M18,61 L18,69 L22,69 L22,61 L18,61 Z"})))),Ze=l.default.createElement("svg",{width:"24px",height:"24px"},l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{fill:"#000",stroke:"#FFF",strokeWidth:"2",d:"M12 5.586L18.414 12 12 18.414 5.586 12 12 5.586z"}))),Je=l.default.createElement("svg",{width:"24px",height:"24px"},l.default.createElement("g",{transform:"rotate(90 18 18), translate(2, 14)"},l.default.createElement("path",{d:"M10 2l8 8-8 8L2 10z",stroke:"#000",strokeWidth:"2px",fill:"#FFF"}),l.default.createElement("path",{d:"M14 10l-4 4-4-4 4-4z",fill:"#000"}))),Qe=l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},l.default.createElement("path",{d:"M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z"}));ne.propTypes=s,ne.defaultProps=u,t.default={NOTES:c,COHORTS:f,UPDATED:p,VISITORS:m,ON_TARGET:h,OFF_TARGET:N,CALENDAR:Q,MENU:v,SEARCH:y,SEARCH_HISTORICAL:S,SEARCH_PLUS:b,USER:T,DATE_RANGE:w,LANGUAGE:A,DETAILS:R,CROSS:I,CROSS_O:D,SITES:U,CHEVRON_UP:x,CHEVRON_DOWN:M,CHEVRON_LEFT:F,CHEVRON_RIGTH:j,ARROW_RIGHT_LONG:_,ARROW_RIGHT:E,ARROW_LEFT:g,FILTER:V,MORE_HORIZ:B,DUPLICATE:H,EDIT:Y,OPTIMISE:C,ADJUSTMENT:O,DOWNLOAD:Z,EMAIL:he,HOME:d,SAVE:J,NEW:q,COMPARE:z,ARCHIVE:W,PLUS:$,EXPORT:ee,SHARE:ae,APPROVE:re,EXPAND:le,EXPANDED:ie,COLLAPSED:oe,FULL_SCREEN:se,STAR_IN_PROGRESS:Oe,STAR_ACTIVE:Oe,STAR_PENDING:Te,STAR_COMPLETED:Re,VISITORS_EXCLAMATION:ue,USER_PROFILE:de,INFO:ce,INFO_O:je,ERROR:fe,WARNING:pe,SUCCESS:me,CHART_MENU:ve,GRAPH_UNCERTAINTY:De,VISIBLE:_e,NOT_VISIBLE:Ee,ARROW_RIGHT_SQUARE_FILLED:ge,CIRCLE_FILLED_LARGE:ye,EVENT:Se,SEPARATOR:be,MULTIPLE_EDIT:P,FILTER_DESCENDING:L,FILTER_ASCENDING:k,EVENT_DUPLICATE:Ce,REFERENCE_STUDIES:we,USER_OWNER:Ae,ROMB_EMPTY:Ie,INFO_Q:Ne,PATIENTS_UNDER_ALLOCATION:Pe,PATIENTS_OVER_ALLOCATION:Le,PATIENTS_GENERAL:Me,UNDO:xe,UNLOCK:ke,ALARM:Fe,GROUP:Ue,UNGROUP:Ve,MISMATCH:Be,ATTENTION:He,OVERALLOCATION:Ge,TARGET:Ye,ITEM_LOADER:qe,duplicateIconComponent:G,exportIconComponent:te,shareIconComponent:ne,archiveIconComponent:K,removeIconComponent:X,REMINDER:ze,SITE_APPROVED:We,SITE_IN_PROGRESS:Ke,SITE_IN_REVIEW:Xe,STUDY_SITE:Ze,STUDY_SITE_SELECTED:Je,FLAG:Qe}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(510),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={MILESTONES:"MILESTONES",PATIENTS_RANDOMIZED:"PATIENTS_RANDOMIZED",DATE:"DATE"};t.default=n,t.TRIGGER_START_MILESTONES={GLOBAL_FP:"GLOBAL_FP",FSIV:"FSIV",FPFV:"FPFV",FPFT:"FPFT"},t.ITEM_STATE={NEW:"NEW",UPDATED:"UPDATED",DELETED:"DELETED"},t.INITIAL_COHORT_ID="INITIAL_COHORT"},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getMetadata=t.getStudiesIds=t.getScenarioData=t.getScenarioFromStore=t.getStudyData=t.getPlatformRegions=void 0;var r=a(43),l=a(11),i=n(l),o=a(17),s=n(o),u=a(40),d=n(u),c=[],f=function(e,t){return e.study[+t.params.id]?e.study[+t.params.id]:null},p=(t.getPlatformRegions=function(e){return e.platform.regions},t.getStudyData=(0,r.createSelector)(f,function(e){return e})),m=t.getScenarioFromStore=function(e,t){return e.scenarios[t.params.scenarioId]||null},h=(t.getScenarioData=(0,r.createSelector)(m,function(e){return e}),function(e){return(0,i.default)(e,"studies.studies",c)}),v=(t.getStudiesIds=(0,r.createSelector)(h,function(e){return e.filter(function(e){return e.state.status!==s.default.ACTIVE}).map(function(e){return e.id})}),function(e){return e.auth.user});t.getMetadata=(0,r.createSelector)([p,v],function(e,t){return(0,d.default)(t,e)})},,,,,,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChartDataContext=void 0;var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(11),m=n(p),h=a(27),v=a(50),_=n(v),E=a(14),g=a(17),y=n(g),S=a(7),b=a(125),C=t.ChartDataContext=(0,u.createContext)({}),O=function(e){function t(){return l(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e){return!(0,_.default)(this.props.data,e.data)||this.props.scenario.status!==e.scenario.status||this.props.showOverallocation!==e.showOverallocation||!(0,_.default)(this.props.scenario.study_level_data,e.scenario.study_level_data)||this.props.isOptimizing!==e.isOptimizing}},{key:"render",value:function(){var e=this.props,t=e.scenario,a=e.data,n=e.children,l=e.studyStatus,i=e.cohortName,o=e.isOverallocated,s=e.showOverallocation,u=e.isOptimizing;try{var c=t.isImpact,f=(0,S.getMomentDate)(t.fp),p=t.approvedData?(0,m.default)(t,"approvedData.fp"):f,v=t.status===E.SCENARIO_STATUS.PREV_APPROVED||t.fromPrevApproved,_=(l===y.default.ACTIVE||l===y.default.COMPLETED)&&(t.status===E.SCENARIO_STATUS.APPROVED||null!==t.source_scenario_id||v||null!==t.adjust_source_cohort_id),g=(l===y.default.ACTIVE||l===y.default.COMPLETED)&&(t.cohorts&&t.cohorts.length>0||i),O=0===(0,m.default)(this.props.scenario,"cohorts",[]).length&&((0,m.default)(a,"overallocatedData")||(0,m.default)(a,"adjusted_overallocatedData")),T=[],R=[],w=[];(0,m.default)(a,"curves",[]).length&&(T=(0,b.updateSeries)(a.curves[2],p,f),R=(0,b.updateSeries)(a.curves[1],p,f),w=(0,b.updateSeries)(a.curves[0],p,f));var A=void 0,I=void 0,N=void 0;A=(0,b.updateActualSeries)(a.actual_curves[0],f),I=(0,b.updateActualSeries)(a.actual_curves[1],f),N=(0,b.updateActualSeries)(a.actual_curves[2],f),A=A.sort(b.sortByDateAscending),I=I.sort(b.sortByDateAscending),N=N.sort(b.sortByDateAscending),A=(0,b.sliceActualSeries)(A),I=(0,b.sliceActualSeries)(I);var D=(0,b.updateActualSeries)(a.actual_curves[3],f),P=(0,b.updateActualSeries)(a.actual_curves[4],f);D=D.sort(b.sortByDateAscending),P=P.sort(b.sortByDateAscending);var L=a.overallocatedData?a.overallocatedData.lpft:a.lpft,M=t.target_lpft?(0,S.getMomentDate)(t.target_lpft):t.end_date,x=a.overallocatedData?a.overallocatedData.fsiv:a.fsiv,k=a.overallocatedData?a.overallocatedData.fpfv:a.fpfv,j=void 0;j=a.fpft?a.fpft:k&&t.fpfv_fpft?k.clone().add(t.fpfv_fpft,"d"):null;var F=void 0;F=a.overallocatedData?a.overallocatedData.lpfv:a.lpfv?a.lpfv:L&&a.fpfv_fpft>=0?L.clone().subtract(a.fpfv_fpft,"d"):null;var U=w.length>0&&R.length>0&&T.length>0,V=a.actual_date&&a.actual_date.isAfter(f)?a.actual_date:null,B=a.actual_f_lpft,H=a.actual_fsiv,G=a.actual_fpfv,Y=a.actual_fpft,q=a.actual_lpfv,z=A.length>0&&I.length>0&&N.length>0,W=a.adjusted_overallocatedData?a.adjusted_overallocatedData.lpft:a.adjusted_lpft,K=a.adjusted_overallocatedData?a.adjusted_overallocatedData.fsiv:a.adjusted_fsiv,X=a.adjusted_overallocatedData?a.adjusted_overallocatedData.fpfv:a.adjusted_fpfv,Z=X?X.clone().add(a.adjusted_fpfv_fpft,"d"):null,J=void 0;J=a.adjusted_overallocatedData?a.adjusted_overallocatedData.lpfv:W&&a.adjusted_fpfv_fpft>=0?W.clone().subtract(a.adjusted_fpfv_fpft,"d"):null;var Q=(0,S.getMomentDate)(t.createdAt),$=t.exact_copy,ee=$&&!t.hasAdjustedOrigin?f.clone():(0,S.getMomentDate)((0,m.default)(a,"actualTimeseriesSnapshot.actual_date",t.hasAdjustedOrigin?Q.clone():f.clone()));ee&&!ee.isBefore(f)||(ee=f.clone()),t.hasAdjustedOrigin&&(w=(0,b.updateAdjustedSeries)(w,f,ee),R=(0,b.updateAdjustedSeries)(R,f,ee),T=(0,b.updateAdjustedSeries)(T,f,ee));var te=a.adjusted_curves?(0,b.updateSeries)(a.adjusted_curves[0],f,f):[],ae=a.adjusted_curves?(0,b.updateSeries)(a.adjusted_curves[1],f,f):[],ne=a.adjusted_curves?(0,b.updateSeries)(a.adjusted_curves[2],f,f):[],re=[L,B,W,V,ee];_&&B&&L||g||re.push(M);var le=(0,h.max)(re),ie=$&&!t.hasAdjustedOrigin?te:(0,b.updateAdjustedSeries)(te,f,ee),oe=$&&!t.hasAdjustedOrigin?ae:(0,b.updateAdjustedSeries)(ae,f,ee),se=$&&!t.hasAdjustedOrigin?ne:(0,b.updateAdjustedSeries)(ne,f,ee),ue=W&&K&&Z&&J&&te.length>0&&ae.length>0&&ne.length>0,de=_&&ue;if(_){if(c){var ce=(0,b.getMaxValue)(T),fe=T.find(function(e){return e.value===ce});if(fe&&fe.date.isBefore(L))for(var pe=fe.date.clone().add(1,"d");pe<=L;)T.push({date:pe,value:fe.value}),pe=pe.clone().add(1,"d")}z&&V&&B&&(A=(0,b.sliceCurveData)(A,g?V:B),I=(0,b.sliceCurveData)(I,g?V:B),N=(0,b.sliceCurveData)(N,g?V:B),N=(0,b.fillMissingValues)(N,g?V:B),D=(0,b.fillMissingValues)(D,g?V:B),P=(0,b.fillMissingValues)(P,g?V:B))}var me=(0,b.mergeQData)(D,P),he=R.filter(function(e){return e.date>=x}),ve=T.filter(function(e){return e.date>=x});if(!s){var _e=(0,h.max)([L,M]);if(w=(0,b.sliceCurveData)(w,_e),R=(0,b.sliceCurveData)(R,_e),T=(0,b.sliceCurveData)(T,_e),k&&F){var Ee=k.diff(x,"d"),ge=F.clone().subtract(Ee-7,"d");w=w.filter(function(e){return e.date<=ge})}he=he.filter(function(e){return e.date<=F}),ve=ve.filter(function(e){return e.date<=L}),ue&&(ie=(0,b.sliceCurveData)(ie,W),oe=(0,b.sliceCurveData)(oe,W),se=(0,b.sliceCurveData)(se,W))}var ye=he.find(function(e){return e.date.isSame(F)}),Se=(0,m.default)(ye,"value",(0,b.getMaxValue)(he)),be=ve.find(function(e){return e.date.isSame(L)}),Ce=(0,m.default)(be,"value",(0,b.getMaxValue)(ve)),Oe=oe.find(function(e){return e.date.isSame(J)}),Te=(0,m.default)(Oe,"value",(0,b.getMaxValue)(oe)),Re=se.find(function(e){return e.date.isSame(W)}),we=(0,m.default)(Re,"value",(0,b.getMaxValue)(se)),Ae=(0,b.getMinMaxDate)(w),Ie=(0,b.getMinMaxDate)(R),Ne=(0,b.getMinMaxDate)(T),De=[Ae,Ie,Ne].map(function(e){return e[1]}).filter(function(e){return null!==e&&void 0!==e}),Pe=void 0,Le=void 0,Me=void 0,xe=void 0;if(_&&z){Pe=(0,b.getMinMaxDate)(A),Le=(0,b.getMinMaxDate)(I),Me=(0,b.getMinMaxDate)(N),xe=(0,b.getMinMaxDate)(me);var ke=[Pe,Le,Me,xe].map(function(e){return e[1]});ke.push(B),De=De.concat(ke)}var je=void 0,Fe=void 0,Ue=void 0;if(de){je=(0,b.getMinMaxDate)(ie),Fe=(0,b.getMinMaxDate)(oe),Ue=(0,b.getMinMaxDate)(se);var Ve=[je,Fe,Ue].map(function(e){return e[1]});De=De.concat(Ve)}_&&[x,k,j,F,L,V,B,H,G,Y,q].filter(function(e){return null!==e&&void 0!==e}).forEach(function(e){e.isSameOrBefore(le)&&De.push(e)});var Be=!1;0===De.filter(function(e){return e}).length&&(Be=!0);var He=(0,h.max)([].concat(r(De),[le]).filter(function(e){return e}).sort(b.sortByDateAscending)),Ge=!1;He.isSameOrBefore(f)&&(Ge=!0),le=(0,h.max)([].concat(re,[He]));var Ye=(0,b.getMaxValue)(w),qe=[Ye],ze=s?(0,b.getMaxValue)(R):Se,We=s?(0,b.getMaxValue)(T):Ce,Ke=[ze,We,a.patient_allocation],Xe=void 0,Ze=void 0,Je=void 0,Qe=(0,b.getMaxValue)(D),$e=(0,b.getMaxValue)(P);_&&z&&(Ze=(0,b.getMaxValue)(I),Je=(0,b.getMaxValue)(N),Ke.push(Ze,Je,Qe,$e),Xe=(0,b.getMaxValue)(A),qe.push(Xe));var et=void 0,tt=void 0,at=void 0;de&&(tt=s?(0,b.getMaxValue)(oe):Te,at=(0,b.getMaxValue)(se)||0,Ke.push(tt,at),et=(0,b.getMaxValue)(ie)||0,qe.push(et));for(var nt=Math.max.apply(Math,r(Ke.filter(function(e){return void 0!==e}))),rt=Math.max.apply(Math,r(qe.filter(function(e){return void 0!==e}))),lt=(0,b.getMonthsTickValues)(f,He,10),it={siv:w,screening:he,enrolment:ve,actualSiv:A,actualScreening:I,actualEnrolment:N,actualQ25Enrolment:P,actualQ75Enrolment:D,adjustedSiv:ie,adjustedScreening:oe,adjustedEnrolment:se},ot=[],st=f.clone();st<=le;)ot.push({date:st,formattedDate:st.format("DD-MM-YYYY")}),st=st.clone().add(1,"d");ot=(0,b.getAccumulatedSeries)(it,ot);var ut={scenario:t,startDate:f,createdAt:Q,data:a,cohortName:i,latestDate:le,snapshotActualDate:ee,maxValue:He,maxValuesArray:De,monthsTickValues:lt,xDataSource:ot,isExactCopy:$,adjustedAreValid:ue,showAdjusted:de,isOverallocated:o,isImpact:c,isApproved:_,trackingCohortsView:g,hasOverallocation:O,showOverallocation:s,genericsAreValid:U,actualsAreValid:z,isPrevApproved:v,showNoData:Be,showWrongData:Ge,dataReady:!0,isOptimizing:u,siv:w,filteredScreening:he,filteredEnrolment:ve,actualSiv:A,actualScreening:I,actualEnrolment:N,actualQEnrolment:me,adjustedSiv:ie,adjustedScreening:oe,adjustedEnrolment:se,pLpft:L,tLpft:M,fsiv:x,fpfv:k,fpft:j,lpfv:F,actualDate:V,actualFlpft:B,actualFsiv:H,actualFpfv:G,actualFpft:Y,actualLpfv:q,adjustedLpft:W,adjustedFsiv:K,adjustedFpfv:X,adjustedFpft:Z,adjustedLpfv:J,targetScreeningValue:Se,targetEnrolmentValue:Ce,targetAdjustedScreeningValue:Te,targetAdjustedEnrolmentValue:we,sitesMax:rt,patMax:nt,sivMax:Ye,screeningMax:ze,enrolmentMax:We,actualSivMax:Xe,actualScreeningMax:Ze,actualEnrolmentMax:Je,actualQ75Max:Qe,actualQ25Max:$e,adjustedSivMax:et,adjustedScreeningMax:tt,adjustedEnrolmentMax:at};return d.default.createElement(C.Provider,{value:ut},n)}catch(e){return console.log(e),null}}}]),t}(d.default.Component);O.defaultProps={isOverallocated:!1,showOverallocation:!1,cohortName:null,studyStatus:"PLANNED",isOptimizing:!1},O.propTypes={scenario:f.default.object.isRequired,studyStatus:f.default.string,cohortName:f.default.object,data:f.default.object.isRequired,children:f.default.node.isRequired,isOverallocated:f.default.bool,showOverallocation:f.default.bool,isOptimizing:f.default.bool},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(13),u=n(s),d=function(e){var t=e.generatedFields,a=e.cellName,n=e.isNotEmpty;return t&&t.includes(a)&&n?l.default.createElement(u.default,{mouseEnterDelay:.3,overlay:l.default.createElement("span",null,"Data not available in Impact - derived by FPO")},l.default.createElement("svg",{className:"fpo-generated-data-tooltip",width:"8",height:"8",viewBox:"0 0 8 8"},l.default.createElement("path",{fill:"#00C329",fillRule:"evenodd",d:"M0 0l8 8V0z"}))):null};d.defaultProps={generatedFields:null,cellName:"",isNotEmpty:!0},d.propTypes={generatedFields:o.default.array,cellName:o.default.string,isNotEmpty:o.default.oneOfType([o.default.bool,o.default.number,o.default.string])},t.default=l.default.memo(d)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SITES_FILTER=[{key:"selected",value:"Selected sites"},{key:"all",value:"All sites"}],t.SITES_FILTER_KEYS={SELECTED:"selected",ALL:"all"},t.STUDIES_FILTER=[{key:"studies_complete",value:"Completed",tooltip:"Based on studies completed in the indication by center in last 3 years"},{key:"studies_active",value:"Active"}],t.STUDIES_FILTER_KEYS={COMPLETED:"studies_complete",ACTIVE:"studies_active"},t.METRICS_FILTER=[{key:"median_time_to_query",value:"Median time to query close"},{key:"median_time_to_entry",value:"Median time to entry"},{key:"mvr_issues_raised",value:"MVR issues raised"},{key:"patients_with_ie_protocol_deviation",value:"Patients w/I/E protocol deviation"},{key:"query_rate",value:"Query Rate"}],t.METRICS_FILTER_KEYS={MEDIAN_TIME_TO_QUERY:"median_time_to_query",MEDIAN_TIME_TO_ENTRY:"median_time_to_entry",MVR_ISSUES_RAISED:"mvr_issues_raised",PATIENTS_PROTOCOL_DEVIATION:"patients_with_ie_protocol_deviation",QUERY_RATE:"query_rate"},t.TABLE_VIEW={HISTORICAL:"HISTORICAL",FORECAST:"FORECAST",CURRENT:"CURRENT"}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.hasTrackingData=t.getMultiSelection=t.areSitesListCustomized=t.isMatchedBySearchInput=t.isMatchedByExpFilters=t.getActivePagesFromStore=t.getSortOptionsFromStore=t.getSitesSearchValueFromStore=t.getExperienceSitesFilterFromStore=t.getLoadingSitesStatus=t.getInitialSitesSelectionFromStore=t.getExternalSitesFilterFromStore=t.getInternalSitesFilterFromStore=t.getSitesDataAvailability=t.getSitesFromStore=t.createDeepEqualSelector=t.PER_PAGE=t.EMPTY_SITES=void 0;var r=a(43),l=a(11),i=n(l),o=a(50),s=n(o),u=t.EMPTY_SITES=[],d=(t.PER_PAGE=10,t.createDeepEqualSelector=(0,r.createSelectorCreator)(r.defaultMemoize,s.default),t.getSitesFromStore=function(e,t){return e.sites[t.scenarioId]&&e.sites[t.scenarioId][t.countryId]?e.sites[t.scenarioId][t.countryId]:u});t.getSitesDataAvailability=function(e){return e.sites.sitesDataAvailable},t.getInternalSitesFilterFromStore=function(e){return e.sites.showInternalSites},t.getExternalSitesFilterFromStore=function(e){return e.sites.showExternalSites},t.getInitialSitesSelectionFromStore=function(e){return e.sites.showInitialSelection},t.getLoadingSitesStatus=function(e){return e.sites.loadingSites},t.getExperienceSitesFilterFromStore=function(e){return{piPediatric:e.sites.piPediatric,piAdolescence:e.sites.piAdolescence,pcPediatric:e.sites.pcPediatric,pcAdolescence:e.sites.pcAdolescence}},t.getSitesSearchValueFromStore=function(e){return e.sites.searchSitesValue&&e.sites.searchSitesValue.length>=3?e.sites.searchSitesValue:""},t.getSortOptionsFromStore=function(e){return e.sites.sortData},t.getActivePagesFromStore=function(e){return e.sites.activePages},t.isMatchedByExpFilters=function(e,t){var a=[],n=!1;return t.piPediatric&&a.push("investigator_center.investigator.has_pediatric_exp"),t.piAdolescence&&a.push("investigator_center.investigator.has_adolescent_exp"),t.pcPediatric&&a.push("investigator_center.site.has_pediatric_exp"),t.pcAdolescence&&a.push("investigator_center.site.has_adolescent_exp"),a.length?a.forEach(function(t){(0,i.default)(e,t)&&(n=!0)}):n=!0,n},t.isMatchedBySearchInput=function(e,t){var a=!1,n=[],r=(0,i.default)(e,"investigator_center.investigator.name")||"";n.push(r);var l=(0,i.default)(e,"investigator_center.center.name")||"";return n.push(l),n.forEach(function(e){e.toLowerCase().indexOf(t.toLowerCase())>-1&&(a=!0)}),a},t.areSitesListCustomized=(0,r.createSelector)(d,function(e){return e.filter(function(e){return null!==e.state.status}).length>0}),t.getMultiSelection=(0,r.createSelector)(d,function(e){return e.filter(function(e){return e.multiSelected}).length>0}),t.hasTrackingData=(0,r.createSelector)(d,function(e){return e.filter(function(e){return e.studyLevelData}).length>0})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){var a=[];return e.forEach(function(e){var n=(0,h.default)(e.start_date).diff(t,"d"),r=(0,h.default)(e.end_date).diff(t,"d"),l=(0,_.default)(e);l.startWeek=n,l.endWeek=r,n>=0&&!e.disabled&&a.push(l)}),a}function o(e){if(!e||!e[0])return e;for(var t=e[0][0],a=[],n=1;n<t;n+=1)a.push([n,0]);return a.concat(e)}function s(e){var t=new Set;return e.forEach(function(e){e.countries.forEach(function(e){t.add(e.country_name)})}),[].concat(l(t.values()))}function u(e,t,a,n,r,l,i){var o=i||E.getCurvesAndMilestones,s=e.lpft,u=void 0,d=void 0,c=e.actualTimeseriesSnapshot||{},f=c.actual_date,p=c.sites_initiated,m=c.patients_screened,h=c.patients_randomized,v=f?(0,g.getMomentDate)(f):null;if(t.isAfter(s)?u=a:d=a,u)d=0;else{var _=5*a,y=0;do{var S=(0,g.getMomentDate)(r),b=(0,g.getMomentDate)(e["25_si"]),C=(0,g.getMomentDate)(e["50_si"]),O=(0,g.getMomentDate)(e["90_si"]),T=(0,g.getMomentDate)(e.fsiv),R=(0,g.getMomentDate)(e.fpfv),w=o(n,S,l,T,R,b,C,O,+e.num_sites,+e.patient_allocation,e.sas,e.screening_failure,_,"",e.events,v,p,m,h);if(y+=1,w.lpft&&w.lpft.isSameOrBefore(t)){u=_;break}if(y>=5e3)return-1;_*=5}while(!u)}return(d+u)/2}function d(e){return e?E.getCurvesAndMilestonesAdjusted:E.getCurvesAndMilestones}function c(e){var t,a=e.invalidFields,n=e.fpfv,l=e.fsiv,i=e.fpfvFpft,o=e.si25,s=e.si50,u=e.si90,d=e.nSites,c=e.patientAllocation,f=e.randomisationRate,p=e.SAS,m=e.SF,h=e.prefix,v=e.events,_=e.errorMessages,E=e.actualTimeseriesSnapshot,g=void 0===E?null:E;return t={error:!0},r(t,h+"invalidFields",a),r(t,h+"curves",[[],[],[]]),r(t,h+"lpft",null),r(t,h+"fpfv_lpfv",null),r(t,h+"fpp_fpfv",null),r(t,h+"fpfv",n),r(t,h+"fpft",null),r(t,h+"fsiv",l),r(t,h+"fpfv_fpft",i),r(t,h+"25_si",o),r(t,h+"50_si",s),r(t,h+"90_si",u),r(t,h+"num_sites",d),r(t,h+"patient_allocation",c),r(t,h+"randomisation_rate",f),r(t,h+"sas",p),r(t,h+"screening_failure",m),r(t,h+"sr",m<1&&f?f/(1-m):null),r(t,"prefix",h),r(t,h+"events",v),r(t,"errorMessages",_),r(t,"actualTimeseriesSnapshot",g),t}function f(e,t,a){var n=e.find(function(e){return Math.round(e[1])>=1});if(!n)return e;var r=n[0]-t.diff(a,"d");return e.slice(r).map(function(e){return[e[0]-r,e[1]]})}function p(e,t,a,n){if(!t||!a||!n)return e;var r=t.diff(n,"d"),l=a.diff(n,"d"),i=e.filter(function(e){var t=e[0];return t>=r&&t<l}),o=1/i.length,s=i.reduce(function(e,t,a){return e[t[0]]=a*o,e},{});return e.map(function(e){var t=e.slice();return Reflect.has(s,e[0])&&(t[1]=Reflect.get(s,e[0])),t[1]=Number(t[1].toFixed(2)),t})}Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_CALCULATION_PERIOD=t.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE=t.MAX_CURVE_LENGTH=void 0,t.prepareCountryEventsForCalculation=i,t.unshiftElementsToCurve=o,t.getUniqueCohortsCountries=s,t.calcRandomisationRate=u,t.getCalcFunction=d,t.getErrorCalculationResultObject=c,t.shiftCurve=f,t.updateCurveWithZeroToOne=p;var m=a(10),h=n(m),v=a(31),_=n(v),E=a(130),g=a(7);t.MAX_CURVE_LENGTH=36470,t.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE="Please amend the entered parameters as the P/LPFT calculated\n is longer than permitted",t.MAX_CALCULATION_PERIOD=7300},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=!0;return e.locations.forEach(function(e){return e.countries.forEach(function(e){e.patients&&""!==e.patients||(t=!1),e.sites&&""!==e.sites||(t=!1)})}),t}function l(e){for(var t=e.cohorts.filter(function(e){return e.state!==b.ITEM_STATE.DELETED}),a=!0,n=0;n<t.length;n+=1){var l=t[n];if(!l.name||""===l.name){a=!1;break}for(var i=0;i<t.length;i+=1)if(t[i].id!==l.id&&t[i].name===l.name){a=!1;break}if(0===l.locations.length){a=!1;break}var o=l.trigger;switch(o.trigger_type){case C.default.MILESTONES:if(!o.start_milestone){a=!1;break}if(o.start_milestone&&o.start_milestone!==b.TRIGGER_START_MILESTONES.GLOBAL_FP&&!o.source_cohort_id){a=!1;break}break;case C.default.PATIENTS_RANDOMIZED:if(!o.source_cohort_id||!o.num_patients||""===o.num_patients){a=!1;break}break;case C.default.DATE:default:if(!o.start_date){a=!1;break}}a&&(a=r(l))}return a}function i(e,t){return e.id===b.INITIAL_COHORT_ID||t.length>0&&e.id===t[0].id||0!==t.filter(function(t){return t.trigger.source_cohort_id===e.id&&t.state!==b.ITEM_STATE.DELETED}).length}function o(e,t){return e.map(function(e){var a=(0,O.getMomentDate)(e.startDate),n=(0,O.getMomentDate)(e.data.fsiv),r=(0,O.getMomentDate)(e.data.fpfv),l=(0,O.getMomentDate)(e.data.fpft),i=r.clone().add(e.data.fpfv_lpfv,"d"),o=(0,O.getMomentDate)(e.data.lpft),s=(0,O.getMomentDate)(t.end_date),u=e.data.actual_fsiv&&e.data.actual_fsiv.isAfter(a)?(0,O.getMomentDate)(e.data.actual_fsiv):null,d=e.data.actual_fpfv&&e.data.actual_fpfv.isAfter(a)?(0,O.getMomentDate)(e.data.actual_fpfv):null,c=e.data.actual_fpft&&e.data.actual_fpft.isAfter(a)?(0,O.getMomentDate)(e.data.actual_fpft):null,f=e.data.actual_fpfv_lpfv?r.clone().add(e.data.actual_fpfv_lpfv,"d"):null,p=o,h=(0,O.getMomentDate)(e.data.actual_date),v=e.data.adjusted_fsiv&&e.data.adjusted_fsiv.isAfter(a)?(0,O.getMomentDate)(e.data.adjusted_fsiv):null,_=e.data.adjusted_fpfv&&e.data.adjusted_fpfv.isAfter(a)?(0,O.getMomentDate)(e.data.adjusted_fpfv):null,E=e.data.adjusted_fpft&&e.data.adjusted_fpft.isAfter(a)?(0,O.getMomentDate)(e.data.adjusted_fpft):null,g=e.data.adjusted_fpfv_lpfv?r.clone().add(e.data.adjusted_fpfv_lpfv,"d"):null,b=e.data.adjusted_lpft,C=(0,O.getMomentDate)(t.adjusted_createdAt),T=t.exact_copy&&!t.hasAdjustedOrigin?a.clone():(0,O.getMomentDate)((0,y.default)(e,"data.actualTimeseriesSnapshot.actual_date",t.hasAdjustedOrigin&&t.createdAt?t.createdAt.clone():a.clone()));return T&&!T.isBefore(a)||(T=a.clone()),{cohortId:e.cohortId,cohortName:e.cohortName,countriesLength:e.countriesLength,isEmptyGeneric:e.isEmptyGeneric,isEmptyActual:e.isEmptyActual,isEmptyAdjusted:e.isEmptyAdjusted,fromPrevApproved:e.fromPrevApproved,milestones:[{label:"FP",date:a,iconType:"CIRCLE",color:S.COLORS.BLACK},{label:"FSIV",date:n,iconType:"DIAMOND",color:S.COLORS.YELLOW},{label:"FPFV",date:r,iconType:"DIAMOND",color:S.COLORS.PURPLE},{label:"FPFT",date:l,iconType:"DIAMOND",color:S.COLORS.BLUE},{label:"LPFV",date:i,iconType:"DIAMOND",color:S.COLORS.PURPLE},{label:"P/LPFT",date:o,iconType:"CIRCLE_FILLED",color:S.COLORS.BLACK},{label:"T/LPFT",date:s,iconType:"CIRCLE_FILLED",color:S.COLORS.BLACK},{label:"ACTUAL",date:h,iconType:"DIAMOND",color:S.COLORS.BLACK}],actual_milestones:[{label:"FP",date:a,iconType:"CIRCLE",color:S.COLORS.BLACK},{label:"FSIV",date:u,iconType:"DIAMOND",color:S.COLORS.YELLOW},{label:"FPFV",date:d,iconType:"DIAMOND",color:S.COLORS.PURPLE},{label:"FPFT",date:c,iconType:"DIAMOND",color:S.COLORS.BLUE},{label:"LPFV",date:f,iconType:"DIAMOND",color:S.COLORS.PURPLE},{label:"P/LPFT",date:p,iconType:"CIRCLE_FILLED",color:S.COLORS.BLACK},{label:"T/LPFT",date:s,iconType:"CIRCLE_FILLED",color:S.COLORS.BLACK},{label:"ACTUAL",date:h,iconType:null,color:S.COLORS.BLACK}],adjusted_milestones:[{label:"FP",date:a,iconType:"CIRCLE",color:S.COLORS.BLACK},{label:"FSIV",date:v,iconType:"DIAMOND",color:S.COLORS.YELLOW},{label:"FPFV",date:_,iconType:"DIAMOND",color:S.COLORS.PURPLE},{label:"FPFT",date:E,iconType:"DIAMOND",color:S.COLORS.BLUE},{label:"LPFV",date:g,iconType:"DIAMOND",color:S.COLORS.PURPLE},{label:"A/LPFT",date:b,iconType:"CIRCLE_FILLED",color:S.COLORS.BLACK},{label:"P/LPFT",date:o,iconType:"CIRCLE_FILLED",color:S.COLORS.BLACK},{label:"ACTUAL",date:h,iconType:null,color:S.COLORS.BLACK}],adjustedStart:C,snapshotActualDate:T,actualDate:h,minDate:a,maxDate:(0,m.max)([a,n,r,l,i,o,s,u,d,c,f,v,_,E,g,b,h])}})}function s(e,t){var a=e.trigger;switch(a.trigger_type){case C.default.PATIENTS_RANDOMIZED:if(!a.num_patients||!a.source_cohort_id)return p.default.createElement("div",{className:"error"},"Select patients randomized options");var n=t.find(function(e){return e.id===a.source_cohort_id});return p.default.createElement("div",{className:"success"},(a.num_patients?a.num_patients:"-")+(a.num_patients_abs?"":"%")+"\n         patients from "+(n?n.name:"-"));case C.default.DATE:return a.start_date?p.default.createElement("div",{className:"success"},(0,O.getMomentDate)(a.start_date).format("DD MMM YY")):p.default.createElement("div",{className:"error"},"Select cohort start date");case C.default.MILESTONES:if(!a.start_milestone)return p.default.createElement("div",{className:"error"},"Select cohort trigger");if(a.start_milestone===b.TRIGGER_START_MILESTONES.GLOBAL_FP)return p.default.createElement("div",{className:"success"},"Start of study (FP)");var r=t.find(function(e){return e.id===a.source_cohort_id});return p.default.createElement("div",{className:(0,v.default)({success:r&&a.start_milestone,error:!r||!a.start_milestone})},a.start_milestone+" from "+(r?r.name:"..."));default:return p.default.createElement("div",{className:"error"},"Select cohort trigger")}}function u(e,t){var a=t.reduce(function(e,t){var a=t.countries.reduce(function(e,a){return e.push(c({},a,{platform_country_id:a.id,region_name:t.name})),e},[]);return t.countries.length>1&&a.push({id:"unspecifiedCountry_"+t.id,platform_country_id:null,name:"Unspecified country",region_id:t.id,isSelectedAsRegion:!1,isSelected:!1}),a.length>0&&e.push(c({},t,{isCountryRegion:1===a.length,countries:a})),e},[]),n=(0,E.default)(a);return e.locations.forEach(function(e){e.countries.forEach(function(t){var a=n.find(function(t){return t.name===e.name}),r=a.countries.find(function(e){return e.name===t.name});r&&(r.isSelected=!0,r.forceDisabled=!!t.hasActuals&&t.hasActuals.hasActuals)})}),n}function d(e){var t=(0,O.getMomentDate)(e.fp);return e.cohorts.reduce(function(e,a){var n=(0,O.getMomentDate)(a.fp),r=n?n.diff(t,"d"):0,l=a.id;return e[l]||(e[l]=r),e},{})}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.validateCohortPatientsSites=r,t.default=l,t.isReadOnly=i,t.getMilestonesChartCohortsData=o,t.getLabelValue=s,t.prepareLocationsData=u,t.getCohortsFpOffsets=d;var f=a(0),p=n(f),m=a(27),h=a(2),v=n(h),_=a(31),E=n(_),g=a(11),y=n(g),S=a(260),b=a(102),C=n(b),O=a(7)},,,,,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t,a){return e.map(function(e){var a=(0,ue.getMomentDate)(t).add(e[0],"d");return{date:a,formattedDate:a.format("DD-MM-YYYY"),value:+e[1],week:e[0]}}).filter(function(e){return e.date&&e.date.isSameOrAfter(a)})}function o(e,t,a){return e.reduce(function(e,t){return a&&t.date.isSameOrAfter(a)&&e.push(t),e},[])}function s(e,t){return e.reduce(function(e,a){var n=(0,ue.getMomentDate)(a[0]);return t&&n.isSameOrAfter(t)&&e.push({date:n,formattedDate:n.format("DD-MM-YYYY"),value:a[1]}),e},[])}function u(e,t){return e.date-t.date}function d(e){return(0,$.extent)(e,function(e){return e.date})}function c(e){return(0,$.max)(e,function(e){return e.value})||0}function f(e,t,a,n,r,l){var i=void 0;i=a.includes("siv")?he.YELLOW:a.includes("screening")?he.PURPLE:a.includes("enrolment")||a.includes("randomization")?he.BLUE:he.BLACK;var o=e.append("path");return t&&t.length>0&&o.data([t]).attr("id",l).attr("class","line "+a).attr("d",n).style("fill","none").style("stroke",i).style("stroke-width",a.includes("adjusted")||a.includes("bold")?3:2).style("display",r?null:"none"),o}function p(e,t,a){e.append("text").attr("class","hint").attr("fill",a).attr("x",40).attr("dy",21).attr("text-anchor","middle").text(t.toFixed(0))}function m(e,t,a,n){var r={strokeWidth:"2px"};"bold"===n?r.strokeWidth="4px":"dashed"===n&&(r.strokeDasharray="2 2"),e.append("line").attr("x1",t?-35:92).attr("x2",t?-17:110).attr("y1",15).attr("y2",15).attr("class","hint-line "+(n||"")).st(r).style("stroke",a)}function h(e,t,a,n){e.append("polygon").attr("points",t).attr("transform",a).attr("class","hint "+n)}function v(e,t){e.append("rect").attr("width","80px").attr("height","30px").attr("class","hint "+t)}function _(e,t){return e.append("g").attr("class","focus "+t).style("opacity",0).style("display","none")}function E(e,t,a){var n=e[0]-t,r=e[1]-a;return n*n+r*r}function g(e,t,a,n,r,l){try{e.forEach(function(e){if(e&&e.node()&&null!==e.attr("d")){var t=e.node().getTotalLength();e.attr("stroke-dasharray",t+" "+t).attr("stroke-dashoffset",t).transition().duration(l).ease(se.easeCubicOut).attr("stroke-dashoffset",0)}}),t.forEach(function(e){e&&e.transition().duration(l/2).delay(l).style("opacity",1)}),a.forEach(function(e){e&&e.transition().duration(l/2).delay(l).style("opacity",1)}),n.forEach(function(e){e&&e.attr("r",0).transition().duration(l/4).delay(l).attr("r",function(){return"dashed"===e.attr("class")?5:"hollow"===e.attr("class")?4:6}).style("opacity",1)}),r.forEach(function(e){if(e&&e.node()&&null!==e.attr("d")){var t=e.node().getTotalLength();e.attr("stroke-dasharray",t+" "+t).attr("stroke-dashoffset",t).attr("opacity",.5).transition().duration(l).ease(se.easeCubicOut).attr("stroke-dashoffset",0).transition().duration(0).attr("opacity",1).attr("stroke-dasharray","2 2")}})}catch(e){console.log(e)}}function y(e,t,a,n,r,l){var i=t.length>4?11:13;e.append("rect").attr("x",-t.length*i/2).attr("y",l?l+30:30).attr("width",t.length*i).attr("height",30).style("fill",n).style("opacity",.9).style("stroke",a).style("stroke-width",1),e.append("text").attr("transform","translate(0,"+(l?l+50:50)+")").attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("fill",r).text(t)}function S(e,t,a,n,r,l){var i=t.length>4?8:12;e.append("rect").attr("x",-t.length*i/2).attr("y",l?l+30:30).attr("width",t.length*i).attr("height",16).style("fill",n).style("opacity",.9).style("stroke",a).style("stroke-width",1),e.append("text").attr("transform","translate(0,"+(l?l+42:50)+")").attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"12px",fontFamily:"VoltaModern, sans-serif"}).attr("fill",r).text(t)}function b(e,t,a,n,r,l){var i=t.substr(t.indexOf("_")+1,t.length),o=i.length>4?11:13,s=e.append("g").at({id:t+"-milestone-tooltip"}).translate([-i.length*o/2,l]);s.append("rect").attr("width",i.length*o).attr("height",30).style("fill",n).style("stroke",a).style("stroke-width",1),s.append("text").translate([i.length*o/2,20]).attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("fill",r).text(i)}function C(e,t){e.select("#"+t+"-milestone-tooltip").remove()}function O(e,t,a){var n=e.append("g").classed("mark-g",!0).attr("transform","translate(-12,"+t+")");n.append("defs").append("path").attr("id","a").attr("d","M12 7l5 5-5 5-5-5z");var r=n.append("g").attr("fill","none").attr("fill-rule","evenodd");return r.append("use").attr("fill",he.BLACK).attr("xlink:href","#a"),r.append("path").attr("stroke",a).attr("stroke-width",2).attr("d","M12 5.586L18.414 12 12 18.414 5.586 12 12 5.586z"),n}function T(e,t,a,n,r,l,i){var o=e.append("g").classed("mark-g",!0).style("opacity",void 0!==i?i:1).attr("transform","translate("+t+","+-10+")"),s=o.append("g").attr("transform","rotate(90 12 12), translate(0, 14)");return s.append("path").attr("d","M10 2l8 8-8 8L2 10z").style("stroke","black").style("stroke-width","2px").classed("inner-rect",!0).style("fill","#fff"),s.append("path").attr("d","M14 10l-4 4-4-4 4-4z").style("fill",a),l||y(o,n,a,"#FFF","#000",r?r+10:10),o}function R(e,t,a){var n=[];if(!e||!t||e===t)return n;try{var r=Math.ceil(t.diff(e,"months",!0)),l=r<a?r:a;return(0,re.default)(e.toDate(),t.toDate(),l).forEach(function(e,t){0===t?n.push((0,ae.default)(e.start)):n.push((0,ae.default)(e.start).startOf("month")),t===l-1&&n.push((0,ae.default)(e.end))}),n}catch(e){return n}}function w(e){return e.ticks(ee.timeYear,1).concat(e.domain()[1])}function A(e){return null!==e.fsiv&&null!==e.fpfv&&null!==e.fpfv_lpfv}function I(e,t){var a={stroke:"#000",strokeWidth:"2px"};"dashed"===t.type?a.strokeDasharray="3 3":"bold"===t.type&&(a.strokeWidth="4px");var n=e.append("g").attr("id","legend_group_"+t.title).attr("transform","translate(-126)");n.append("text").attr("text-anchor","start").attr("dy",4).style("cursor",t.addInteraction?"pointer":"default").classed("milestone-group-label",!0).st({fontFamily:"VoltaModern, sans-serif",fontSize:"16px",fontWeight:"bold",userSelect:"none"}).text("PrevAppr"===t.title?"Prev. Appr.":t.title),t.type&&n.append("line").attr("x2",20).attr("y1",12).attr("y2",12).attr("class","line "+t.type).st(a),t.addInteraction&&(n.style("opacity",t.context[t.seriesFlag]?1:.5),n.on("mouseover",function(){var e="top"===t.tooltipPosition,a=(0,Q.select)("#context").append("g").attr("id","legend_"+t.title).attr("transform","translate(-126, "+(e?t.groupY-68:t.groupY+28)+")");a.append("polygon").attr("points",e?"0,0, 15,0, 7.5,7.5":"0,0, 15,0, 7.5,-7.5").attr("transform","translate(10, "+(e?44:0)+")"),a.append("rect").attr("width",148).attr("height",44).attr("stroke",he.BLACK).style("fill",he.BLACK),a.append("text").attr("class","date").attr("transform","translate(45,26)").attr("text-anchor","start").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).style("text-transform","capitalize").style("fill",he.WHITE).text(t.context[t.seriesFlag]?"Hide curves":"Show curves");var n=a.append("g").attr("transform","translate(12, 8)");n.append("path").attr("d","M0 0h24v24H0z"),n.append("path").attr("class","legend-tooltip-icon").attr("fill",he.WHITE).attr("d",t.context[t.seriesFlag]?me:pe)}),n.on("mouseout",function(){(0,Q.select)("#legend_"+t.title).remove()}),n.on("click",function(){t.context.toggleSeries(t.title),t.group.forEach(function(e){if(e){var a=t.context[e.groupFlag]&&t.context[e.seriesFlag]?null:"none";e.components.forEach(function(e){e&&e.style("display",a)})}n.style("opacity",t.context[e.seriesFlag]?1:.5);var r=(0,Q.select)("#legend_"+t.title);r.select("text").text(t.context[e.seriesFlag]?"Hide curves":"Show curves"),r.select(".legend-tooltip-icon").attr("d",t.context[e.seriesFlag]?me:pe)})}))}function N(e,t,a,n,r,l,i,o){var s=null;return n&&n.length>0&&(s=e.append("circle"),s.attr("id",o).attr("cx",t(n[n.length-1].date)).attr("cy",a(n[n.length-1].value)).attr("opacity",0).attr("fill","dashed"===i||"hollow"===i?he.WHITE:r).style("display",l?null:"none"),"dashed"===i&&s.attr("class",i||"").attr("stroke",r).attr("stroke-width",2).attr("stroke-dasharray","2 2"),"hollow"===i&&s.attr("class",i||"").attr("stroke",r).attr("stroke-width",4)),s}function D(e){var t=e.append("g").attr("transform","translate(-118)").attr("opacity",.3);t.append("line").attr("x2",44).attr("stroke",he.BLACK).attr("stroke-width",2),t.append("line").attr("x1",38).attr("x2",44).attr("y1",-6).attr("stroke",he.BLACK).attr("stroke-width",2),t.append("line").attr("x1",38).attr("x2",44).attr("y1",6).attr("stroke",he.BLACK).attr("stroke-width",2)}function P(e,t,a){e.append("defs").append("pattern").attr("id",t).attr("width","6").attr("height","8").attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("rect").attr("width","1.5").attr("height","8").attr("fill",a||he.BLACK)}function L(e,t){e.append("rect").attr("x",t.x).attr("width",t.width).attr("y",t.y).attr("height",t.height).style("fill",t.fill).style("opacity",t.opacity)}function M(e,t,a){if(I(e,t),!a){var n=e.append("g").attr("transform","translate("+t.groupX+")"),r=n.append("g");t.text&&(r.append("rect").attr("y",-15).attr("width",74).attr("height",28).style("fill",t.backgroundFill),r.append("text").attr("x",37).attr("y",4).classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("text-anchor","middle").style("fill",t.textFill?t.textFill:he.WHITE).text(t.text),r.append("text").attr("x",-12).attr("y",4).classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("text-anchor","end").style("fill",he.BLACK).text(t.label),D(n))}}function x(e,t,a){var n=e.selectAll(".chart-legend-menu-item").data(t).enter().append("g").attr("class","chart-legend-menu-item").attr("id",function(e){return e.checkboxId+"_wrapper"}).attr("transform",function(e){return"translate("+e.groupX+","+e.groupY+")"});n.append("rect").attr("width",22).attr("height",22).attr("fill",he.WHITE).attr("stroke",he.BLACK).attr("stroke-width",2),n.append("g").attr("id",function(e){return e.checkboxId}).attr("transform","translate(-1,-1)").style("display",function(e){return a[e.groupFlag]?null:"none"}).append("path").attr("d","M17,18.1 L7,18.1 L7,16.1 L17,16.1 L17,18.1 Z M10.3,14.1 L7,10.8 L8.4,9.4 L10.3,11.3\n                      L15.6,6 L17,7.4 L10.3,14.1 Z");var r=n.append("g").attr("transform",function(){return"translate(34,13)"});r.append("line").attr("x2",20).attr("y1",6).attr("y2",6).attr("class",function(e){return"line "+e.groupName.toLowerCase()}),r.append("text").classed("chart-legend__label",!0).text(function(e){return e.groupName}),n.on("click",function(e){a.toggleCurveVisibility(e.groupName),e.group.forEach(function(e){if(e){var t=a[e.groupFlag]&&a[e.seriesFlag]?null:"none";e.components.forEach(function(e){e&&e.style("display",t)})}});var t=a[e.groupFlag]?null:"none";(0,Q.select)("#"+e.checkboxId).style("display",t)})}function k(e,t,a){e&&e.append("line").attr("y1",a?-10:-20).attr("y2",a?-34:-45).style("stroke",t).style("stroke-width","1px")}function j(e,t,a,n){var r=e.append("g").attr("transform","translate(0, -320)");O(r,-12,he.GREY);var l=void 0;l=n?96:a?66:36;var i=r.append("g").attr("transform","translate(15, "+-l/2+")");i.append("rect").at({id:"tooltip-background-rect"}).attr("width",156).attr("height",l),i.append("polygon").attr("stroke",he.BLACK).attr("points","0,7.5, 7.5,0 7.5,15").attr("transform","translate(-5,"+(l/2-7.5)+")");var o=i.append("g").style("display","none").attr("id","uncertainty-tooltip-data"),s=o.append("g").translate([10,20]).attr("id","q75Enrolment-tooltip-data_generic");s.append("line").at({x2:10,y1:8,y2:8,class:"line enrolment"}),s.append("text").attr("class","tooltip-data-text").text("34");var u=o.append("g").translate([10,50]).attr("class","enrolment-tooltip-data_actual");u.append("line").at({x2:20,y1:8,y2:8,class:"line enrolment dotted"}),u.append("text").attr("class","tooltip-data-text").text("12");var d=o.append("g").translate([10,80]).attr("id","q25Enrolment-tooltip-data_generic");d.append("line").at({x2:10,y1:8,y2:8,class:"line enrolment"}),d.append("text").attr("class","tooltip-data-text").text("55");var c=i.selectAll(".tooltip-data").data(t).enter().append("g").attr("class","regular-tooltip-data").attr("id",function(e){return e.groupName+"-tooltip-data"}).attr("transform",function(e){return"translate("+e.groupX+","+e.groupY+")"}),f=c.append("g").attr("class",function(e){return e.groupName+"-tooltip-data_generic"});if(f.append("line").attr("x2",20).attr("y1",8).attr("y2",8).attr("class",function(e){return"line "+e.lineClass}),f.append("text").attr("class","tooltip-data-text").text(function(e){return e.textGeneric}),a){var p=c.append("g").attr("class",function(e){return e.groupName+"-tooltip-data_actual"}).attr("transform","translate(0,30)");p.append("line").attr("x2",20).attr("y1",8).attr("y2",8).attr("class",function(e){return"line "+e.lineClass+" dotted"}),p.append("text").attr("class","tooltip-data-text").text(function(e){return e.textActual})}if(n){var m=c.append("g").attr("class",function(e){return e.groupName+"-tooltip-data_adjusted"}).attr("transform","translate(0,60)");m.append("line").attr("x2",20).attr("y1",8).attr("y2",8).attr("class",function(e){return"line "+e.lineClass+" bold"}),m.append("text").attr("class","tooltip-data-text").text(function(e){return e.textAdjusted})}}function F(e){var t=void 0;return e.forEach(function(e){t?e.length>t.length&&(t=e):t=e}),t}function U(e,t,a){var n=null,r=null,i=e[e.length-1]?e[e.length-1]:null,o=(0,ie.default)(e,function(e){return t.format("YYYY-MM-DD")===e.date.format("YYYY-MM-DD")});if(!o&&i&&t.isSameOrBefore(i.date)){var s=[].concat(l(e),[{date:t.clone()}]);s.sort(u);var d=s.findIndex(function(e){return t.format("YYYY-MM-DD")===e.date.format("YYYY-MM-DD")});d>0&&(o=s[d-1])}return o&&(n=a(o.value),r=o.value),{yCoord:n,value:r}}function V(e,t,a,n,r,i){var o=[{date:n,week:0}].concat(l(e)),s=ve(o,t,1),u=o[s-1],d=o[s];if(u&&d){var c=void 0;c=u.week===d.week?d:t-u.date>d.date-t?d:u;var f={yCoord:0,value:null};return{xCoord:a(c.date),value:c.date,sivValue:c.sivValue?{yCoord:r(c.sivValue),value:c.sivValue}:f,screeningValue:c.screeningValue?{yCoord:i(c.screeningValue),value:c.screeningValue}:f,enrolmentValue:c.enrolmentValue?{yCoord:i(c.enrolmentValue),value:c.enrolmentValue}:f,actualSivValue:c.actualSivValue?{yCoord:r(c.actualSivValue),value:c.actualSivValue}:f,actualScreeningValue:c.actualScreeningValue?{yCoord:i(c.actualScreeningValue),value:c.actualScreeningValue}:f,actualEnrolmentValue:c.actualEnrolmentValue?{yCoord:i(c.actualEnrolmentValue),value:c.actualEnrolmentValue}:f,actualQ25EnrolmentValue:c.actualQ25EnrolmentValue?{yCoord:i(c.actualQ25EnrolmentValue),value:c.actualQ25EnrolmentValue}:f,actualQ75EnrolmentValue:c.actualQ75EnrolmentValue?{yCoord:i(c.actualQ75EnrolmentValue),value:c.actualQ75EnrolmentValue}:f,adjustedSivValue:c.adjustedSivValue?{yCoord:r(c.adjustedSivValue),value:c.adjustedSivValue}:f,adjustedScreeningValue:c.adjustedScreeningValue?{yCoord:i(c.adjustedScreeningValue),value:c.adjustedScreeningValue}:f,adjustedEnrolmentValue:c.adjustedEnrolmentValue?{yCoord:i(c.adjustedEnrolmentValue),value:c.adjustedEnrolmentValue}:f}}return{xCoord:0,value:(0,ae.default)()}}function B(e,t){var a=e.append("g").attr("transform","translate("+t+")");return a.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",he.WHITE).attr("r",9),a.append("circle").attr("r",2),a}function H(e,t){var a=(0,ae.default)(t);return e.filter(function(e){return e.date.isSameOrBefore(a)})}function G(e){var t=c(e),a=e.findIndex(function(e){return e.value===t});return e.slice(0,a+1)}function Y(e,t){return e.map(function(e,a){return{date:e.date,q75:e.value,q25:t[a].value}})}function q(e,t){var a={siv:"stroke-width: 2px; stroke: "+he.YELLOW,screening:"stroke-width: 2px; stroke: "+he.PURPLE,enrolment:"stroke-width: 2px; stroke: "+he.BLUE},n=e.selectAll(".subheader-legend-item").data(t).enter().append("g").attr("id",function(e){return e.lineClass+"-max-hint"}).attr("transform",function(e){return"translate("+e.groupX+","+e.groupY+")"});n.append("line").at({x2:20,y1:6,y2:6}).attr("class",function(e){return"line "+e.lineClass}).attr("style",function(e){return a[e.lineClass]}),n.append("text").classed("max-value-label",!0).st({fontFamily:"VoltaModern, sans-serif",fontSize:"16px",fontWeight:"bold",userSelect:"none"}).text(function(e){return e.text}),n.filter(function(e){return e.appendSeparator}).append("line").at({x1:62,x2:70,y1:8,y2:-14}).st({stroke:he.MID_GREY,strokeWidth:"1px"}).classed("line slash-separator",!0)}function z(e,t,a,n){e.append("path").attr("d",de).attr("class","axis-icon").st({fill:he.BLACK,opacity:.5}).translate([t,n]);var r=e.append("g").attr("class","axis-icon").st({fill:he.BLACK,opacity:.5}).translate([a,n]);r.append("path").attr("d",ce),r.append("path").attr("d",fe)}function W(e,t,a,n,r){var l=e.append("g").attr("class","chart-legend-menu-item").attr("id","overallocation-toggle").attr("transform","translate("+t+","+a+")");return l.append("rect").at({width:22,height:22,fill:he.BLACK}),l.append("rect").at({width:18,height:18,fill:he.WHITE}).translate([2,2]),l.append("g").at({id:"overallocation-checkbox"}).translate([-1,-1]).style("display",n?null:"none").append("path").attr("d","M17,18.1 L7,18.1 L7,16.1 L17,16.1 L17,18.1 Z M10.3,14.1 L7,10.8 L8.4,9.4 L10.3,11.3\n                      L15.6,6 L17,7.4 L10.3,14.1 Z"),l.on("click",function(){r(!n),(0,Q.select)("#overallocation-checkbox").style("display",!n)}),l}function K(e,t){var a=e[e.length-1],n=[].concat(l(e));if(a&&a.date){for(var r=a.date.clone();r<=t;)n.push(J({},a,{date:r})),r=r.clone().add(1,"d");return n}return e}function X(e,t){var a=t,n=a.reduce(function(e,t){return e.set(t.formattedDate,J({},t)),e},new Map),i=Object.keys(e);i.forEach(function(t){e[t].forEach(function(e){var a=n.get(e.formattedDate);a?a[t+"Value"]=e.value:n.set(e.date,r({},t+"Value",e.value))})});var o=[].concat(l(n.values()));return a=o.map(function(e,t){var a=e;return i.forEach(function(e){if(void 0===a[e+"Value"]&&0!==t){var n=o[t-1],r=n[e+"Value"];a.date&&(a[e+"Value"]=void 0!==r?r:null)}}),a})}function Z(e){e.append("g").translate([26,16]).append("text").attr("fill",he.BLACK).attr("text-anchor","start").text("O/E").style("font-family","VoltaModern, sans-serif")}Object.defineProperty(t,"__esModule",{value:!0}),t.COLORS=t.patIcon2=t.patIcon=t.sitesIcon=void 0;var J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.updateSeries=i,t.updateAdjustedSeries=o,t.updateActualSeries=s,t.sortByDateAscending=u,t.getMinMaxDate=d,t.getMaxValue=c,t.drawSeriesLine=f,t.appendTextToHint=p,t.appendLineToHint=m,t.appendPolygonToHint=h,t.appendRectToHint=v,t.appendFocusOnSeries=_,t.distanceTo=E,t.animateAppearance=g,t.appendLabelToMilestone=y,t.appendNarrowLabelToMilestone=S,t.appendMilestoneTooltip=b,t.removeMilestoneTooltip=C,t.appendHoverMark=O,t.appendMilestone=T,t.getMonthsTickValues=R,t.getYearsTickValues=w,t.isDataValid=A,t.appendGroupLabel=I,t.appendCurveEnd=N,t.appendArrow=D,t.injectPatternDefs=P,t.drawOverflowRect=L,t.appendMilestonesLegend=M,t.drawChartMenu=x,t.appendLineToLabel=k,t.appendHoverTooltip=j,t.getLongestArray=F,t.getHoverSeriesData=U,t.getHoverXPosition=V,t.appendFppMark=B,t.sliceCurveData=H,t.sliceActualSeries=G,t.mergeQData=Y,t.drawSubheaderLegend=q,t.drawAxisIcons=z,t.drawOverallocationToggle=W,t.fillMissingValues=K,t.getAccumulatedSeries=X,t.drawOverallocationIcon=Z;var Q=a(25),$=a(27),ee=a(195),te=a(10),ae=n(te),ne=a(1492),re=n(ne),le=a(699),ie=n(le),oe=(a(433),a(235)),se=(n(oe),a(414)),ue=a(7),de=t.sitesIcon="M10 4V0H0v18h20V4H10zM4 16H2v-2h2v2zm0-4H2v-2h2v2zm0-4H2V6h2v2zm0-4H2V2h2v2zm4\n      12H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V6h2v2zm0-4H6V2h2v2zm10\n      12h-8v-2h2v-2h-2v-2h2V8h-2V6h8v10zm-2-8h-2v2h2V8zm0 4h-2v2h2v-2z",ce=t.patIcon="M10 19h3v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5h4.286c.786 0 1.428.675 1.428\n          1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2s.893-2 2-2 2 .893 2 2-.893 2-2 2z",fe=t.patIcon2="M18 19h3v3H11v-3h3v-5h-1.571V8.5c0-.825.642-1.5 1.428-1.5h4.286c.786 0 1.428.675 1.428\n          1.5V14H18v5zM16 6c-1.107 0-2-.893-2-2s.893-2 2-2 2 .893 2 2-.893 2-2 2z",pe="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12\n        17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3\n        3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z",me="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89\n        3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12\n        7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0\n        3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0\n        1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55\n        1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15\n        3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z",he=t.COLORS={BLACK:"#000",GREY:"#ededed",MID_GREY:"#c6c6c6",DARK_GREY:"#9d9d9d",WHITE:"#FFF",YELLOW:"#FCB13B",BLUE:"#19A9E0",PURPLE:"#9C28C6",GREEN:"#00C329",LIGHT_GREEN:"#ebfaee",RED:"#ec3508"},ve=(0,$.bisector)(function(e){return e.date}).left},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(51),u=n(s),d=function(e){var t=e.type,a=e.unlock,n=e.onChange;return l.default.createElement(u.default,{label:"",checked:a&&a[t],onChange:function(e){n(null,t,e,"unlock")}})};d.defaultProps={unlock:{}},d.propTypes={type:o.default.string.isRequired,unlock:o.default.object,onChange:o.default.func.isRequired},t.default=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2),m=n(p),h=a(23),v=n(h),_=a(99),E=n(_),g=a(13),y=n(g),S=a(63),b=n(S),C=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:"object"!==o(a.props.value)?a.props.value.toString():a.props.value,valueToRestore:"object"!==o(a.props.value)?a.props.value.toString():a.props.value,isValid:a.props.isValid,showTooltip:!1},a.keyPressHandler=a.keyPressHandler.bind(a),a.onChangeHandlerNew=a.onChangeHandlerNew.bind(a),a.handleTextAreaClickForTooltip=a.handleTextAreaClickForTooltip.bind(a),a}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.beFocused&&this.inputRef&&(this.inputRef.focus(),this.inputRef.select())}},{key:"componentWillReceiveProps",value:function(e){e.isEditMode&&e.value===this.props.value||this.setState({value:e.value}),e.isEditMode&&e.tooltip&&e.beFocused&&this.setState({showTooltip:!0})}},{key:"shouldComponentUpdate",value:function(e,t){var a=this.props,n=a.isEditMode,r=a.type,l=a.isValid,i=t.showTooltip!==this.state.showTooltip,o=e.isEditMode!==n||e.isValid!==l,s=!1;return s="date"===r&&t.value&&this.state.value?!t.value.isSame(this.state.value)||e.defaultDate&&this.props.defaultDate&&!e.defaultDate.isSame(this.props.defaultDate):t.value!==this.state.value||e.value!==this.props.value,o||s||i}},{key:"onChangeHandlerNew",value:function(e){this.props.onChange(e),this.setState({value:e})}},{key:"handleTextAreaClickForTooltip",value:function(e){if(this.props.tooltip){var t=void 0;t="boolean"==typeof e?e:!this.state.showTooltip,this.setState({showTooltip:t})}}},{key:"keyPressHandler",value:function(e){+this.state.value!=+e.target.value&&("Tab"===e.key&&this.onChangeHandlerNew(e.target.value),"Escape"===e.key&&this.props.switchOffEditMode&&(this.setState({value:this.state.valueToRestore}),this.props.switchOffEditMode()))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isEditMode,n=t.type,r=t.isValid,l=t.filterDate,i=t.tooltip,o=t.noDataPlaceholder,s=t.minDate,u=t.defaultDate,c=t.popperPlacement,f=t.validators,p=t.tooltipOnError,h=this.state,_=h.value,g=h.showTooltip;if(a){if("date"===n)return d.default.createElement("div",{className:(0,m.default)("editable-cell",{isValid:r},{notValid:!r})},d.default.createElement(E.default,{tooltip:!r&&i?i:null,status:r?null:"error",simpleView:!0,onFocus:this.props.onFocus,style:{width:"100%"},onChange:this.onChangeHandlerNew,autoFocus:this.props.beFocused,fixedHeight:!0,escHandler:this.props.switchOffEditMode,defaultDate:u,filterDate:l,disabledKeyboardNavigation:!0,popperPlacement:c,minDate:s,selected:_}));var S=this.props.tooltip?this.handleTextAreaClickForTooltip:null,C=d.default.createElement("div",{className:(0,m.default)("editable-cell",{isValid:r},{isNotValid:!r})},d.default.createElement(v.default,{onBlur:function(t,a){var n=a;+n.value!=+e.state.value&&e.onChangeHandlerNew(n.value)},toolTipHandler:S,onFocus:this.props.onFocus,ref:function(t){e.textInput=t},onKeyDown:this.keyPressHandler,autoFocus:this.props.beFocused,escPressExit:this.props.switchOffEditMode,narrow:!0,status:r?null:"error",type:n,value:this.state.value,withoutBorder:!0,validators:f,textAlign:"right",placeholder:""}));return p&&!r?d.default.createElement(y.default,{mouseEnterDelay:.3,placement:"bottom",overlayClassName:"fpo-sidebar-button__tooltip",overlay:p},C):i?d.default.createElement(y.default,{overlay:i,visible:g},C):C}if("date"===n)return d.default.createElement("div",{"data-element-id":"_cellWrapper",className:"editable-cell__view-mode-value","data-test":"text-cell"},_?""+_.format("D MMM YY"):function(){return i&&o?d.default.createElement(y.default,{overlayClassName:"scenario_table__unit-tooltip",mouseEnterDelay:.3,overlay:d.default.createElement("span",null,i)},d.default.createElement("span",{className:"no-data-cell"},o)):""}());var O=_;return this.props.formatDecimal&&(O=(0,b.default)(_)),d.default.createElement("div",{"data-element-id":"_cellWrapper",className:"editable-cell-wrapper"},d.default.createElement("div",{"data-element-id":"_cellWrapper",className:"editable-cell__view-mode-value","data-test":"text-cell"},""+O))}}]),t}(u.Component);t.default=C,C.propTypes={beFocused:f.default.bool,isEditMode:f.default.bool,onFocus:f.default.func,switchOffEditMode:f.default.func,type:f.default.string,value:f.default.any,onChange:f.default.func,isValid:f.default.bool,filterDate:f.default.func,tooltip:f.default.node,noDataPlaceholder:f.default.string,minDate:f.default.object,defaultDate:f.default.object,popperPlacement:f.default.oneOf(["top-end","top-start"]),formatDecimal:f.default.bool,validators:f.default.array,tooltipOnError:f.default.string},C.defaultProps={beFocused:!1,isEditMode:!1,type:"text",isValid:!0,value:null,switchOffEditMode:void 0,onFinish:void 0,onFocus:void 0,onChange:function(){},filterDate:void 0,tooltip:void 0,noDataPlaceholder:void 0,minDate:null,defaultDate:void 0,clicked:!1,popperPlacement:"top-start",formatDecimal:!1,validators:[],tooltipOnError:null}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1008),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SaveChangesDialog=void 0;var r=a(1069),l=n(r),i=a(1068),o=n(i);t.SaveChangesDialog=o.default,t.default=l.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a,n,r,l,i,s){var u=a.hasAdjustedOrigin,d=a.ignoreGenericData,f=(0,c.default)(a,"actualTimeseriesSnapshot",{})||{},m=f.actual_date,h=f.sites_initiated,v=f.patients_screened,_=f.patients_randomized,g=m?(0,p.getMomentDate)(m):null,S=u&&g&&h?y.default:E.default,C=(0,p.getMomentDate)(e),O=(0,p.getMomentDate)(t),T=(0,p.getMomentDate)(a["25_si"]),R=(0,p.getMomentDate)(a["50_si"]),w=(0,p.getMomentDate)(a["90_si"]),A=(0,p.getMomentDate)(a.fsiv),I=(0,p.getMomentDate)(a.fpfv),N={};s||(N=S(C,O,n,A,I,T,R,w,a.num_sites,a.patient_allocation,a.sas,a.screening_failure,a.randomisation_rate,"",a.events,g,h,v,_,i,a.patient_allocation_min,a.patient_allocation_max)),d&&(N.invalidFields=[]);var D=(0,b.default)(a,C),P={};if(r&&!a.ignoreAdjustedData){var L=(0,p.getMomentDate)(a.adjusted_25_si),M=(0,p.getMomentDate)(a.adjusted_50_si),x=(0,p.getMomentDate)(a.adjusted_90_si),k=(0,p.getMomentDate)(a.adjusted_fsiv),j=(0,p.getMomentDate)(a.adjusted_fpfv);P=!d&&g&&h?(0,y.default)(C,O,n,k,j,L,M,x,a.adjusted_num_sites,a.adjusted_patient_allocation,a.adjusted_sas,a.adjusted_screening_failure,a.adjusted_randomisation_rate,"adjusted_",a.adjusted_events,g,h,v,_,i,a.adjusted_patient_allocation_min,a.adjusted_patient_allocation_max):(0,E.default)(C,O,n,k,j,L,M,x,a.adjusted_num_sites,a.adjusted_patient_allocation,a.adjusted_sas,a.adjusted_screening_failure,a.adjusted_randomisation_rate,"adjusted_",a.adjusted_events,g,h,v,_,i,a.adjusted_patient_allocation_min,a.adjusted_patient_allocation_max)}return o({},N,D,P)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.source_scenario_id?"adjusted_":"",n=[];do{e.cohorts.forEach(function(r){if(r.trigger_type===O.default.DATE||r.trigger_type===O.default.MILESTONES&&r.start_milestone===C.TRIGGER_START_MILESTONES.GLOBAL_FP)n.find(function(e){return e.id===r.id})||n.push((0,v.default)(r,e,t,"name"));else if(n.find(function(e){return e.id===r.source_cohort_id})&&!n.find(function(e){return e.id===r.id})){var l=n.find(function(e){return e.id===r.source_cohort_id});if(r.trigger_type===O.default.MILESTONES)r.fp=(0,c.default)(l,"fullData[0]")[""+a+r.start_milestone.toLowerCase()];else if(r.trigger_type===O.default.PATIENTS_RANDOMIZED){var i=r.target_num_patients,o=(0,c.default)(l,"fullData[0]");if(!r.num_patients_abs){var s=(0,c.default)(o,a+"patient_allocation");i=i*s/100}var u=(0,c.default)(o,a+"curves")[2].findIndex(function(e){return e[1]>=i});r.fp=u>=0?(0,c.default)(l,"fp")&&(0,c.default)(l,"fp").clone().add(u,"d"):null}n.push((0,v.default)(r,e,t,"name"))}})}while(n.length!==e.cohorts.length);return n}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e;n.end_date=(0,p.getMomentDate)(n.end_date),n.updated=(0,u.default)(n.updated),n.cohorts=l(n,t);var r=n.cohorts.filter(function(e){var t=null!==n.source_scenario_id?"adjusted_curves":"curves",a=e.fullData[0][t];return 0!==a[0].length&&0!==a[1].length&&0!==a[2].length});return n.hasInvalidCohorts=r.length!==n.cohorts.length,n.aggregatedGlobalData=(0,f.getAggregatedGlobalRow)(n.cohorts.filter(function(e){return e.countries.length>0&&e.fp}).map(function(e){return e.fullData.find(function(e){return"rollup"===e.type})}),n.cohorts.map(function(e){return e.aggregatedActuals})[0],(0,u.default)(n.fp),n.target_num_patients,n)[0],n.approvedData&&n.approvedData.aggregatedGlobalData&&!a&&T.APPROVED_COUNTRY_DATA_FIELDS.forEach(function(e){n.aggregatedGlobalData[e]=n.approvedData.aggregatedGlobalData[e]}),n.aggregatedGlobalData.uniqueCountries=(0,m.getUniqueCohortsCountries)(n.cohorts),n}Object.defineProperty(t,"__esModule",{value:!0}),t.getActualsData=t.getCurvesAndMilestonesAdjusted=t.getCurvesAndMilestones=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.calculateCurvesData=r,t.calculateCohortsData=l,t.calculateCohorts=i;var s=a(10),u=n(s),d=a(11),c=n(d),f=a(223),p=a(7),m=a(116),h=a(1209),v=n(h),_=a(1210),E=n(_),g=a(1211),y=n(g),S=a(1208),b=n(S),C=a(102),O=n(C),T=a(14);t.getCurvesAndMilestones=E.default,t.getCurvesAndMilestonesAdjusted=y.default,t.getActualsData=b.default},function(e,t){const a=[{title:"Tool issues",items:{RANKING_NOT_ACCURATE:"Site ranking is not accurate",DUPLICATED_SITE:"Duplicated site",PI_SITE_DATA_IS_OUT_OF_DATE:"PI/Site data is out of date (e.g. PI retired/left institution"}},{title:"User Knowledge",items:{PERFORMANCE_ISSUES:"Performance issues",HIGH_COST:"High cost",QUALITY_ISSUES:"Quality issues (e.g. country experience, local/global audits/inspections, on hold)",SITE_STAFF_TURNOVER:"Site staff turnover",SITE_TOO_CONGESTED:"Site too congested",LACK_OF_EQUIPMENT:"Lack of required equipment",PILOT_SITE:"Pilot site only (cannot scale)"}},{title:"Site Situation",items:{SITE_NOT_INTERESTED:"Site not interested (resources, congestion, lack of interest in protocol)",CHANGE_IN_INSTITUTION_REQ:"Change in institution requirements (i.e. difficult CTA signature process, increase in fees)"}},{title:"Other",items:{OTHER:"Other"}}],n=[{title:"Tool issues",items:{SITE_RANKING_UNDERESTIMATES_PERF:"Site ranking underestimates performance",SITE_NOT_IN_FPO:"Site not in FPO"}},{title:"User Knowledge",items:{SITE_IMPROVED_PROCESSES:"Site has improved processes/performance/no longer on hold",ATTRACTIVE_PRICE:"Attractive price",SITE_SPEC_IN_TA_INDICATION:"Site specialises in TA/Indication",SITE_HAS_ACCREDITATION:"Site has special accreditation",PSEM_IN_PLACE:"Preferred Site Engagement Model (PSEM) in place",SITE_ACCESS_SPEC_EQUIPMENT:"Site has access to specialist equipment",NEW_PI_STAFF:"New PI/staff",STRATEGIC_IMPORTANCE:"Startegic Importance (e.g. Clinical Team recommendation",BACKUP_SITE:"Backup site"}},{title:"Site Situation",items:{MOTIVATED_SITE_PI:"Motivated site or PI"}},{title:"Other",items:{OTHER:"Other"}}],r={READY_TO_LOCAL_MANAGE:"READY",NOT_READY_TO_LOCAL_MANAGE:"NOT_READY",IN_GLOBAL_REVIEW:"IN_REVIEW",APPROVED:"APPROVED"};e.exports={REMOVE_SITE_REASONS:a,ADD_SITE_REASONS:n,COUNTRY_SITE_APPROVAL_STATUS:r}},,,,,,,,,,,,,function(e,t,a){"use strict";function n(e){return{type:u.FORBIDDEN_ERROR,payload:{code:403,message:e}}}function r(e){return{type:u.INTERNAL_SERVER_ERROR,payload:{code:500,message:e}}}function l(e){return{type:u.NOT_FOUND_ERROR,payload:{code:404,message:e}}}function i(e){return{type:u.ODA_API_ERROR,payload:{code:503,message:e}}}function o(){return{type:u.SESSION_EXPIRED,payload:{code:302}}}function s(e){return{type:u.BAD_REQUEST,payload:{code:400,message:e}}}Object.defineProperty(t,"__esModule",{value:!0}),t.forbiddenError=n,t.internalServerError=r,t.notFoundError=l,t.ODAError=i,t.sessionExpired=o,t.badRequestError=s;var u=a(15)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(828),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SaveAsImageControl=t.ChartCollapseControl=t.HistoricalBenchmarkChart=t.MinimisedEnrolmentChart=void 0;var r=a(893),l=n(r),i=a(895),o=n(i),s=a(894),u=n(s),d=a(892),c=n(d),f=a(896),p=n(f);t.MinimisedEnrolmentChart=o.default,t.HistoricalBenchmarkChart=u.default,t.ChartCollapseControl=c.default,t.SaveAsImageControl=p.default,t.default=l.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t){return e.reduce(function(e,a){var n=(0,N.default)(a[0]).diff(t,"days")+1;return e.push([n,a[1]]),e},[])}function i(e,t){var a=(0,N.default)(e),n=(0,N.default)(t);if(a.isValid()&&n.isValid()){if(a>n)return 1;if(a<n)return-1}return 0}function o(e,t){return e.state.status===G.default.ACTIVE&&t.status!==B.SCENARIO_STATUS.APPROVED&&null!==t.source_scenario_id}function s(e,t){return!(t.status!==B.SCENARIO_STATUS.APPROVED&&t.status!==B.SCENARIO_STATUS.PREV_APPROVED&&null===t.source_scenario_id||e.state.status!==G.default.ACTIVE&&e.state.status!==G.default.COMPLETED)}function u(e){return{type:"pattern",pattern:e===Y.ACTUAL?"darkUp":"solid",fgColor:{argb:e}}}function d(e){return{properties:{tabColor:{argb:e}}}}function c(e,t,a,n){var r={Locations:25,Type:24,Patients:10,Sites:10,FSIV:20,"SAS%":10,"25% SI":20,"50% SI":20,"90% SI":20,FPFV:20,"FPFV-LPFV":12,"SR (patients/month/site)":24,"SF%":12,"RR (patients/month/site)":24,"P/LPFT":20},l={Locations:{numFmt:"text",alignment:{vertical:"top",horizontal:"left"}},Type:{numFmt:"text",alignment:{vertical:"top",horizontal:"left"}},Patients:{numFmt:"#",alignment:{vertical:"top",horizontal:"right"}},Sites:{numFmt:"#",alignment:{vertical:"top",horizontal:"right"}},FSIV:{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}},"SAS%":{numFmt:"0%",alignment:{vertical:"top",horizontal:"right"}},"25% SI":{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}},"50% SI":{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}},"90% SI":{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}},FPFV:{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}},"FPFV-LPFV":{numFmt:"#",alignment:{vertical:"top",horizontal:"right"}},"SR (patients/month/site)":{numFmt:"#0.00",alignment:{vertical:"top",horizontal:"right"}},"SF%":{numFmt:"0%",alignment:{vertical:"top",horizontal:"right"}},"RR (patients/month/site)":{numFmt:"#0.00",alignment:{vertical:"top",horizontal:"right"}},"P/LPFT":{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}}},i={bold:!0,color:{argb:Y.BOLD}},o={style:"thin"};e.columns=Object.keys(t[0]).map(function(e){return{header:e,key:e,width:r[e],style:l[e]}}),e.getRow(1).eachCell(function(e){e.font=O({},i,{color:{argb:Y.WHITE}}),e.fill=u(Y.HEADER)}),t.forEach(function(t){e.addRow(t);var r=e.lastRow;"rollup"===t.type?r.eachCell({includeEmpty:!0},function(e,n){e.font=O({},i),1===n?e.border={right:O({},o)}:"Planned"===t.Type&&a?e.fill=u(Y.APPROVED):"Actual/Forecast"===t.Type&&(e.fill=u(Y.ACTUAL))}):"region"===t.type?r.eachCell({includeEmpty:!0},function(e,r){if(e.font=O({},i),n){var l={};1===r&&(l.right=O({},o)),"Planned"===t.Type&&(l.top=O({},o)),e.border=l,1!==r&&("Planned"===t.Type&&a?e.fill=u(Y.APPROVED):"Actual/Forecast"===t.Type&&(e.fill=u(Y.ACTUAL)))}else{var s={top:O({},o)};1===r&&(s.right=O({},o)),e.border=s}}):r.eachCell({includeEmpty:!0},function(e,n){1===n?e.border={right:O({},o)}:"Planned"===t.Type&&a?e.fill=u(Y.APPROVED):"Actual/Forecast"===t.Type&&(e.fill=u(Y.ACTUAL)),t.ignore_aggregation&&(e.font={bold:!0,color:{argb:Y.IGNORED}})}),"targetRow"===t.type&&r.eachCell({includeEmpty:!0},function(e,t){e.font={color:{argb:Y.HEADER}}})}),e.getColumn("P/LPFT").eachCell({includeEmpty:!0},function(e){e.border=O({},e.border,{right:O({},o)})}),e.lastRow.eachCell({includeEmpty:!0},function(e){e.border=O({},e.border,{bottom:O({},o)})}),e.getColumn(n?17:16).eachCell({includeEmpty:!0},function(e){e.border=null,e.fill=null}),e.spliceColumns(n?16:15,1),e.getColumn(n?16:15).eachCell({includeEmpty:!0},function(e){e.border=null,e.fill=null}),e.spliceColumns(n?16:15,1),e.views=[{state:"frozen",xSplit:1,ySplit:0}];var s=e.columns.find(function(e){return"type"===e.key});s&&(s.hidden=!0)}function f(e,t,a,n,l,o){var s={Locations:"text",Type:"text",Curve:"text"},d={bold:!0,color:{argb:Y.BOLD}},c={style:"thin"},f=["Locations","Curve"];l&&f.push("Type"),e.columns=[].concat(f,r(Object.keys(a).filter(function(e){return"Locations"!==e&&"Type"!==e&&"Curve"!==e}).sort(i))).map(function(e,t){return{header:e,key:e,width:t<2?20:12,style:{numFmt:s[e]?s[e]:"#0"}}}),e.addRow(a),e.getRow(1).eachCell({includeEmpty:!0},function(e){e.font=O({},d,{color:{argb:Y.WHITE}}),e.fill=u(Y.HEADER)}),e.getRow(2).eachCell({includeEmpty:!0},function(e){e.font=O({},d,{color:{argb:Y.WHITE}}),e.fill=u(Y.HEADER)}),t.forEach(function(e){Object.keys(a).forEach(function(t){void 0===e[t]&&(e[t]=null)})}),t.forEach(function(t){e.addRow(t);var a=e.lastRow;"Planned"===t.Type&&n?a.eachCell({includeEmpty:!0},function(e,t){1!==t&&(e.fill=u(Y.APPROVED))}):"Actual/Forecast"===t.Type&&a.eachCell({includeEmpty:!0},function(e,t){1!==t&&(e.fill=u(Y.ACTUAL))}),"rollup"===t.type?a.eachCell(function(e,t){e.font=O({},d),1===t&&(e.border={right:O({},c)})}):"region"===t.type?a.eachCell({includeEmpty:!0},function(e,a){e.font=O({},d);var n={};1===a&&(n.right=O({},c)),l&&"SIV"===t.Curve&&"Planned"===t.Type?n.top=O({},c):"SIV"===t.Curve&&"Actual/Forecast"!==t.Type&&"Adjusted"!==t.Type&&(n.top=O({},c)),e.border=n}):a.eachCell(function(e,a){1===a&&(e.border={right:O({},c)}),t.ignore_aggregation&&(e.font={bold:!0,color:{argb:Y.IGNORED}})})}),e.getColumn(e.columns.length).eachCell({includeEmpty:!0},function(e){e.border=O({},e.border,{right:O({},c)})}),e.lastRow.eachCell({includeEmpty:!0},function(e){e.border=O({},e.border,{bottom:O({},c)})}),e.views=[{state:"frozen",xSplit:2,ySplit:0}],o&&e.columns.find(function(e){return e._key===o.lpft.format("DD MMM YYYY")}).eachCell(function(t,a){1===a&&(t.border=O({},t.border,{top:{style:"thick"}})),t.border=O({},t.border,{right:{style:"thick"},left:{style:"thick"}}),a===e.rowCount&&(t.border=O({},t.border,{bottom:{style:"thick"}}))})}function p(e){return e.ignore_aggregation?"CANCELLED":e.adjusted_lpft?e.adjusted_lpft:""}function m(e,t,a,n,r,l,i){var o=n.reduce(function(e,t){var n=t[0],i=t[1],o=r?(0,V.getMomentDate)(r).add(n,"days"):null,s=o.format("MMM YYYY");return null===e.month?(e.month=s,e.value=i):s===e.month?e.value=i:(l[e.month]="",a[e.month]=e.value,e.value=i,e.month=s),e},{month:null,value:null});null!==o.month&&(l[o.month]="",a[o.month]=o.value),i.push(a)}function h(e,t,a,n,r,i,o,s,u){t.forEach(function(t,d){var c=t,f={Curve:(0,V.getCurveName)(d),type:a.isRegionCountry?"region":a.type,Locations:a.location};"Planned"===e?f.Locations=a.ignore_aggregation?a.location+" (CANCELLED)":a.location:"Actual/Forecast"===e&&(c=l(t,(0,V.getMomentDate)(n),a.lpft)),u&&(f.Type=e);var p=(0,R.default)(f);c.forEach(function(e){var t=e[0],a=e[1],l=n?(0,V.getMomentDate)(n).add(t,"days").format("DD MMM YYYY"):"";r[l]="",f[l]=a}),f.ignore_aggregation=a.ignore_aggregation,i.push(f),m(d,a,p,c,n,o,s)})}function v(e,t,a,n){var r={Locations:t,Patients:a.patient_allocation,Sites:a.num_sites,FSIV:a.fsiv?a.fsiv.format("DD MMM YYYY"):"","SAS%":a.sas?Number(a.sas):"","25% SI":a["25_si"]?(0,V.getMomentDate)(a["25_si"]).format("DD MMM YYYY"):"","50% SI":a["50_si"]?(0,V.getMomentDate)(a["50_si"]).format("DD MMM YYYY"):"","90% SI":a["90_si"]?(0,V.getMomentDate)(a["90_si"]).format("DD MMM YYYY"):"",FPFV:a.fpfv?a.fpfv.format("DD MMM YYYY"):"","FPFV-LPFV":a.fpfv_lpfv,"SR (patients/month/site)":a.sr?+Number(a.sr).toFixed(2):"","SF%":a.screening_failure||0===a.screening_failure?Number(a.screening_failure):"","RR (patients/month/site)":a.randomisation_rate?Number(a.randomisation_rate):"","P/LPFT":a.lpft?a.lpft.format("DD MMM YYYY"):"",type:n};return e&&(r.Type=e),r}function _(e,t,a,n,l,i,o,s,u){var d=e.reduce(function(e,t){if(t.isRegionCountry&&"region"===t.type)return e;if(a){e.push(v("Planned",t.ignore_aggregation?t.location+" (CANCELLED)":t.location,t,t.isRegionCountry?"region":t.type)),t.overallocatedData&&e.push(v(null,t.location+" w/o over-enrollment",t.overallocatedData,"targetRow"));var r={patient_allocation:t.actual_patient_allocation,num_sites:t.actual_num_sites,fsiv:t.actual_fsiv,sas:t.actual_sas,"25_si":t.actual_25_si,"50_si":t.actual_50_si,"90_si":t.actual_90_si,fpfv:t.actual_fpfv,fpfv_lpfv:t.actual_fpfv_lpfv,sr:t.actual_sr,screening_failure:t.actual_screening_failure,randomisation_rate:t.actual_randomisation_rate,lpft:t.actual_f_lpft,ignore_aggregation:t.ignore_aggregation};if(e.push(v("Actual/Forecast","",r,t.isRegionCountry?"region":t.type)),n){var l={patient_allocation:t.ignore_aggregation?"":t.adjusted_patient_allocation,num_sites:t.adjusted_num_sites,fsiv:t.adjusted_fsiv,sas:t.adjusted_sas,"25_si":t.adjusted_25_si,"50_si":t.adjusted_50_si,"90_si":t.adjusted_90_si,fpfv:t.adjusted_fpfv,fpfv_lpfv:t.adjusted_fpfv_lpfv,sr:t.adjusted_sr,screening_failure:t.adjusted_screening_failure,randomisation_rate:t.adjusted_randomisation_rate,lpft:p(t),ignore_aggregation:t.ignore_aggregation};e.push(v("Adjusted","",l,t.isRegionCountry?"region":t.type)),t.adjusted_overallocatedData&&e.push(v(null,t.location+" w/o over-enrollment",t.adjusted_overallocatedData,"targetRow"))}}else e.push(v(null,t.location,t,t.isRegionCountry?"region":t.type)),t.overallocatedData&&e.push(v(null,t.location+" w/o over-enrollment",t.overallocatedData,"targetRow"));return e},[]),m=[],_={Locations:"",Curve:""},E=[],g={Locations:"",Curve:""};e.forEach(function(e){var t=e.curves?[].concat(r(e.curves.map(function(e){return e.unshift([0,0]),e}))):[],l=e.actual_curves?[].concat(r(e.actual_curves)):[],o=e.adjusted_curves?[].concat(r(e.adjusted_curves.map(function(e){return e.unshift([0,0]),e}))):[];i&&t[0]&&t[1]&&t[2]&&(t[1]=t[1].filter(function(t){return!e.fpfv||!e.fpfv_lpfv||(0,V.getMomentDate)(i).add(t[0],"d")<=e.fpfv.clone().add(e.fpfv_lpfv,"d")}),t[2]=t[2].filter(function(t){return!e.lpft||(0,V.getMomentDate)(i).add(t[0],"d")<=e.lpft})),e.isRegionCountry&&"region"===e.type||(a?(_.Type="",h(q.PLANNED,t,e,i,_,m,g,E,a),h(q.ACTUAL,l.slice(0,3),e,i,_,m,g,E,a),n&&h(q.ADJUSTED,o,e,i,_,m,g,E,a)):h(q.PLANNED,t,e,i,_,m,g,E))}),c(s,d,l,a);var y=n?"adjusted_":"";return f(o,m,_,l,a,e[0][y+"overallocatedData"]&&O({},e[0][y+"overallocatedData"],{startDate:i})),f(u,E,g,l,a),{curvesWorksheet:o,tableWorksheet:s,curvesByMonthWorksheet:u}}function E(e,t){var a=(0,A.default)(e,"state.status");return e.is_recommended_by_FPO&&!a?"Recommended by FPO":a&&"ADD"===a?"Added, reason: "+(0,A.default)(t.find(function(t){return+t.id==+e.state.reason_id}),"text","-"):a&&"REMOVE"===a?"Removed, reason: "+(0,A.default)(t.find(function(t){return+t.id==+e.state.reason_id}),"text","-"):"-"}function g(e,t,a){var n=e.reduce(function(e,t){return e.push({Rank:t.ranking,PI:t.investigator_center.investigator.name,"Primary center":t.investigator_center.center.name,Completed:t.studies_complete,Active:t.studies_active,Min:t.min_patients_randomized,Max:t.max_patients_randomized,Avg:t.average_patients_randomized,RR:t.randomization_rate,SF:t.screen_failure_rate,"DR Randomization":t.drop_out_rate,"Median time to query close":t.median_time_to_query,"Median time to entry":t.median_time_to_entry,"MVR issues raised":t.mvr_issues_raised,"Patients w/I/E protocol deviation":t.patients_with_ie_protocol_deviation,"Query rate":t.query_rate,"SIV-FPFV (decile)":t.decile_siv_fpfv,"RR (decile)":t.decile_randomization_rate,"SF% (decile)":t.decile_screen_failure_rate,"DP% (decile)":t.decile_default_probability_rate,"Confidence (RR)":t.forecast_confidence_score,Target:(0,A.default)(t,"studyLevelData.target_patients"),Actual:(0,A.default)(t,"studyLevelData.randomized_patients"),SIV:(0,A.default)(t,"studyLevelData.siv")?(0,V.getMomentDate)((0,A.default)(t,"studyLevelData.siv")).format("DD MMM YYYY"):"",FPFV:(0,A.default)(t,"studyLevelData.fpfv")?(0,V.getMomentDate)((0,A.default)(t,"studyLevelData.fpfv")).format("DD MMM YYYY"):"",LPFV:(0,A.default)(t,"studyLevelData.lpfv")?(0,V.getMomentDate)((0,A.default)(t,"studyLevelData.lpfv")).format("DD MMM YYYY"):"",Origin:E(t,a)}),e},[]),r={Rank:4,PI:25,"Primary center":30,Completed:15,Active:15,Min:10,Max:10,Avg:10,RR:10,SF:10,"DR Randomization":17,"Median time to query close":20,"Median time to entry":20,"MVR issues raised":20,"Patients w/I/E protocol deviation":20,"Query rate":10,"SIV-FPFV (decile)":15,"RR (decile)":15,"SF% (decile)":15,"DP% (decile)":15,"Confidence (RR)":15,Target:10,Actual:10,SIV:10,FPFV:10,LPFV:10,"Exp. RR":10,Origin:40},l={Rank:{numFmt:"#",alignment:{vertical:"top",horizontal:"left"}},SIV:{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}},FPFV:{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}},LPFV:{numFmt:"dd mmm yyyy",alignment:{vertical:"top",horizontal:"left"}}},i={bold:!0,color:{argb:Y.BOLD}},o={style:"thin"};t.columns=Object.keys(n[0]).map(function(e){return{header:e,key:e,width:r[e],style:l[e]}});var s=Object.keys(n[0]),d=Object.keys(n[0]),c=Object.keys(n[0]);t.spliceRows(1,1,s,d,c),t.mergeCells("A1","C1"),t.mergeCells("D1","P1"),t.mergeCells("Q1","U1"),t.mergeCells("V1","Z1"),t.mergeCells("A2","C2"),t.mergeCells("D2:E2"),t.mergeCells("F2","H2"),t.mergeCells("I2","K2"),t.mergeCells("L2","P2"),t.mergeCells("Q2","U2"),t.mergeCells("V2","W2"),t.mergeCells("X2","Z2"),t.getCell("A1").value="",t.getCell("D1").value="Historical",t.getCell("Q1").value="Forecast",t.getCell("V1").value="Current study",t.getCell("AA1").value="",t.getCell("A2").value="",t.getCell("B2").value="",t.getCell("C2").value="",t.getCell("D2").value="Studies",t.getCell("F2").value="Patients randomized",t.getCell("I2").value="Enrolment rates",t.getCell("L2").value="Ops. metrics",t.getCell("Q2").value="Enrolment rates",t.getCell("V2").value="Patients",t.getCell("X2").value="Milestones",t.getCell("AA2").value="",t.getRow(1).eachCell(function(e){e.font=O({},i,{color:{argb:Y.BOLD}})}),t.getRow(2).eachCell(function(e,t){e.font=O({},i,{color:{argb:Y.BOLD}}),t>=4&&t<=16?e.fill=u("FFD3D3D3"):t>=17&&t<=21?e.fill=u("FFADD8E6"):t>=22&&t<=26&&(e.fill=u("FF90EE90"))}),t.getRow(3).eachCell(function(e,t){e.font=O({},i,{color:{argb:Y.WHITE}}),e.fill=u(t<4?"FF778899":t>=4&&t<=16?Y.HEADER:t>=17&&t<=21?"FF191970":t>=22&&t<=26?"FF2E8B57":"FF778899")}),n.forEach(function(e){t.addRow(e)}),t.getColumn("C").eachCell(function(e,t){t>3&&(e.border=O({},e.border,{right:{style:"thin"}}))}),t.getColumn("E").eachCell(function(e,t){t>3&&(e.border=O({},e.border,{right:{style:"thin"}}))}),t.getColumn("H").eachCell(function(e,t){t>3&&(e.border=O({},e.border,{right:{style:"thin"}}))}),t.getColumn("K").eachCell(function(e,t){t>3&&(e.border=O({},e.border,{right:{style:"thin"}}))}),t.getColumn("P").eachCell(function(e,t){t>3&&(e.border=O({},e.border,{right:{style:"thin"}}))}),t.getColumn("U").eachCell(function(e,t){t>3&&(e.border=O({},e.border,{right:{style:"thin"}}))}),t.getColumn("W").eachCell(function(e,t){t>3&&(e.border=O({},e.border,{right:{style:"thin"}}))}),t.getColumn("Z").eachCell(function(e,t){t>3&&(e.border=O({},e.border,{right:{style:"thin"}}))}),t.getColumn("AA").eachCell(function(e,t){t>3&&(e.border=O({},e.border,{right:{style:"thin"}}))}),t.lastRow.eachCell({includeEmpty:!0},function(e){e.border=O({},e.border,{bottom:O({},o)})})}function y(e,t){return new Promise(function(e){a.e(0).then(function(t){e(a(490))}.bind(null,a)).catch(a.oe)}).then(function(a){var n=(0,R.default)(t.cohorts),r=o(e,t),l=new a.Workbook,i=(0,U.getAggregatedGlobalRow)(n.filter(function(e){return e.countries.length>0&&e.fp}).map(function(e){return e.fullData.find(function(e){return"rollup"===e.type})}),t.cohorts.map(function(e){return e.aggregatedActuals})[0],(0,N.default)(t.fp),t),u=l.addWorksheet("All - Curves (day)",d(Y.CURVES_TAB)),c=l.addWorksheet("ALL - Curves (month)",d(Y.CURVES_TAB)),f=l.addWorksheet("All - Table",d(Y.TABLE_TAB));_(i,null,s(e,t),r,t.status===B.SCENARIO_STATUS.APPROVED||r,t.fp,u,f,c),n.forEach(function(a,n){var i="C"+(n+1),o=l.addWorksheet(i+" - Curves (day)"),u=l.addWorksheet(i+" - Curves (month)",d(Y.CURVES_TAB)),c=l.addWorksheet(i+" - Table");_(a.fullData,a.name,s(e,t),r,t.status===B.SCENARIO_STATUS.APPROVED||r,a.fp,o,c,u)}),l.xlsx.writeBuffer().then(function(a){P.default.saveAs(new Blob([a],{type:"application/octet-stream"}),e.study_id+"_"+t.name+"_"+t.updated.format("DD-MMM-YY")+".xlsx")})})}function S(e,t,n){return new Promise(function(e){a.e(0).then(function(t){e(a(490))}.bind(null,a)).catch(a.oe)}).then(function(a){var r=new a.Workbook,l=r.addWorksheet("Curves (day)",d(Y.CURVES_TAB)),i=r.addWorksheet("Curves (month)",d(Y.CURVES_TAB)),u=r.addWorksheet("Table",d(Y.TABLE_TAB)),c=o(e,t);_(n,null,s(e,t),c,t.status===B.SCENARIO_STATUS.APPROVED||c,t.fp,l,u,i),r.xlsx.writeBuffer().then(function(a){P.default.saveAs(new Blob([a],{type:"application/octet-stream"}),e.study_id+"_"+t.name+"_"+(0,V.getMomentDate)(t.updated||(0,N.default)()).format("DD-MMM-YY")+".xlsx")})})}function b(e,t,a,n){var r=e.study_id+"_"+t.name+"_"+(a?a+"_":"")+(0,V.getMomentDate)(t.updated||(0,N.default)()).format("DD-MMM-YY")+".png",l=document.querySelector(".svg-wrapper:not([id*=minimized])"),i=l.getBoundingClientRect(),o=i.width,s=document.querySelector(".fpo-grid"),u=parseInt(getComputedStyle(s).paddingLeft,10),d=document.querySelector(".fpo-col-offset-1"),c=parseInt(getComputedStyle(d).marginLeft,10),f=document.querySelector(".screenshot-container");(0,M.default)(f,{logging:!1,width:o+z,x:u+c-W,onclone:function(e){var t=e.querySelectorAll(".alert__title");t.length&&(t=Array.prototype.slice.call(t),t.forEach(function(e){e.style.display="inline-table"}));var a=e.querySelector(".chart-container");a&&(a.style.visibility="visible");var n=e.querySelectorAll(".exclude-from-screenshot");if(n.length&&(n=Array.prototype.slice.call(n),n.forEach(function(e){e.parentNode.removeChild(e)})),navigator.userAgent.indexOf("MSIE ")>-1||navigator.userAgent.indexOf("Trident/")>-1){var r=e.querySelector(".screenshot-container"),l=e.querySelectorAll(".sticky:not(.exclude-from-screenshot)");l.length&&(l=Array.prototype.slice.call(l),l.forEach(function(e){e.style.position="absolute",r.classList.contains("cohorts-scenario-container")&&(e.firstElementChild.classList.contains("alerts-container")?e.style.top="0px":e.firstElementChild.classList.contains("filters-container")&&(e.style.top="44px"))}));var i=r.querySelectorAll("svg");i.length&&(i=Array.prototype.slice.call(i),i.forEach(function(t){t.removeAttribute("xmlns");var a=e.createElement("canvas");t.parentNode.replaceChild(a,t);var n=e.createElement("div");n.appendChild(t),(0,F.default)(a,n.innerHTML)}))}}}).then(function(e){e.toBlob(function(e){P.default.saveAs(e,r)}),n()})}function C(e,t,n,r,l,i,o){return new Promise(function(e){a.e(0).then(function(t){e(a(490))}.bind(null,a)).catch(a.oe)}).then(function(a){var s=new a.Workbook;if(n.length>0){var u=s.addWorksheet("Selected sites",d(Y.TABLE_TAB));g(n,u,o)}if(r.length>0){var c=s.addWorksheet("Other internal sites",d(Y.TABLE_TAB));g(r,c,o)}if(l.length>0){var f=s.addWorksheet("Other new sites",d(Y.TABLE_TAB));g(l,f,o)}s.xlsx.writeBuffer().then(function(a){P.default.saveAs(new Blob([a],{type:"application/octet-stream"}),"Sites - "+(0,A.default)(e,"study_id")+"_"+(0,A.default)(t,"name")+"_"+(0,A.default)(i,"country_name")+"_"+(0,V.getMomentDate)((0,A.default)(t,"updated")||(0,N.default)()).format("DD-MMM-YY")+".xlsx")})})}Object.defineProperty(t,"__esModule",{value:!0});var O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.exportToExcelCohorts=y,t.exportToExcel=S,t.saveAsImage=b,t.exportToExcelCountrySitesSelection=C;var T=a(31),R=n(T),w=a(11),A=n(w),I=a(10),N=n(I),D=a(1899),P=n(D),L=a(1919),M=n(L),x=a(1490),k=n(x),j=a(1491),F=n(j),U=a(223),V=a(7),B=a(14),H=a(17),G=n(H);k.default.init();var Y={APPROVED:"FFebfaee",ACTUAL:"FFededed",IGNORED:"FFc9c9c9",HEADER:"FF9d9d9d",WHITE:"FFffffff",BOLD:"FF262626",CURVES_TAB:"FFb34534",TABLE_TAB:"FF00c425"},q={PLANNED:"Planned",ACTUAL:"Actual/Forecast",ADJUSTED:"Adjusted"},z=50,W=20},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(t.required=function(e){return e||0===e?void 0:"Required"},t.requiredStudy=function(e){return e?void 0:"Please enter a study ID"},t.requiredScenario=function(e){return e?void 0:"Please enter a scenario ID"},t.isNumber=function(e){return e&&isNaN(Number(e))?"Must be a number":void 0},t.minValue=function(e){return function(t){return t&&t<e?"Must be at least "+e:void 0}}),r=(t.minValue1=n(1),t.maxValue=function(e){return function(t){return t&&t>e?"Must be not greater than "+e:void 0}});t.maxValue1m=r(1e6),t.maxLength=function(e){return function(t){return t&&t.length>e?"Must be "+e+" characters max":void 0}},t.isInteger=function(e){return e&&/^\d+$/.test(e)||0===e?void 0:"Must be an integer"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextMenu=t.ContextMenuItem=void 0;var n=a(854),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.ContextMenuItem=n.ContextMenuItem,t.ContextMenu=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(936),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2023),m=n(p);a(2351);var h=function(e){function t(){return l(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=r(e,["children"]);return d.default.createElement(m.default,a,t)}}]),t}(d.default.PureComponent);h.propTypes={mouseEnterDelay:f.default.number,destroyTooltipOnHide:f.default.bool,mouseLeaveDelay:f.default.number,align:f.default.object,placement:f.default.oneOf(["top","right","bottom","left","topLeft","leftTop","topRight","rightTop","bottomRight","rightBottom","bottomLeft","leftBottom"]),trigger:f.default.any,children:f.default.any,onVisibleChange:f.default.func,afterVisibleChange:f.default.func,overlay:f.default.oneOfType([f.default.node,f.default.func]).isRequired,getTooltipContainer:f.default.func},h.defaultProps={mouseEnterDelay:0,destroyTooltipOnHide:!0,mouseLeaveDelay:.1,align:{},placement:"top",trigger:["hover"],children:void 0,onVisibleChange:void 0,afterVisibleChange:void 0,getTooltipContainer:void 0},t.default=d.default.memo(h)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ADMIN:"FPO_ADMIN",USER:"FPO_USER",READONLY:"FPO_READONLY_USER",COUNTRY_USER:"FPO_COUNTRY_USER",PLAYGROUND:"FPO_PLAYGROUND_USER"};t.default=n},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedSitesPages=t.getSelectedSitesExpectedCountryData=t.getSelectedSitesWithRROverride=t.getSelectedSitesWithoutRR=t.getSelectedSitesAverageRR=t.getSelectedSitesCount=t.getSelectedFilteredSites=t.getSelectedSites=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(43),o=a(11),s=n(o),u=a(83),d=n(u),c=a(198),f=n(c),p=a(224),m=n(p),h=a(115),v=a(48),_=a(7),E=t.getSelectedSites=(0,h.createDeepEqualSelector)([h.getSitesFromStore,h.getInitialSitesSelectionFromStore,h.getLoadingSitesStatus],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return arguments[2]?h.EMPTY_SITES:e.filter(function(e){var a=(0,s.default)(e,"state.status");return t?e.is_recommended_by_FPO:e.is_recommended_by_FPO&&!a||"ADD"===a})}),g=(t.getSelectedFilteredSites=(0,h.createDeepEqualSelector)([E,h.getInternalSitesFilterFromStore,h.getExternalSitesFilterFromStore,h.getExperienceSitesFilterFromStore,h.getSitesSearchValueFromStore,h.getSortOptionsFromStore],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments[3],l=arguments[4],i=arguments[5],o=e.reduce(function(e,t){return(0,f.default)(t.ranking)&&"ranking"===i.active?e.unrankedSites.push(t):e.rankedSites.push(t),e},{unrankedSites:[],rankedSites:[]}),u=o.unrankedSites,d=o.rankedSites,c=(0,m.default)(i.active);return[].concat(r(d.sort(c(i.active,i.direction))),r(u)).filter(function(e){var r=!0,i=void 0;t&&(i="INTERNAL"),a&&(i="EXTERNAL");var o=(0,s.default)(e,"isInternal")?"INTERNAL":"EXTERNAL";return r&&i&&i!==o&&(r=!1),r&&(r=(0,h.isMatchedByExpFilters)(e,n)),r&&(r=(0,h.isMatchedBySearchInput)(e,l)),r})}),t.getSelectedSitesCount=(0,i.createSelector)(E,function(e){return e.length})),y=t.getSelectedSitesAverageRR=(0,i.createSelector)(E,function(e){if(!e||0===e.length)return 0;var t=e.reduce(function(e,t){var a=void 0;return t.forecast_randomization_rate?a=t.forecast_randomization_rate:t.randomization_rate&&(a=t.randomization_rate),a?{total:e.total+ +a,count:e.count+1}:e},{total:0,count:0});return t.count>0?t.total/t.count:0});t.getSelectedSitesWithoutRR=(0,i.createSelector)(E,function(e){return e&&0!==e.length?e.filter(function(e){var t=void 0;return e.forecast_randomization_rate?t=e.forecast_randomization_rate:e.randomization_rate&&(t=e.randomization_rate),!t}).length:0}),t.getSelectedSitesWithRROverride=(0,i.createSelector)(E,function(e){return e&&0!==e.length?e.filter(function(e){return+e.state.randomization_rate}).length:0}),t.getSelectedSitesExpectedCountryData=(0,i.createSelector)([v.getActiveCountry,y,g,v.getScenarioData,v.getScenarioCountries],function(e,t,a,n,i){if(!n||!e)return null;var o=!!n.source_scenario_id,s=void 0;s=o?l({},e,{adjusted_num_sites:a,adjusted_randomisation_rate:t}):l({},e,{num_sites:a,randomisation_rate:t});var u=i.filter(function(t){return t.country_id!==e.country_id});return(0,_.getScenarioCalculatedData)([].concat(r(u),[s]),(0,d.default)(n,"approvedData")).find(function(t){return t.country_id===e.country_id})||null}),t.getSelectedSitesPages=(0,i.createSelector)(E,function(e){return e.length/h.PER_PAGE})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";function n(e,t){return function(a){return a((0,s.fetchApi)(d.SCENARIO_NOTE.replace(/:scenarioId/,e),{type:o.ADD_SCENARIO_NOTE,scenarioId:e},"POST",t))}}function r(e,t){return function(a){return a((0,s.fetchApi)(d.IMPACT_SCENARIO_NOTE.replace(/:impactScenarioId/,e),{type:o.ADD_IMPACT_SCENARIO_NOTE,impactScenarioId:e},"POST",t))}}function l(e,t){return function(a){return a((0,s.fetchApi)(d.SCENARIO_NOTE.replace(/:scenarioId/,e),{type:o.GET_SCENARIO_NOTES,scenarioId:e},"GET",null,{signal:t}))}}function i(e){return function(t){return t((0,s.fetchApi)(d.IMPACT_SCENARIO_NOTE.replace(/:impactScenarioId/,e),{type:o.GET_IMPACT_SCENARIO_NOTES,impactScenarioId:e}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.addScenarioNote=n,t.addImpactScenarioNote=r,t.getScenarioNotes=l,t.getImpactScenarioNotes=i;var o=a(15),s=a(44),u=a(45),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(u)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(827),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={LPFT_ALL:"All LPFT",LPFT_EARLY:"Early",LPFT_LATE:"Late",START_UP:"Start-up",SCREENING:"Screening",RANDOMISATION:"Randomization"};t.LOCATION_FILTER_OPTIONS={ALL_REGIONS:"All regions",ALL:"All",GLOBALS_ONLY:"Global"},t.default=n},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FlexItem=t.FlexBox=void 0;var r=a(910),l=n(r),i=a(912),o=n(i);t.default={FlexBox:l.default,FlexItem:o.default},t.FlexBox=l.default,t.FlexItem=o.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventCountrySelector=void 0;var r=a(1005),l=n(r),i=a(1004),o=n(i);t.EventCountrySelector=o.default,t.default=l.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1012),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={INCOMPLETE:"INCOMPLETE",ERROR:"ERROR",COMPLETE:"COMPLETE"};t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SITE_STATUS={ACTIVE:"ACTIVE",COMPLETED:"COMPLETED"},t.METRICS_FILTER=[{key:"median_time_to_query",value:"Median time to query close"},{key:"median_time_to_entry",value:"Median time to entry"},{key:"mvr_issues",value:"MVR issues raised"},{key:"patients_with_ie_protocol_deviation",value:"Patients w/I/E protocol deviation"},{key:"query_rate",value:"Query Rate"}],t.METRICS_FILTER_KEYS={MEDIAN_TIME_TO_QUERY:"median_time_to_query",MEDIAN_TIME_TO_ENTRY:"median_time_to_entry",MVR_ISSUES_RAISED:"mvr_issues",PATIENTS_PROTOCOL_DEVIATION:"patients_with_ie_protocol_deviation",QUERY_RATE:"query_rate"},t.MILESTONES_FILTER=[{key:"fp_siv",value:"FP-SIV"},{key:"siv_fpfv",value:"SIV-FPFV"},{key:"fpfv_lpfv",value:"FPFV-LPFV"}],t.MILESTONES_FILTER_FILTER_KEYS={FP_SIV:"fp_siv",SIV_FPFV:"siv_fpfv",FPFV_LPFV:"fpfv_lpfv"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){var a=t?"adjusted_":"";return e[a+"overallocatedData"]?e[a+"overallocatedData"].lpft:e[a+"lpft"]},r=function(e,t){var a=t?"adjusted_":"";return e[a+"overallocatedData"]?e[a+"overallocatedData"].patient_allocation():e[a+"patient_allocation"]};t.getPredictedDate=n,t.getPredictedPatients=r},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CountryDataContext=void 0;var r=a(0),l=n(r),i=a(1),o=n(i),s=t.CountryDataContext=(0,r.createContext)([]),u=function(e){var t=e.data,a=e.hasSitesWithTrackingData,n=e.studyId,r=e.scenarioId,i=e.countryId,o=e.children,u=t.find(function(e){return"country"===e.type&&e.platform_country_id===i}),d={countryPlannedData:u,hasSitesWithTrackingData:a,studyId:n,scenarioId:r,countryId:i};return l.default.createElement(s.Provider,{value:d},o)};u.defaultProps={data:[],hasSitesWithTrackingData:!1},u.propTypes={data:o.default.array,hasSitesWithTrackingData:o.default.bool,studyId:o.default.number.isRequired,scenarioId:o.default.number.isRequired,countryId:o.default.number.isRequired,children:o.default.node.isRequired},t.default=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a){var n={uncertainty:"N/A",unavailableFields:[]},r=e.length>0,l=0,i=a.predictedCountries&&a.predictedCountries.rows?a.predictedCountries.rows:[],o=(0,_.default)(i,e,function(e,t){return e.country_id===t.platform_country_id});i.length!==o.length&&(r=!1,n.unavailableFields=["fsiv","sas","25_si","50_si","90_si","fpfv","screening_failure","randomisation_rate"]);for(var s=0;s<e.length;s+=1){var u=e[s],d=u.uncertainty,f=u.overrideList.filter(function(e){return"id"!==e&&"scenario_id"!==e&&"country_id"!==e&&"patient_allocation"!==e&&"num_sites"!==e&&"constraint"!==e&&"unlock"!==e});if(u.unlock&&0===u.unlock.length&&(n.unavailableFields=(0,c.default)(n.unavailableFields.concat(f))),!d){r=!1;break}l+=d*(u.patient_allocation/t)}return r&&(n.uncertainty=l<=.3?S.UNCERTAINTY.LOW:l>.3&&l<=.7?S.UNCERTAINTY.MEDIUM:S.UNCERTAINTY.HIGH),n}function i(e,t,a){return e.map(function(e){var n=e.aggregators,i=e.countries;Object.keys(n).forEach(function(r){if("GR"!==r){var l=r,o=n[r];o.curves=[[],[],[]],"actual"===e.type&&(o.curves=o.curves.concat([[],[]]));var s=i.filter(function(t){return t.region_name===l&&(t.lpft&&!t.invalidFields&&!t.ignore_aggregation||"actual"===e.type)});(0,O.aggregateCurvesData)(o,s,a.cohorts&&a.cohorts.length>0,t,a.isImpact)}});var o=n.GR;o.curves=[[],[],[]],"actual"===e.type&&(o.curves=o.curves.concat([[],[]]));var s=Object.keys(n).filter(function(e){return"GR"!==e}).map(function(e){return n[e]});(0,O.aggregateCurvesData)(o,s,a.cohorts&&a.cohorts.length>0,t,a.isImpact);var d=[null],c=(0,g.default)("location","ASC");Object.keys(n).sort().forEach(function(e){var l=[],o=n[e];if("actual"!==o.valuesType&&!a.isImpact&&"IMPACT"!==a.origin){var s=o.curves[2],f=s[s.length-1]||null;o.lpft=f?t.clone().add(f[0],"d"):null}var p=void 0;if(p="GR"===e?i.filter(function(e){return e.lpft&&!e.ignore_aggregation}):i.filter(function(t){return t.region_name===e&&t.lpft&&!t.ignore_aggregation}),1===p.length&&"actual"!==o.valuesType){var m=p[0];o["25_si"]=m["25_si"]?m["25_si"]:null,o["50_si"]=m["50_si"]?m["50_si"]:null,o["90_si"]=m["90_si"]?m["90_si"]:null}else if("actual"===o.valuesType){var h=o.actual_date?o.actual_date.format("YYYY-MM-DD"):null,v=o.lpft?o.lpft.format("YYYY-MM-DD"):null,_=o.curves[0].filter(function(e){return!o.actual_date||!o.lpft||(o.actual_date&&o.lpft&&o.actual_date.isBefore(o.lpft)?e[0]<=h:e[0]<=v)});if(o.planned_num_sites){var E=_.find(function(e){return e[1]>=.25*o.planned_num_sites}),g=_.find(function(e){return e[1]>=.5*o.planned_num_sites}),S=_.find(function(e){return e[1]>=.9*o.planned_num_sites});o["25_si"]=void 0===E?null:(0,I.getMomentDate)(E[0]),o["50_si"]=void 0===g?null:(0,I.getMomentDate)(g[0]),o["90_si"]=void 0===S?null:(0,I.getMomentDate)(S[0])}}else if("generic"===o.valuesType||"adjusted"===o.valuesType&&a.exact_copy&&!a.hasAdjustedOrigin){var b=o.curves[0].find(function(e){return e[1]>=.25*o.num_sites}),C=o.curves[0].find(function(e){return e[1]>=.5*o.num_sites}),O=o.curves[0].find(function(e){return e[1]>=.9*o.num_sites});o["25_si"]=void 0===b?null:t.clone().add(b[0],"d"),o["50_si"]=void 0===C?null:t.clone().add(C[0],"d"),o["90_si"]=void 0===O?null:t.clone().add(O[0],"d")}if("region"===o.type){l=i.filter(function(e){return e.region===o.location}).sort(function(e,t){return e.location===y.UNSPECIFIED_COUNTRY?1:t.location===y.UNSPECIFIED_COUNTRY?-1:c(e,t)}).map(function(e){var t=e.regionHasSingleCountry;return o.isRegionCountry=e.regionHasSingleCountry,t&&e.onlyActuals&&(o.onlyActuals=!0,o.ignoreGenericData=!0),t&&e.ignoreAdjustedData&&(o.ignoreAdjustedData=!0),u({type:"country"},e,{isRegionCountry:t})});var T=l.filter(function(e){return e.ignoreAdjustedData}),A=l.filter(function(e){return e.onlyActuals});T.length===l.length&&(o.ignoreAdjustedData=!0),A.length===l.length&&(o.onlyActuals=!0),o.sas=(0,w.getWeightedBySitesValue)("sas","num_sites",l.filter(function(e){return e.lpft&&!e.ignore_aggregation}),o.num_sites);var N=l.filter(function(e){return null!==e.randomisation_rate&&void 0!==e.randomisation_rate&&null!==e.sr&&void 0!==e.sr&&e.lpft&&!e.ignore_aggregation}),D=(0,w.getWeightedBySitesValue)("randomisation_rate","num_sites",N,o.num_sites);o.randomisation_rate=D>0?+D.toFixed(2):null;var P=(0,w.getWeightedBySitesValue)("sr","num_sites",N,o.num_sites);o.sr=P>0?+P.toFixed(2):null;var L=(0,w.getWeightedBySitesValue)("screening_failure","num_sites",N,o.num_sites);o.screening_failure=L>0?+L.toFixed(2):null,o.generatedFields&&"generic"===o.valuesType&&a.isImpact&&(o.generatedFields=(0,R.default)(o,l))}else o.sas=(0,w.getWeightedBySitesValue)("sas","num_sites",i.filter(function(e){return e.lpft}),o.num_sites);if("generic"===o.valuesType&&(a.aggregatedHistoricalDataByStudy&&a.aggregatedHistoricalDataByStudy[e]&&(o.historical_reference_data_by_studies=a.aggregatedHistoricalDataByStudy[e]),a.aggregatedHistoricalDataByIndication&&a.aggregatedHistoricalDataByIndication[e]&&(o.historical_reference_data_by_indication=a.aggregatedHistoricalDataByIndication[e])),0===o.curves[1].length)o.fpfv_lpfv=null,o.fpp_fpfv=null;else if("adjusted"===o.valuesType){var M=o.curves[1],x=M[M.length-1][0],k=o.fpfv.diff(t,"d");o.fpfv_lpfv=x-k,o.fpp_fpfv=k}else if("actual"!==o.valuesType){var j=o.fpfv?o.fpfv.diff(t,"d"):-1,F=o.curves[1].map(function(e){return e[1]}),U=null!==j&&j>=0?F.indexOf(Math.max.apply(Math,r(F))):null;o.fpfv_lpfv=null!==j&&j>=0&&null!==U&&U>=0?U-j+1:null,o.fpp_fpfv=j,o.lpfv=t.clone().add(U+1,"d")}"region"===o.type?(d.push(o),d=d.concat(l)):d[0]=o});var f=d.filter(function(e){return e&&"region"===e.type&&e.lpft}),p=d[0];p.fp=t;var m=(0,w.getWeightedBySitesValue)("randomisation_rate","num_sites",f,p.num_sites),h=(0,w.getWeightedBySitesValue)("sr","num_sites",f,p.num_sites);p.randomisation_rate=m>0?Number(m.toFixed(2)):null,p.sr=h>0?Number(h.toFixed(2)):null;var v=(0,w.getWeightedBySitesValue)("screening_failure","num_sites",f,p.num_sites);if(p.screening_failure=v>0?Number(v.toFixed(2)):null,"generic"===p.valuesType){var _=l(i,p.patient_allocation,a),E=_.uncertainty,S=_.unavailableFields;p.uncertainty=E,p.uncertaintyUnavailableFields=S}return p.generatedFields&&"generic"===p.valuesType&&a.isImpact&&(p.generatedFields=(0,R.default)(p,i)),d[0]=u({},d[0],p),d})}function o(e,t,a,n){var r=(0,C.default)(e),l=r.genericDataRows,o=r.actualDataRows,s=r.adjustedDataRows,d={aggregators:D(s,"adjusted"),countries:s,type:"adjusted"},c={aggregators:D(o,"actual"),countries:o,type:"actual"},f={aggregators:D(l,"generic"),countries:l,type:"generic"},m=[f,c,d],h=i(m,t,a,n),v=h[0],_=h[1],E=h[2];return v.map(function(e,t){var a=(0,b.getPrefixedData)(_[t]),n=(0,b.getPrefixedData)(E[t]);return u({},(0,p.default)(e,"valuesType"),a,n)})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments[2],n=arguments[3];try{var l=(0,C.default)(e),i=l.genericDataRows,o=l.adjustedDataRows,s=t.map(function(e){return u({},e,(0,N.getActualsData)(e,a))}),d=(0,C.default)(s),c=d.actualDataRows,f={aggregators:P(o,"adjusted"),countries:o,type:"adjusted"},p={aggregators:P(c,"actual"),countries:c,type:"actual"},m={aggregators:P(i,"generic"),countries:i,type:"generic"},h=[m,p,f],v=h.map(function(t){var l=t.aggregators,i=t.countries,o=l.GR;o.curves=[[],[],[]],"actual"===t.type&&(o.curves=o.curves.concat([[],[]]));try{(0,O.aggregateCurvesData)(o,i,"generic"===t.type||"adjusted"===t.type,a,n.isImpact)}catch(e){o.curvesAggregationError=e}var s=[null];Object.keys(l).sort().forEach(function(e){var t=l[e];if("actual"!==t.valuesType){var n=t.curves[2].map(function(e){return e[1]}),o=n.indexOf(Math.max.apply(Math,r(n)));t.lpft=-1===o?null:a.clone().add(o+1,"d")}var u=t.curves[0].findIndex(function(e){return e[1]>=.25*t.num_sites});t["25_si"]=-1===u?null:a.clone().add(u+1,"d");var d=t.curves[0].findIndex(function(e){return e[1]>=.5*t.num_sites});t["50_si"]=-1===d?null:a.clone().add(d+1,"d");var c=t.curves[0].findIndex(function(e){return e[1]>=.9*t.num_sites});if(t["90_si"]=-1===c?null:a.clone().add(c+1,"d"),t.sas=(0,w.getWeightedBySitesValue)("sas","num_sites",i,t.num_sites),0===t.curves[1].length)t.fpfv_lpfv=null,t.fpp_fpfv=null;else{var f=t.fpfv?t.fpfv.diff(a,"d"):-1,p=t.curves[1].map(function(e){return e[1]}),m=null!==f&&f>=0?p.indexOf(Math.max.apply(Math,r(p))):null;t.fpfv_lpfv=null!==f&&f>=0&&null!==m&&m>=0?m-f+1:null,t.fpp_fpfv=f}s[0]=t});var d=s[0],c=(0,w.getWeightedBySitesValue)("randomisation_rate","num_sites",e,d.num_sites),f=(0,w.getWeightedBySitesValue)("sr","num_sites",e,d.num_sites);return d.randomisation_rate=c>0?Number(c.toFixed(2)):null,d.sr=f>0?f:null,null!==d.randomisation_rate&&null!==d.sr?d.screening_failure=1-d.randomisation_rate/d.sr:d.screening_failure=null,s[0]=u({},s[0],d),s}),_=v[0],E=v[1],g=v[2];return _.map(function(e,t){var a=(0,b.getPrefixedData)(E[t]),n=(0,b.getPrefixedData)(g[t]);return u({},e,a,n)})}catch(e){return console.log(e),[]}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.calculateTableData=o,t.getAggregatedGlobalRow=s;var d=a(200),c=n(d),f=a(83),p=n(f),m=a(11),h=n(m),v=a(1936),_=n(v),E=a(49),g=n(E),y=a(14),S=a(87),b=a(1203),C=n(b),O=a(1202),T=a(1204),R=n(T),w=a(1206),A=a(556),I=a(7),N=a(130),D=function(e,t){return e.reduce(function(e,a){var n=e;e[a.region_name]||(n[a.region_name]=(0,b.rowDataTemplate)(a.region,"region",t),n[a.region_name].region_id=a.region_id),(a.lpft&&!a.invalidFields&&!a.ignore_aggregation||"actual"===a.valuesType)&&((0,w.aggregateNumValue)(n,+a.patient_allocation,"patient_allocation",a.region_name),(0,w.aggregateNumValue)(n,+a.num_sites,"num_sites",a.region_name),(0,w.aggregateDateValueMin)(n,a.fsiv,"fsiv",a.region_name),(0,w.aggregateDateValueMin)(n,a.fpfv,"fpfv",a.region_name),(0,w.aggregateDateValueMin)(n,a.fpft,"fpft",a.region_name),(0,w.aggregateNumValueMin)(n,a.fpfv_fpft,"fpfv_fpft",a.region_name),"adjusted"===a.valuesType&&((0,w.aggregateDateValueMin)(n,a["25_si"],"25_si",a.region_name),(0,w.aggregateDateValueMin)(n,a["50_si"],"50_si",a.region_name),(0,w.aggregateDateValueMin)(n,a["90_si"],"90_si",a.region_name)),(0,w.aggregateDateValueMax)(n,a.lpft,"lpft",a.region_name)),"actual"===a.valuesType&&((0,w.aggregateDateValueMax)(n,a.actual_date,"actual_date",a.region_name),(0,w.aggregateDateValueMax)(n,a.lpft,"lpft",a.region_name),(0,w.aggregateDateValueMin)(n,a.lpfv,"lpfv",a.region_name),(0,w.aggregateNumValueMin)(n,a.fpfv_lpfv,"fpfv_lpfv",a.region_name),(0,w.aggregateNumValueMin)(n,a.fpp_fpfv,"fpp_fpfv",a.region_name),(0,w.aggregateDateValueMax)(n,a.original_f_lpft,"original_f_lpft",a.region_name),(0,A.aggregateOverallocation)(n,a),(0,w.aggregateNumValue)(n,+a.planned_num_sites,"planned_num_sites",a.region_name)),a.ignore_aggregation&&(a.curves=[[],[],[]]),n.GR.amount_countries+=1,n[a.region_name].amount_countries+=1;var r=(0,I.getMomentDate)((0,h.default)(a.actualTimeseriesSnapshot,"actual_date"));return r&&(0,w.aggregateDateValueMax)(n,r,"actualTimeseriesSnapshot.actual_date",a.region_name),n},{GR:(0,b.rowDataTemplate)("Global Rollup","rollup",t)})},P=function(e,t){return e.reduce(function(e,t){var a=e;(0,w.aggregateNumValue)(a,+t.patient_allocation,"patient_allocation"),(0,w.aggregateNumValue)(a,+t.num_sites,"num_sites"),(0,w.aggregateDateValueMin)(a,(0,I.getMomentDate)(t.fsiv),"fsiv"),(0,w.aggregateDateValueMin)(a,(0,I.getMomentDate)(t.fpfv),"fpfv"),(0,w.aggregateDateValueMin)(a,(0,I.getMomentDate)(t.fpft),"fpft"),(0,w.aggregateNumValueMin)(a,t.fpfv_fpft,"fpfv_fpft"),"actual"===t.valuesType&&((0,w.aggregateDateValueMax)(a,(0,I.getMomentDate)(t.actual_date),"actual_date"),(0,w.aggregateDateValueMax)(a,(0,I.getMomentDate)(t.lpft),"lpft"),(0,w.aggregateDateValueMin)(a,(0,I.getMomentDate)(t.lpfv),"lpfv"),(0,w.aggregateNumValueMin)(a,t.fpfv_lpfv,"fpfv_lpfv"),(0,w.aggregateNumValueMin)(a,t.fpp_fpfv,"fpp_fpfv")),a.GR.amount_countries+=1;var n=(0,I.getMomentDate)((0,h.default)(t.actualTimeseriesSnapshot,"actual_date"));return n&&(0,w.aggregateDateValueMax)(a,n,"actualTimeseriesSnapshot.actual_date"),a},{GR:(0,b.rowDataTemplate)("Global Rollup","rollup",t)})}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=s.default;return"ranking"!==e||t||(a=function(e,t){var a="ASC"===t;return function(t,n){var r=(0,i.default)(t,e)||"",l=(0,i.default)(n,e)||"";return r===l?0:null===r?1:null===l?-1:r<l?a?-1:1:r>l?a?1:-1:0}}),"ranking"===e&&t&&(a=function(e,t){var a="ASC"===t;return function(e,t){var n=(0,i.default)(e,"studyLevelData.ranking")||"",r=(0,i.default)(t,"studyLevelData.ranking")||"";return n===r?0:null===n?1:null===r?-1:n<r?a?-1:1:n>r?a?1:-1:0}}),"site_name"===e&&(a=function(e,t){var a="ASC"===t;return function(e,t){var n=((0,i.default)(e,"investigator_center.center.name")||"").trim(),r=((0,i.default)(t,"investigator_center.center.name")||"").trim();return n<r?a?-1:1:n>r?a?1:-1:0}}),"site_pi"===e&&(a=function(e,t){var a="ASC"===t;return function(e,t){var n=((0,i.default)(e,"investigator_center.investigator.name")||"").trim(),r=((0,i.default)(t,"investigator_center.investigator.name")||"").trim();return n<r?a?-1:1:n>r?a?1:-1:0}}),"forecast_confidence_score"===e&&(a=function(e,t){var a="ASC"===t;return function(t,n){var r=void 0,l=void 0;switch(t[e]){case"HIGH":r=3;break;case"MEDIUM":r=2;break;case"LOW":r=1;break;default:r=0}switch(n[e]){case"HIGH":l=3;break;case"MEDIUM":l=2;break;case"LOW":l=1;break;default:l=0}return r<l?a?-1:1:r>l?a?1:-1:0}}),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var l=a(11),i=n(l),o=a(49),s=n(o)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(879),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(8),r=a(881),l=function(e){return e&&e.__esModule?e:{default:e}}(r),i=a(28),o=a(36),s=function(e){return{studies:e.studies.studies}};t.default=(0,n.connect)(s,{updateStudy:i.updateStudy,getScenarioViewerDataWithFullStudy:o.getScenarioViewerDataWithFullStudy})(l.default)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(907),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(2),d=n(u);a(2319);var c=function(e){var t,a=e.children,n=e.className,l=e.overflow,o=e.cellClickHandler,s=(0,d.default)((t={},r(t,n,n),r(t,"flex-table__cell_no-overflow",!l),t));return i.default.createElement("div",{className:"flex-table__cell "+s,onClick:o},a)};c.propTypes={cellClickHandler:s.default.func,children:s.default.node.isRequired,className:s.default.string,overflow:s.default.bool},c.defaultProps={cellClickHandler:null,className:void 0,overflow:!1},t.default=c},function(e,t,a){"use strict";function n(e,t,a,n,r,l,i,o){e.append("rect").attr("x",t).attr("y",a).attr("width",n).attr("height",r).style("fill",l).style("opacity",i).classed("active-range-rect",o)}function r(e,t,a,n,r,l){e.append("text").classed("active-range-label",l).st({fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("text-anchor",t).text(a).attr("transform",n).style("fill",r)}function l(e,t,a){var n=e.append("g").classed("global-row-tooltip",!0).style("display",null).attr("transform",t);n.append("polygon").style("fill",f.BLACK).attr("points",p),n.append("text").attr("text-anchor","middle").style("fill",f.WHITE).classed("tooltip-text",!0).attr("transform","translate(20, 15)").text(a)}function i(e){var t=e.append("g");t.append("path").attr("d","M10 7l5 5-5 5-5-5z").style("fill",f.WHITE),t.append("path").attr("d","M10 8.414L6.414 12 10 15.586 13.586 12 10 8.414z").style("fill","none").style("stroke",f.MID_GREY).style("stroke-width",2),t.append("path").attr("d","M10.005 3l9 9-9 9-1-1 8-8L9 4z").style("fill",f.MID_GREY)}function o(e,t){e.append("circle").style("stroke",f.WHITE).style("stroke-width","2px").style("fill",f.WHITE).attr("r",11),e.append("circle").style("stroke",f.BLACK).style("stroke-width","2px").style("fill",f.WHITE).classed("inactive",t).attr("r",9),e.append("circle").classed("inactive",t).attr("r",2)}function s(e,t,a,n,r,l,i){var o=e.append("g").style("display",null).attr("transform","translate(0, "+(i?-30:-42)+")");o.append("line").style("stroke",t).style("stroke-width","2px").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",20),l&&(o.append("rect").style("stroke",t).style("stroke-width","2px").style("fill",a).attr("x","FP"===r?-15:-30).attr("y",-30).attr("width","FP"===r?30:60).attr("height",30),o.append("text").attr("transform","translate(0, -10)").attr("text-anchor","middle").style("fill",n).style("font-family","VoltaModern, sans-serif").text(r))}function u(e,t,a){e.append("polygon").attr("points","0,0 20,0 20,20 0,20 0,0").attr("transform","rotate(45 12 12), translate(2, 2)").style("fill",f.WHITE),e.append("path").attr("d","M12 2l10 10-10 10L2 12z").style("stroke",f.BLACK).style("stroke-width","2px").classed("inner-rect",!0).style("fill",a?t:f.WHITE),e.append("path").attr("d","M16 12l-4 4-4-4 4-4z").style("fill",t)}function d(e){e.append("path").attr("d","M16 12l-4 4-4-4 4-4z").style("stroke",f.WHITE).style("stroke-width","2px").style("fill",f.BLACK)}function c(e,t,a){e.append("circle").style("stroke",f.WHITE).style("stroke-width","2px").style("fill",f.WHITE).attr("r",11),e.append("circle").style("stroke",f.BLACK).classed("inactive",a).style("stroke-width","2px").style("fill",f.WHITE).attr("r",9),e.append("circle").classed("inactive",a).style("fill",t).attr("r",6)}Object.defineProperty(t,"__esModule",{value:!0}),t.drawBackgroundRect=n,t.appendRangeLabel=r,t.appendGlobalRangeLabel=l,t.drawEmptyDiamond=i,t.drawFppIcon=o,t.appendTooltipToMilestone=s,t.drawDiamondIcon=u,t.drawIntersectedDiamond=d,t.drawFilledCircle=c;var f=t.COLORS={BLACK:"#000",GREY:"#9d9d9d",MID_GREY:"#c6c6c6",WHITE:"#FFF",YELLOW:"#FCB13B",BLUE:"#19A9E0",PURPLE:"#9C28C6",GREEN:"#00C329",RED:"#ec3508"},p=t.tooltipPathLeft="0,0 40,0 50,35 0,20 0,0";t.tooltipPathRight="10,0 50,0 50,20 0,35 10,0"},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){return{notes:(0,b.getScenarioNotesFromStore)(e,t.scenarioId)}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(85),m=n(p),h=a(8),v=a(6),_=a(950),E=n(_),g=a(1018),y=n(g),S=a(49),b=a(48),C=a(213);a(2335);var O=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.containerWidth=0,a.containerLeft="calc(100% + 24px)",a.wrapperHeight=0,a.handleResize=a.handleResize.bind(a),a}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scenarioId,a=e.isImpact,n=!!(0,S.isSupportPassive)()&&{passive:!0};window.addEventListener("resize",this.handleResize,n),this.handleResize(),this.controller=new AbortController;var r=this.controller.signal;a?this.props.getImpactScenarioNotes(t):this.props.getScenarioNotes(t,r)}},{key:"shouldComponentUpdate",value:function(e){return e.expanded||e.expanded!==this.props.expanded}},{key:"componentWillUnmount",value:function(){this.controller.abort(),window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){var e=this.notesContainer,t=e?e.getBoundingClientRect():{};this.containerWidth=t.width,this.containerLeft=t.left;var a=this.notesWrapper,n=a?a.getBoundingClientRect():{};this.wrapperHeight=n.height,e&&a&&this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props,a=t.expanded,n=t.onSubmitNote,r=t.scenarioId,l=t.isEditable,i=t.notes;return d.default.createElement("div",{ref:function(t){e.notesContainer=t},className:"fpo-scenario-notes__container"},d.default.createElement("div",{ref:function(t){e.notesWrapper=t},className:"fpo-scenario-notes__wrapper",onWheel:function(e){e.stopPropagation(),e.preventDefault()},onScroll:function(e){e.stopPropagation(),e.preventDefault()},style:{width:this.containerWidth+48,left:a?this.containerLeft-24:this.containerLeft+this.containerWidth+24}},d.default.createElement("div",{className:"fpo-scenario-notes__close-container"},d.default.createElement("div",{onClick:this.props.onClose,className:"fpo-scenario-notes__close-button"},v.Icons.CROSS)),d.default.createElement("div",{className:"fpo-scenario-notes__content"},d.default.createElement(m.default,{style:{maxHeight:this.wrapperHeight-280},horizontal:!1,stopScrollPropagation:!0},d.default.createElement("div",{className:"fpo-scenario-notes__scrollable-wrapper"},d.default.createElement("div",{className:"fpo-scenario-notes__title-wrapper"},d.default.createElement("div",{className:"font-black"},"Notes"),d.default.createElement("div",{className:"fpo-scenario-notes__counter"},d.default.createElement("div",{className:"fpo-scenario-notes__counter-value"},i.length>0?(0,S.kFormatter)(i.length):""),d.default.createElement("div",{className:"fpo-scenario-notes__counter-icon"},v.Icons.NOTES))),l&&d.default.createElement(E.default,{scenarioId:r,onSubmit:n}),d.default.createElement(y.default,{notesData:i}))))))}}]),t}(d.default.Component);O.defaultProps={expanded:!1,notes:[],isImpact:!1},O.propTypes={expanded:f.default.bool,isEditable:f.default.bool.isRequired,onClose:f.default.func.isRequired,onSubmitNote:f.default.func.isRequired,scenarioId:f.default.number.isRequired,notes:f.default.array,isImpact:f.default.bool,getScenarioNotes:f.default.func.isRequired,getImpactScenarioNotes:f.default.func.isRequired};var T={getScenarioNotes:C.getScenarioNotes,getImpactScenarioNotes:C.getImpactScenarioNotes};t.default=(0,h.connect)(o,T)(O)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(987),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(997),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),o=n(i),s=a(1),u=n(s),d=a(2),c=n(d);a(2346);var f=function(e){var t,a=e.children,n=e.className,i=e.style,s=e.width,u=e.overflow,d=e.cellClickHandler,f=(0,c.default)((t={},r(t,n,n),r(t,"react-flex-table__cell_no-overflow",!u),t)),p=i;return s&&(p=l({},p,{flex:"number"==typeof s?"1 1 "+s+"px":"1 1 "+s})),o.default.createElement("div",{className:"react-flex-table__cell "+f,style:p,onClick:d},a)};f.propTypes={cellClickHandler:u.default.func,children:u.default.node,className:u.default.string,overflow:u.default.bool,style:u.default.object,width:u.default.oneOfType([u.default.number,u.default.string])},f.defaultProps={cellClickHandler:null,className:void 0,overflow:!1,width:void 0,style:{},children:void 0},t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1021),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1050),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1063),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1074),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TOOLTIPS_TEXT=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2),m=n(p),h=a(124),v=n(h),_=a(23),E=n(_),g=a(13),y=n(g);a(2388);var S=t.TOOLTIPS_TEXT={MIN:d.default.createElement("div",null,d.default.createElement("div",null,"Minimal number of patients that must be allocated in a country (Optional)."),d.default.createElement("div",null,"Scenario will not reach P/LPFT milestone until each country enrolled its minimal patients number.")),MAX:d.default.createElement("div",null,d.default.createElement("div",null,"Maximal number of patients to be allocated in a country (Optional)."),d.default.createElement("div",null,"Limits possible reallocation to a country proposed in forecast.")),EXACT:"Planned number of patients to be allocated in a country (Optional)",MIN_ERROR:"Min patients # should be less or equal to exact patients number.",MAX_MIN_ERROR:"Max patients # should be more or equal to min patients number.",MAX_EXACT_ERROR:"Max patients # should be more or equal to exact patients number.",RECOMMENDED_BY_ANALYTICS:"Country suggested by Nerve"},b=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.onUpdate,n=e.locations,r=e.hidden,l=e.newScenario,i=(0,m.default)("wizard-step","fpo-row","fpo-wizard-pat-allocation-container",{"wizard-active-step":t,hidden:r}),s=(0,m.default)("fpo-col-offset-4","fpo-col-4");return d.default.createElement("div",{className:i},d.default.createElement("div",{className:s},d.default.createElement("h1",null,"Patient allocation"),d.default.createElement("div",{className:"pat-allocation__subtitle"},"Please specify patient allocation for the selected countries"),d.default.createElement("div",{className:"pat-allocation__header-wrapper"},d.default.createElement("span",null,"Regions / Countries"),d.default.createElement("span",{className:"pat-allocation__header-columns-wrapper"},d.default.createElement("span",null,"Patients:"),d.default.createElement(y.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"top",overlayClassName:"pat-allocation__tooltip",overlay:S.MIN},d.default.createElement("span",null,"min #")),d.default.createElement(y.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"top",overlayClassName:"pat-allocation__tooltip",overlay:d.default.createElement("span",null,S.EXACT)},d.default.createElement("span",null,"exact #")),!1)),d.default.createElement("div",{className:"patients-allocation__wrapper"},n.map(function(e){return d.default.createElement("div",{className:"options-region",key:e.id+"_"+e.name},!e.isCountryRegion&&d.default.createElement("span",{className:"options-region__name"},e.name),e.countries.map(function(n){var r=n.patients&&n.patients_min>n.patients,i=n.patients_max&&(n.patients_max<n.patients||n.patients_max<n.patients_min),s=r?{}:{visible:!1};return i&&(n.patients_max<n.patients||(n.patients_max,n.patients_min)),d.default.createElement("div",{className:"options-country",key:n.id+"_"+n.name},d.default.createElement("span",{className:(0,m.default)({"options-country__name":!e.isCountryRegion,"options-region__name":e.isCountryRegion,"recommended-by-analytics":null===n.constraint})},null===n.constraint?d.default.createElement(y.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"top",overlay:d.default.createElement("span",null,S.RECOMMENDED_BY_ANALYTICS)},d.default.createElement("span",null,n.name)):n.name),d.default.createElement("div",{className:"options-country__values"},d.default.createElement(y.default,o({mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"top",overlayClassName:"pat-allocation__tooltip"},s,{overlay:S.MIN_ERROR}),d.default.createElement("div",{className:"value-field__wrapper"},d.default.createElement(E.default,{status:r?"error":null,narrow:!0,type:"text",validators:[function(e){return""===e||v.default.isInt(e,{min:1,max:1e6})}],disabled:!t,onChange:function(e,t){var r=t.value;return a(n.id,"patients_min",r,n.constraint)},value:n.patients_min||""}))),d.default.createElement("div",{className:(0,m.default)("value-field__wrapper",{overridden:n.isOverridden})},d.default.createElement(E.default,{narrow:!0,type:"text",validators:[function(e){return""===e||v.default.isInt(e,{min:1,max:1e6})}],disabled:!t,onChange:function(e,t){var r=t.value;return a(n.id,"patients",r,n.constraint)},value:(l||n.isOverridden?n.patients:"")||""})),!1))}))}))))}}]),t}(d.default.Component);b.propTypes={activeStep:f.default.bool,onUpdate:f.default.func.isRequired,hidden:f.default.bool,locations:f.default.array,newScenario:f.default.bool},b.defaultProps={activeStep:!1,hidden:!1,locations:[],newScenario:!1},t.default=b},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getExternalSitesPages=t.getExternalFilteredSitesCount=t.getExternalSitesCount=t.getExternalFilteredSitesPaginated=t.getExternalFilteredSites=t.getExternalSites=void 0;var l=a(43),i=a(11),o=n(i),s=a(198),u=n(s),d=a(224),c=n(d),f=a(115),p=t.getExternalSites=(0,f.createDeepEqualSelector)([f.getSitesFromStore,f.getInitialSitesSelectionFromStore],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.filter(function(e){var a=(0,o.default)(e,"state.status");return!e.raw&&!e.isInternal&&(t?!e.isInternal:!e.isInternal&&!a||"REMOVE"===a)})}),m=t.getExternalFilteredSites=(0,f.createDeepEqualSelector)([p,f.getInternalSitesFilterFromStore,f.getExternalSitesFilterFromStore,f.getExperienceSitesFilterFromStore,f.getSitesSearchValueFromStore,f.getSortOptionsFromStore],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments[3],l=arguments[4],i=arguments[5],s=e.reduce(function(e,t){return(0,u.default)(t.ranking)&&"ranking"===i.active&&!t.addedViaSearch?e.unrankedSites.push(t):t.addedViaSearch?e.addedViaSearch.push(t):e.rankedSites.push(t),e},{unrankedSites:[],rankedSites:[],addedViaSearch:[]}),d=s.unrankedSites,p=s.rankedSites,m=s.addedViaSearch,h=(0,c.default)(i.active,!0);return[].concat(r(m),r(p.sort(h(i.active,i.direction))),r(d)).filter(function(e){var r=!0,i=void 0;t&&(i="INTERNAL"),a&&(i="EXTERNAL");var s=(0,o.default)(e,"isInternal")?"INTERNAL":"EXTERNAL";return r&&i&&i!==s&&(r=!1),r&&(r=(0,f.isMatchedByExpFilters)(e,n)),r&&(r=(0,f.isMatchedBySearchInput)(e,l)),r})});t.getExternalFilteredSitesPaginated=(0,f.createDeepEqualSelector)([m,f.getActivePagesFromStore],function(e,t){var a=Math.ceil(t.EXTERNAL*f.PER_PAGE);return e.slice(a,a+f.PER_PAGE)}),t.getExternalSitesCount=(0,l.createSelector)(p,function(e){return e.length}),t.getExternalFilteredSitesCount=(0,l.createSelector)(m,function(e){return e.length}),t.getExternalSitesPages=(0,l.createSelector)(m,function(e){return e.length/f.PER_PAGE})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getOtherFilteredSitesCount=t.getOtherSitesCount=t.getOtherFilteredSitesPaginated=t.getOtherSitesPages=t.getOtherFilteredSites=t.getOtherSites=void 0;var l=a(43),i=a(11),o=n(i),s=a(198),u=n(s),d=a(224),c=n(d),f=a(115),p=t.getOtherSites=(0,f.createDeepEqualSelector)([f.getSitesFromStore,f.getInitialSitesSelectionFromStore],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.filter(function(e){var a=(0,o.default)(e,"state.status");return!(e.raw||!e.isInternal)&&(t?!e.is_recommended_by_FPO&&e.isInternal:!e.is_recommended_by_FPO&&e.isInternal&&!a||"REMOVE"===a)})}),m=t.getOtherFilteredSites=(0,f.createDeepEqualSelector)([p,f.getInternalSitesFilterFromStore,f.getExternalSitesFilterFromStore,f.getExperienceSitesFilterFromStore,f.getSitesSearchValueFromStore,f.getSortOptionsFromStore],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments[3],l=arguments[4],i=arguments[5],s=e.reduce(function(e,t){return(0,u.default)(t.ranking)&&"ranking"===i.active?e.unrankedSites.push(t):e.rankedSites.push(t),e},{unrankedSites:[],rankedSites:[]}),d=s.unrankedSites,p=s.rankedSites,m=(0,c.default)(i.active);return[].concat(r(p.sort(m(i.active,i.direction))),r(d)).filter(function(e){var r=!0,i=void 0;t&&(i="INTERNAL"),a&&(i="EXTERNAL");var s=(0,o.default)(e,"isInternal")?"INTERNAL":"EXTERNAL";return r&&i&&i!==s&&(r=!1),r&&(r=(0,f.isMatchedByExpFilters)(e,n)),r&&(r=(0,f.isMatchedBySearchInput)(e,l)),r})});t.getOtherSitesPages=(0,l.createSelector)(m,function(e){return Math.ceil(e.length/f.PER_PAGE)}),t.getOtherFilteredSitesPaginated=(0,f.createDeepEqualSelector)([m,f.getActivePagesFromStore],function(e,t){var a=Math.ceil(t.OTHER*f.PER_PAGE);return e.slice(a,a+f.PER_PAGE)}),t.getOtherSitesCount=(0,l.createSelector)(p,function(e){return e.length}),t.getOtherFilteredSitesCount=(0,l.createSelector)(m,function(e){return e.length})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a,n,r,l,i){var o=[];return(l.diff(r)<0||r.diff(n)<0||n.diff(t)<0)&&o.push(f.ENROLMENT_TABLE_FIELDS_LIST.SI_25,f.ENROLMENT_TABLE_FIELDS_LIST.SI_50,f.ENROLMENT_TABLE_FIELDS_LIST.SI_90,f.ENROLMENT_TABLE_FIELDS_LIST.FSIV),a.diff(t)<0&&o.push(f.ENROLMENT_TABLE_FIELDS_LIST.FPFV),t.diff(e)<=0&&(o.push("startdate"),o.push(f.ENROLMENT_TABLE_FIELDS_LIST.FSIV)),i.diff(e)<0&&o.push("endDate"),o}function i(e,t,a,n,l,i,o,u,f,p,m,h,v,_,E,g){function y(e){switch(e){case"fsiv":return"FSIV";case"25_si":return"25% SI";case"50_si":return"50% SI";case"90_si":return"90% SI";case"fpfv":default:return"FPFV"}}var S=[],b=!1;e&&d.default.isMoment(e)&&e.isValid()||S.push("start_date"),t&&d.default.isMoment(t)&&t.isValid()||S.push("end_date"),a&&d.default.isMoment(a)&&a.isValid()||(b=!0,null!==a&&S.push("fsiv")),n&&d.default.isMoment(n)&&n.isValid()||(b=!0,null!==n&&S.push("fpfv")),l&&d.default.isMoment(l)&&l.isValid()||(b=!0,null!==l&&S.push("25_si")),i&&d.default.isMoment(i)&&i.isValid()||(b=!0,null!==i&&S.push("50_si")),o&&d.default.isMoment(o)&&o.isValid()||(b=!0,null!==o&&S.push("90_si")),u||0===u||(b=!0,null!==u&&""!==u&&void 0!==u&&S.push("num_sites")),f||0===f?(E>f||g&&g<f)&&(b=!0,S.push("patient_allocation")):(b=!0,null!==f&&""!==f&&void 0!==f&&S.push("patient_allocation")),p||0===p||(b=!0,null!==p&&""!==p&&void 0!==p&&S.push("sas")),(!m&&0!==m||m>=1)&&(b=!0,null!==m&&""!==m&&void 0!==m&&S.push("screening_failure")),h||(b=!0,null!==h&&""!==h&&S.push("randomisation_rate")),v||0===v||(b=!0,S.push("fpfv_fpft"));var C={};-1===S.indexOf("start_date")&&null!==a&&(e.isSameOrBefore(a)||(S.push("fsiv"),C.fsiv=["fp"])),-1===S.indexOf("fsiv")&&null!==a&&null!==n&&(a.isSameOrBefore(n)||(S.push("fpfv"),C.fpfv=["fsiv"]));var O=[{id:"fsiv",value:a},{id:"25_si",value:l},{id:"50_si",value:i},{id:"90_si",value:o}].filter(function(e){return e.value&&d.default.isMoment(e.value)&&e.value.isValid()});O.reduce(function(e,t,a){return O.slice(a,O.length).forEach(function(a){a.value.isBefore(t.value)&&(e.add(a.id),C[a.id]=C[a.id]?[].concat(r(C[a.id]),[t.id]):[t.id])}),e},new Set).forEach(function(e){S.push(e)});var T={};if(Object.keys(C).forEach(function(e){var t=C[e].reduce(function(e,t){var a=e;return""!==a&&(a+=", "),a+=y(t)},"");T[e]=y(e)+" should be greater or equal to "+t}),S.includes("patient_allocation")&&(f||0===f)&&(E>f?T.patient_allocation="Patients # is less than Min Patients # ("+E+").\n       Please edit Patients constraints in scenario editor to resolve the conflict.":g&&g<f&&(T.patient_allocation="Patients # is higher than Max Patients # ("+g+").\n       Please edit Patients constraints in scenario editor to resolve the conflict.")),_&&d.default.isMoment(_)&&_.isValid()){var R=[e,a,n].filter(function(e){return e&&d.default.isMoment(e)&&e.isValid()});if(R&&R.length>0){var w=(0,c.max)(R);if(w&&w.isAfter(_))S.push("lpft");else if(w){var A=_.diff(w,"d");A<1+v&&S.push("lpft")}}}return{invalidFields:(0,s.default)(S),skipCalculation:b||S.length>0,errorMessages:T}}Object.defineProperty(t,"__esModule",{value:!0}),t.validateDatesOrder=l,t.validateCurvesCalcArguments=i;var o=a(200),s=n(o),u=a(10),d=n(u),c=a(27),f=a(358)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n=a(1538);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1541);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},,,,,,,function(e,t,a){"use strict";function n(){return function(e){return e((0,o.fetchApi)(u.APPLICATION_METADATA,{type:s.GET_APPLICATION_METADATA}))}}function r(e,t){return function(a){return a((0,i.push)("/studies/"+e+(t?"/archived":"")))}}function l(e,t,a,n){return function(r){return r((0,o.fetchApi)(u.USER_DETAILS.replace(":userId",n),{type:s.GET_USER_DETAILS,studyId:e,scenarioId:t,overrideId:a}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,t.navigateToStudy=r,t.getUserDetailsById=l;var i=a(18),o=a(44),s=a(15),u=a(45)},function(e,t,a){"use strict";function n(){return function(e){return e((0,i.fetchApi)(s.CONTEXT_HELP_DATA,{type:o.CONTEXT_HELP_PAGE_LIST}))}}function r(e){return{type:o.CONTEXT_HELP_PAGE,page:e}}function l(e){return{type:o.IS_SHOW_CONTEXT_HELP,val:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,t.setContextHelpPage=r,t.toggleContextHelp=l;var i=a(44),o=a(15),s=a(45)},function(e,t,a){"use strict";function n(e){return function(t){return t((0,d.fetchApi)(f.HISTORICAL_STUDIES.replace(/:studyId/,e),{type:c.GET_HISTORICAL_STUDIES,studyId:e}))}}function r(e,t){return{type:c.TOGGLE_HISTORICAL_STUDY,study_id:e,studyId:t}}function l(e,t,a){return{type:c.SORT_HISTORICAL_DATA,columnName:e,sortDirection:t,studyId:a}}function i(e){return{type:c.FILTER_HISTORICAL_DATA,pattern:e}}function o(e){return{type:c.CLEAR_HISTORICAL_DATA,studyId:e}}function s(e,t){return function(a){return a((0,d.fetchApi)(f.HISTORICAL_STUDIES.replace(/:studyId/,e),{type:c.APPLY_HISTORICAL_STUDIES_CHANGES,studyId:e,forceUpdate:!0},"POST",{selectedStudies:t})).then(function(){return a((0,u.push)("/studies/"+e))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.getHistoricalStudies=n,t.toggleCheckbox=r,t.sortData=l,t.filterData=i,t.rollbackChanges=o,t.applyHistoricalStudiesChanges=s;var u=a(18),d=a(44),c=a(15),f=a(45)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(835),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d);a(2312);var f=function(e){function t(){var e,a,n,i;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={hasError:!1},i=a,l(n,i)}return i(t,e),o(t,[{key:"componentDidCatch",value:function(e,t){console.log(e,t,this.state.error)}},{key:"render",value:function(){var e=this.state.hasError,t=this.props,a=t.hidden,n=t.message;return e&&a?null:e?u.default.createElement("div",{className:"error-boundary-message",title:n},n):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),t}(u.default.PureComponent);f.defaultProps={hidden:!1,message:"Error rendering component"},f.propTypes={children:c.default.node.isRequired,hidden:c.default.bool,message:c.default.string},t.default=u.default.memo(f)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(906),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(929),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function r(e,t,a){var n=!1,r=t[a];return!t.filter(function(e){return"rollup"!==e.type?e.location===r.location&&e.region_name===r.region_name:e.location===r.location}).find(function(e){return"actual"===e.valuesType})&&r.ignoreGenericData&&(n=!0),n}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.showInAdjustedRow=r;var i=function(e,t,a,r){return e.reduce(function(e,i){if("region"===i.type&&i.isRegionCountry)return e;var o=i.patient_allocation,s=i.num_sites,u=i.fsiv,d=i.sas,c=i["25_si"],f=i["50_si"],p=i["90_si"],m=i.fpfv,h=i.fpfv_lpfv,v=i.fpfv_fpft,_=i.randomisation_rate,E=i.screening_failure,g=i.sr,y=i.lpft,S=i.actual_patient_allocation,b=i.actual_num_sites,C=i.actual_fsiv,O=i.actual_sas,T=i.actual_25_si,R=i.actual_50_si,w=i.actual_90_si,A=i.actual_fpfv,I=i.actual_fpfv_lpfv,N=i.actual_randomisation_rate,D=i.actual_screening_failure,P=i.actual_sr,L=i.actual_f_lpft,M=i.actual_date,x=i.actual_screened,k=i.actual_randomized,j=i.adjusted_patient_allocation,F=i.adjusted_num_sites,U=i.adjusted_fsiv,V=i.adjusted_sas,B=i.adjusted_25_si,H=i.adjusted_50_si,G=i.adjusted_90_si,Y=i.adjusted_fpfv,q=i.adjusted_fpfv_lpfv,z=i.adjusted_fpfv_fpft,W=i.adjusted_randomisation_rate,K=i.adjusted_screening_failure,X=i.adjusted_sr,Z=i.adjusted_lpft,J=i.adjusted_invalids,Q=i.overallocatedData,$=i.adjusted_overallocatedData,ee=n(i,["patient_allocation","num_sites","fsiv","sas","25_si","50_si","90_si","fpfv","fpfv_lpfv","fpfv_fpft","randomisation_rate","screening_failure","sr","lpft","actual_patient_allocation","actual_num_sites","actual_fsiv","actual_sas","actual_25_si","actual_50_si","actual_90_si","actual_fpfv","actual_fpfv_lpfv","actual_randomisation_rate","actual_screening_failure","actual_sr","actual_f_lpft","actual_date","actual_screened","actual_randomized","adjusted_patient_allocation","adjusted_num_sites","adjusted_fsiv","adjusted_sas","adjusted_25_si","adjusted_50_si","adjusted_90_si","adjusted_fpfv","adjusted_fpfv_lpfv","adjusted_fpfv_fpft","adjusted_randomisation_rate","adjusted_screening_failure","adjusted_sr","adjusted_lpft","adjusted_invalids","overallocatedData","adjusted_overallocatedData"]),te=S>0,ae=e.concat([l({},ee,{valuesType:"generic",hasOverallocation:!!Q,isEnroled:te,values:{location:location,patient_allocation:o,num_sites:s,fsiv:u,sas:d,"25_si":c,"50_si":f,"90_si":p,fpfv:m,fpfv_lpfv:h,fpfv_fpft:v,randomisation_rate:_,screening_failure:E,sr:g,lpft:y,events:ee.events}})]);return Q&&r&&r.overallocated&&(ae=ae.concat([l({},ee,{valuesType:"generic_overallocated",values:{location:location,patient_allocation:Q.patient_allocation,num_sites:Q.num_sites,fsiv:Q.fsiv,sas:Q.sas,"25_si":Q["25_si"],"50_si":Q["50_si"],"90_si":Q["90_si"],fpfv:Q.fpfv,fpfv_lpfv:Q.fpfv_lpfv,fpfv_fpft:Q.fpfv_fpft,randomisation_rate:Q.randomisation_rate,screening_failure:Q.screening_failure,sr:Q.sr,lpft:Q.lpft,events:Q.events}})])),t&&(ae=ae.concat([l({},ee,{valuesType:"actual",isEnroled:te,values:{location:location,patient_allocation:S,num_sites:b,fsiv:C,sas:O,"25_si":T,"50_si":R,"90_si":w,fpfv:A,fpfv_lpfv:I,randomisation_rate:N,screening_failure:D,sr:P,lpft:L,lpftDiff:L&&y?y.diff(L,"days"):null,actual_date:M}})])),a&&(ae=ae.concat([l({},ee,{valuesType:"adjusted",planned_lpft:y,actual_fsiv:C,actual_fpfv:A,hasOverallocation:!!$,isEnroled:te,values:{location:"",patient_allocation:j,num_sites:F,fsiv:U,sas:V,"25_si":B,"50_si":H,"90_si":G,fpfv:Y,fpfv_lpfv:q,fpfv_fpft:z,randomisation_rate:W,screening_failure:K,sr:X,lpft:Z,invalids:(J||[]).map(function(e){return e.replace("adjusted_","")}),actual_date:M,actual_num_sites:b,actual_screened:x,actual_randomized:k,events:ee.adjusted_events,actualTimeseriesSnapshot:ee.actualTimeseriesSnapshot}})]),$&&r&&r.overallocated&&(ae=ae.concat([l({},ee,{valuesType:"adjusted_overallocated",values:{location:location,patient_allocation:$.patient_allocation,num_sites:$.num_sites,fsiv:$.fsiv,sas:$.sas,"25_si":$["25_si"],"50_si":$["50_si"],"90_si":$["90_si"],fpfv:$.fpfv,fpfv_lpfv:$.fpfv_lpfv,fpfv_fpft:$.fpfv_fpft,randomisation_rate:$.randomisation_rate,screening_failure:$.screening_failure,sr:$.sr,lpft:$.lpft,events:$.events}})]))),ae},[])};t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(1031),c=n(d);a(2364);var f=function(e){var t=e.height,a=e.children,n=e.onClick,r=e.tooltip,i=e.disabled,o=e.actionName,s=e.className;return l.default.createElement("div",{className:(0,u.default)("fpo-sidebar__button",{"fpo-sidebar__button_disabled":i},s),style:{height:t}},l.default.createElement("div",{className:"fpo-sidebar__content",onClick:function(e){e.stopPropagation(),e.preventDefault(),n&&!i&&n(o)}},l.default.createElement(c.default,{tooltip:r},a)))};f.propTypes={actionName:o.default.string,height:o.default.number,children:o.default.element.isRequired,onClick:o.default.func,tooltip:o.default.string,disabled:o.default.bool,className:o.default.string},f.defaultProps={actionName:void 0,height:72,onClick:void 0,tooltip:void 0,disabled:!1,className:null},t.default=l.default.memo(f)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1038),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1041),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENROLMENT_TABLE_FIELDS_LIST={PATIENT_ALLOCATION:"patient_allocation",NUM_SITES:"num_sites",SAS:"sas",SI_25:"25_si",SI_50:"50_si",SI_90:"90_si",RANDOMISATION_RATE:"randomisation_rate",SCREENING_FAILURE:"screening_failure",FPFV:"fpfv",FSIV:"fsiv",UNLOCK:"unlock"},t.ENROLMENT_TABLE_FIELDS_LIST_ADJUSTED={ADJUSTED_PATIENT_ALLOCATION:"adjusted_patient_allocation",ADJUSTED_NUM_SITES:"adjusted_num_sites",ADJUSTED_SAS:"adjusted_sas",ADJUSTED_SI_25:"adjusted_25_si",ADJUSTED_SI_50:"adjusted_50_si",ADJUSTED_SI_90:"adjusted_90_si",ADJUSTED_RANDOMISATION_RATE:"adjusted_randomisation_rate",ADJUSTED_SCREENING_FAILURE:"adjusted_screening_failure",ADJUSTED_FPFV:"adjusted_fpfv",ADJUSTED_FSIV:"adjusted_fsiv"}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){if(!e||!t)return _;var n=(0,p.default)(t,"country_sites_approval_status.updatedAt",null),r=[{title:"DU",value:(0,p.default)(e,"therapeutic_area","-"),isSeparator:!0},{title:"Indication",value:(0,p.default)(e,"indication","-"),isSeparator:!0},{title:"Date shared",value:n?(0,m.getMomentDate)(n).format("DD MMM YYYY"):"-",isSeparator:!0},{title:"Version",value:(0,p.default)(t,"country_sites_approval_status.version","-"),isSeparator:!0}],l=[{title:"Sites Initiated",value:(0,p.default)(t,"actual_num_sites",0),isSeparator:!1},{title:"Sites enrolling",value:(0,p.default)(t,"actual_sites_enrolling",0),isSeparator:!0},{title:"Patients",value:(0,p.default)(t,"patient_allocation",0),isSeparator:!1},{title:"Patients randomized",value:(0,p.default)(t,"actual_patient_allocation",0),isSeparator:!0},{title:"DU",value:(0,p.default)(e,"therapeutic_area","-"),isSeparator:!0},{title:"Indication",value:(0,p.default)(e,"indication","-"),isSeparator:!0}];if(a){var i=a.siteData,o=void 0===i?{}:i,s=a.therapeutic_area,d=a.indication,f=a.studies_active,h=a.studies_complete,E=(0,p.default)(a,"isInternal",!1);return[{title:u.default.createElement("div",{className:(0,c.default)("site-source",{internal:E,external:!E})}),value:E?"Internal site":"External site",isSeparator:!0},{title:"Site Rank",value:(0,p.default)(o,"ranking","-"),isSeparator:!0},{title:"DU",value:s,isSeparator:!0},{title:"Indication",value:d,isSeparator:!0},{title:"Studies Active",value:f},{title:"Studies Completed",value:h}]}return e.state.status===v.default.ACTIVE?l:r}function l(e,t){var a=(0,s.useRef)();(0,s.useEffect)(function(){if(a.current){var n=Object.keys(i({},a.current,t)),r={};n.forEach(function(e){a.current[e]!==t[e]&&(r[e]={from:a.current[e],to:t[e]})}),Object.keys(r).length&&console.log("[why-did-you-update]",e,r)}a.current=t})}Object.defineProperty(t,"__esModule",{value:!0}),t.getActionType=t.useIntersect=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getHeaderData=r,t.useWhyDidYouUpdate=l;var s=a(0),u=n(s),d=a(2),c=n(d),f=a(11),p=n(f),m=a(7),h=a(17),v=n(h),_=(t.useIntersect=function(e){var t=e.root,a=void 0===t?null:t,n=e.rootMargin,r=e.threshold,l=(0,s.useState)({}),i=o(l,2),u=i[0],d=i[1],c=(0,s.useRef)();return(0,s.useEffect)(function(){var e=new IntersectionObserver(function(e){return d(e[0])},{root:a,rootMargin:n,threshold:r});return e.observe(c.current),function(){return e.disconnect()}},[c,a,n,r]),[u,c]},[]);t.getActionType=function(e){var t=(0,p.default)(e,"state.status"),a=void 0;return(e.is_recommended_by_FPO||e.raw||t)&&"REMOVE"!==t?e.is_recommended_by_FPO&&!e.raw&&!t||"ADD"===t?a="REMOVE":e.raw&&!t||"REMOVE"===t?a="ADD":e.raw&&t&&"ADD"===t&&(a="REMOVE"):a="ADD",a}},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e){return"/studies/"+e+"/historical"}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedStudiesStatistic=t.getSelectedHistoricalStudies=t.getFilteredHistoricalStudies=t.getFilterValue=t.getHistoricalStudiesFromStore=void 0,t.getHistoricalUrl=r;var l=a(43),i=a(10),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s=t.getHistoricalStudiesFromStore=function(e,t){return e.historical.historicalStudies[parseInt(t.params.id,10)]},u=t.getFilterValue=function(e){return e.historical.filterValue},d=(t.getFilteredHistoricalStudies=(0,l.createSelector)([s,u],function(e,t){var a=["study_id","therapeutic_area","indication"];return e?e.filter(function(e){for(var n=!1,r=0;r<a.length;r+=1){var l=a[r],i=e[l]||"";if("fpfv"===l&&(i=(0,o.default)(i).format("DD MMM YY")),-1!==i.toString().toLowerCase().indexOf(t.toLowerCase())){n=!0;break}}return n}):[]}),t.getSelectedHistoricalStudies=(0,l.createSelector)(s,function(e){return e?e.filter(function(e){return e.selected}):[]}));t.getSelectedStudiesStatistic=(0,l.createSelector)(d,function(e){var t=["target_num_patients","num_countries","num_sites","enrollment_rate","screen_failure_rate"],a={title:"AVERAGE"},r={title:"MIN"},l={title:"MAX"};return t.forEach(function(t){var i=e.reduce(function(e,a){return null!==a[t]&&e.push(a[t]),e},[]),o=Math.max.apply(Math,n(i)),s=Math.min.apply(Math,n(i)),u=i.reduce(function(e,t){return+e+ +t},0)/i.length;"enrollment_rate"===t||"screen_failure_rate"===t?(u=u.toFixed(2),o=o.toFixed(2),s=s.toFixed(2)):u=u.toFixed(0),a[t]=isFinite(u)?u:"-",l[t]=isFinite(o)?o:"-",r[t]=isFinite(s)?s:"-"}),[a,l,r]})},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r,l=t.COLUMN_NAMES={STUDY_NAME:"study",TA_INDICATION:"therapeutic_area",INDICATION:"indication",UPDATE_TIME:"lastUpdatedAt"};t.COLUMN_TITLES=(r={},n(r,l.STUDY_NAME,"Study"),n(r,l.TA_INDICATION,"Therapeutic area / Indication"),n(r,l.UPDATE_TIME,"Last updated"),r),t.SORTING_ORDER={ASC:"ASC",DESC:"DESC"},t.SECTIONS={TRACKING:"Tracking",PLANNING:"Planning",PLAYGROUND:"My playground",UNKNOWN:"N/A"},t.STUDY_TYPE={ACTIVE:"ACTIVE",PLANNED:"PLANNED"}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a){var n=e.map(function(e){return e[t]}),r=(0,y.extent)(n),l=(0,p.default)(r[1]).diff((0,p.default)(r[0]),"d"),i=(0,p.default)(r[0]).clone().add(Math.floor(l/2),"d"),o=i.day(),s=a.day();return o>s?i=i.clone().subtract(o-s,"d"):o<s&&(i=i.clone().add(s-o,"d")),i}function i(e,t){var a=e.map(function(e){return e[t]});return a&&a.length>0?(0,p.default)((0,y.max)(a)):null}function o(e,t,a){var n=(0,h.default)(e);if(!t)return n;var r=n.reduce(function(e,t){var a=t;return a.generatedFields=[],a.lpft?e.countriesWithLpft.push(a):e.countriesWithoutLpft.push(a),a.fsiv||a.fpfv||e.countriesWithoutFsivAndFpfv.push(a),a.fpfv?e.fpfvCount+=1:a.fsiv&&(e.fsivCount+=1),e},{countriesWithLpft:[],countriesWithoutLpft:[],countriesWithoutFsivAndFpfv:[],fpfvCount:0,fsivCount:0}),o=r.countriesWithLpft,s=r.countriesWithoutLpft,u=r.countriesWithoutFsivAndFpfv,d=r.fpfvCount,c=r.fsivCount,f=void 0;o.length>0&&(f=l(o,"lpft",t));var p=void 0,m=void 0;(d>0||c>0)&&(p=d>=c?"fpfv":"fsiv",m=l(n,p,t)),s.map(function(e){var t=e;return a&&t.patient_allocation>0&&m?(t.lpft=a.clone(),t.generatedFields.push("lpft")):f&&t.patient_allocation>0&&m&&(t.lpft=f.clone(),t.generatedFields.push("lpft")),t}),u.map(function(e){var t=e;return p&&m&&t.patient_allocation>0&&(f||a)&&(t[p]=m,t.generatedFields.push(p)),t});var v=void 0;return o.length>0&&(v=i(o,"lpft"),n.map(function(e){var t=e;return t.latestDate=v&&v.clone(),t})),n}function s(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:14,n=arguments[3],l=arguments[4],i=arguments[5],o=arguments[6],s=arguments[7],u=arguments[8],d=arguments[9],c=arguments[10],f=arguments[11],m=arguments[12],h=(0,C.validateCurvesCalcArguments)(e,t,n,l,i,o,s,u,d,f,m,1,a,c),v=h.invalidFields,_=h.skipCalculation,E={error:!0,invalidFields:v,curves:[[],[],[]],lpft:c,fpfv_lpfv:null,fpp_fpfv:null,fpfv:l,fpft:null,fsiv:n,fpfv_fpft:a,"25_si":null,"50_si":null,"90_si":null,num_sites:u,patient_allocation:d,sas:null,screening_failure:null,sr:null};if(_||!c)return E;try{var g,y=[],S=[],b=a,O=l.diff(n,"d"),R=n.diff(e,"d"),I=l.diff(e,"d"),N=R+O,D=+d,P=Math.floor(p.default.duration(c.diff(e)).asDays()),L=(0,T.default)({startDate:e,FPP_FSIV:R,fsiv:n,si25:i,si50:o,si90:s,nSites:u}),M=L?L.sivCurve:[],x=L?L.siteInitiated:[],k=new Array(P+O);k.fill(0),k.splice.apply(k,[O,x.length].concat(r(x))),k.fill(Math.max.apply(Math,r(x)),O+x.length);var j=Math.floor(p.default.duration(c.diff(e)).asDays()),F=k.reduce(function(e,t,a){var n=e;return a<j-b&&(n+=t),n},0),U=D/F;if(!isFinite(U))return E;var V=k.map(function(e){return e*U});if(0===V.length&&(V=[0]),y=(0,w.default)({countryScreeningRate:V,nPatients:D,SF:0,fpfv:l,startDate:e}),y.length===A.MAX_CURVE_LENGTH)return{error:!0,invalidFields:["patient_allocation","num_sites","randomisation_rate","screening_failure"]};var B=R+O+b+1+V.indexOf(Math.max.apply(Math,r(V))),H=new Array(B>P?B:P);H.fill(0),(g=H).splice.apply(g,[b,V.length].concat(r(V))),H.fill(Math.max.apply(Math,r(V)),b+V.length),0===H.length&&(H=[0]);var G=Math.max.apply(Math,r(H));if(G&&0!==G){var Y=0,q=0;do{Y=void 0!==H[q]?H[q]:G,0!==q&&(Y+=S[S.length-1][1]),S.push([q+1,Y>D?D:Y]),q+=1}while(Y<=D&&S.length<A.MAX_CURVE_LENGTH);if(S.length===A.MAX_CURVE_LENGTH)return{error:!0,invalidFields:["patient_allocation","num_sites","randomisation_rate","screening_failure"]};if(c.isBefore(t)){for(var z=S.length;z<P;z+=1)S.push([z+1,D]);for(var W=y.length;W<P;W+=1)y.push([W+1,D])}}var K=S.length;y=y.length>K?y.slice(0,K):y;var X=y.map(function(e){return e[1]}),Z=X.indexOf(Math.max.apply(Math,r(X))),J=Z-N+1,Q=S.map(function(e){return e[1]}),$=Q.indexOf(Math.max.apply(Math,r(Q))),ee=l.clone().add(a,"d");return e.clone().add(M.length,"d").isAfter(c)&&(M=M.splice(0,$)),{curves:[M,y,S],lpft:c,fpfv_lpfv:J<0?null:J,fpp_fpfv:I,fpfv:l,fpft:ee,fsiv:n,fpfv_fpft:b,"25_si":i,"50_si":o,"90_si":s,num_sites:u,patient_allocation:D,sas:1,screening_failure:0,sr:+(U*(365/12/7)).toFixed(2),randomisation_rate:+(U*(365/12/7)).toFixed(2)}}catch(e){return E.error=e,E}}function u(e,t,a,n,l){var i=(0,S.getMomentDate)(e);if(!i)return{invalidFields:"startDate"};var o=t?(0,S.getMomentDate)(t):a.latestDate,u=(0,b.getActualsData)(a,i),d=["sas","fpfv_lpfv","sr","screening_failure","randomisation_rate","25_si","50_si","90_si"],f=a.generatedFields&&[].concat(r(a.generatedFields),d),p=a.patient_allocation,m=a.lpft?(0,S.getMomentDate)(a.lpft):null,h=void 0;a.num_sites&&0!==a.num_sites?h=a.num_sites:p>0&&m&&(a.fsiv||a.fpfv)&&(h=1,f.push("num_sites"));var v=void 0,_=void 0;p>0&&m&&(a.fsiv||a.fpfv)&&(v=1,_=0);var E=void 0;if(a.fpfv)E=(0,S.getMomentDate)(a.fpfv);else if(a.fsiv&&p>0&&m){E=(0,S.getMomentDate)(a.fsiv).clone().add(2,"w");var g=E.day(),y=i.day();g>y?E=E.clone().subtract(g-y,"d"):g<y&&(E=E.clone().add(y-g,"d")),f.push("fpfv")}var C=void 0;if(a.fsiv)C=(0,S.getMomentDate)(a.fsiv);else if(E&&p>0&&m){C=E.clone().subtract(2,"w");var O=C.day(),T=i.day();O>T?C=C.clone().subtract(O-T,"d"):O<T&&(C=C.clone().add(T-O,"d")),f.push("fsiv")}var R=void 0,w=void 0,A=void 0;if(m&&C&&p>0){var I=m.diff(i,"d"),N=C.diff(i,"d"),D=(I+N)/2,P=D-N,L=Math.round(.25*P)+N,M=Math.round(.5*P)+N,x=Math.round(.9*P)+N;R=i.clone().add(L,"d"),w=i.clone().add(M,"d"),A=i.clone().add(x,"d")}var k=s(i,o,n,C,E,R,w,A,h,p,m,v,_),j={};if(l){var F=(0,S.getMomentDate)(a.adjusted_25_si),U=(0,S.getMomentDate)(a.adjusted_50_si),V=(0,S.getMomentDate)(a.adjusted_90_si),B=(0,S.getMomentDate)(a.adjusted_fsiv),H=(0,S.getMomentDate)(a.adjusted_fpfv);j=(0,b.getCurvesAndMilestones)(i,o,n,B,H,F,U,V,a.adjusted_num_sites,a.adjusted_patient_allocation,a.adjusted_sas,a.adjusted_screening_failure,a.adjusted_randomisation_rate?a.adjusted_randomisation_rate/(365/12/7):"","adjusted_",a.adjusted_events)}return c({},k,u,{generatedFields:f},j)}function d(e){var t=(0,_.default)(e,"fullData",[]),a=t.filter(function(e){return e.type===I.SCENARIO_DATA_TYPE.COUNTRY}).map(function(e){var t=["region_id","patient_allocation","region_name","num_sites","fsiv","sas","25_si","50_si","90_si","fpfv","sr","screening_failure","randomisation_rate","lpft"];return c({},(0,g.default)(e,t),{constraint:"INCLUDE",name:(0,_.default)(e,"country_name"),id:(0,_.default)(e,"country_id"),platform_country_id:(0,_.default)(e,"country_id")})}).map(function(t){var a=(0,b.getCurvesAndMilestones)(e.fp,e.end_date,e.fpfv_fpft,t.fsiv,t.fpfv,t["25_si"],t["50_si"],t["90_si"],+t.num_sites,+t.patient_allocation,t.sas,t.screening_failure,t.randomisation_rate/(365/12/7),"");return c({},t,{fpfvFpft:e.fpfv_fpft,expectedLpft:t.lpft?t.lpft.clone():null,lpft:a.lpft?a.lpft.clone():null})}).reduce(function(e,t){var a=e[t.region_name];return a?a.countries.push(t):e[t.region_name]={id:t.region_id,name:t.region_name,countries:[t]},e},{});return{locations:Object.values(a),scenario:{startDate:e.fp,endDate:e.end_date,target_num_patients:e.target_num_patients}}}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.getAverageDate=l,t.generateMissingValuesForImpactScenarioCountries=o,t.getCurvesAndMilestonesImpact=s,t.calculateImpactCurvesData=u,t.prepareImpactScenarioData=d;var f=a(10),p=n(f),m=a(31),h=n(m),v=a(11),_=n(v),E=a(65),g=n(E),y=a(27),S=a(7),b=a(130),C=a(272),O=a(557),T=n(O),R=a(365),w=n(R),A=a(116),I=a(14)},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t,a,n){return e.map(function(e,r){var l=+a;return n?t.forEach(function(e){if(r>=e.startWeek&&r<=e.endWeek){var t=e.operation_value*l/100;e.operation===o.OPERATION_TYPE.DECREASE_BY?l=l-t>0?l-t:0:e.operation===o.OPERATION_TYPE.INCREASE_BY&&(l=l+t<.99?l+t:.99)}}):t.forEach(function(e){if(r>e.startWeek&&r<=e.endWeek){var t=e.operation_value*l/100;e.operation===o.OPERATION_TYPE.DECREASE_BY?l=l-t>0?l-t:0:e.operation===o.OPERATION_TYPE.INCREASE_BY&&(l=l+t<1?l+t:1)}}),e*(1-l)})}function l(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=e.FPP_FSIV,o=e.FSIV_FPFV,s=e.FPFV_FPFT,u=e.countryScreeningRate,d=e.totalDuration,c=e.SF,f=e.nPatients,p=e.preparedType1Events,m=e.preparedType2Events,h=e.screeningCurve,v=e.preparedType4Events,_=e.protectedScenario,E=e.fpftInd,g=[],y=l+o+s+1+u.indexOf(Math.max.apply(Math,n(u))),S=Array(y>d?y:d).fill(0);(t=S).splice.apply(t,[s,u.length].concat(n(u))),S.fill(Math.max.apply(Math,n(u)),s+u.length),S=r(S,v,c,_),0===S.length&&(S=[0]),S=S.map(function(e,t){var a=e;return _?p.forEach(function(e){t>=e.startWeek&&t<e.endWeek&&(a=0)}):p.forEach(function(e){e.startWeek!==e.endWeek&&t>e.startWeek&&t-s<=e.endWeek&&(a=0)}),a});var b=Math.max.apply(Math,n(S));if(b&&0!==b){var C=0,O=0;do{C=void 0!==S[O]?S[O]:b,0!==O&&(void 0!==E&&E===O+1&&(C+=1),C+=g[g.length-1][1]),a?g.push([O+1,C,S[O]]):g.push([O+1,C>f?f:C]),O+=1}while(C<=f&&g.length<i.MAX_CURVE_LENGTH);var T=m.reduce(function(e,t){var a=g.findIndex(function(e){return e[1]>=t.patients});if(-1!==a){var n=a+t.start_after,r=t.duration;return e[n]?e[n]=r>e[n]?r:e[n]:e[n]=r,e}},{});m.sort(function(e,t){var a=g.findIndex(function(t){return t[1]>=e.patients}),n=g.findIndex(function(e){return e[1]>=t.patients});if(-1!==a&&-1!==n){var r=a+e.start_after,l=n+t.start_after;return r<l?-1:r>l?1:0}return 0}),m.forEach(function(e,t){var a=g.findIndex(function(t){return t[1]>=e.patients});if(-1!==a){var n=a+e.start_after,r=e.duration,l=h[n],i=void 0;if(l){i=l[2];var o=T[n];void 0!==o&&(r=o)}if(l&&!i){for(var s=[],u=0;u<r;u+=1)s.push([l[0]+u,l[1],"pause"]);h.splice.apply(h,[n,0].concat(s)),h.forEach(function(e,t){t>=n+r&&(e[0]+=r)})}var d=g[n];if(d&&!i){for(var c=[],f=0;f<r;f+=1)c.push([d[0]+f,d[1],"pause"]);g.splice.apply(g,[n,0].concat(c)),g.forEach(function(e,t){t>=n+r&&(e[0]+=r)})}}})}return g}Object.defineProperty(t,"__esModule",{value:!0}),t.getEnrolmentRateWithType4EventsApplied=r,t.default=l;var i=a(116),o=a(41)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(41),r=function(e,t,a,r,l,i,o){return e.map(function(e,s){var u=+l,d=+i;return o?(t.forEach(function(e){if(s>=e.startWeek&&s<=e.endWeek){var t=e.operation_value*u/100;e.operation===n.OPERATION_TYPE.INCREASE_BY?u-=t:e.operation===n.OPERATION_TYPE.DECREASE_BY&&(u+=t)}}),a.forEach(function(e){if(s>=e.startWeek&&s<=e.endWeek){var t=e.operation_value*d/100;e.operation===n.OPERATION_TYPE.INCREASE_BY?d+=t:e.operation===n.OPERATION_TYPE.DECREASE_BY&&(d-=t)}}),r.forEach(function(e){s>=e.startWeek&&s<e.endWeek&&(d=0)}),e*(d/(1-u))):(t.forEach(function(e){if(s>e.startWeek&&s<=e.endWeek){var t=e.operation_value*u/100;e.operation===n.OPERATION_TYPE.INCREASE_BY?u-=t:e.operation===n.OPERATION_TYPE.DECREASE_BY&&(u+=t)}}),a.forEach(function(e){if(s>e.startWeek&&s<=e.endWeek){var t=e.operation_value*d/100;e.operation===n.OPERATION_TYPE.INCREASE_BY?d+=t:e.operation===n.OPERATION_TYPE.DECREASE_BY&&(d-=t)}}),r.forEach(function(e){s>e.startWeek&&s<=e.endWeek&&(d=0)}),e*(d/(1-u)))})};t.default=r},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e){var t=e.countryScreeningRate,a=e.nPatients,r=e.SF,i=e.fpfvInd,o=[],s=Math.max.apply(Math,n(t));if(s&&0!==s){var u=void 0,d=0,c=a/(1-r);do{u=void 0!==t[d]?t[d]:s,0!==d&&(i===d+1&&(u+=1),u+=o[o.length-1][1]),o.push([d+1,u>c?c:u]),d+=1}while(u<=c&&o.length<l.MAX_CURVE_LENGTH)}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var l=a(116)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,l){try{var i=t[r](l),o=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}return n("next")})}}function o(e){return e.platform_country_id?e.platform_country_id:e.region_name+"-unspecified"}Object.defineProperty(t,"__esModule",{value:!0}),t.getImpactScenarioData=t.getCohortActuals=t.getActuals=void 0;var s=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){var e=i(regeneratorRuntime.mark(function e(t,a,n,r,l,i){var o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(0,O.default)(n,"auth.user.id"),!(s=n.cache[a])||l){e.next=4;break}return e.abrupt("return",s);case 4:return e.next=6,(0,x.fetchApiNative)(""+Y.GET_SCENARIO.replace(/:studyId/,t).replace(/:scenarioId/,a),"GET",{allConstraints:i},o);case 6:return s=e.sent,!s||s.status!==K.SCENARIO_STATUS.APPROVED&&s.status!==K.SCENARIO_STATUS.PREV_APPROVED||r({type:W.ADD_SCENARIO_TO_CACHE,scenarioId:a,payload:(0,R.default)(s)}),e.abrupt("return",s);case 9:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,l,i){return e.apply(this,arguments)}}(),c=function(){var e=i(regeneratorRuntime.mark(function e(t,a){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.platform.regions)){e.next=3;break}return e.abrupt("return",n);case 3:return r=(0,O.default)(t,"auth.user.id"),e.next=6,(0,x.fetchApiNative)(Y.PLATFORM_REGIONS,"GET",null,r);case 6:return n=e.sent,a({type:"SUCCESS_"+W.GET_PLATFOTM_REGIONS,payload:n}),e.abrupt("return",n);case 9:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),f=function(){var e=i(regeneratorRuntime.mark(function e(t,a,n,r){var l,i,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.study[t]){e.next=2;break}return e.abrupt("return",a.study[t]);case 2:return l=a.auth&&a.auth.user&&a.auth.user.id,i=n?Y.STUDY_BY_ID:Y.PLAIN_STUDY_BY_ID,e.next=6,(0,x.fetchApiNative)(i.replace(/:id/,t),"GET",null,l);case 6:if(!(o=e.sent)){e.next=12;break}return e.next=10,Promise.all(o.scenarios.map(function(e){return(0,x.fetchApiNative)(""+Y.GET_SCENARIO.replace(/:studyId/,t).replace(/:scenarioId/,e.id),"GET",{allConstraints:!1},l)}));case 10:(s=e.sent)&&(r({type:"SUCCESS_"+W.GET_STUDY_BY_ID,payload:u({},o,{scenarios:s}),isArchivedScenarios:!1}),(0,B.calcScenarioMilestones)(t,s.filter(function(e){return!e.approved_data_snapshot}),r,!1,!0));case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),p=function(){var e=i(regeneratorRuntime.mark(function e(t,a,n){var r,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.auth&&a.auth.user&&a.auth.user.id,!((l=a.historical.data[t.id])&&l.linkedHistoricalStudies&&(0,N.default)(l.linkedHistoricalStudies,t.historical_references))){e.next=4;break}return e.abrupt("return",l);case 4:return e.prev=4,e.next=7,(0,x.fetchApiNative)(""+Y.HISTORICAL_DATA.replace(/:studyId/,t.id),"GET",null,r);case 7:return l=e.sent,n({type:"SUCCESS_"+W.GET_HISTORICAL_DATA,studyId:t.id,payload:u({},l,{linkedHistoricalStudies:t.historical_references})}),e.abrupt("return",l);case 12:return e.prev=12,e.t0=e.catch(4),n({type:"FAILED_"+W.GET_HISTORICAL_DATA,studyId:t.id,error:e.t0,payload:{}}),e.abrupt("return",null);case 16:case"end":return e.stop()}},e,this,[[4,12]])}));return function(t,a,n){return e.apply(this,arguments)}}(),m=t.getActuals=function(){var e=i(regeneratorRuntime.mark(function e(t,a,n,r,l,i){var o,s,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.actuals[r]||{},s=[],i.filter(function(e){return"number"==typeof e}).forEach(function(e){o[e]||(s[s.length]=e)}),d={},!s.length&&0!==i.length){e.next=9;break}return e.next=7,(0,x.fetchApiNative)(Y.FETCH_ACTUALS_DATA_BY_COUNTRIES_IDS.replace(/:id/,r),"POST",{countriesIds:s,studyId:l.study_id,startDate:l.fp},n);case 7:d=e.sent,a({type:"SUCCESS_"+W.FETCH_ACTUALS_DATA,studyId:r,payload:d});case 9:return e.abrupt("return",u({},o,d));case 10:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,l,i){return e.apply(this,arguments)}}(),h=t.getCohortActuals=function(){var e=i(regeneratorRuntime.mark(function e(t,a,n,i,o,s,d,c){var f,p,m,h,v,_,E,g,y,S,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f={},p={},!c){e.next=14;break}if(m=t.actuals[i]||l({},c,{}),h=[],v=(0,M.default)([].concat(r(s),r(Object.keys(m[c]).map(function(e){return+e})))),v.forEach(function(e){var t=m[c][e];t?f[e]=t:h[h.length]=e}),!h.length&&v.length){e.next=14;break}return e.next=10,(0,x.fetchApiNative)(Y.FETCH_ACTUALS_DATA_BY_COUNTRIES_IDS.replace(/:id/,i),"POST",{countriesIds:h,studyId:o.study_id,startDate:o.fp,cohortName:c},n);case 10:p=e.sent,_=l({},c,{}),Object.keys(p).forEach(function(e){_[c][e]=p[e]}),a({type:"SUCCESS_"+W.FETCH_ACTUALS_DATA,studyId:i,payload:_});case 14:if(E={},g=t.aggregatedActuals[i]||{},y=[],s.forEach(function(e){var t=g[e];t?E[e]=t:y[y.length]=e}),S={},!y.length){e.next=26;break}return e.next=22,(0,x.fetchApiNative)(Y.FETCH_AGGREGATED_ACTUALS_DATA_BY_COUNTRIES_IDS.replace(/:id/,i),"POST",{countriesIds:y,studyId:o.study_id,startDate:o.fp,cohortName:null},n);case 22:S=e.sent,b={},Object.keys(S).forEach(function(e){b[e]=S[e]}),a({type:"SUCCESS_"+W.FETCH_AGGREGATED_ACTUALS_DATA,studyId:i,payload:b});case 26:return e.abrupt("return",{actuals:u({},f,p),aggregatedActuals:u({},E,S)});case 27:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,l,i,o,s){return e.apply(this,arguments)}}(),v=function(){var e=i(regeneratorRuntime.mark(function e(t,a,n,l,i,s,c,f){var p,h,v,_,E,g,y,S,C,O,T,R,w,I,N,D,L;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p={},h=s.source_scenario_id,v=i.scenarios.find(function(e){return e.status===K.SCENARIO_STATUS.APPROVED}),h&&v&&(h=v.id),_="IMPACT"===s.origin,E=h||_,e.next=8,m(t,a,n,l,i,c);case 8:if(g=e.sent,y=null,!h){e.next=16;break}return e.next=13,d(l,h,t,a,f);case 13:y=e.sent,e.next=20;break;case 16:if(!_){e.next=20;break}return e.next=19,(0,x.fetchApiNative)(Y.GET_IMPACT_SCENARIO.replace(/:id/,l),"GET",null,n);case 19:y=e.sent;case 20:E&&y?(S=(0,F.prepareScenarioObject)(y),C=(0,F.prepareScenarioCountriesObject)(S,_),O=C.reduce(function(e,t){var a=e;return a[o(t)]=u({},(0,b.default)(t,K.COUNTRY_DATA_FIELDS),(0,b.default)(t,K.COUNTRY_COMMON_FIELDS)),a},{}),s.adjusted_createdAt=s.createdAt,s.adjusted_events=s.events,s.events=S.events,s.approved_data_snapshot=S.approved_data_snapshot,s.fromPrevApproved=S.status===K.SCENARIO_STATUS.PREV_APPROVED,T=(0,F.prepareScenarioObject)(s),R=(0,F.prepareScenarioCountriesObject)(T,!1),w=R.reduce(function(e,t){var a=e,n={},r=(0,b.default)(t,K.COUNTRY_DATA_FIELDS);return Object.keys(r).forEach(function(e){n["adjusted_"+e]=r[e]}),a[o(t)]=u({},n,(0,b.default)(t,K.COUNTRY_COMMON_FIELDS)),a[o(t)].onlyActuals=null,a[o(t)].ignoreAdjustedData=null,a},{}),[].concat(r(Object.keys(O)),r(Object.keys(w)),r(c)).forEach(function(e){var t=O[e],a=w[e];!t&&a&&(a.ignoreGenericData=!0),t&&!a&&(t.ignoreAdjustedData=!0),p[e]=u({},t,a)})):(I=(0,F.prepareScenarioObject)(s),N=(0,F.prepareScenarioCountriesObject)(I,_),D=N.reduce(function(e,t){var a=e;return a[o(t)]=u({},(0,b.default)(t,K.COUNTRY_DATA_FIELDS),(0,b.default)(t,K.COUNTRY_COMMON_FIELDS)),a},{}),c.forEach(function(e){p[e]=u({},D[e])}));try{L=(0,P.default)(Object.keys(p),Object.keys(g)),(0,A.default)(g)||L.forEach(function(e){var t=(0,j.default)(g[e]||{});p[e]=u({},p[e],g[e],t)})}catch(e){console.error(e)}return e.abrupt("return",p);case 23:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,l,i,o,s){return e.apply(this,arguments)}}(),_=function(){var e=i(regeneratorRuntime.mark(function e(t,a){var n,r,l,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},r=(0,F.prepareScenarioObject)(t),l=(0,F.prepareScenarioCountriesObject)(r,!1),i=l.reduce(function(e,t){var a=e;return a[o(t)]=(0,b.default)(t,K.COUNTRY_DATA_FIELDS),a},{}),a.forEach(function(e){n[e]=u({},i[e])}),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),E=function(){var e=i(regeneratorRuntime.mark(function e(t,a,n,l,s,d,c,f,p){var m=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(d.cohorts.map(function(){var e=i(regeneratorRuntime.mark(function e(i){var v,_,E,g,y,S,C,T,R,w,I,N,D,L,M,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v=i,_=v.name,E=d.id,g=v.countries.map(function(e){return o(e)}).filter(function(e){return e}),y={},S={},C={},!(T=s.state.status===z.default.ACTIVE||s.state.status===z.default.COMPLETED)){e.next=14;break}return e.next=11,h(t,a,n,l,s,g,E,_);case 11:R=e.sent,S=R.actuals,C=R.aggregatedActuals;case 14:return v.aggregatedActuals=[].concat(r(Object.values(C))),c?(w=c.cohorts.find(function(e){return e.name===v.name}),I=w&&w.countries||[],N=I.reduce(function(e,t){var a=e;return a[o(t)]=(0,b.default)(t,K.COUNTRY_DATA_FIELDS),a},{}),v.adjusted_createdAt=d.createdAt,v.adjusted_events=v.events,v.fromPrevApproved=c.status===K.SCENARIO_STATUS.PREV_APPROVED,D=v.countries,L=D.reduce(function(e,t){var a=e,n={},r=(0,b.default)(t,K.COUNTRY_DATA_FIELDS);return Object.keys(r).forEach(function(e){n["adjusted_"+e]=r[e]}),a[o(t)]=n,a[o(t)].onlyActuals=null,a[o(t)].ignoreAdjustedData=null,a},{}),[].concat(r(Object.keys(N)),r(Object.keys(L)),r(g)).forEach(function(e){var t=N[e],a=L[e];!t&&a&&(a.ignoreGenericData=!0),t&&!a&&(t.ignoreAdjustedData=!0),y[e]=u({},t,a)})):(M=v.countries.reduce(function(e,t){var a=e;return a[o(t)]=(0,b.default)(t,K.COUNTRY_DATA_FIELDS),a},{}),g.forEach(function(e){y[e]=u({},M[e])})),x=(0,P.default)(Object.keys(y),Object.keys(S)),(0,A.default)(S)||x.forEach(function(e){var t=(0,j.default)(S[e]||{});y[e]=u({},y[e],S[e],t)}),v.countries=x.map(function(e){var t=y[e],a=void 0;if(t.ignoreAdjustedData)a=t;else if(!(a=v.countries.find(function(t){if(t.platform_country_id)return+t.platform_country_id==+e;if("string"==typeof e&&e.indexOf("-")>-1){var a=e.split("-"),n=a[0];return t.region_name===n&&"Unspecified country"===t.country_name}return!1}))){var n=p.find(function(t){return+t.platform_country_id==+e});n&&(a=(0,F.getNewCountryObject)(n.country_name,n.region_name,n.region_id,n.hasSingleCountry),a.platform_country_id=n.platform_country_id,a.onlyActuals=!0,a.ignoreAdjustedData=!0,a.ignoreGenericData=!0)}if(!a)return null;var r=o(a),l=y[r],i=(0,b.default)(a,K.COUNTRY_COMMON_FIELDS),s=(0,O.default)(f,"historicalDataByStudy["+r+"]",null),d=(0,O.default)(f,"historicalDataByIndication["+r+"]",null);return u({},l,i,{id:a.country_id,historical_reference_data_by_studies:s,historical_reference_data_by_indication:d})}),v.createdAt=d.createdAt,e.abrupt("return",v);case 21:case"end":return e.stop()}},e,m)}));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,l,i,o,s,u){return e.apply(this,arguments)}}(),g=function(){var e=i(regeneratorRuntime.mark(function e(t,a,n,r,l,i){var o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!i){e.next=8;break}return o=(0,F.prepareScenarioObject)(a),o=(0,V.calculateCohorts)(o),e.next=6,(0,x.fetchApiNative)(""+Y.CREATE_APPROVED_SCENARIO_SNAPSHOT.replace(/:studyId/,n).replace(/:scenarioId/,r),"PUT",{approvedData:(0,U.serializeScenarioData)(t,o,null)},l);case 6:e.next=13;break;case 8:return s=(0,F.prepareScenarioObject)(a),s.countries=(0,F.prepareScenarioCountriesObject)(s,!1),u=(0,F.getScenarioCalculatedData)(s.countries,s),e.next=13,(0,x.fetchApiNative)(""+Y.CREATE_APPROVED_SCENARIO_SNAPSHOT.replace(/:studyId/,n).replace(/:scenarioId/,r),"PUT",{approvedData:(0,U.serializeScenarioData)(t,s,u)},l);case 13:return e.abrupt("return",!0);case 16:return e.prev=16,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 20:case"end":return e.stop()}},e,this,[[0,16]])}));return function(t,a,n,r,l,i){return e.apply(this,arguments)}}(),y=function(){var e=i(regeneratorRuntime.mark(function e(t,a,n,l,i,m,h,y,S){var C,T,R,w,A,I,N,D,P,L,M,x,k,j,U,V,B;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y&&i({type:W.CLEAR_SCENARIO_CACHE}),e.next=4,Promise.all([d(t,a,l,i,h,S),f(t,l,m,i),c(l,i)]);case 4:if(C=e.sent,T=s(C,3),R=T[0],w=T[1],A=T[2],I=A.reduce(function(e,t){var a=t,n=a.countries.map(function(e){return{platform_country_id:e.id,country_name:e.name,region_name:a.name,region_id:e.region_id,hasSingleCountry:1===a.countries.length}});return[].concat(r(e),r(n))},[]),N=w.state.status===z.default.ACTIVE||w.state.status===z.default.COMPLETED,D=R.cohorts&&R.cohorts.length>0,!R||R.approved_data_snapshot||R.status!==K.SCENARIO_STATUS.APPROVED&&R.status!==K.SCENARIO_STATUS.PREV_APPROVED){e.next=20;break}return e.next=15,g(w,R,t,a,n,D);case 15:if(!(P=e.sent)){e.next=20;break}return e.next=19,d(t,a,l,i,!0);case 19:R=e.sent;case 20:if(L={},N){e.next=25;break}return e.next=24,p(w,l,i);case 24:L=e.sent;case 25:if(D){e.next=41;break}if(M={},x=R.countries.map(function(e){return o(e)}).filter(function(e){return e}),!N){e.next=34;break}return e.next=31,v(l,i,n,t,w,R,x,h);case 31:M=e.sent,e.next=37;break;case 34:return e.next=36,_(R,x);case 36:M=e.sent;case 37:k=Object.keys(M),R.countries=k.map(function(e){var t=M[e],a=void 0;if(t.ignoreAdjustedData)a=t;else if(!(a=R.countries.find(function(t){if(t.platform_country_id)return+t.platform_country_id==+e;if("string"==typeof e&&e.indexOf("-")>-1){var a=e.split("-"),n=a[0];return t.region_name===n&&"Unspecified country"===t.country_name}return!1}))){var n=I.find(function(t){return+t.platform_country_id==+e});n&&(a=(0,F.getNewCountryObject)(n.country_name,n.region_name,n.region_id,n.hasSingleCountry),a.platform_country_id=n.platform_country_id,a.onlyActuals=!0,a.ignoreAdjustedData=!0,a.ignoreGenericData=!0)}if(!a)return null;var r=o(a),l=M[r],i=(0,b.default)(a,K.COUNTRY_COMMON_FIELDS),s=(0,O.default)(L,"historicalDataByStudy["+r+"]",null),d=(0,O.default)(L,"historicalDataByIndication["+r+"]",null);return u({},i,l,{id:a.country_id,historical_reference_data_by_studies:s,historical_reference_data_by_indication:d})}),e.next=57;break;case 41:if(j=R.source_scenario_id,U=w.scenarios.find(function(e){return e.status===K.SCENARIO_STATUS.APPROVED}),U&&j&&(j=U.id),V=null,!j){e.next=54;break}return e.next=48,d(t,j,l,i);case 48:V=e.sent,R.adjusted_createdAt=R.createdAt,R.adjusted_events=R.events,R.events=V.events,R.approved_data_snapshot=V.approved_data_snapshot,R.fromPrevApproved=V.status===K.SCENARIO_STATUS.PREV_APPROVED;case 54:return e.next=56,E(l,i,n,t,w,R,V,L,I);case 56:R.cohorts=e.sent;case 57:return R.countries=R.countries.filter(function(e){return e}),R.aggregatedHistoricalDataByStudy=(0,O.default)(L,"aggregatedHistoricalDataByStudy"),R.aggregatedHistoricalDataByIndication=(0,O.default)(L,"aggregatedHistoricalDataByIndication"),B=(0,F.prepareScenarioObject)(R),B.countries=(0,F.prepareScenarioCountriesObject)(R,"IMPACT"===R.origin),e.abrupt("return",{scenario:B,study:w});case 65:throw e.prev=65,e.t0=e.catch(0),console.error(e.t0),i((0,H.internalServerError)("Failed to fetch scenario data")),new Error("Failed to fetch scenario data");case 70:case"end":return e.stop()}},e,this,[[0,65]])}));return function(t,a,n,r,l,i,o,s,u){return e.apply(this,arguments)}}(),S=(t.getImpactScenarioData=function(){var e=i(regeneratorRuntime.mark(function e(t,a,n,r,l){var i,o,u,d,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,x.fetchApiNative)(""+Y.GET_IMPACT_SCENARIO.replace(/:id/,t),"GET",null,n),f(t,r,!1,l)]);case 2:return i=e.sent,o=s(i,2),u=o[0],d=o[1],c=(0,F.prepareScenarioObject)(u),c.countries=(0,F.prepareScenarioCountriesObject)(u,!0),e.abrupt("return",{scenario:c,study:d});case 9:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,l){return e.apply(this,arguments)}}(),a(65)),b=n(S),C=a(11),O=n(C),T=a(31),R=n(T),w=a(312),A=n(w),I=a(50),N=n(I),D=a(1940),P=n(D),L=a(200),M=n(L),x=a(44),k=a(562),j=n(k),F=a(7),U=a(63),V=a(130),B=a(561),H=a(144),G=a(45),Y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(G),q=a(17),z=n(q),W=a(15),K=a(14);t.default=y},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.history=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(211),i=a(18),o=a(59),s=a(1904),u=a(2264),d=n(u),c=a(1235),f=n(c),p=a(1220),m=n(p),h=a(1217),v=n(h),_=a(1221),E=n(_),g=a(1218),y=n(g),S=a(1222),b=n(S),C=a(1219),O=n(C),T=a(37),R=(0,o.useRouterHistory)(s.createHistory)(),w=l.compose,A=(0,T.loadState)(),I=(0,l.createStore)(f.default,A,w((0,l.applyMiddleware)(O.default,b.default,m.default,d.default,(0,i.routerMiddleware)(R),v.default,E.default,y.default)));I.subscribe(function(){var e=I.getState(),t=!(!e.errors.sessionExpired&&!e.errors.internalServer),a={};t&&(a.sites=r({},I.getState().sites,{searchSitesValue:""}),a.studies=r({},I.getState().studies,{studies:[]})),(0,T.saveState)(a)});var N=(0,i.syncHistoryWithStore)(R,I);t.history=N,t.default=I},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n=a(1561);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1562);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1646);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},,,,,,,function(e,t,a){"use strict";function n(){return function(e){return e((0,u.fetchApi)(s.GET_USER,i.LOGIN,"GET")).then(function(){var t=l.history.getCurrentLocation(),a=""+t.pathname+t.search;e((0,r.push)(a))}).catch(function(e){return e})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=a(18),l=a(367),i=a(15),o=a(45),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(o),u=a(44)},function(e,t,a){"use strict";function n(e,t){return function(a){return a((0,m.fetchApi)(v.SCENARIO_EVENTS.replace(/:scenarioId/,e).replace(/:studyId/,t),{type:h.GET_SCENARIO_EVENTS,scenarioId:e}))}}function r(e,t,a){return function(n){return n((0,m.fetchApi)(v.SCENARIO_COHORT_EVENTS.replace(/:scenarioId/,e).replace(/:cohortId/,a).replace(/:studyId/,t),{type:h.GET_SCENARIO_EVENTS,scenarioId:e}))}}function l(e,t,a){return function(n){return n((0,m.fetchApi)(v.APPLY_SCENARIO_COHORT_EVENTS.replace(/:scenarioId/,e).replace(/:cohortId/,t),{type:h.APPLY_SCENARIO_EVENTS_CHANGES,scenarioId:e},"POST",{eventsList:a}))}}function i(e,t,a){return function(n){return n((0,m.fetchApi)(v.APPLY_SCENARIO_EVENTS.replace(/:scenarioId/,t),{type:h.UPDATE_SCENARIO,studyId:e,scenarioId:t,refreshScenarioCache:!0},"POST",{eventsList:a}))}}function o(e,t,a){return function(n){return n((0,m.fetchApi)(v.APPLY_DISABLE_EVENT_API.replace(/:scenarioId/,e).replace(/:eventId/,t).replace(/:isDisabled/,a?"disable":"enable"),{type:h.APPLY_DISABLE_EVENT,scenarioId:e,eventId:t,isDisabled:a},"PUT"))}}function s(e,t){return{type:h.ADD_NEW_EVENT,scenarioId:e,payload:t}}function u(e,t,a,n){return{type:h.UPDATE_EVENT,scenarioId:e,id:t,field:a,value:n}}function d(e,t,a){return{type:h.DUPLICATE_EVENT,scenarioId:e,id:t,defaultValues:a}}function c(e,t){return{type:h.REMOVE_EVENT,scenarioId:e,id:t}}function f(e,t){return{type:h.SORT_EVENTS,scenarioId:e,field:"start_date",sortOrder:t}}function p(){return{type:h.TOGGLE_GROUP_EVENTS_BY_TYPE}}Object.defineProperty(t,"__esModule",{value:!0}),t.getScenarioEvents=n,t.getScenarioCohortEvents=r,t.applyScenarioCohortEventsChanges=l,t.applyScenarioEventsChanges=i,t.disableEvent=o,t.addNewEvent=s,t.updateEvent=u,t.duplicateEvent=d,t.removeEvent=c,t.sortEventsByStartDate=f,t.toggleGroupEventsByType=p;var m=a(44),h=a(15),v=a(45)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(838),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),m=a(67),h=n(m);a(2289);var v=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.toggleCheckboxChange=a.toggleCheckboxChange.bind(a),a.inputId=h.default.generate(),a.state={isChecked:e.checked},a}return i(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({isChecked:e.checked}),e.autoFocus&&this.checkbox.focus()}},{key:"shouldComponentUpdate",value:function(e,t){return t.isChecked||t.isChecked!==this.state.isChecked||e.disabled!==this.props.disabled}},{key:"toggleCheckboxChange",value:function(){var e=this,t=this.props.onChange;this.setState({isChecked:!this.state.isChecked},function(){t(e.state.isChecked)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.disabled,r=t.name,l=t.customLabel,i=this.state.isChecked,o=(0,p.default)("fpo-checkbox",{"fpo-checkbox-checked":i},{"fpo-checkbox-disabled":n});return u.default.createElement("div",{className:o},u.default.createElement("input",{ref:function(t){e.checkbox=t},id:this.inputId,disabled:n,checked:i,type:"checkbox",name:r,tabIndex:this.props.tabInd,onChange:this.toggleCheckboxChange}),u.default.createElement("label",{htmlFor:this.inputId,title:a},u.default.createElement("span",null,u.default.createElement("span",null,u.default.createElement("span",{className:"checked-icon"},u.default.createElement("svg",{width:"10px",height:"13px",viewBox:"0 0 10 13",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},u.default.createElement("g",{transform:"translate(-7.000000, -6.000000)"},u.default.createElement("path",{d:"M17,18.1 L7,18.1 L7,16.1 L17,16.1 L17,18.1 Z M10.3,14.1 L7,10.8 L8.4,9.4 L10.3,11.3\n                      L15.6,6 L17,7.4 L10.3,14.1 Z"})))))),u.default.createElement("span",{className:"label"},l||a)))}}]),t}(s.Component);v.defaultProps={checked:!1,disabled:!1,name:"checkbox",tabInd:-1,autoFocus:!1,customLabel:null},v.propTypes={autoFocus:c.default.bool,checked:c.default.bool,disabled:c.default.bool,label:c.default.string.isRequired,name:c.default.string,onChange:c.default.func.isRequired,tabInd:c.default.number,customLabel:c.default.node},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(10),u=n(s),d=a(2),c=n(d),f=a(710),p=n(f),m=a(6),h=n(m),v=a(22),_=a(497),E=n(_),g=a(13),y=n(g),S=a(14),b=a(215),C=n(b),O=a(221);a(791);var T=function(e){var t=e.isTitle,a=e.graphElement,n=e.scenarioNumber,r=e.activeFilter,i=e.dataRow,o=e.scenarioEndDate,s=e.setSrRrViewType,u=e.srRrViewType,d=S.SCENARIO_DATA_TYPE.REGION,f="",m="",_=!1,g=!1,b=0,T=0,R=null,w=null,A=null,I=null;if(i){R=i["25_si"]?i["25_si"].format("DD MMM YY"):null,w=i["50_si"]?i["50_si"].format("DD MMM YY"):null,A=i.sas?Math.round(100*i.sas)+"%":null,I=i.screening_failure?Math.round(100*i.screening_failure)+"%":null,d=i.type,b=i.patient_allocation,T=i.num_sites;var N=(0,O.getPredictedDate)(i);m=N?N.format("DD MMM YY"):"",(Object.values(C.default).slice(0,3).includes(r)||r===C.default.RANDOMISATION)&&(_=i.lpft&&i.lpft.isSameOrBefore(o),g=i.lpft&&i.lpft.isAfter(o)),f=d===S.SCENARIO_DATA_TYPE.ROLLUP?"Global":i.location,f.indexOf("Unspecified country")>=0&&(f=f.substring(0,f.indexOf("("))),i.isRegionCountry||d===S.SCENARIO_DATA_TYPE.COUNTRY||(f=l.default.createElement(y.default,{mouseEnterDelay:.5,overlay:d===S.SCENARIO_DATA_TYPE.ROLLUP?"In total scenario includes "+i.amount_countries+" "+(0,p.default)("country",i.amount_countries):"Region includes "+i.amount_countries+" "+(0,p.default)("country",i.amount_countries)},l.default.createElement("div",{className:"location__label"},f," (",i.amount_countries,")")))}var D=function(){return l.default.createElement(y.default,{overlayClassName:"compare-milestones__sr-rr-tooltip",align:{offset:[12,5]},overlay:l.default.createElement("span",{onClick:function(e){return s&&s(e.target.innerText)}},"SR"===u?"RR":"SR")},l.default.createElement("div",null,u))},P=null,L=null;switch(r){case C.default.START_UP:P=l.default.createElement(v.Col,{width:2,style:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end"}},l.default.createElement("div",{className:"compare-milestones-cell-right start-up"},l.default.createElement("div",null,t?"25%SI":R),l.default.createElement("div",null,t?"50%SI":w),l.default.createElement("div",null,t?"SAS%":A)));break;case C.default.SCREENING:i&&(L=l.default.createElement("div",null,(+i["SR"===u?"sr":"randomisation_rate"]).toFixed(2))),P=l.default.createElement(v.Col,{width:2,className:"compare-milestones-cell-right enrolment"},l.default.createElement("div",null,t?l.default.createElement(h.default,{name:"SITES"}):T),l.default.createElement("div",{style:{paddingBottom:t?"8px":""}},t?l.default.createElement(h.default,{name:"VISITORS"}):b),l.default.createElement("div",null,t?"SF%":I),t?l.default.createElement(D,null):L);break;default:P=l.default.createElement(v.Col,{width:2,className:"compare-milestones-cell-right"},l.default.createElement("div",{className:(0,c.default)("dataCell",{green:_,red:g})},t?"P/LPFT":m),l.default.createElement("div",{className:"dataCell"},t?l.default.createElement(h.default,{name:"SITES"}):T),l.default.createElement("div",{className:"dataCell",style:{paddingBottom:t?"8px":""}},t?l.default.createElement(h.default,{name:"VISITORS"}):b))}return l.default.createElement(v.Row,{className:(0,c.default)("compare-milestones-view-row",{"header-row":t},{rollup:d===S.SCENARIO_DATA_TYPE.ROLLUP,country:d===S.SCENARIO_DATA_TYPE.COUNTRY&&!i.isRegionCountry})},l.default.createElement(v.Col,{width:1},d===S.SCENARIO_DATA_TYPE.ROLLUP?l.default.createElement(E.default,{scenarioNumber:n}):l.default.createElement("span",null)),l.default.createElement(v.Col,{width:2,style:{paddingRight:"30px"}},l.default.createElement("div",{className:"dataCell"},f)),l.default.createElement(v.Col,{width:7}," ",a),P)};T.propTypes={activeFilter:o.default.string,isTitle:o.default.bool,graphElement:o.default.element,dataRow:o.default.object,scenarioEndDate:o.default.instanceOf(u.default),scenarioNumber:o.default.number,srRrViewType:o.default.string,setSrRrViewType:o.default.func},T.defaultProps={isTitle:!1,graphElement:null,dataRow:null,scenarioEndDate:null,activeFilter:C.default.LPFT_ALL,scenarioNumber:null,srRrViewType:"",setSrRrViewType:void 0},t.default=T},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(851),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(855),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(871),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MIN_YEAR=1900,t.MAX_YEAR=2100,t.DATE_FORMAT="D MMM YY",t.DATE_FORMAT_RE=/^[0-9]{1,2}\s[a-zA-Z]{3}\s[0-9]{2,4}$/,t.MONTHS=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],t.ENTER_KEY="Enter",t.STATUS_ERROR="error"},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(66),m=n(p),h=a(2),v=n(h),_=a(10),E=n(_),g=a(6),y=a(23),S=n(y),b=a(99),C=n(b),O=a(504),T=n(O),R=a(69),w=n(R),A=a(217),I=a(41),N=a(14),D=a(70),P=a(7);a(340);var L=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=[];return e.event&&e.event.locations&&e.locations&&(n=(0,D.prepareLocationsData)(e.event,e.locations,e.scenario)),a.state={locations:n,showLocationsPanel:!1},a.handleClickOutside=a.handleClickOutside.bind(a),a.toggleLocationsPanel=a.toggleLocationsPanel.bind(a),a.setInputFocused=a.setInputFocused.bind(a),a}return o(t,e),s(t,[{key:"setInputFocused",value:function(e){this.setState(r({},e,!this.state[e]))}},{key:"handleClickOutside",value:function(){this.state.showLocationsPanel&&this.toggleLocationsPanel()}},{key:"toggleLocationsPanel",value:function(){this.setState({showLocationsPanel:!this.state.showLocationsPanel})}},{key:"render",value:function(){var e=this.props,t=e.event,a=e.onUpdate,n=e.scenario,r=e.isTracking,l=e.isAdjusted,i=e.isDisabled,o=this.state,s=o.showLocationsPanel,u=o.locations;if(!t||!u||0===u.length||!n)return null;var c=i||n.status===N.SCENARIO_STATUS.APPROVED||r&&(t.status===I.EVENT_STATUS.COMPLETED&&l||!l),f=c||t.status===I.EVENT_STATUS.ACTIVE&&r&&l,p=(0,v.default)("location-selector__content-wrapper",{visible:s}),m=[];t.locations.forEach(function(e){var t=e.name;if(!e.isCountryRegion&&!e.hasSingleCountry){var a=u.find(function(t){return t.name===e.name}).countries.length;t+=" (",t+=e.countries.length===a?"All":e.countries.length,t+=")"}m.push(t)});var h=(0,P.getMomentDate)(n.fp),_=(0,P.getMomentDate)(n.fp).add(20,"y"),y=(0,P.getMomentDate)(n.end_date)>_?(0,P.getMomentDate)(n.end_date):_;return d.default.createElement("div",{className:"event-details-component__content"},d.default.createElement("div",{className:"event-details-component__element-wrapper",style:{width:"180px"}},d.default.createElement("div",{className:"element-wrapper__label",style:{paddingBottom:"8px"}},"Event name"),d.default.createElement(S.default,{status:""===t.name?"error":null,disabled:c,placeholder:"Add short, clear name",onBlur:function(e){return t.name!==e.target.value&&a(t.id,"name",e.target.value)},value:t.name})),d.default.createElement("div",{className:"event-details-component__element-wrapper"},d.default.createElement("div",{className:"element-wrapper__label"},"Start-End date"),d.default.createElement("div",{className:"element-wrapper__content"},d.default.createElement(C.default,{status:t.start_date&&(0,P.getMomentDate)(t.start_date).isSameOrAfter(n.fp)&&(0,P.getMomentDate)(t.start_date).isSameOrBefore(y)?null:"error",disabled:f,defaultDate:(0,P.getMomentDate)(n.fp),filterDate:function(e){return h?e>=h:e>=(0,E.default)()},maxDate:t.end_date?(0,P.getMomentDate)(t.end_date):y,selected:t.start_date?(0,P.getMomentDate)(t.start_date):null,onChange:function(e){return a(t.id,"start_date",e)},simpleView:!0}),d.default.createElement("div",{className:"icon-color-grey"},g.Icons.SEPARATOR),d.default.createElement(C.default,{status:t.end_date&&(0,P.getMomentDate)(t.end_date).isSameOrAfter(n.fp)&&(0,P.getMomentDate)(t.end_date).isSameOrBefore(y)?null:"error",disabled:c,defaultDate:t.start_date?(0,P.getMomentDate)(t.start_date).clone().add(1,"d"):(0,P.getMomentDate)(n.fp),filterDate:function(e){return t.start_date?e>=(0,P.getMomentDate)(t.start_date):e>(0,E.default)()},maxDate:y,onChange:function(e){return a(t.id,"end_date",e)},selected:t.end_date?(0,P.getMomentDate)(t.end_date):null,simpleView:!0}))),d.default.createElement("div",{className:"event-details-component__element-wrapper",style:{width:"160px"}},d.default.createElement("div",{className:"element-wrapper__label invisible",style:{paddingBottom:"8px"}},"&nbsp"),d.default.createElement(w.default,{disabled:c,onOptionSelect:function(e){return a(t.id,"operation",e.value)}},d.default.createElement(R.DropdownOption,{label:"Increase by",selected:t.operation===I.OPERATION_TYPE.INCREASE_BY,value:I.OPERATION_TYPE.INCREASE_BY}),d.default.createElement(R.DropdownOption,{label:"Decrease by",selected:t.operation===I.OPERATION_TYPE.DECREASE_BY,value:I.OPERATION_TYPE.DECREASE_BY}))),d.default.createElement(T.default,{id:"operationValue",isDisabled:c,event:t,status:""===t.start_after?"error":null,label:"",placeholder:t.operation_value?t.operation_value+"%":d.default.createElement("span",{className:"placeholder"},"#%"),inputProps:{placeholder:"#%",maxLength:4,type:"number"},onChange:function(e){var n=parseInt(e.target.value,10);t.operation_value!==n&&(n>1e3&&(n=1e3),a(t.id,"operation_value",n))},value:t.operation_value||""}),d.default.createElement("div",{className:"event-details-component__element-wrapper"},d.default.createElement("div",{className:"element-wrapper__label"},"Region/Country"),d.default.createElement("div",{className:(0,v.default)("location-selector__wrapper",{error:!m.length})},d.default.createElement("div",{className:"location-selector__label-wrapper",onClick:c?void 0:this.toggleLocationsPanel},d.default.createElement("div",{className:"control-label"},m.length>0?m.join(", "):d.default.createElement("span",{className:"select-placeholder"},"Select regions/countries")),d.default.createElement("div",{className:"control-icon"},s?g.Icons.CHEVRON_UP:g.Icons.CHEVRON_DOWN)),d.default.createElement("div",{className:p},d.default.createElement(A.EventCountrySelector,{disabled:c,width:290,regionsCountriesList:u,onChange:function(e){return a(t.id,"locations",e)}})))))}}]),t}(d.default.Component);L.defaultProps={locations:[],scenario:null,isTracking:!1,isAdjusted:!1,isDisabled:!1},L.propTypes={event:f.default.object.isRequired,onUpdate:f.default.func.isRequired,locations:f.default.array,scenario:f.default.object,isTracking:f.default.bool,isAdjusted:f.default.bool,isDisabled:f.default.bool},t.default=(0,m.default)(L)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(66),m=n(p),h=a(2),v=n(h),_=a(6),E=a(23),g=n(E),y=a(504),S=n(y),b=a(217),C=a(41),O=a(14),T=a(116),R=a(70),w=a(7);a(340);var A=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=[];return e.event&&e.event.locations&&e.locations&&(n=(0,R.prepareLocationsData)(e.event,e.locations,e.scenario)),a.state={locations:n,showLocationsPanel:!1,startAfterFocused:!1,durationFocused:!1},a.handleClickOutside=a.handleClickOutside.bind(a),a.toggleLocationsPanel=a.toggleLocationsPanel.bind(a),a}return o(t,e),s(t,[{key:"handleClickOutside",value:function(){this.state.showLocationsPanel&&this.toggleLocationsPanel()}},{key:"toggleLocationsPanel",value:function(){this.setState({showLocationsPanel:!this.state.showLocationsPanel})}},{key:"render",value:function(){var e=this.props,t=e.event,a=e.onUpdate,n=e.scenario,l=e.isTracking,i=e.isAdjusted,o=e.isDisabled,s=this.state,u=s.showLocationsPanel,c=s.locations;if(!t||!c||0===c.length||!n)return null;var f=o||n.status===O.SCENARIO_STATUS.APPROVED||l&&(t.status===C.EVENT_STATUS.COMPLETED&&i||!i),p=(0,v.default)("location-selector__content-wrapper",{visible:u}),m=(0,w.getMomentDate)(n.end_date).diff((0,w.getMomentDate)(n.fp),"days"),h=m>T.MAX_CALCULATION_PERIOD?m:T.MAX_CALCULATION_PERIOD,E=[],y=[];t.locations.forEach(function(e){var t=e.name;if(!e.isCountryRegion&&!e.hasSingleCountry){var a=c.find(function(t){return t.name===e.name}),n=0;a&&(n=a.countries.length),t+=" (",t+=e.countries.length===n?"All":e.countries.length,t+=")"}E.push(t),y.push.apply(y,r(e.countries.map(function(e){return e.id})))});var R=""!==t.patients,A=Math.min.apply(Math,r(n.countries.filter(function(e){return y.includes(e.country_id)}).map(function(e){return n.source_scenario_id?e.adjusted_patient_allocation:e.patient_allocation})));return t.patients>A&&(R=!1),d.default.createElement("div",{className:"event-details-component__content"},d.default.createElement("div",{className:"event-details-component__element-wrapper",style:{width:"180px"}},d.default.createElement("div",{className:"element-wrapper__label",style:{paddingBottom:"8px"}},"Event name"),d.default.createElement(g.default,{status:""===t.name?"error":null,disabled:f,placeholder:"Add short, clear name",onBlur:function(e){return t.name!==e.target.value&&a(t.id,"name",e.target.value)},value:t.name})),d.default.createElement("div",{className:"event-details-component__element-wrapper",style:{marginLeft:"-4px",width:"80px"}},d.default.createElement("div",{className:"element-wrapper__label",style:{paddingBottom:"8px"}},"Patients"),d.default.createElement(g.default,{status:R?null:"error",type:"number",placeholder:"#",disabled:f,onBlur:function(e){return t.patients!==+e.target.value&&a(t.id,"patients",e.target.value)},value:t.patients})),d.default.createElement(S.default,{id:"startAfter",isDisabled:f,event:t,status:""===t.start_after?"error":null,label:"Start after",inputProps:{placeholder:"#d",type:"number"},placeholder:""!==t.start_after&&t.start_after>=0?t.start_after+"d":d.default.createElement("span",{className:"placeholder"},"#d"),onChange:function(e){return(t.start_after!==parseInt(e.target.value,10)&&parseInt(e.target.value,10)+parseInt(t.duration||0,10)<=h||!e.target.value)&&a(t.id,"start_after",e.target.value.replace(/d$/,""))},value:t.start_after||""}),d.default.createElement(S.default,{id:"duration",isDisabled:f,event:t,status:""===t.duration?"error":null,label:"Duration",inputProps:{placeholder:"#d",type:"number"},placeholder:""!==t.duration&&t.duration>=0?t.duration+"d":d.default.createElement("span",{className:"placeholder"},"#d"),onChange:function(e){return(t.duration!==+e.target.value&&parseInt(e.target.value,10)+parseInt(t.start_after||0,10)<=h||!e.target.value)&&a(t.id,"duration",e.target.value.replace(/d$/,""))},value:t.duration||""}),d.default.createElement("div",{className:"event-details-component__element-wrapper"},d.default.createElement("div",{className:"element-wrapper__label"},"Region/Country"),d.default.createElement("div",{className:(0,v.default)("location-selector__wrapper",{error:!E.length})},d.default.createElement("div",{className:"location-selector__label-wrapper",onClick:f?void 0:this.toggleLocationsPanel},d.default.createElement("div",{className:"control-label"},E.length>0?E.join(", "):d.default.createElement("span",{className:"select-placeholder"},"Select regions/countries")),d.default.createElement("div",{className:"control-icon"},u?_.Icons.CHEVRON_UP:_.Icons.CHEVRON_DOWN)),d.default.createElement("div",{className:p},d.default.createElement(b.EventCountrySelector,{disabled:f,width:290,regionsCountriesList:c,onChange:function(e){return a(t.id,"locations",e)}})))))}}]),t}(d.default.Component);A.defaultProps={locations:[],scenario:null,isTracking:!1,isAdjusted:!1,isDisabled:!1},A.propTypes={event:f.default.object.isRequired,onUpdate:f.default.func.isRequired,locations:f.default.array,scenario:f.default.object,isTracking:f.default.bool,isAdjusted:f.default.bool,isDisabled:f.default.bool},t.default=(0,m.default)(A)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(66),p=n(f),m=a(2),h=n(m),v=a(10),_=n(v),E=a(6),g=a(23),y=n(g),S=a(99),b=n(S),C=a(217),O=a(41),T=a(14),R=a(70),w=a(7);a(340);var A=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=[];return e.event&&e.event.locations&&e.locations&&(n=(0,R.prepareLocationsData)(e.event,e.locations,e.scenario)),a.state={locations:n,showLocationsPanel:!1},a.handleClickOutside=a.handleClickOutside.bind(a),a.toggleLocationsPanel=a.toggleLocationsPanel.bind(a),a}return i(t,e),o(t,[{key:"handleClickOutside",value:function(){this.state.showLocationsPanel&&this.toggleLocationsPanel()}},{key:"toggleLocationsPanel",value:function(){this.setState({showLocationsPanel:!this.state.showLocationsPanel})}},{key:"render",value:function(){var e=this.props,t=e.event,a=e.onUpdate,n=e.scenario,r=e.isTracking,l=e.isAdjusted,i=e.isDisabled,o=this.state,s=o.showLocationsPanel,d=o.locations;if(!t||!d||0===d.length||!n)return null;var c=i||n.status===T.SCENARIO_STATUS.APPROVED||r&&(t.status===O.EVENT_STATUS.COMPLETED&&l||!l),f=c||t.status===O.EVENT_STATUS.ACTIVE&&r&&l,p=(0,h.default)("location-selector__content-wrapper",{visible:s}),m=[];t.locations.forEach(function(e){var t=e.name,a=d.find(function(t){return t.name===e.name});if(!e.isCountryRegion&&!e.hasSingleCountry&&a){var n=a.initialLength;t+=" (",t+=e.countries.length===n?"All":e.countries.length,t+=")"}m.push(t)});var v=(0,w.getMomentDate)(n.fp),g=(0,w.getMomentDate)(n.fp).add(20,"y"),S=(0,w.getMomentDate)(n.end_date)>g?(0,w.getMomentDate)(n.end_date):g;return u.default.createElement("div",{className:"event-details-component__content"},u.default.createElement("div",{className:"event-details-component__element-wrapper",style:{width:"180px"}},u.default.createElement("div",{className:"element-wrapper__label",style:{paddingBottom:"8px"}},"Event name"),u.default.createElement(y.default,{status:""===t.name?"error":null,disabled:c,placeholder:"Add short, clear name",onBlur:function(e){return t.name!==e.target.value&&a(t.id,"name",e.target.value)},value:t.name})),u.default.createElement("div",{className:"event-details-component__element-wrapper"},u.default.createElement("div",{className:"element-wrapper__label"},"Start-End date"),u.default.createElement("div",{className:"element-wrapper__content"},u.default.createElement(b.default,{status:t.start_date&&(0,w.getMomentDate)(t.start_date).isSameOrAfter(n.fp)&&(0,w.getMomentDate)(t.start_date).isSameOrBefore(S)?null:"error",selected:t.start_date?(0,w.getMomentDate)(t.start_date):null,onChange:function(e){return a(t.id,"start_date",e)},defaultDate:(0,w.getMomentDate)(n.fp),filterDate:function(e){return v?e>=v:e>=(0,_.default)()},maxDate:t.end_date?(0,w.getMomentDate)(t.end_date):S,simpleView:!0,disabled:f}),u.default.createElement("div",{className:"icon-color-grey"},E.Icons.SEPARATOR),u.default.createElement(b.default,{status:t.start_date&&(0,w.getMomentDate)(t.start_date).isSameOrAfter(n.fp)&&(0,w.getMomentDate)(t.start_date).isSameOrBefore(S)?null:"error",onChange:function(e){return a(t.id,"end_date",e)},defaultDate:t.start_date?(0,w.getMomentDate)(t.start_date).clone().add(1,"d"):(0,w.getMomentDate)(n.fp),filterDate:function(e){return t.start_date?e>=(0,w.getMomentDate)(t.start_date):e>(0,_.default)()},maxDate:S,selected:t.end_date?(0,w.getMomentDate)(t.end_date):null,disabled:c,simpleView:!0}))),u.default.createElement("div",{className:"event-details-component__element-wrapper"},u.default.createElement("div",{className:"element-wrapper__label"},"Region/Country"),u.default.createElement("div",{className:(0,h.default)("location-selector__wrapper","left-border",{error:!m.length})},u.default.createElement("div",{className:"location-selector__label-wrapper",onClick:c?void 0:this.toggleLocationsPanel},u.default.createElement("div",{className:"control-label"},m.length>0?m.join(", "):u.default.createElement("span",{className:"select-placeholder"},"Select regions/countries")),u.default.createElement("div",{className:"control-icon"},s?E.Icons.CHEVRON_UP:E.Icons.CHEVRON_DOWN)),u.default.createElement("div",{className:p},u.default.createElement(C.EventCountrySelector,{disabled:c,width:290,regionsCountriesList:d,onChange:function(e){return a(t.id,"locations",e)}})))))}}]),t}(u.default.Component);A.defaultProps={locations:[],scenario:null,isTracking:!1,isAdjusted:!1,isDisabled:!1},A.propTypes={event:c.default.object.isRequired,onUpdate:c.default.func.isRequired,locations:c.default.array,scenario:c.default.object,isTracking:c.default.bool,isAdjusted:c.default.bool,isDisabled:c.default.bool},t.default=(0,p.default)(A)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2),m=n(p),h=a(23),v=n(h),_=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={focused:!1},a.setInputFocused=a.setInputFocused.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a}return i(t,e),s(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside)}},{key:"setInputFocused",value:function(){document.addEventListener("click",this.handleClickOutside),this.setState({focused:!0})}},{key:"handleClickOutside",value:function(e){var t=this,a=e.target.closest(".event-details-component__element-wrapper");a&&a.classList.contains(this.props.event.id+"_"+this.props.id)||this.setState({focused:!1},function(){document.removeEventListener("click",t.handleClickOutside)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.isDisabled,n=t.status,r=t.event,l=t.placeholder,i=t.onChange,s=t.id,u=t.value,c=t.label,f=t.inputProps;return d.default.createElement("div",{onClick:function(t){return!a&&e.setInputFocused(t)},className:(0,m.default)("event-details-component__element-wrapper",r.id+"_"+s),style:{marginLeft:"-4px",width:"80px"}},""===c?d.default.createElement("div",{className:"element-wrapper__label invisible",style:{paddingBottom:"8px"}},"&nbsp"):d.default.createElement("div",{className:"element-wrapper__label"},c),this.state.focused?d.default.createElement("div",{style:{marginTop:"0px"}},d.default.createElement(v.default,o({},f,{disabled:a,status:n,autoFocus:this.state.focused,onChange:i,value:u}))):d.default.createElement("div",{className:"event-details-component_input-placeholder"},l))}}]),t}(d.default.Component);_.defaultProps={isDisabled:!1,status:"",value:"",inputProps:null},_.propTypes={inputProps:f.default.object,isDisabled:f.default.bool,status:f.default.string,event:f.default.object.isRequired,placeholder:f.default.node.isRequired,onChange:f.default.func.isRequired,id:f.default.string.isRequired,value:f.default.oneOfType([f.default.string,f.default.number]),label:f.default.string.isRequired},t.default=_},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(903),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(908),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),m=a(50),h=n(m);a(2323);var v=a(87),_=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleOutsideClick=a.handleOutsideClick.bind(a),a.handleEscPress=a.handleEscPress.bind(a),a}return i(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){e.highlighted?(document.body.addEventListener("click",this.handleOutsideClick),document.body.addEventListener("keydown",this.handleEscPress)):(document.body.removeEventListener("click",this.handleOutsideClick),document.body.removeEventListener("keydown",this.handleEscPress))}},{key:"shouldComponentUpdate",value:function(e){return this.props.highlighted||this.props.highlighted!==e.highlighted||!(0,h.default)(this.props.rowData,e.rowData)||null===this.props.rowData||this.props.lpftViewType!==e.lpftViewType||this.props.historicalFilter!==e.historicalFilter||e.isMultiEditing||e.isMultiEditing!==this.props.isMultiEditing||this.props.isOptimizing!==e.isOptimizing||!(0,h.default)(e.collapsedList,this.props.collapsedList)||this.props.clipboardEmpty!==e.clipboardEmpty}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.handleOutsideClick),document.body.removeEventListener("keydown",this.handleEscPress)}},{key:"handleOutsideClick",value:function(e){var t=e.target.classList?e.target.classList.includes:null;(!t||!t("react-datepicker","filterable-list__item"))&&"calendar"!==e.target.getAttribute("data-element-id")&&!this.row.contains(e.target)&&this.props.highlighted&&this.props.handleOutsideClick(e)}},{key:"handleEscPress",value:function(e){"Escape"===e.key&&this.props.handleOutsideClick(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.rowHeight,n=t.children,r=t.onRowClick,l=t.onRowDoubleClick,i=t.rowIndex,o=t.highlightOnHover,s=t.cursorAsPointer,d=t.errorRow,c=t.isEditable,f=t.rowData,m=t.highlighted,h=(0,p.default)({"flex-table__row_clickable":l||r,highlight:c&&o&&!d,errorRow:d,errorRowHover:d&&c,"cursor-as-pointer":c&&s,"multi-edit-row":f&&"multiediting"===f.type,highlighted:m});return u.default.createElement("div",{ref:function(t){e.row=t},className:"flex-table__row "+h,"data-test":"flex-table-row",style:{height:a+"px"},onClick:r?function(e){r(e,i)}:null,onDoubleClick:l?function(e){l(e,i)}:null},n)}}]),t}(s.Component);_.propTypes={children:c.default.node.isRequired,cursorAsPointer:c.default.bool,handleOutsideClick:c.default.func,highlightOnHover:c.default.bool,highlighted:c.default.bool,onRowClick:c.default.func,onRowDoubleClick:c.default.func,rowHeight:c.default.number,rowIndex:c.default.number.isRequired,rowData:c.default.object,errorRow:c.default.bool,isEditable:c.default.bool,lpftViewType:c.default.oneOf(["expected","exceeded"]),collapsedList:c.default.array,isOptimizing:c.default.bool,isMultiEditing:c.default.bool,historicalFilter:c.default.oneOf(Object.keys(v.FILTER_BY)),clipboardEmpty:c.default.bool},_.defaultProps={rowHeight:50,onRowClick:void 0,onRowDoubleClick:void 0,highlightOnHover:!1,cursorAsPointer:!1,highlighted:!1,errorRow:!1,isEditable:!1,handleOutsideClick:function(){return null},rowData:null,lpftViewType:"expected",collapsedList:[],isOptimizing:!1,isMultiEditing:!1,historicalFilter:v.FILTER_BY.STUDIES,clipboardEmpty:!0},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(6),u=a(12),d=a(51),c=n(d),f=a(509),p=function(e){var t=e.historicalStudies,a=e.handleRowSelect,n=e.sortData,r=e.isEditable,i=e.columnWidth,o=e.handleSort;return l.default.createElement(u.FlexTable,{useWindowing:!0,rowHeight:48,rowsCount:t.length},l.default.createElement(u.Column,{columnName:"checkbox",align:"right",className:"checkbox-column",header:l.default.createElement(u.Cell,null,""),data:function(e){var n=e.rowIndex;return l.default.createElement(u.Cell,null,l.default.createElement(c.default,{label:"",disabled:!r,checked:t[n]&&t[n].selected,onChange:function(){a(t[n]&&t[n].study_id)}}))},fixedWidth:!0,width:48}),l.default.createElement(u.Column,{columnName:"study_id",header:l.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.study_id,onSortChange:o,sortKey:"study_id"},l.default.createElement("div",{className:"study_id"===n.active?"align-left active":"align-left"},"Study name"),o?l.default.createElement("div",{className:"sort-direction"},"ASC"===n.study_id?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"})),data:l.default.createElement(f.GenericDataCell,{showCheckbox:!0,isEditable:r,showTooltip:!0,isTitle:!0,tooltipField:"description",onSelect:a,rows:t,dataField:"study_id"}),width:i}),l.default.createElement(u.Column,{columnName:"ta",header:l.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.therapeutic_area,onSortChange:o,sortKey:"therapeutic_area"},l.default.createElement("div",{className:"therapeutic_area"===n.active?"align-left active":"align-left"},"Therapeutic area"),o?l.default.createElement("div",{className:"sort-direction"},"ASC"===n.therapeutic_area?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"})),data:l.default.createElement(f.GenericDataCell,{rows:t,dataField:"therapeutic_area"}),width:200}),l.default.createElement(u.Column,{columnName:"indication",header:l.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.indication,onSortChange:o,sortKey:"indication"},l.default.createElement("div",{className:"indication"===n.active?"align-left active":"align-left"},"Indication"),o?l.default.createElement("div",{className:"sort-direction"},"ASC"===n.indication?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"})),data:l.default.createElement(f.GenericDataCell,{rows:t,dataField:"indication"}),width:200}),l.default.createElement(u.Column,{columnName:"FPFV",header:l.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.fpfv,onSortChange:o,sortKey:"fpfv"},l.default.createElement("div",{className:"fpfv"===n.active?"align-left active":"align-left"},"FPFV"),o?l.default.createElement("div",{className:"sort-direction"},"ASC"===n.fpfv?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"})),data:l.default.createElement(f.GenericDataCell,{rows:t,dataField:"fpfv"}),width:90,fixedWidth:!0}),l.default.createElement(u.Column,{columnName:"Patients",header:l.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.target_num_patients,onSortChange:o,sortKey:"target_num_patients"},l.default.createElement("div",{className:"target_num_patients"===n.active?"align-left active":"align-left"},"Patients"),o?l.default.createElement("div",{className:"sort-direction"},"ASC"===n.target_num_patients?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"})),data:l.default.createElement(f.GenericDataCell,{rows:t,alignTo:"right",dataField:"target_num_patients"}),width:90,fixedWidth:!0}),l.default.createElement(u.Column,{columnName:"Countries",header:l.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.num_countries,onSortChange:o,sortKey:"num_countries"},l.default.createElement("div",{className:"num_countries"===n.active?"align-left active":"align-left"},"Countries"),o?l.default.createElement("div",{className:"sort-direction"},"ASC"===n.num_countries?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"})),data:l.default.createElement(f.GenericDataCell,{rows:t,alignTo:"right",dataField:"num_countries"}),width:90,fixedWidth:!0}),l.default.createElement(u.Column,{columnName:"Sites",header:l.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.num_sites,onSortChange:o,sortKey:"num_sites"},l.default.createElement("div",{className:"num_sites"===n.active?"align-left active":"align-left"},"Sites"),o?l.default.createElement("div",{className:"sort-direction"},"ASC"===n.num_sites?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"})),data:l.default.createElement(f.GenericDataCell,{rows:t,alignTo:"right",dataField:"num_sites"}),width:70,fixedWidth:!0}),l.default.createElement(u.Column,{columnName:"SF",header:l.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.screen_failure_rate,onSortChange:o,sortKey:"screen_failure_rate"},l.default.createElement("div",{className:"screen_failure_rate"===n.active?"align-left active":"align-left"},"SF%"),o?l.default.createElement("div",{className:"sort-direction"},"ASC"===n.screen_failure_rate?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"})),data:l.default.createElement(f.GenericDataCell,{rows:t,alignTo:"right",type:"percentage",dataField:"screen_failure_rate"}),width:72,fixedWidth:!0}),l.default.createElement(u.Column,{columnName:"RR",header:l.default.createElement(u.SortHeaderCell,{className:"header-cell",sortDir:n.enrollment_rate,onSortChange:o,sortKey:"enrollment_rate"},l.default.createElement("div",{className:"enrollment_rate"===n.active?"align-left active":"align-left"},"RR"),o?l.default.createElement("div",{className:"sort-direction"},"ASC"===n.enrollment_rate?s.Icons.FILTER_DESCENDING:s.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"})),data:l.default.createElement(f.GenericDataCell,{rows:t,alignTo:"right",dataField:"enrollment_rate"}),width:70,fixedWidth:!0}))};p.defaultProps={historicalStudies:[],isEditable:!0,columnWidth:200,handleSort:null},p.propTypes={historicalStudies:o.default.array,sortData:o.default.object.isRequired,columnWidth:o.default.number,isEditable:o.default.bool,handleRowSelect:o.default.func.isRequired,handleSort:o.default.func},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.GenericDataCell=t.HeaderCell=void 0;var r=a(923),l=n(r),i=a(922),o=n(i);t.HeaderCell=l.default,t.GenericDataCell=o.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(0),l=function(e){return e&&e.__esModule?e:{default:e}}(r),i=a(323);a(2329);var o=function(){var e={transition:"all 100ms ease-out",opacity:0},t={entering:{opacity:0},entered:{opacity:.3}};return l.default.createElement(i.Transition,{in:!0,appear:!0,timeout:0},function(a){return l.default.createElement("div",{className:"fpo-data-loading-spinner__container",style:n({},e,t[a])},l.default.createElement("div",{className:"looping-rhombuses-spinner"},l.default.createElement("div",{className:"rhombus"}),l.default.createElement("div",{className:"rhombus"}),l.default.createElement("div",{className:"rhombus"})))})};t.default=l.default.memo(o)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GLOBAL_REGION="Global",t.ALL_COUNTRIES="All Countries",t.UNSPECIFIED_COUNTRY="Unspecified country"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(944),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(949),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.OptimizingSpinner=void 0;var r=a(515),l=n(r),i=a(954),o=n(i);t.OptimizingSpinner=l.default,t.default=o.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n);a(2337);var l=function(){return r.default.createElement("div",{className:"fpo-data-optimizing-spinner__container"},r.default.createElement("div",{className:"breeding-rhombus-spinner"},r.default.createElement("div",{className:"rhombus child-1"}),r.default.createElement("div",{className:"rhombus child-2"}),r.default.createElement("div",{className:"rhombus child-3"}),r.default.createElement("div",{className:"rhombus child-4"}),r.default.createElement("div",{className:"rhombus child-5"}),r.default.createElement("div",{className:"rhombus child-6"}),r.default.createElement("div",{className:"rhombus child-7"}),r.default.createElement("div",{className:"rhombus child-8"}),r.default.createElement("div",{className:"rhombus big"})))};t.default=l},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(955),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(22),p=a(145),m=n(p),h=a(518),v=n(h),_=a(79),E=n(_),g=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.isRegionCountry,n=e.overallocation,r=e.location,l=e.originalLpft,i=e.topOffset;return u.default.createElement(E.default,{style:{top:i+"px",zIndex:4}},u.default.createElement("div",{className:"alerts-container"},u.default.createElement(f.Grid,null,u.default.createElement(f.Row,null,u.default.createElement(f.Col,{offset:1,width:11},u.default.createElement(m.default,{isShown:!0,title:"",status:"info",className:"overallocation-alert"},u.default.createElement(v.default,{isAggregatedRowSelected:"country"!==t&&!a,numberOfPatients:n,countryName:r,originalLpft:l})))))))}}]),t}(u.default.PureComponent);g.defaultProps={type:"",isRegionCountry:!1,overallocation:0,location:"",originalLpft:null,topOffset:0},g.propTypes={type:c.default.string,isRegionCountry:c.default.bool,overallocation:c.default.number,location:c.default.string,originalLpft:c.default.object,topOffset:c.default.number},t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(956),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(54),c=n(d),f=function(e){var t=e.children,a=e.action,n=e.disabled,r=e.className,i=e.primary,o=e.fixed;return l.default.createElement(c.default,{className:(0,u.default)("popup-dialog__button",r),disabled:n,fixed:o,type:i?"primary":"secondary",onClick:a},t)};f.propTypes={action:o.default.func,children:o.default.string,disabled:o.default.bool,primary:o.default.bool,className:o.default.string,fixed:o.default.bool},f.defaultProps={action:o.default.func,disabled:!1,primary:!1,children:"Ok",className:void 0,fixed:!1},t.default=l.default.memo(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=a(0),s=n(o),u=a(1),d=n(u),c=a(2),f=n(c);a(2345);var p=function(e){var t=e.children,a=e.className,n=e.width,o=e.fixedWidth,u=e.direction,d=l(e,["children","className","width","fixedWidth","direction"]),c=(0,f.default)(r({},a,a),{"react-flex-table__cell-group_direction-column":"column"===u},{"react-flex-table__cell-group_direction-row":"row"===u}),p={};if(n){var m=o?"0 0":"1 1";p={flex:"number"==typeof n?m+" "+n+"px":m+" "+n}}return s.default.createElement("div",i({className:"react-flex-table__cell-group "+c,style:p},d),t)};p.propTypes={children:d.default.node.isRequired,className:d.default.string,fixedWidth:d.default.bool,direction:d.default.oneOf(["row","column"]),width:d.default.oneOfType([d.default.number,d.default.string])},p.defaultProps={className:void 0,direction:"column",width:void 0,fixedWidth:!1},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),i=n(l),o=a(1),s=n(o),u=a(2),d=n(u),c=a(700),f=n(c);a(2347);var p=function(e){var t=function(e,t,a){return i.default.cloneElement((0,f.default)(e)?e({rowIndex:t,columnName:a}):e,{rowIndex:t,columnName:a})},a=(0,d.default)({"react-flex-table__column_align-left":"left"===e.align},{"react-flex-table__column_align-center":"center"===e.align},{"react-flex-table__column_align-right":"right"===e.align}),n=(0,d.default)("react-flex-table__column",e.className,a,{"react-flex-table__column_no-overflow":!e.overflow}),l=r({},e.style,{flex:e.fixedWidth?"0 0 "+e.width+"px":"1 1 "+e.width+"px"});return i.default.createElement("div",{className:n,style:l,onClick:function(t){e.columnClickHandler&&e.columnClickHandler(t,e.rowIndex)}},-1===e.rowIndex?t(e.header,e.rowIndex,e.columnName):t(e.data,e.rowIndex,e.columnName))};p.propTypes={align:s.default.oneOf(["left","center","right"]),columnClickHandler:s.default.func,columnName:s.default.string,data:s.default.oneOfType([s.default.node,s.default.func]),fixedWidth:s.default.bool,header:s.default.oneOfType([s.default.node,s.default.func]),overflow:s.default.bool,rowIndex:s.default.number,width:s.default.number.isRequired,style:s.default.object,className:s.default.string},p.defaultProps={align:"left",columnClickHandler:void 0,columnName:void 0,data:void 0,fixedWidth:!1,header:void 0,overflow:!1,rowIndex:void 0,style:{},className:""},p.displayName="FlexTableColumn",t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),o=n(i),s=a(1),u=n(s),d=a(2),c=n(d);a(2350);var f=function(e){var t=e.className,a=(e.rowHeight,e.children),n=e.onRowClick,i=e.onRowDoubleClick,s=e.rowIndex,u=r(e,["className","rowHeight","children","onRowClick","onRowDoubleClick","rowIndex"]);return o.default.createElement("div",l({className:(0,c.default)("react-flex-table__row",t),onClick:n?function(e){n(e,s)}:null,onDoubleClick:i?function(e){i(e,s)}:null},u),a)};f.propTypes={className:u.default.string,children:u.default.node.isRequired,onRowClick:u.default.func,onRowDoubleClick:u.default.func,rowHeight:u.default.number,rowIndex:u.default.number},f.defaultProps={className:"",rowHeight:50,onRowClick:void 0,onRowDoubleClick:void 0,rowIndex:void 0},f.displayName="FlexTableRow",t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(13),c=n(d),f=a(269),p=function(e){var t=e.regionName,a=e.onClick,n=e.selectedCountries,r=e.totalCountries,i=e.isSelected,o=e.showStat,s=e.disabled,d=e.isRecommendedByAnalytics,p=e.hasUnspecifiedCountry;return l.default.createElement("div",{className:(0,u.default)("region-list-item",{"selected-region":i,disabled:!!s,"recommended-by-analytics":d&&1===r}),onClick:s?void 0:a},d&&1===r?l.default.createElement(c.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"top",overlay:l.default.createElement("span",null,f.TOOLTIPS_TEXT.RECOMMENDED_BY_ANALYTICS)},l.default.createElement("div",null,t)):l.default.createElement("div",null,t),o?l.default.createElement("div",null,l.default.createElement("span",null,n," ",p?"(+1)":""),l.default.createElement("span",null,"/"),l.default.createElement("span",null,r)):l.default.createElement("div",null))};p.defaultProps={selectedCountries:0,hasUnspecifiedCountry:!1,totalCountries:0,isSelected:!1,showStat:!1,disabled:!1,isRecommendedByAnalytics:!1},p.propTypes={isSelected:o.default.bool,hasUnspecifiedCountry:o.default.bool,onClick:o.default.func.isRequired,regionName:o.default.string.isRequired,selectedCountries:o.default.number,showStat:o.default.bool,totalCountries:o.default.number,disabled:o.default.bool,isRecommendedByAnalytics:o.default.bool},t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1009),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1020),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s);a(2365);var d=function(e){var t=e.height,a=e.noLine;return l.default.createElement("div",{className:"fpo-sidebar-separator",style:{height:t}},l.default.createElement("div",{className:(0,u.default)("fpo-sidebar-separator__line",{"no-line":a})}))};d.propTypes={height:o.default.number,noLine:o.default.bool},d.defaultProps={height:1,noLine:!1},t.default=l.default.memo(d)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i);a(2366);var s=function(e){var t=e.children;return l.default.createElement("div",{className:"fpo-sidebar exclude-from-screenshot"},t)};s.propTypes={children:o.default.any},s.defaultProps={children:o.default.any},t.default=s},function(e,t,a){"use strict";function n(e){return null===e||void 0===e?"n/a":e?"Yes":"No"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1043),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(8),m=a(18),h=a(65),v=n(h),_=a(50),E=n(_),g=a(84),y=n(g),S=a(39),b=a(32),C=a(1045),O=n(C),T=a(28),R=a(88),w=a(46);a(2372);var A=(0,y.default)(R.getMisalignedDetails,function(e,t){return(0,E.default)(e,t)}),I=function(e){function t(){var e,a,n,i;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={invalidFields:[],fpoParams:{},impactParams:{},hasError:!1},n.handleConfirm=function(){var e=n.props.study;n.props.alignStudyParamsWithImpact(e.id).then(function(){n.props.getStudyDashboardData(e.id,!1,!0),n.props.onClose()}).catch(function(){n.props.onClose()})},n.handleNavigateToEdit=function(){var e=n.props.study;n.props.push("/studies/"+e.id+"/edit")},i=a,l(n,i)}return i(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"render",value:function(){var e=this.props,t=e.isShown,a=e.onClose,n=e.study,r=e.infoOnly,l=this.state,i=l.invalidFields,o=l.fpoParams,s=l.impactParams;if(l.hasError)return d.default.createElement(S.PopupDialog,{title:w.MISMATCHED_STUDY_DETAILS,className:"study-params-warning-details",isShown:t,handleClose:a,buttons:[]},d.default.createElement("div",null));var u=[];return!r&&n&&n.is_imported&&i.length>0&&(u.push(d.default.createElement(S.ActionButton,{primary:!0,action:this.handleConfirm},w.ALIGN_AUTOMATICALLY)),u.push(d.default.createElement(S.ActionButton,{primary:!0,action:this.handleNavigateToEdit},w.ALIGN_IN_EDITOR))),u.push(d.default.createElement(S.ActionButton,{primary:!0,action:a},w.CLOSE)),d.default.createElement(S.PopupDialog,{title:w.MISMATCHED_STUDY_DETAILS,className:"study-params-warning-details",isShown:t,handleClose:a,buttons:u},d.default.createElement(O.default,{approvedParams:o,currentParams:s,invalidFields:i}),d.default.createElement(b.ContextHelpButton,{page:"popup__mismatched-study-details",popup:!0}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=(0,v.default)(e.study,["impactStudyParams","fp","target_lpft","therapeutic_area","indication","target_num_patients","fpfv_fpft","phase"]);return o({},t,A(a))}}]),t}(u.Component);I.propTypes={isShown:f.default.bool,onClose:f.default.func.isRequired,study:f.default.object.isRequired,alignStudyParamsWithImpact:f.default.func.isRequired,getStudyDashboardData:f.default.func.isRequired,push:f.default.func.isRequired,infoOnly:f.default.bool},I.defaultProps={scenarioName:null,isShown:!1,dashboard:!1,infoOnly:!1};var N={alignStudyParamsWithImpact:T.alignStudyParamsWithImpact,getStudyDashboardData:T.getStudyDashboardData,push:m.push};t.default=(0,p.connect)(null,N)(I)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{activeUser:e.auth.user}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),f=a(1),p=n(f),m=a(8),h=a(84),v=n(h),_=a(39),E=a(32),g=a(1049),y=n(g),S=a(36),b=a(28),C=a(40),O=n(C),T=a(46);a(2376);var R=(0,v.default)(O.default),w=function(e){function t(){var e,a,n,i;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={confirmActualStudyParams:!0,recalculateWithActualParams:!1},n.handleConfirmActualStudyParamsCheck=function(e){n.setState({confirmActualStudyParams:void 0!==e?e:!n.state.confirmActualStudyParams})},n.handleRecalculateWithActualParams=function(e){n.setState({recalculateWithActualParams:void 0!==e?e:!n.state.recalculateWithActualParams})},n.handleConfirm=function(){var e=n.props,t=e.studyId,a=e.scenarioId,r=e.dashboard;n.props.confirmActualStudyParams(t,a,r,n.state).then(function(){r&&n.props.getStudyDashboardData(t,!1,!0),n.props.onClose()})},i=a,l(n,i)}return i(t,e),u(t,[{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.isShown,n=e.onClose,r=e.scenarioName,l=e.study,i=e.scenario,o=e.activeUser,u=R(o,l,i),d=u.isEditable,f=!d,p=[c.default.createElement(_.ActionButton,{primary:!0,action:n},T.CLOSE)];return f||p.unshift(c.default.createElement(_.ActionButton,{primary:!0,action:this.handleConfirm},T.ALIGN_SCENARIO_WITH_STUDY_PARAMETERS)),c.default.createElement(_.PopupDialog,{title:T.MISMATCHED_SCENARIO_DETAILS,className:"study-params-warning-details",isShown:a,handleClose:n,buttons:p},c.default.createElement("div",null,c.default.createElement(y.default,s({},t,{recalculateOption:!0,hideConfirmOption:f,approvedLpft:this.state.approvedLpft,nextLpft:this.state.nextLpft,recalculateWithActualParams:this.state.recalculateWithActualParams,handleRecalculateWithActualParams:this.handleRecalculateWithActualParams,confirmActualStudyParams:this.state.confirmActualStudyParams,handleConfirmActualStudyParamsCheck:this.handleConfirmActualStudyParamsCheck,scenarioName:r})),c.default.createElement(E.ContextHelpButton,{page:"popup__mismatched-scenario-details",popup:!0})))}}]),t}(d.Component);w.propTypes={scenarioName:p.default.string,data:p.default.object.isRequired,isShown:p.default.bool,onClose:p.default.func.isRequired,dashboard:p.default.bool,studyId:p.default.number.isRequired,scenarioId:p.default.number.isRequired,confirmActualStudyParams:p.default.func.isRequired,getStudyDashboardData:p.default.func.isRequired,study:p.default.object.isRequired,scenario:p.default.object.isRequired,activeUser:p.default.object.isRequired},w.defaultProps={scenarioName:null,isShown:!1,dashboard:!1};var A={confirmActualStudyParams:S.confirmActualStudyParams,getStudyDashboardData:b.getStudyDashboardData};t.default=(0,m.connect)(o,A)(w)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioDetailsDataCell=t.ScentarioTypeDataCell=t.ActionDataCell=t.SitesDataCell=t.PlpftDataCell=t.PatientsDataCell=t.GenericDataCell=t.FpfvLpfvDataCell=t.DaysDataCell=t.CountriesDataCell=t.UpdatedDataCell=t.HeaderCell=void 0;var r=a(1056),l=n(r),i=a(1062),o=n(i),s=a(1052),u=n(s),d=a(1053),c=n(d),f=a(1054),p=n(f),m=a(1055),h=n(m),v=a(1057),_=n(v),E=a(1058),g=n(E),y=a(1061),S=n(y),b=a(1051),C=n(b),O=a(1060),T=n(O),R=a(1059),w=n(R);t.HeaderCell=l.default,t.UpdatedDataCell=o.default,t.CountriesDataCell=u.default,t.DaysDataCell=c.default,t.FpfvLpfvDataCell=p.default,t.GenericDataCell=h.default,t.PatientsDataCell=_.default,t.PlpftDataCell=g.default,t.SitesDataCell=S.default,t.ActionDataCell=C.default,t.ScentarioTypeDataCell=T.default,t.ScenarioDetailsDataCell=w.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2),m=n(p),h=a(67),v=n(h),_=a(50),E=n(_),g=a(6);a(2380);var y=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value,focused:a.props.autoFocus,iconCssClass:e.value&&e.clearIcon?"show":"hide"},a.handleChange=a.handleChange.bind(a),a.handleFocus=a.handleFocus.bind(a),a.handleBlur=a.handleBlur.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.handleKeyUp=a.handleKeyUp.bind(a),a.handleClickIconCross=a.handleClickIconCross.bind(a),a.inputId=v.default.generate(),a}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.autoFocus&&this.input.focus()}},{key:"componentWillReceiveProps",value:function(e){var t=this;null!==e.value&&e.value!==this.state.value&&this.setState({value:e.value}),(e.autoFocus&&!this.state.focused||e.autoFocus&&!this.props.autoFocus)&&(this.setState({focused:!0},function(){return t.input.focus()}),this.input.focus()),!this.state.disabled&&e.disabled&&this.setState({focused:!1})}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,E.default)(t,this.state)||e.disabled!==this.props.disabled||e.status!==this.props.status||e.statusMessage!==this.props.statusMessage||e.clearIcon!==this.props.clearIcon||e.insideLabel!==this.props.insideLabel}},{key:"handleChange",value:function(e){var t=e.target.value,a=this.props.validators,n=!a.length||a.every(function(e){return e(t)});0===a.length?(this.setState({value:t}),this.props.onChange&&this.props.onChange(e,{value:t,isValid:n})):n&&(this.setState({value:t}),this.props.onChange&&this.props.onChange(e,{value:t,isValid:n}))}},{key:"handleFocus",value:function(e){this.setState({focused:!0}),this.input.focus(),"function"==typeof this.props.onFocus&&this.props.onFocus(e,{focused:!0})}},{key:"handleBlur",value:function(e){if(this.setState({focused:!1}),"function"==typeof this.props.onBlur){var t=this.props.validators,a=e.target.value,n=!t.length||t.every(function(e){return e(a)});this.props.onBlur(e,{focused:!1,value:e.target.value,isValid:n})}null!==this.props.toolTipHandler&&this.props.toolTipHandler(!1)}},{key:"handleKeyDown",value:function(e){var t=this.props,a=t.tabPress,n=t.onKeyDown;13===e.keyCode&&this.input.blur(),9===e.keyCode&&a?(e.preventDefault(),this.tabDown=!0):n&&n(e)}},{key:"handleKeyUp",value:function(e){13===e.keyCode&&this.input.blur(),9===e.keyCode&&null!==this.props.tabPress&&this.tabDown&&(this.props.tabPress(),"function"==typeof this.props.onBlur&&(this.props.onBlur(e,{focused:"error"!==this.props.status,value:e.target.value}),"error"!==this.props.status&&this.setState({focused:!1}))),this.tabDown=!1,this.props.clearIcon&&this.setState({iconCssClass:e.target.value?"show":"hide"})}},{key:"handleClickIconCross",value:function(){var e=this;this.props.onClick(),this.setState({iconCssClass:"hide",focused:!0},function(){return e.input.focus()})}},{key:"render",value:function(){var e=this,t=this.props,a=t.type,n=t.placeholder,r=t.disabled,l=t.narrow,i=t.outsideLabel,s=t.insideLabel,u=t.status,c=t.statusMessage,f=t.maxLength,p=t.tabInd,h=t.withoutBorder,v=t.textAlign,_=t.clearIcon,E=t.defaultValue,y=this.state,S=y.value,b=y.focused,C=function(t){return t?d.default.createElement("label",{onClick:function(t){return t.stopPropagation()&&e.handleFocus()},htmlFor:e.inputId},t):null},O=(0,m.default)("fpo-text-input-container",{disabled:r}),T=(0,m.default)("fpo-text-input-wrapper",{"wrapper-focused":b,enabled:!r,extended:null!==s&&void 0!==s,narrow:!s&&!i&&l,error:"error"===u,success:"success"===u,"without-border":h,alignRight:"right"===v}),R=(0,m.default)("fpo-text-input",{narrow:!i&&l||s}),w=(0,m.default)("fpo-text-input-progress-bar",{narrow:!i&&l||s}),A=(0,m.default)("fpo-text-input-progress-bar-fill",{narrow:!i&&l||s}),I={};return void 0===E?I.value=S:I.defaultValue=E,d.default.createElement("div",{className:O},C(i),d.default.createElement("div",{onClick:function(){return!r&&e.handleFocus()},className:T},C(s),d.default.createElement("input",o({onClick:function(){e.input.select(),null!==e.props.toolTipHandler&&e.props.toolTipHandler()},ref:function(t){e.input=t},id:this.inputId,className:R,type:a,maxLength:f,placeholder:n,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown},I,{tabIndex:p,disabled:r})),d.default.createElement("div",{className:w},d.default.createElement("div",{className:A},S||""))),function(){return _?d.default.createElement("div",{onClick:e.handleClickIconCross,className:"fpo-text-input-clear-field "+e.state.iconCssClass},g.Icons.CROSS):null}(),function(){if(!u||!c)return null;var e=(0,m.default)("fpo-text-input-status-message",{error:"error"===u,success:"success"===u});return d.default.createElement("div",{className:e},c)}())}}]),t}(u.Component);y.defaultProps={autoFocus:!1,onBlur:void 0,onFocus:void 0,onChange:void 0,onClick:void 0,disabled:!1,insideLabel:null,outsideLabel:null,type:"text",tabInd:null,tabPress:null,placeholder:"",narrow:!1,status:null,statusMessage:null,onKeyDown:null,maxLength:null,withoutBorder:!1,textAlign:"left",validators:[],clearIcon:!1,toolTipHandler:null,defaultValue:void 0},y.propTypes={autoFocus:f.default.bool,disabled:f.default.bool,insideLabel:f.default.string,type:f.default.oneOf(["text","number","password"]),tabInd:f.default.number,tabPress:f.default.func,textAlign:f.default.oneOf(["left","right"]),placeholder:f.default.string,maxLength:f.default.number,narrow:f.default.bool,outsideLabel:f.default.string,onKeyDown:f.default.func,status:f.default.oneOf(["success","error"]),statusMessage:f.default.string,onBlur:f.default.func,onChange:f.default.func,onClick:f.default.func,onFocus:f.default.func,value:f.default.oneOfType([f.default.string,f.default.number]).isRequired,withoutBorder:f.default.bool,validators:f.default.array,clearIcon:f.default.bool,toolTipHandler:f.default.func,defaultValue:f.default.oneOfType([f.default.string,f.default.number])},t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1080),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1085),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1086),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.WizardScenarioDetailsEditComponent=void 0;var r=a(1089),l=n(r),i=a(1088),o=n(i);t.WizardScenarioDetailsEditComponent=o.default,t.default=l.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1093),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1097),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1098),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={REGIONS:1,COUNTRIES:2};t.default=n},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionDataCell=t.ActionHeaderCell=void 0;var r=a(1122),l=n(r),i=a(1121),o=n(i);t.ActionHeaderCell=l.default,t.ActionDataCell=o.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=a(0),i=n(l),o=a(1),s=n(o),u=a(2),d=n(u),c=a(11),f=n(c),p=a(13),m=n(p),h=a(6),v=a(550),_=n(v),E=a(359),g=a(46);a(2401);var y={ADD:g.ADD,REMOVE:g.REMOVE},S=function(e){var t=e.rowData,a=e.onSubmit,n=e.isEditable,o=e.dataType,s=(0,E.getActionType)(t),u=(0,l.useRef)(),c=(0,l.useRef)(),p=(0,l.useState)(!1),v=r(p,2),g=v[0],S=v[1],b=(0,l.useCallback)(function(){S(!1)},[]),C=(0,l.useCallback)(function(e,n){a(s,t.investigator_center_id,n),b()},[a,t.investigator_center_id,b,s]),O=(0,l.useCallback)(function(e){e.target&&(e.target.classList.contains("options-item")||e.target.closest(".action-cell__back-button"))||u.current&&(g&&u.current.contains(e.target)||g&&b())},[b,g]);return(0,l.useEffect)(function(){return g&&document.addEventListener("click",O),g||document.removeEventListener("click",O),function(){document.removeEventListener("click",O)}},[g,O]),(0,f.default)(t,"studyLevelData.randomized_patients",0)&&"REMOVE"===s?null:i.default.createElement("div",{className:"action-cell"},i.default.createElement(m.default,{align:{offset:[0,0]},mouseEnterDelay:.7,overlay:y[s]+" site"},i.default.createElement("div",{onClick:function(e){e.stopPropagation(),n&&S(!g)}},i.default.createElement("span",{ref:c,className:(0,d.default)({red:"REMOVE"===s,green:"ADD"===s})},"REMOVE"===s?h.Icons.CROSS_O:h.Icons.PLUS))),i.default.createElement("div",{ref:u,onClick:function(e){return e.stopPropagation()},className:(0,d.default)({hidden:!g})},g&&i.default.createElement(_.default,{dataType:o,handleCancel:b,setMultieditView:function(){},onSubmit:C})))};S.propTypes={rowData:s.default.object.isRequired,onSubmit:s.default.func.isRequired,isEditable:s.default.bool.isRequired,dataType:s.default.string.isRequired},t.default=S},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),o=n(i),s=a(1),u=n(s),d=a(2),c=n(d),f=a(11),p=n(f),m=a(12),h=a(51),v=n(h),_=function(e){var t=e.className,a=e.showInitialSelection,n=e.children,i=e.multieditView,s=e.onSelectAll,u=e.multieditAction,d=(e.dataType,r(e,["className","showInitialSelection","children","multieditView","onSelectAll","multieditAction","dataType"])),f=d.data,h=d.rowIndex,_=f[h],E=a&&((0,p.default)(_,"is_recommended_by_FPO")&&"REMOVE"===(0,p.default)(_,"state.status")&&!(0,p.default)(_,"raw")||!(0,p.default)(_,"is_recommended_by_FPO")&&"ADD"===(0,p.default)(_,"state.status")&&!(0,p.default)(_,"raw")||(0,p.default)(_,"raw")&&(0,p.default)(_,"state.status")),g=f.filter(function(e){return e.multiSelected}).length,y=g===f.length,S=!1;return 0===h&&(S=f.reduce(function(e,t){var a=e;return t.studyLevelData&&t.studyLevelData.randomized_patients>0&&(a=!0),a},!1)),o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:(0,c.default)("multiedit-row",{expanded:i&&0===h})},i&&0===h?o.default.createElement(o.default.Fragment,null,!S&&o.default.createElement(v.default,{onChange:function(){return s(f.map(function(e){return e.investigator_center_id}),!y)},label:"",checked:y}),o.default.createElement("div",null,g," sites to ",u)):null),o.default.createElement(m.Row,l({},d,{className:(0,c.default)(t,{dimmed:E,raw:_.raw})}),n))};_.defaultProps={rowIndex:-1,className:"",showInitialSelection:!1,multieditView:!1,multieditAction:"remove"},_.propTypes={children:u.default.node.isRequired,data:u.default.array.isRequired,rowIndex:u.default.number,className:u.default.string,showInitialSelection:u.default.bool,multieditView:u.default.bool,onSelectAll:u.default.func.isRequired,multieditAction:u.default.oneOf(["remove","add"]),dataType:u.default.oneOf(["SELECTED","OTHER","EXTERNAL","RAW","HEADER"]).isRequired},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CurrentStudyDataCell=t.CurrentStudyHeaderCell=void 0;var r=a(1126),l=n(r),i=a(1125),o=n(i);t.CurrentStudyHeaderCell=l.default,t.CurrentStudyDataCell=o.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),l=function(){return r.default.createElement("div",null)};t.default=l},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ForecastedDataCell=t.ForecastedHeaderCell=void 0;var r=a(1130),l=n(r),i=a(1129),o=n(i);t.ForecastedHeaderCell=l.default,t.ForecastedDataCell=o.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HistoricalDataCell=t.HistoricalHeaderCell=void 0;var r=a(1133),l=n(r),i=a(1132),o=n(i);t.HistoricalHeaderCell=l.default,t.HistoricalDataCell=o.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SitesDataCell=t.SitesHeaderCell=void 0;var r=a(1141),l=n(r),i=a(1140),o=n(i);t.SitesHeaderCell=l.default,t.SitesDataCell=o.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=a(0),i=n(l),o=a(1),s=n(o),u=a(2),d=n(u),c=a(1120),f=n(c),p=function(e){var t=e.onSubmit,a=e.setMultieditView,n=e.dataType,o=e.handleCancel,s=(0,l.useState)(null),u=r(s,2),c=u[0],p=u[1];return i.default.createElement("div",{className:(0,d.default)("sites-multiedit-panel",{selected:"NONE"!==n})},"NONE"!==n&&i.default.createElement(f.default,{tab:1,onBackClick:function(){},onCommentChange:function(){},status:"SELECTED"===n?"REMOVE":"ADD",reason:c,setReason:p,handleSubmit:function(){return t("SELECTED"===n?"REMOVE":"ADD",c)},handleCancel:function(){o?o():a("NONE")}}))};p.defaultProps={handleCancel:null},p.propTypes={onSubmit:s.default.func.isRequired,setMultieditView:s.default.func.isRequired,dataType:s.default.oneOf(["SELECTED","OTHER","RAW","HEADER","NONE","EXTERNAL"]).isRequired,handleCancel:s.default.func},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getRawSitesPages=t.getRawFilteredSitesCount=t.getRawSitesCount=t.getRawFilteredSitesPaginated=t.getRawFilteredSites=t.getRawSites=void 0;var l=a(43),i=a(11),o=n(i),s=a(224),u=n(s),d=a(115),c=t.getRawSites=(0,d.createDeepEqualSelector)([d.getSitesFromStore,d.getInitialSitesSelectionFromStore],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.filter(function(e){var a=(0,o.default)(e,"state.status");return!!e.raw&&(t?e.raw:e.raw&&!a||"REMOVE"===a)})}),f=t.getRawFilteredSites=(0,d.createDeepEqualSelector)([c,d.getInternalSitesFilterFromStore,d.getExternalSitesFilterFromStore,d.getExperienceSitesFilterFromStore,d.getSitesSearchValueFromStore,d.getSortOptionsFromStore],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments[3],l=arguments[4],i=arguments[5],s=e.reduce(function(e,t){return t.addedViaSearch?e.addedViaSearch.push(t):e.otherSites.push(t),e},{otherSites:[],addedViaSearch:[]}),c=s.otherSites,f=s.addedViaSearch,p=(0,u.default)(i.active);return[].concat(r(f),r(c.sort(p(i.active,i.direction)))).filter(function(e){var r=!0,i=void 0;t&&(i="INTERNAL"),a&&(i="EXTERNAL");var s=(0,o.default)(e,"isInternal")?"INTERNAL":"EXTERNAL";return r&&i&&i!==s&&(r=!1),r&&(r=(0,d.isMatchedByExpFilters)(e,n)),r&&(r=(0,d.isMatchedBySearchInput)(e,l)),r})});t.getRawFilteredSitesPaginated=(0,d.createDeepEqualSelector)([f,d.getActivePagesFromStore],function(e,t){var a=Math.ceil(t.RAW*d.PER_PAGE);return e.slice(a,a+d.PER_PAGE)}),t.getRawSitesCount=(0,l.createSelector)(c,function(e){return e.length}),t.getRawFilteredSitesCount=(0,l.createSelector)(f,function(e){return e.length}),t.getRawSitesPages=(0,l.createSelector)(f,function(e){return e.length/d.PER_PAGE})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(22),d=a(41),c=a(898),f=n(c),p=a(70),m=a(14),h=a(40),v=function(e){var t=e.events,a=e.onUpdate,n=e.onDuplicate,l=e.onRemove,o=e.locations,s=e.scenario,c=e.metadata,h=e.groupByType,v=e.onDisable,_=[],E=[],g=[];c.isTracking?t.forEach(function(e){if(e.state!==d.EVENT_STATE.DELETED)switch(e.status){case d.EVENT_STATUS.COMPLETED:g.push(e);break;case d.EVENT_STATUS.ACTIVE:_.push(e);break;case d.EVENT_STATUS.PENDING:default:E.push(e)}}):_=[].concat(r(t)),_=h?(0,p.sortEvents)(_):_,E=h?(0,p.sortEvents)(E):E,g=h?(0,p.sortEvents)(g):g;var y=_.map(function(e){return i.default.createElement(f.default,{key:e.id,event:e,locations:o,scenario:s,onDuplicate:n,onRemove:l,onUpdate:a,onDisable:v,metadata:c})}),S=E.map(function(e){return i.default.createElement(f.default,{key:e.id,event:e,scenario:s,locations:o,onDuplicate:n,onRemove:l,onUpdate:a,onDisable:v,metadata:c})}),b=g.map(function(e){return i.default.createElement(f.default,{key:e.id,event:e,scenario:s,locations:o,onDuplicate:n,onRemove:l,onUpdate:a,onDisable:v,metadata:c})});return i.default.createElement("div",null,i.default.createElement(u.Grid,null,c.isTracking&&s&&(s.status===m.SCENARIO_STATUS.APPROVED||s.status===m.SCENARIO_STATUS.PREV_APPROVED||s.source_scenario_id)&&i.default.createElement(u.Row,null,i.default.createElement(u.Col,{offset:1,width:10},i.default.createElement("h1",null,"Active"))),y),i.default.createElement(u.Grid,null,c.isTracking&&s&&(s.status===m.SCENARIO_STATUS.APPROVED||s.status===m.SCENARIO_STATUS.PREV_APPROVED||s.source_scenario_id)&&i.default.createElement(u.Row,null,i.default.createElement(u.Col,{offset:1,width:10},i.default.createElement("h1",null,"Pending"))),S),i.default.createElement(u.Grid,null,c.isTracking&&s&&(s.status===m.SCENARIO_STATUS.APPROVED||s.status===m.SCENARIO_STATUS.PREV_APPROVED||s.source_scenario_id)&&i.default.createElement(u.Row,null,i.default.createElement(u.Col,{offset:1,width:10},i.default.createElement("h1",null,"Completed"))),b))};v.defaultProps={events:[],scenario:null,locations:[],metadata:new h.AccessList},v.propTypes={events:s.default.array,onUpdate:s.default.func.isRequired,onDuplicate:s.default.func.isRequired,onRemove:s.default.func.isRequired,onDisable:s.default.func.isRequired,locations:s.default.array,scenario:s.default.object,metadata:s.default.object.isRequired,groupByType:s.default.bool.isRequired},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(52);a(802);var c=function(e){var t=e.getCellValue,a=e.studies,n=e.rowIndex,r=e.icon,i=e.className,o=e.dataTest,s=e.onStudyDelete,c=function(e){e.stopPropagation(),s(a[n])};return l.default.createElement(d.Cell,e,r&&l.default.createElement("span",{className:"studies-table__cell-icon"},r),l.default.createElement("span",{className:(0,u.default)(i),"data-test":o,onClick:s&&c},t(a[n])))};c.propTypes={getCellValue:o.default.func.isRequired,rowIndex:o.default.number.isRequired,studies:o.default.array,icon:o.default.object,className:o.default.string,dataTest:o.default.string,onStudyDelete:o.default.func},c.defaultProps={studies:[],icon:null,className:null,dataTest:null,onStudyDelete:void 0},t.default=l.default.memo(c)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,v.default)(e,t),n=t.dataType===_.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",r=a[n][t.rowIndex];return{failedFetch:r&&r.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(2),c=n(d),f=a(12),p=a(78),m=n(p),h=a(55),v=n(h),_=a(62),E=function(e){var t=e.rowIndex,a=e.children,n=e.onRowClick,r=e.failedFetch;return i.default.createElement(m.default,{message:"Error rendering component"},i.default.createElement(f.Row,{onRowClick:r?void 0:n,rowIndex:t,className:(0,c.default)("table-dashboard-row",{disabled:r})},a))};E.propTypes={children:s.default.node.isRequired,rowIndex:s.default.number,onRowClick:s.default.func.isRequired,failedFetch:s.default.bool},E.defaultProps={rowIndex:-1,failedFetch:!1},t.default=(0,u.connect)(r)(E)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActionableUsers=void 0;var n=a(43),r=a(182),l=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(e){return e.users.availableUsers},o=(0,n.createSelector)(i,function(e){return e.filter(function(e){return null!==e.email&&null!==e.id&&null!==e.name})});t.getActionableUsers=(0,n.createSelector)(o,function(e){return e.filter(function(e){return e.role!==l.default.READONLY&&e.role!==l.default.PLAYGROUND&&e.role!==l.default.COUNTRY_USER})}),t.default=o},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){var n=e.clone().add(a,"d");return n>=t?n:null}function l(e,t,a,n,l,i){var s=e[0];if(s[l+"patient_allocation"]>i&&!n&&s[l+"curves"]&&s[l+"curves"][2]){var d=s[l+"curves"][2],f=d.findIndex(function(e){return e[1]>=i});if(f>0){var p=t.fp.clone().add(d[f][0],"d"),m=e.filter(function(e){return"country"===e.type}).filter(function(e){return null!==e[l+"patient_allocation_min"]&&void 0!==e[l+"patient_allocation_min"]&&e[l+"lpft"]}).reduce(function(e,a){var n=a[l+"curves"][2],r=n.findIndex(function(e){return e[1]>=a[l+"patient_allocation_min"]});if(r>0){var i=t.fp.clone().add(n[r][0],"d");if(null===e||i.isAfter(e))return i.clone()}return e},null);m&&p.isBefore(m)?(s[l+"allocatedPlpft"]=m.clone(),f=m.diff(t.fp,"d")-1):s[l+"allocatedPlpft"]=p.clone();var h=e.map(function(e){var a=o({},e);if(a[l+"lpft"]&&a[l+"lpft"].isAfter(s[l+"allocatedPlpft"])){var n=new c.default((0,u.default)(a),l);n.valuesType=l+"overallocation",n.lpft=s[l+"allocatedPlpft"],n.lpft&&n.lpft.isBefore(n.fsiv)&&(n.fsiv=null),n.lpft&&n.lpft.isBefore(n.fpfv)&&(n.fpfv=null),n.lpft&&n.fpfv_fpft>=0&&(n.lpfv=n.lpft.clone().subtract(n.fpfv_fpft,"d"),n.fpfv_lpfv=n.lpfv.diff(n.fpfv,"d"));var i=n.curves[2],d=i[f];n.patient_allocation=d?Math.floor(d[1]):null;var p=n.curves[0],m=void 0;if(n.fpfv&&n.lpfv){var h=n.fpfv.diff(n.fsiv,"d"),v=n.lpfv.clone().subtract(h,"d"),_=v.diff(t.fp,"d");m=p.find(function(e){return e[0]===_})}n.num_sites=m?Math.floor(m[1]):n.num_sites;var E=.25*n.num_sites,g=.5*n.num_sites,y=.9*n.num_sites,S=null!==t.source_scenario_id&&!t.exact_copy&&""!==l,b=S?t.adjusted_createdAt:t.fp;p.forEach(function(e){e[1]>=E&&!n["25_si"]&&(n["25_si"]=r(t.fp,b,e[0])),e[1]>=g&&!n["50_si"]&&(n["50_si"]=r(t.fp,b,e[0])),e[1]>=y&&!n["90_si"]&&(n["90_si"]=r(t.fp,b,e[0]))}),a[l+"overallocatedData"]=n}return a});return h.filter(function(e){return"region"===e.type}).forEach(function(e){e[l+"overallocatedData"]&&(e[l+"overallocatedData"].num_sites=h.filter(function(t){return"country"===t.type&&t.region_name===e.location&&t[l+"lpft"]}).reduce(function(e,t){return e+ +(t[l+"overallocatedData"]?t[l+"overallocatedData"].num_sites:t[l+"num_sites"])},0))}),h.filter(function(e){return"rollup"===e.type}).forEach(function(e){e[l+"overallocatedData"]&&(e[l+"overallocatedData"].num_sites=h.filter(function(e){return"region"===e.type}).reduce(function(e,t){return e+ +(t[l+"overallocatedData"]?t[l+"overallocatedData"].num_sites:t[l+"num_sites"])},0))}),h}}return e}function i(e,t){e.GR.overallocation||(e.GR.overallocation=void 0!==t.overallocation&&null!==t.overallocation&&0!==t.overallocation?1:0),t.regionHasSingleCountry?e[t.region_name].overallocation=t.overallocation:e[t.region_name].overallocation||(e[t.region_name].overallocation=void 0!==t.overallocation&&null!==t.overallocation&&0!==t.overallocation?1:0)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=l,t.aggregateOverallocation=i;var s=a(31),u=n(s),d=a(1215),c=n(d)},function(e,t,a){"use strict";function n(e){var t=e.startDate,a=e.FPP_FSIV,n=e.fsiv,r=e.si25,i=e.si50,o=e.si90,s=e.nSites,u=r.diff(t,"d")-a,d=i.diff(t,"d")-a,c=o.diff(t,"d")-a,f=c+(c-d)/4*2,p=[],m=new Array(a+Math.ceil(f));if(m.fill(0),n.isSame(r)&&r.isSame(i)&&i.isSame(o)?m[m.length-1]=0:n.isSame(r)&&r.isSame(i)?(m[m.length-1]=0,m.fill(.4*s/(c-d),a+d,a+c),m.fill(.1*s/(Math.ceil(f)-c),a+c,a+Math.ceil(f))):n.isSame(r)?(m[m.length-1]=0,m.fill(.25*s/(d-u),a+u,a+d),m.fill(.4*s/(c-d),a+d,a+c),m.fill(.1*s/(Math.ceil(f)-c),a+c,a+Math.ceil(f))):n.isSame(r)&&i.isSame(o)?(m[m.length-1]=0,m.fill(.25*s/(d-u),a+u,a+d)):r.isSame(i)&&i.isSame(o)?m.fill(.25*s/u,a,a+u):r.isSame(i)?(m.fill(.25*s/u,a,a+u),m.fill(.4*s/(c-d),a+d,a+c),m.fill(.1*s/(Math.ceil(f)-c),a+c,a+Math.ceil(f))):i.isSame(o)?(m.fill(.25*s/u,a,a+u),m.fill(.25*s/(d-u),a+u,a+d)):(0===u?m[m.length-4]=.25*s:m.fill(.25*s/u,a,a+u),m.fill(.25*s/(d-u),a+u,a+d),m.fill(.4*s/(c-d),a+d,a+c),m.fill(.1*s/(f-c),a+c,a+Math.ceil(f))),p=m.reduce(function(e,t,a){var n=t;return 0!==a&&(n+=e[e.length-1]),e.push(n),e},[]).reduce(function(e,t,a){var n=Math.ceil(t.toFixed(6));return n=n>s?s:n,e.push([a+1,n]),e},[]),n.isSame(r)&&r.isSame(i)&&i.isSame(o)){var h=p[p.length-1],v=h[0];p.push([v,s])}else if(n.isSame(r)&&r.isSame(i)){var _=p[a+d-1],E=_[0];p.splice(a+u,0,[E,Math.ceil(s/2)]),p.forEach(function(e,t){t>a+u&&(e[1]+=Math.floor(s/2))})}else if(n.isSame(r)&&i.isSame(o)){var g=p[a-1],y=g[0];p.splice(a+u,0,[y,Math.ceil(s/4)]),p.forEach(function(e,t){t>a+u&&(e[1]+=Math.floor(s/4))}),g=p[p.length-1],y=g[0],p.push([y,s])}else if(n.isSame(r)){var S=p[a-1],b=S[0];p.splice(a+u,0,[b,Math.ceil(s/4)]),p.forEach(function(e,t){t>a+u&&(e[1]+=Math.floor(s/4))})}else if(r.isSame(i)&&i.isSame(o)){var C=p[p.length-1],O=C[0];p.push([O,Math.ceil(s/2)]),p.push([O,s])}else if(r.isSame(i)){var T=p[a+d-1],R=T[0];p.splice(a+u,0,[R,Math.ceil(s/2)]),p.forEach(function(e,t){if(t>a+u){var n=Math.floor(s/2)-Math.floor(s/4);e[1]=n+e[1]>s?s:n+e[1]}})}else if(i.isSame(o)){var w=p[p.length-1],A=w[0];p.push([A,s])}p=p.map(function(e){return[e[0],+e[1]]});var I=new Map;p.forEach(function(e){var t=e[0],a=+e[1],n=I.get(t);(0,l.default)(n)?I.set(t,a):a>n&&I.set(t,a)});var N=Array.from(I.values());return n.isSame(r)&&N.unshift(0),{sivCurve:p,siteInitiated:N}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=a(198),l=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a,n,l){for(var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=[].concat(r(l)),s=Math.max.apply(Math,r(o)),u=e/(t*n)*1.1/a,d=Math.ceil(u),c=0,f=0;f<l.length;f+=1)if(f>0&&f>i){var p=l[f-1],m=l[f];if((c+=m-p)>0&&f+d<l.length){var h=l[f+d];o[f+d]=0===h?s-c:h-c}}return o}function i(e,t,a,n){for(var r=0;r<t;r+=1)e[e.length]=Array(n).fill(0,0,a).fill(1,a)}function o(e,t){var a=[];return e.forEach(function(n,r){var l=void 0;if(0!==r&&(l=e[r-1]),void 0!==l){var o=n-l;o>0&&i(a,o,r,t)}else n>0&&i(a,n,r,t)}),a}function s(e,t){return e.reduce(function(e,t){var a=e;if(0===a.length)a=[].concat(r(t));else for(var n=0;n<a.length;n+=1)a[n]+=t[n];return a},[]).map(function(e){return e*t})}function u(e,t,a,n,r,l,i){var u=E(e,t,a,n,r,l,i),d=o(e,u.length),c={};return s(d.map(function(e){var t=e.findIndex(function(e){return 1===e});if(c[t])return c[t];var a=u[1],n=0,r=e.map(function(e,r){if(0===e)return 0;var l=u[r];return l>a?n+=1:l<a&&(n-=1),r<t+l?e:n&&n>0?(n-=1,e):0});return c[t]=r,r}),l)}function d(e,t,a,n,r,l,i,u,d,c,p,h,_,E,g,y,S,b){var C=l,O=Math.ceil(C/u),T=O*u,R=o(e,e.length),w={};return s(R.map(function(e){var i=e.findIndex(function(e){return 1===e});if(w[i])return w[i];var o=(0,f.default)(e,[],a,r,d,u,!1);0===o.length&&(o=[0]);var s=(0,m.default)({countryScreeningRate:o,nPatients:l,SF:d,fpfvInd:b});o=(0,f.default)(e,[],a,[],d,u,!1);var S=(0,v.default)({FPP_FSIV:c,FSIV_FPFV:p,FPFV_FPFT:h,countryScreeningRate:o,totalDuration:_,SF:d,nPatients:l,preparedType1Events:r,preparedType2Events:n,screeningCurve:s,prefix:E,startDate:g,endDate:y,preparedType4Events:t,protectedScenario:!1},!0),O=S.find(function(e){return e[1]>=l}),R=O?O[0]:S[S.length-1][0],A=e.findIndex(function(e){return e>0})+1,I=0;A&&R&&(I=R-A-h);var N=void 0,D=O?O[1]:S[S.length-1][1],P=O?O[2]:S[S.length-1][2],L=e.slice();T>C&&D>T&&(N=(P-(D-T))/P,L[e.findIndex(function(e,t){return t===A+I-1})]=N);var M=L.map(function(e,t){return t>=A+I?0:e});return w[i]=M,M}),i)}Object.defineProperty(t,"__esModule",{value:!0}),t.getCountrySiteTermination=void 0,t.applySiteTermination=l,t.applySiteTerminationUpdate=u,t.applySiteTerminationWithEvents=d;var c=a(364),f=n(c),p=a(365),m=n(p),h=a(363),v=n(h),_=a(41),E=t.getCountrySiteTermination=function(e,t,a,n,r,l,i){return e.map(function(e,o){var s=+i;t.forEach(function(e){if(o>=e.startWeek&&o<=e.endWeek){var t=e.operation_value*s/100;e.operation===_.OPERATION_TYPE.INCREASE_BY?s+=t:e.operation===_.OPERATION_TYPE.DECREASE_BY&&(s-=t)}}),a.forEach(function(e){o>=e.startWeek&&o<e.endWeek&&(s=0)});var u=n/(r*l)*1.1/s;return Math.ceil(u)})}},function(e,t,a){"use strict";function n(e,t,a,n,r){var l=(0,o.getParamItemStorage)(e,t,"updateDate"),s=(0,o.getParamItemStorage)(e,t,"usersWhoClosed"),u=(0,o.getParamItemStorage)(e,t,"lastClose"),d=!(0,i.default)(l).isSame(a),c=(0,i.default)(u).isAfter(a);return!!(a&&n&&d&&r!==n)&&(c?!s.includes(r):((0,o.setParamItemStorage)("studiesChanged",t,"lastClose",(0,i.default)()),(0,o.setParamItemStorage)("studiesChanged",t,"usersWhoClosed",[]),!0))}function r(e,t){var a=(0,o.getParamItemStorage)("studiesChanged",e,"usersWhoClosed");a.includes(t)||(a.push(t),(0,o.setParamItemStorage)("studiesChanged",e,"lastClose",(0,i.default)())),(0,o.setParamItemStorage)("studiesChanged",e,"usersWhoClosed",a)}Object.defineProperty(t,"__esModule",{value:!0}),t.isShowDialogStudyChanged=n,t.hideDialogStudyChanged=r;var l=a(10),i=function(e){return e&&e.__esModule?e:{default:e}}(l),o=a(37)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var t=function(t,a,n,r,l){return null==a[n]?t?new Error("Failed prop type: The prop "+n+" is marked as required in "+r+", but its value is 'undefined'."):null:e(a,n,r,l)},a=t.bind(null,!1);return a.isRequired=t.bind(null,!0),a};t.default=n},function(t,a,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,l){try{var i=t[r](l),o=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}return n("next")})}}function o(e,t,a,n,r,l){var i=this;t.forEach(function(t){setTimeout(function(){D.queueJob(s({},t,{isInitial:r}),function(r){var i=r.value;return i?n?c(t,i).then(function(t){var n=l();void 0===(0,E.default)(n,"study["+e+"].scenarios",[]).find(function(e){return+e.id==+t.id})&&a({type:g.ADD_STUDY_SCENARIO,payload:t,studyId:e})}):f(i).then(function(n){a(s({type:g.UPDATE_STUDY_SCENARIO_FULL_DATA,fullData:n,studyId:e,scenarioId:t.id},(0,v.default)(t,["updated","status","name","approvedData","study_level_data","state","study_id","owner_id","owner_name","end_date","source_scenario_id","nerve_job_status"])))}):console.log("ERROR",i),!0},i)},0)})}Object.defineProperty(a,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){var e=i(regeneratorRuntime.mark(function e(t,a,n,r){var l,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=a.auth&&a.auth.user&&a.auth.user.id,i=n?S.STUDY_BY_ID:S.PLAIN_STUDY_BY_ID,o=r&&{archived:!0},e.abrupt("return",(0,b.fetchApiNative)(i.replace(/:id/,t),"GET",o,l));case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),d=function(){var e=i(regeneratorRuntime.mark(function e(t,a){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.auth&&a.auth.user&&a.auth.user.id,e.abrupt("return",(0,b.fetchApiNative)(S.STUDY_SCENARIOS_DETAILS.replace(/:id/,t),"GET",null,n));case 2:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),c=function(){var e=i(regeneratorRuntime.mark(function e(t,a){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSON.parse(a,C.dateDeserializer);case 2:return n=e.sent,e.next=5,(0,R.prepareScenarioObject)(t);case 5:return r=e.sent,e.abrupt("return",s({},r,{fullData:n}));case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),f=function(){var e=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(t,C.dateDeserializer));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=i(regeneratorRuntime.mark(function e(t,a,n,r,i,o){var u,d,c,f,p,m,h,v,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=void 0,d=void 0,c=(0,E.default)(t,"state.status"),f=c===I.default.ACTIVE||c===I.default.COMPLETED,e.next=6,Promise.all(a.map(function(e){return(0,b.fetchApiNative)(""+S.GET_SCENARIO.replace(/:studyId/,n).replace(/:scenarioId/,e.id),"GET",{allConstraints:!1},r).catch(function(){return s({},e,{failedFetch:!0})})}));case 6:if(!(p=e.sent)){e.next=29;break}if(!(m=p.find(function(e){return e.status===N.SCENARIO_STATUS.APPROVED}))){e.next=28;break}if(h=m.cohorts&&m.cohorts.length,!f||h){e.next=21;break}if(e.t0=i.actuals[n],e.t0){e.next=17;break}return e.next=16,(0,w.getActuals)(i,o,r,n,t,[]);case 16:e.t0=e.sent;case 17:u=e.t0,m.countries=m.countries.map(function(e){var t=u[e.platform_country_id];return t?s({},e,t):e}),e.next=28;break;case 21:if(!f||!h){e.next=28;break}return v=m.cohorts.reduce(function(e,t){return t.countries.forEach(function(t){t.platform_country_id&&e.add(t.platform_country_id)}),e},new Set),e.next=25,(0,w.getCohortActuals)(i,o,r,n,t,[].concat(l(v)),m.id,"");case 25:_=e.sent,d=_.aggregatedActuals,m.cohorts=m.cohorts.map(function(e){var t=s({},e);return t.aggregatedActuals=[].concat(l(Object.values(d))),t});case 28:return e.abrupt("return",p);case 29:return e.abrupt("return",[]);case 30:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,l,i){return e.apply(this,arguments)}}(),m=function(){var t=i(regeneratorRuntime.mark(function t(a,n,r,l,c,f){var m,h,v,_,y,C,O,T,w=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(m=r(),h=m.platform.regions,h.length){t.next=7;break}return t.next=5,(0,b.fetchApiNative)(S.PLATFORM_REGIONS,"GET",null,n);case 5:h=t.sent,l({type:"SUCCESS_"+g.GET_PLATFOTM_REGIONS,payload:h});case 7:if(v=void 0,!f&&m.study[a]&&m.study[a].isArchivedScenarios===c){t.next=22;break}return t.prev=9,t.next=12,u(a,m,!1,c);case 12:v=t.sent,v&&p(v,v.scenarios,a,n,m,l).then(function(){var e=i(regeneratorRuntime.mark(function e(t){var r,i,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l({type:"SUCCESS_"+g.GET_STUDY_BY_ID,payload:s({},v,{scenarios:t}),isArchivedScenarios:c}),e.prev=1,r=(0,E.default)(v,"state.status"),!(i=r===I.default.ACTIVE||r===I.default.COMPLETED)||t.find(function(e){return e.status===N.SCENARIO_STATUS.APPROVED})){e.next=9;break}return e.next=7,(0,b.fetchApiNative)(""+S.GET_IMPACT_SCENARIO.replace(/:id/,a),"GET",null,n);case 7:(u=e.sent)&&l({type:"SUCCESS_"+g.GET_IMPACT_SCENARIO,studyId:a,payload:u});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.warn("Cannot fetch IMPACT plan data",e.t0);case 14:setTimeout(function(){o(a,t.filter(function(e){return!e.approved_data_snapshot&&!e.failedFetch}),l,!1,!0)},0);case 15:case"end":return e.stop()}},e,w,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()),t.next=20;break;case 16:throw t.prev=16,t.t0=t.catch(9),console.error(e),new Error("Error calculating study scenarios data");case 20:t.next=43;break;case 22:return t.next=24,d(a,m);case 24:if(!(_=t.sent)||!_.data){t.next=43;break}if(t.prev=26,y=[],C=[],O=_.data.filter(function(e){return e.is_archived===c}),T=m.study[a].scenarios.filter(function(e){return e.is_archived===c}),O.forEach(function(e){var t=T.find(function(t){return+t.id==+e.id});t?t.updated&&!(0,R.getMomentDate)(t.updated).isSame((0,R.getMomentDate)(e.updated))||!t.fullData?C.push({id:e.id}):t.status===e.status&&t.nerve_job_status===e.nerve_job_status||C.push({id:e.id}):y.push({id:e.id})}),0!==y.length||0!==C.length){t.next=35;break}return l({type:g.UPDATE_STUDY_SCENARIO_FULL_DATA,fullData:[{}],studyId:a,scenarioId:-1}),t.abrupt("return",!0);case 35:v=m.study[a],v&&(p(v,y,a,n,m,l).then(function(e){o(a,e.filter(function(e){return!e.approved_data_snapshot&&!e.failedFetch}),l,!0,!1,r)}),p(v,C,a,n,m,l).then(function(e){o(a,e.filter(function(e){return!e.failedFetch}),l,!1,!1,r)})),t.next=43;break;case 39:throw t.prev=39,t.t1=t.catch(26),console.error(t.t1),new Error("Error calculating study scenarios data");case 43:return t.abrupt("return",!0);case 44:case"end":return t.stop()}},t,this,[[9,16],[26,39]])}));return function(e,a,n,r,l,i){return t.apply(this,arguments)}}();a.calcScenarioMilestones=o;var h=n(65),v=r(h),_=n(11),E=r(_),g=n(15),y=n(45),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(y),b=n(44),C=n(63),O=n(1216),T=r(O),R=n(7),w=n(366),A=n(17),I=r(A),N=n(14),D=new T.default;a.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var t=e.actual_patient_allocation,a=e.actual_num_sites,n=e.actual_screened,r=e.actual_randomized,l=!1,i=!1,o=void 0,s=void 0;return(a||t)&&(l=!0),r&&r.length>0&&(o=r.find(function(e){return e&&e[1]>0&&e[2]&&"ACTUALS"===e[2]}))&&(l=!0),n&&n.length>0&&(s=n.find(function(e){return e&&e[1]>0&&e[2]&&"ACTUALS"===e[2]}))&&(l=!0),a>0&&!s&&!o&&(i=!0),{hasActuals:l,canBeIgnored:i}};t.default=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n=a(1517);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1520);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1531);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1542);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1586);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1590);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1595);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1603);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1605);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1639);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1649);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1653);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},,,,,,,,,,,function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=a(1967),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(r),i=a(0),o=n(i),s=a(30),u=a(8),d=a(59),c=a(367),f=n(c),p=a(1246),m=n(p);l.install(),(0,s.render)(o.default.createElement(u.Provider,{store:f.default},o.default.createElement(d.Router,{history:c.history,routes:(0,m.default)(f.default)})),document.getElementById("root"))},,,,,,,,function(e,t,a){"use strict";function n(e,t,a,n,l){return function(s){return s((0,r.fetchApi)(i.SHARE_SCENARIO.replace(/:studyId/,e).replace(/:scenarioId/,t),{type:o.SHARE_SCENARIO,studyId:e,scenarioId:t,userId:a,unshare:l,meta:{notification:{trigger:o.SUCCESS,message:"Scenario was successfully "+(l?"unshared":"shared")}}},"POST",{sharedWith:n,unshare:l}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=a(44),l=a(45),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(l),o=a(15)},function(e,t,a){"use strict";function n(e,t,a,n){return{type:(n?o.SUCCESS:o.ERROR)+"_OPTIMIZE_JOB_STATUS",meta:{notification:[{trigger:o.SUCCESS,message:'Successfully finished optimization for scenario "'+a+'"',link:"/studies/"+e+"/scenarios/"+t,timeout:15e3},{trigger:o.ERROR,message:'Failed to optimize scenario "'+a+'"',link:"/studies/"+e+"/scenarios/"+t,timeout:15e3}]}}}function r(e){return function(t){return t((0,l.fetchApi)(i.CHECK_UPDATES,{type:o.CHECK_JOB_STATUS},"GET",{studiesIds:e.studiesIds})).then(function(t){var a=e.scenarios,n=e.dispatchGetScenario,r=e.dispatchUpdateScenarioJobStatus,l=e.dispatchUpdateStudyScenarioJobStatus;c.length&&t.forEach(function(e,t){var i=c[t];i&&(e.nerve_job_status!==i.nerve_job_status||null!==i.nerve_job_status&&!(0,d.getMomentDate)(e.updatedAt).isSame((0,d.getMomentDate)(i.updatedAt))&&e.nerve_job_status!==i.nerve_job_status)&&(e.nerve_job_status===u.default.FINISHED?(a[e.id]&&n(e.study_id,e.id),l(e.id,e.study_id,u.default.FINISHED)):e.nerve_job_status===u.default.FAILED?(r(e.id,e.study_id,u.default.FAILED),l(e.id,e.study_id,u.default.FAILED)):e.nerve_job_status!==u.default.QUEUED&&e.nerve_job_status!==u.default.RUNNING||(r(e.id,e.study_id,u.default.RUNNING),l(e.id,e.study_id,u.default.RUNNING)))}),c=t}).catch(function(e){return e})}}Object.defineProperty(t,"__esModule",{value:!0}),t.showNotificationOnJobFinished=n,t.default=r;var l=a(44),i=a(45),o=a(15),s=a(47),u=function(e){return e&&e.__esModule?e:{default:e}}(s),d=a(7),c=[]},function(e,t,a){"use strict";function n(e){return{type:r.HIDE_NOTIFICATION,id:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=a(15)},function(e,t,a){"use strict";function n(){return function(e){e((0,s.fetchApi)(d.GET_AVAILABLE_USERS,o.GET_AVAILABLE_USERS)).catch(function(e){return e})}}function r(){return function(e){e((0,s.fetchApi)(d.GET_COUNTRY_USERS,o.GET_COUNTRY_USERS)).catch(function(e){return e})}}function l(e,t){return function(a){return a((0,s.fetchApi)(d.SET_COUNTRY_USER,o.SET_COUNTRY_TO_USER,"PUT",{userId:e,country:t}))}}function i(e,t){return function(a){return a((0,s.fetchApi)(d.UNLINK_COUNTRY_USER,o.REMOVE_COUNTRY_FROM_USER,"PUT",{userId:e,country:t}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,t.getCountryUsers=r,t.setCountryToUser=l,t.unlinkCountryFromUser=i;var o=a(15),s=a(44),u=a(45),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(u)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(6),u=a(13),d=n(u),c=a(506),f=n(c);a(2280);var p=function(e){var t=e.platformRegions,a=e.assignedRegions,n=e.addScenarioRegion,r=e.studyId,i=e.scenarioId;return l.default.createElement(d.default,{mouseEnterDelay:.3,overlayClassName:"scenario-table__add-region-tooltip",align:{offset:[0,10]},overlay:l.default.createElement("span",null,"Add region")},l.default.createElement(d.default,{overlayClassName:"scenario-table__add-region-actions-tooltip",align:{offset:[10,-10]},placement:"bottomRight",trigger:["click"],overlay:l.default.createElement("div",{className:"overlay__wrapper"},l.default.createElement("div",{className:"regions-icon__wrapper"},s.Icons.LANGUAGE),l.default.createElement(f.default,{countries:t.map(function(e){return e.name}),disabledCountries:a,height:190,placeholder:"Add region",onSelect:function(e){n(r,i,e)}}))},l.default.createElement("div",{className:"control-icon__more",onClick:function(e){e.stopPropagation()}},s.Icons.MORE_HORIZ)))};p.propTypes={platformRegions:o.default.array.isRequired,assignedRegions:o.default.array.isRequired,addScenarioRegion:o.default.func.isRequired,studyId:o.default.number.isRequired,scenarioId:o.default.number.isRequired},t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(825),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(512),u=n(s),d=a(145),c=n(d);a(2281);var f=function(e){var t=e.title,a=e.message,n=e.status,r=e.isShown,i=e.handleClose,o=e.children;return r?l.default.createElement(u.default,null,l.default.createElement(c.default,{className:"alert-dialog",title:t,message:a,status:n,isShown:!0,multiline:!0,handleClose:i},o)):null};f.propTypes={status:o.default.oneOf(["info","warning","error","success"]),handleClose:o.default.func,isShown:o.default.bool.isRequired,title:o.default.string,message:o.default.string,children:o.default.node},f.defaultProps={status:"info",handleClose:void 0,title:"Alert dialog",message:"Alert message",children:void 0},t.default=l.default.memo(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Alert=void 0;var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(216),c=a(6);a(2282);var f=function(e){var t=e.title,a=e.message,n=e.status,r=e.isShown,i=e.handleClose,o=e.children,s=e.className,f=e.multiline;if(!r)return null;var p=(0,u.default)(s,"alert",{alert_info:"info"===n},{alert_warning:"warning"===n},{alert_success:"success"===n},{alert_error:"error"===n},{alert_reminder:"reminder"===n},{alert_multiline:f}),m=l.default.createElement("span",{className:"alert__message"},o||a);return l.default.createElement(d.FlexBox,{className:p,onClick:function(e){return e.stopPropagation()}},l.default.createElement(d.FlexItem,{flex:"0 0 36px",className:(0,u.default)("alert__status-icon",{"alert__status-icon_hidden":""===t})},c.Icons[n.toUpperCase()]),l.default.createElement(d.FlexItem,{flex:"1 1 100%",className:"alert__content"},l.default.createElement("span",{className:"alert__title"},""!==t&&t+("reminder"===n?"":":"),!f&&m),f&&m),i&&l.default.createElement(d.FlexItem,{flex:"0 0 36px"},l.default.createElement("span",{className:"alert__close-icon",onClick:i},c.Icons.CROSS)))};f.propTypes={status:o.default.oneOf(["info","warning","error","success","reminder"]),handleClose:o.default.func,isShown:o.default.bool.isRequired,title:o.default.string,message:o.default.string,children:o.default.oneOfType([o.default.string,o.default.node]),className:o.default.string,multiline:o.default.bool},f.defaultProps={status:"info",handleClose:void 0,title:"Alert title",message:"Alert message",children:void 0,className:"",multiline:!1},t.Alert=f,t.default=l.default.memo(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AppFooter=void 0;var r=a(0),l=n(r),i=a(1),o=n(i);a(2283);var s=a(22),u=function(e){var t=e.showBrand,a=(new Date).getFullYear();return l.default.createElement("div",{className:"app-footer"},l.default.createElement(s.Grid,{style:{width:"100%"}},l.default.createElement(s.Row,{style:{alignItems:"center",height:"30px"}},l.default.createElement(s.Col,{offset:1,width:2},l.default.createElement("span",{className:"app-footer-label secondary"}," ",a," Novartis AG")),t&&l.default.createElement(s.Col,{offset:7,width:2},l.default.createElement("div",null,l.default.createElement("span",{className:"app-footer-label"},"Powered by"),l.default.createElement("span",{className:"app-footer-label primary"},"NERVE LIVE"))))))};u.defaultProps={showBrand:!0},u.propTypes={showBrand:o.default.bool},t.AppFooter=u,t.default=l.default.memo(u)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(829),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i);a(2284);var s=a(1898),u=n(s),d=a(22),c=function(e){var t=e.showBrand,a=e.onTestSession,n=e.onTestError;return l.default.createElement("div",{className:"app-header"},l.default.createElement(d.Grid,{style:{width:"100%"}},l.default.createElement(d.Row,{style:{alignItems:"center"}},l.default.createElement(d.Col,{offset:1,width:2},l.default.createElement("div",{style:{height:"48px"}},a&&n&&l.default.createElement("div",{className:"fpo-hidden-button"},l.default.createElement("div",{onClick:function(e){e.altKey&&e.shiftKey?a():e.shiftKey&&n()}})),l.default.createElement("img",{src:u.default,alt:"Novartis",style:{height:"32px"}}))),t&&l.default.createElement(d.Col,{offset:7,width:2},l.default.createElement("div",{className:"app-header__brand-keyline"}),l.default.createElement("div",{className:"app-header__brand-label"},"Footprint Optimizer")))))};c.defaultProps={showBrand:!0,onTestError:null,onTestSession:null},c.propTypes={showBrand:o.default.bool,onTestSession:o.default.func,onTestError:o.default.func},t.default=l.default.memo(c)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(831),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(39),u=a(51),d=n(u),c=a(6),f=a(14),p=a(46);a(2285);var m=function(e){var t=e.isShow,a=e.onChange,n=e.onClose,r=e.onSubmit,i=e.multiEditType,o=i===f.MULTI_EDIT_TYPE.EDIT||null===i;return l.default.createElement(s.PopupDialog,{titleIcon:o?c.Icons.MULTIPLE_EDIT:c.Icons.UNLOCK,title:o?p.MULTI_COLUMN_EDIT:p.REMOVE_USER_CONSTRAINTS,className:"applying-edits-multi-column-dialog",isShown:t,handleClose:n,buttons:[l.default.createElement("div",{className:"applying-edits-multi-column-dialog__checkbox"},l.default.createElement(d.default,{label:"Don't show this again",checked:!1,onChange:a})),l.default.createElement(s.ActionButton,{className:"applying-edits-multi-column-dialog__cancel",action:n},p.CANCEL),l.default.createElement(s.ActionButton,{primary:!0,action:r},p.YES_CONTINUE)]},l.default.createElement("div",{className:"applying-edits-multi-column-content"},o?p.APPLY_MULTIEDIT_DATA:p.UNLOCK_USER_CONSTRAINTS_BY_COLUMN),l.default.createElement("br",null),l.default.createElement("div",{className:"applying-edits-multi-column-content"},p.CONFIRM_TO_CONTINUE))};m.defaultProps={onChange:void 0,onClose:void 0,onSubmit:void 0,multiEditType:f.MULTI_EDIT_TYPE.EDIT},m.propTypes={isShow:o.default.bool.isRequired,onChange:o.default.func,onClose:o.default.func,onSubmit:o.default.func,multiEditType:o.default.string},t.default=l.default.memo(m)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(833),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ApproveScenarioDialog=t.MissedAnnotationWidget=void 0;var r=a(0),l=n(r),i=a(1),o=n(i),s=a(39),u=a(6),d=a(46);a(2286);var c=function(e){var t=e.targetPatients,a=e.predictedPatients,n=e.predictedDate,r=e.hasUnspecified,i=e.targetDate,o=a-t,s=i?i.diff(n,"days"):0;return 0===o&&s>=0?null:l.default.createElement("div",{className:"missed-annotation-widget"},l.default.createElement("div",null,d.MISSED_THINGS),l.default.createElement("div",{className:"annotation-table"},s<0&&l.default.createElement("div",{className:"annotation-row"},l.default.createElement("div",null,u.Icons.OFF_TARGET),l.default.createElement("div",{className:"red"},Math.abs(s)+"d LATE"),l.default.createElement("div",null,"T/LPFT"),l.default.createElement("div",null,i&&i.format("DD MMM YYYY"))),0!==o&&l.default.createElement("div",{className:"annotation-row"},l.default.createElement("div",null,r?u.Icons.VISITORS_EXCLAMATION:u.Icons.VISITORS),l.default.createElement("div",{className:"red"},Math.abs(o)," ",o>0?"OVER":"UNDER"),l.default.createElement("div",null,"T/Patients"),l.default.createElement("div",null,t))))};c.defaultProps={predictedDate:null,hasUnspecified:!1,isAdjusted:!1,targetDate:null},c.propTypes={predictedPatients:o.default.number.isRequired,targetPatients:o.default.number.isRequired,targetDate:o.default.object,predictedDate:o.default.object,hasUnspecified:o.default.bool};var f=function(e){var t=e.isShown,a=e.onClose,n=e.onSubmit,r=e.willOverride,i=e.fullData,o=e.isAdjusted,u=e.targetPatients,f=e.predictedPatients,p=e.predictedDate,m=e.targetDate,h=i.reduce(function(e,t){var a=e;return"Unspecified country"===t.country_name&&t.adjusted_patient_allocation>0&&o&&(a+=t.adjusted_patient_allocation),"Unspecified country"===t.country_name&&t.patient_allocation>0&&!o&&(a+=t.patient_allocation),a},0);return l.default.createElement(s.PopupDialog,{title:"Approve plan",className:"approve-scenario-dialog",isShown:t,handleClose:a,buttons:[l.default.createElement(s.ActionButton,{className:"duplicate-scenario-dialog__button-cancel",action:a},"Cancel"),l.default.createElement(s.ActionButton,{action:n,primary:!0},"Approve")]},l.default.createElement("div",null,d.CONFIRM_TO_APPROVE),r&&l.default.createElement("div",null,"This will ",l.default.createElement("strong",null,"override")," the current approved plan."),0!==h&&l.default.createElement("div",null,l.default.createElement("strong",null,h+" patient"+(h>1?"s":"")+"\n        "+(h>1?"have":"has")+" been allocated to unspecified countries")),l.default.createElement(c,{isAdjusted:o,predictedPatients:f,targetPatients:u,targetDate:m,hasUnspecified:0!==h,predictedDate:p}))};f.defaultProps={isShown:!1,onClose:void 0,willOverride:!1,unspecifiedCountriesPatientsAllocation:0,predictedDate:null,targetDate:null,isAdjusted:!1},f.propTypes={isShown:o.default.bool,onClose:o.default.func,onSubmit:o.default.func.isRequired,willOverride:o.default.bool,fullData:o.default.array.isRequired,predictedPatients:o.default.number.isRequired,targetPatients:o.default.number.isRequired,targetDate:o.default.object,predictedDate:o.default.object,isAdjusted:o.default.bool},t.MissedAnnotationWidget=c,t.ApproveScenarioDialog=f,t.default=l.default.memo(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return{replace:function(t){return e((0,c.replace)(t))},forbiddenError:function(t){return e((0,f.forbiddenError)(t))}}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(211),d=a(8),c=a(18),f=a(144),p=a(46),m=function(e,t){var a=function(a){var n=a.activeUser.role;return n&&!t.includes(n)?(a.forbiddenError(p.DONT_HAVE_ACCESS_TO_VIEW_PAGE),null):i.default.createElement(e,a)};return a.propTypes={activeUser:s.default.shape({role:s.default.string}),forbiddenError:s.default.func.isRequired},a.defaultProps={activeUser:null},a},h=function(e){return{activeUser:e.auth.user}},v=(0,u.compose)((0,d.connect)(h,r),m);t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(836),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2),m=n(p),h=a(216),v=a(61),_=n(v),E=a(13),g=n(E),y=a(6),S=a(87),b=a(834),C=n(b),O=a(14);a(2287);var T=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleSubmitMultiEdits=function(){a.props.onSubmitDialog(a.isCheckedApplyingEditsDialog)},a.handleChangeMultiEdits=function(e){a.isCheckedApplyingEditsDialog=e},a.toggleActive=a.toggleActive.bind(a),a.toggleViewFilter=a.toggleViewFilter.bind(a),a.state={isActive:e.isActive,filterOption:a.props.hasTrials?S.FILTER_BY.STUDIES:S.FILTER_BY.INDICATION,uncertaintyLevel:e.uncertaintyLevel},a.isCheckedApplyingEditsDialog=!1,a}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.onActiveChange(this.state.isActive),this.props.onFilterChange(this.state.filterOption)}},{key:"componentWillReceiveProps",value:function(e){var t={};this.props.isActive!==e.isActive&&(t=o({},t,{isActive:e.isActive})),this.props.uncertaintyLevel!==e.uncertaintyLevel&&(t=o({},t,{uncertaintyLevel:e.uncertaintyLevel})),this.setState(t)}},{key:"toggleActive",value:function(){var e=this,t=this.props,a=t.onActiveChange,n=t.onFilterChange;this.setState({isActive:!this.state.isActive,filterOption:this.state.isActive&&this.props.hasTrials?S.FILTER_BY.STUDIES:this.state.filterOption},function(){a(e.state.isActive),n(e.state.filterOption)})}},{key:"toggleViewFilter",value:function(){var e=this,t=this.props.onFilterChange;this.setState({filterOption:this.state.filterOption===S.FILTER_BY.INDICATION&&this.props.hasTrials?S.FILTER_BY.STUDIES:S.FILTER_BY.INDICATION},function(){t(e.state.filterOption)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isActive,n=t.uncertaintyLevel,r=t.filterOption,l=this.props,i=l.isShowApplyingEditsDialog,o=l.onCloseDialog,s=l.enableMultiedit,u=l.multiEditType,c=l.isCohortView,f=l.disabled,p=l.children,v=(0,m.default)("benchmarks-toolbar",{disabled:f},{active:a});return d.default.createElement("div",{className:v},d.default.createElement(h.FlexBox,{justifyContent:"center",alignItems:"center"},d.default.createElement("span",{className:"description"},"Historical Benchmarks"),d.default.createElement("div",{className:"active-status-toggler"},d.default.createElement("span",{className:(0,m.default)({selected:a}),onClick:f||a?void 0:this.toggleActive},"ON"),d.default.createElement(_.default,{className:"separator",size:"tiny"}),d.default.createElement("span",{className:(0,m.default)({selected:!a}),onClick:!f&&a?this.toggleActive:void 0},"OFF")),a&&y.Icons.ARROW_RIGHT,a&&d.default.createElement("div",{className:"view-filter-toggler"},d.default.createElement("span",{className:(0,m.default)({selected:r===S.FILTER_BY.INDICATION}),onClick:r!==S.FILTER_BY.INDICATION?this.toggleViewFilter:void 0},"By Indication"),d.default.createElement(_.default,{className:"separator",size:"tiny"}),d.default.createElement("span",{className:(0,m.default)({selected:r===S.FILTER_BY.STUDIES},{disabled:!this.props.hasTrials}),onClick:r!==S.FILTER_BY.STUDIES&&this.props.hasTrials?this.toggleViewFilter:void 0},"By Reference Studies")),!a&&d.default.createElement("div",{style:{borderLeft:"1px solid grey",paddingLeft:"10px",marginLeft:"32px"}},p)),a&&!c?d.default.createElement(g.default,{mouseEnterDelay:.3,align:{offset:[-30,-5]},overlay:d.default.createElement("div",null,"Estimations of uncertainty for study forecast ",d.default.createElement("br",null),"is based on a normalized absolute error metric (n.a.e),",d.default.createElement("br",null),"accounting for both ",d.default.createElement("br",null),"(1) availability of data ",d.default.createElement("br",null),"(2) variability of that historical data ",d.default.createElement("br",null),d.default.createElement("br",null),d.default.createElement("strong",null,"LOW:")," up to 30% n.a.e ",d.default.createElement("br",null),d.default.createElement("strong",null,"MEDIUM:")," up to 70% n.a.e ",d.default.createElement("br",null),d.default.createElement("strong",null,"HIGH:")," greater than 70% n.a.e ",d.default.createElement("br",null))},d.default.createElement("div",{style:{marginLeft:"auto"}},d.default.createElement(h.FlexBox,{justifyContent:"center",alignItems:"center"},d.default.createElement("span",{className:"description"},"Forecast Uncertainty:"),d.default.createElement("span",{className:"uncertainty-value"}," ",n)))):null,s&&!a&&d.default.createElement(g.default,{mouseEnterDelay:.3,overlayClassName:"benchmarks-tooltip",align:{offset:[0,3]},overlay:d.default.createElement("span",null,"Multi column edit")},d.default.createElement("div",{style:{borderLeft:"1px solid grey",paddingLeft:"10px"},className:(0,m.default)("button-edit",{disabled:u===O.MULTI_EDIT_TYPE.EDIT}),onClick:function(){u!==O.MULTI_EDIT_TYPE.EDIT&&e.props.onEdit("edit")}},y.Icons.MULTIPLE_EDIT)),s&&!a&&!c&&d.default.createElement(g.default,{mouseEnterDelay:.3,overlayClassName:"benchmarks-tooltip",align:{offset:[-4,3]},overlay:d.default.createElement("span",null,"Remove user ",d.default.createElement("br",null)," constraints by column")},d.default.createElement("div",{className:(0,m.default)("button-unlock",{disabled:u===O.MULTI_EDIT_TYPE.UNLOCK}),onClick:function(){u!==O.MULTI_EDIT_TYPE.UNLOCK&&e.props.onEdit("unlock")}},y.Icons.UNLOCK)),d.default.createElement(C.default,{multiEditType:u,isShow:i,onChange:this.handleChangeMultiEdits,onClose:o,onSubmit:this.handleSubmitMultiEdits}))}}]),t}(u.PureComponent);T.defaultProps={isActive:!1,isMultiEditing:!1,hasTrials:!0,uncertaintyLevel:S.UNCERTAINTY.MEDIUM,isCohortView:!1,disabled:!1,isShowApplyingEditsDialog:!1,onCloseDialog:void 0,onSubmitDialog:void 0,enableMultiedit:!0,isUnlockEdits:!1,multiEditType:null,children:null},T.propTypes={isActive:f.default.bool,multiEditType:f.default.string,hasTrials:f.default.bool,uncertaintyLevel:f.default.oneOf([S.UNCERTAINTY.HIGH,S.UNCERTAINTY.LOW,S.UNCERTAINTY.MEDIUM,"N/A"]),onActiveChange:f.default.func.isRequired,onFilterChange:f.default.func.isRequired,onEdit:f.default.func.isRequired,disabled:f.default.bool,isCohortView:f.default.bool,isShowApplyingEditsDialog:f.default.bool,onCloseDialog:f.default.func,onSubmitDialog:f.default.func,enableMultiedit:f.default.bool,children:f.default.node},t.default=T},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s);a(2288);var d=function(e){var t=e.children,a=e.disabled,n=e.onClick,r=e.size,i=e.type,o=e.label,s=e.fixed,d=e.className,c=(0,u.default)("fpo-button","fpo-button-"+r,"fpo-button-"+i,{"fpo-button-fixed":s},d);return l.default.createElement("button",{className:c,disabled:a,onClick:a?void 0:n},function(){return t?l.default.isValidElement(t)?t:l.default.createElement("span",null,t):l.default.createElement("span",null,o)}())};d.defaultProps={children:null,disabled:!1,fixed:!1,label:"Button label",onClick:null,size:"regular",type:"primary",className:null},d.propTypes={children:o.default.oneOfType([o.default.element,o.default.string]),disabled:o.default.bool,fixed:o.default.bool,label:o.default.string,onClick:o.default.func,size:o.default.oneOf(["small","regular","large"]),type:o.default.oneOf(["primary","secondary","transparent"]),className:o.default.string},t.default=d},function(e,t,a){"use strict";function n(e){var t=e.append("g").style("display","none"),a=t.append("g").classed("point-tooltip",!0).style("display",null).attr("transform","translate(0, 0)");return a.append("polygon").style("fill",f.COLORS.BLACK).attr("points","0,-30 100,-30 100,0 0,0"),a.append("rect").attr("width",90).attr("height",28).attr("x",100).attr("y",-29).style("fill",f.COLORS.WHITE).style("stroke",f.COLORS.BLACK).style("stroke-width",2),a.append("text").attr("text-anchor","middle").style("fill",f.COLORS.WHITE).classed("tooltip-text",!0).attr("transform","translate(50, -10)").text("T/LPFT"),a.append("text").classed("tooltip-value",!0).attr("text-anchor","start").style("fill",f.COLORS.BLACK).style("font-size","16px").attr("transform","translate(105, -10)").text(""),a.append("line").style("stroke-width",2).attr("x1",50).attr("x2",50).attr("y2",30),t}function r(e,t,a,n,r,l,i,o){var s=e.append("g");return s.attr("transform","translate(-180, 4)").style("cursor",a&&"All"!==t.cohortName?"pointer":"default").style("opacity",a?1:.5),s.append("text").style("font-size",18).style("font-weight",500).style("font-family","VoltaModern, sans-serif").text(t.cohortName),n||s.append("line").attr("x2",136).attr("y1",8).attr("y2",8).attr("class",0===r?"cohort-name-underline-bold":"cohort-name-underline-regular").st({stroke:f.COLORS.BLACK,strokeWidth:0===r?"2px":"1px"}),s.append("line").attr("x1",32).attr("x2",40).attr("y1",4).attr("y2",-18).classed("line slash-separator",!0).st({stroke:f.COLORS.MID_GREY,strokeWidth:"1px"}),s.append("text").attr("transform","translate(50)").style("font-size",16).style("font-family","VoltaModern, sans-serif").text(n?t.fromPrevApproved?"Prev.Approved":"Approved":"Global ("+t.countriesLength+")").on("click",function(){a&&"All"!==t.cohortName&&l(i,o,t.cohortId)}),s}function l(e,t,a,n,r,l,i,o,s,u){var d=e.append("g");return d.attr("transform","translate(-180, 4)").style("cursor",a&&"All"!==t.cohortName?"pointer":"default").style("opacity",a?1:.5),u&&d.append("line").at({x1:50,x2:136,y1:8,y2:8}).attr("class",0===r?"cohort-name-underline-bold":"cohort-name-underline-regular").st({stroke:f.COLORS.BLACK,strokeWidth:0===r?"2px":"1px"}),d.append("line").attr("x1",32).attr("x2",40).attr("y1",4).attr("y2",-18).st({stroke:f.COLORS.MID_GREY,strokeWidth:"1px"}).classed("line slash-separator",!0),d.append("text").attr("transform","translate(50)").style("font-size",16).style("font-family","VoltaModern, sans-serif").text(s).on("click",function(){a&&"All"!==t.cohortName&&l(i,o,t.cohortId)}),d}function i(e,t,a,n,r,l,i,o,s,u){var d=!i||o||u?{stroke:f.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6}:{stroke:f.COLORS.GREEN,strokeWidth:"4px",opacity:.2},c=i&&!u?{stroke:f.COLORS.LIGHT_GREEN,strokeWidth:"16px"}:{stroke:f.COLORS.GREY,strokeWidth:"16px"};r&&!o&&e.append("line").at({x1:l(t)}).attr("x2",l(i&&a&&a.isValid()?a:n)).classed("milestones-bar-background",!i||u).classed("milestones-bar-background-approved",i&&!u).st(c);var m=e.append("line").at({x1:l(t)}).attr("x2",l(i&&a&&a.isValid()?a:n)).classed("milestones-bar",!i||o||u).classed("milestones-bar-approved",i&&!o&&!u).st(d);o&&s&&(m.st({strokeDasharray:"4 4"}),e.append("g").attr("transform","translate("+l(t)+")").append("rect").attr("width",l(s)-l(t)).attr("y",-2).attr("height",4).style("fill",f.COLORS.GREY)),i&&s&&e.append("rect").attr("x",l(t)).attr("width",l(s)).attr("y",r&&!o?-8:-2).attr("height",r&&!o?16:4).style("fill","url(#actualPattern1)").attr("opacity",.04),!i&&a&&a.isValid()&&((0,p.drawBackgroundRect)(e,function(){return l(a<n?a:n)},r?-8:-2,function(){return a<n?l(n)-l(a):l(a)-l(n)},r?16:4,function(){return a<n?f.COLORS.GREEN:f.COLORS.RED},1,!0),r||(0,p.appendRangeLabel)(e,function(){return a<=n?"end":"start"},(a>n?"+":"")+a.diff(n,"days")+"d",function(){return a<=n?"translate("+(l(n)-20)+", -14)":"translate("+(l(n)+20)+", -14)"},function(){return a<=n?f.COLORS.GREEN:f.COLORS.RED},!0))}function o(e,t,a,n,r,l,i,o,s,u,d,c,m,h){e.forEach(function(e){switch(e.label){case"FP":if(e.date&&e.date.isValid()&&e.date.format("YYYY-MM-DD")!==n.format("YYYY-MM-DD")&&!r){var v=t.append("g").classed("mark-g",!0).style("opacity",.9).attr("transform","translate("+(a(e.date)-12)+","+-12+")");v.append("defs").append("path").attr("id","a").attr("d","M12 7l5 5-5 5-5-5z"),v.append("g").attr("fill","none").attr("fill-rule","evenodd").append("use").attr("fill",f.COLORS.BLACK).attr("xlink:href","#a"),v.append("line").attr("x1",12).attr("x2",20).attr("y1",4).attr("y2",12).style("stroke-linecap","square").style("stroke",f.COLORS.BLACK).style("stroke-width",2),v.append("line").attr("x1",12).attr("x2",20).attr("y1",20).attr("y2",12).style("stroke-linecap","square").style("stroke",f.COLORS.BLACK).style("stroke-width",2),"All"!==l.cohortName&&v.append("line").attr("class","hover-line").attr("x1",12).attr("x2",12).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.BLACK).style("stroke-width",2).style("display","none"),v.on("mouseover",function(){i(l,e,v)}),v.on("mouseout",function(){o(v)})}if(!r){var _=t.append("g").classed("mark-g",!0).style("opacity",e.date.isSame(n)?1:.3).attr("transform","translate("+a(n)+")");(0,p.drawFppIcon)(_,!0),s&&(0,p.appendTooltipToMilestone)(_,e.color,f.COLORS.WHITE,f.COLORS.BLACK,e.label,!0,!1)}break;case"FSIV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var E=(0,f.appendMilestone)(t,a(e.date),f.COLORS.YELLOW,"FSIV",-105,!0);"All"!==l.cohortName&&E.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.YELLOW).style("stroke-width",2).style("display","none"),E.on("mouseover",function(){i(l,e,E)}),E.on("mouseout",function(){o(E)})}break;case"FPFV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var g=(0,f.appendMilestone)(t,a(e.date),f.COLORS.PURPLE,"FPFV",-105,!0);"All"!==l.cohortName&&g.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.PURPLE).style("stroke-width",2).style("display","none"),g.on("mouseover",function(){i(l,e,g)}),g.on("mouseout",function(){o(g)})}break;case"FPFT":if(!r&&e.date&&e.date.isSameOrAfter(n)){var y=(0,f.appendMilestone)(t,a(e.date),f.COLORS.BLUE,"FPFT",-105,!0);"All"!==l.cohortName&&y.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.BLUE).style("stroke-width",2).style("display","none"),y.on("mouseover",function(){i(l,e,y)}),y.on("mouseout",function(){o(y)})}break;case"LPFV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var S=(0,f.appendMilestone)(t,a(e.date),f.COLORS.PURPLE,"LPFV",-105,!0);"All"!==l.cohortName&&S.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.PURPLE).style("stroke-width",2).style("display","none"),S.on("mouseover",function(){i(l,e,S)}),S.on("mouseout",function(){o(S)})}break;case"P/LPFT":if(!r&&e.date&&e.date.isSameOrAfter(n)){var b=t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(e.date)+",0)");(0,p.drawFilledCircle)(b,function(){return c?f.COLORS.BLACK:e.date.isAfter(u)?f.COLORS.RED:f.COLORS.GREEN},!1),s&&!c&&(0,p.appendTooltipToMilestone)(b,e.color,f.COLORS.WHITE,f.COLORS.BLACK,e.label,!0,!1),"All"!==l.cohortName&&b.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-30).attr("y2",-16).style("stroke",f.COLORS.BLACK).style("stroke-width",2).style("display","none"),b.on("mouseover",function(){i(l,e,b)}),b.on("mouseout",function(){o(b)})}break;case"ACTUAL":if(!r&&e.date&&e.date.isSameOrAfter(n)&&c){var C=t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(e.date)+",0)");h&&C.append("line").attr("y1",12).attr("y2",34).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2"),s?C.append("line").attr("y1",-22).attr("y2",-42).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2):C.append("line").attr("y1",-12).attr("y2",-64).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2"),(0,f.appendMilestone)(C,0,f.COLORS.BLACK,"ACTUAL",-105,!0)}break;case"T/LPFT":default:if(c){if(!r&&m&&m.isSameOrAfter(n)){var O=t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(m)+",0)");O.append("line").attr("y1",4).attr("y2",-64).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2"),h&&O.append("line").attr("y1",6).attr("y2",34).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2")}break}var T=t.append("g").classed("tLpft-group",!0).attr("transform","translate("+a(e.date)+",0)");if(T.append("line").attr("y1",7).attr("y2",-50).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2"),!r&&e.date.isSameOrAfter(n)&&s){if(d&&u&&d.isValid()&&u.isValid()){var R=T.append("g").classed("global-row-tooltip",!0).style("display",null).attr("transform",function(){return d<=u?"translate(-60, -50)":"translate(10, -50)"});R.append("polygon").style("fill",function(){return d<=u?f.COLORS.GREEN:f.COLORS.RED}).attr("points",function(){return d<=u?p.tooltipPathLeft:p.tooltipPathRight}),R.append("rect").attr("width",90).attr("height",28).attr("x",50).attr("y",-39).style("fill",f.COLORS.WHITE).style("stroke",f.COLORS.BLACK).style("stroke-width",2),R.append("text").attr("text-anchor","middle").style("fill",f.COLORS.WHITE).classed("tooltip-text",!0).attr("transform","translate("+(d<=u?20:30)+", 15)").text((d>u?"+":"")+d.diff(u,"days")+"d")}(0,p.drawFilledCircle)(T,f.COLORS.BLACK,!1)}}})}function s(e,t,a,n,r,l,i,o,s,u,d,c,m,h){e.forEach(function(e){switch(e.label){case"FP":if(e.date&&e.date.isValid()&&e.date.format("YYYY-MM-DD")!==n.format("YYYY-MM-DD")&&!r){var s=t.append("g").classed("mark-g",!0).style("opacity",.9).attr("transform","translate("+(a(e.date)-12)+","+-12+")");s.append("defs").append("path").attr("id","a").attr("d","M12 7l5 5-5 5-5-5z"),s.append("g").attr("fill","none").attr("fill-rule","evenodd").append("use").attr("fill",f.COLORS.BLACK).attr("xlink:href","#a"),s.append("line").attr("x1",12).attr("x2",20).attr("y1",4).attr("y2",12).style("stroke-linecap","square").style("stroke",f.COLORS.BLACK).style("stroke-width",2),s.append("line").attr("x1",12).attr("x2",20).attr("y1",20).attr("y2",12).style("stroke-linecap","square").style("stroke",f.COLORS.BLACK).style("stroke-width",2),"All"!==l.cohortName&&s.append("line").attr("class","hover-line").attr("x1",12).attr("x2",12).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.BLACK).style("stroke-width",2).style("display","none"),s.on("mouseover",function(){i(l,e,s)}),s.on("mouseout",function(){o(s)})}if(!r){var u=t.append("g").classed("mark-g",!0).style("opacity",e.date.isSame(n)?1:.3).attr("transform","translate("+a(n)+")");(0,p.drawFppIcon)(u,!0)}break;case"FSIV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var d=(0,f.appendMilestone)(t,a(e.date),f.COLORS.YELLOW,"FSIV",-105,!0);"All"!==l.cohortName&&d.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.YELLOW).style("stroke-width",2).style("display","none"),d.on("mouseover",function(){i(l,e,d)}),d.on("mouseout",function(){o(d)})}break;case"FPFV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var v=(0,f.appendMilestone)(t,a(e.date),f.COLORS.PURPLE,"FPFV",-105,!0);"All"!==l.cohortName&&v.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.PURPLE).style("stroke-width",2).style("display","none"),v.on("mouseover",function(){i(l,e,v)}),v.on("mouseout",function(){o(v)})}break;case"FPFT":if(!r&&e.date&&e.date.isSameOrAfter(n)){var _=(0,f.appendMilestone)(t,a(e.date),f.COLORS.BLUE,"FPFT",-105,!0);"All"!==l.cohortName&&_.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.BLUE).style("stroke-width",2).style("display","none"),_.on("mouseover",function(){i(l,e,_)}),_.on("mouseout",function(){o(_)})}break;case"LPFV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var E=(0,f.appendMilestone)(t,a(e.date),f.COLORS.PURPLE,"LPFV",-105,!0);"All"!==l.cohortName&&E.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.PURPLE).style("stroke-width",2).style("display","none"),E.on("mouseover",function(){i(l,e,E)}),E.on("mouseout",function(){o(E)})}break;case"P/LPFT":!r&&c&&c.isSameOrAfter(n)&&t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(c)+",0)").append("line").attr("y1",h?44:4).attr("y2",m?-106:-34).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2");break;case"ACTUAL":!r&&e.date&&e.date.isSameOrAfter(n)&&t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(e.date)+",0)").append("line").attr("y1",h?44:4).attr("y2",m?-106:-32).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2")}})}function u(e,t,a,n,r,l,i){r&&e.append("line").at({x1:l(i||t)}).attr("x2",l(a<n?a:n)).classed("milestones-bar-background",!0).st({stroke:f.COLORS.GREY,strokeWidth:"16px"}),e.append("line").at({x1:l(i||t)}).attr("x2",l(a<n?a:n)).classed("milestones-bar",!0).st({stroke:f.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6}),(0,p.drawBackgroundRect)(e,function(){return l(a<n?a:n)},-2,function(){return a<n?l(n)-l(a):l(a)-l(n)},4,function(){return a<n?f.COLORS.GREEN:f.COLORS.RED},1,!0),(0,p.appendRangeLabel)(e,function(){return a<=n?"end":"start"},(a>n?"+":"")+a.diff(n,"days")+"d",function(){return a<=n?"translate("+(l(n)-20)+", -14)":"translate("+(l(n)+20)+", -14)"},function(){return a<=n?f.COLORS.GREEN:f.COLORS.RED},!0)}function d(e,t,a,n,r,l,i,o,s,u,d,c,m,h){e.forEach(function(e){switch(e.label){case"FP":if(e.date&&e.date.format("YYYY-MM-DD")!==n.format("YYYY-MM-DD")&&!r){var u=e.date.isBefore(h)?.3:1,d=t.append("g").classed("mark-g",!0).style("opacity",u).attr("transform","translate("+(a(e.date)-12)+","+-12+")");d.append("defs").append("path").attr("id","a").attr("d","M12 7l5 5-5 5-5-5z"),d.append("g").attr("fill","none").attr("fill-rule","evenodd").append("use").attr("fill",f.COLORS.BLACK).attr("xlink:href","#a"),d.append("line").attr("x1",12).attr("x2",20).attr("y1",4).attr("y2",12).style("stroke-linecap","square").style("stroke",f.COLORS.BLACK).style("stroke-width",2),d.append("line").attr("x1",12).attr("x2",20).attr("y1",20).attr("y2",12).style("stroke-linecap","square").style("stroke",f.COLORS.BLACK).style("stroke-width",2),"All"!==l.cohortName&&d.append("line").attr("class","hover-line").attr("x1",12).attr("x2",12).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.BLACK).style("stroke-width",2).style("display","none"),d.on("mouseover",function(){i(l,e,d)}),d.on("mouseout",function(){o(d)})}if(!r){var v=t.append("g").classed("mark-g",!0).style("opacity",e.date.isSame(n)?1:.3).attr("transform","translate("+a(n)+")");(0,p.drawFppIcon)(v,!0)}break;case"FSIV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var _=e.date.isBefore(h)?.3:1,E=(0,f.appendMilestone)(t,a(e.date),f.COLORS.YELLOW,"FSIV",-105,!0,_);"All"!==l.cohortName&&E.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.YELLOW).style("stroke-width",2).style("display","none"),E.on("mouseover",function(){i(l,e,E)}),E.on("mouseout",function(){o(E)})}break;case"FPFV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var g=e.date.isBefore(h)?.3:1,y=(0,f.appendMilestone)(t,a(e.date),f.COLORS.PURPLE,"FPFV",-105,!0,g);"All"!==l.cohortName&&y.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.PURPLE).style("stroke-width",2).style("display","none"),y.on("mouseover",function(){i(l,e,y)}),y.on("mouseout",function(){o(y)})}break;case"FPFT":if(!r&&e.date&&e.date.isSameOrAfter(n)){var S=e.date.isBefore(h)?.3:1,b=(0,f.appendMilestone)(t,a(e.date),f.COLORS.BLUE,"FPFT",-105,!0,S);"All"!==l.cohortName&&b.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.BLUE).style("stroke-width",2).style("display","none"),b.on("mouseover",function(){i(l,e,b)}),b.on("mouseout",function(){o(b)})}break;case"LPFV":if(!r&&e.date&&e.date.isSameOrAfter(n)){var C=e.date.isBefore(h)?.3:1,O=(0,f.appendMilestone)(t,a(e.date),f.COLORS.PURPLE,"LPFV",-105,!0,C);"All"!==l.cohortName&&O.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-18).attr("y2",-4).style("stroke",f.COLORS.PURPLE).style("stroke-width",2).style("display","none"),O.on("mouseover",function(){i(l,e,O)}),O.on("mouseout",function(){o(O)})}break;case"A/LPFT":if(!r&&e.date&&e.date.isSameOrAfter(n)){var T=t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(e.date)+",0)");(0,p.drawFilledCircle)(T,function(){return e.date.isAfter(m)?f.COLORS.RED:f.COLORS.GREEN},!1),s&&!c&&(0,p.appendTooltipToMilestone)(T,e.color,f.COLORS.WHITE,f.COLORS.BLACK,e.label,!0,!1),"All"!==l.cohortName&&T.append("line").attr("class","hover-line").attr("x1",0).attr("x2",0).attr("y1",-30).attr("y2",-16).style("stroke",f.COLORS.BLACK).style("stroke-width",2).style("display","none"),T.on("mouseover",function(){i(l,e,T)}),T.on("mouseout",function(){o(T)})}break;case"ACTUAL":if(!r&&e.date&&e.date.isSameOrAfter(n)&&c){var R=t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(e.date)+",0)");s?R.append("line").attr("y1",-22).attr("y2",-42).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2):R.append("line").attr("y1",-12).attr("y2",-64).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2"),(0,f.appendMilestone)(R,0,f.COLORS.BLACK,"ACTUAL",-105,!0)}break;default:!r&&m&&m.isSameOrAfter(n)&&t.append("g").classed("pLpft-group",!0).attr("transform","translate("+a(m)+",0)").append("line").attr("y1",4).attr("y2",-64).attr("stroke",f.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2")}})}Object.defineProperty(t,"__esModule",{value:!0}),t.drawTooltip=n,t.drawLabelGroup=r,t.drawSecondaryLabelGroup=l,t.drawMilestonesBar=i,t.drawMilestones=o,t.drawActualMilestones=s,t.drawAdjustedMilestonesBar=u,t.drawAdjustedMilestones=d;var c=a(235),f=(function(e){e&&e.__esModule}(c),a(125)),p=a(260)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(25),p=a(110),m=a(165),h=a(235),v=(n(h),a(10)),_=n(v),E=a(123),g=n(E),y=a(125),S=a(840);a(483),a(2290);var b=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={data:e.data,scenario:e.scenario,studyId:e.studyId},a.renderChart=a.renderChart.bind(a),a.handleResize=a.handleResize.bind(a),a.debounced=(0,g.default)(a.renderChart,200),a}return i(t,e),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.renderChart()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({data:e.data,scenario:e.scenario,studyId:e.studyId},function(){t.renderChart()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){this.debounced()}},{key:"renderChart",value:function(){function e(e,t,a){N.moveToFront(),N.style("display",null),N.attr("transform","translate("+(C(t.date)-50)+",10)"),N.select("rect").style("stroke",t.color),N.select("line").style("stroke",t.color),N.select("polygon").style("fill",t.color),N.select(".tooltip-text").text(e.cohortName+" - "+t.label),N.select(".tooltip-value").text(t.date.format("DD MMM YY")),a&&a.select(".hover-line").style("display",null)}function t(e){N.style("display","none"),e&&e.select(".hover-line").style("display","none")}var a=this;(0,f.select)("#svg_wrapper_cohorts-milestones_chart").select(".svg-container").remove();var n=this.state,r=n.data,l=n.scenario,i=n.studyId,o=this.props.isTracking,s=this.props.isAdjusted,u=this.container,d={top:30,right:160,bottom:70,left:180},c=50;o&&(c+=50),s&&(c+=50);var h=u.getBoundingClientRect().width-d.left-d.right,v=170+r.length*c-d.top-d.bottom,E=(0,f.select)("#svg_wrapper_cohorts-milestones_chart"),g=E.append("div").classed("svg-container",!0).append("svg").attr("width",h+d.left+d.right).attr("height",v+d.top+d.bottom);g.append("rect").at({x:-20,y:-20,width:h+d.left+d.right+40,height:v+d.top+d.bottom+40,fill:y.COLORS.WHITE}),(0,y.injectPatternDefs)(g,"actualPattern1");var b=g.append("g").attr("transform","translate("+d.left+","+d.top+")"),C=(0,p.scaleTime)().rangeRound([0,h]),O=void 0;r.forEach(function(e){O?e.maxDate.isAfter(O)&&(O=e.maxDate):O=e.maxDate});var T=r[0].minDate,R=r[0].milestones.find(function(e){return"T/LPFT"===e.label}).date,w=r[0].actualDate,A=r[0].milestones.find(function(e){return"P/LPFT"===e.label}).date,I=o?A:R;C.domain([T,O]);var N=(0,S.drawTooltip)(b),D=70;r.forEach(function(n,u){var d=0===u,f=n.isEmptyGeneric,p=n.isEmptyActual,m=n.isEmptyAdjusted,_=n.milestones,E=_.find(function(e){return"FP"===e.label}).date,g=_.find(function(e){return"P/LPFT"===e.label}).date,O=_.find(function(e){return"T/LPFT"===e.label}).date,R=n.actual_milestones,I=n.adjusted_milestones,N=E&&E.isValid(),P=n.fromPrevApproved;0!==u&&(D+=c);var L=b.append("g").attr("id","cohort_"+n.cohortId);L.attr("transform","translate(0, "+D+")"),(0,S.drawLabelGroup)(L,n,N,o,u,a.props.onCohortClick,i,l.id);var M=L.append("g").attr("transform","translate(0, 0)");if(r[0].isEmpty&&(b.append("rect").attr("x",15).attr("y",15).attr("width",h-30).attr("height",v-30).style("fill",y.COLORS.GREY),b.append("text").attr("x",h/2).attr("y",v/2).attr("dy",15).attr("text-anchor","middle").text("There is not enough data to build a chart")),!f&&E.isValid()&&(0,S.drawMilestonesBar)(M,E,g,O,d,C,o,!1,w,P),(0,S.drawMilestones)(_,M,C,T,f,n,e,t,d,O,g,o,A,p),o){var x=b.append("g").attr("id","actual_cohort_"+n.cohortId);x.attr("transform","translate(0, "+(D+40)+")"),(0,S.drawSecondaryLabelGroup)(x,n,N,o,u,a.props.onCohortClick,i,l.id,"Actuals",!s);var k=x.append("g").attr("transform","translate(0, 0)");if(!p&&E.isValid()&&(0,S.drawMilestonesBar)(k,E,A,O,d,C,o,!0,w),(0,S.drawActualMilestones)(R,k,C,T,p,n,e,t,d,O,g,A,f,m&&s),s){var j=b.append("g").attr("id","adjusted_cohort_"+n.cohortId);j.attr("transform","translate(0, "+(D+80)+")"),(0,S.drawSecondaryLabelGroup)(j,n,N,o,u,a.props.onCohortClick,i,l.id,"Adjusted",!0);var F=j.append("g").attr("transform","translate(0, 0)");if(!m&&E.isValid()){var U=I.find(function(e){return"A/LPFT"===e.label}).date;U&&(0,S.drawAdjustedMilestonesBar)(F,E,U,A,d,C,w),(0,S.drawAdjustedMilestones)(I,F,C,T,m,n,e,t,d,O,g,o,A,w)}}}});var P=(0,y.getMonthsTickValues)(T,O,10);C.domain([T,O]);var L=(0,m.axisBottom)().scale(C).tickValues(P).tickSizeOuter(0);b.append("rect").attr("width",C(O)).attr("height","28px").attr("y",v+15).style("fill",y.COLORS.GREY);var M=b.append("g").attr("transform","translate(0, "+v+")").attr("class","axis axis--x").call(L);M.selectAll("text").attr("class","tick").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif",fill:y.COLORS.BLACK,shapeRendering:"crispEdges",stroke:"none"}).style("text-anchor","middle").text(function(e){return(0,_.default)(e).format("MMM YY")}).attr("transform","translate(0, 50)"),M.selectAll("line").attr("class","tick-line").attr("y2","12").attr("transform","translate(0.5, 30)").st({fill:"none",stroke:y.COLORS.BLACK,shapeRendering:"crispEdges",strokeWidth:"1px"}),M.selectAll("path").st({fill:"none",stroke:y.COLORS.BLACK,opacity:0,shapeRendering:"crispEdges"});var x=M.append("g").attr("transform","translate(0, 15)");x.append("line").style("stroke",y.COLORS.BLACK).style("stroke-width",2).attr("y1",-32),x.append("polygon").style("fill",y.COLORS.WHITE).style("stroke",y.COLORS.BLACK).attr("points","0,0, 15,0, 7.5,7.5").attr("transform","translate(-7.5,28)"),x.append("polygon").style("stroke",y.COLORS.BLACK).style("fill",y.COLORS.WHITE).attr("points","0,0, 15,0, 7.5,-7.5").attr("transform","translate(-7.5)"),x.append("rect").attr("x",-30).attr("width",64).attr("height",28).style("stroke",y.COLORS.BLACK).style("fill",y.COLORS.WHITE),x.append("text").attr("class","date").attr("transform","translate(0,20)").attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).style("fill",y.COLORS.BLACK).text(T.format("DD MMM"));var k=M.append("g").attr("transform","translate("+C(I)+", 15)");k.append("line").style("stroke",y.COLORS.BLACK).style("stroke-width",2).style("stroke-dasharray","6 2").attr("y2",-78),k.append("polygon").style("fill",y.COLORS.BLACK).attr("points","0,0, 15,0, 7.5,7.5").attr("transform","translate(-7.5,28)"),k.append("polygon").style("fill",y.COLORS.BLACK).attr("points","0,0, 15,0, 7.5,-7.5").attr("transform","translate(-7.5)"),k.append("rect").attr("x",-30).attr("width",64).attr("height",28).style("fill",y.COLORS.BLACK),k.append("text").attr("class","date").attr("transform","translate(0,20)").attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).style("fill",y.COLORS.WHITE).text(I.format("DD MMM"));var j=b.append("g").attr("transform","translate("+C(I)+",30)"),F=j.append("g").classed("point-tooltip",!0).style("display",null).attr("transform","translate(-1, -10)");if(F.append("polygon").style("fill",y.COLORS.BLACK).attr("points","0,-40 60,-40 60,-10 10,-10 0,0 0,-40"),F.append("text").attr("text-anchor","middle").style("fill",y.COLORS.WHITE).style("font-family","VoltaModern, sans-serif").classed("tooltip-text",!0).attr("transform","translate(30, -20)").text(o?"P/LPFT":"T/LPFT"),F.append("text").attr("text-anchor","start").style("fill",y.COLORS.BLACK).style("font-size","16px").style("font-family","VoltaModern, sans-serif").attr("transform","translate(70, -20)").text(I.format("DD MMM YY")),o&&w){var U=M.append("g").attr("transform","translate("+C(w)+", 15)");U.append("line").style("stroke",y.COLORS.BLACK).style("stroke-width",2).style("stroke-dasharray","6 2").attr("y2",-78),U.append("polygon").style("fill",y.COLORS.BLACK).attr("points","0,0, 15,0, 7.5,7.5").attr("transform","translate(-7.5,28)"),U.append("polygon").style("fill",y.COLORS.BLACK).attr("points","0,0, 15,0, 7.5,-7.5").attr("transform","translate(-7.5)"),U.append("rect").attr("x",-30).attr("width",64).attr("height",28).style("fill",y.COLORS.BLACK),U.append("text").attr("class","date").attr("transform","translate(0,20)").attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).style("fill",y.COLORS.WHITE).text(w.format("DD MMM"))}}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{ref:function(t){e.container=t},className:"svg-wrapper",id:"svg_wrapper_cohorts-milestones_chart"})}}]),t}(u.default.Component);b.defaultProps={isTracking:!1,isAdjusted:!1},b.propTypes={data:c.default.array.isRequired,scenario:c.default.object.isRequired,onCohortClick:c.default.func.isRequired,studyId:c.default.number.isRequired,isTracking:c.default.bool,isAdjusted:c.default.bool},t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(841),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),m=a(59),h=a(6);a(2291);var v=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={cohorts:e.cohorts,scrollPosition:0,hasLeftOffset:!1,hasRightOffset:!1},a.onScrollStart=a.onScrollStart.bind(a),a.onScrollLeft=a.onScrollLeft.bind(a),a.onScrollRight=a.onScrollRight.bind(a),a.alignScroll=a.alignScroll.bind(a),a}return i(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this.hasLeftOffset(),t=this.hasRightOffset();this.state.hasLeftOffset===e&&this.state.hasRightOffset===t||this.setState({hasLeftOffset:e,hasRightOffset:t}),this.alignScroll()}},{key:"componentWillReceiveProps",value:function(e){this.setState({cohorts:e.cohorts,scrollPosition:this.state.scrollPosition})}},{key:"componentDidUpdate",value:function(e){var t=this.hasLeftOffset(),a=this.hasRightOffset();this.state.hasLeftOffset===t&&this.state.hasRightOffset===a||this.setState({hasLeftOffset:t,hasRightOffset:a}),this.props.active!==e.active&&this.alignScroll()}},{key:"onScrollStart",value:function(){this.setState({scrollPosition:0})}},{key:"onScrollLeft",value:function(){var e=this.state.scrollPosition+this.getScrollStep();this.setState({scrollPosition:e>0?0:e})}},{key:"onScrollRight",value:function(){var e=this.state.scrollPosition-this.getScrollStep(),t=this.scrollableEl.clientWidth-this.scrollableInnerEl.clientWidth;this.setState({scrollPosition:e<t?t-138:e})}},{key:"getScrollStep",value:function(){return.85*this.scrollableEl.clientWidth}},{key:"hasLeftOffset",value:function(){return!!this.scrollableEl&&0!==this.state.scrollPosition}},{key:"hasRightOffset",value:function(){if(!this.scrollableEl)return!1;var e=this.scrollableEl.clientWidth,t=this.scrollableInnerEl.clientWidth,a=e-t;return t>e&&this.state.scrollPosition>a}},{key:"alignScroll",value:function(){if(this.scrollableEl&&!(this.scrollableInnerEl.clientWidth<=this.scrollableEl.clientWidth)&&this.props.active){var e=this.scrollableInnerEl.getBoundingClientRect(),t=this.scrollableInnerEl.querySelector(".cohort-filter__cohorts__item--active").getBoundingClientRect(),a=-1*parseInt(t.left-e.left,10);if(this.state.scrollPosition<a)this.setState({scrollPosition:a});else{var n=t.left+t.width+this.state.scrollPosition,r=n-e.left;if(r>this.scrollableEl.clientWidth){var l=this.scrollableEl.clientWidth-r;this.setState({scrollPosition:this.state.scrollPosition+l+-80})}}}}},{key:"renderTabs",value:function(){var e=this,t=this.props,a=t.studyId,n=t.scenarioId,r=t.active,l=this.state.cohorts;if(0===l.length)return null;var i=u.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12"},u.default.createElement("g",{fill:"none",fillRule:"evenodd"},u.default.createElement("path",{fill:"#FFF",d:"M2 0v12H0V0zM12 1.4L10.6 0l-6 6 6 6 1.4-1.4L7.4 6z"})));return u.default.createElement("div",{className:"cohort-filter__cohorts"},u.default.createElement("div",{className:(0,p.default)("cohort-filter__scrollable-nav",{"cohort-filter__hidden":!(this.state.hasLeftOffset||this.state.hasRightOffset)})},u.default.createElement("div",{className:(0,p.default)("cohort-filter__scrollable-nav-start",{"cohort-filter__hidden":!(this.state.hasLeftOffset&&!this.state.hasRightOffset)}),onClick:this.onScrollStart},i),u.default.createElement("div",{className:(0,p.default)("cohort-filter__scrollable-nav-left",{"cohort-filter__hidden":!this.state.hasLeftOffset}),onClick:this.onScrollLeft},h.Icons.CHEVRON_RIGTH),u.default.createElement("div",{className:(0,p.default)("cohort-filter__scrollable-nav-right",{"cohort-filter__hidden":!this.state.hasRightOffset}),onClick:this.onScrollRight},h.Icons.CHEVRON_RIGTH)),u.default.createElement("div",{className:"cohort-filter__cohorts__scrollable",ref:function(t){e.scrollableEl=t}},u.default.createElement("div",{className:"cohort-filter__cohorts__scrollable__inner",style:{transform:"translateX("+this.state.scrollPosition+"px)"},ref:function(t){e.scrollableInnerEl=t}},l.map(function(e,t){return u.default.createElement("div",{key:e.id,title:e.name,className:(0,p.default)("cohort-filter__cohorts__item",{"cohort-filter__cohorts__item--active":e.id===+r})},u.default.createElement("div",{className:(0,p.default)("link__container",{disabled:!e.fp||!e.fp.isValid()})},u.default.createElement(m.Link,{to:"/studies/"+a+"/scenarios/"+n+"/cohorts/"+e.id,title:e.name},u.default.createElement("div",{className:"link__wrapper"},u.default.createElement("b",null,"C",t+1)," - ",e.name.length>30?e.name.substr(0,30)+"...":e.name))))}))))}},{key:"render",value:function(){var e=this.props,t=e.cohorts,a=e.studyId,n=e.scenarioId,r=e.active;return u.default.createElement("div",{className:"cohort-filter"},u.default.createElement("div",{className:(0,p.default)("cohorts-filter__all-cohorts--wrapper",{active:!r})},u.default.createElement("div",{className:"cohorts-tabset__cohorts-icon"},h.Icons.COHORTS),u.default.createElement("div",{className:(0,p.default)("cohorts-tabset__cohort_all","h3","cohorts-tabset__cohort")},u.default.createElement(m.Link,{to:"/studies/"+a+"/scenarios/"+n+"/cohorts"},"All Cohorts (",t.length,")"))),this.renderTabs())}}]),t}(s.Component);v.defaultProps={cohorts:[],active:void 0},v.propTypes={cohorts:c.default.arrayOf(c.default.shape({id:c.default.number.isRequired,name:c.default.string.isRequired})),studyId:c.default.string.isRequired,scenarioId:c.default.string.isRequired,active:c.default.oneOfType([c.default.number,c.default.string])},t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(843),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(69),c=n(d);a(2292);var f=a(215),p=n(f),m=function(e){var t=e.activeFilter,a=e.onClickHandler,n=e.onRegionSelect,r=e.onCountrySelect,i=e.countries,o=e.regions,s=function(e){return l.default.createElement("div",{key:e,className:(0,u.default)("filter-item",{active:t===e}),onClick:function(){return a(e)}},e)},f=Object.keys(p.default).reduce(function(e,t){return t.includes("LPFT")?e.lpftItems.push(s(p.default[t])):e.visualizationItems.push(s(p.default[t])),e},{lpftItems:[],visualizationItems:[]}),m=f.lpftItems,h=f.visualizationItems;return l.default.createElement("div",{className:"comparator-filters"},l.default.createElement("div",{className:"column left"},l.default.createElement("div",{className:"lpft-block block"},m),l.default.createElement("div",{className:"rates-block block"},h)),l.default.createElement("div",{className:"column right"},l.default.createElement("div",{className:"countries-dropdown-block block"},l.default.createElement("div",{className:"filter-item",style:{width:"125px",display:"flex",flexDirection:"column",marginRight:"12px"}},l.default.createElement(c.default,{narrow:!0,onOptionSelect:n},o.map(function(e){return l.default.createElement(d.DropdownOption,{key:e.value,label:e.label,value:e.value,selected:e.selected})}))),l.default.createElement("div",{className:"filter-item",style:{width:"225px",display:"flex",flexDirection:"column"}},l.default.createElement(d.DropdownSelectFilterable,{narrow:!0,placeholder:"Country",onOptionSelect:r},i.map(function(e){return l.default.createElement(d.DropdownOption,{key:e.value,label:e.label,value:e.value,selected:e.selected})}))))))};m.defaultProps={activeFilter:p.default.LPFT_ALL},m.propTypes={activeFilter:o.default.oneOf(Object.values(p.default)),onClickHandler:o.default.func.isRequired,onRegionSelect:o.default.func.isRequired,onCountrySelect:o.default.func.isRequired,countries:o.default.array.isRequired,regions:o.default.array.isRequired},t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(845),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){switch(e){case _.default.START_UP:return"STARTUP";case _.default.SCREENING:return"SCREENING";case _.default.RANDOMISATION:return"RANDOMISATION";case _.default.LPFT_ALL:case _.default.LPFT_EARLY:case _.default.LPFT_LATE:default:return"LPFT"}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(459),d=n(u),c=a(496),f=n(c),p=a(22),m=a(938),h=n(m),v=a(215),_=n(v),E=a(260),g=a(221);a(791);var y=function(e){var t=e.scenario,a=e.isTitle,n=e.activeFilter,l=e.scenarioNumber,o=e.minDate,s=e.maxDate,u=e.srRrViewType,d=t.fullData.map(function(e){var d=void 0,c=(0,g.getPredictedDate)(e,!1);if(e.fpp_fpfv&&c){var p=t.fp,m=e.fpfv,v=m.clone().add(t.fpfv_fpft,"w"),_=m.clone().add(e.fpfv_lpfv,"d"),y=c,S=t.end_date;d={emptyRow:!1,regionId:e.region_id,milestones:[{label:"FP",date:p,iconType:"CIRCLE",color:E.COLORS.BLACK},{label:"FPFV",date:m,iconType:"DIAMOND",color:E.COLORS.PURPLE},{label:"FPFT",date:v,iconType:"DIAMOND",color:E.COLORS.BLUE},{label:"LPFV",date:_,iconType:"DIAMOND",color:E.COLORS.PURPLE},{label:"P/LPFT",date:y,iconType:"CIRCLE_FILLED",color:E.COLORS.BLACK},{label:"T/LPFT",date:S,iconType:"CIRCLE_FILLED",color:E.COLORS.BLACK}],activeRange:r(n),minDate:o,maxDate:s}}else d={emptyRow:!0,milestones:[{label:"T/LPFT",date:t.end_date,iconType:"CIRCLE_FILLED",color:E.COLORS.BLACK}],activeRange:r(n),minDate:o,maxDate:s};return i.default.createElement(f.default,{key:"compare-milestones-view-row_"+t.id+"_"+e.location+"_"+(e.region?e.region:e.type),isTitle:a,dataRow:e,graphElement:function(){return i.default.createElement(h.default,{first:1===l,data:d,type:e.isRegionCountry?"region":e.type,scenarioId:t.id,emptyRow:d.emptyRow,location:e.location})}(),scenarioNumber:l,activeFilter:n,scenarioEndDate:t.end_date,srRrViewType:u})});return i.default.createElement("div",{className:"compare-milestones-view-container"},i.default.createElement(p.Grid,null,d))};y.defaultProps={isTitle:!1,activeFilter:_.default.LPFT_ALL,srRrViewType:""},y.propTypes={scenario:s.default.object.isRequired,isTitle:s.default.bool,activeFilter:s.default.string,scenarioNumber:s.default.number.isRequired,minDate:d.default.momentObj.isRequired,maxDate:d.default.momentObj.isRequired,srRrViewType:s.default.string},t.default=y},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CompareMilestonesViewRow=void 0;var r=a(847),l=n(r),i=a(496),o=n(i);t.CompareMilestonesViewRow=o.default,t.default=l.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(11),u=n(s),d=a(22),c=a(1073),f=n(c),p=a(497),m=n(p);a(2293);var h=function(e){var t=e.scenarios,a=t.map(function(e,t){var a=e.fullData.find(function(e){return"ROLLUP"===e.type.toUpperCase()}),n=(0,u.default)(a,"overallocatedData",null),r=e.isImpact?"impact/"+e.study_id:e.id;return l.default.createElement(d.Col,{width:3,key:"compare-widget_"+e.id},l.default.createElement(f.default,{serial:t+1,target:e.end_date,predicted:n?n.lpft:(0,u.default)(a,"lpft",null),title:e.name,href:"/studies/"+e.study_id+"/scenarios/"+r}))}),n=a.reduce(function(e,t,a){return e.push(l.default.createElement(d.Col,{key:"compare-widget-icon_"+(a+1),width:1,style:{position:"relative"}},l.default.createElement(m.default,{scenarioNumber:a+1}))),e.push(t),e},[]);return l.default.createElement("div",{className:"compare-scenario-header"},l.default.createElement(d.Grid,null,l.default.createElement(d.Row,{style:{height:"88px",padding:"16px 0"}},n)))};h.propTypes={scenarios:o.default.array.isRequired},h.defaultProps={children:null,className:""},t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(849),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(6);a(2294);var u=function(e){var t=e.scenarioNumber;return l.default.createElement("div",{className:"compare-widget-icon-container"},l.default.createElement("span",{className:"compare-scenario-widget__separator"},l.default.createElement("svg",{height:"56px",width:"12px",viewBox:"0 0 12 56"},l.default.createElement("g",{stroke:"black"},l.default.createElement("line",{x1:"12",y1:"0",x2:"0",y2:"56",strokeWidth:"1"})))),l.default.createElement("div",{style:{marginLeft:"11px"}},l.default.createElement("span",{className:"h2 font-bold"},"#0"+t),l.default.createElement("span",{className:"compare-scenario-widget__details-icon"},s.Icons.DETAILS)))};u.propTypes={scenarioNumber:o.default.number.isRequired},t.default=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(8),o=a(2),s=n(o),u=a(1),d=n(u),c=a(348);a(792);var f=function(e){var t=e.isShow,a=e.page,n=e.pageList,i=e.popup,o=e.setHelpPage,u=e.toggleHelp;(0,r.useEffect)(function(){return function(){u(!1)}},[u]);var d=(0,r.useCallback)(function(){o(a),u(!t)},[t,a,o,u]);return n.includes(a)?l.default.createElement("button",{className:(0,s.default)("help-button",{"help-button--popup":i}),onClick:d},l.default.createElement("span",null,l.default.createElement("span",null,"?"))):null};f.defaultProps={popup:!1},f.propTypes={isShow:d.default.bool.isRequired,page:d.default.string.isRequired,popup:d.default.bool,setHelpPage:d.default.func.isRequired,toggleHelp:d.default.func.isRequired,pageList:d.default.array.isRequired};var p=function(e){return{isShow:e.contextHelp.isShow,pageList:e.contextHelp.pageList}};t.default=(0,i.connect)(p,{setHelpPage:c.setContextHelpPage,toggleHelp:c.toggleContextHelp})(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=a(0),i=n(l),o=a(8),s=a(1),u=n(s),d=a(2),c=n(d),f=a(85),p=n(f),m=a(6),h=a(44),v=a(348),_=a(45),E=a(101),g=n(E);a(792);var y=function(e){var t=e.auth,a=e.isShow,n=e.pageName,o=e.toggleHelp,s=(0,l.useState)(""),u=r(s,2),d=u[0],f=u[1],v=(0,l.useState)(!1),E=r(v,2),y=E[0],S=E[1];return(0,l.useEffect)(function(){var e=new AbortController;if(S(!0),n){var a=e.signal,r=t&&t.user&&t.user.id;(0,h.fetchApiNative)(_.CONTEXT_HELP_DATA+"/"+n,"GET",null,r,{signal:a}).then(function(e){f(e.value),S(!1)})}return function(){e.abort()}},[n,t]),i.default.createElement(i.default.Fragment,null,i.default.createElement("aside",{className:(0,c.default)("help__box",{open:a})},i.default.createElement("header",null,i.default.createElement("button",{className:"help__close",onClick:function(){o(!1)}},m.Icons.CROSS)),i.default.createElement(p.default,{className:(0,c.default)("help__wrapper",{"help__wrapper--loading":y}),contentClassName:"help__content",horizontal:!1,stopScrollPropagation:!0},i.default.createElement("div",{className:"help__inner-content",dangerouslySetInnerHTML:{__html:d}})),y&&a?i.default.createElement(g.default,null):null))};y.propTypes={auth:u.default.object.isRequired,isShow:u.default.bool.isRequired,pageName:u.default.string.isRequired,toggleHelp:u.default.func.isRequired};var S=function(e){return{auth:e.auth,isShow:e.contextHelp.isShow,pageName:e.contextHelp.page}};t.default=(0,o.connect)(S,{toggleHelp:v.toggleContextHelp})(y)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0}),t.ContextMenuItem=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),o=n(i),s=a(1),u=n(s),d=a(2),c=n(d);a(2295);var f=function(e){var t=e.label,a=e.onClick,n=e.icon,i=e.disabled,s=r(e,["label","onClick","icon","disabled"]);return o.default.createElement("div",{className:(0,c.default)("context-menu__item",{"context-menu__item_disabled":i})},n&&o.default.createElement("span",{className:"context-menu-icon"},n),o.default.createElement("span",l({},s,{onClick:function(e){e&&e.stopPropagation(),a&&a(e)}}),t))};f.propTypes={label:u.default.string.isRequired,onClick:u.default.func,icon:u.default.element,disabled:u.default.bool},f.defaultProps={onClick:null,icon:null,disabled:!1};var p=function(e){var t=e.children;return o.default.createElement("div",{className:"context-menu",onClick:function(e){return e.stopPropagation()}},t)};p.propTypes={children:u.default.node.isRequired},t.default=p,t.ContextMenuItem=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["",""],["",""]),l=a(0),i=n(l),o=a(1),s=n(o);a(2296);var u=function(e){return 1==+(arguments.length<=1?void 0:arguments[1])?"study"+e[1]:"studies"+e[1]},d=function(e){var t=e.count;return i.default.createElement("div",{className:"counter-selected"},i.default.createElement("span",null,i.default.createElement("b",null,t)," ",u(r,t)," selected"),i.default.createElement("div",{className:"keyline-separator"}))};d.propTypes={count:s.default.number},d.defaultProps={count:null},t.default=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s);a(2297);var d=function(e){var t=e.canViewSites,a=e.isEditable,n=e.onExcludeCountry,r=e.onUnlockCountry,i=e.onCalculationToggle,o=e.onViewSites,s=e.hideUnlock,d=e.onCopy,c=e.onPaste,f=e.clipboardEmpty,p=e.isAdjusted,m=e.hideIgnore,h=e.isIgnored;return l.default.createElement("div",{className:"region-context-menu"},l.default.createElement("div",{className:"region-context-menu__menu-mode"},a&&l.default.createElement("div",null,l.default.createElement("div",{className:"region-context-menu__remove region-context-menu__item"},l.default.createElement("span",{"data-ignore-click-outside":"true",onClick:n},"Remove country")),!s&&r&&l.default.createElement("div",{className:"region-context-menu__add region-context-menu__item"},l.default.createElement("span",{"data-ignore-click-outside":"true",onClick:r},"Remove user constraints"))),!m&&l.default.createElement("div",{className:"region-context-menu__add region-context-menu__item"},l.default.createElement("span",{"data-ignore-click-outside":"true",onClick:i},h?"Enable":"Disable"," country")),t&&l.default.createElement("div",{className:"region-context-menu__add region-context-menu__item"},l.default.createElement("span",{"data-ignore-click-outside":"true",onClick:o},"View sites")),a&&!p&&l.default.createElement("div",{className:"region-context-menu__add region-context-menu__item"},l.default.createElement("span",{"data-ignore-click-outside":"true",onClick:function(e){return d(e)}},"Copy")),a&&!p&&l.default.createElement("div",{className:(0,u.default)("region-context-menu__add","region-context-menu__item",{disabled:f})},l.default.createElement("span",{"data-ignore-click-outside":"true",onClick:function(e){f||c(e)}},"Paste"))))};d.defaultProps={isEditable:!1,canViewSites:!1,hideUnlock:!1,clipboardEmpty:!0,isAdjusted:!1,onUnlockCountry:void 0,isIgnored:!1,hideIgnore:!0,onCalculationToggle:void 0,onCopy:void 0,onPaste:void 0},d.propTypes={onExcludeCountry:o.default.func.isRequired,onUnlockCountry:o.default.func,onViewSites:o.default.func.isRequired,onCalculationToggle:o.default.func,canViewSites:o.default.bool,isEditable:o.default.bool,hideUnlock:o.default.bool,onCopy:o.default.func,onPaste:o.default.func,clipboardEmpty:o.default.bool,isAdjusted:o.default.bool,isIgnored:o.default.bool,hideIgnore:o.default.bool},t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(856),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(8),u=a(11),d=n(u),c=a(10),f=n(c),p=a(256),m=n(p),h=a(61),v=n(h),_=a(48),E=a(60),g=a(88),y=a(7);a(2298);var S=function(e){var t=e.list,a=e.studyId,n=e.scenarioId,i=e.countryId,o=e.hasScenarioData,s=e.getCountryManagerDetails;(0,r.useEffect)(function(){!t&&i&&o&&s(a,n,i)},[t,s,a,n,i,o]);var u="-",d=t||[];return d.length>1?u=d.length+" people access":1===d.length&&(u=d[0].name),l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"country-managers-dropdown__container"},l.default.createElement("div",{className:"country-managers__label"},"Country manager"),l.default.createElement("div",{className:"country-managers-dropdown__wrapper"},l.default.createElement(m.default,{disabled:!t||!d.length,readOnly:!0,staticLabel:u,selected:null,onSelect:function(){},onStatusChange:function(){},options:d.map(function(e){var t=(0,y.getMomentDate)(e.startDate),a=l.default.createElement(l.default.Fragment,null,l.default.createElement("div",null,e.name),t&&(0,f.default)().isSameOrBefore(t,"day")&&l.default.createElement("div",{className:"secondary-label"},"(start date - ",(0,g.formatDate)((0,y.getMomentDate)(e.startDate)),")"));return{key:e.name,value:a}})})),l.default.createElement("div",{className:"country-managers__underline"})),l.default.createElement(v.default,{className:"separator",size:"large"}))};S.defaultProps={list:null,hasScenarioData:!1,countrySitesManager:null},S.propTypes={list:o.default.array,studyId:o.default.oneOfType([o.default.number,o.default.string]).isRequired,scenarioId:o.default.oneOfType([o.default.number,o.default.string]).isRequired,countryId:o.default.oneOfType([o.default.number,o.default.string]).isRequired,hasScenarioData:o.default.bool,getCountryManagerDetails:o.default.func.isRequired};var b=function(e,t){var a=t.params,n=a.scenarioId,r=a.studyId,l=a.countryId,i=(0,_.getActiveCountry)(e,t),o=(0,_.getScenarioData)(e,t);return{list:(0,d.default)(i,"countrySitesManager"),studyId:r,scenarioId:n,countryId:l,hasScenarioData:!!o}},C={getCountryManagerDetails:E.getCountryManager};t.default=(0,s.connect)(b,C)(S)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(858),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(12),u=a(863),d=a(870),c=n(d),f=a(861),p=n(f);a(2299);var m=function(e){var t=e.id,a=e.data,n=e.metricsFilter,r=e.onMetricsFilter,i=e.milestonesFilter,o=e.onMilestonesFilter,d=e.noHeader;return l.default.createElement("div",{className:"country-site-table",id:t},l.default.createElement(s.FlexTable,{headerHeight:d?0:139,rowHeight:48,rowsCount:a.length},l.default.createElement(c.default,{className:"sites-row"},l.default.createElement(s.Column,{className:"sites-column",overflow:!0,header:d?l.default.createElement(p.default,null):l.default.createElement(u.SiteCaptionCell,null),data:l.default.createElement(u.SiteDataCell,{data:a}),width:390}),l.default.createElement(s.Column,{className:"sites-column",overflow:!0,header:d?l.default.createElement(p.default,null):l.default.createElement(u.SiteHistoricalCell,{metricsFilter:n,onMetricsFilter:r}),data:l.default.createElement(u.SiteHistoricalData,{data:a,metricsFilter:n}),width:489}),l.default.createElement(s.Column,{className:"sites-column",overflow:!0,header:d?l.default.createElement(p.default,null):l.default.createElement(u.SiteActual,{milestonesFilter:i,onMilestonesFilter:o}),data:l.default.createElement(u.SiteActualData,{data:a,milestonesFilter:i}),width:243}))))};m.defaultProps={noHeader:!1},m.propTypes={data:o.default.array.isRequired,metricsFilter:o.default.string.isRequired,milestonesFilter:o.default.string.isRequired,onMetricsFilter:o.default.func.isRequired,onMilestonesFilter:o.default.func.isRequired,noHeader:o.default.bool,id:o.default.string.isRequired},t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),l=function(){return r.default.createElement("div",null)};t.default=l},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(860),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SiteActualData=t.SiteHistoricalData=t.SiteDataCell=t.SiteActual=t.SiteHistoricalCell=t.SiteCaptionCell=void 0;var r=a(866),l=n(r),i=a(869),o=n(i),s=a(865),u=n(s),d=a(867),c=n(d),f=a(868),p=n(f),m=a(864),h=n(m);t.SiteCaptionCell=l.default,t.SiteHistoricalCell=o.default,t.SiteActual=u.default,t.SiteDataCell=c.default,t.SiteHistoricalData=p.default,t.SiteActualData=h.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(220),c=a(88),f=a(7),p=a(12),m=a(6),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return l.default.createElement("div",null,l.default.createElement("span",{className:"actual-data-from"},e?(0,c.formatDate)(e):"-"),l.default.createElement("span",{className:"actual-data-icon"},m.Icons.ARROW_RIGHT),l.default.createElement("span",{className:"actual-data-to"},t?(0,c.formatDate)(t):"-"),l.default.createElement("span",{className:"actual-data-week"},l.default.createElement("b",null,t&&e?t.diff(e,"w")+"w":"")))},v=function(e){var t=e.data,a=e.rowIndex,n=e.milestonesFilter,r=t[a],i=r.status,o=r.siv,s=r.fpfv,c=r.lpfv,m=r.study.fp,v=void 0,_=void 0;switch(n){case"siv_fpfv":v=o,_=s;break;case"fpfv_lpfv":v=s,_=c;break;case"fp_siv":default:v=m,_=o}return v=(0,f.getMomentDate)(v),_=(0,f.getMomentDate)(_),l.default.createElement(p.CellGroup,{direction:"row",className:(0,u.default)("actual-data",{completed:i===d.SITE_STATUS.COMPLETED})},l.default.createElement(p.CellGroup,{width:243,className:"data-group"},l.default.createElement(p.Cell,{className:"value-cell"},h(v,_))))};v.propTypes={data:o.default.array.isRequired,rowIndex:o.default.number,milestonesFilter:o.default.oneOf(Object.values(d.MILESTONES_FILTER_FILTER_KEYS)).isRequired},v.defaultProps={rowIndex:-1},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(12),u=a(256),d=n(u),c=a(13),f=n(c),p=a(220),m=function(e){var t=e.milestonesFilter,a=e.onMilestonesFilter;return l.default.createElement(s.CellGroup,null,l.default.createElement(s.Cell,{className:"cell-caption"},l.default.createElement("h3",null,"Actual/Planned")),l.default.createElement(s.Cell,{className:"header-cell"},l.default.createElement("div",null,"Milestones dates")),l.default.createElement(s.CellGroup,{direction:"row",className:"header-group underline"},l.default.createElement(f.default,{overlay:p.MILESTONES_FILTER.find(function(e){return e.key===t}).value},l.default.createElement(s.CellGroup,{width:243,className:"header-group"},l.default.createElement(s.Cell,{className:"header-cell-category",overflow:!0},l.default.createElement(d.default,{selected:t,onSelect:a,options:p.MILESTONES_FILTER}))))))};m.propTypes={milestonesFilter:o.default.string.isRequired,onMilestonesFilter:o.default.func.isRequired},t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),l=a(12),i=function(){return r.default.createElement(l.CellGroup,null,r.default.createElement(l.Cell,{className:"cell-caption"},r.default.createElement("h3",null,"Currently browsing study")),r.default.createElement(l.Cell,{className:"header-cell"},r.default.createElement("div",null,"")),r.default.createElement(l.CellGroup,{direction:"row",className:"header-group underline"},r.default.createElement(l.CellGroup,{width:32,fixedWidth:!0,className:"header-group rank"},r.default.createElement(l.Cell,{className:"header-cell-category"},r.default.createElement("div",null,"Chart"))),r.default.createElement(l.CellGroup,{width:74,className:"header-group rank"},r.default.createElement(l.Cell,{className:"header-cell-category"},r.default.createElement("div",null,"Status"))),r.default.createElement(l.CellGroup,{width:111,className:"header-group"},r.default.createElement(l.Cell,{className:"header-cell-category"},r.default.createElement("div",null,"Study I.D.")))))};t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(220),c=a(12),f=a(6),p=function(e){var t=e.data,a=e.rowIndex,n=t[a],r=n.status,i=n.study_id;return l.default.createElement(c.CellGroup,{direction:"row",className:(0,u.default)("sites-data",{completed:r===d.SITE_STATUS.COMPLETED})},l.default.createElement(c.CellGroup,{width:32,fixedWidth:!0,className:"data-group rank"},l.default.createElement(c.Cell,{className:"value-cell"},l.default.createElement("div",{className:"study-site-icon"},f.Icons.STUDY_SITE),l.default.createElement("div",{className:"study-site-icon clicked"},f.Icons.STUDY_SITE_SELECTED))),l.default.createElement(c.CellGroup,{width:68,className:"data-group rank"},l.default.createElement(c.Cell,{className:"value-cell"},l.default.createElement("div",null,r))),l.default.createElement(c.CellGroup,{width:119,className:"data-group rank"},l.default.createElement(c.Cell,{className:"value-cell"},l.default.createElement("div",null,i))))};p.propTypes={data:o.default.array.isRequired,rowIndex:o.default.number},p.defaultProps={rowIndex:-1},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(198),c=n(d),f=a(220),p=a(12),m=function(e){return(0,c.default)(e)?"-":e},h=function(e){var t=e.data,a=e.rowIndex,n=e.metricsFilter,r=t[a],i=r.status,o=r.target_patients,s=r.randomized_patients,d=r.randomization_rate,h=r.screen_failure_rate,v=r.drop_out_rate,_=r[n];return _=(0,c.default)(_)?"-":"median_time_to_query"===n||"median_time_to_entry"===n?Math.round(_)+"d":"query_rate"===n?(100*_).toFixed(2)+"%":(+_).toFixed(2),l.default.createElement(p.CellGroup,{direction:"row",className:(0,u.default)("historical-data",{completed:i===f.SITE_STATUS.COMPLETED})},l.default.createElement(p.CellGroup,{direction:"row",width:104,className:"data-group"},l.default.createElement(p.Cell,{width:44,className:"value-cell align--right"},l.default.createElement("div",null,m(o))),l.default.createElement(p.Cell,{width:44,className:"value-cell align--right"},l.default.createElement("div",null,m(s)))),l.default.createElement(p.CellGroup,{direction:"row",width:161,className:"data-group"},l.default.createElement(p.Cell,{width:32,className:"value-cell align--right"},l.default.createElement("div",null,(0,c.default)(d)?"-":(+d).toFixed(2))),l.default.createElement(p.Cell,{width:32,className:"value-cell align--right"},l.default.createElement("div",null,(0,c.default)(h)?"-":Math.round(100*h)+"%")),l.default.createElement(p.Cell,{width:65,className:"value-cell align--right"},l.default.createElement("div",null,(0,c.default)(v)?"-":(100*v).toFixed(2)+"%"))),l.default.createElement(p.CellGroup,{width:160,className:"data-group"},l.default.createElement(p.Cell,{className:"value-cell align--right"},l.default.createElement("div",null,_))))};h.propTypes={data:o.default.array.isRequired,rowIndex:o.default.number,metricsFilter:o.default.oneOf(Object.values(f.METRICS_FILTER_KEYS)).isRequired},h.defaultProps={rowIndex:-1},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(12),u=a(256),d=n(u),c=a(13),f=n(c),p=a(220),m=function(e){var t=e.metricsFilter,a=e.onMetricsFilter;return l.default.createElement(s.CellGroup,null,l.default.createElement(s.Cell,{className:"cell-caption"},l.default.createElement("h3",null,"Historical")),l.default.createElement(s.CellGroup,{direction:"row",className:"header-group"},l.default.createElement(s.Cell,{width:104,className:"header-cell"},l.default.createElement("div",null,"Patients")),l.default.createElement(s.Cell,{width:161,className:"header-cell"},l.default.createElement("div",null,"Enrolment rates")),l.default.createElement(s.Cell,{width:160,className:"header-cell"},l.default.createElement("div",null,"Ops. metrics"))),l.default.createElement(s.CellGroup,{direction:"row",className:"header-group"},l.default.createElement(s.CellGroup,{width:104,direction:"row",className:"header-group underline"},l.default.createElement(s.Cell,{width:44,className:"header-cell-category"},l.default.createElement("div",null,"Target")),l.default.createElement(s.Cell,{width:44,className:"header-cell-category"},l.default.createElement("div",null,"Rand."))),l.default.createElement(s.CellGroup,{width:161,direction:"row",className:"header-group underline"},l.default.createElement(s.Cell,{width:32,className:"header-cell-category"},l.default.createElement(f.default,{overlay:"patients/site/month"},l.default.createElement("div",null,"RR"))),l.default.createElement(s.Cell,{width:32,className:"header-cell-category"},l.default.createElement(f.default,{overlay:"Screening failure rate"},l.default.createElement("div",null,"SF%"))),l.default.createElement(s.Cell,{width:65,className:"header-cell-category"},l.default.createElement("div",null,"Drop-out%"))),l.default.createElement(f.default,{overlay:p.METRICS_FILTER.find(function(e){return e.key===t}).value},l.default.createElement(s.CellGroup,{width:160,className:"header-group underline"},l.default.createElement(s.Cell,{className:"header-cell-category",overflow:!0},l.default.createElement(d.default,{selected:t,onSelect:a,options:p.METRICS_FILTER}))))))};m.propTypes={metricsFilter:o.default.string.isRequired,onMetricsFilter:o.default.func.isRequired},t.default=m},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(12),c=function(e){var t=e.rowIndex,a=e.children;return l.default.createElement(d.Row,{className:(0,u.default)("sites-row","site-row-index-"+t)},a)};c.propTypes={children:o.default.node.isRequired,rowIndex:o.default.number},c.defaultProps={rowIndex:-1},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(2),d=n(u),c=a(61),f=n(c);a(2300);var p=function(e){var t=r(e,[]),a=t.dataHeader,n=t.children;return i.default.createElement("div",{className:"country-sites-header-container"},i.default.createElement("div",{className:"country-sites-header"},a.map(function(e,t){return i.default.createElement(i.default.Fragment,{key:"frg-"+t},i.default.createElement("div",{key:"ind-"+t},i.default.createElement("div",{className:(0,d.default)("sites-count",{"has-separator":e.isSeparator})},i.default.createElement("div",{className:"name"},e.title),i.default.createElement("div",{className:(0,d.default)("value",{selected:e.isSelected,active:e.active})},e.value))),e.isSeparator?i.default.createElement(f.default,{className:"separator",size:"large",key:"sep-"+t}):null)}),n))};p.propTypes={title:s.default.string,value:s.default.string},p.defaultProps={title:"",value:"",isSeparator:!1},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(8),u=a(59),d=a(11),c=n(d),f=a(2),p=n(f),m=a(84),h=n(m),v=a(69),_=n(v),E=a(6),g=a(181),y=n(g),S=a(60),b=a(347),C=a(48),O=a(40),T=n(O),R=a(7),w=a(131);a(2301);var A=(0,h.default)(T.default),I=function(e){var t=e.onSelect,a=e.status,n=e.studyId,i=e.scenarioId,o=e.countryId,s=e.overrideId,u=e.editableByCountryUser,d=e.editableByTom,c=e.approvedBy,f=e.updatedAt,m=e.getUserDetails,h=e.approverDetails,g=e.hasScenarioData,S=e.hasChanges;(0,r.useEffect)(function(){c&&g&&m(n,i,s,c)},[n,i,s,c,m,g,a]);var b=(0,r.useCallback)(function(e){var a=e.value;t(n,i,o,s,a)},[n,i,o,t,s]),C=[{id:w.COUNTRY_SITE_APPROVAL_STATUS.APPROVED,name:l.default.createElement("div",{className:"menu-item-wrapper"},l.default.createElement("span",{className:(0,p.default)("menu-item-icon")},E.Icons.SITE_APPROVED),l.default.createElement("span",null,"Site selection agreed")),icon:E.Icons.SITE_APPROVED,active:u},{id:w.COUNTRY_SITE_APPROVAL_STATUS.IN_GLOBAL_REVIEW,name:l.default.createElement("div",{className:"menu-item-wrapper"},l.default.createElement("span",{className:(0,p.default)("menu-item-icon")},E.Icons.SITE_IN_REVIEW),l.default.createElement("span",null,"Site selection provided")),icon:E.Icons.SITE_IN_REVIEW,active:u},{id:w.COUNTRY_SITE_APPROVAL_STATUS.READY_TO_LOCAL_MANAGE,name:l.default.createElement("div",{className:"menu-item-wrapper"},l.default.createElement("span",{className:(0,p.default)("menu-item-icon")},E.Icons.SITE_IN_PROGRESS),l.default.createElement("span",null,"Site selection required")),icon:E.Icons.SITE_IN_PROGRESS,active:d},{id:w.COUNTRY_SITE_APPROVAL_STATUS.NOT_READY_TO_LOCAL_MANAGE,name:"No site selection required yet",icon:"",active:d}],O=l.default.createElement("div",{className:"country-sites-status-dropdown-container"},l.default.createElement("div",{className:"sites-status__title"},"Country sites approval status"),l.default.createElement(_.default,{disabled:!d&&!u||S,initialSelect:C.find(function(e){return e.id===a}),onOptionSelect:b},C.map(function(e){return l.default.createElement(v.DropdownOption,{disabled:!e.active,key:e.id,id:e.id,label:e.name,value:e.id,selected:a===e.id})})));return S?O=l.default.createElement(y.default,{mouseEnterDelay:.3,placement:"top",overlay:l.default.createElement("div",null,l.default.createElement("div",null,l.default.createElement("span",null,"You have unsaved changes,"),l.default.createElement("br",null),l.default.createElement("span",null,"please save in order to change country site status")))},O):a===w.COUNTRY_SITE_APPROVAL_STATUS.APPROVED&&h&&(O=l.default.createElement(y.default,{mouseEnterDelay:.3,placement:"top",overlay:l.default.createElement("div",null,l.default.createElement("div",null,l.default.createElement("span",null,"Site selection was approved "),l.default.createElement("span",null,f?(0,R.getMomentDate)(f).format("DD MMM YYYY"):"-"),l.default.createElement("br",null),l.default.createElement("span",null,"by ",h.name)))},O)),O};I.defaultProps={status:w.COUNTRY_SITE_APPROVAL_STATUS.NOT_READY_TO_LOCAL_MANAGE,overrideId:null,editableByCountryUser:!1,editableByTom:!1,approvedBy:null,updatedAt:null,approverDetails:null,hasScenarioData:!1,hasChanges:!1},I.propTypes={onSelect:o.default.func.isRequired,status:o.default.string,overrideId:o.default.number,editableByCountryUser:o.default.bool,editableByTom:o.default.bool,studyId:o.default.oneOfType([o.default.number,o.default.string]).isRequired,scenarioId:o.default.oneOfType([o.default.number,o.default.string]).isRequired,countryId:o.default.oneOfType([o.default.number,o.default.string]).isRequired,approvedBy:o.default.string,updatedAt:o.default.string,getUserDetails:o.default.func.isRequired,approverDetails:o.default.object,hasScenarioData:o.default.bool,hasChanges:o.default.bool};var N=function(e,t){var a=t.params,n=a.id,r=a.scenarioId,l=a.countryId,i=(0,C.getActiveCountry)(e,t),o=e.auth.user,s=(0,C.getStudyData)(e,t),u=(0,C.getScenarioData)(e,t),d=A(o,s,u),f=(0,c.default)(i,"country_sites_approval_status.status",w.COUNTRY_SITE_APPROVAL_STATUS.NOT_READY_TO_LOCAL_MANAGE),p=(0,c.default)(i,"country_sites_approval_status.approvedBy"),m=(0,c.default)(i,"country_sites_approval_status.updatedAt"),h=(0,c.default)(i,"country_sites_approval_status.approverDetails");return{status:f,overrideId:(0,c.default)(i,"override_id",null),editableByCountryUser:d.canManageSites&&!d.isCompleted&&(0,c.default)(e,"sites.editableCountriesIds")&&(0,c.default)(e,"sites.editableCountriesIds").includes(+l)&&f!==w.COUNTRY_SITE_APPROVAL_STATUS.NOT_READY_TO_LOCAL_MANAGE&&(0,c.default)(u,"site_selection_required"),editableByTom:(d.isAdmin||d.isUserHasScenarioFullControl)&&!d.isCompleted&&(0,c.default)(u,"site_selection_required"),studyId:n,scenarioId:r,countryId:l,approvedBy:p,updatedAt:m,approverDetails:h,hasScenarioData:!!u,hasChanges:e.sites.hasChanges}},D={onSelect:S.onChangeCountrySitesStatus,getUserDetails:b.getUserDetailsById};t.default=(0,u.withRouter)((0,s.connect)(N,D)(I))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(872),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(459),p=n(f),m=a(10),h=n(m),v=a(2),_=n(v),E=a(312),g=n(E),y=a(13),S=n(y),b=a(500);a(2302);var C=a(7),O=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a),a.onChange=a.onChange.bind(a),a.onKeyDown=a.onKeyDown.bind(a),a.onKeyUp=a.onKeyUp.bind(a),a.onFocus=a.onFocus.bind(a),a.onBlur=a.onBlur.bind(a);var n=a.props,i=n.value,o=n.dateFormat,s=i?(0,h.default)(i,o).format(b.DATE_FORMAT):i;return a.state={value:s,isValid:!0},a}return i(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.selected?e.selected.format(b.DATE_FORMAT):"";this.props.value!==a&&this.setState({value:a},function(){t.validate()})}},{key:"shouldComponentUpdate",value:function(e,t){var a=this.state,n=a.value,r=a.isValid;return t.value!==n||t.isValid!==r||e.disabled!==this.props.disabled||e.status!==this.props.status}},{key:"onClick",value:function(){this.props.onClick(),this.inputEl.focus()}},{key:"onChange",value:function(e){var t=e.target.value;this.setState({value:t})}},{key:"onFocus",value:function(e){this.props.onCustomInputFocus&&this.props.onCustomInputFocus(e),this.props.onClick()}},{key:"onBlur",value:function(e){var t=e.target.value,a=this.validate();if((0,g.default)(t))this.props.onChange({target:{value:null}});else if(a){var n=(0,C.getMomentDate)(t),r=n.startOf("day").add(n.utcOffset()/60,"hours").utc();this.props.onChange({target:{value:r}})}this.props.onCustomInputBlur&&this.props.onCustomInputBlur(e,a)}},{key:"onKeyDown",value:function(e){var t=e.target.value;if("Tab"===e.key&&this.props.onKeyDown(e),"Escape"===e.key&&this.props.escHandler(e),"Enter"===e.key){var a=this.validate();if((0,g.default)(t))this.props.onChange({target:{value:null}});else if(a){var n=(0,C.getMomentDate)(t),r=n.startOf("day").add(n.utcOffset()/60,"hours").utc();this.props.onChange({target:{value:r}})}}}},{key:"onKeyUp",value:function(e){""===e.target.value&&8===e.keyCode&&this.props.onChange({target:{value:null}})}},{key:"validate",value:function(){var e=this.state.value,t=(0,C.getMomentDate)(e),a=this.props.minDate||(0,C.getMomentDate)("01 Jan "+b.MIN_YEAR),n=this.props.maxDate||(0,C.getMomentDate)("31 Dec "+b.MAX_YEAR),r=(0,g.default)(e)||b.DATE_FORMAT_RE.test(e)&&t.isValid()&&t>=a.startOf("day")&&t<=n&&(!this.props.filterDate||this.props.filterDate(t));return this.setState({isValid:r}),r}},{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.placeholder,r=t.disabled,l=t.status,i=t.simpleView,o=t.tooltip,s=this.state,d=s.value,c=s.isValid,f=u.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.default.createElement("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h\n            14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}));if(i){var p=u.default.createElement("div",{"data-element-id":"calendar",className:(0,_.default)("custom-input","simple",{error:l===b.STATUS_ERROR||!c},{disabled:r}),onClick:this.onClick},u.default.createElement("input",{"data-element-id":"calendar",className:"input",placeholder:n,value:d,disabled:r,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,ref:function(t){e.inputEl=t}}));return o?u.default.createElement(S.default,{mouseEnterDelay:.3,placement:"bottom",overlayClassName:"scenario-table__invalid-date-tooltip",overlay:u.default.createElement("span",null,o)},p):c?p:u.default.createElement(S.default,{mouseEnterDelay:.3,placement:"bottom",overlayClassName:"scenario-table__invalid-date-tooltip",overlay:u.default.createElement("span",null,"Invalid date")},p)}return u.default.createElement("div",{className:(0,_.default)("custom-input",{disabled:r}),onClick:this.onClick},u.default.createElement("div",{className:"label"},a),u.default.createElement("input",{className:(0,_.default)("input date-picker-control date-input",{error:!c||l===b.STATUS_ERROR}),placeholder:n,value:d,disabled:r,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,ref:function(t){e.inputEl=t}}),u.default.createElement("div",{className:"icon"},f))}}]),t}(s.Component);O.defaultProps={label:"Date",placeholder:"DD MMM YY",value:void 0,disabled:!1,status:void 0,selected:void 0,minDate:void 0,maxDate:void 0,onClick:void 0,onKeyDown:void 0,onChange:void 0,onCustomInputFocus:void 0,onCustomInputBlur:void 0,escHandler:function(){return null},filterDate:void 0,dateFormat:b.DATE_FORMAT,tooltip:null},O.propTypes={label:c.default.string,placeholder:c.default.string,value:c.default.string,disabled:c.default.bool,status:c.default.oneOf(["success","error"]),selected:p.default.momentObj,minDate:p.default.momentObj,maxDate:p.default.momentObj,onKeyDown:c.default.func,onChange:c.default.func,simpleView:c.default.bool.isRequired,onClick:c.default.func,onCustomInputFocus:c.default.func,onCustomInputBlur:c.default.func,escHandler:c.default.func,filterDate:c.default.func,dateFormat:c.default.string,tooltip:c.default.string},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(459),p=n(f),m=a(2032),h=n(m),v=a(2),_=n(v),E=a(10),g=n(E),y=a(1941),S=n(y),b=a(874),C=n(b),O=a(1070),T=n(O),R=a(500);a(2303),a(2304);var w=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=g.default.isMoment(e.selected)&&e.selected.isValid()?e.selected:null,i=g.default.isMoment(e.defaultDate)&&e.defaultDate.isValid()?e.defaultDate:null,o=(0,g.default)(),s=n||i||o;return a.state={selected:n||null,newSelected:null,month:R.MONTHS[s.month()],year:s.year(),showWarning:!1,newValue:null},a.uniqueCalendarSelector=(0,S.default)("date-picker-calendar-"),a.onClickOutside=a.onClickOutside.bind(a),a.escapeHandler=a.escapeHandler.bind(a),a.onFocus=a.onFocus.bind(a),a.onBlur=a.onBlur.bind(a),a.onChange=a.onChange.bind(a),a.onMonthChange=a.onMonthChange.bind(a),a.onMonthFocus=a.onMonthFocus.bind(a),a.onMonthBlur=a.onMonthBlur.bind(a),a.onMonthKeyDown=a.onMonthKeyDown.bind(a),a.onYearChange=a.onYearChange.bind(a),a.onYearFocus=a.onYearFocus.bind(a),a.onYearBlur=a.onYearBlur.bind(a),a.onYearKeyDown=a.onYearKeyDown.bind(a),a.onNavLeft=a.onNavLeft.bind(a),a.onNavRigth=a.onNavRigth.bind(a),a.proxyMonth=a.proxyMonth.bind(a),a.proxyYear=a.proxyYear.bind(a),a.doOnChange=a.doOnChange.bind(a),a}return i(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){if(this.props.selected!==e.selected||this.props.defaultDate!==e.defaultDate){var t=g.default.isMoment(e.selected)&&e.selected.isValid()?e.selected:null,a=g.default.isMoment(e.defaultDate)&&e.defaultDate.isValid()?e.defaultDate:null,n=(0,g.default)(),r=t||a||n;this.setState({selected:t||null,month:R.MONTHS[r.month()],year:r.year()})}}},{key:"onFocus",value:function(){this.props.onFocus&&this.props.onFocus()}},{key:"onBlur",value:function(e,t){this.props.onBlur&&this.props.onBlur(e,t)}},{key:"onChange",value:function(e){var t=this,a=e;e&&!e.isUTC()&&(a=a.startOf("day").add(a.utcOffset()/60,"hours").utc());var n={result:a};this.props.warningText&&(n={showWarning:!0,newSelected:a}),this.setState(n,function(){t.props.onChange&&null===t.props.warningText&&t.doOnChange(a)})}},{key:"onClickOutside",value:function(){this.onMonthBlur({target:{value:""}}),this.onYearBlur({target:{value:""}})}},{key:"onMonthChange",value:function(e){this.setState({month:e.target.value})}},{key:"onMonthFocus",value:function(){this.setState({month:""})}},{key:"onMonthBlur",value:function(e){var t=e.target.value;if(-1===R.MONTHS.indexOf(t.toLowerCase())){var a=this.state.selected||this.props.defaultDate||(0,g.default)(),n=R.MONTHS[a.month()];this.setState({month:n},this.proxyMonth)}else this.proxyMonth()}},{key:"onMonthKeyDown",value:function(e){e.key===R.ENTER_KEY&&this.proxyMonth()}},{key:"onYearChange",value:function(e){this.setState({year:e.target.value})}},{key:"onYearFocus",value:function(){this.setState({year:""})}},{key:"onYearBlur",value:function(e){var t=parseInt(e.target.value,10),a=this.props,n=a.minDate,r=a.maxDate;if(isNaN(t)||t<R.MIN_YEAR||t>R.MAX_YEAR||n&&n.year()>t||r&&r.year()<t){var l=this.state.selected||this.props.defaultDate||(0,g.default)();this.setState({year:l.year()},this.proxyYear)}else this.proxyYear()}},{key:"onYearKeyDown",value:function(e){e.key===R.ENTER_KEY&&this.proxyYear(),"Tab"===e.key&&(this.proxyYear(),e.preventDefault())}},{key:"onNavLeft",value:function(){var e=this,t=R.MONTHS.indexOf(this.state.month);-1!==t&&this.setState({month:R.MONTHS[0===t?11:t-1]},function(){e.proxyMonth(),0===t&&e.setState({year:+e.state.year-1},e.proxyYear)})}},{key:"onNavRigth",value:function(){var e=this,t=R.MONTHS.indexOf(this.state.month);-1!==t&&this.setState({month:R.MONTHS[11===t?0:t+1]},function(){e.proxyMonth(),11===t&&e.setState({year:+e.state.year+1},e.proxyYear)})}},{key:"doOnChange",value:function(e){var t=this;this.setState({selected:e},function(){var a=e?e.clone():null,n=t.props.validators,r=!n.length||n.every(function(e){return e(a)});t.props.onChange(a,{value:a,isValid:r})})}},{key:"proxyMonth",value:function(){var e=this.state.month,t=R.MONTHS.indexOf(e.toLowerCase());if(-1!==t){var a=document.querySelector("."+this.uniqueCalendarSelector+" .react-datepicker__month-select");if(a){var n=document.createEvent("Event");n.initEvent("change",!0,!0),a.value=t,a.dispatchEvent(n)}}}},{key:"proxyYear",value:function(){var e=parseInt(this.state.year,10);if(!isNaN(e)&&e>=R.MIN_YEAR&&e<=R.MAX_YEAR){var t=document.querySelector("."+this.uniqueCalendarSelector+" .react-datepicker__year-select");if(t){var a=document.createEvent("Event");a.initEvent("change",!0,!0),t.value=e,t.dispatchEvent(a)}}}},{key:"escapeHandler",value:function(e){e.target.blur(),this.calendar.setOpen(!1),this.props.escHandler(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.label,r=t.placeholder,l=t.disabled,i=t.minDate,o=t.maxDate,s=t.status,d=t.simpleView,c=t.filterDate,f=t.dateFormat,p=t.defaultDate,m=t.popperPlacement,v=t.tooltip,E=t.warningText,g=u.default.createElement("svg",{"data-element-id":"calendar",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.default.createElement("path",{"data-element-id":"calendar",d:"M8.6 7.4L10 6l6 6-6 6-1.4-1.4 4.6-4.6z"}));return u.default.createElement(u.default.Fragment,null,u.default.createElement(h.default,{ref:function(t){e.calendar=t},className:(0,_.default)("date-picker",a),calendarClassName:(0,_.default)("date-picker-calendar",this.uniqueCalendarSelector),customInput:u.default.createElement(C.default,{tooltip:v,label:n,placeholder:r,status:s,minDate:i,maxDate:o,dateFormat:f,simpleView:d,selected:this.state.selected,filterDate:c,onCustomInputFocus:this.onFocus,onCustomInputBlur:this.onBlur,escHandler:this.escapeHandler,onCustomInputChange:this.onChange}),dateFormat:f,selected:this.state.selected,openToDate:!this.state.selected&&p?p:this.state.selected,minDate:i,maxDate:o,onChange:this.onChange,onClickOutside:this.onClickOutside,disabled:l,popperPlacement:m,popperModifiers:{offset:{enabled:!0,offset:"0px, 0px"}},showMonthDropdown:!0,showYearDropdown:!0,disabledKeyboardNavigation:!0,fixedHeight:!0,filterDate:c,dropdownMode:"select"},u.default.createElement("div",{className:"controls"},u.default.createElement("div",{className:"nav left",onClick:this.onNavLeft},g),u.default.createElement("div",{className:"nav right",onClick:this.onNavRigth},g),u.default.createElement("div",{className:"input month"},u.default.createElement("input",{className:"date-picker-control month-input","data-element-id":"calendar",onInput:this.onMonthChange,onFocus:this.onMonthFocus,onBlur:this.onMonthBlur,onKeyDown:this.onMonthKeyDown,onChange:function(){},value:this.state.month,maxLength:3,ref:function(t){e.monthInputEl=t}}),u.default.createElement("div",{className:"progress"},this.state.month)),u.default.createElement("span",{style:{pointerEvents:"none"}}," / "),u.default.createElement("div",{className:"input year"},u.default.createElement("input",{className:"date-picker-control year-input","data-element-id":"calendar",onInput:this.onYearChange,onFocus:this.onYearFocus,onBlur:this.onYearBlur,onKeyDown:this.onYearKeyDown,onChange:function(){},value:this.state.year,maxLength:4,ref:function(t){e.yearInputEl=t}}),u.default.createElement("div",{className:"progress"},this.state.year)))),null!==E&&u.default.createElement(T.default,{show:this.state.showWarning,message:E,onOk:function(){e.setState({showWarning:!1}),e.doOnChange(e.state.newSelected)},onCancel:function(){return e.setState({showWarning:!1})},onClose:function(){return e.setState({showWarning:!0})}}))}}]),t}(s.PureComponent);w.defaultProps={className:void 0,label:void 0,placeholder:void 0,selected:void 0,disabled:!1,minDate:void 0,maxDate:void 0,status:void 0,onChange:void 0,onFocus:void 0,onBlur:void 0,simpleView:!1,filterDate:void 0,escHandler:function(){return null},defaultDate:void 0,validators:[],dateFormat:R.DATE_FORMAT,popperPlacement:"top-start",tooltip:null,warningText:null},w.propTypes={className:c.default.string,label:c.default.string,dateFormat:c.default.string,simpleView:c.default.bool,placeholder:c.default.string,selected:c.default.object,disabled:c.default.bool,minDate:p.default.momentObj,maxDate:p.default.momentObj,status:c.default.oneOf(["success","error"]),onChange:c.default.func,onFocus:c.default.func,onBlur:c.default.func,escHandler:c.default.func,filterDate:c.default.func,defaultDate:c.default.object,validators:c.default.array,popperPlacement:c.default.oneOf(["top-end","top-start"]),tooltip:c.default.string,warningText:c.default.string},t.default=w},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(321),c=n(d),f=function(e){var t=e.id,a=e.onOptionSelect,n=e.label,r=e.selected,i=e.value,o=e.matched,s=e.className,d=e.stopClickPropagation,f=e.disabled,p=(0,u.default)("options-item",s,{"options-item-selected":r,"highlight-matched":o&&o.length>0,disabled:f});return l.default.createElement("div",{className:p,title:"string"==typeof n?n:null,onClick:function(e){d&&e.stopPropagation(),a({id:t,label:n,value:i})}},o?(0,c.default)(n,o,function(e,t){return l.default.createElement("span",{key:t,style:{color:"black"}},e)}):n)};f.defaultProps={id:null,onOptionSelect:null,selected:!1,value:null,matched:"",className:"",stopClickPropagation:!1,disabled:!1},f.propTypes={id:o.default.string,onOptionSelect:o.default.func,label:o.default.oneOfType([o.default.string,o.default.object]).isRequired,selected:o.default.bool,value:o.default.any,matched:o.default.string,className:o.default.string,stopClickPropagation:o.default.bool,disabled:o.default.bool},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),m=a(67),h=n(m),v=a(85),_=n(v),E=a(66),g=n(E),y=a(560),S=n(y),b=a(6),C=a(23),O=n(C);a(793);var T=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},R=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=void 0,i=a.getSelectedOption();if(i){var o=i.props;n={id:o.id,label:o.label,value:o.value}}return a.state={open:!1,selectedOption:n||{id:null,label:null,value:null},filterValue:""},a.handleControlClick=a.handleControlClick.bind(a),a.getSelectedOption=a.getSelectedOption.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a.handleOptionSelect=a.handleOptionSelect.bind(a),a.handleClearClick=a.handleClearClick.bind(a),a.handleChangeFilter=a.handleChangeFilter.bind(a),a.close=a.close.bind(a),a}return i(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){if(e.children&&e.children.length>0){var t=u.default.Children.toArray(e.children),a=t.find(function(e){return!0===e.props.selected});a?this.setState({open:!1,selectedOption:{id:a.props.id,label:a.props.label,value:a.props.value}}):this.setState({open:!1,selectedOption:{id:null,label:null,value:null}})}}},{key:"getSelectedOption",value:function(){var e=this.props.children;return(e instanceof Array?e:[e]).find(function(e){return e.props.selected})}},{key:"handleClickOutside",value:function(){this.state.open&&this.close()}},{key:"handleControlClick",value:function(){var e=this.props.disabled,t=this.state.open;if(!e){if(t)return;this.setState({open:!t})}}},{key:"handleOptionSelect",value:function(e){var t=this,a=e.id,n=e.label,r=e.value;if(r!==this.state.selectedOption.value){var l={label:n,value:r,id:a};this.setState({open:!1,selectedOption:l,filterValue:""},function(){t.props.onOptionSelect(e)})}else this.close()}},{key:"handleClearClick",value:function(e){e.stopPropagation(),e.preventDefault(),this.setState({filterValue:""})}},{key:"handleChangeFilter",value:function(e){var t=this;this.setState({filterValue:T(e.target.value)},function(){t.scrollRef&&t.scrollRef.scrollTop()})}},{key:"close",value:function(){this.setState({filterValue:"",open:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.disabled,n=t.label,r=t.children,l=t.narrow,i=t.placeholder,o=this.state,s=o.open,d=o.selectedOption,c=h.default.generate(),f=(0,p.default)("fpo-dropdown-container",{disabled:a}),m=(0,p.default)("fpo-dropdown-wrapper",{"fpo-dropdown-open":s,"narrow-style":l}),v=(0,p.default)("fpo-dropdown-control",{enabled:!a,"narrow-style":l}),E=(0,p.default)("fpo-dropdown-options",{"narrow-style":l}),g=function(){return s?b.Icons.CHEVRON_UP:b.Icons.CHEVRON_DOWN},y=r instanceof Array?r:[r],S=y.filter(function(t){return""===e.state.filterValue||-1!==t.props.label.toLowerCase().indexOf(e.state.filterValue.toLowerCase())}),C=S.map(function(t,a){var n={key:h.default.generate(),id:"option-"+a,onOptionSelect:e.handleOptionSelect,selected:d.id==="option-"+a||!d.id&&t.props.selected,matched:e.state.filterValue};return u.default.cloneElement(t,n)});return u.default.createElement("div",{className:f,ref:function(t){e.dropdown=t}},function(e){return e?u.default.createElement("label",{htmlFor:c},e):null}(n),u.default.createElement("div",{id:c,className:m},u.default.createElement("div",{className:v,onClick:this.handleControlClick},s?u.default.createElement("div",{className:"dropdown-select-filterable-control"},u.default.createElement(O.default,{onChange:this.handleChangeFilter,value:this.state.filterValue,autoFocus:!0,narrow:!0,withoutBorder:!0,placeholder:d.label||""}),""===this.state.filterValue?u.default.createElement("span",{className:"control-icon"},g()):u.default.createElement("div",{className:(0,p.default)("filterable-control__clear-button",{hidden:!this.state.filterValue||""===this.state.filterValue})},u.default.createElement("span",{onClick:this.handleClearClick},b.Icons.CROSS))):u.default.createElement("span",{className:"control-label"},d.label||u.default.createElement("span",{className:"placeholder"},i)),s?null:u.default.createElement("span",{className:"control-icon"},g())),u.default.createElement("div",{className:E},u.default.createElement(_.default,{style:{height:"176px"},ref:function(t){e.scrollRef=t},horizontal:!1},u.default.createElement("div",{className:"filterable-list__items"},C.sort(function(e,t){return e.props.label<t.props.label?-1:e.props.label>t.props.label?1:0}))))))}}]),t}(s.Component),w=function(e,t,a){var n=e[t];n instanceof Array||(n=[n]);var r=[];return n.forEach(function(e,t){e.type&&e.type.name&&"DropdownOption"===e.type.name||r.push(t)}),r.length>0?new Error("Invalid prop "+t+" supplied to "+a+" Validation failed."):null},A=(0,S.default)(w);R.defaultProps={narrow:!1,placeholder:"Select",disabled:!1,label:null},R.propTypes={children:A.isRequired,disabled:c.default.bool,label:c.default.string,onOptionSelect:c.default.func.isRequired,placeholder:c.default.string,narrow:c.default.bool},t.default=(0,g.default)(R)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),m=a(67),h=n(m),v=a(50),_=n(v),E=a(85),g=n(E),y=a(560),S=n(y),b=a(6);a(793);var C=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=void 0,i=a.getSelectedOption();if(i){var o=i.props;n={id:o.id,label:o.label,value:o.value}}return a.state={open:!1,selectedOption:n||{id:null,label:null,value:null}},a.handleControlClick=a.handleControlClick.bind(a),a.getSelectedOption=a.getSelectedOption.bind(a),a.handleOutsideClick=a.handleOutsideClick.bind(a),a.handleOptionSelect=a.handleOptionSelect.bind(a),a.close=a.close.bind(a),a}return i(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.children&&e.children.length>0&&null!==this.state.selectedOption.label&&!e.initialSelect){var a=u.default.Children.toArray(e.children);if(a.find(function(e){return e.props.label===t.state.selectedOption.label&&(0,_.default)(e.props.value,t.state.selectedOption.value)})){var n=a.find(function(e){return e.props.selected});n&&this.setState({open:!1,selectedOption:{id:n.props.id,label:n.props.label,value:n.props.value}})}else this.setState({open:!1,selectedOption:{id:null,label:null,value:null}})}else if(e.initialSelect){var r=e.initialSelect,l=r.id,i=r.name,o=r.value,s=void 0===o?null:o;this.setState({open:!1,selectedOption:{id:l,label:i,value:s}})}}},{key:"shouldComponentUpdate",value:function(e,t){return t.open||t.open!==this.state.open||e.disabled!==this.props.disabled||!(0,_.default)(t.selectedOption,this.state.selectedOption)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.handleOutsideClick)}},{key:"getSelectedOption",value:function(){var e=this.props.children;return(e instanceof Array?e:[e]).find(function(e){return e.props.selected})}},{key:"handleOutsideClick",value:function(e){!this.dropdown.contains(e.target)&&this.state.open&&this.close()}},{key:"handleControlClick",value:function(e){e.stopPropagation();var t=this.props,a=t.disabled,n=t.onControlClick,r=this.state.open;a||(r?document.body.removeEventListener("click",this.handleOutsideClick):document.body.addEventListener("click",this.handleOutsideClick),n&&n(!r),this.setState({open:!r}))}},{key:"handleOptionSelect",value:function(e){var t=this,a=this.props.onControlClick,n=e.id,r=e.label,l=e.value;if(l!==this.state.selectedOption.value){var i={label:r,value:l,id:n};a&&a(!1),this.setState({open:!1,selectedOption:i},function(){t.props.onOptionSelect(e)})}else this.close()}},{key:"close",value:function(){var e=this.props.onControlClick;e&&e(!1),this.setState({open:!1}),document.removeEventListener("click",this.handleOutsideClick)}},{key:"render",value:function(){var e=this,t=this.props,a=t.disabled,n=t.label,r=t.children,l=t.narrow,i=t.placeholder,o=t.resultsHeight,s=t.classNames,d=this.state,c=d.open,f=d.selectedOption,m=h.default.generate(),v=(0,p.default)("fpo-dropdown-container",{disabled:a},s),_=(0,p.default)("fpo-dropdown-wrapper",{"fpo-dropdown-open":c,"narrow-style":l}),E=(0,p.default)("fpo-dropdown-control",{enabled:!a,"narrow-style":l}),y=(0,p.default)("fpo-dropdown-options",{"narrow-style":l}),S=r instanceof Array?r:[r],C=S.map(function(t,a){var n={key:h.default.generate(),id:"option-"+a,onOptionSelect:t.props.onOptionSelect?function(a){e.close(),t.props.onOptionSelect(a)}:e.handleOptionSelect,selected:f.id==="option-"+a||!f.id&&t.props.selected};return u.default.cloneElement(t,n)});return u.default.createElement("div",{className:v,style:this.props.styles,ref:function(t){e.dropdown=t}},function(e){return e?u.default.createElement("label",{htmlFor:m},e):null}(n),u.default.createElement("div",{id:m,className:_},u.default.createElement("div",{className:E,onClick:this.handleControlClick},u.default.createElement("span",{className:"control-label"},f.label||u.default.createElement("span",{className:"placeholder"},i)),u.default.createElement("span",{className:"control-icon"},function(){return c?b.Icons.CHEVRON_UP:b.Icons.CHEVRON_DOWN}())),u.default.createElement("div",{className:y},u.default.createElement(g.default,{horizontal:!1,stopScrollPropagation:!0,style:{maxHeight:o+"px"}},C))))}}]),t}(s.Component);C.defaultProps={disabled:!1,label:null,narrow:!1,placeholder:"Select",resultsHeight:300,initialSelect:null,onControlClick:null,styles:{},classNames:""};var O=function(e,t,a){var n=e[t];n instanceof Array||(n=[n]);var r=[];return n.forEach(function(e,t){e.type&&e.type.name&&"DropdownOption"===e.type.name||r.push(t)}),r.length>0?new Error("Invalid prop "+t+" supplied to "+a+" Validation failed."):null},T=(0,S.default)(O);C.propTypes={children:T.isRequired,disabled:c.default.bool,label:c.default.string,onOptionSelect:c.default.func.isRequired,placeholder:c.default.oneOfType([c.default.string,c.default.object]),narrow:c.default.bool,resultsHeight:c.default.number,initialSelect:c.default.object,onControlClick:c.default.func,styles:c.default.object,classNames:c.default.string},t.default=C},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),m=a(1934),h=n(m),v=a(66),_=n(v);a(2305);var E=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected:a.props.selected,opened:!1},a.onSelect=a.onSelect.bind(a),a.toggleOpen=a.toggleOpen.bind(a),a}return i(t,e),o(t,[{key:"onSelect",value:function(e,t){this.setState({selected:e}),this.props.onSelect(e,t),this.toggleOpen()}},{key:"toggleOpen",value:function(){var e=this;this.setState(function(t){return e.props.onStatusChange&&e.props.onStatusChange(!t.opened),{opened:!t.opened}})}},{key:"handleClickOutside",value:function(){this.state.opened&&this.toggleOpen()}},{key:"render",value:function(){var e=this,t=this.props,a=t.readOnly,n=t.disabled,r=this.props.options.map(function(t){return u.default.createElement("div",{className:(0,p.default)("option",{selected:t.key===e.state.selected,"read-only":a}),key:t.key,onClick:function(){return!a&&e.onSelect(t.key,t.value)}},t.value)}),l=(0,h.default)(this.props.options,["key",this.state.selected]);return u.default.createElement("div",{className:(0,p.default)("dropdown",{opened:this.state.opened,disabled:n})},u.default.createElement("div",{className:"selected-option",onClick:this.toggleOpen},this.props.staticLabel||l&&l.value||""),u.default.createElement("div",{className:"options"},r))}}]),t}(s.Component);E.defaultProps={selected:"",onStatusChange:void 0,staticLabel:null,readOnly:!1,disabled:!1},E.propTypes={options:c.default.array.isRequired,selected:c.default.string,onSelect:c.default.func.isRequired,onStatusChange:c.default.func,staticLabel:c.default.string,readOnly:c.default.bool,disabled:c.default.bool},t.default=(0,_.default)(E)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(69),u=n(s),d=function(e){var t=e.onOptionSelect,a=e.children;return l.default.createElement("div",{className:"dropdown-container"},l.default.createElement(u.default,{placeholder:"Please select",onOptionSelect:t},a))};d.propTypes={onOptionSelect:o.default.func.isRequired,children:o.default.node.isRequired},t.default=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(8),m=a(1),h=n(m),v=a(10),_=n(v),E=a(312),g=n(E),y=a(11),S=n(y),b=a(2),C=n(b),O=a(23),T=n(O),R=a(882),w=n(R),A=a(39),I=a(51),N=n(I),D=a(69),P=a(880),L=n(P),M=a(6),x=a(7),k=a(44),j=a(45),F=a(32),U=a(17),V=n(U);a(2306);var B="study",H="GET_EXACT_COPY",G="CREATE_ADJUSTED",Y=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onChange=function(e){a.setState({name:e.target.value})},a.onSubmit=function(){var e=a.state,t=e.name,n=e.targetStudy,r=e.duplicateMethod,l=e.studyLevelParamsSource,i=a.getDefaultName(),o=n?n.id:null,s=a.isUniqName()?t:i;a.props.onSubmit(s,o,l===B&&a.props.study.state.status===V.default.ACTIVE,!1,r===G)},a.toggleChangeStudy=function(){a.setState({changeStudy:!a.state.changeStudy})},a.handleDuplicateMethodSelect=function(e){a.setState({duplicateMethod:e.value})},a.handleTargetStudySelect=function(e){var t=a.state.studies.find(function(t){return t.id===e.value});a.setState({targetStudy:t,isTargetValid:t&&t.isValid,agreeWithDataSummary:t&&t.isValid})},a.handleStudyUpdate=function(){var e=a.props,t=e.study,n=e.scenario,l=["indication","therapeutic_area","target_lpft","target_num_patients","fp","fpfv_fpft"],i=Object.entries(a.state.targetStudy).filter(function(e){return l.includes(e[0])}).reduce(function(e,t){var a=u(t,2),n=a[0],l=a[1];return s({},e,r({},n,l))},{});a.props.updateStudy(a.props.study.id,s({},i,{id:a.props.study.id,study_id:a.props.study.study_id})).then(function(){a.props.getScenarioViewerDataWithFullStudy(t.id,n.id)})},a.handleAgreeCheck=function(e){a.setState({agreeWithDataSummary:void 0!==e?e:!a.state.agreeWithDataSummary})},a.handleSourceOptionSelect=function(e){a.setState({studyLevelParamsSource:e.value})};var n=e.study&&(0,x.getMomentDate)(e.study.updatedAt),o=e.scenario&&e.scenario.last_optimisation_date;return a.state={name:"",changeStudy:!1,showOptimizeWarning:n&&o&&n.isAfter(o),agreeWithDataSummary:!1,recalculateWithActualParams:!1,confirmActualStudyParams:!1,createAdjusted:!1,studyLevelParamsSource:B,duplicateMethod:H,scenariosCount:0},a.controller=new AbortController,a.signal=a.controller.signal,a}return o(t,e),d(t,[{key:"componentDidMount",value:function(){var e=this,t=this.signal,a=this.props,n=a.auth,r=a.study,l=n&&n.user&&n.user.id;(0,k.fetchApiNative)(""+j.GET_STUDY_SCENARIOS_COUNT+r.id,"GET",null,l,{signal:t}).then(function(t){e.setState({name:e.getDefaultName(t.value),scenariosCount:t.value})}).catch(function(){})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.studies&&e.study){var a=e.study,n=e.studies.filter(function(e){return(e.study_id!==a.study_id||e.id!==a.id)&&e.is_imported&&e.state.status!==V.default.ACTIVE}).map(function(e){var t=(0,S.default)(a,"indication",""),n=(0,S.default)(a,"therapeutic_area",""),r=(0,S.default)(a,"target_num_patients",null),l=(0,x.getMomentDate)(a.fp),i=(0,x.getMomentDate)(a.target_lpft),o=(0,S.default)(a,"fpfv_fpft",0),u=(0,x.getMomentDate)(e.fp),d=(0,x.getMomentDate)(e.target_lpft),c=!0,f=[],p=[],m=(0,S.default)(e,"indication","");m.toLowerCase()!==t.toLowerCase()&&(f.push("indication"),c=!1,""===m&&p.push("indication"));var h=(0,S.default)(e,"therapeutic_area","");h.toLowerCase()!==n.toLowerCase()&&(f.push("therapeutic_area"),c=!1,""===h&&p.push("therapeutic_area"));var v=(0,S.default)(e,"target_num_patients",null);return v!==r&&(f.push("target_num_patients"),c=!1,null!==v&&0!==v||p.push("target_num_patients")),l&&_.default.isMoment(l)&&l.isValid()&&u&&_.default.isMoment(u)&&u.isValid()&&l.isSame(u)||(f.push("fp"),c=!1,null===u&&p.push("fp")),i&&_.default.isMoment(i)&&i.isValid()&&d&&_.default.isMoment(d)&&d.isValid()&&i.isSame(d)||(f.push("target_lpft"),c=!1,null===d&&p.push("target_lpft")),(0,S.default)(e,"fpfv_fpft")!==o&&(f.push("fpfv_fpft"),c=!1),s({},e,{isValid:c,invalidFields:f,missingValues:p})});this.setState({studies:n},function(){t.state.targetStudy&&t.handleTargetStudySelect({value:t.state.targetStudy.id})})}if(e.study&&e.scenario){var r=(0,x.getMomentDate)(e.study.study_details_updated_at),l=e.scenario.last_optimisation_date;this.setState({showOptimizeWarning:r&&l&&r.isAfter(l),studyLevelParamsSource:B,duplicateMethod:H})}}},{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"getDefaultName",value:function(e){var t=this.props.isImpact,a=e||this.state.scenariosCount,n=a+(t?2:1);return n<10?n="00"+n:n<100&&(n="0"+n),"Scenario "+n}},{key:"isUniqName",value:function(){var e=this.state.name;return!(!(0,g.default)(e)&&(this.state.changeStudy?this.state.targetStudy&&this.state.targetStudy.scenarioNames.some(function(t){return t===e}):this.props.study.scenarios.some(function(t){return t.name===e})))}},{key:"render",value:function(){var e=this.props,t=e.study,a=e.scenario,n=e.isShown,r=e.onClose,l=e.isApproved,i=e.isAdjusted,o=e.isPrevApproved,s=e.showCreateAdjustedOption,u=e.showMissingCountriesWarning,d=this.state,c=d.changeStudy,p=d.studies,m=d.targetStudy,h=d.agreeWithDataSummary,v=d.studyLevelParamsSource,_=d.duplicateMethod;if(!n||!a)return null;var E=!t.is_imported,y=!l&&!o,b=t.state.status===V.default.ACTIVE,O=this.isUniqName(),R=(0,g.default)(this.state.name),I=(0,S.default)(a,"studyParamsWarning.showStudyParamsWarning",null)&&b,P=b&&a.countries.some(function(e){return e.onlyActuals}),x=null,k=null;return O||(x="error",k="Please enter a unique scenario ID"),R&&(x="error",k="Please enter a scenario ID"),f.default.createElement(A.PopupDialog,{title:"Duplicate and edit scenario",className:"duplicate-scenario-dialog",isShown:n,handleClose:r,buttons:[f.default.createElement(A.ActionButton,{className:"duplicate-scenario-dialog__button-cancel",action:r},"Cancel"),f.default.createElement(A.ActionButton,{action:this.onSubmit,disabled:!O||R||c&&!h||I&&null===v||s&&null===_,primary:!0},"Save")]},f.default.createElement("div",{className:"duplicate-scenario"},(l||i||o)&&b&&f.default.createElement("span",{className:"duplicate-scenario__approved-msg"},"The approved plan will be duplicated into an adjusted scenario that you can edit"),f.default.createElement(T.default,{outsideLabel:"Scenario ID",maxLength:45,insideLabel:(c&&m?m.study_id:t.study_id)+" -",placeholder:"Please enter scenario ID",status:x,statusMessage:k,value:this.state.name,onChange:this.onChange})),s&&f.default.createElement("div",{className:"change-study__wrapper"},f.default.createElement("div",{className:"font-semi-bold"},"Please select duplication method"),f.default.createElement(L.default,{onOptionSelect:this.handleDuplicateMethodSelect},f.default.createElement(D.DropdownOption,{label:"Get simple copy not influenced by actual data",value:H,selected:_===H}),f.default.createElement(D.DropdownOption,{label:"Get adjusted copy considering actual study data",value:G,selected:_===G}))),E&&p&&y&&f.default.createElement("div",{className:"change-study__wrapper"},f.default.createElement("div",{style:{width:"380px",marginTop:"10px"}},f.default.createElement(N.default,{name:"test",checked:c,onChange:this.toggleChangeStudy,label:"Duplicate scenario to Planning study"})),f.default.createElement("div",{className:(0,C.default)({hidden:!c})},f.default.createElement("div",{className:(0,C.default)("dropdown-container",{disabled:!c})},f.default.createElement(D.DropdownSelectFilterable,{placeholder:"Search by study_id",onOptionSelect:this.handleTargetStudySelect},p.map(function(e){return f.default.createElement(D.DropdownOption,{className:e.isValid?"":"not-valid",key:e.id,label:e.study_id,value:e.id,selected:m&&e.study_id===m.study_id})})),m&&m.missingValues.length>0&&f.default.createElement("div",{className:"change-study-invalid-target-warning"},f.default.createElement("span",null,"Selected study cannot be used as target because of missing parameters")),m&&f.default.createElement(w.default,{agreeWithDataSummary:h,onAgreeCheck:this.handleAgreeCheck,sourceStudy:t,targetStudy:m,onStudyUpdate:this.handleStudyUpdate}),this.state.showOptimizeWarning&&!(m&&m.invalidFields.length>0&&0===m.missingValues.length)&&f.default.createElement("div",{className:"optimize-warning"},f.default.createElement("div",null,M.Icons.WARNING),f.default.createElement("div",null,"Scenario optimization is recommended before duplicating because playground study parameters were changed since last optimization"))))),I&&f.default.createElement("div",{className:"change-study__wrapper"},f.default.createElement("div",{className:"font-semi-bold"},"Please select a source to inherit a set of study-level parameters"),f.default.createElement(L.default,{onOptionSelect:this.handleSourceOptionSelect},f.default.createElement(D.DropdownOption,{label:"Current study",value:B,selected:v===B}),f.default.createElement(D.DropdownOption,{label:'Source scenario "'+a.name+'"',value:"scenario",selected:"scenario"===v}))),P&&f.default.createElement("div",{className:"change-study__wrapper"},f.default.createElement("p",{className:"change-study__description"},"Missing countries with actual data will be added to the the duplicated scenario automatically")),u&&!P&&b&&f.default.createElement("div",{className:"change-study__wrapper"},f.default.createElement("p",{className:"change-study__description"},"Missing countries with actual data (if any) will be added to the the duplicated scenario automatically")),f.default.createElement(F.ContextHelpButton,{page:"popup__duplicated-edit-scenario"+(b?"--tracking":""),popup:!0}))}}]),t}(c.Component);Y.propTypes={auth:h.default.object.isRequired,study:h.default.object.isRequired,scenario:h.default.object,isShown:h.default.bool.isRequired,onClose:h.default.func.isRequired,onSubmit:h.default.func.isRequired,isPrevApproved:h.default.bool,isApproved:h.default.bool,isAdjusted:h.default.bool,isImpact:h.default.bool,studies:h.default.array,updateStudy:h.default.func.isRequired,getScenarioViewerDataWithFullStudy:h.default.func.isRequired,showCreateAdjustedOption:h.default.bool,showMissingCountriesWarning:h.default.bool},Y.defaultProps={scenario:null,isPrevApproved:!1,dashboard:!1,isApproved:!1,isAdjusted:!1,isImpact:!1,studies:null,showCreateAdjustedOption:!1,showMissingCountriesWarning:!1};var q=function(e){return{auth:e.auth}};t.default=(0,p.connect)(q)(Y)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(10),c=n(d),f=a(54),p=(n(f),a(12)),m=a(51),h=n(m),v=a(6);a(2307);var _=function(e){var t=e.sourceStudy,a=e.targetStudy,n=(e.onStudyUpdate,e.agreeWithDataSummary),r=e.onAgreeCheck,i=["therapeutic_area","indication","target_num_patients","fp","target_lpft","fpfv_fpft"],o={indication:"Indication",therapeutic_area:"TA",target_lpft:"T/LPFT",target_num_patients:"T/Patients",fp:"FP",fpfv_fpft:"FPFV-FPFT"},s=i.map(function(e){return{key:e,title:o[e],source:t[e],target:a[e],status:!a.invalidFields.includes(e)}});return l.default.createElement("div",{style:{marginTop:"16px"},className:"fpo-study-params"},l.default.createElement("div",{className:"study-params__title"},"Playground and Planning studies parameters summary"),l.default.createElement(p.FlexTable,{headerHeight:60,rowHeight:35,rowsCount:s.length},l.default.createElement(p.Row,{data:s},l.default.createElement(p.Column,{header:l.default.createElement(E,{title:null,name:null}),data:l.default.createElement(g,{rows:s,dataField:"title"}),fixedWidth:!0,width:120}),l.default.createElement(p.Column,{header:l.default.createElement(E,{title:"Playground study",name:t.study_id}),data:l.default.createElement(g,{rows:s,dataField:"source"}),width:95}),l.default.createElement(p.Column,{header:l.default.createElement(E,{title:"Planning study",name:a.study_id}),data:l.default.createElement(g,{rows:s,dataField:"target"}),width:95}),l.default.createElement(p.Column,{header:l.default.createElement(E,{title:null,name:null}),data:l.default.createElement(g,{rows:s,dataField:"status"}),fixedWidth:!0,width:60}))),a&&a.invalidFields.length>0&&0===a.missingValues.length&&l.default.createElement("div",{className:"optimize-warning extended"},l.default.createElement("div",{className:"row-1"},l.default.createElement("div",null,v.Icons.WARNING),l.default.createElement("div",null,"Selected Planning study parameters don't match!\n           Resulting scenario timeline may differ from original one.\n           It's recommended to reoptimize duplicated scenario to align it with Planning study parameters.")),l.default.createElement("div",{className:"checkbox__wrapper"},l.default.createElement("div",null,"I agree"),l.default.createElement(h.default,{name:"test",checked:n,onChange:r,label:""}))),null)};_.propTypes={sourceStudy:o.default.object.isRequired,targetStudy:o.default.object.isRequired,onStudyUpdate:o.default.func.isRequired,agreeWithDataSummary:o.default.bool.isRequired,onAgreeCheck:o.default.func.isRequired};var E=function(e){var t=e.title,a=e.name;return l.default.createElement(p.Cell,{className:"header-cell"},l.default.createElement("div",null,t),l.default.createElement("div",{className:"name"},a))};E.defaultProps={title:null,name:null},E.propTypes={title:o.default.string,name:o.default.string};var g=function(e){var t=e.rowIndex,a=e.rows,n=e.dataField,r=a[t];if(!r)return null;var i=r.key,o=r[n];!o||"target_lpft"!==i&&"fp"!==i||"-"===o||"source"!==n&&"target"!==n||(o=(0,c.default)(o).format("DD MMM YYYY"));var s=void 0;return s="status"===n?l.default.createElement("div",{className:(0,u.default)("status-icon__wrapper",{success:o,error:!o})},o?v.Icons.SUCCESS:v.Icons.ERROR):!o&&0!==o&&"fpfv_fpft"!==i||"target_num_patients"===i&&0===o?l.default.createElement("div",{className:"missing-value"},"Missing value"):"title"===n&&"fpfv_fpft"===i?l.default.createElement("div",null,o):l.default.createElement("div",null,o,"fpfv_fpft"===i?"d":""),l.default.createElement(p.Cell,{className:"data-cell"},s,l.default.createElement("div",{className:"cell-underline"}))};g.defaultProps={rowIndex:null},g.propTypes={rowIndex:o.default.number,rows:o.default.array.isRequired,dataField:o.default.string.isRequired},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),m=n(p),h=a(1942),v=n(h),_=a(312),E=n(_),g=a(50),y=n(g),S=a(31),b=n(S),C=a(1943),O=n(C),T=a(83),R=n(T),w=a(67),A=n(w),I=a(2),N=n(I),D=a(537),P=a(535),L=n(P),M=a(534),x=n(M),k=a(54),j=n(k),F=a(6),U=a(129),V=n(U),B=a(269),H=n(B),G=a(538),Y=n(G),q=a(117),z=n(q),W=a(7),K=a(37),X=a(102),Z=n(X),J=a(17),Q=n(J);a(2308);var $=function(e){function t(e){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onChangeStudyConstraints=function(e,t){var n=a.state,i=n.studyConstraints,o=n.ownStudyConstraints,s=n.updated,d=a.props.scenario.study_level_data,c=void 0;if(t){if(c={ownStudyConstraints:o,studyConstraints:u({},i,l({},t,e))},"fp"===t){var f=(0,W.getMomentDate)(i.target_lpft);f.isBefore(e)&&(c.studyConstraints.target_lpft=(0,W.getMomentDate)(e).add(1,"day"))}}else c={ownStudyConstraints:!!e,studyConstraints:u({},i)};var p=a.validateStudyConstraintsStep(c.ownStudyConstraints,c.studyConstraints);c=u({},c,{isValid:u({},a.state.isValid,{studyConstraints:p})}),p&&(t&&!(0,O.default)(Object.keys(i),"therapeutic_area","indication").includes(t)||!!d!=!!e||d&&!(0,y.default)((0,W.prepareForComparison)(d),(0,W.prepareForComparison)(c.studyConstraints))?c.updated=u({},s,c.studyConstraints,{ownStudyConstraints:c.ownStudyConstraints}):c.updated=u({},(0,R.default)(s,[].concat(r(Object.keys(i)),["ownStudyConstraints"])))),a.setState(c)},a.validateStudyConstraintsStep=function(e,t){if(!e)return!0;var a=!0;return Object.keys(t).filter(function(e){return"indication"!==e&&"therapeutic_area"!==e}).forEach(function(e){t[e]||0===t[e]||(a=!1)}),a};var n=e.scenario,s=n&&null!==n.source_scenario_id,d={include:[],exclude:[],other:[],initialIncludedRegionsCountries:[],initialExcludedRegionsCountries:[],disabledIncludedCountries:[],disabledExcludedCountries:[]};n&&n.countries&&e.regionsCountries&&(d=(0,W.prepareLocationsData)(n,e.regionsCountries,s)),e.showCohorts&&n&&n.cohorts&&e.regionsCountries&&(n.cohorts=(0,W.prepareCohortsData)(e.scenario.cohorts,e.regionsCountries,s)),a.state=u({},d,{study:e.study,scenario:n,updated:{},isValid:{details:!0,targetPatients:!0,milestones:!0,locations:!0,patientAllocations:!0,studyConstraints:!0},fixedBarLeft:"auto",ownStudyConstraints:!!n.study_level_data,studyConstraints:n.study_level_data?u({},n.study_level_data):{indication:e.study.indication,therapeutic_area:e.study.therapeutic_area,target_num_patients:e.study.target_num_patients,fp:e.study.fp,target_lpft:e.study.target_lpft,fpfv_fpft:e.study.fpfv_fpft}});var c=e.dirtyData;if(c){var f=void 0,p=void 0;if(c.scenario&&e.regionsCountries){var m=e.regionsCountries.map(function(e){var t=e.countries.map(function(e){return u({},e,{platform_country_id:e.id})});return u({},e,{countries:t})});f=(0,b.default)(m),p=(0,b.default)(m),c.includeCountries&&c.includeCountries.forEach(function(e){e.countries.forEach(function(t){var a=f.find(function(t){return t.name===e.name});(0,W.updateInitialRegionsCountries)(a,t)})}),c.excludeCountries&&c.excludeCountries.forEach(function(e){e.countries.forEach(function(t){var a=p.find(function(t){return t.name===e.name});(0,W.updateInitialRegionsCountries)(a,t)})})}c=u({},c,{initialExcludedRegionsCountries:p,initialIncludedRegionsCountries:f}),a.state=c}return a.onResize=a.onResize.bind(a),a.onValidationChange=a.onValidationChange.bind(a),a.onChangeDetails=a.onChangeDetails.bind(a),a.onBlurDetails=a.onBlurDetails.bind(a),a.onChangeTargetPatients=a.onChangeTargetPatients.bind(a),a.onChangeMilestones=a.onChangeMilestones.bind(a),a.onClose=a.onClose.bind(a),a.onOptimize=a.onOptimize.bind(a),a.onChangeRegionsCountries=a.onChangeRegionsCountries.bind(a),a.onChangePatientAllocation=a.onChangePatientAllocation.bind(a),a.onChangeCohort=a.onChangeCohort.bind(a),a.onAddCohort=a.onAddCohort.bind(a),a.onRemoveCohort=a.onRemoveCohort.bind(a),a}return s(t,e),d(t,[{key:"componentDidMount",value:function(){document.body.scrollTop=0,window.addEventListener("resize",this.onResize),"auto"===this.state.fixedBarLeft&&this.setState({fixedBarLeft:this.getFixedBarLeft()})}},{key:"componentWillReceiveProps",value:function(e){var t=e.activeUser,a=e.requirePageRefresh,n=e.scenario,r=n&&null!==n.source_scenario_id;if(a&&t&&!(0,E.default)(this.state.updated)&&((0,K.removeParamItemStorage)("fpo-dirty-data",t.id+"-"+e.studyId+"-"+e.scenarioId+"-edit"),(0,K.addToStorage)("fpo-dirty-data",{id:t.id+"-"+e.studyId+"-"+e.scenarioId+"-edit",values:u({},this.state,{submitted:!1})})),e.scenario&&e.scenario.countries&&e.regionsCountries&&!e.showCohorts&&!e.dirtyData){var l=(0,W.prepareLocationsData)(e.scenario,e.regionsCountries,r);this.setState(u({},l))}else if(e.scenario&&e.scenario.cohorts&&e.regionsCountries&&e.showCohorts&&!e.dirtyData){var i=(0,W.prepareCohortsData)(e.scenario.cohorts,e.regionsCountries,r);this.setState({scenario:u({},this.state.scenario,{cohorts:i})})}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function(){this.setState({fixedBarLeft:this.getFixedBarLeft()})}},{key:"onValidationChange",value:function(e,t){this.setState({isValid:u({},this.state.isValid,l({},e,t))})}},{key:"onChangeDetails",value:function(e){var t=this,a=this.props.study.scenarios.filter(function(e){return e.id!==t.props.scenario.id}).map(function(e){return e.name}),n=a.indexOf(e)>-1;this.setState({updated:u({},this.state.updated,{name:e}),isValid:u({},this.state.isValid,{details:!(!e||n)})})}},{key:"onBlurDetails",value:function(e){var t=this,a=this.props,n=a.studyId,r=a.validateScenarioName,l=a.scenario.name;e&&e!==l&&r(n,e).then(function(e){var a=e.value;t.state.isValid.details===a&&t.setState({isValid:u({},t.state.isValid,{details:!a})})})}},{key:"onChangeTargetPatients",value:function(e){this.setState({updated:u({},this.state.updated,e)})}},{key:"onChangeMilestones",value:function(e){this.setState({updated:u({},this.state.updated,(0,R.default)(e,"fp"))})}},{key:"onChangeRegionsCountries",value:function(e,t){var a=this,n=(0,b.default)(this.state.otherCountries),r=(0,b.default)("Include"===t?this.state.includeCountries:this.state.excludeCountries),l=e.map(function(e){return u({},e,{countries:e.countries.map(function(a){var l={patients_min:null,patients:null,patients_max:null,isOverridden:null},i=t.toUpperCase();return(0,W.changeRegionsCountries)(r,n,e,a,l),u({},a,{uniqid:e.id+"_"+a.id},l,{constraint:i})})})});n=n.filter(function(e){return e.countries.length}),r=r.filter(function(e){return e.countries=e.countries.filter(function(e){return!!a.props.scenario.countries.find(function(t){return"Unspecified country"===e.name?t.country_name===e.name&&t.region_id===e.region_id:t.country_name===e.name})}),!!e.countries.length}),r.length&&r.forEach(function(e){e.countries.forEach(function(e){e.constraint=null});var t=n.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});t?t.countries=t.countries.concat(e.countries):n.push(e)}),"Include"===t?this.setState({includeCountries:l,otherCountries:n,updated:u({},this.state.updated,{includeCountries:l,otherCountries:n})}):this.setState({excludeCountries:l,otherCountries:n,updated:u({},this.state.updated,{excludeCountries:l,otherCountries:n})})}},{key:"onChangePatientAllocation",value:function(e,t,a,n){var r,i=n?"includeCountries":"otherCountries",o=this.state[i],s=/^[1-9]\d*$/,d=!0;o.forEach(function(n,r){return n.countries.forEach(function(n,l){if(n.id===e){if(!s.test(a)&&0!==a.length)return;o[r].countries[l][t]=a?parseInt(a,10):null,"patients"===t&&(o[r].countries[l].isOverridden=!0),n.patients?(n.patients_min>n.patients||n.patients_max&&n.patients_max<n.patients)&&(d=!1):n.patients_max&&n.patients_max<n.patients_min&&(d=!1)}})}),this.setState((r={},l(r,i,o),l(r,"updated",u({},this.state.updated,l({},i,o))),l(r,"isValid",u({},this.state.isValid,{patientAllocations:d})),r))}},{key:"onClose",value:function(){this.props.onClose()}},{key:"onOptimize",value:function(){var e=this,t=this.state,a=t.includeCountries,n=t.excludeCountries,r=t.otherCountries;(0,E.default)(this.state.updated)&&this.onClose();var l=[];a.forEach(function(e){var t=e.countries.map(function(e){return u({},e,{constraint:"INCLUDE",unlock:(!e.unlock||!(e.patients||e.patients_min||e.patients_max))&&e.unlock})}),a=l.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});a?a.countries=a.countries.concat(t):l.push(u({},e,{countries:t}))}),r.forEach(function(e){var t=e.countries.map(function(e){return u({},e,{constraint:null,unlock:(!e.unlock||!(e.patients||e.patients_min||e.patients_max))&&e.unlock})}),a=l.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});a?a.countries=a.countries.concat(t):l.push(u({},e,{countries:t}))}),n.forEach(function(e){var t=e.countries.map(function(e){return u({},e,{constraint:"EXCLUDE"})}),a=l.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});a?a.countries=a.countries.concat(t):l.push(u({},e,{countries:t}))}),this.props.scenario.countries.forEach(function(e){var t=l.find(function(t){return t.name.toLowerCase()===e.region_name.toLowerCase()});t?t.countries.find(function(t){return t.name.toLowerCase()===e.country_name.toLowerCase()})||t.countries.push({id:e.platform_country_id,name:e.country_name,isSelected:!1,region_id:t.id,disabled:!1,constraint:null,platform_country_id:e.platform_country_id}):l.push({id:e.region_id,name:e.region_name,isCountryRegion:e.regionHasSingleCountry,countries:[{id:e.platform_country_id,name:e.country_name,isSelected:!1,region_id:e.region_id,disabled:!1,constraint:null,platform_country_id:e.platform_country_id}]})}),this.setState({updated:u({},(0,R.default)(this.state.updated,["includeCountries","excludeCountries","otherCountries"]),{locations:l,cohorts:this.state.scenario.cohorts})},function(){(0,E.default)(e.state.updated)?e.onClose():e.setState({submitted:!0},function(){(0,K.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-"+e.props.scenarioId+"-edit");var t=e.state.updated;t.locations&&t.locations.forEach(function(e,a){e.countries.forEach(function(e,n){e.isOverridden||(t.locations[a].countries[n].patients=null)})}),e.state.ownStudyConstraints||(t=u({},t,{indication:null,therapeutic_area:null,target_num_patients:null,fp:null,target_lpft:null,fpfv_fpft:null})),e.props.onSubmit((0,R.default)(t,["scenario"]))})})}},{key:"onChangeCohort",value:function(e,t,a,n,r){var l=this.state.scenario;l.cohorts=l.cohorts.map(function(l){var i=l;return i.id===e&&(n?i[n][t]=a:"locations"!==t||r?i[t]=a:i.locations=a.map(function(e){var t=e.countries.map(function(t){var a=null,n=null,r=!1,l=i.locations.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});if(l){var o=l.countries.find(function(e){return e.name.toLowerCase()===t.name.toLowerCase()});o&&(a=o.patients,n=o.sites,r=o.hasActuals)}return u({},t,{patients:a,sites:n,hasActuals:r})});return u({},e,{countries:t})}),i.state!==X.ITEM_STATE.NEW&&(i.state=X.ITEM_STATE.UPDATED)),i});var i=(0,z.default)(l);this.setState({scenario:l,isValid:u({},this.state.isValid,{cohorts:i}),updated:u({},this.state.updated,{scenario:l})})}},{key:"onAddCohort",value:function(){var e=this.state.scenario,t=e.cohorts[e.cohorts.length-1],a={id:A.default.generate(),name:"Cohort "+(e.cohorts.length+1),rank:t.rank+1,locations:[],state:X.ITEM_STATE.NEW,trigger:{trigger_type:Z.default.MILESTONES,start_date:null,num_patients:null,num_patients_abs:!0,start_milestone:null,source_cohort_id:null}};e.cohorts=[].concat(r(e.cohorts),[a]);var n=(0,z.default)(e);this.setState({scenario:e,isValid:u({},this.state.isValid,{cohorts:n}),updated:{scenario:e}})}},{key:"onRemoveCohort",value:function(e){var t=this.state.scenario;t.cohorts=t.cohorts.reduce(function(t,a){var n=a;return n.id!==e?t.push(n):n.id===e&&n.state!==X.ITEM_STATE.NEW&&(n.state=X.ITEM_STATE.DELETED,t.push(n)),t},[]);var a=(0,z.default)(t);this.setState({scenario:t,isValid:u({},this.state.isValid,{cohorts:a}),updated:{scenario:t}})}},{key:"getFixedBarLeft",value:function(){if(!this.fixedBarColumnEl)return"auto";var e=this.fixedBarColumnEl.getBoundingClientRect();return e.left+e.width+-48}},{key:"isValid",value:function(){return(0,v.default)(this.state.isValid).every(function(e){return e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.study,n=t.scenario,r=t.showCohorts,l=this.state,i=l.initialIncludedRegionsCountries,o=l.initialExcludedRegionsCountries,s=l.includeCountries,u=l.excludeCountries,d=l.otherCountries,c=l.disabledIncludedCountries,p=l.disabledExcludedCountries,m=l.submitted,h=l.updated,v=l.ownStudyConstraints,_=l.studyConstraints,g=(0,W.mergeLocations)(s,d);return a&&n&&0!==i.length&&0!==o.length?f.default.createElement("div",{className:"edit-scenario-wizard"},f.default.createElement("div",{className:"fpo-grid"},f.default.createElement("div",{className:"fpo-row edit-scenario-wizard__header"},f.default.createElement("div",{className:(0,N.default)("fpo-col-4",{"fpo-col-offset-4":!r,"fpo-col-offset-1":r})},f.default.createElement("h4",null,"Edit Scenario")),f.default.createElement("div",{className:(0,N.default)("fpo-col-1",{"fpo-col-offset-5":r,"fpo-col-offset-1":!r}),ref:function(t){e.fixedBarColumnEl=t}},f.default.createElement("div",{className:"edit-scenario-wizard__fixed-bar",style:{left:this.state.fixedBarLeft}},f.default.createElement("div",{className:"edit-scenario-wizard__close",onClick:this.onClose},F.Icons.CROSS)))),f.default.createElement(D.WizardScenarioDetailsEditComponent,{activeStep:!0,showCohorts:r,onChange:this.onChangeDetails,onBlur:this.onBlurDetails,studyDescription:a.description,studyIndication:a.indication,studyId:a.study_id,studyTa:a.therapeutic_area,status:this.state.isValid.details,value:void 0!==this.state.updated.name?this.state.updated.name:n.name}),f.default.createElement("div",{className:"fpo-row edit-scenario-wizard__spacer"}),f.default.createElement(Y.default,{activeStep:!0,validationChangeHandler:this.onValidationChange,status:this.state.isValid.studyConstraints,showCohorts:r,ownStudyConstraints:v,values:_,onChange:this.onChangeStudyConstraints}),f.default.createElement("div",{className:"fpo-row edit-scenario-wizard__spacer"}),r&&f.default.createElement(x.default,{isAdjusted:a.state.status===Q.default.ACTIVE&&null!==n.source_scenario_id,cohorts:this.state.scenario.cohorts,onAdd:this.onAddCohort,onRemove:this.onRemoveCohort,onUpdate:this.onChangeCohort,locations:this.props.regionsCountries,study:a,isDisabled:!1,activeStep:!0}),!r&&f.default.createElement(L.default,{activeStep:!0,scenarioCountries:n.countries,disabledIncludedCountries:c,disabledExcludedCountries:p,recommendedByAnalytics:d,includeCountries:s,excludeCountries:u,includedRegionsCountries:i,excludedRegionsCountries:o,onChange:this.onChangeRegionsCountries,onValidationChange:function(){return e.onValidationChange("locations",!0,!0)}}),!r&&f.default.createElement(H.default,{hidden:!g||0===g.length,activeStep:!0,onUpdate:this.onChangePatientAllocation,locations:g}),f.default.createElement("div",{className:"fpo-row"},f.default.createElement("div",{className:(0,N.default)("fpo-col edit-scenario-wizard__footer",{"fpo-col-offset-4 fpo-col-4":!r,"fpo-col-offset-1 fpo-col-9":r})},f.default.createElement(j.default,{className:"edit-scenario-wizard__optimize_button",disabled:!this.isValid()||m||(0,E.default)(this.state.updated),onClick:this.onOptimize},"Save")))),f.default.createElement("div",{className:"fpo-row edit-scenario-wizard__spacer"}),f.default.createElement(V.default,{removeStoredData:this.props.activeUser.id+"-"+this.props.studyId+"-"+this.props.scenarioId+"-edit",hasUnsaved:!m&&!(0,E.default)(h)&&!this.props.requirePageRefresh})):null}}]),t}(c.Component);$.defaultProps={showCohorts:!1,requirePageRefresh:!1,dirtyData:null},$.propTypes={study:m.default.object.isRequired,studyId:m.default.number.isRequired,scenario:m.default.object.isRequired,scenarioId:m.default.number.isRequired,onClose:m.default.func.isRequired,onSubmit:m.default.func.isRequired,regionsCountries:m.default.array.isRequired,showCohorts:m.default.bool,activeUser:m.default.object.isRequired,requirePageRefresh:m.default.bool,dirtyData:m.default.object,validateScenarioName:m.default.func.isRequired},t.default=$},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(883),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditStudyDescriptionComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=a(0),d=n(u),c=a(1),f=n(c),p=a(75),m=a(11),h=n(m),v=a(23),_=n(v),E=function(e){var t=e.input,a=e.disabled,n=e.maxLength,r=e.insideLabel,l=e.outsideLabel,i=e.placeholder,o=e.meta,u=(o.asyncValidating,o.touched),c=o.error;return d.default.createElement("div",null,d.default.createElement(_.default,s({},t,{defaultValue:t.value,onChange:void 0,onBlur:t.onChange,type:"text",maxLength:n,disabled:a,placeholder:i,outsideLabel:l,status:u&&c?"error":null,statusMessage:c,insideLabel:r})))},g=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={fixedBarLeft:"auto"},a}return i(t,e),o(t,[{key:"render",value:function(){var e=this.props.study;return d.default.createElement("form",{action:"javascript:void(0);"},d.default.createElement(p.Field,{name:"description",outsideLabel:"Description (optional)",disabled:(0,h.default)(e,"synchronizedWithImpact",!1),placeholder:e?e.description:"Enter description",maxLength:1e3,component:E}))}}]),t}(u.Component);g.propTypes={study:f.default.object},g.defaultProps={study:null},t.EditStudyDescriptionComponent=g,t.default=(0,p.reduxForm)({form:"editStudyDescriptionWizard",enableReinitialize:!0,keepDirtyOnReinitialize:!0})(g)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditStudyIdComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=a(0),d=n(u),c=a(1),f=n(c),p=a(75),m=a(148),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(m),v=a(23),_=n(v),E=a(28),g=function(e){var t=e.input,a=e.disabled,n=e.maxLength,r=e.insideLabel,l=e.outsideLabel,i=e.placeholder,o=e.meta,u=(o.asyncValidating,o.touched),c=o.error;return d.default.createElement("div",null,d.default.createElement(_.default,s({},t,{type:"text",maxLength:n,disabled:a,placeholder:i,outsideLabel:l,status:u&&c?"error":null,statusMessage:c,insideLabel:r})))},y=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={fixedBarLeft:"auto"},a}return i(t,e),o(t,[{key:"componentDidMount",value:function(){this.props.onValidationChange(this.props.valid,!1)}},{key:"componentWillReceiveProps",value:function(e){this.props.valid===e.valid&&e.anyTouched===this.props.anyTouched||this.props.onValidationChange&&this.props.onValidationChange(e.valid,e.anyTouched)}},{key:"render",value:function(){var e=this.props.study;return d.default.createElement("form",{action:"javascript:void(0);"},d.default.createElement(p.Field,{name:"study_id",outsideLabel:"Study ID",placeholder:e?e.study_id:"Please enter study ID",maxLength:45,disabled:e.is_imported,component:g,validate:[h.requiredStudy]}))}}]),t}(u.Component);y.propTypes={onValidationChange:f.default.func.isRequired,study:f.default.object},y.defaultProps={study:null},t.EditStudyIdComponent=y,t.default=(0,p.reduxForm)({form:"editStudyIdWizard",enableReinitialize:!0,keepDirtyOnReinitialize:!0,asyncValidate:E.validateStudyName,asyncBlurFields:["study_id"]})(y)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditStudyIndicationComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(75),p=a(11),m=n(p),h=a(148),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(h),_=a(88),E=a(69),g=n(E),y=a(13),S=n(y),b=a(100),C=n(b),O=function(e){var t=e.input,a=e.disabled,n=e.outsideLabel,r=e.options,l=e.initialSelect,i=e.placeholder,o=e.meta,s=o.touched,d=o.error;return u.default.createElement("div",null,u.default.createElement(g.default,{onOptionSelect:t.onChange,initialSelect:l,label:n,disabled:a,status:s&&d?"error":null,placeholder:i},r.map(function(e){return u.default.createElement(E.DropdownOption,{key:"dropdown-option_"+e.name,label:e.name,value:e})})))},T=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={fixedBarLeft:"auto"},a}return i(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.availableTherapeuticAreas,a=e.availableIndications,n=e.study,r=e.impactTooltip,l=[],i=null;n&&(l=t.filter(function(e){return e.name===n.therapeutic_area}),i=a.filter(function(e){return e.name===n.indication}).pop());var o=l.length?(0,_.getIndications)(l[0],a):[];return u.default.createElement("form",{action:"javascript:void(0);"},u.default.createElement(f.Field,{initialSelect:o.length?i:{},name:"indication",outsideLabel:"Indication",placeholder:n?n.indication:"Select indication area",options:o,disabled:(0,m.default)(n,"is_imported")&&((0,m.default)(n,"synchronizedWithImpact",!1)||!r),component:O,validate:[v.required]}),r&&u.default.createElement(S.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:u.default.createElement("span",null,"Impact value:",u.default.createElement("br",null),r)},u.default.createElement("div",{className:"misaligned-warning__icon narrow"},C.default.INFO_O)))}}]),t}(s.Component);T.propTypes={study:c.default.object,availableTherapeuticAreas:c.default.array,availableIndications:c.default.array,impactTooltip:c.default.string},T.defaultProps={availableTherapeuticAreas:[],availableIndications:[],therapeutic_area:null,study:null,impactTooltip:null},t.EditStudyIndicationComponent=T,t.default=(0,f.reduxForm)({form:"editStudyIndicationWizard"})(T)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditStudyPhaseComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(75),p=a(11),m=n(p),h=a(148),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(h),_=a(69),E=n(_),g=a(13),y=n(g),S=a(100),b=n(S),C=a(17),O=function(e){var t=e.input,a=e.disabled,n=e.outsideLabel,r=e.options,l=e.initialSelect,i=e.placeholder,o=e.meta,s=o.touched,d=o.error;return u.default.createElement("div",null,u.default.createElement(E.default,{onOptionSelect:t.onChange,initialSelect:l,label:n,disabled:a,status:s&&d?"error":null,placeholder:i},r.map(function(e){return u.default.createElement(_.DropdownOption,{key:"dropdown-option_"+e.name,label:e.name,value:e})})))},T=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={fixedBarLeft:"auto"},a}return i(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.study,a=e.impactTooltip,n=C.PHASE,r=null;return t&&(r=n.filter(function(e){return e.name===t.phase}).pop()),u.default.createElement("form",{action:"javascript:void(0);"},u.default.createElement(f.Field,{initialSelect:n.length?r:{},name:"phase",outsideLabel:"Phase",placeholder:t?t.phase:"Select phase",options:n,disabled:(0,m.default)(t,"is_imported")&&((0,m.default)(t,"synchronizedWithImpact",!1)||!a),component:O,validate:[v.required]}),a&&u.default.createElement(y.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:u.default.createElement("span",null,"Impact value:",u.default.createElement("br",null),a)},u.default.createElement("div",{className:"misaligned-warning__icon narrow"},b.default.INFO_O)))}}]),t}(s.Component);T.propTypes={study:c.default.object,impactTooltip:c.default.string},T.defaultProps={study:null,impactTooltip:null},t.EditStudyPhaseComponent=T,t.default=(0,f.reduxForm)({form:"editStudyPhaseWizard"})(T)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditStudyTherapeuticComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(75),p=a(11),m=n(p),h=a(148),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(h),_=a(69),E=n(_),g=a(13),y=n(g),S=a(100),b=n(S),C=function(e){var t=e.input,a=e.disabled,n=e.outsideLabel,r=e.options,l=e.initialSelect,i=e.placeholder,o=e.meta,s=o.touched,d=o.error;return u.default.createElement("div",null,u.default.createElement(E.default,{onOptionSelect:t.onChange,initialSelect:l,label:n,disabled:a,status:s&&d?"error":null,placeholder:i},r.map(function(e){return u.default.createElement(_.DropdownOption,{key:"dropdown-option_"+e.name,label:e.name,value:e})})))},O=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={fixedBarLeft:"auto"},a}return i(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.availableTherapeuticAreas,a=e.study,n=e.impactTooltip,r=null;return a&&(r=t.filter(function(e){return e.name===a.therapeutic_area}).pop()),u.default.createElement("form",{action:"javascript:void(0);"},u.default.createElement(f.Field,{initialSelect:r,name:"therapeutic_area",outsideLabel:"Therapeutic area",placeholder:a?a.therapeutic_area:"Select therapeutic area",options:t,component:C,disabled:(0,m.default)(a,"is_imported")&&((0,m.default)(a,"synchronizedWithImpact",!1)||!n),validate:[v.required]}),n&&u.default.createElement(y.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:u.default.createElement("span",null,"Impact value:",u.default.createElement("br",null),n)},u.default.createElement("div",{className:"misaligned-warning__icon narrow"},b.default.INFO_O)))}}]),t}(s.Component);O.propTypes={availableTherapeuticAreas:c.default.array,study:c.default.object,impactTooltip:c.default.string},O.defaultProps={availableTherapeuticAreas:[],availableIndications:[],therapeutic_area:null,study:null,impactTooltip:null},t.EditStudyTherapeuticComponent=O,t.default=(0,f.reduxForm)({form:"editStudyLevelTherapeuticWizard",enableReinitialize:!0,keepDirtyOnReinitialize:!0})(O)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),m=n(p),h=a(2),v=n(h),_=a(50),E=n(_),g=a(65),y=n(g),S=a(11),b=n(S),C=a(6),O=a(889),T=n(O),R=a(887),w=n(R),A=a(886),I=n(A),N=a(885),D=n(N),P=a(540),L=n(P),M=a(536),x=n(M),k=a(54),j=n(k),F=a(129),U=n(F),V=a(530),B=n(V),H=a(13),G=n(H),Y=a(539),q=n(Y),z=a(888),W=n(z),K=a(7),X=a(40),Z=n(X),J=a(88),Q=a(37);a(2309);var $=a(46),ee=a(17),te=function(e){function t(e){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onChangePhase=function(e){var t=e.phase.label;a.setState(function(e){return{study:u({},e.study,{phase:t}),formError:u({},e.formError,{phase:!0})}},function(){a.setState(u({},(0,J.getMisalignedDetails)(a.state.study)))})},a.validationFilters=function(e){a.setState(function(t){return{formError:u({},t.formError,{inclusion:e})}})},a.toggleDetails=function(){a.setState({isMismatchDetailsShown:!a.state.isMismatchDetailsShown})},a.state=e.dirtyData||u({study:e.study,submitted:!1,formError:{indication:!0,study_id:!0,target_num_patients:!0,fpfv_fpft:!0},isMismatchDetailsShown:!1},(0,J.getMisalignedDetails)(e.study)),a.onClose=a.onClose.bind(a),a.onSubmit=a.onSubmit.bind(a),a.onChangeTherapeutic=a.onChangeTherapeutic.bind(a),a.onChangeIndication=a.onChangeIndication.bind(a),a.onChangeId=a.onChangeId.bind(a),a.onChangeDescription=a.onChangeDescription.bind(a),a.onChangePatients=a.onChangePatients.bind(a),a.onChangeMilestones=a.onChangeMilestones.bind(a),a.validationStudyID=a.validationStudyID.bind(a),a.validationPatients=a.validationPatients.bind(a),a.validationMilestones=a.validationMilestones.bind(a),a.onChangeFilters=a.onChangeFilters.bind(a),a}return s(t,e),d(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.studyId,a=e.activeUser,n=e.requirePageRefresh,r=l(e,["studyId","activeUser","requirePageRefresh"]);e.study&&((0,Z.default)(a,e.study).isUserHasStudyFullControl||(this.props.onClose(e.study.id),this.props.forbiddenError($.DONT_HAVE_ACCESS_TO_VIEW_PAGE))),n&&a&&!(0,E.default)(e.study,this.state.study)&&((0,Q.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"-"+this.props.studyId+"-edit"),(0,Q.addToStorage)("fpo-dirty-data",{id:a.id+"-"+t+"-edit",values:this.state})),(!e.dirtyData&&!n&&!this.props.study||this.props.dirtyData&&!e.dirtyData)&&this.setState(u({study:e.study},(0,J.getMisalignedDetails)(e.study),r))}},{key:"onClose",value:function(){this.props.onClose(this.props.study.id)}},{key:"onSubmit",value:function(){var e=this;this.setState({submitted:!0},function(){(0,Q.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-edit"),e.props.onSubmit(e.state.study)})}},{key:"onChangeTherapeutic",value:function(e){var t=this,a=e.therapeutic_area.label;this.setState(function(e){return{study:u({},e.study,{therapeutic_area:a,indication:"Select indication area"}),formError:u({},e.formError,{indication:!1})}},function(){t.setState(u({},(0,J.getMisalignedDetails)(t.state.study)))})}},{key:"onChangeIndication",value:function(e){var t=this,a=e.indication.label;this.setState(function(e){return{study:u({},e.study,{indication:a}),formError:u({},e.formError,{indication:!0})}},function(){t.setState(u({},(0,J.getMisalignedDetails)(t.state.study)))})}},{key:"onChangeId",value:function(e){var t=e.study_id;this.setState(function(e){return{study:u({},e.study,{study_id:t})}})}},{key:"onChangeDescription",value:function(e){var t=e.description;this.setState(function(e){return{study:u({},e.study,{description:t})}})}},{key:"onChangePatients",value:function(e){var t=this,a=e.target_num_patients;this.setState(function(e){return{study:u({},e.study,{target_num_patients:+a})}},function(){t.setState(u({},(0,J.getMisalignedDetails)(t.state.study)))})}},{key:"onChangeMilestones",value:function(e){var t=this,a=e.fp,n=e.end_date,r=e.fpfv_fpft;this.setState(function(e){return{study:u({},e.study,{target_lpft:(0,K.prepareToStudyEditFormat)(n),fp:(0,K.prepareToStudyEditFormat)(a),fpfv_fpft:+r})}},function(){t.setState(u({},(0,J.getMisalignedDetails)(t.state.study)))})}},{key:"onChangeFilters",value:function(e){var t=this;this.setState(function(t){return{study:u({},t.study,e)}},function(){t.setState(u({},(0,J.getMisalignedDetails)(t.state.study)))})}},{key:"validationStudyID",value:function(e){this.setState(function(t){return{formError:u({},t.formError,{study_id:e})}})}},{key:"validationPatients",value:function(e){this.setState(function(t){return{formError:u({},t.formError,{target_num_patients:e})}})}},{key:"validationMilestones",value:function(e){this.setState(function(t){return{formError:u({},t.formError,{fpfv_fpft:e})}})}},{key:"render",value:function(){var e=this,t=(0,v.default)("wizard-step","fpo-row","fpo-wizard-study-details-container","edit-study-level-row"),a=this.state,n=a.study,l=a.formError,i=a.impactParams,o=a.invalidFields,s=this.props,d=s.availableTherapeuticAreas,c=s.availableIndications,p=Object.values(l);if(!n)return null;var m=["impactStudyParams","description","study_id"].concat(r(ee.STUDY_PARAMS),r(ee.STUDY_FILTERS)),h=(0,y.default)(n,m),_=(0,y.default)(this.props.study,m),g=(0,E.default)(h,_);return f.default.createElement("div",{className:"edit-study-level-wizard"},f.default.createElement("div",{className:"fpo-grid"},f.default.createElement("div",{className:"fpo-row edit-study-level-wizard__header"},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-4"}),f.default.createElement("div",{className:"fpo-col-offset-1 fpo-col-1",ref:function(t){e.fixedBarColumnEl=t}},f.default.createElement("div",{className:"edit-study-level-wizard__fixed-bar"},f.default.createElement("div",{className:"edit-study-level-wizard__close",onClick:this.onClose},C.Icons.CROSS)))),f.default.createElement("div",{className:"fpo-row"},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-4"},n.synchronizedWithImpact?f.default.createElement("span",{className:"edit-scenario-wizard__attention"},"You are editing a study synchronized with Impact. The only parameter allowed to be edited is FPFV-FPFT"):null)),f.default.createElement("div",{className:t},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-4"},f.default.createElement("h1",null,"Study details"),f.default.createElement(T.default,{impactTooltip:o.includes("therapeutic_area")?i.therapeutic_area:null,study:n,onChange:this.onChangeTherapeutic,availableTherapeuticAreas:d,availableIndications:c}),f.default.createElement(w.default,{impactTooltip:o.includes("indication")?i.indication:null,availableTherapeuticAreas:d,availableIndications:c,onChange:this.onChangeIndication,study:n}),f.default.createElement(W.default,{impactTooltip:o.includes("phase")?i.phase:null,onChange:this.onChangePhase,study:n}),f.default.createElement(I.default,{study:n,initialValues:{study_id:n?""+n.study_id:""},onValidationChange:this.validationStudyID,onChange:this.onChangeId}),f.default.createElement(D.default,{study:n,initialValues:{description:n&&n.description?n.description:""},onChange:this.onChangeDescription}),f.default.createElement("div",{className:"keyline-separator"}))),f.default.createElement("div",{className:t},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-4"},f.default.createElement(q.default,{onChange:this.onChangeFilters,isEditing:!0,onValidationChange:this.validationFilters,activeStep:!0,study:n,initialValues:(0,y.default)(n,ee.STUDY_FILTERS)}))),f.default.createElement("div",{className:t},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-2"},f.default.createElement(L.default,{impactTooltip:o.includes("target_num_patients")?i.target_num_patients:null,isEditing:!0,disabled:(0,b.default)(n,"synchronizedWithImpact",!1),activeStep:!0,initialValues:{target_num_patients:n&&n.target_num_patients?""+n.target_num_patients:""},onChange:this.onChangePatients,onValidationChange:this.validationPatients}))),f.default.createElement("div",{className:t},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-4"},f.default.createElement(x.default,{invalidFields:o,impactParams:i,activeStep:!0,key:"milestone",study:n,onChange:this.onChangeMilestones,onValidationChange:this.validationMilestones,initialValues:{fp:n?(0,K.getMomentDate)(n.fp):null,end_date:n?(0,K.getMomentDate)(n.target_lpft):null,fpfv_fpft:n?n.fpfv_fpft:""},isEditing:!0}))),o&&o.length>0&&f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:t},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-4"},f.default.createElement("div",{className:"edit-scenario-wizard__warning"},f.default.createElement("div",{className:"message"},"Study parameters aren't consistent with Impact data."),f.default.createElement(G.default,{mouseEnterDelay:.7,placement:"top",overlay:"Click to see mismatched parameters"},f.default.createElement("div",{className:"study-details-warning-details__wrapper",onClick:this.toggleDetails},C.Icons.INFO_O))))),f.default.createElement(B.default,u({},this.state,{infoOnly:!0,isShown:this.state.isMismatchDetailsShown,onClose:this.toggleDetails}))),f.default.createElement("div",{className:t},f.default.createElement("div",{className:"fpo-col-offset-4 fpo-col-4"},f.default.createElement("div",null,f.default.createElement("div",{className:"edit-study-level-wizard__footer"},!n.synchronizedWithImpact&&f.default.createElement("div",{className:"edit-scenario-wizard__attention"},n.is_imported?f.default.createElement("span",null,"You are editing a study imported from Impact - this will affect all scenarios in your study"):f.default.createElement("span",null,"You are editing a study level characteristic - this will affect all scenarios in your study")),f.default.createElement(j.default,{onClick:this.onSubmit,className:"edit-study-wizard__apply_button",disabled:p.includes(!1)||g},"Apply changes")))))),f.default.createElement(U.default,{removeStoredData:this.props.activeUser.id+"-"+this.props.studyId+"-edit",hasUnsaved:!this.state.submitted&&!this.props.requirePageRefresh&&!g}))}}]),t}(c.Component);te.propTypes={onClose:m.default.func.isRequired,onSubmit:m.default.func.isRequired,availableTherapeuticAreas:m.default.array,availableIndications:m.default.array,study:m.default.object,studyId:m.default.number.isRequired,activeUser:m.default.object.isRequired,requirePageRefresh:m.default.bool,dirtyData:m.default.object,forbiddenError:m.default.func.isRequired},te.defaultProps={availableTherapeuticAreas:[],availableIndications:[],study:null,requirePageRefresh:!1,dirtyData:null},t.default=te},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(890),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(6),p=a(13),m=n(p);a(2310);var h=function(e){function t(){var e,a,n,i;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.handleControlClick=function(){n.props.onOptionSelect(!n.props.isCollapsed)},i=a,l(n,i)}return i(t,e),o(t,[{key:"render",value:function(){var e=this.props.isCollapsed;return u.default.createElement("div",{className:"fpo-chart-collapse-control__wrapper"},u.default.createElement(m.default,{mouseEnterDelay:.7,overlay:e?"Expand chart":"Collapse chart"},u.default.createElement("div",{onClick:this.handleControlClick},e?f.Icons.FULL_SCREEN:f.Icons.COLLAPSED)))}}]),t}(u.default.PureComponent);h.defaultProps={isCollapsed:!1},h.propTypes={onOptionSelect:c.default.func.isRequired,isCollapsed:c.default.bool},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(25),p=a(110),m=a(165),h=a(659),v=a(10),_=n(v),E=a(123),g=n(E),y=a(11),S=n(y),b=a(235),C=(n(b),a(6)),O=a(514),T=n(O),R=a(125),w=a(7),A=a(112);a(339);var I=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleResize=function(){a.debounced()},a.toggleMenu=function(e){a.menuOpen=void 0!==e?e:!a.menuOpen},a.toggleUncertainty=function(e){a.showUncertainty=void 0!==e?e:!a.showUncertainty},a.toggleSeries=function(e,t){switch(e.toUpperCase()){case"ADJUSTED":a.adjustedVisible=void 0!==t?t:!a.adjustedVisible;break;case"ACTUALS":a.actualsVisible=void 0!==t?t:!a.actualsVisible;break;case"APPROVED":default:a.genericVisible=void 0!==t?t:!a.genericVisible}},a.toggleCurveVisibility=function(e,t){switch(e){case"SIV":a.sivGroupVisible=void 0!==t?t:!a.sivGroupVisible;break;case"Screening":a.screeningGroupVisible=void 0!==t?t:!a.screeningGroupVisible;break;case"Randomization":default:a.enrolmentGroupVisible=void 0!==t?t:!a.enrolmentGroupVisible}},a.renderChart=function(){function e(){for(var e=(0,f.select)(this),t=e.node().getComputedTextLength(),a=e.text();t>De-De/3&&a.length>0;)a=a.slice(0,-1),e.text(a+"..."),t=e.node().getComputedTextLength()}function t(e,t){Object.keys(Vt).forEach(function(a){a===e?t&&(Vt[e]&&Vt[e].select(".inner-rect").style("fill",t),I&&M||(fa.style("display",null).select("text").style("fill",t===R.COLORS.WHITE?R.COLORS.BLACK:R.COLORS.WHITE).text(Vt[e].select("text").text()),fa.select("rect").attr("stroke",t===R.COLORS.WHITE?R.COLORS.BLACK:t).attr("fill",t))):Vt[a]&&Vt[a].select(".inner-rect").style("fill","#FFF")})}function n(){var e=(0,f.mouse)(this),a=je.invert(e[0]),n=(0,R.getHoverXPosition)(y,a,je,i,Fe,Ue);a=n.value;var r={sivMaxLine:Jt,screeningMaxLine:Qt,enrolmentMaxLine:$t,actualSivMaxLine:ea,actualScreeningMaxLine:ta,actualEnrolmentMaxLine:aa,adjustedSivMaxLine:la,adjustedScreeningMaxLine:ia,adjustedEnrolmentMaxLine:oa,hoverLine:sa,genericData:{siv:n.sivValue,screening:n.screeningValue,enrolment:n.enrolmentValue},actualData:{siv:n.actualSivValue,screening:n.actualScreeningValue,enrolment:n.actualEnrolmentValue,q75Enrolment:n.actualQ75EnrolmentValue,q25Enrolment:n.actualQ25EnrolmentValue},adjustedData:{siv:n.adjustedSivValue,screening:n.adjustedScreeningValue,enrolment:n.adjustedEnrolmentValue},date:n};if(r.hoverLine.style("display",null),r.hoverLine.attr("transform","translate("+r.date.xCoord+","+(Pe+104)+")"),r.hoverLine.select(".date").text((0,_.default)(r.date.value).format("DD MMM")),L&&(r.screeningMaxLine.attr("transform","translate(\n            "+(De+Le+60)+",\n            "+((r.genericData.screening.yCoord||Ue(ve))-15)+")"),r.enrolmentMaxLine.attr("transform","translate(\n            "+(De+Le+60)+",\n            "+((r.genericData.enrolment.yCoord||Ue(_e))-15)+")"),r.sivMaxLine.attr("transform","translate(\n            "+(-130-Le)+",\n            "+((r.genericData.siv.yCoord||Fe(he))-15)+")"),(0,f.select)(".siv-tooltip-data_generic").select("text").text(r.genericData.siv.value?r.genericData.siv.value.toFixed(0):"-"),(0,f.select)(".screening-tooltip-data_generic").select("text").text(r.genericData.screening.value?Math.floor(r.genericData.screening.value):"-"),(0,f.select)(".enrolment-tooltip-data_generic").select("text").text(r.genericData.enrolment.value?Math.floor(r.genericData.enrolment.value):"-")),I&&M&&(r.actualScreeningMaxLine.attr("transform","translate(\n            "+(De+Le+60)+",\n            "+((r.actualData.screening.yCoord||Ue(ge))-15)+")"),r.actualEnrolmentMaxLine.attr("transform","translate(\n            "+(De+Le+60)+",\n            "+((r.actualData.enrolment.yCoord||Ue(ye))-15)+")"),r.actualSivMaxLine.attr("transform","translate(\n            "+(-130-Le)+",\n            "+((r.actualData.siv.yCoord||Fe(Ee))-15)+")"),na.attr("transform","translate(\n            "+(De+Le+50)+",\n            "+((r.actualData.q75Enrolment.yCoord||Ue(Se))-15)+")"),ra.attr("transform","translate(\n            "+(De+Le+50)+",\n            "+((r.actualData.q25Enrolment.yCoord||Ue(be))-15)+")"),(0,f.select)("#q75Enrolment-tooltip-data_generic").select("text").text(r.actualData.q75Enrolment.value?r.actualData.q75Enrolment.value.toFixed(0):"-"),(0,f.select)("#q25Enrolment-tooltip-data_generic").select("text").text(r.actualData.q25Enrolment.value?r.actualData.q25Enrolment.value.toFixed(0):"-"),(0,f.select)(".siv-tooltip-data_actual").select("text").text(r.actualData.siv.value?r.actualData.siv.value.toFixed(0):"-"),(0,f.select)(".screening-tooltip-data_actual").select("text").text(r.actualData.screening.value?r.actualData.screening.value.toFixed(0):"-"),(0,f.selectAll)(".enrolment-tooltip-data_actual").select("text").text(r.actualData.enrolment.value?r.actualData.enrolment.value.toFixed(0):"-")),O&&(r.adjustedScreeningMaxLine.attr("transform","translate("+(De+Le+60)+","+((r.adjustedData.screening.yCoord?r.adjustedData.screening.yCoord:Ue(Oe))-15)+")"),r.adjustedEnrolmentMaxLine.attr("transform","translate("+(De+Le+60)+","+((r.adjustedData.enrolment.yCoord?r.adjustedData.enrolment.yCoord:Ue(Te))-15)+")"),r.adjustedSivMaxLine.attr("transform","translate("+(-130-Le)+","+((r.adjustedData.siv.yCoord?r.adjustedData.siv.yCoord:Fe(Ce))-15)+")"),(0,f.select)(".siv-tooltip-data_adjusted").select("text").text(r.adjustedData.siv.value?r.adjustedData.siv.value.toFixed(0):"-"),(0,f.select)(".screening-tooltip-data_adjusted").select("text").text(r.adjustedData.screening.value?Math.floor(r.adjustedData.screening.value):"-"),(0,f.select)(".enrolment-tooltip-data_adjusted").select("text").text(r.adjustedData.enrolment.value?Math.floor(r.adjustedData.enrolment.value):"-")),Rt.style("display",null),Rt.attr("x",r.date.xCoord+2),Rt.attr("width",De-r.date.xCoord<0?De:De-r.date.xCoord+Le),!L||O||A||(r.date.value.isSame(J)?t("lpfv",R.COLORS.PURPLE):r.date.value.isSame(Z)?t("fpft",R.COLORS.BLUE):r.date.value.isSame(X)?t("fpfv",R.COLORS.PURPLE):r.date.value.isSame(K)?t("fsiv",R.COLORS.YELLOW):r.date.value.isSame(z)?t("plpft",R.COLORS.WHITE):r.date.value.isSame(W)?t("tlpft",R.COLORS.BLACK):(Object.keys(Vt).forEach(function(e){Vt[e]&&Vt[e].select(".inner-rect").style("fill","#FFF")}),fa.style("display","none"))),I&&(M||O||A)){var l={fsiv:{date:K,color:R.COLORS.YELLOW,offset:18},fpfv:{date:X,color:R.COLORS.PURPLE,offset:18},fpft:{date:Z,color:R.COLORS.BLUE,offset:18},lpfv:{date:J,color:R.COLORS.PURPLE,offset:18},actual_fsiv:{date:ee,color:R.COLORS.YELLOW,offset:64},actual_fpfv:{date:te,color:R.COLORS.PURPLE,offset:64},actual_fpft:{date:ae,color:R.COLORS.BLUE,offset:64},actual_lpfv:{date:ne,color:R.COLORS.PURPLE,offset:64},adjusted_fsiv:{date:le,color:R.COLORS.YELLOW,offset:110},adjusted_fpfv:{date:ie,color:R.COLORS.PURPLE,offset:110},adjusted_fpft:{date:oe,color:R.COLORS.BLUE,offset:110},adjusted_lpfv:{date:se,color:R.COLORS.PURPLE,offset:110}};Object.keys(l).forEach(function(e){if((0,R.removeMilestoneTooltip)(r.hoverLine,e),l[e]){var t=r.date.value?r.date.value.format("DD MMM YY"):null,a=l[e].date?l[e].date.format("DD MMM YY"):null;t&&a&&t===a&&(0,R.appendMilestoneTooltip)(r.hoverLine,e,l[e].color,l[e].color,R.COLORS.WHITE,l[e].offset)}})}}(0,f.select)("#svg_wrapper_enrolment_chart").select(".svg-container").remove();var r=a.context,l=r.scenario,i=r.startDate,o=r.createdAt,s=r.data,u=r.cohortName,d=r.latestDate,c=r.snapshotActualDate,v=r.maxValue,E=r.maxValuesArray,g=r.monthsTickValues,y=r.xDataSource,b=r.isExactCopy,C=r.adjustedAreValid,O=r.showAdjusted,T=r.isOverallocated,A=r.isImpact,I=r.isApproved,N=r.trackingCohortsView,D=r.hasOverallocation,P=r.showOverallocation,L=r.genericsAreValid,M=r.actualsAreValid,x=r.isPrevApproved,k=(r.showNoData,r.showWrongData,r.dataReady,r.siv),j=r.filteredScreening,F=r.filteredEnrolment,U=r.actualSiv,V=r.actualScreening,B=r.actualEnrolment,H=r.actualQEnrolment,G=r.adjustedSiv,Y=r.adjustedScreening,q=r.adjustedEnrolment,z=r.pLpft,W=r.tLpft,K=r.fsiv,X=r.fpfv,Z=r.fpft,J=r.lpfv,Q=r.actualDate,$=r.actualFlpft,ee=r.actualFsiv,te=r.actualFpfv,ae=r.actualFpft,ne=r.actualLpfv,re=r.adjustedLpft,le=r.adjustedFsiv,ie=r.adjustedFpfv,oe=r.adjustedFpft,se=r.adjustedLpfv,ue=r.targetScreeningValue,de=r.targetEnrolmentValue,ce=r.targetAdjustedScreeningValue,fe=r.targetAdjustedEnrolmentValue,pe=r.sitesMax,me=r.patMax,he=r.sivMax,ve=r.screeningMax,_e=r.enrolmentMax,Ee=r.actualSivMax,ge=r.actualScreeningMax,ye=r.actualEnrolmentMax,Se=r.actualQ75Max,be=r.actualQ25Max,Ce=r.adjustedSivMax,Oe=r.adjustedScreeningMax,Te=r.adjustedEnrolmentMax,Re=a.container;if(Re){var we=Re.getBoundingClientRect().width,Ae=(we-240)/11*2+48,Ie=(we-240)/11,Ne={top:40,right:Ae,bottom:250,left:130},De=Re.getBoundingClientRect().width-Ne.left-Ne.right,Pe=587-Ne.top-Ne.bottom,Le=30,Me=(0,f.select)("#svg_wrapper_enrolment_chart"),xe=Me.append("div").classed("svg-container",!0).append("svg").attr("width",De+Ne.left+Ne.right).attr("height",Pe+Ne.top+Ne.bottom);xe.append("rect").at({x:-20,y:-20,width:De+Ne.left+Ne.right+40,height:Pe+Ne.top+Ne.bottom+40,fill:R.COLORS.WHITE}),(0,R.injectPatternDefs)(xe,"actualPattern");var ke=xe.append("g").attr("id","context").translate([Ne.left,Ne.top]);ke.append("rect").at({width:De,height:Pe+3,fill:R.COLORS.BLACK,opacity:.04,class:"chart-background"}),ke.append("rect").at({x:-Le,width:Le,height:Pe+3,fill:R.COLORS.BLACK,opacity:.02,class:"chart-background side"}),ke.append("rect").at({x:De,width:Le,height:Pe+3,fill:R.COLORS.BLACK,opacity:.02,class:"chart-background side"});var je=(0,p.scaleTime)().rangeRound([0,De]),Fe=(0,p.scaleLinear)().rangeRound([Pe,0]),Ue=(0,p.scaleLinear)().rangeRound([Pe,0]),Ve=(0,h.line)().curve(h.curveStepAfter).x(function(e){return je(e.date)}).y(function(e){return Fe(e.value)}),Be=(0,h.line)().x(function(e){return je(e.date)}).y(function(e){return Ue(e.value)}),He=(0,h.area)().curve(h.curveMonotoneX).x(function(e){return je(e.date)}).y0(function(e){return Ue(e.q75)}).y1(function(e){return Ue(e.q25)});if(0===E.filter(function(e){return e}).length)return(0,f.select)("#enrolment-chart__legend-toggle").style("display","none"),void ke.append("text").translate([De/2,Pe/2]).attr("text-anchor","middle").classed("no-data-message",!0).text("There is not enough data to build a chart yet");if(v.isSameOrBefore(i))return(0,f.select)("#enrolment-chart__legend-toggle").style("display","none"),void ke.append("text").translate([De/2,Pe/2]).attr("text-anchor","middle").classed("no-data-message",!0).text("The approved scenario and graph cannot be loaded due to data inconsistencies");je.domain([i,v]),Fe.domain([0,pe+.15*pe]),Ue.domain([0,me+.15*me]);var Ge=(0,m.axisBottom)().scale(je).tickValues(g).tickSizeOuter(0),Ye=(0,m.axisLeft)().scale(Fe).ticks(5),qe=(0,m.axisRight)().scale(Ue).ticks(5),ze=[{groupX:-Le,groupY:-28,lineClass:"siv",text:he?he.toFixed(0):"-"},{groupX:De-140,groupY:-28,lineClass:"screening",text:ve?Math.floor(ve):"-",appendSeparator:!0},{groupX:De-40,groupY:-28,lineClass:"enrolment",text:_e?Math.floor(_e):"-"}];if((0,R.drawSubheaderLegend)(ke,ze),u){var We=ke.append("g").translate([24,-28]);We.append("line").at({x1:0,x2:8,y1:8,y2:-14,class:"line slash-separator"}),We.append("text").at({x:20,y:3}).st({fontSize:16}).append("tspan").text(u.fullName).each(e)}if((0,R.drawAxisIcons)(ke,-98-Le,De+Ie,-Ne.top),D){var Ke=(0,R.drawOverallocationToggle)(ke,De-10+2*Ie,-Ne.top,P,a.props.onToggleOverallocation);(0,R.drawOverallocationIcon)(Ke)}var Xe=void 0,Ze=void 0,Je=void 0,Qe=void 0,$e=void 0,et=void 0;I&&M&&(Xe=(0,R.drawSeriesLine)(ke,U,"siv actual",Ve,a.sivGroupVisible&&a.actualsVisible,"siv_actual_path"),Ze=(0,R.drawSeriesLine)(ke,V,"screening actual",Be,a.screeningGroupVisible&&a.actualsVisible,"screening_actual_path"),Je=(0,R.drawSeriesLine)(ke,B,"enrolment actual",Be,a.enrolmentGroupVisible&&a.actualsVisible,"enrolment_actual_path"),Qe=(0,R.appendCurveEnd)(ke,je,Fe,U,R.COLORS.YELLOW,a.sivGroupVisible&&a.actualsVisible,"dashed","siv_actual_end"),$e=(0,R.appendCurveEnd)(ke,je,Ue,V,R.COLORS.PURPLE,a.screeningGroupVisible&&a.actualsVisible,"dashed","screening_actual_end"),et=(0,R.appendCurveEnd)(ke,je,Ue,B,R.COLORS.BLUE,a.enrolmentGroupVisible&&a.actualsVisible,"dashed","enrolment_actual_end"),ke.append("path").data([H]).st({fill:R.COLORS.BLUE,opacity:.2,stroke:R.COLORS.BLACK}).attr("class","uncertainty-area").attr("d",He).style("display",a.showUncertainty?null:"none"));var tt=void 0,at=void 0,nt=void 0,rt=void 0,lt=void 0,it=void 0,ot=void 0,st=void 0;if(L)if(l.hasAdjustedOrigin){var ut=(0,w.getMomentDate)((0,S.default)(s,"actualTimeseriesSnapshot.actual_date",o.clone())),dt=(0,R.updateAdjustedSeries)(k,i,ut),ct=(0,R.updateAdjustedSeries)(j,i,ut),ft=(0,R.updateAdjustedSeries)(F,i,ut);tt=(0,R.drawSeriesLine)(ke,dt,"siv",Ve,a.sivGroupVisible&&a.genericVisible,"siv_generic_path"),at=(0,R.drawSeriesLine)(ke,ct,"screening",Be,a.screeningGroupVisible&&a.genericVisible,"screening_generic_path"),nt=(0,R.drawSeriesLine)(ke,ft,"enrolment",Be,a.enrolmentGroupVisible&&a.genericVisible,"enrolment_generic_path"),rt=(0,R.appendCurveEnd)(ke,je,Fe,dt,R.COLORS.YELLOW,a.sivGroupVisible&&a.genericVisible,null,"siv_generic_end"),lt=(0,R.appendCurveEnd)(ke,je,Ue,ct,R.COLORS.PURPLE,a.screeningGroupVisible&&a.genericVisible,null,"screening_generic_end"),it=(0,R.appendCurveEnd)(ke,je,Ue,ft,R.COLORS.BLUE,a.enrolmentGroupVisible&&a.genericVisible,null,"enrolment_generic_end"),P&&(ot=ke.append("circle"),ot.attr("id","lpfv_dot").attr("cx",je(J)).attr("cy",Ue(ue)).attr("opacity",0).attr("fill",R.COLORS.PURPLE).style("display",a.screeningGroupVisible&&a.genericVisible?null:"none"),st=ke.append("circle"),st.attr("id","lpft_dot").attr("cx",je(z)).attr("cy",Ue(de)).attr("opacity",0).attr("fill",R.COLORS.BLUE).style("display",a.enrolmentGroupVisible&&a.genericVisible?null:"none"))}else tt=(0,R.drawSeriesLine)(ke,k,"siv",Ve,a.sivGroupVisible&&a.genericVisible,"siv_generic_path"),at=(0,R.drawSeriesLine)(ke,j,"screening",Be,a.screeningGroupVisible&&a.genericVisible,"screening_generic_path"),nt=(0,R.drawSeriesLine)(ke,F,"enrolment",Be,a.enrolmentGroupVisible&&a.genericVisible,"enrolment_generic_path"),rt=(0,R.appendCurveEnd)(ke,je,Fe,k,R.COLORS.YELLOW,a.sivGroupVisible&&a.genericVisible,null,"siv_generic_end"),lt=(0,R.appendCurveEnd)(ke,je,Ue,j,R.COLORS.PURPLE,a.screeningGroupVisible&&a.genericVisible,null,"screening_generic_end"),it=(0,R.appendCurveEnd)(ke,je,Ue,F,R.COLORS.BLUE,a.enrolmentGroupVisible&&a.genericVisible,null,"enrolment_generic_end"),D&&P&&(ot=ke.append("circle"),ot.attr("id","lpfv_dot").attr("cx",je(J)).attr("cy",Ue(ue)).attr("opacity",0).attr("fill",R.COLORS.PURPLE).style("display",a.screeningGroupVisible&&a.genericVisible?null:"none"),st=ke.append("circle"),st.attr("id","lpft_dot").attr("cx",je(z)).attr("cy",Ue(de)).attr("opacity",0).attr("fill",R.COLORS.BLUE).style("display",a.enrolmentGroupVisible&&a.genericVisible?null:"none"));var pt=void 0,mt=void 0,ht=void 0,vt=void 0,_t=void 0,Et=void 0,gt=void 0,yt=void 0;if(O){var St=Y.filter(function(e){return e.date>=le}),bt=q.filter(function(e){return e.date>=le});pt=(0,R.drawSeriesLine)(ke,G,"siv adjusted",Ve,a.sivGroupVisible&&a.adjustedVisible,"siv_adjusted_path"),mt=(0,R.drawSeriesLine)(ke,St,"screening adjusted",Be,a.screeningGroupVisible&&a.adjustedVisible,"screening_adjusted_path"),ht=(0,R.drawSeriesLine)(ke,bt,"enrolment adjusted",Be,a.enrolmentGroupVisible&&a.adjustedVisible,"enrolment_adjusted_path"),vt=(0,R.appendCurveEnd)(ke,je,Fe,G,R.COLORS.YELLOW,a.sivGroupVisible&&a.adjustedVisible,"hollow","siv_adjusted_end"),_t=(0,R.appendCurveEnd)(ke,je,Ue,St,R.COLORS.PURPLE,a.screeningGroupVisible&&a.adjustedVisible,"hollow","screening_adjusted_end"),Et=(0,R.appendCurveEnd)(ke,je,Ue,bt,R.COLORS.BLUE,a.enrolmentGroupVisible&&a.adjustedVisible,"hollow","enrolment_adjusted_end"),P&&(gt=ke.append("circle"),gt.attr("id","screening_adjusted_end").attr("cx",je(se)).attr("cy",Ue(ce)).style("opacity",0).attr("class","hollow").attr("stroke",R.COLORS.PURPLE).attr("stroke-width",4).attr("fill",R.COLORS.WHITE).style("display",a.screeningGroupVisible&&a.adjustedVisible?null:"none"),yt=ke.append("circle"),yt.attr("id","enrolment_adjusted_end").attr("cx",je(re)).attr("cy",Ue(fe)).style("opacity",0).attr("class","hollow").attr("stroke",R.COLORS.BLUE).attr("stroke-width",4).attr("fill",R.COLORS.WHITE).style("display",a.enrolmentGroupVisible&&a.adjustedVisible?null:"none"))}I&&Q&&(0,R.drawOverflowRect)(ke,{x:je(i),y:0,width:je(Q),height:Pe+3,fill:"url(#actualPattern)",opacity:.04});var Ct=ke.append("g").attr("class","axis axis--x").translate([0,Pe]).call(Ge);Ct.selectAll("text").attr("class","tick").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif",fill:R.COLORS.BLACK,shapeRendering:"crispEdges",stroke:"none"}).style("text-anchor","middle").text(function(e){return(0,_.default)(e).format("MMM YY")}).translate([0,42]),Ct.selectAll("line").st({fill:"none",stroke:R.COLORS.BLACK,shapeRendering:"crispEdges",strokeWidth:"1px"}).at({class:"tick-line",y2:12}).translate([.5,26]),Ct.selectAll("path").st({fill:"none",stroke:R.COLORS.BLACK,opacity:0,shapeRendering:"crispEdges"});var Ot=ke.append("g").attr("class","axis axis--y").translate([0-Le,0]).call(Ye);Ot.selectAll("text").attr("class","tick").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif",fill:R.COLORS.BLACK,shapeRendering:"crispEdges",stroke:"none"}).style("text-anchor","end").text(function(e){return e}).translate([-35,0]),Ot.selectAll("line").st({fill:"none",stroke:R.COLORS.BLACK,shapeRendering:"crispEdges",strokeWidth:"1px"}).at({class:"tick-line",x2:12}).translate([-32,0]),Ot.selectAll("path").st({fill:"none",stroke:R.COLORS.BLACK,opacity:0,shapeRendering:"crispEdges"});var Tt=ke.append("g").attr("class","axis axis--y").translate([De+Le,0]).call(qe);Tt.selectAll("text").attr("class","tick").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif",fill:R.COLORS.BLACK,shapeRendering:"crispEdges",stroke:"none"}).style("text-anchor","start").text(function(e){return e}).translate([40,0]),Tt.selectAll("line").st({fill:"none",stroke:R.COLORS.BLACK,shapeRendering:"crispEdges",strokeWidth:"1px"}).at({class:"tick-line",x2:12}).translate([25,0]),Tt.selectAll("path").st({fill:"none",stroke:R.COLORS.BLACK,opacity:0,shapeRendering:"crispEdges"});var Rt=ke.append("rect").style("display","none").at({x:250,width:De,height:Pe+3}).st({fill:R.COLORS.WHITE,opacity:.7}),wt=[{x:function(){return je(i.isSameOrBefore(W)?z<W?z:W:z<W?z:i)},y:0,width:function(){return i.isSameOrBefore(W)?z<W?je(W)-je(z):je(z)-je(W):z<W?je(W)-je(z):je(z)-je(i)},height:Pe+3,fill:z<W?R.COLORS.GREEN:R.COLORS.RED,opacity:.2},{x:je($<=z?$:z),y:0,width:$<=z?je(z)-je($):je($)-je(z),height:Pe+3,fill:function(){return T?R.COLORS.DARK_GREY:$<=z?R.COLORS.GREEN:R.COLORS.RED},opacity:.2},{x:je(re<=z?re:z),y:0,width:re<=z?je(z)-je(re):je(re)-je(z),height:Pe+3,fill:re<=z?R.COLORS.GREEN:R.COLORS.RED,opacity:.2}];!N&&L&&(I&&$&&z?(0,R.drawOverflowRect)(ke,wt[1]):z&&W&&!A&&!O&&(0,R.drawOverflowRect)(ke,wt[0])),O&&L&&(0,R.drawOverflowRect)(ke,wt[2]);var At=I&&(M||A)&&!x?{stroke:R.COLORS.GREEN,strokeWidth:"4px",opacity:.2}:{stroke:R.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6},It=I&&(M||A)&&!x?{stroke:R.COLORS.LIGHT_GREEN,strokeWidth:"16px"}:{stroke:R.COLORS.GREY,strokeWidth:"16px"},Nt=ke.append("g").attr("transform","translate(0, "+(Pe+104)+")");Nt.append("line").attr("x2",I&&$&&z&&z>i?je(z):De).classed("milestones-bar-background",!I||!M||x).classed("milestones-bar-background-approved",I&&(M||A)&&!x).st(It),Nt.append("line").attr("x2",I&&$&&z&&z>i?je(z):De).classed("milestones-bar",!I||!M||x).classed("milestones-bar-approved",I&&(M||A)&&!x).st(At),I&&Q&&(0,R.drawOverflowRect)(Nt,{x:je(i),y:-8,width:je(Q),height:16,fill:"url(#actualPattern)",opacity:.04}),!u||C||M||Nt.append("text").at({x:-Ne.left,y:6}).st({fontSize:16,fontWeight:500}).text(u.shortName);var Dt=(0,R.appendFppMark)(Nt,je(i));Dt.append("line").at({y1:-10,y2:-Pe-104}).st({stroke:R.COLORS.BLACK,strokeWidth:"2px"}),I&&M||O||A||(0,R.appendLabelToMilestone)(Dt,"FP",R.COLORS.BLACK,R.COLORS.WHITE,R.COLORS.BLACK);var Pt=void 0,Lt=void 0,Mt=void 0,xt=void 0;K&&K.isSameOrBefore(d)&&K.isSameOrAfter(i)&&(Lt=(0,R.appendMilestone)(Nt,je(K),R.COLORS.YELLOW,"FSIV",null,I&&(M||O||A))),X&&X.isSameOrBefore(d)&&X.isSameOrAfter(i)&&(Mt=(0,R.appendMilestone)(Nt,je(X),R.COLORS.PURPLE,"FPFV",null,I&&(M||O||A))),Z&&Z.isSameOrBefore(d)&&Z.isSameOrAfter(i)&&(Pt=(0,R.appendMilestone)(Nt,je(Z),R.COLORS.BLUE,"FPFT",null,I&&(M||O||A))),J&&J.isSameOrBefore(d)&&J.isSameOrAfter(i)&&(xt=(0,R.appendMilestone)(Nt,je(J),R.COLORS.PURPLE,"LPFV",null,I&&(M||O||A)));var kt=void 0;!W||O||A||!W.isAfter(i)||N||(kt=Nt.append("g").attr("transform","translate("+je(W)+")"),I&&M||(kt.append("circle").st({stroke:R.COLORS.BLACK,strokeWidth:"2px",fill:R.COLORS.WHITE}).attr("r",9),kt.append("circle").style("fill",R.COLORS.BLACK).attr("r",6),kt.append("line").at({y1:-10,y2:-Pe-104}).st({stroke:R.COLORS.BLACK,strokeDasharray:"6 3",strokeWidth:"2px"}),(0,R.appendLabelToMilestone)(kt,"T/LPFT",R.COLORS.BLACK,R.COLORS.BLACK,R.COLORS.WHITE)));var jt=void 0;if(z&&(jt=Nt.append("g").attr("transform","translate("+je(z)+")"),jt.append("line").attr("y1",I&&(M||O||A)?46:-10).attr("y2",-Pe-104).style("stroke","black").style("stroke-width","2px"),jt.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",R.COLORS.WHITE).attr("r",9),jt.append("circle").style("fill",function(){return I&&(M||O||A)?R.COLORS.BLACK:z<=W?R.COLORS.GREEN:R.COLORS.RED}).attr("r",6),I&&(M||O||A)||(0,R.appendLabelToMilestone)(jt,"P/LPFT",R.COLORS.BLACK,R.COLORS.WHITE,R.COLORS.BLACK)),D&&P){var Ft=F[F.length-1];if(Ft&&Ft.date){var Ut=Nt.append("g").attr("transform","translate("+je(Ft.date)+")");Ut.append("line").attr("y1",I&&(M||O||A)?46:-10).attr("y2",-Pe-104).style("stroke",R.COLORS.DARK_GREY).style("stroke-width","2px"),Ut.append("circle").style("stroke",R.COLORS.DARK_GREY).style("stroke-width","2px").style("fill",R.COLORS.WHITE).attr("r",9),Ut.append("circle").style("fill",R.COLORS.DARK_GREY).attr("r",6)}}var Vt={startDate:Dt,fpft:Pt,fsiv:Lt,fpfv:Mt,lpfv:xt,tlpft:kt,plpft:jt},Bt=ke.append("g").attr("transform","translate(0, "+(Pe+150)+")");if(I&&(M||O||A)){if((N||$)&&Q&&z){Bt.append("line").attr("x2",je($>z||!N?$:z)).classed("actual-milestones-bar",!0).st({stroke:R.COLORS.MID_GREY,strokeWidth:"4px",strokeDasharray:"4 4",opacity:.6});var Ht=Bt.append("g").attr("transform","translate("+je(i)+")");Ht.append("rect").attr("width",je(Q)).attr("y",-2).attr("height",4).style("fill",R.COLORS.GREY),Ht.append("rect").attr("width",je(Q)).attr("y",-2).attr("height",4).style("fill","url(#actualPattern)").attr("opacity",.04)}else Bt.append("line").attr("x2",re?je(re):De).classed("actual-milestones-bar",!0).st({stroke:R.COLORS.MID_GREY,strokeWidth:"4px",strokeDasharray:"4 4",opacity:.6});if((0,R.appendFppMark)(Bt,je(i)),N||$&&z&&(Bt.append("line").attr("x1",function(){return $<=z?je($):z>i?je(z):10}).attr("x2",je($<=z?z:$)).style("stroke",function(){return T?R.COLORS.DARK_GREY:$<=z?R.COLORS.GREEN:R.COLORS.RED}).style("stroke-width","4px"),Bt.append("text").classed("active-range-label",!0).st({fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("text-anchor",function(){return $<=z?"end":"start"}).text(($>z?"+":"")+$.diff(z,"days")+"d").attr("transform",function(){return $<=z?"translate("+(je(z)-20)+", -14)":"translate("+(je(z)+20)+", -14)"}).style("fill",function(){return T?R.COLORS.BLACK:$<=z?R.COLORS.GREEN:R.COLORS.RED})),ae&&(A||Q>=ae)&&ae>i&&(0,R.appendMilestone)(Bt,je(ae),R.COLORS.BLUE,"FPFT",null,I&&(M||A)),ee&&(A||Q>=ee)&&ee>i&&(0,R.appendMilestone)(Bt,je(ee),R.COLORS.YELLOW,"FSIV",null,I&&(M||A)),te&&(A||Q>=te)&&te>i&&(0,R.appendMilestone)(Bt,je(te),R.COLORS.PURPLE,"FPFV",null,I&&(M||A)),ne&&(A||Q>=ne)&&ne>i&&(0,R.appendMilestone)(Bt,je(ne),R.COLORS.PURPLE,"LPFV",null,I&&(M||A)),Q){var Gt=(0,R.appendMilestone)(Bt,je(Q),R.COLORS.BLACK,null,null,I&&(M||O||A));Gt.append("line").attr("y1",-2).attr("y2",-Pe-140).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px");var Yt=Gt.append("g"),qt=Yt.append("g").attr("id","actual-date-tooltip").attr("transform","translate(0, -130)");qt.append("polygon").attr("points","0,0, 15,0, 7.5,7.5").attr("transform","translate(-7.5,28)"),qt.append("polygon").attr("points","0,0, 15,0, 7.5,-7.5").attr("transform","translate(-7.5)"),qt.append("rect").attr("x",-32).attr("width",64).attr("height",28).attr("stroke",R.COLORS.BLACK).style("fill",R.COLORS.BLACK),qt.append("text").attr("class","date").attr("transform","translate(0,20)").attr("text-anchor","middle").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).classed("milestone-label",!0).style("fill",R.COLORS.WHITE).text(Q.format("DD MMM"))}if(!N&&$){var zt=Bt.append("g").attr("transform","translate("+je($)+")");zt.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",R.COLORS.WHITE).attr("r",9),zt.append("circle").style("fill",function(){return T?R.COLORS.BLACK:!z||$<=z?R.COLORS.GREEN:R.COLORS.RED}).attr("r",6),zt.append("line").attr("y1",-150).attr("y2",-Pe-150).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px")}if(T&&("country"===s.type||s.isRegionCountry)&&z){var Wt=$>z;ke.append("line").at({x1:0,x2:je(z),y1:Ue(s.patient_allocation),y2:Ue(s.patient_allocation)}).st({stroke:R.COLORS.DARK_GREY,strokeWidth:"2px"}),s.actual_overallocation>0?ke.append("g").attr("transform","translate("+(je(z)-(Wt?5:-31))+", "+(Ue(s.patient_allocation)+10)+"), scale(-1, 1)").append("path").attr("d","M10 19h11v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5\n            h4.286c.786 0 1.428.675 1.428 1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2\n            s.893-2 2-2 2 .893 2 2-.893 2-2 2zM16 2h2v8h-2z M13 5h8v2h-8z").attr("fill",R.COLORS.BLACK).attr("opacity","0.5"):ke.append("g").attr("transform","translate("+(je(z)-(Wt?31:-5))+", "+(Ue(s.patient_allocation)-34)+")").append("path").attr("d","M10 19h11v3H3v-3h3v-5H4.429V8.5c0-.825.642-1.5 1.428-1.5\n            h4.286c.786 0 1.428.675 1.428 1.5V14H10v5zM8 6c-1.107 0-2-.893-2-2\n            s.893-2 2-2 2 .893 2 2-.893 2-2 2zM13 5h8v2h-8z").attr("fill",R.COLORS.BLACK).attr("opacity","0.5")}}var Kt=ke.append("g").attr("transform","translate(0, "+(Pe+196)+")");if(O){z?(Kt.append("line").attr("x1",je(c)).attr("x2",je(re<z?re:z)).classed("milestones-bar-background",!0).st({stroke:R.COLORS.GREY,strokeWidth:"16px"}),Kt.append("line").attr("x1",je(c)).attr("x2",je(re<z?re:z)).classed("milestones-bar",!0).st({stroke:R.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6}),(0,R.appendFppMark)(Kt,je(i)),Kt.append("line").attr("x1",je(re<=z?re:z)).attr("x2",je(re<=z?z:re)).style("stroke",re<=z?R.COLORS.GREEN:R.COLORS.RED).style("stroke-width","4px"),Kt.append("text").classed("active-range-label",!0).st({fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("text-anchor",re<=z?"end":"start").text((re>z?"+":"")+re.diff(z,"days")+"d").attr("transform",function(){return re<=z?"translate("+(je(z)-20)+", -14)":"translate("+(je(z)+20)+", -14)"}).style("fill",re<=z?R.COLORS.GREEN:R.COLORS.RED),Kt.append("g").attr("transform","translate("+je(z)+")").append("line").attr("y1",2).attr("y2",-46).style("stroke","black").style("stroke-width","2px")):(Kt.append("line").attr("x1",je(c)).attr("x2",je(re)).classed("milestones-bar-background",!0).st({stroke:R.COLORS.GREY,strokeWidth:"16px"}),Kt.append("line").attr("x1",je(c)).attr("x2",je(re)).classed("milestones-bar",!0).st({stroke:R.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6}),(0,R.appendFppMark)(Kt,je(i))),(0,R.appendMilestone)(Kt,je(oe),R.COLORS.BLUE,"FPFT",null,!0,oe<c?.3:1),(0,R.appendMilestone)(Kt,je(le),R.COLORS.YELLOW,"FSIV",null,!0,le<c?.3:1),(0,R.appendMilestone)(Kt,je(ie),R.COLORS.PURPLE,"FPFV",null,!0,ie<c?.3:1),(0,R.appendMilestone)(Kt,je(se),R.COLORS.PURPLE,"LPFV",null,!0,se<c?.3:1),(0,R.appendMilestone)(Kt,je(Q),R.COLORS.BLACK,null,null,!0).append("line").attr("y1",-26).attr("y2",0).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px");var Xt=Kt.append("g").classed("mark-g",!0).style("opacity",b?0:.9).attr("transform","translate("+(je(c)-12)+","+-12+")");Xt.append("defs").append("path").attr("id","a").attr("d","M12 7l5 5-5 5-5-5z"),Xt.append("g").attr("fill","none").attr("fill-rule","evenodd").append("use").attr("fill",R.COLORS.BLACK).attr("xlink:href","#a"),Xt.append("line").at({x1:12,x2:20,y1:4,y2:12}).style("stroke-linecap","square").style("stroke",R.COLORS.BLACK).style("stroke-width",2),Xt.append("line").attr("x1",12).at({x1:12,x2:20,y1:20,y2:12}).style("stroke-linecap","square").style("stroke",R.COLORS.BLACK).style("stroke-width",2);var Zt=Kt.append("g").attr("transform","translate("+je(re)+")");Zt.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",R.COLORS.WHITE).attr("r",9),Zt.append("circle").style("fill",function(){return z?re<=z?R.COLORS.GREEN:R.COLORS.RED:R.COLORS.BLACK}).attr("r",6),Zt.append("line").attr("y1",M?-194:-12).attr("y2",-Pe-194).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px")}var Jt=void 0,Qt=void 0,$t=void 0;L&&(Jt=ke.append("g").at({id:"siv_max_hint_line"}).attr("transform","translate("+(-130-Le)+","+(Fe(he)-15)+")"),(0,R.appendLineToHint)(Jt,!1,R.COLORS.YELLOW),Qt=ke.append("g").at({id:"screening_max_hint_line"}).attr("transform","translate("+(De+Le+60)+","+(Ue(ve)-15)+")"),(0,R.appendLineToHint)(Qt,!0,R.COLORS.PURPLE),$t=ke.append("g").at({id:"enrolment_max_hint_line"}).attr("transform","translate("+(De+Le+60)+","+(Ue(_e)-15)+")"),(0,R.appendLineToHint)($t,!0,R.COLORS.BLUE));var ea=void 0,ta=void 0,aa=void 0,na=void 0,ra=void 0;I&&M&&(ea=ke.append("g").at({id:"actual_siv_max_hint_line"}).attr("transform","translate("+(-130-Le)+","+(Fe(Ee)-15)+")"),(0,R.appendLineToHint)(ea,!1,R.COLORS.YELLOW,"dashed"),ta=ke.append("g").at({id:"actual_screening_max_hint_line"}).attr("transform","translate("+(De+Le+60)+","+(Ue(ge)-15)+")"),(0,R.appendLineToHint)(ta,!0,R.COLORS.PURPLE,"dashed"),aa=ke.append("g").at({id:"actual_enrolment_max_hint_line"}).attr("transform","translate("+(De+Le+60)+","+(Ue(ye)-15)+")"),(0,R.appendLineToHint)(aa,!0,R.COLORS.BLUE,"dashed"),na=ke.append("g").style("display","none").at({id:"actual_q75_max_hint_line"}).attr("transform","translate("+(De+Le+50)+","+(Ue(Se)-15)+")"),na.append("line").at({x1:-35,x2:-25,y1:15,y2:15,class:"hint-line"}).st({stroke:R.COLORS.BLUE,strokeWidth:"2px"}),ra=ke.append("g").style("display","none").at({id:"actual_q25_max_hint_line"}).attr("transform","translate("+(De+Le+50)+","+(Ue(be)-15)+")"),ra.append("line").at({x1:-35,x2:-25,y1:15,y2:15,class:"hint-line"}).st({stroke:R.COLORS.BLUE,strokeWidth:"2px"}));var la=void 0,ia=void 0,oa=void 0;O&&(la=ke.append("g").at({id:"adjusted_siv_max_hint_line"}).attr("transform","translate("+(-130-Le)+","+(Fe(Ce)-15)+")"),(0,R.appendLineToHint)(la,!1,R.COLORS.YELLOW,"bold"),ia=ke.append("g").at({id:"adjusted_screening_max_hint_line"}).attr("transform","translate("+(De+Le+60)+","+(Ue(Oe)-15)+")"),(0,R.appendLineToHint)(ia,!0,R.COLORS.PURPLE,"bold"),oa=ke.append("g").at({id:"adjusted_enrolment_max_hint_line"}).attr("transform","translate("+(De+Le+60)+","+(Ue(Te)-15)+")"),(0,R.appendLineToHint)(oa,!0,R.COLORS.BLUE,"bold"));var sa=ke.append("g").attr("transform","translate(250,"+(Pe+104)+")").style("will-change","transform").style("display","none");if((0,R.appendHoverMark)(sa,-12,R.COLORS.WHITE),sa.append("line").attr("y1",-10).attr("y2",-Pe-104).style("stroke","black").style("stroke-width","2px"),I&&(M||O||A)){var ua=sa.append("g").attr("id","actual-hover-line");ua.append("line").attr("y1",10).attr("y2",36).style("stroke","black").style("stroke-width","2px"),(0,R.appendHoverMark)(ua,34,R.COLORS.WHITE)}O&&(sa.append("line").attr("y1",56).attr("y2",80).style("stroke","black").style("stroke-width","2px"),(0,R.appendHoverMark)(sa,80,R.COLORS.WHITE));var da=[{groupName:"siv",groupX:10,groupY:20,lineClass:"siv",textGeneric:he||"-",textActual:Ee,textAdjusted:Ce?Ce.toFixed(0):"-"},{groupName:"screening",groupX:60,groupY:20,lineClass:"screening",textGeneric:ve?ve.toFixed(0):"-",textActual:ge,textAdjusted:Oe?Oe.toFixed(0):"-"},{groupName:"enrolment",groupX:110,groupY:20,lineClass:"enrolment",textGeneric:_e?_e.toFixed(0):"-",textActual:ye,textAdjusted:Te?Te.toFixed(0):"-"}];(0,R.appendHoverTooltip)(sa,da,I&&M,O);var ca=sa.append("g").attr("transform","translate(0, -94)");ca.append("polygon").attr("points","0,0, 15,0, 7.5,7.5").attr("transform","translate(-7.5,28)"),ca.append("polygon").attr("points","0,0, 15,0, 7.5,-7.5").attr("transform","translate(-7.5)"),ca.append("rect").attr("x",-32).attr("width",64).attr("height",28).attr("stroke",R.COLORS.BLACK).style("fill",R.COLORS.BLACK),ca.append("text").attr("class","date").attr("transform","translate(0,20)").attr("text-anchor","middle").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).classed("milestone-label",!0).style("fill",R.COLORS.WHITE).text("");var fa=sa.append("g").classed("hover-milestone-label",!0);fa.style("display","none"),fa.append("rect").attr("x",-30).attr("y",30).attr("width",60).attr("height",30).style("stroke-width",2),fa.append("text").attr("transform","translate(0,30)").attr("dy",20).attr("text-anchor","middle").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).classed("milestone-label",!0).attr("fill",R.COLORS.WHITE).text("test");var pa=[{groupX:De+Ne.right-90,groupY:Pe+104,groupFlag:"genericVisible",group:[{components:[tt,rt],groupFlag:"sivGroupVisible",seriesFlag:"genericVisible"},{components:[at,lt,ot],groupFlag:"screeningGroupVisible",seriesFlag:"genericVisible"},{components:[nt,it,st],groupFlag:"enrolmentGroupVisible",seriesFlag:"genericVisible"}],seriesFlag:"genericVisible",backgroundFill:R.COLORS.BLACK,text:z?z.format("DD MMM YY"):"",label:"P/LPFT",title:x?"PrevAppr":"Approved",type:"generic",context:a,addInteraction:L},{groupX:De+Ne.right-90,groupY:Pe+150,group:[{components:[Xe,Qe],groupFlag:"sivGroupVisible",seriesFlag:"actualsVisible"},{components:[Ze,$e],groupFlag:"screeningGroupVisible",seriesFlag:"actualsVisible"},{components:[Je,et],groupFlag:"enrolmentGroupVisible",seriesFlag:"actualsVisible"}],seriesFlag:"actualsVisible",backgroundFill:function(){return T?R.COLORS.DARK_GREY:!z||$<z?R.COLORS.GREEN:R.COLORS.RED},text:$?$.format("DD MMM YY"):"",label:"F/LPFT",title:"Actuals",type:"dashed",context:a,addInteraction:M},{groupX:De+Ne.right-90,groupY:Pe+194,group:[{components:[pt,vt],groupFlag:"sivGroupVisible",seriesFlag:"adjustedVisible"},{components:[mt,_t,gt],groupFlag:"screeningGroupVisible",seriesFlag:"adjustedVisible"},{components:[ht,Et,yt],groupFlag:"enrolmentGroupVisible",seriesFlag:"adjustedVisible"}],seriesFlag:"adjustedVisible",textFill:z?R.COLORS.WHITE:R.COLORS.BLACK,backgroundFill:function(){return z?re>z?R.COLORS.RED:R.COLORS.GREEN:R.COLORS.WHITE},text:re?re.format("DD MMM YY"):"",label:"A/LPFT",title:"Adjusted",type:"bold",context:a,addInteraction:C,tooltipPosition:"top"}];I&&(M||O||A)&&((0,R.appendMilestonesLegend)(Nt,pa[0]),(0,R.appendMilestonesLegend)(Bt,pa[1],N)),O&&(0,R.appendMilestonesLegend)(Kt,pa[2]),y.length>0&&ke.append("rect").attr("class","overlay").attr("opacity","0").attr("x",-Le).attr("width",De+Le).attr("height",Pe+Ne.bottom).on("mouseout",function(){sa.style("display","none"),Rt.style("display","none"),L&&(Jt.attr("transform","translate("+(-130-Le)+","+(Fe(he)-15)+")"),Qt.attr("transform","translate("+(De+Le+60)+","+(Ue(ve)-15)+")"),$t.attr("transform","translate("+(De+Le+60)+","+(Ue(_e)-15)+")")),I&&M&&(ea.attr("transform","translate("+(-130-Le)+","+(Fe(Ee)-15)+")"),ta.attr("transform","translate("+(De+Le+60)+","+(Ue(ge)-15)+")"),aa.attr("transform","translate("+(De+Le+60)+","+(Ue(ye)-15)+")"),na.attr("transform","translate("+(De+Le+50)+","+(Ue(Se)-15)+")"),ra.attr("transform","translate("+(De+Le+50)+","+(Ue(be)-15)+")")),O&&(la.attr("transform","translate("+(-130-Le)+","+(Fe(Ce)-15)+")"),ia.attr("transform","translate("+(De+Le+60)+","+(Ue(Oe)-15)+")"),oa.attr("transform","translate("+(De+Le+60)+","+(Ue(Te)-15)+")")),(0,f.select)("#actual-date-tooltip").style("display",null)}).on("mousemove",n).on("mouseover",function(){(0,f.select)("#chart-menu").style("display","none"),a.toggleMenu(!1),(0,f.select)("#actual-date-tooltip").style("display","none"),a.showUncertainty&&(0,f.select)("#enrolment-chart__legend-toggle").style("display","none")});var ma=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=ma,ma(function(){(0,R.animateAppearance)([tt,at,nt,pt,mt,ht],[],[],[rt,lt,it,Qe,$e,et,vt,_t,Et,ot,st,gt,yt],[Xe,Ze,Je],1e3)});var ha=["siv_actual_path","screening_actual_path","siv_actual_end","screening_actual_end","siv_generic_path","screening_generic_path","enrolment_generic_path","siv_generic_end","screening_generic_end","enrolment_generic_end","siv_adjusted_path","screening_adjusted_path","enrolment_adjusted_path","siv_adjusted_end","screening_adjusted_end","enrolment_adjusted_end","siv_max_hint_line","screening_max_hint_line","enrolment_max_hint_line","actual_siv_max_hint_line","actual_screening_max_hint_line","adjusted_siv_max_hint_line","adjusted_screening_max_hint_line","adjusted_enrolment_max_hint_line"],va=ke.append("g").attr("transform","translate("+(-Le/2+28)+","+Le/2+")").attr("id","chart-menu").style("display",a.menuOpen?null:"none");va.append("rect").at({id:"chart-menu-background",width:168,height:function(){return M?a.showUncertainty?160:190:170},fill:R.COLORS.WHITE}).st({opacity:.9});var _a=va.append("g").attr("id","all-curves_radio-button__wrapper").style("display",a.showUncertainty?null:"none").attr("transform","translate(21,136)");_a.append("circle").attr("r",9).attr("fill",R.COLORS.WHITE).attr("stroke",R.COLORS.BLACK).attr("stroke-width",2),_a.append("g").attr("id","all-curves_radio-button").style("display",a.showUncertainty?"none":null).append("circle").attr("r",5).style("fill",R.COLORS.BLACK),_a.append("g").append("path").attr("fill",R.COLORS.BLUE).attr("fill-opacity",.2);var Ea=_a.append("g").attr("transform",function(){return"translate(23,4)"});if(Ea.append("line").attr("x2",20).attr("y1",6).attr("y2",6).attr("class","line"),Ea.append("text").classed("chart-legend__label",!0).text("All Curves"),_a.on("click",function(){a.toggleUncertainty();var e=a.showUncertainty?"none":null;(0,f.select)("#all-curves_radio-button").style("display",e),a.toggleSeries("ADJUSTED",!0),a.toggleSeries("APPROVED",!0),a.toggleSeries("ACTUALS",!0),a.toggleCurveVisibility("SIV",!0),a.toggleCurveVisibility("Screening",!0),a.toggleCurveVisibility("Randomization",!0),(0,f.select)("#enrolment-chart__legend-toggle_uncertainty").translate([0,87]).style("display","none"),(0,f.select)("#enrolment-chart__legend-toggle").style("pointer-events","all").translate([0,1]),(0,f.select)("#enrolment-chart__legend-toggle_uncertainty").st({display:"none"}),(0,f.select)("#siv-group-checkbox_wrapper").style("display",null),(0,f.select)("#screening-group-checkbox_wrapper").style("display",null),(0,f.select)("#enrolment-group-checkbox_wrapper").style("display",null),(0,f.select)("#all-curves_radio-button__wrapper").style("display","none"),(0,f.select)("#uncertainty_radio-button").style("display","none"),(0,f.select)("#chart-menu-background").attr("height",190),(0,f.select)("#siv-group-checkbox").style("display",null),(0,f.select)("#screening-group-checkbox").style("display",null),(0,f.select)("#enrolment-group-checkbox").style("display",null),(0,f.select)("#legend_group_Approved").st({pointerEvents:"all",opacity:1}),(0,f.select)("#legend_group_PrevAppr").st({pointerEvents:"all",opacity:1}),(0,f.select)("#legend_group_Actuals").st({pointerEvents:"all",opacity:1}),(0,f.select)("#legend_group_Adjusted").st({pointerEvents:"all",opacity:1}),(0,f.select)("#enrolment_generic_path").style("display",null),(0,f.select)("#enrolment_generic_end").style("display",null),(0,f.select)("#enrolment_actual_path").style("display",null),(0,f.select)("#enrolment_actual_end").style("display",null),(0,f.select)("#enrolment_adjusted_path").style("display",null),(0,f.select)("#enrolment_adjusted_end").style("display",null),(0,f.select)("#actual_q75_max_hint_line").style("display","none"),(0,f.select)("#actual_q25_max_hint_line").style("display","none"),(0,f.select)("#uncertainty-tooltip-data").style("display","none"),(0,f.select)("#tooltip-background-rect").at({width:156,height:O?96:66}),(0,f.selectAll)(".regular-tooltip-data").style("display",null),(0,f.selectAll)(".uncertainty-range-milestones").style("display","none"),ha.forEach(function(e){var t=!0;-1!==e.indexOf("siv")&&(t=a.sivGroupVisible),-1!==e.indexOf("screening")&&(t=a.screeningGroupVisible),-1!==e.indexOf("enrolment")&&(t=a.enrolmentGroupVisible),-1!==e.indexOf("generic")&&(t=t&&a.genericVisible),-1!==e.indexOf("adjusted")&&(t=t&&a.adjustedVisible),-1!==e.indexOf("actual")&&(t=t&&a.actualsVisible),(0,f.select)("#"+e).style("display",t?null:"none")}),(0,f.select)(".uncertainty-area").style("display","none")}),M&&!N){var ga=va.append("g").attr("id","uncertainty_radio-button__wrapper").translate([21,50]);ga.append("circle").attr("r",9).attr("fill",R.COLORS.WHITE).attr("stroke",R.COLORS.BLACK).attr("stroke-width",2),ga.append("g").attr("id","uncertainty_radio-button").style("display",a.showUncertainty?null:"none").append("circle").attr("r",5).style("fill",R.COLORS.BLACK);var ya=ga.append("g").attr("transform",function(){return"translate(23,4)"});ya.append("line").attr("x2",20).attr("y1",6).attr("y2",6).attr("class","line randomization"),ya.append("text").classed("chart-legend__label",!0).text("Uncertainty"),ga.on("click",function(){a.showUncertainty||a.toggleUncertainty();var e=a.showUncertainty?null:"none";a.toggleSeries("ADJUSTED",!1),a.toggleSeries("APPROVED",!1),a.toggleCurveVisibility("SIV",!1),a.toggleCurveVisibility("Screening",!1),(0,f.select)("#uncertainty_radio-button").style("display",e),(0,f.select)("#chart-menu-background").attr("height",160),(0,f.select)("#enrolment-chart__legend-toggle_uncertainty").translate([0,-86]).style("display",null),(0,f.select)("#enrolment-chart__legend-toggle").style("pointer-events","none").translate([0,86]),(0,f.select)("#siv-group-checkbox_wrapper").style("display","none"),(0,f.select)("#screening-group-checkbox_wrapper").style("display","none"),(0,f.select)("#enrolment-group-checkbox_wrapper").style("display","none"),(0,f.select)("#all-curves_radio-button__wrapper").style("display",null),(0,f.select)("#all-curves_radio-button").style("display","none"),(0,f.select)("#enrolment-chart__all-curves-toggle").style("display",null),(0,f.select)("#enrolment_actual_path").style("display",null),(0,f.select)("#enrolment_actual_end").style("display",null),(0,f.select)("#legend_group_Approved").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#legend_group_PrevAppr").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#legend_group_Actuals").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#legend_group_Adjusted").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#actual_q75_max_hint_line").style("display",null),(0,f.select)("#actual_q25_max_hint_line").style("display",null),(0,f.select)("#uncertainty-tooltip-data").style("display",null),(0,f.select)("#tooltip-background-rect").at({width:60,height:96}),(0,f.selectAll)(".regular-tooltip-data").style("display","none"),(0,f.selectAll)(".uncertainty-range-milestones").style("display",e),ha.forEach(function(e){(0,f.select)("#"+e).style("display","none")}),(0,f.select)(".uncertainty-area").style("display",null)})}var Sa=[{checkboxId:"siv-group-checkbox",groupX:10,groupY:M&&!N?76:56,groupFlag:"sivGroupVisible",groupName:"SIV",group:[{components:[tt,rt],groupFlag:"sivGroupVisible",seriesFlag:"genericVisible"},{components:[Xe,Qe],groupFlag:"sivGroupVisible",seriesFlag:"actualsVisible"},{components:[pt,vt],groupFlag:"sivGroupVisible",seriesFlag:"adjustedVisible"}]},{checkboxId:"screening-group-checkbox",groupX:10,groupY:M&&!N?116:96,groupFlag:"screeningGroupVisible",groupName:"Screening",group:[{components:[at,lt,ot],groupFlag:"screeningGroupVisible",seriesFlag:"genericVisible"},{components:[Ze,$e],groupFlag:"screeningGroupVisible",seriesFlag:"actualsVisible"},{components:[mt,_t,gt],groupFlag:"screeningGroupVisible",seriesFlag:"adjustedVisible"}]},{checkboxId:"enrolment-group-checkbox",groupX:10,groupY:M&&!N?156:136,groupFlag:"enrolmentGroupVisible",groupName:"Randomization",group:[{components:[nt,it,st],groupFlag:"enrolmentGroupVisible",seriesFlag:"genericVisible"},{components:[Je,et],groupFlag:"enrolmentGroupVisible",seriesFlag:"actualsVisible"},{components:[ht,Et,yt],groupFlag:"enrolmentGroupVisible",seriesFlag:"adjustedVisible"}]}];(0,R.drawChartMenu)(va,Sa,a),a.showUncertainty&&((0,f.select)("#siv-group-checkbox_wrapper").style("display","none"),(0,f.select)("#screening-group-checkbox_wrapper").style("display","none"),(0,f.select)("#enrolment-group-checkbox_wrapper").style("display","none"),ha.forEach(function(e){(0,f.select)("#"+e).style("display","none")}),(0,f.select)("#legend_group_Approved").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#legend_group_PrevAppr").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#legend_group_Actuals").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#legend_group_Adjusted").st({pointerEvents:"none",opacity:.5}),(0,f.select)("#actual_q75_max_hint_line").style("display",null),(0,f.select)("#actual_q25_max_hint_line").style("display",null),(0,f.select)("#uncertainty-tooltip-data").style("display",null),(0,f.select)("#tooltip-background-rect").at({width:60,height:96}),(0,f.selectAll)(".regular-tooltip-data").style("display","none")),(0,f.select)("#enrolment-chart__legend-toggle").on("click",function(){a.toggleMenu(),va.style("display",a.menuOpen?null:"none"),a.showUncertainty&&(0,f.select)("#enrolment-chart__legend-toggle").style("display",a.menuOpen?null:"none")}),(0,f.select)("#enrolment-chart__legend-toggle_uncertainty").on("click",function(){a.toggleMenu(),va.style("display",a.menuOpen?null:"none"),a.showUncertainty&&(0,f.select)("#enrolment-chart__legend-toggle").style("display",a.menuOpen?null:"none")})}},a.menuOpen=!1,a.showUncertainty=!1,a.sivGroupVisible=!0,a.screeningGroupVisible=!0,a.enrolmentGroupVisible=!0,a.genericVisible=!0,a.actualsVisible=!0,a.adjustedVisible=!0,a.debounced=(0,g.default)(a.renderChart,200),a}return i(t,e),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.renderChart()}},{key:"componentDidUpdate",value:function(){this.renderChart()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{ref:function(t){e.container=t},className:"svg-wrapper",id:"svg_wrapper_enrolment_chart"},u.default.createElement("div",{id:"enrolment-chart__legend-toggle",style:{display:this.showUncertainty&&!this.menuOpen?"none":null}},C.Icons.CHART_MENU),u.default.createElement("div",{id:"enrolment-chart__legend-toggle_uncertainty",style:{display:"none"}},C.Icons.GRAPH_UNCERTAINTY))}}]),t}(u.default.Component);I.contextType=A.ChartDataContext,I.defaultProps={studyStatus:"PLANNED",cohortName:null,isOverallocated:!1,isImpact:!1,onToggleOverallocation:void 0},I.propTypes={onToggleOverallocation:c.default.func},t.default=(0,T.default)(I)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(25),m=a(27),h=a(110),v=a(87),_=a(125);a(339);var E=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={data:e.data},a.renderChart=a.renderChart.bind(a),a}return o(t,e),s(t,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({data:e.data},function(){t.renderChart()})}},{key:"renderChart",value:function(){(0,p.select)("#svg_wrapper_historical-benchmark-chart").select(".svg-container").remove();var e=this.state.data,t=this.container,a={top:4,right:15,bottom:4,left:15},n=t.getBoundingClientRect().width-a.left-a.right,l=100-a.top-a.bottom,i=(0,p.select)("#svg_wrapper_historical-benchmark-chart"),o=i.append("div").classed("svg-container",!0).append("svg").attr("width",n+a.left+a.right).attr("height",l+a.top+a.bottom),s=o.append("g").attr("transform","translate("+a.left+","+a.top+")"),u=(0,h.scaleLinear)().rangeRound([0,n]),d=e.cellName,c="",f=e.value,E=e.satellites?e.satellites.filter(function(e){return null!==e&&e>=0}):[];if(0===E.length)return void s.append("text").translate([n/2,l/2]).attr("text-anchor","middle").classed("no-data-message",!0).text("Chart is not available");switch(d){case v.FIELDS.fpfv:case v.FIELDS.fsiv:case v.FIELDS["25_si"]:case v.FIELDS["50_si"]:case v.FIELDS["90_si"]:c="w";break;case v.FIELDS.sas:case v.FIELDS.screening_failure:c="%",f=null!==f?+(100*f).toFixed(0):null,E=E.map(function(e){return+(100*e).toFixed(0)});break;case v.FIELDS.randomisation_rate:E=E.map(function(e){return+e});break;default:c=""}var g=[].concat(r(E),[f]).sort(),y=(0,m.extent)(g);u.domain([y[0],y[1]]);var S=s.append("g").attr("transform","translate(0, "+l/1.7+")");S.append("line").attr("x2",n).style("stroke-width",8).classed("milestones-bar-background",!0),S.append("line").attr("x2",n).classed("milestones-bar",!0);var b=S.selectAll("satellite").data(E).enter().append("g").attr("transform",function(e){return"translate("+u(e)+")"});(0,_.appendHoverMark)(b,-12,_.COLORS.WHITE),y[0]!==y[1]&&S.selectAll("minMaxlegend").data(y).enter().append("g").attr("transform",function(e){return"translate("+u(e)+")"}).append("text").attr("y",34).attr("font-size",16).attr("text-anchor",function(e,t){return 0===t?"start":"end"}).attr("dx",function(e,t){return 0===t?-4:4}).style("fill",_.COLORS.DARK_GREY).text(function(e){return""+e+c});var C=d===v.FIELDS.randomisation_rate?+((y[0]+y[1])/2).toFixed(2):(y[0]+y[1])/2;if(C!==y[0]&&C!==y[1]){var O=S.append("g").attr("transform","translate("+u(C)+")");O.append("line").attr("y1",-10).attr("y2",10).style("stroke",_.COLORS.BLACK).attr("stroke-width",1),O.append("text").attr("y",34).attr("font-size",16).attr("text-anchor","middle").style("fill",_.COLORS.DARK_GREY).text(d===v.FIELDS.randomisation_rate?""+C+c:""+Math.round(C)+c)}if(null!==f){var T=(0,_.appendMilestone)(S,u(f),_.COLORS.BLACK,"",null,!0,1),R=T.append("g").classed("global-row-tooltip",!0).style("display",null).attr("transform",function(){return u(f)>=u(C)&&y[0]!==y[1]?"translate(-60, -40)":"translate(0, -40)"});R.append("polygon").style("fill",_.COLORS.BLACK).attr("points",function(){return u(f)>=u(C)&&y[0]!==y[1]?"0,0 50,0 60,35 0,20 0,0":"10,0 60,0 60,20 0,35 10,0"}),R.append("text").attr("text-anchor","middle").style("fill",_.COLORS.WHITE).style("font-size",14).classed("tooltip-text",!0).attr("transform","translate("+(u(f)>=u(C)?25:30)+", 17)").text(""+f+c)}}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{ref:function(t){e.container=t},className:"svg-wrapper",id:"svg_wrapper_historical-benchmark-chart"})}}]),t}(d.default.Component);E.defaultProps={data:{satellites:[16,37,12,15,17,21,34,9,47],suffix:"w",value:27}},E.propTypes={data:f.default.shape({satellites:f.default.array,cellName:f.default.string,value:f.default.number})},t.default=E},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(25),p=a(110),m=a(165),h=a(10),v=n(h),_=a(123),E=n(_),g=a(125),y=a(514),S=n(y),b=a(112);a(339);var C=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleResize=function(){a.debounced()},a.renderChart=function(){(0,f.select)("#svg_wrapper_enrolment_chart_minimized").select(".svg-container").remove();var e=a.context,t=e.scenario,n=e.startDate,r=e.latestDate,l=e.snapshotActualDate,i=e.maxValue,o=e.maxValuesArray,s=e.monthsTickValues,u=e.isExactCopy,d=e.showAdjusted,c=e.isOverallocated,h=e.isImpact,_=e.isApproved,E=e.trackingCohortsView,y=e.hasOverallocation,S=e.showOverallocation,b=e.genericsAreValid,C=e.actualsAreValid,O=e.isPrevApproved,T=(e.showNoData,e.showWrongData,e.dataReady,e.filteredEnrolment),R=e.pLpft,w=e.tLpft,A=e.fsiv,I=e.fpfv,N=e.fpft,D=e.lpfv,P=e.actualDate,L=e.actualFlpft,M=e.actualFsiv,x=e.actualFpfv,k=e.actualFpft,j=e.actualLpfv,F=e.adjustedLpft,U=e.adjustedFsiv,V=e.adjustedFpfv,B=e.adjustedFpft,H=e.adjustedLpfv,G=a.container;if(G){var Y=G.getBoundingClientRect().width,q=(Y-240)/11*2+48,z={top:5,right:q,bottom:10,left:130},W=G.getBoundingClientRect().width-z.left-z.right,K=200-z.top-z.bottom,X=d?130:110,Z=(0,f.select)("#svg_wrapper_enrolment_chart_minimized"),J=Z.append("div").classed("svg-container",!0).append("svg").attr("width",W+z.left+z.right).attr("height",K+z.top+z.bottom);J.append("rect").at({x:-20,y:-20,width:W+z.left+z.right+40,height:K+z.top+z.bottom+40,fill:g.COLORS.WHITE}),(0,g.injectPatternDefs)(J,"actualPattern1");var Q=J.append("g").attr("transform","translate("+z.left+","+z.top+")"),$=(0,p.scaleTime)().rangeRound([0,W]);if(0===o.filter(function(e){return e}).length)return void Q.append("text").attr("transform","translate("+W/2+","+K/2+")").attr("text-anchor","middle").classed("no-data-message",!0).text("There is not enough data to build a chart yet");if(i.isSameOrBefore(n))return(0,f.select)("#enrolment-chart__legend-toggle").style("display","none"),void Q.append("text").translate([W/2,K/2]).attr("text-anchor","middle").classed("no-data-message",!0).text("The approved scenario and graph cannot be loaded due to data inconsistencies");$.domain([n,i]),Q.append("rect").attr("transform","translate(0,"+X+")").attr("width",W).attr("height",36).attr("class","chart-background").st({fill:g.COLORS.BLACK,opacity:.04}),Q.append("rect").attr("transform","translate(0,"+X+")").attr("x",-30).attr("width",30).attr("height",36).attr("class","chart-background side").st({fill:g.COLORS.BLACK,opacity:.02}),Q.append("rect").attr("transform","translate(0,"+X+")").attr("x",W).attr("width",30).attr("height",36).attr("class","chart-background side").st({fill:g.COLORS.BLACK,opacity:.02});var ee=(0,m.axisBottom)().scale($).tickValues(s).tickSizeOuter(0),te=[{x:function(){return $(n.isSameOrBefore(t.end_date)?R<t.end_date?R:t.end_date:R<t.end_date?R:n)},y:X,width:function(){return n.isSameOrBefore(t.end_date)?R<t.end_date?$(t.end_date)-$(R):$(R)-$(t.end_date):R<t.end_date?$(t.end_date)-$(R):$(R)-$(n)},height:36,fill:R<t.end_date?g.COLORS.GREEN:g.COLORS.RED,opacity:.2},{x:$(L<=R?L:R),y:X,width:L<=R?$(R)-$(L):$(L)-$(R),height:36,fill:function(){return c?g.COLORS.GREY:L<=R?g.COLORS.GREEN:g.COLORS.RED},opacity:.2},{x:$(F<=R?F:R),y:X,width:F<=R?$(R)-$(F):$(F)-$(R),height:36,fill:F<=R?g.COLORS.GREEN:g.COLORS.RED,opacity:.2}];!E&&b&&(_&&L&&R?(0,g.drawOverflowRect)(Q,te[1]):R&&t.end_date&&!h&&(0,g.drawOverflowRect)(Q,te[0])),d&&b&&(0,g.drawOverflowRect)(Q,te[2]),_&&P&&(0,g.drawOverflowRect)(Q,{x:$(n),y:X,width:$(P),height:36,fill:"url(#actualPattern1)",opacity:.04});var ae=Q.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+(X-6)+")").call(ee);ae.selectAll("text").attr("class","tick").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).style("text-anchor","middle").text(function(e){return(0,v.default)(e).format("MMM YY")}).attr("transform","translate(0, 50)"),ae.selectAll("line").attr("class","tick-line").st({fill:"none",stroke:g.COLORS.BLACK,shapeRendering:"crispEdges",strokeWidth:"1px"}).attr("y2","12").attr("transform","translate(0.5, 30)"),ae.selectAll("path").st({fill:"none",stroke:g.COLORS.BLACK,opacity:0,shapeRendering:"crispEdges"});var ne=_&&(C||h)&&!O?{stroke:g.COLORS.GREEN,strokeWidth:"4px",opacity:.2}:{stroke:g.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6},re=_&&(C||h)&&!O?{stroke:g.COLORS.LIGHT_GREEN,strokeWidth:"16px"}:{stroke:g.COLORS.GREY,strokeWidth:"16px"},le=Q.append("g").attr("transform","translate(0, "+(_&&(C||d||h)?20:80)+")");le.append("line").attr("x2",_&&C&&R&&R>n?$(R):W).classed("milestones-bar-background",!_||!C||O).classed("milestones-bar-background-approved",_&&(C||h)&&!O).st(re),le.append("line").attr("x2",_&&C&&R&&R>n?$(R):W).classed("milestones-bar",!_||!C||O).classed("milestones-bar-approved",_&&(C||h)&&!O).st(ne),_&&P&&le.append("rect").attr("x",$(n)).attr("width",$(P)).attr("y",-8).attr("height",16).style("fill","url(#actualPattern1)").attr("opacity",.04);var ie=(0,g.appendFppMark)(le,$(n));ie.append("line").attr("y1",10).attr("y2",66).style("stroke","black").style("stroke-width","2px"),_&&C||d||h||((0,g.appendLabelToMilestone)(ie,"FP",g.COLORS.BLACK,g.COLORS.WHITE,g.COLORS.BLACK,-105),(0,g.appendLineToLabel)(ie,g.COLORS.BLACK,!1));var oe=void 0,se=void 0,ue=void 0,de=void 0;A&&A.isSameOrBefore(r)&&A.isSameOrAfter(n)&&(se=(0,g.appendMilestone)(le,$(A),g.COLORS.YELLOW,"FSIV",-105)),I&&I.isSameOrBefore(r)&&I.isSameOrAfter(n)&&(ue=(0,g.appendMilestone)(le,$(I),g.COLORS.PURPLE,"FPFV",-105)),N&&N.isSameOrBefore(r)&&N.isSameOrAfter(n)&&(oe=(0,g.appendMilestone)(le,$(N),g.COLORS.BLUE,"FPFT",-105)),D&&D.isSameOrBefore(r)&&D.isSameOrAfter(n)&&(de=(0,g.appendMilestone)(le,$(D),g.COLORS.PURPLE,"LPFV",-105)),_&&C||!b||d||((0,g.appendLineToLabel)(oe,g.COLORS.BLUE,!0),(0,g.appendLineToLabel)(se,g.COLORS.YELLOW,!0),(0,g.appendLineToLabel)(ue,g.COLORS.PURPLE,!0),(0,g.appendLineToLabel)(de,g.COLORS.PURPLE,!0));var ce=void 0;!w||d||h||!w.isAfter(n)||E||(ce=le.append("g").attr("transform","translate("+$(w)+")"),_&&C||(ce.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",g.COLORS.WHITE).attr("r",9),ce.append("circle").style("fill",g.COLORS.BLACK).attr("r",6),ce.append("line").attr("y1",10).attr("y2",66).style("stroke","black").style("stroke-dasharray","6 3").style("stroke-width","1px"),(0,g.appendLabelToMilestone)(ce,"T/LPFT",g.COLORS.BLACK,g.COLORS.BLACK,g.COLORS.WHITE,-105),(0,g.appendLineToLabel)(ce,g.COLORS.BLACK,!1)));var fe=void 0;if(R&&(fe=le.append("g").attr("transform","translate("+$(R)+")"),fe.append("line").attr("y1",10).attr("y2",_&&(C||d||h)?126:66).style("stroke","black").style("stroke-width","2px"),fe.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",g.COLORS.WHITE).attr("r",9),fe.append("circle").style("fill",function(){return _&&(C||d||h)?g.COLORS.BLACK:R<=t.end_date?g.COLORS.GREEN:g.COLORS.RED}).attr("r",6),_&&(C||d||h)||((0,g.appendLabelToMilestone)(fe,"P/LPFT",g.COLORS.BLACK,g.COLORS.WHITE,g.COLORS.BLACK,-105),(0,g.appendLineToLabel)(fe,g.COLORS.BLACK,!1))),y&&S&&!a.props.hideAdjusted){var pe=T[T.length-1];if(pe&&pe.date){var me=le.append("g").attr("transform","translate("+$(pe.date)+")");me.append("line").attr("y1",_&&(C||d||h)?46:-10).attr("y2",66).style("stroke",g.COLORS.DARK_GREY).style("stroke-width","2px"),me.append("circle").style("stroke",g.COLORS.DARK_GREY).style("stroke-width","2px").style("fill",g.COLORS.WHITE).attr("r",9),me.append("circle").style("fill",g.COLORS.DARK_GREY).attr("r",6)}}var he=void 0,ve=void 0,_e=void 0,Ee=void 0,ge=Q.append("g").attr("transform","translate(0, 60)");if(_&&(C||d||h)){if((E||L)&&P&&R){ge.append("line").attr("x2",$(L>R||!E?L:R)).st({stroke:g.COLORS.MID_GREY,strokeWidth:"4px",strokeDasharray:"4 4",opacity:.6}).classed("actual-milestones-bar",!0);var ye=ge.append("g").attr("transform","translate("+$(n)+")");ye.append("rect").attr("width",$(P)).attr("y",-2).attr("height",4).style("fill",g.COLORS.GREY),ye.append("rect").attr("width",$(P)).attr("y",-2).attr("height",4).style("fill","url(#actualPattern1)").attr("opacity",.04)}else ge.append("line").attr("x2",F?$(F):W).classed("actual-milestones-bar",!0).st({stroke:g.COLORS.MID_GREY,strokeWidth:"4px",strokeDasharray:"4 4",opacity:.6});if((0,g.appendFppMark)(ge,$(n)).append("line").attr("y1",10).attr("y2",d?76:86).style("stroke","black").style("stroke-width","2px"),E||L&&R&&(ge.append("line").attr("x1",function(){return L<=R?$(L):R>n?$(R):10}).attr("x2",function(){return $(L<=R?R:L)}).style("stroke",function(){return c?g.COLORS.DARK_GREY:L<=R?g.COLORS.GREEN:g.COLORS.RED}).style("stroke-width","4px"),ge.append("text").classed("active-range-label",!0).st({fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("text-anchor",function(){return L<=R?"end":"start"}).text((L>R?"+":"")+L.diff(R,"days")+"d").attr("transform",function(){return L<=R?"translate("+($(R)-20)+", -14)":"translate("+($(R)+20)+", -14)"}).style("fill",function(){return c?g.COLORS.BLACK:L<=R?g.COLORS.GREEN:g.COLORS.RED})),k&&(h||P>=k)&&k>n&&(_e=(0,g.appendMilestone)(ge,$(k),g.COLORS.BLUE,"FPFT",null,_&&(C||h))),M&&(h||P>=M)&&M>n&&(he=(0,g.appendMilestone)(ge,$(M),g.COLORS.YELLOW,"FSIV",null,_&&(C||h))),x&&(h||P>=x)&&x>n&&(ve=(0,g.appendMilestone)(ge,$(x),g.COLORS.PURPLE,"FPFV",null,_&&(C||h))),j&&(h||P>=j)&&j>n&&(Ee=(0,g.appendMilestone)(ge,$(j),g.COLORS.PURPLE,"LPFV",null,_&&(C||h))),P){var Se=ge.append("g").attr("transform","translate("+$(P)+")");Se.append("line").attr("y1",-48).attr("y2",d?-10:67).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px");var be=Se.append("g"),Ce=be.append("g").attr("transform","translate(0, "+(d?76:46)+")");Ce.append("polygon").attr("points","0,0, 15,0, 7.5,7.5").attr("transform","translate(-7.5,30)"),Ce.append("polygon").attr("points","0,0, 15,0, 7.5,-7.5").attr("transform","translate(-7.5)"),Ce.append("rect").attr("x",-32).attr("width",64).attr("height",30).style("fill",g.COLORS.BLACK),Ce.append("text").attr("class","date").attr("transform","translate(0,20)").attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).style("fill",g.COLORS.WHITE).text(P?P.format("DD MMM"):""),(0,g.appendMilestone)(Se,0,g.COLORS.BLACK,null,null,_&&(C||d||h))}if(!E&&L){var Oe=ge.append("g").attr("transform","translate("+$(L)+")");Oe.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",g.COLORS.WHITE).attr("r",9),Oe.append("circle").style("fill",function(){return c?g.COLORS.BLACK:!R||L<=R?g.COLORS.GREEN:g.COLORS.RED}).attr("r",6),Oe.append("line").attr("y1",12).attr("y2",d?36:86).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px")}}var Te=void 0,Re=void 0,we=void 0,Ae=void 0,Ie=Q.append("g").attr("transform","translate(0, 100)");if(d){R?(Ie.append("line").attr("x1",$(l)).attr("x2",$(F<R?F:R)).st({stroke:g.COLORS.GREY,strokeWidth:"16px"}).classed("milestones-bar-background",!0),Ie.append("line").attr("x1",$(l)).attr("x2",$(F<R?F:R)).st({stroke:g.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6}).classed("milestones-bar",!0),(0,g.appendFppMark)(Ie,$(n)).append("line").at({y1:10,y2:66}).st({opacity:u?0:1,stroke:g.COLORS.BLACK,strokeWidth:2}),Ie.append("line").attr("x1",$(F<=R?F:R)).attr("x2",$(F<=R?R:F)).style("stroke",F<=R?g.COLORS.GREEN:g.COLORS.RED).style("stroke-width","4px"),Ie.append("text").classed("active-range-label",!0).st({fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("text-anchor",F<=R?"end":"start").text((F>R?"+":"")+F.diff(R,"days")+"d").attr("transform",F<=R?"translate("+($(R)-20)+", -14)":"translate("+($(R)+20)+", -14)").style("fill",F<=R?g.COLORS.GREEN:g.COLORS.RED),Ie.append("g").attr("transform","translate("+$(R)+")").append("line").attr("y1",-8).attr("y2",66).style("stroke","black").style("stroke-width","2px")):(Ie.append("line").attr("x1",$(l)).attr("x2",$(F)).st({stroke:g.COLORS.GREY,strokeWidth:"16px"}).classed("milestones-bar-background",!0),Ie.append("line").attr("x1",$(l)).attr("x2",$(F)).st({stroke:g.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6}).classed("milestones-bar",!0)),Ae=(0,g.appendMilestone)(Ie,$(B),g.COLORS.BLUE,"FPFT",null,!0,B<l?.3:1),Te=(0,g.appendMilestone)(Ie,$(U),g.COLORS.YELLOW,"FSIV",null,!0,U<l?.3:1),Re=(0,g.appendMilestone)(Ie,$(V),g.COLORS.PURPLE,"FPFV",null,!0,V<l?.3:1),we=(0,g.appendMilestone)(Ie,$(H),g.COLORS.PURPLE,"LPFV",null,!0,H<l?.3:1),(0,g.appendMilestone)(Ie,$(P),g.COLORS.BLACK,null,null,!0).append("line").attr("y1",-16).attr("y2",46).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px");var Ne=Ie.append("g").classed("mark-g",!0).style("opacity",u?0:.9).attr("transform","translate("+($(l)-12)+","+-12+")");Ne.append("defs").append("path").attr("id","a").attr("d","M12 7l5 5-5 5-5-5z"),Ne.append("g").attr("fill","none").attr("fill-rule","evenodd").append("use").attr("fill",g.COLORS.BLACK).attr("xlink:href","#a"),Ne.append("line").attr("x1",12).attr("x2",20).attr("y1",4).attr("y2",12).style("stroke-linecap","square").style("stroke",g.COLORS.BLACK).style("stroke-width",2),Ne.append("line").attr("x1",12).attr("x2",20).attr("y1",20).attr("y2",12).style("stroke-linecap","square").style("stroke",g.COLORS.BLACK).style("stroke-width",2);var De=Ie.append("g").attr("transform","translate("+$(F)+")");De.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",g.COLORS.WHITE).attr("r",9),De.append("circle").style("fill",function(){return R?F<=R?g.COLORS.GREEN:g.COLORS.RED:g.COLORS.BLACK}).attr("r",6),De.append("line").attr("y1",12).attr("y2",66).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px"),b||De.append("line").attr("y1",-12).attr("y2",-86).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px"),!E&&C&&Ie.append("g").attr("transform","translate("+$(L)+")").append("line").attr("y1",-4).attr("y2",66).attr("stroke-dasharray","4 4").style("stroke","black").style("stroke-width","2px")}var Pe=[{groupX:W+z.right-90,groupY:0,backgroundFill:g.COLORS.BLACK,text:R?R.format("DD MMM YY"):"",label:"P/LPFT",title:O?"PrevAppr":"Approved"},{groupX:W+z.right-90,groupY:0,backgroundFill:function(){return c?g.COLORS.DARK_GREY:!R||L<R?g.COLORS.GREEN:g.COLORS.RED},text:L?L.format("DD MMM YY"):"",label:"F/LPFT",title:"Actuals"},{groupX:W+z.right-90,groupY:0,backgroundFill:F>R?g.COLORS.RED:g.COLORS.GREEN,text:F?F.format("DD MMM YY"):"",label:"A/LPFT",title:"Adjusted"}];if(_&&(C||d||h)&&((0,g.appendMilestonesLegend)(le,Pe[0]),(0,g.appendMilestonesLegend)(ge,Pe[1],E)),d&&(0,g.appendMilestonesLegend)(Ie,Pe[2]),_&&(C||d||h)){var Le={fsiv:{icon:se,color:g.COLORS.YELLOW,offset:54},fpfv:{icon:ue,color:g.COLORS.PURPLE,offset:54},fpft:{icon:oe,color:g.COLORS.BLUE,offset:54},lpfv:{icon:de,color:g.COLORS.PURPLE,offset:54},actual_fsiv:{icon:he,color:g.COLORS.YELLOW,offset:94},actual_fpfv:{icon:ve,color:g.COLORS.PURPLE,offset:94},actual_fpft:{icon:_e,color:g.COLORS.BLUE,offset:94},actual_lpfv:{icon:Ee,color:g.COLORS.PURPLE,offset:94},adjusted_fsiv:{icon:Te,color:g.COLORS.YELLOW,offset:134},adjusted_fpfv:{icon:Re,color:g.COLORS.PURPLE,offset:134},adjusted_fpft:{icon:Ae,color:g.COLORS.BLUE,offset:134},adjusted_lpfv:{icon:we,color:g.COLORS.PURPLE,offset:134}};Object.keys(Le).forEach(function(e){Le[e]&&Le[e].icon&&(Le[e].icon.on("mouseover",function(){var t=(0,f.select)(this).attr("transform"),a=e.substr(e.indexOf("_")+1,e.length),n=a.length>4?11:13,r=Q.append("g").at({id:e+"-milestone-tooltip"}).attr("transform",t),l=r.append("g").translate([-a.length*n/2,Le[e].offset]);l.append("rect").attr("width",a.length*n).attr("height",30).style("fill",Le[e].color).style("stroke",Le[e].color).style("stroke-width",1),l.append("text").translate([a.length*n/2,20]).attr("text-anchor","middle").classed("milestone-label",!0).st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif"}).attr("fill",g.COLORS.WHITE).text(a)}),Le[e].icon.on("mouseout",function(){(0,g.removeMilestoneTooltip)(Q,e)}))})}}},a.debounced=(0,E.default)(a.renderChart,200),a}return i(t,e),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.renderChart()}},{key:"componentDidUpdate",value:function(){this.renderChart()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{ref:function(t){e.container=t},className:"svg-wrapper",id:"svg_wrapper_enrolment_chart_minimized"})}}]),t}(u.default.Component);C.contextType=b.ChartDataContext,C.defaultProps={studyStatus:"PLANNED",hideAdjusted:!1,isOverallocated:!1,cohortName:null,isImpact:!1,fromPrevApproved:!1,showOverallocation:!1},C.propTypes={hideAdjusted:c.default.bool},t.default=(0,S.default)(C)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(30),c=n(d),f=a(1),p=n(f),m=a(2),h=n(m),v=a(6),_=a(13),E=n(_),g=a(101),y=n(g),S=a(147);a(2311);var b=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isLoading:!1},a.saveAsImage=a.saveAsImage.bind(a),a}return i(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e,t){return t.isLoading||t.isLoading!==this.state.isLoading}},{key:"saveAsImage",value:function(){var e=this,t=this.props,a=t.study,n=t.scenario,r=t.filter;this.setState({isLoading:!0},function(){setTimeout(function(){(0,S.saveAsImage)(a,n,r,e.setState.bind(e,{isLoading:!1}))},2e3)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.isDisabled,n=t.className;return u.default.createElement("div",{className:(0,h.default)("chart-screenshot-icon__wrapper",n)},this.state.isLoading&&c.default.createPortal(u.default.createElement(y.default,null),document.body),u.default.createElement(E.default,{mouseEnterDelay:.7,overlay:a?u.default.createElement("div",null,"Save chart as image. ",u.default.createElement("br",null),"Not available for collapsed chart"):"Save chart as image"},u.default.createElement("div",{className:(0,h.default)("fpo-sidebar__content",{disabled:a}),onClick:function(){a||e.saveAsImage()}},v.Icons.DOWNLOAD)))}}]),t}(u.default.Component);b.defaultProps={isDisabled:!1,filter:"",notCollapsibleChart:!1,className:""},b.propTypes={isDisabled:p.default.bool,study:p.default.object.isRequired,scenario:p.default.object.isRequired,filter:p.default.string,className:p.default.string},t.default=b},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var s,u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),f=a(1),p=n(f),m=a(66),h=n(m),v=a(2),_=n(v),E=a(6),g=a(13),y=n(g),S=a(179),b=a(501),C=n(b),O=a(502),T=n(O),R=a(503),w=n(R),A=a(41),I=a(70),N=a(40);a(340);var D=a(14),P=(s={},o(s,A.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE,w.default),o(s,A.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS,T.default),o(s,A.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE,C.default),o(s,A.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE,C.default),s),L=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showMenu:!1},a.toggleMenu=a.toggleMenu.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a}return i(t,e),u(t,[{key:"toggleMenu",value:function(e){this.setState({showMenu:void 0!==e?e:!this.state.showMenu})}},{key:"handleClickOutside",value:function(e){this.state.showMenu&&e&&!e.target.getAttribute("data-ignore-click-outside")&&this.toggleMenu(!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.event,n=t.onDuplicate,r=t.onRemove,l=t.onUpdate,i=t.locations,o=t.scenario,s=t.metadata,u=this.state.showMenu;if(!a||!i||0===i.length||!o)return null;var d=s.isTracking,f=s.isAdjusted,p=(0,I.getEventType)(a.event_type),m=!s.isEditable||a.disabled,h=a.disabled||!1,v=(0,_.default)("event-details-component__container",{disabled:m}),g=(0,_.default)("event-details-component__icon","type-"+p),b=(0,_.default)("event-details-component__wrapper",{hovered:u}),C=(0,_.default)("event-details-component__actions",{disabled:!s.isEditable}),O=(0,I.getEventIcon)(a.status,d),T=d&&f&&a.status!==A.EVENT_STATUS.PENDING?{start_date:null,end_date:null}:{},R=P[a.event_type];return c.default.createElement("div",{className:v},c.default.createElement("div",{className:b},c.default.createElement("div",{className:g},O),c.default.createElement(R,{event:a,locations:i,onUpdate:l,scenario:o,isTracking:d,isAdjusted:f,isDisabled:m}),o.status!==D.SCENARIO_STATUS.APPROVED&&o.status!==D.SCENARIO_STATUS.PREV_APPROVED&&c.default.createElement("div",{className:C},c.default.createElement(y.default,{mouseEnterDelay:.3,align:{offset:[0,0]},overlay:c.default.createElement("span",null,"Actions")},c.default.createElement(y.default,{destroyTooltipOnHide:!0,align:{offset:[12,0]},placement:"bottomRight",visible:this.state.showMenu,trigger:["click"],overlay:c.default.createElement(S.ContextMenu,null,!m&&c.default.createElement(S.ContextMenuItem,{label:"Duplicate","data-ignore-click-outside":!0,icon:c.default.createElement("div",{className:"icon-color-white"},E.Icons.EVENT_DUPLICATE),onClick:function(){n(a.id,T),e.toggleMenu(!1)}}),(!d||d&&a.status!==A.EVENT_STATUS.COMPLETED&&a.status!==A.EVENT_STATUS.ACTIVE)&&c.default.createElement(S.ContextMenuItem,{label:h?"Enable":"Disable","data-ignore-click-outside":!0,icon:c.default.createElement("div",{className:"icon-color-white"},E.Icons.EVENT),onClick:function(){e.props.onDisable(a.id,!h),e.toggleMenu(!1)}}),!d||d&&f&&a.status===A.EVENT_STATUS.PENDING?c.default.createElement(S.ContextMenuItem,{label:"Remove","data-ignore-click-outside":!0,icon:c.default.createElement("div",{className:"icon-color-white"},E.Icons.CROSS_O),onClick:function(){return r(a.id)}}):null)},c.default.createElement("div",{className:"row-control-icon--more",onClick:function(){return e.toggleMenu()}},E.Icons.MORE_HORIZ))))))}}]),t}(c.default.Component);L.defaultProps={locations:[],scenario:null,metadata:new N.AccessList},L.propTypes={event:p.default.object.isRequired,onDuplicate:p.default.func.isRequired,onRemove:p.default.func.isRequired,onUpdate:p.default.func.isRequired,onDisable:p.default.func.isRequired,locations:p.default.array,scenario:p.default.object,metadata:p.default.object.isRequired},t.default=(0,h.default)(L)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(22),u=a(899),d=n(u),c=function(e){return l.default.createElement(s.Row,{key:e.event.type+"_"+e.event.id},l.default.createElement(s.Col,{width:10,offset:1},l.default.createElement(d.default,e)))};c.propTypes={event:o.default.object.isRequired},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventDetailsComponentTypeC=t.EventDetailsComponentTypeB=t.EventDetailsComponentTypeA=void 0;var r=a(501),l=n(r),i=a(502),o=n(i),s=a(503),u=n(s),d=a(897),c=n(d);t.EventDetailsComponentTypeA=l.default,t.EventDetailsComponentTypeB=o.default,t.EventDetailsComponentTypeC=u.default,t.default=c.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(6),c=a(61),f=n(c),p=a(7);a(794);var m=function(e){var t=e.name,a=e.type,n=e.startDate,r=e.endDate,i=e.ratio,o=e.iconStatus,s=e.iconTypeTracking,c=e.operation,m=e.isEventDisabled;return l.default.createElement("div",{className:"event-widget-by-date"},l.default.createElement("div",{className:"__title"},l.default.createElement("span",{className:(0,u.default)("__icon","event-type__"+a)},s?d.Icons["STAR_"+o]:d.Icons.EVENT),t," ",m?" - disabled":""),l.default.createElement("div",{className:"__details"},l.default.createElement("div",null,l.default.createElement("div",null,"Start date"),l.default.createElement("div",null,(0,p.formatDate)((0,p.getMomentDate)(n)))),l.default.createElement(f.default,{size:"large"}),l.default.createElement("div",null,l.default.createElement("div",null,"End date"),l.default.createElement("div",null,(0,p.formatDate)((0,p.getMomentDate)(r)))),i?l.default.createElement(f.default,{size:"large"}):null,i?l.default.createElement("div",null,l.default.createElement("div",null,c),l.default.createElement("div",null,i,"%")):null))};m.propTypes={name:o.default.string,type:o.default.number,startDate:o.default.oneOfType([o.default.string,o.default.object]).isRequired,endDate:o.default.string.isRequired,ratio:o.default.number,iconTypeTracking:o.default.bool,iconStatus:o.default.string,operation:o.default.string,isEventDisabled:o.default.bool},m.defaultProps={name:"",type:1,ratio:0,iconTypeTracking:!1,iconStatus:null,operation:"Increase by",isEventDisabled:!1},t.default=m},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(6),c=a(61),f=n(c);a(794);var p=function(e){var t=e.name,a=e.type,n=e.patients,r=e.startAfter,i=e.duration,o=e.iconStatus,s=e.iconTypeTracking,c=e.isEventDisabled;return l.default.createElement("div",{className:"event-widget-by-patients"},l.default.createElement("div",{className:"__title"},l.default.createElement("span",{className:(0,u.default)("__icon","event-type__"+a)},s?d.Icons["STAR_"+o]:d.Icons.EVENT),t," ",c?" - disabled":""),l.default.createElement("div",{className:"__details"},l.default.createElement("div",null,l.default.createElement("div",null,"Patients"),l.default.createElement("div",null,n)),l.default.createElement(f.default,{size:"large"}),l.default.createElement("div",null,l.default.createElement("div",null,"Start after"),l.default.createElement("div",null,r,"w")),l.default.createElement(f.default,{size:"large"}),l.default.createElement("div",null,l.default.createElement("div",null,"Duration"),l.default.createElement("div",null,i,"w"))))};p.propTypes={name:o.default.string,type:o.default.number,patients:o.default.number,startAfter:o.default.number,duration:o.default.number,iconTypeTracking:o.default.bool,iconStatus:o.default.string,isEventDisabled:o.default.bool},p.defaultProps={name:"",type:1,patients:0,startAfter:0,duration:0,iconTypeTracking:!1,iconStatus:null,isEventDisabled:!1},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventWidgetByPatients=t.EventWidgetByDate=void 0;var r=a(900),l=n(r),i=a(901),o=n(i);t.EventWidgetByDate=l.default,t.EventWidgetByPatients=o.default,t.default=l.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),m=a(6),h=a(13),v=n(h),_=a(41);a(2313);var E=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={tooltip:!1},a.setTooltip=a.setTooltip.bind(a),a.EventTypes=[_.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE,_.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS,_.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE,_.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE],a}return i(t,e),o(t,[{key:"setTooltip",value:function(e){this.setState({tooltip:e})}},{key:"getTypeNumber",value:function(e){return this.EventTypes.indexOf(e)+1}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.isTracking,n=e.counters,r=e.onAdd,l=e.actionable,i=function(){return t===_.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE?u.default.createElement("span",null,"Screening and randomization pause by ",u.default.createElement("b",null,"date")):t===_.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS?u.default.createElement("span",null,"Screening and randomization pause by ",u.default.createElement("b",null,"num. of patients randomized")):t===_.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE?u.default.createElement("span",null,"Screening rate changed by ",u.default.createElement("b",null,"date")):t===_.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE?u.default.createElement("span",null,"Screening failure rate changed by ",u.default.createElement("b",null,"date")):u.default.createElement("span",null)},o=(0,p.default)("event","event-"+this.getTypeNumber(t),{tracking:a});return u.default.createElement("div",{className:o},l&&!this.props.isOptimizing?u.default.createElement(v.default,{overlayClassName:"event__add-new-event-tooltip",align:{offset:[24,84]},onVisibleChange:this.setTooltip,overlay:u.default.createElement("div",null,m.Icons.CROSS_O,u.default.createElement("span",{className:"action-name",onClick:r},"Add event"))},u.default.createElement("div",{className:(0,p.default)("event-type-description",{hovered:this.state.tooltip})},i())):u.default.createElement("div",{className:"event-type-description"},i()),u.default.createElement("div",{className:"event-statistics"},0!==n.inProgress&&u.default.createElement("div",null,m.Icons.STAR_IN_PROGRESS,u.default.createElement("span",null,n.inProgress)),0!==n.pending&&u.default.createElement("div",null,m.Icons.STAR_PENDING,u.default.createElement("span",null,n.pending)),0!==n.completed&&u.default.createElement("div",null,m.Icons.STAR_COMPLETED,u.default.createElement("span",null,n.completed)),u.default.createElement("div",{className:"counter"},m.Icons.EVENT,u.default.createElement("span",null,n.total))))}}]),t}(s.Component);E.defaultProps={isTracking:!1,actionable:!0,isOptimizing:!1},E.propTypes={type:c.default.string.isRequired,isTracking:c.default.bool,counters:c.default.shape({inProgress:c.default.number,pending:c.default.number,completed:c.default.number,total:c.default.number}).isRequired,onAdd:c.default.func.isRequired,actionable:c.default.bool,isOptimizing:c.default.bool},t.default=E},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),l=a(6),i=function(){return r.default.createElement("div",null,r.default.createElement("ul",{className:"fpo-scenario-events__eventsList"},r.default.createElement("li",null,r.default.createElement("span",{className:"__icon event-type__1"},l.Icons.EVENT),r.default.createElement("span",{className:"fpo-scenario-events__eventKey"},"Screening and randomization pause by ",r.default.createElement("b",null,"date"))),r.default.createElement("li",null,r.default.createElement("span",{className:"__icon event-type__2"},l.Icons.EVENT),r.default.createElement("span",{className:"fpo-scenario-events__eventKey"},"Screening and randomization pause by ",r.default.createElement("b",null,"num. of patients randomized"))),r.default.createElement("li",null,r.default.createElement("span",{className:"__icon event-type__3"},l.Icons.EVENT),r.default.createElement("span",{className:"fpo-scenario-events__eventKey"},"Screening rate changed by ",r.default.createElement("b",null,"date"))),r.default.createElement("li",null,r.default.createElement("span",{className:"__icon event-type__4"},l.Icons.EVENT),r.default.createElement("span",{className:"fpo-scenario-events__eventKey"},"Screening failure rate changed by ",r.default.createElement("b",null,"date")))),r.default.createElement("div",{className:"event-keyline"}))};t.default=r.default.memo(i)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),l=a(6),i=function(){return r.default.createElement("div",null,r.default.createElement("ul",{className:"fpo-scenario-events__eventsList"},r.default.createElement("li",null,r.default.createElement("span",{className:"__icon"},l.Icons.STAR_IN_PROGRESS),r.default.createElement("span",{className:"fpo-scenario-events__eventKey"},"Active")),r.default.createElement("li",null,r.default.createElement("span",{className:"__icon"},l.Icons.STAR_PENDING),r.default.createElement("span",{className:"fpo-scenario-events__eventKey"},"Pending")),r.default.createElement("li",null,r.default.createElement("span",{className:"__icon"},l.Icons.STAR_COMPLETED),r.default.createElement("span",{className:"fpo-scenario-events__eventKey"},"Completed"))),r.default.createElement("div",{className:"event-keyline"}))};t.default=r.default.memo(i)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(85),p=n(f),m=a(2),h=n(m),v=a(6),_=a(49),E=a(902),g=a(905),y=n(g),S=a(904),b=n(S);a(2314);var C=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.containerWidth=0,a.containerLeft="calc(100% + 24px)",a.wrapperHeight=0,a.handleResize=a.handleResize.bind(a),a}return i(t,e),o(t,[{key:"componentDidMount",value:function(){var e=!!(0,_.isSupportPassive)()&&{passive:!0};window.addEventListener("resize",this.handleResize,e),this.handleResize()}},{key:"shouldComponentUpdate",value:function(e){return e.expanded||e.expanded!==this.props.expanded}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){var e=this.eventsContainer,t=e?e.getBoundingClientRect():{};this.containerWidth=t.width,this.containerLeft=t.left;var a=this.eventsWrapper,n=a?a.getBoundingClientRect():{};this.wrapperHeight=n.height,e&&a&&this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props,a=t.expanded,n=t.currentLocation,r=t.currentRegion,l=t.currentEvents,i=t.eventTrackingStatus,o={SCREENING_RANDOMIZATION_PAUSE_BY_DATE:1,SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS:2,SCREENING_RATE_BY_DATE:3,SCREENING_FAILURE_BY_DATE:4},s={INCREASE_BY:"Increase by",DECREASE_BY:"Decrease by"},d=l.map(function(e,t){var a=(0,h.default)({disabledEvent:e.isEventDisabled});return e.patients?u.default.createElement("div",{key:e.id,className:a},u.default.createElement(E.EventWidgetByPatients,{isEventDisabled:e.isEventDisabled,name:e.name,startAfter:e.start_after,duration:e.duration,patients:e.patients,type:o[e.event_type],iconStatus:e.trackingStatus?e.trackingStatus[t]:e.status,iconTypeTracking:i}),u.default.createElement("hr",{className:"event-keylineSeparator"})):u.default.createElement("div",{key:e.id,className:a},u.default.createElement(E.EventWidgetByDate,{isEventDisabled:e.isEventDisabled,name:e.name,startDate:e.start_date,endDate:e.end_date,ratio:e.operation_value,type:o[e.event_type],iconStatus:e.status,operation:s[e.operation],iconTypeTracking:i}),u.default.createElement("hr",{className:"event-keylineSeparator"}))}),c=d.slice(0);return u.default.createElement("div",{ref:function(t){e.eventsContainer=t},className:"fpo-scenario-events__container"},u.default.createElement("div",{ref:function(t){e.eventsWrapper=t},className:"fpo-scenario-events__wrapper",onWheel:function(e){e.stopPropagation(),e.preventDefault()},onScroll:function(e){e.stopPropagation(),e.preventDefault()},style:{top:0,width:this.containerWidth+48,left:a?this.containerLeft-24:this.containerLeft+this.containerWidth+24}},u.default.createElement("div",{className:"fpo-scenario-events__close-container"},u.default.createElement("div",{onClick:this.props.onClose,className:"fpo-scenario-events__close-button"},v.Icons.CROSS)),u.default.createElement("div",{className:"fpo-scenario-events__content"},u.default.createElement(p.default,{style:{maxHeight:this.wrapperHeight-280},horizontal:!1,stopScrollPropagation:!0},u.default.createElement("div",{className:"fpo-scenario-events__scrollable-wrapper"},u.default.createElement("div",{className:"fpo-scenario-events__title-wrapper"},u.default.createElement("div",{className:"font-black"},"Events"),u.default.createElement("div",{className:"fpo-scenario-events__counter"},u.default.createElement("div",{className:"fpo-scenario-events__counter-value"},l.length>0?u.default.createElement("span",{className:"fpo-scenario-events__counter-events"},(0,_.kFormatter)(l.length)):""),u.default.createElement("div",{className:"fpo-scenario-events__counter-icon"},v.Icons.EVENT)))),u.default.createElement("div",{className:"event-wrapper"},u.default.createElement("div",{className:"event-keyline"}),u.default.createElement("h2",null,"Unspecified country"===n?"Unspecified country ("+r+")":n),c,u.default.createElement("h3",{className:"fpo-scenario-events__eventsKey"},"Events key"),i?u.default.createElement(y.default,null):null,u.default.createElement(b.default,null))))))}}]),t}(u.default.Component);C.defaultProps={expanded:!1,currentLocation:"",currentRegion:"",currentEvents:[],eventTrackingStatus:!1},C.propTypes={expanded:c.default.bool,onClose:c.default.func.isRequired,currentLocation:c.default.string,currentRegion:c.default.string,currentEvents:c.default.array,eventTrackingStatus:c.default.bool},t.default=C},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(66),m=n(p),h=a(2),v=n(h),_=a(13),E=n(_),g=a(101),y=n(g),S=a(6),b=a(179),C=a(37),O=a(147),T=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showMenu:!1,isExportToPngDisabled:null,isLoading:!1},a.toggleMenu=a.toggleMenu.bind(a),a.exportToExcel=a.exportToExcel.bind(a),a.saveAsImage=a.saveAsImage.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a}return i(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e,t){return t.showMenu||t.showMenu!==this.state.showMenu||t.isLoading||t.isLoading!==this.state.isLoading}},{key:"toggleMenu",value:function(e){var t=(0,C.getParamItemStorage)("fpo-ui-settings","chartState","collapsed");"boolean"!=typeof t&&(t=!document.querySelector(".svg-wrapper:not([id*=minimized])")),this.setState({showMenu:void 0!==e?e:!this.state.showMenu,isExportToPngDisabled:t})}},{key:"handleClickOutside",value:function(e){this.state.showMenu&&e&&!e.target.getAttribute("data-ignore-click-outside")&&this.toggleMenu(!1)}},{key:"exportToExcel",value:function(){this.props.exportToExcel(),this.toggleMenu()}},{key:"saveAsImage",value:function(){var e=this,t=this.props,a=t.study,n=t.scenario,r=t.filter;this.setState({isLoading:!0,showMenu:!1},function(){setTimeout(function(){(0,O.saveAsImage)(a,n,r,e.setState.bind(e,{isLoading:!1}))},2e3)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.isDisabled,n=t.notCollapsibleChart,r=this.state.showMenu?{visible:!1}:{};return d.default.createElement(u.Fragment,null,this.state.isLoading&&d.default.createElement(y.default,null),d.default.createElement(E.default,o({mouseEnterDelay:.3,align:{offset:[-20,0]},overlayClassName:"fpo-sidebar-button__tooltip",placement:"right"},r,{trigger:["hover"],overlay:d.default.createElement("span",null,"Export to Excel or save chart as image")}),d.default.createElement(E.default,{destroyTooltipOnHide:!0,align:{offset:[5,0]},placement:"bottomLeft",visible:this.state.showMenu,trigger:["click"],overlay:d.default.createElement(b.ContextMenu,null,d.default.createElement(b.ContextMenuItem,{label:"Export to Excel","data-ignore-click-outside":!0,onClick:this.exportToExcel}),d.default.createElement(b.ContextMenuItem,{label:"Save chart as image","data-ignore-click-outside":!0,disabled:!n&&this.state.isExportToPngDisabled,onClick:this.saveAsImage}))},d.default.createElement("div",{className:(0,v.default)("fpo-sidebar__button",{"fpo-sidebar__button_disabled":a}),style:{height:"48px"}},d.default.createElement("div",{className:"fpo-sidebar__content",onClick:function(){return!a&&e.toggleMenu()}},S.Icons.DOWNLOAD)))))}}]),t}(d.default.Component);T.defaultProps={isDisabled:!1,filter:"",notCollapsibleChart:!1},T.propTypes={isDisabled:f.default.bool,exportToExcel:f.default.func.isRequired,study:f.default.object.isRequired,scenario:f.default.object.isRequired,filter:f.default.string,notCollapsibleChart:f.default.bool},t.default=(0,m.default)(T)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(85),p=n(f),m=a(2),h=n(m),v=a(321),_=n(v),E=a(199),g=n(E),y=a(23),S=n(y),b=a(6);a(2315);var C=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},O=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={filterValue:""},a.handleClearClick=a.handleClearClick.bind(a),a.handleChangeFilter=a.handleChangeFilter.bind(a),a.handleItemClick=(0,g.default)(a.handleItemClick.bind(a),100),a}return i(t,e),o(t,[{key:"handleClearClick",value:function(e){e.stopPropagation(),e.preventDefault(),this.setState({filterValue:""})}},{key:"handleChangeFilter",value:function(e){var t=this;this.setState({filterValue:C(e.target.value)},function(){t.scrollRef&&t.scrollRef.scrollTop()})}},{key:"handleItemClick",value:function(e){this["ref_"+e]&&this["ref_"+e].classList&&!this["ref_"+e].classList.contains("disabled")&&(this["ref_"+e].classList.add("disabled"),this.props.onSelect(e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.countries,n=t.height,r=t.disabledCountries,l=t.fixedHeight,i=t.placeholder,o=a.filter(function(t){return""===e.state.filterValue||-1!==C(t).indexOf(e.state.filterValue)}),s=o.map(function(t){var a=r.includes(t);return u.default.createElement("div",{key:t,ref:function(a){e["ref_"+t]=a},className:(0,h.default)("filterable-list__item",{disabled:a}),onClick:function(n){n.stopPropagation(),e.props.onSelect&&!a&&e.handleItemClick(t)}},u.default.createElement("span",null,(0,_.default)(t,e.state.filterValue,function(e,t){return u.default.createElement("span",{key:t,className:"matched"},e)})))}),d=l?{height:n}:{},c=l?{height:n}:{maxHeight:n-50};return u.default.createElement("div",{className:"filterable-list",style:d},u.default.createElement("div",{className:"filterable-list__filter"},u.default.createElement(S.default,{onChange:this.handleChangeFilter,value:this.state.filterValue,narrow:!0,withoutBorder:!0,placeholder:i}),u.default.createElement("div",{className:(0,h.default)("filterable-list__clear-button",{hidden:!this.state.filterValue||""===this.state.filterValue})},u.default.createElement("span",{onClick:this.handleClearClick},b.Icons.CROSS))),u.default.createElement(p.default,{ref:function(t){e.scrollRef=t},style:c,horizontal:!1},u.default.createElement("div",{className:"filterable-list__items"},s)))}}]),t}(u.default.Component);O.propTypes={countries:c.default.array,disabledCountries:c.default.array,onSelect:c.default.func.isRequired,height:c.default.number,fixedHeight:c.default.bool,placeholder:c.default.string},O.defaultProps={countries:[],disabledCountries:[],onSelect:void 0,height:200,fixedHeight:!1,placeholder:""},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s);a(2316);var d=function(e){var t=e.children,a=e.direction,n=e.wrap,r=e.justifyContent,i=e.alignItems,o=e.style,s=e.className,d=e.fullHeight,c=(0,u.default)("flex-box",{"flex-box_full-height":d,"flex-box_wrap-no":"nowrap"===n,"flex-box_wrap-yes":"wrap"===n,"flex-box_wrap-reverse":"wrap-reverse"===n,"flex-box_justify-flex-start":"flex-start"===r,"flex-box_justify-flex-end":"flex-end"===r,"flex-box_justify-center":"center"===r,"flex-box_justify-space-between":"space-between"===r,"flex-box_justify-space-around":"space-around"===r,"flex-box_align-flex-start":"flex-start"===i,"flex-box_align-flex-end":"flex-end"===i,"flex-box_align-center":"center"===i,"flex-box_align-baseline":"baseline"===i,"flex-box_align-stretch":"stretch"===i,"flex-box_direction-column":"column"===a,"flex-box_direction-column-reverse":"column-reverse"===a,"flex-box_direction-row":"row"===a,"flex-box_direction-row-reverse":"row-reverse"===a},s);return l.default.createElement("div",{className:c,style:o},t)};d.propTypes={alignItems:o.default.oneOf(["flex-start","flex-end","center","baseline","stretch"]),children:o.default.node.isRequired,className:o.default.string,direction:o.default.oneOf(["column","column-reverse","row","row-reverse"]),justifyContent:o.default.oneOf(["flex-start","flex-end","center","space-between","space-around"]),style:o.default.object,wrap:o.default.oneOf(["nowrap","wrap","wrap-reverse"]),fullHeight:o.default.bool},d.defaultProps={className:void 0,direction:"row",wrap:"nowrap",justifyContent:void 0,alignItems:void 0,style:void 0,fullHeight:!1},t.default=l.default.memo(d)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(909),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),i=n(l),o=a(1),s=n(o),u=a(2),d=n(u);a(2317);var c=function(e){var t=e.flex,a=e.style,n=e.basis,l=e.className,o=e.grow,s=e.shrink,u=e.children,c=(0,d.default)("flex-item",t?void 0:{"flex-item_grow":o,"flex-item_shrink":s,"flex-item_basis":n},l),f=r({},a,{flex:t});return i.default.createElement("div",{className:c,style:f},u)};c.propTypes={children:s.default.oneOfType([s.default.node,s.default.string]),grow:s.default.bool,basis:s.default.string,shrink:s.default.bool,flex:s.default.string,style:s.default.object,className:s.default.string},c.defaultProps={grow:!1,shrink:!0,basis:"auto",flex:void 0,style:void 0,className:void 0,children:null},t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(911),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=a(0),s=n(o),u=a(1),d=n(u),c=a(2),f=n(c),p=a(259),m=n(p);a(2318);var h=function(e){var t=e.children,a=e.className,n=l(e,["children","className"]),o=(0,f.default)(r({},a,a));return s.default.createElement(m.default,i({},n,{className:"flex-table__cell-group "+o}),t)};h.propTypes={children:d.default.node.isRequired,className:d.default.string,columnName:d.default.string},h.defaultProps={className:void 0,columnName:void 0},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),i=n(l),o=a(1),s=n(o),u=a(2),d=n(u),c=a(700),f=n(c);a(2320);var p=function(e){var t=function(e,t,a){return i.default.cloneElement((0,f.default)(e)?e({rowIndex:t,columnName:a}):e,{rowIndex:t,columnName:a})},a=(0,d.default)({"flex-table__column_align-left":"left"===e.align},{"flex-table__column_align-center":"center"===e.align},{"flex-table__column_align-right":"right"===e.align}),n=(0,d.default)("flex-table__column",a,{"flex-table__column_no-overflow":!e.overflow}),l=r({flex:e.fixedWidth?"0 0 "+e.width+"px":"1 1 "+e.width+"px"},e.customStyles);return i.default.createElement("div",{className:n,style:l,onClick:function(t){e.columnClickHandler&&e.columnClickHandler(t,e.rowIndex)}},-1===e.rowIndex?t(e.header,e.rowIndex,e.columnName):t(e.data,e.rowIndex,e.columnName))};p.propTypes={align:s.default.oneOf(["left","center","right"]),columnClickHandler:s.default.func,columnName:s.default.string,data:s.default.oneOfType([s.default.node,s.default.func]),fixedWidth:s.default.bool,header:s.default.oneOfType([s.default.node,s.default.func]),overflow:s.default.bool,rowIndex:s.default.number,width:s.default.number.isRequired,customStyles:s.default.object},p.defaultProps={align:"left",columnClickHandler:void 0,columnName:void 0,data:void 0,fixedWidth:!1,header:void 0,overflow:!1,rowIndex:void 0,customStyles:void 0},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(67),u=n(s),d=a(2),c=n(d),f=a(79),p=n(f);a(2321);var m=a(507),h=n(m),v=a(87),_=function(e){var t=e.rowsCount,a=e.children,n=e.headerHeight,r=e.rowHeight,i=e.width,o=e.onRowDoubleClick,s=e.onRowClick,d=e.borders,f=e.data,m=e.hightLightOnHoverRowsInd,v=e.onClickOutsideActiveRow,_=e.collapsedList,E=e.errorRowsIds,g=e.lpftViewType,y=e.historicalFilter,S=e.isMultiEditing,b=e.isOptimizing,C=e.isEditable,O=e.activeRowInd,T=e.stickyHeader,R=e.stickyPosition,w=e.clipboardEmpty,A=a instanceof Array?a:[a],I=function(e){return l.default.createElement(h.default,{key:e,rowData:f[e],isEditable:C,rowHeight:r,onRowClick:s,handleOutsideClick:v,onRowDoubleClick:o,highlightOnHover:m.includes(e),errorRow:E.includes(e),highlighted:O===e,lpftViewType:g,historicalFilter:y,isMultiEditing:S,isOptimizing:b,collapsedList:_,cursorAsPointer:0!==e,clipboardEmpty:w,rowIndex:e},A.filter(function(e){return!e.props.hidden}).map(function(t,a){return l.default.cloneElement(t,{key:a,rowIndex:e})}))},N=i?i+"px":"100%";return l.default.createElement("div",{style:{width:N,height:t*r+n+"px"},className:(0,c.default)("flex-table","flex-table__table",{"flex-table__borders":!0===d},{"flex-table__inner-borders":d&&"inner"===d})},function(){var e=l.default.createElement("div",{className:"flex-table__header",style:{height:n+"px"}},A.filter(function(e){return!e.props.hidden}).map(function(e){return l.default.cloneElement(e,{key:u.default.generate(),rowIndex:-1})}));return T?l.default.createElement(p.default,{style:{top:R+"px",zIndex:2}},e):e}(),function(){for(var e=[],a=0;a<t;a+=1)e.push(I(a));return e}())};_.propTypes={borders:o.default.oneOfType([o.default.bool,o.default.string]),children:o.default.node.isRequired,hightLightOnHoverRowsInd:o.default.array,activeRowInd:o.default.number,headerHeight:o.default.number,onRowClick:o.default.func,onRowDoubleClick:o.default.func,onClickOutsideActiveRow:o.default.func,rowHeight:o.default.number,rowsCount:o.default.number.isRequired,width:o.default.number,errorRowsIds:o.default.array,isEditable:o.default.bool,stickyHeader:o.default.bool,stickyPosition:o.default.number,data:o.default.array,lpftViewType:o.default.oneOf(["expected","exceeded"]),isMultiEditing:o.default.bool,collapsedList:o.default.array,isOptimizing:o.default.bool,historicalFilter:o.default.oneOf(Object.keys(v.FILTER_BY)),clipboardEmpty:o.default.bool},_.defaultProps={borders:!1,headerHeight:50,rowHeight:50,onRowClick:void 0,onRowDoubleClick:void 0,width:void 0,hightLightOnHoverRowsInd:[],errorRowsIds:[],activeRowInd:null,isEditable:!1,onClickOutsideActiveRow:function(){},stickyHeader:!1,stickyPosition:0,data:[],lpftViewType:"expected",isMultiEditing:!1,collapsedList:[],isOptimizing:!1,historicalFilter:v.FILTER_BY.STUDIES,clipboardEmpty:!0},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.textSortTable=t.SortTypes=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),m=n(p),h=a(2),v=n(h),_=a(259),E=n(_);a(2322);var g={ASC:"ASC",DESC:"DESC"},y=function(e,t){return function(a,n){var r=a[e],l=n[e],i=0;return r>l&&(i=1),r<l&&(i=-1),0!==i&&t===g.DESC&&(i*=-1),i}},S=function(e){function t(e){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onSortChange=a.onSortChange.bind(a),a}return s(t,e),d(t,[{key:"onSortChange",value:function(e){e.preventDefault();var t=g.DESC,a=g.ASC;this.props.onSortChange&&this.props.onSortChange(this.props.sortKey,this.props.sortDir?function(e){return e===a?t:a}(this.props.sortDir):a)}},{key:"render",value:function(){var e=this.props,t=e.sortDir,a=e.children,n=e.className,i=l(e,["sortDir","children","className"]),o=(0,v.default)(r({},n,n));return f.default.createElement(E.default,u({},i,{className:"flex-table__sort-header-cell "+o}),f.default.createElement("span",{onClick:this.onSortChange},a," ",function(){var e=(0,v.default)({"flex-table__sort-header-cell_sort-desc":t===g.ASC},{"flex-table__sort-header-cell_sort-asc":t===g.DESC});return f.default.createElement("div",{className:"flex-table__sort-header-cell_sort-dir "+e},t?"":"")}()))}}]),t}(c.Component);S.propTypes={children:m.default.node.isRequired,className:m.default.string,columnName:m.default.string,onSortChange:m.default.func,sortDir:m.default.oneOf([g.ASC,g.DESC]),sortKey:m.default.string.isRequired},S.defaultProps={className:void 0,columnName:void 0,onSortChange:void 0,sortDir:void 0},t.default=S,t.SortTypes=g,t.textSortTable=y},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0}),t.GridLayoutCol=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=a(0),s=n(o),u=a(1),d=n(u),c=a(2),f=n(c),p=function(e){var t=e.children,a=e.className,n=e.width,o=e.offset,u=l(e,["children","className","width","offset"]),d=(0,f.default)("fpo-col-"+n,a,r({},"fpo-col-offset-"+o,o));return s.default.createElement("div",i({className:d},u),t)};p.defaultProps={className:"",offset:void 0,width:12},p.propTypes={children:d.default.node.isRequired,className:d.default.string,offset:d.default.oneOf([0,1,2,3,4,5,6,7,8,9,10,11]),width:d.default.oneOf([1,2,3,4,5,6,7,8,9,10,11,12])},t.GridLayoutCol=p,t.default=s.default.memo(p)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),o=n(i),s=a(1),u=n(s),d=a(2),c=n(d),f=function(e){var t=e.children,a=e.className,n=e.align,i=r(e,["children","className","align"]),s=(0,c.default)("fpo-gutter",a,{"fpo-gutter_align-left":"left"===n},{"fpo-gutter_align-right":"right"===n});return o.default.createElement("div",l({className:s},i),t)};f.defaultProps={className:"",align:"left"},f.propTypes={children:u.default.node.isRequired,className:u.default.string,align:u.default.oneOf(["left","right"])},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),o=n(i),s=a(2),u=n(s),d=a(1),c=n(d),f=function(e){var t=e.children,a=e.className,n=r(e,["children","className"]),i=(0,u.default)("fpo-row",a);return o.default.createElement("div",l({className:i},n),t)};f.propTypes={children:c.default.node,className:c.default.string},f.defaultProps={children:null,className:""},t.default=o.default.memo(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),o=n(i),s=a(1),u=n(s),d=a(2),c=n(d),f=function(e){var t=e.children,a=e.noGaps,n=r(e,["children","noGaps"]),i=(0,c.default)("fpo-grid",{"no-gaps":a});return o.default.createElement("div",l({className:i},n),t)};f.defaultProps={noGaps:void 0},f.propTypes={children:u.default.node.isRequired,noGaps:u.default.bool},t.default=o.default.memo(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(13),u=n(s),d=function(e){var t=e.tooltipData,a=e.value,n=e.valueClasses,r=e.type;return e.showTooltip?l.default.createElement(u.default,{mouseEnterDelay:.7,align:{offset:[0,0]},overlay:l.default.createElement("div",{className:"description-wrapper"},t||"No description")},l.default.createElement("div",{className:n},(null===a?"-":a)+(a&&a>0&&"percentage"===r?"%":""))):l.default.createElement("div",{className:n},(null===a?"-":a)+(a&&a>0&&"percentage"===r?"%":""))};d.defaultProps={tooltipData:"No description",value:null,valueClasses:null,type:null,showTooltip:!1,tooltipField:""},d.propTypes={tooltipData:o.default.string,value:o.default.oneOfType([o.default.string,o.default.object,o.default.number]),valueClasses:o.default.string,type:o.default.oneOf(["percentage"]),showTooltip:o.default.bool},t.default=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(10),c=n(d),f=a(12),p=a(921),m=n(p);a(2325);var h=function(e){var t=e.rowIndex,a=e.rows,n=e.dataField,r=e.alignTo,i=e.type,o=e.showTooltip,s=e.tooltipField,d=e.isTitle,p=a[t];if(!p)return null;var h=p[n];h&&"fpfv"===n&&"-"!==h?h=(0,c.default)(h).format("DD MMM YY"):null!==h&&"screen_failure_rate"===n&&isFinite(h)&&(h=(100*+h).toFixed(0));var v=(0,u.default)({"align-right":"right"===r,"show-as-title":d});return l.default.createElement(f.Cell,{className:"data-cell"},l.default.createElement(m.default,{tooltipData:p[s],value:h,valueClasses:v,type:i,showTooltip:o,tooltipField:s}),l.default.createElement("div",{className:"cell-underline"}))};h.defaultProps={rowIndex:0,dataField:"",type:void 0,alignTo:"left",showTooltip:!1,tooltipField:"",isTitle:!1},h.propTypes={rows:o.default.array.isRequired,rowIndex:o.default.number,dataField:o.default.string,alignTo:o.default.oneOf(["right","left"]),type:o.default.oneOf(["percentage"]),showTooltip:o.default.bool,tooltipField:o.default.string,isTitle:o.default.bool},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(52),c=function(e){var t=e.title,a=e.alignTo,n=(0,u.default)({"align-right":"right"===a,"align-left":"left"===a});return l.default.createElement(d.Cell,{className:"header-cell"},l.default.createElement("div",{className:n},t),l.default.createElement("div",{className:"header-cell-underline"}))};c.defaultProps={title:"",alignTo:"left"},c.propTypes={title:o.default.string,alignTo:o.default.oneOf(["left","right"])},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(100),u=n(s),d=function(e){var t=e.name,a=e.size;return l.default.createElement("div",{className:"fpo-icon",style:{width:a+"px",height:a+"px"}},u.default[t])};d.defaultProps={size:24},d.propTypes={name:o.default.string.isRequired,size:o.default.number},t.default=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(6),c=a(13),f=n(c),p=function(e){var t=e.canBeIgnored,a=void 0;return a=t?l.default.createElement("span",null,"The country has no enrolled patients ",l.default.createElement("br",null),"and presumably no longer participating in trial. ",l.default.createElement("br",null),"Scenario owner excluded it from Adjusted plan calculation."):l.default.createElement("span",null,"This country is disabled and does not",l.default.createElement("br",null),"participate in the current plan.",l.default.createElement("br",null),"However it already has actual",l.default.createElement("br",null),"patients screened/randomized.",l.default.createElement("br",null),"Please consider enabling it."),l.default.createElement(f.default,{mouseEnterDelay:.3,overlayClassName:"scenario-table__ignored-tooltip",align:{offset:[0,0]},overlay:a},l.default.createElement("div",{className:(0,u.default)("row-control-icon--event",{warning:!t})},t?d.Icons.INFO:d.Icons.INFO_O))};p.defaultProps={canBeIgnored:!0},p.propTypes={canBeIgnored:o.default.bool},t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(925),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(85),m=n(p),h=a(66),v=n(h),_=a(321),E=n(_),g=a(2),y=n(g),S=a(123),b=n(S),C=a(23),O=n(C),T=a(6),R=a(13),w=n(R);a(2326);var A=a(49),I=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isOpened:!1,filter:""},a.setOpened=a.setOpened.bind(a),a.onFilterChange=a.onFilterChange.bind(a),a.onStudySelect=a.onStudySelect.bind(a),a.debounced=(0,b.default)(a.props.getStudies,500),a}return i(t,e),s(t,[{key:"onFilterChange",value:function(e){var t=e.target.value;this.setState({filter:t}),t.length>=2&&this.debounced(t)}},{key:"onStudySelect",value:function(e){e.imported||(this.props.onImport(e.id),this.setOpened(!1))}},{key:"setOpened",value:function(e){this.setState({isOpened:e,filter:""})}},{key:"handleClickOutside",value:function(){this.state.isOpened&&this.setOpened(!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.filter,n=t.isOpened,r=this.props,l=r.className,i=r.studies,s=n?{visible:!1}:null;return d.default.createElement("div",{className:(0,y.default)("import-study",l,{"import-study--opened":n})},d.default.createElement(w.default,o({mouseEnterDelay:.3,mouseLeaveDelay:.3,align:{offset:[0,5]},overlay:d.default.createElement("span",null,"Import a study")},s),d.default.createElement("div",{className:"import-study__open-trigger",onClick:function(){return e.setOpened(!0)}},T.Icons.SEARCH_PLUS)),n&&d.default.createElement("div",{className:"import-study__input"},d.default.createElement(O.default,{className:"import-study__text-input",placeholder:"Import study from Impact",value:a,onChange:this.onFilterChange,withoutBorder:!0,autoFocus:!0}),d.default.createElement("div",{className:"import-study__close-trigger",onClick:function(){return e.setOpened(!1)}},T.Icons.CROSS)),a.length>=2&&!!i.length&&d.default.createElement("div",{className:"import-study__studies"},d.default.createElement(m.default,{style:{maxHeight:400},horizontal:!1},i.map(function(t){return d.default.createElement("div",{key:t.study_id,title:t.ta,className:(0,y.default)("import-study__study",{"import-study__study--imported":t.imported}),onClick:function(){return e.onStudySelect(t)}},(0,A.skypeToCallPrevent)((0,E.default)(t.study_id,a.toUpperCase(),function(e,t){return d.default.createElement("span",{key:t},(0,A.skypeToCallPrevent)(e))})))}))),!!a.length&&a.length<2&&d.default.createElement("div",{className:"import-study__message"},"Enter ",2," characters to search..."),a.length>=2&&!i.length&&d.default.createElement("div",{className:"import-study__message"},"No results found for ",a))}}]),t}(u.PureComponent);I.defaultProps={className:null},I.propTypes={className:f.default.string,studies:f.default.array.isRequired,getStudies:f.default.func.isRequired,onImport:f.default.func.isRequired},t.default=(0,v.default)(I)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(927),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(39),p=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onSubmit=a.onSubmit.bind(a),a}return i(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"onSubmit",value:function(){this.props.onSubmit()}},{key:"render",value:function(){var e=this.props,t=e.isShown,a=e.onClose;return u.default.createElement(f.PopupDialog,{title:"Warning",isShown:t,handleClose:a,buttons:[u.default.createElement(f.ActionButton,{primary:!0,action:a},"Close")]},u.default.createElement("div",null,"Please correct or remove the invalid data."))}}]),t}(s.Component);p.propTypes={isShown:c.default.bool.isRequired,onClose:c.default.func.isRequired,onSubmit:c.default.func.isRequired},t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(931),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i);a(2327);var s=function(e){var t=e.children,a=e.message,n=e.messageSide,r=e.type,i="information-bar information-bar--"+r,o="information-bar__message information-bar__message--"+n;return l.default.createElement("section",{className:i},l.default.createElement("span",{className:o},a),t)};s.propTypes={children:o.default.any,message:o.default.string.isRequired,messageSide:o.default.oneOf(["left","right"]),type:o.default.oneOf(["alert","warning"]).isRequired},s.defaultProps={children:void 0,messageSide:"left",type:"warning"},t.default=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(933),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(39),p=a(46),m=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"render",value:function(){var e=this.props,t=e.isShown,a=e.onClose;return u.default.createElement(f.PopupDialog,{isShown:t,title:"Warning",handleClose:a,buttons:[u.default.createElement(f.ActionButton,{primary:!0,action:a},p.CLOSE)]},u.default.createElement("div",{className:"h2"},p.CORRECT_INVALID_DATA))}}]),t}(s.Component);m.propTypes={isShown:c.default.bool.isRequired,onClose:c.default.func.isRequired},t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(935),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(85),c=n(d),f=a(51),p=n(f),m=a(13),h=n(m);a(2328);var v=a(269),_=function(e){var t=e.listItems,a=e.nameFieldName,n=e.idFieldName,r=e.width,i=e.height,o=e.onChange,s=e.selectedItems,d=e.activeTab,f=e.disabledCountries,m=e.recommendedByAnalyticsCountries,_={width:r,height:i},E=s.length,g=t.find(function(e){return"unspecified country"===e[a].toLowerCase()}),y=g?g[n]:-1;s.includes(y)&&(E-=1);var S=0,b=[];t.forEach(function(e){e.filtered||(S+=1,b.push(e))});var C=t.map(function(e){var t=e,r=void 0!==f.find(function(e){return e.country_name===t.name}),i=void 0!==m.find(function(e){return e.name===t.name});return r?t.disabled=!0:"unspecified country"===t[a].toLowerCase()?"EXCLUDE"===d.toUpperCase()?t.disabled=!0:S-s.length!=1||t.isSelected?t.disabled=!1:t.disabled=1!==S:t.disabled=S-s.length==1&&s.includes(y)&&!t.isSelected,l.default.createElement("div",{key:"list-box-item_"+t[a],className:(0,u.default)("list-box-item",{"recommended-by-analytics":i})},i?l.default.createElement(h.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"left",overlay:l.default.createElement("span",null,v.TOOLTIPS_TEXT.RECOMMENDED_BY_ANALYTICS)},l.default.createElement("span",null,l.default.createElement(p.default,{disabled:t.filtered||t.disabled,label:t[a],checked:-1!==s.indexOf(t[n]),onChange:function(e){return o(t[n],e)}}))):l.default.createElement(p.default,{disabled:t.filtered||t.disabled,label:t[a],checked:-1!==s.indexOf(t[n]),onChange:function(e){return o(t[n],e)}}))});return l.default.createElement("div",{className:"fpo-list-box-container",style:{height:"240px"}},C.length>1?l.default.createElement("div",{className:"list-box-control"},l.default.createElement(p.default,{disabled:function(){return f.length>0||!!s.includes(y)||"EXCLUDE"===d.toUpperCase()&&!b.find(function(e){return"unspecified country"!==e[a].toLowerCase()})||"INCLUDE"===d.toUpperCase()&&0===b.filter(function(e){return"unspecified country"!==e[a].toLowerCase()}).length}(),label:"Select all",checked:function(){return"EXCLUDE"===d.toUpperCase()&&0!==E&&E===b.filter(function(e){return"unspecified country"!==e[a].toLowerCase()}).length||"INCLUDE"===d.toUpperCase()&&0!==E&&E===S-1}(),onChange:function(e){return o("all",e)}})):null,l.default.createElement(c.default,{style:_,autoHide:!1},C))};_.defaultProps={height:168,listItems:[],idFieldName:"id",nameFieldName:"name",width:240,disabledCountries:[],recommendedByAnalyticsCountries:[]},_.propTypes={activeTab:o.default.string.isRequired,height:o.default.number,idFieldName:o.default.string,nameFieldName:o.default.string,onChange:o.default.func.isRequired,selectedItems:o.default.array.isRequired,listItems:o.default.array,width:o.default.number,disabledCountries:o.default.array,recommendedByAnalyticsCountries:o.default.array},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2),m=n(p),h=a(458),v=n(h),_=a(937),E=a(6),g=a(14),y=n(g),S=a(511);a(2330);var b=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={regions:(0,_.getReginos)(e),countries:(0,_.getCountries)(e),scrollPosition:0,hasLeftOffset:!1,hasRightOffset:!1},a.onSelect=a.onSelect.bind(a),a.onScrollStart=a.onScrollStart.bind(a),a.onScrollLeft=a.onScrollLeft.bind(a),a.onScrollRight=a.onScrollRight.bind(a),a}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.hasLeftOffset(),t=this.hasRightOffset();this.state.hasLeftOffset===e&&this.state.hasRightOffset===t||this.setState({hasLeftOffset:e,hasRightOffset:t})}},{key:"componentWillReceiveProps",value:function(e){e.activeFilter===this.props.activeFilter&&e.data===this.props.data||this.setState({regions:(0,_.getReginos)(e),countries:(0,_.getCountries)(e),scrollPosition:e.activeFilter.type===g.REGION?0:this.state.scrollPosition})}},{key:"componentDidUpdate",value:function(e){var t=this.hasLeftOffset(),a=this.hasRightOffset();this.state.hasLeftOffset===t&&this.state.hasRightOffset===a||this.setState({hasLeftOffset:t,hasRightOffset:a}),this.props.activeFilter!==e.activeFilter&&this.alignScroll()}},{key:"onSelect",value:function(e,t){var a=this.props,n=a.data,r=a.activeFilter,l=a.onFilterSelect;if((e!==r.name||t!==r.type)&&l)if(t===g.REGION)l({name:e===S.GLOBAL_REGION?y.default:e,type:e===S.GLOBAL_REGION?g.ROLLUP:g.REGION,subject:null});else if(t===g.COUNTRY)if(e===S.ALL_COUNTRIES){if(r.type===g.COUNTRY){var i=n.find(function(e){return e.type.toUpperCase()===g.COUNTRY&&e.location===r.name&&e.region===r.subject});l({name:i.region,type:g.REGION,subject:null})}}else{var o=r.type===g.REGION?r.name:r.subject;l({name:e,type:g.COUNTRY,subject:o})}}},{key:"onScrollStart",value:function(){this.setState({scrollPosition:0})}},{key:"onScrollLeft",value:function(){var e=this.state.scrollPosition+this.getScrollStep();this.setState({scrollPosition:e>0?0:e})}},{key:"onScrollRight",value:function(){var e=this.state.scrollPosition-this.getScrollStep(),t=this.scrollableEl.clientWidth-this.scrollableInnerEl.clientWidth;this.setState({scrollPosition:e<t?t-138:e})}},{key:"getScrollStep",value:function(){return.85*this.scrollableEl.clientWidth}},{key:"hasLeftOffset",value:function(){return!!this.scrollableEl&&0!==this.state.scrollPosition}},{key:"hasRightOffset",value:function(){if(!this.scrollableEl)return!1;var e=this.scrollableEl.clientWidth,t=this.scrollableInnerEl.clientWidth,a=e-t;return t>e&&this.state.scrollPosition>a}},{key:"alignScroll",value:function(){var e=this.props.activeFilter;if(this.scrollableEl&&e.type===g.COUNTRY&&!(this.scrollableInnerEl.clientWidth<=this.scrollableEl.clientWidth)){var t=this.scrollableInnerEl.getBoundingClientRect(),a=this.scrollableInnerEl.querySelector(".location-filter__countries__item--active").getBoundingClientRect(),n=-1*parseInt(a.left-t.left,10);if(this.state.scrollPosition<n)this.setState({scrollPosition:n});else{var r=a.left+a.width+this.state.scrollPosition,l=r-t.left;if(l>this.scrollableEl.clientWidth){var i=this.scrollableEl.clientWidth-l;this.setState({scrollPosition:this.state.scrollPosition+i+-80})}}}}},{key:"isActive",value:function(e,t){var a=this.props,n=a.data,r=a.activeFilter;return t===g.REGION?e===S.GLOBAL_REGION?y.default===r.name:r.type===g.COUNTRY?e===n.find(function(e){return e.type.toUpperCase()===g.COUNTRY&&e.location===r.name&&e.region===r.subject}).region:e===r.name:t===g.COUNTRY&&(e===S.ALL_COUNTRIES?r.type!==g.COUNTRY:1===this.state.countries.length||e===r.name)}},{key:"renderRegions",value:function(){var e=this,t=this.state.regions;return this.props.hideAllCountries||(t=[S.GLOBAL_REGION].concat(r(t))),t.length?d.default.createElement("div",{className:"location-filter__regions"},t.map(function(t){return d.default.createElement("div",{key:t,className:(0,m.default)("location-filter__regions__item",{"location-filter__regions__item--active":e.isActive(t,g.REGION)}),onClick:function(){return e.onSelect(t,g.REGION)}},t)})):d.default.createElement("div",{style:{width:"400px",height:"60px"},className:""},d.default.createElement(v.default,{height:"60",width:"400"},d.default.createElement("rect",{x:"0",y:"10",width:"80",height:"40"}),d.default.createElement("rect",{x:"100",y:"10",width:"80",height:"40"}),d.default.createElement("rect",{x:"200",y:"10",width:"160",height:"40"})))}},{key:"renderCountries",value:function(){var e=this,t=this.state.countries;if(0===t.length)return null;t.length>1&&(this.props.hideAllCountries||(t=[S.ALL_COUNTRIES].concat(r(t))));var a=d.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12"},d.default.createElement("g",{fill:"none",fillRule:"evenodd"},d.default.createElement("path",{fill:"#FFF",d:"M2 0v12H0V0zM12 1.4L10.6 0l-6 6 6 6 1.4-1.4L7.4 6z"})));return d.default.createElement("div",{className:"location-filter__countries"},d.default.createElement("div",{className:(0,m.default)("location-filter__scrollable-nav",{"location-filter__hidden":!(this.state.hasLeftOffset||this.state.hasRightOffset)})},d.default.createElement("div",{className:(0,m.default)("location-filter__scrollable-nav-start",{"location-filter__hidden":!(this.state.hasLeftOffset&&!this.state.hasRightOffset)}),onClick:this.onScrollStart},a),d.default.createElement("div",{className:(0,m.default)("location-filter__scrollable-nav-left",{"location-filter__hidden":!this.state.hasLeftOffset}),onClick:this.onScrollLeft},E.Icons.CHEVRON_RIGTH),d.default.createElement("div",{className:(0,m.default)("location-filter__scrollable-nav-right",{"location-filter__hidden":!this.state.hasRightOffset}),onClick:this.onScrollRight},E.Icons.CHEVRON_RIGTH)),d.default.createElement("div",{className:"location-filter__countries__scrollable",ref:function(t){e.scrollableEl=t}},d.default.createElement("div",{className:"location-filter__countries__scrollable__inner",style:{transform:"translateX("+this.state.scrollPosition+"px)"},ref:function(t){e.scrollableInnerEl=t}},t.map(function(t){return d.default.createElement("div",{key:t,className:(0,m.default)("location-filter__countries__item",{"location-filter__countries__item--active":e.isActive(t,g.COUNTRY)}),onClick:function(){return e.onSelect(t,g.COUNTRY)}},t)}))))}},{key:"render",value:function(){return d.default.createElement("div",{className:"location-filter"},this.renderRegions(),this.renderCountries())}}]),t}(u.PureComponent);b.defaultProps={activeFilter:{name:y.default,type:g.ROLLUP},data:[],platformRegions:[],onFilterSelect:void 0,hideAllCountries:!1},b.propTypes={activeFilter:f.default.shape({name:f.default.string,type:f.default.string}),data:f.default.array,onFilterSelect:f.default.func,hideAllCountries:f.default.bool},t.default=b},function(e,t,a){"use strict";function n(e){return e.data.filter(function(e){return e.type.toUpperCase()===l.REGION}).map(function(e){return e.location}).sort()}function r(e){var t=e.data,a=e.activeFilter,n=e.platformRegions;if(a.name===i.GLOBAL_REGION)return[];var r=function(e,t){return e===i.UNSPECIFIED_COUNTRY?1:t===i.UNSPECIFIED_COUNTRY?-1:e>t?1:-1};if(a.type===l.REGION){var o=n.find(function(e){return e.name===a.name});return o&&1===o.countries.length?[]:t.filter(function(e){return e.type.toUpperCase()===l.COUNTRY&&e.region===a.name}).map(function(e){return e.location}).sort(r)}return a.type===l.COUNTRY?t.filter(function(e){return e.type.toUpperCase()===l.COUNTRY&&e.region===a.subject}).map(function(e){return e.location}).sort(r):[]}Object.defineProperty(t,"__esModule",{value:!0}),t.getReginos=n,t.getCountries=r;var l=a(14),i=a(511)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(939),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(25),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(f);a(290);var m=a(110),h=a(10),v=n(h),_=a(14),E=a(260);a(483);var g=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={data:e.data,type:e.type,first:e.first,scenarioId:e.scenarioId,location:e.location},a.renderChart=a.renderChart.bind(a),a}return i(t,e),o(t,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({data:e.data,type:e.type,first:e.first,scenarioId:e.scenarioId,location:e.location},function(){t.renderChart()})}},{key:"renderChart",value:function(){var e=this.state,t=e.data,a=e.type,n=e.first,r=e.scenarioId,l=e.location,i="#svg_mlstones_bar_"+r+"_"+l.replace(/^[^a-z]+|[^\w:.-]+/gi,"_")+"_"+t.regionId;p.select(i).select(".bar-svg-container").remove();var o=a===_.SCENARIO_DATA_TYPE.ROLLUP,s=t.activeRange,u=t.milestones,d=void 0,c=void 0,f=void 0,h=void 0,g=void 0;t.emptyRow||(d=u.find(function(e){return"FP"===e.label}).date,c=u.find(function(e){return"FPFV"===e.label}).date,f=u.find(function(e){return"FPFT"===e.label}).date,h=u.find(function(e){return"LPFV"===e.label}).date,g=u.find(function(e){return"P/LPFT"===e.label}).date);var y=u.find(function(e){return"T/LPFT"===e.label}).date,S=this.container,b=S?S.getBoundingClientRect().width:0,C=o?70:30,O={top:10,right:150,bottom:0,left:50},T=p.select(i),R=T.append("div").classed("bar-svg-container",!0).append("svg").attr("width",b).attr("height",C+O.top+O.bottom).attr("viewBox","0 0 "+(b+O.right+O.left)+" "+(C+O.top+O.bottom)),w=R.append("g").attr("transform","translate("+O.left+","+O.top+")"),A=(0,m.scaleTime)().rangeRound([0,b]);A.domain([t.minDate,t.maxDate]);var I=w.append("g").attr("transform","translate(0, "+(C-10)+")");if(I.append("line").attr("x1",0).attr("x2",b).attr("y1",0).attr("y2",0).classed("milestones-bar",!1),t.emptyRow)return void I.append("g").classed("tLpft-group",!0).attr("transform","translate("+A(y)+",0)").append("line").attr("x1",0).attr("x2",0).attr("y1",45).attr("y2",-148).attr("stroke",E.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2");if((0,E.drawBackgroundRect)(I,A(d),o?-8:-2,A(g)-A(d),o?16:4,E.COLORS.BLACK,.1),"LPFT"===t.activeRange)(0,E.drawBackgroundRect)(I,function(){return A(g<y?g:y)},o?-8:-2,function(){return g<y?A(y)-A(g):A(g)-A(y)},o?16:4,function(){return g<y?E.COLORS.GREEN:E.COLORS.RED},1,!0),a===_.SCENARIO_DATA_TYPE.REGION&&(0,E.appendRangeLabel)(I,function(){return g<=y?"end":"start"},(g>y?"+":"")+g.diff(y,"days")+"d",function(){return g<=y?"translate("+(A(y)-20)+", -14)":"translate("+(A(y)+20)+", -14)"},function(){return g<=y?E.COLORS.GREEN:E.COLORS.RED},!0);else if("SCREENING"===s){var N=A((0,v.default)((h.valueOf()+c.valueOf())/2));(0,E.drawBackgroundRect)(I,A(c),o?-8:-2,A(h)-A(c),o?16:4,E.COLORS.BLACK,1,!0),o?(0,E.appendGlobalRangeLabel)(I,"translate("+(N-60)+", -50)",h.diff(c,"weeks")+"w"):a===_.SCENARIO_DATA_TYPE.REGION&&(0,E.appendRangeLabel)(I,"middle",h.diff(c,"weeks")+"w","translate("+N+", -14)",E.COLORS.BLACK,!0)}else if("STARTUP"===s){var D=A((0,v.default)((c.valueOf()+d.valueOf())/2));(0,E.drawBackgroundRect)(I,A(d),o?-8:-2,function(){return A(c)-A(d)},o?16:4,E.COLORS.BLACK,1,!0),o?(0,E.appendGlobalRangeLabel)(I,"translate("+(D-60)+", -50)",c.diff(d,"weeks")+"w"):a===_.SCENARIO_DATA_TYPE.REGION&&(0,E.appendRangeLabel)(I,"middle",c.diff(d,"weeks")+"w","translate("+D+", -14)",E.COLORS.BLACK,!0)}else if("RANDOMISATION"===s){var P=A((0,v.default)((g.valueOf()+f.valueOf())/2));(0,E.drawBackgroundRect)(I,A(f),o?-8:-2,A(g)-A(f),o?16:4,E.COLORS.BLACK,1,!0),o?(0,E.appendGlobalRangeLabel)(I,"translate("+(P-60)+", -50)",g.diff(f,"weeks")+"w"):a===_.SCENARIO_DATA_TYPE.REGION&&(0,E.appendRangeLabel)(I,"middle",g.diff(f,"weeks")+"w","translate("+P+", -14)",E.COLORS.BLACK,!0)}switch(u.forEach(function(e){switch(e.label){case"FP":var t=I.append("g").classed("fpp-group",!0).attr("transform","translate("+A(e.date)+",0)");switch(s){case"STARTUP":(0,E.drawFppIcon)(t,!1),o&&(0,E.appendTooltipToMilestone)(t,e.color,E.COLORS.WHITE,E.COLORS.BLACK,e.label,n,!1);break;default:(0,E.drawFppIcon)(t,!0)}break;case"FPFV":var a=I.append("g").classed("fpfv-group",!0).attr("transform","translate("+A(e.date)+","+-12+")"),r=a.append("g").attr("transform","rotate(90 12 12), translate(0, 12)");switch(s){case"SCREENING":case"STARTUP":(0,E.drawDiamondIcon)(r,E.COLORS.PURPLE,o),o&&(0,E.appendTooltipToMilestone)(a,e.color,e.color,E.COLORS.WHITE,e.label,n,!0);break;default:(0,E.drawEmptyDiamond)(a)}break;case"FPFT":var l=I.append("g").classed("fpft-group",!0).attr("transform","translate("+A(e.date)+","+-12+")"),i=l.append("g").attr("transform","rotate(90 12 12), translate(0, 12)");switch(s){case"SCREENING":(0,E.drawIntersectedDiamond)(i);break;case"RANDOMISATION":(0,E.drawDiamondIcon)(i,e.color,o),o&&(0,E.appendTooltipToMilestone)(l,e.color,e.color,E.COLORS.WHITE,e.label,n,!0);break;default:(0,E.drawEmptyDiamond)(l)}break;case"LPFV":var u=I.append("g").classed("lpfv-group",!0).attr("transform","translate("+A(e.date)+","+-12+")"),d=u.append("g").attr("transform","rotate(90 12 12), translate(0, 12)");switch(s){case"RANDOMISATION":(0,E.drawIntersectedDiamond)(d);break;case"SCREENING":(0,E.drawDiamondIcon)(d,e.color,o),o&&(0,E.appendTooltipToMilestone)(u,e.color,e.color,E.COLORS.WHITE,e.label,n,!0);break;default:(0,E.drawEmptyDiamond)(u)}break;case"P/LPFT":var c=I.append("g").classed("pLpft-group",!0).attr("transform","translate("+A(e.date)+",0)");switch(s){case"RANDOMISATION":case"LPFT":(0,E.drawFilledCircle)(c,function(){return e.date.isAfter(y)?E.COLORS.RED:E.COLORS.GREEN},!1),o&&(0,E.appendTooltipToMilestone)(c,e.color,E.COLORS.WHITE,E.COLORS.BLACK,e.label,n,!1);break;default:(0,E.drawFilledCircle)(c,function(){return e.date.isAfter(y)?E.COLORS.RED:E.COLORS.GREEN},!0)}break;case"T/LPFT":default:var f=I.append("g").classed("tLpft-group",!0).attr("transform","translate("+A(e.date)+",0)");if(f.append("line").attr("x1",0).attr("x2",0).attr("y1",45).attr("y2",-148).attr("stroke",E.COLORS.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2"),o){if("LPFT"===s){var p=f.append("g").classed("global-row-tooltip",!0).style("display",null).attr("transform",function(){return g<=y?"translate(-60, -50)":"translate(10, -50)"});p.append("polygon").style("fill",function(){return g<=y?E.COLORS.GREEN:E.COLORS.RED}).attr("points",function(){return g<=y?E.tooltipPathLeft:E.tooltipPathRight}),p.append("text").attr("text-anchor","middle").style("fill",E.COLORS.WHITE).classed("tooltip-text",!0).attr("transform","translate("+(g<=y?20:30)+", 15)").text((g>y?"+":"")+g.diff(y,"days")+"d")}(0,E.drawFilledCircle)(f,E.COLORS.BLACK,!1)}}}),p.select(i).select(".active-range-rect").moveToFront(),s){case"LPFT":p.select(i).select(".pLpft-group").moveToFront();break;case"STARTUP":p.select(i).select(".fpp-group").moveToFront(),p.select(i).select(".fpfv-group").moveToFront();break;case"SCREENING":p.select(i).select(".fpft-group").moveToFront(),p.select(i).select(".fpfv-group").moveToFront(),p.select(i).select(".lpfv-group").moveToFront();break;default:case"RANDOMISATION":p.select(i).select(".lpfv-group").moveToFront(),p.select(i).select(".fpft-group").moveToFront(),p.select(i).select(".pLpft-group").moveToFront()}p.select(i).select(".tLpft-group").moveToFront(),p.select(i).selectAll(".global-row-tooltip").moveToFront()}},{key:"render",value:function(){var e=this,t=this.state,a=t.scenarioId,n=t.location,r=t.data;return u.default.createElement("div",{ref:function(t){e.container=t},className:"bar-svg-wrapper",id:"svg_mlstones_bar_"+a+"_"+n.replace(/^[^a-z]+|[^\w:.-]+/gi,"_")+"_"+r.regionId})}}]),t}(u.default.Component);g.defaultProps={first:!1},g.propTypes={data:c.default.object.isRequired,type:c.default.string.isRequired,first:c.default.bool,scenarioId:c.default.number.isRequired,location:c.default.string.isRequired},t.default=g},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MilestonesTimelinePlaceholder=t.MilestonesTimelineTooltip=void 0;var r=a(943),l=n(r),i=a(942),o=n(i),s=a(941),u=n(s);t.MilestonesTimelineTooltip=o.default,t.MilestonesTimelinePlaceholder=u.default,t.default=l.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(25),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(f);a(290);var m=a(110);a(484);var h=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={data:e.data},a.renderChart=a.renderChart.bind(a),a.handleScroll=a.handleScroll.bind(a),a}return i(t,e),o(t,[{key:"componentDidMount",value:function(){document.body.addEventListener("scroll",this.handleScroll),this.renderChart()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({data:e.data},function(){t.renderChart()})}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){this.renderChart()}},{key:"renderChart",value:function(){var e=this.state.data,t=e.tLpft,a="#svg_wrapper_milestones_timeline_placeholder",n={BLACK:"#000",WHITE:"#FFF"},r=p.select("#svg_wrapper_milestones_timeline_tooltip").select("svg").attr("width"),l=this.container.getBoundingClientRect().top,i=r?Number(r):this.container.getBoundingClientRect().width,o=window.innerHeight-l;o>window.innerHeight/2&&(o=window.innerHeight/2),o<180&&(o=180);var s={top:0,right:150,bottom:0,left:50};p.select(a).select(".svg-container").remove();var u=p.select(a),d=u.append("div").classed("svg-container",!0).append("svg").attr("width",i).attr("height",o+s.top+s.bottom).attr("viewBox","0 0 "+(i+s.right+s.left)+" "+(o+s.top+s.bottom)),c=d.append("g").attr("transform","translate("+s.left+",0)"),f=(0,m.scaleTime)().rangeRound([0,i]);f.domain(e.minMaxDates),c.append("g").attr("transform","translate("+f(t)+", -100)").append("line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",o+220).attr("stroke",n.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2")}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{ref:function(t){e.container=t},className:"timeline-svg-wrapper",id:"svg_wrapper_milestones_timeline_placeholder"})}}]),t}(u.default.Component);h.propTypes={data:c.default.object.isRequired},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(25),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(f);a(290);var m=a(110);a(484);var h=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={data:e.data},a.renderChart=a.renderChart.bind(a),a}return i(t,e),o(t,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({data:e.data},function(){t.renderChart()})}},{key:"renderChart",value:function(){var e=this.state.data,t=e.tLpft,a="#svg_wrapper_milestones_timeline_tooltip",n={BLACK:"#000",WHITE:"#FFF"};p.select(a).select(".svg-container").remove();var r=this.container,l=r.getBoundingClientRect().width,i={top:10,right:150,bottom:10,left:50},o=p.select(a),s=o.append("div").classed("svg-container",!0).append("svg").attr("width",l).attr("height",40+i.top+i.bottom).attr("viewBox","0 0 "+(l+i.right+i.left)+" "+(40+i.top+i.bottom)),u=s.append("g").attr("transform","translate("+i.left+","+i.top+")"),d=(0,m.scaleTime)().rangeRound([0,l]);d.domain(e.minMaxDates);var c=u.append("g").attr("transform","translate("+d(t)+", 60)"),f=c.append("g").classed("point-tooltip",!0).style("display",null).attr("transform","translate(-1, -10)");f.append("polygon").style("fill",n.BLACK).attr("points","0,-40 60,-40 60,-10 10,-10 0,0 0,-40"),f.append("text").attr("text-anchor","middle").style("fill",n.WHITE).classed("tooltip-text",!0).attr("transform","translate(30, -20)").text("T/LPFT"),f.append("text").attr("text-anchor","start").style("fill",n.BLACK).style("font-size","16px").attr("transform","translate(70, -20)").text(t.format("DD MMM YY"))}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{ref:function(t){e.container=t},className:"timeline-svg-wrapper",id:"svg_wrapper_milestones_timeline_tooltip"})}}]),t}(u.default.Component);h.propTypes={data:c.default.object.isRequired},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(25),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(f);a(290);var m=a(165),h=a(110),v=a(10),_=n(v),E=a(125);a(484);var g=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={data:e.data},a.renderChart=a.renderChart.bind(a),a}return i(t,e),o(t,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({data:e.data},function(){t.renderChart()})}},{key:"renderChart",value:function(){var e=this.state.data,t=e.tLpft,a="#svg_wrapper_milestones_timeline",n={BLACK:"#000",WHITE:"#FFF"};p.select(a).select(".svg-container").remove();var r=p.select("#svg_wrapper_milestones_timeline_tooltip").select("svg").attr("width"),l=r?Number(r):this.container.getBoundingClientRect().width,i={top:10,right:150,bottom:10,left:50},o=p.select(a),s=o.append("div").classed("svg-container",!0).append("svg").attr("width",l).attr("height",160+i.top+i.bottom).attr("viewBox","0 0 "+(l+i.right+i.left)+" "+(160+i.top+i.bottom)),u=s.append("g").attr("transform","translate("+i.left+","+i.top+")"),d=(0,h.scaleTime)().rangeRound([0,l]);d.domain(e.minMaxDates);var c=(0,E.getMonthsTickValues)(e.minMaxDates[0],e.minMaxDates[1],10),f=(0,m.axisBottom)().scale(d).tickValues(c).tickSizeOuter(0),v=(0,E.getYearsTickValues)(d),g=(0,m.axisBottom)().scale(d).tickValues(v).tickSizeOuter(0),y=u.append("g").attr("class","axis axis--x").attr("transform","translate(0,56)").call(f);y.selectAll("text").attr("class","tick").style("text-anchor","middle").st({textTransform:"uppercase",fontSize:"14px",fontFamily:"VoltaModern, sans-serif",fill:n.BLACK,shapeRendering:"crispEdges",stroke:"none"}).text(function(e){return(0,_.default)(e).format("MMM")}).attr("transform","translate(0, 24)"),y.selectAll("line").attr("class","tick-line").attr("y2","12").attr("transform","translate(0, 0)").st({fill:"none",stroke:n.BLACK,shapeRendering:"crispEdges",strokeWidth:"1px"}),y.selectAll("path").st({fill:"none",stroke:n.BLACK,opacity:0,shapeRendering:"crispEdges"});var S=u.append("g").attr("class","secondary-axis").attr("transform","translate(0,112)").call(g);S.selectAll("text").attr("class","secondary-tick").style("text-anchor","end").text(function(t){var a=(0,_.default)(t);return a.isSame(e.minMaxDates[1])||a.subtract(1,"y"),a.format("YYYY")}).attr("transform","translate(-10, 5)"),S.selectAll("line").attr("y2","31");var b=void 0;S.selectAll(".tick").attr("opacity",function(e){var t=(0,_.default)(e),a=d(t);return b&&a-b<70?0:(b=a,1)});var C=u.append("g").attr("transform","translate("+d(t)+", 60)");C.append("line").attr("x1",0).attr("x2",0).attr("y1",-120).attr("y2",-40).attr("stroke",n.BLACK).attr("stroke-width",2).attr("stroke-dasharray","6 2"),C.append("circle").style("stroke",n.BLACK).style("stroke-width","2px").style("fill","#000").attr("r",6);var O=C.append("g").classed("point-tooltip",!0).style("display",null).attr("transform","translate(-1, -10)");O.append("polygon").style("fill",n.BLACK).attr("points","0,-40 60,-40 60,-10 10,-10 0,0 0,-40"),O.append("text").attr("text-anchor","middle").style("fill",n.WHITE).classed("tooltip-text",!0).attr("transform","translate(30, -20)").text("T/LPFT")}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{ref:function(t){e.container=t},className:"timeline-svg-wrapper",id:"svg_wrapper_milestones_timeline"})}}]),t}(u.default.Component);g.propTypes={data:c.default.object.isRequired},t.default=g},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(323),m=a(30),h=n(m);a(2331);var v=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleKeyDown=a.handleKeyDown.bind(a),a.popup=document.createElement("div"),a}return i(t,e),s(t,[{key:"componentDidMount",value:function(){document.body.appendChild(this.popup),document.body.classList.add("modal_opened"),document.body.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.popup),document.body.classList.remove("modal_opened"),document.body.removeEventListener("keydown",this.handleKeyDown)}},{key:"handleKeyDown",value:function(e){27===e.keyCode&&this.props.handleClick(e)}},{key:"render",value:function(){var e=this,t={transition:"all 200ms ease-out",opacity:0},a={entering:{opacity:0},entered:{opacity:1}};return h.default.createPortal(d.default.createElement(p.Transition,{in:!0,appear:!0,timeout:0,mountOnEnter:!0},function(n){return d.default.createElement("div",{style:o({},t,a[n]),className:"modal",onClick:function(t){e.props.handleClick&&e.props.handleClick(t)}},d.default.createElement(p.Transition,{in:!0,appear:!0,timeout:200},d.default.createElement("div",{className:"modal__content "+(e.props.modalClass?e.props.modalClass:""),style:o({},t,a[n])},e.props.children)))}),this.popup)}}]),t}(u.Component);t.default=v,v.propTypes={children:f.default.element.isRequired,handleClick:f.default.func,modalClass:f.default.string},v.defaultProps={handleClick:void 0,modalClass:void 0}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(946),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(85),p=n(f),m=a(2),h=n(m),v=a(321),_=n(v),E=a(23),g=n(E),y=a(6);a(2332);var S=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={filter:""},a.handleTagRemove=a.handleTagRemove.bind(a),a.handleClear=a.handleClear.bind(a),a.onFilterChange=a.onFilterChange.bind(a),a.onSuggestionSelect=a.onSuggestionSelect.bind(a),a.handleFocus=a.handleFocus.bind(a),a.handleBlur=a.handleBlur.bind(a),a}return i(t,e),o(t,[{key:"onFilterChange",value:function(e){var t=e.target.value;this.setState({filter:t}),t.length>=2&&this.props.getSuggestions(t)}},{key:"onSuggestionSelect",value:function(e){this.props.onTagAdd(e),this.setState({filter:""})}},{key:"handleClear",value:function(){this.setState({filter:""})}},{key:"handleTagRemove",value:function(e){this.props.onTagRemove(e)}},{key:"handleFocus",value:function(){this.setState({focused:!0})}},{key:"handleBlur",value:function(){0===this.state.filter.length&&this.setState({focused:!1})}},{key:"render",value:function(){var e=this,t=this.state.filter,a=this.props,n=a.suggestions,r=a.tags,l=a.suggestionFieldName,i=a.isForUserSelector,o=r.map(function(t){return u.default.createElement("div",{className:"fpo-multi-select__tag",key:t.id},u.default.createElement("div",{className:"fpo-multi-select__tag-label"},t.name&&t.name.trim().length>0?t.name:"-"),u.default.createElement("div",{className:"fpo-multi-select__tag-remove",onClick:function(){return e.handleTagRemove(t)}},y.Icons.CROSS))}),s=n.filter(function(e){return!r.find(function(t){return t.id===e.id})}),d=i?"Search by country name":"Search by email";return u.default.createElement("div",{className:"fpo-multi-select__container"},u.default.createElement("div",{className:(0,h.default)("fpo-multi-select",{focused:this.state.focused})},!i&&u.default.createElement("span",{className:"fpo-multi-select__inner-label"},"Share with:"),u.default.createElement("div",{className:"fpo-multi-select__tags-wrapper"},o,u.default.createElement("div",{className:"fpo-multi-select__input"},u.default.createElement(g.default,{className:"fpo-multi-select__text-input",placeholder:r.length>0?"":d,value:t,onBlur:this.handleBlur,onFocus:this.handleFocus,autoFocus:this.state.focused,withoutBorder:!0,onChange:this.onFilterChange}),u.default.createElement("div",{className:"fpo-multi-select__clear-input",style:t.length>0?{display:"flex"}:null,onClick:this.handleClear},y.Icons.CROSS))),u.default.createElement("div",{className:"fpo-multi-select__suggestions-wrapper"},t.length>=2&&!!s.length&&u.default.createElement("div",{className:"fpo-multi-select__suggestions"},u.default.createElement(p.default,{style:{maxHeight:120},horizontal:!1},s.map(function(a){return u.default.createElement("div",{key:a.id,className:"fpo-multi-select__suggestions-item",onClick:function(){return e.onSuggestionSelect(a)}},u.default.createElement("div",null,(0,_.default)(a[l],t,function(e,t){return u.default.createElement("span",{key:t},e)})))}))),!!t.length&&t.length<2&&u.default.createElement("div",{className:"fpo-multi-select__message"},"Enter ",2," characters to search..."),t.length>=2&&!s.length&&u.default.createElement("div",{className:"fpo-multi-select__message"},"No results found for ",t))))}}]),t}(s.Component);S.defaultProps={tags:[],suggestions:[],suggestionFieldName:"email",isForUserSelector:!1},S.propTypes={tags:c.default.array,getSuggestions:c.default.func.isRequired,suggestions:c.default.array,onTagAdd:c.default.func.isRequired,onTagRemove:c.default.func.isRequired,suggestionFieldName:c.default.string,isForUserSelector:c.default.bool},t.default=S},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(948),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(66),m=n(p),h=a(2),v=n(h),_=a(13),E=n(_),g=a(6),y=a(179),S=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showMenu:!1},a.toggleMenu=a.toggleMenu.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a}return i(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e,t){return t.showMenu||t.showMenu!==this.state.showMenu}},{key:"toggleMenu",value:function(e){this.setState({showMenu:void 0!==e?e:!this.state.showMenu})}},{key:"handleClickOutside",value:function(e){this.state.showMenu&&e&&!e.target.getAttribute("data-ignore-click-outside")&&this.toggleMenu(!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.isDisabled,n=t.onItemClick,r=this.state.showMenu?{visible:!1}:{};return d.default.createElement(E.default,o({mouseEnterDelay:.3,align:{offset:[-20,0]},overlayClassName:"fpo-sidebar-button__tooltip",placement:"right"},r,{trigger:["hover"],overlay:d.default.createElement("span",null,"Create a new scenario for this study")}),d.default.createElement(E.default,{destroyTooltipOnHide:!0,align:{offset:[5,0]},placement:"bottomLeft",visible:this.state.showMenu,trigger:["click"],overlay:d.default.createElement(y.ContextMenu,null,d.default.createElement(y.ContextMenuItem,{label:"Create scenario","data-ignore-click-outside":!0,icon:d.default.createElement("div",{className:"icon-color-white"},g.Icons.PLUS),onClick:function(){return n()}}),d.default.createElement(y.ContextMenuItem,{label:"Create cohort scenario","data-ignore-click-outside":!0,icon:d.default.createElement("div",{className:"icon-color-white"},g.Icons.PLUS),onClick:function(){return n(!0)}}))},d.default.createElement("div",{className:(0,v.default)("fpo-sidebar__button",{"fpo-sidebar__button_disabled":a}),style:{height:"48px"}},d.default.createElement("div",{className:"fpo-sidebar__content",onClick:function(){return!a&&e.toggleMenu()}},g.Icons.NEW))))}}]),t}(d.default.Component);S.defaultProps={isDisabled:!1},S.propTypes={isDisabled:f.default.bool,onItemClick:f.default.func.isRequired},t.default=d.default.memo((0,m.default)(S))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a(0),p=n(f),m=a(1),h=n(m),v=a(742),_=n(v),E=a(11),g=n(E),y=a(83),S=n(y),b=a(65),C=n(b),O=a(31),T=n(O),R=a(67),w=n(R),A=a(2),I=n(A),N=a(199),D=n(N);a(2333);var P=a(1022),L=n(P),M=a(537),x=n(M),k=a(1090),j=n(k),F=a(536),U=n(F),V=a(540),B=n(V),H=a(535),G=n(H),Y=a(1094),q=n(Y),z=a(539),W=n(z),K=a(1083),X=n(K),Z=a(534),J=n(Z),Q=a(1087),$=n(Q),ee=a(129),te=n(ee),ae=a(538),ne=n(ae),re=a(219),le=n(re),ie=a(541),oe=n(ie),se=a(102),ue=n(se),de=a(46),ce=a(17),fe=a(7),pe=a(117),me=n(pe),he=a(49),ve=a(37),_e=a(40),Ee=n(_e),ge={STUDY:1,STUDY_FILTERS:2,SCENARIO:3,STUDY_CONSTRAINTS:4,TARGET_PATIENTS:5,MILESTONES:6,CONSTRAINTS:7,LOCATION:8,COHORTS:9,PATIENT_ALLOCATION:10,SUMMARY:11},ye=function(e){function t(e){o(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onChangeStudyFilters=function(e){a.setState(d({},a.state,{scenario:d({},a.state.scenario,e),study:d({},a.state.study,e)}))},a.onChangeStudyConstraints=function(e,t){var n=a.state,r=n.studyConstraints,l=n.ownStudyConstraints,o=void 0;if(t){if(o={ownStudyConstraints:l,studyConstraints:d({},r,i({},t,e))},"fp"===t){var s=(0,fe.getMomentDate)(r.target_lpft);s.isBefore(e)&&(o.studyConstraints.target_lpft=(0,fe.getMomentDate)(e).add(1,"day"))}}else o={ownStudyConstraints:!!e};a.setState(o,function(){a.setState(function(e){return d({},e,{steps:e.steps.map(function(t){if(t.id===ge.STUDY_CONSTRAINTS){if(!e.ownStudyConstraints)return d({},t,{status:le.default.COMPLETE});var a=!0;return Object.keys(e.studyConstraints).forEach(function(t){e.studyConstraints[t]||0===e.studyConstraints[t]||(a=!1)}),a?d({},t,{status:le.default.COMPLETE}):d({},t,{status:le.default.INCOMPLETE})}return t})})})})},a.onKeyUp=a.onKeyUp.bind(a),a.navigateHandler=a.navigateHandler.bind(a),a.closeStepperHandler=a.closeStepperHandler.bind(a),a.onScrollHandler=(0,D.default)(a.onScrollHandler.bind(a),100),a.onValidationChange=a.onValidationChange.bind(a),a.onChangeDetails=a.onChangeDetails.bind(a),a.onChangeTargetPatients=a.onChangeTargetPatients.bind(a),a.onChangeMilestones=a.onChangeMilestones.bind(a),a.onChangePatientAllocation=a.onChangePatientAllocation.bind(a),a.onChangeStudyDetails=a.onChangeStudyDetails.bind(a),a.onChangeConstraints=a.onChangeConstraints.bind(a),a.onSubmitHandle=a.onSubmitHandle.bind(a),a.onChangeRegionsCountries=a.onChangeRegionsCountries.bind(a),a.onChangeCohort=a.onChangeCohort.bind(a),a.onAddCohort=a.onAddCohort.bind(a),a.onRemoveCohort=a.onRemoveCohort.bind(a);var n={include:[],exclude:[],initialIncludedRegionsCountries:e.regionsCountries,initialExcludedRegionsCountries:e.regionsCountries,disabledIncludedCountries:[],disabledExcludedCountries:[]},r=e.dirtyData;if(r){if(r.scenario&&e.regionsCountries){var l=e.regionsCountries.map(function(e){var t=e.countries.map(function(e){return d({},e,{platform_country_id:e.id})});return d({},e,{countries:t})});n.initialIncludedRegionsCountries=(0,T.default)(l),n.initialExcludedRegionsCountries=(0,T.default)(l),r.scenario.includeCountries&&r.scenario.includeCountries.forEach(function(e){e.countries.forEach(function(t){var a=n.initialIncludedRegionsCountries.find(function(t){return t.name===e.name});1===a.countries.length||a.countries.find(function(e){return"Unspecified country"===e.name})||(a.countries=[(0,fe.createUnspecifiedCountry)(a.id)].concat(a.countries));var r=a.countries.find(function(e){return e.name===t.name});r&&(r.isSelected=!0)})}),r.scenario.excludeCountries&&r.scenario.excludeCountries.forEach(function(e){e.countries.forEach(function(t){var a=n.initialExcludedRegionsCountries.find(function(t){return t.name===e.name});1===a.countries.length||a.countries.find(function(e){return"Unspecified country"===e.name})||(a.countries=[(0,fe.createUnspecifiedCountry)(a.id)].concat(a.countries));var r=a.countries.find(function(e){return e.name===t.name});r&&(r.isSelected=!0)})})}r.study.fp=(0,fe.getMomentDate)(r.study.fp),r.study.target_lpft=(0,fe.getMomentDate)(r.study.target_lpft),r=d({submitted:!1},r,n,{step:e.newStudy?1:2})}return a.state=r||d({},n,{steps:t.getInitialSteps(e.study.is_imported,e.newStudy,e.showCohorts).map(function(t){return t.id===ge.STUDY&&e.newStudy?d({},t,{status:le.default.INCOMPLETE}):t.id===ge.SCENARIO&&e.newStudy?d({},t,{status:le.default.INCOMPLETE}):t}),step:e.newStudy?ge.STUDY:ge.SCENARIO,regionCountrySelectorMode:oe.default.COUNTRIES,scenario:{cohorts:[{id:se.INITIAL_COHORT_ID,name:"Cohort 1",locations:[],trigger:{trigger_type:ue.default.MILESTONES,start_date:null,num_patients:null,num_patients_abs:!0,start_milestone:se.TRIGGER_START_MILESTONES.GLOBAL_FP,source_cohort_id:null}}]},study:{id:a.props.studyId,study_id:e.study.study_id||""},patientAllocationValues:{},updateFp:!e.study.fp,defaultScenarioName:a.getDefaultScenarioName(),end_date:e.study&&e.study.target_lpft?(0,fe.getMomentDate)(e.study.target_lpft):null,fp:e.study&&e.study.fp?(0,fe.getMomentDate)(e.study.fp):null,existingScenariosNames:(e.study&&e.study.scenarios?e.study.scenarios:[]).map(function(e){return e.name}),ownStudyConstraints:!1,studyConstraints:{target_num_patients:e.study.target_num_patients,fp:e.study.fp,target_lpft:e.study.target_lpft,fpfv_fpft:e.study.fpfv_fpft,indication:e.study.indication,therapeutic_area:e.study.therapeutic_area}}),a.wizardRef=void 0,a.ieBrowser=Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject,a}return u(t,e),c(t,null,[{key:"getInitialSteps",value:function(e,t,a){return[{id:ge.STUDY,title:"Study details",status:le.default.COMPLETE,hide:!t},{id:ge.STUDY_FILTERS,title:"Study filters",status:le.default.COMPLETE,hide:!t},{id:ge.SCENARIO,title:"Scenario details",status:le.default.COMPLETE},{id:ge.STUDY_CONSTRAINTS,title:"Study constraints",status:le.default.COMPLETE,hide:t},{id:ge.TARGET_PATIENTS,title:"Target patients",status:le.default.INCOMPLETE,hide:e||!t},{id:ge.MILESTONES,title:"Milestones",status:le.default.INCOMPLETE,hide:e||!t},{id:ge.CONSTRAINTS,title:"Country and Regional considerations",status:le.default.INCOMPLETE,hide:a},{id:ge.LOCATION,title:"Locations",status:le.default.INCOMPLETE,hide:a},{id:ge.COHORTS,title:"Cohorts",status:le.default.INCOMPLETE,hide:!a},{id:ge.PATIENT_ALLOCATION,title:"Patient allocation",status:le.default.INCOMPLETE,hide:a},{id:ge.SUMMARY,title:"Summary scenario inputs",status:le.default.INCOMPLETE}]}}]),c(t,[{key:"componentDidMount",value:function(){var e=!!(0,he.isSupportPassive)()&&{passive:!0};this.wizardRef.scrollTop=0,this.wizardRef.addEventListener("scroll",this.onScrollHandler,e),document.body.classList.add("new-scenario-wizard-page"),document.addEventListener("keyup",this.onKeyUp,!0)}},{key:"componentWillReceiveProps",value:function(e){var t=e.activeUser,a=e.requirePageRefresh,n=(0,Ee.default)(t,e.study);if(e.study&&e.study.is_imported&&!n.userCanCreateNewPlannedScenario||(e.newStudy||e.study&&!e.study.is_imported)&&!n.userCanCreateNewPlayGroundScenario)return this.setState({forbidden:!0}),this.closeStepperHandler(),void this.props.forbiddenError(de.DONT_HAVE_ACCESS_TO_VIEW_PAGE);a&&t&&((0,ve.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"-"+this.props.studyId+"-new"),(0,ve.addToStorage)("fpo-dirty-data",{id:t.id+"-"+e.studyId+"-new",values:d({},this.state,{submitted:!1})}))}},{key:"componentWillUnmount",value:function(){this.wizardRef.onscroll=void 0,document.body.classList.remove("new-scenario-wizard-page"),document.removeEventListener("keyup",this.onKeyUp,!0)}},{key:"onKeyUp",value:function(e){var t=this.state.step;if("Enter"===e.key&&this.stepIsValid(t)){var a=e.target.classList;if(a.contains("date-picker-control")&&(a.contains("month-input")||a.contains("year-input")))return;if(e.target.closest(".fpo-text-area-container"))return;e.stopPropagation(),this.navigateHandler(t+1)}}},{key:"onChangeDetails",value:function(e){this.setState(d({},this.state,{scenario:d({},this.state.scenario,e)}))}},{key:"onChangeStudyDetails",value:function(e){var t=e.name,a=l(e,["name"]);this.setState(function(e){return d({},e,{scenario:d({},e.scenario,{name:t}),study:d({},e.study,a)})})}},{key:"onChangeTargetPatients",value:function(e){this.setState(d({},this.state,{scenario:d({},this.state.scenario,e),study:d({},this.state.study,e)}))}},{key:"onChangeMilestones",value:function(e){var t=d({},e),a=t.fp,n=t.end_date,r=t.fpfv_fpft;this.setState(d({},this.state,{scenario:d({},this.state.scenario,e),study:d({},this.state.study,{fp:a||null,target_lpft:n||null,fpfv_fpft:r||null})}))}},{key:"onChangeRegionsCountries",value:function(e,t){var a=this.state.scenario,n=e.map(function(e){return d({},e,{countries:e.countries.map(function(t){var n=null,r=null,l=null;if(a.includeCountries){var i=a.includeCountries.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});if(i){var o=i.countries.find(function(e){return e.name.toLowerCase()===t.name.toLowerCase()});o&&(n=o.patients_min,r=o.patients,l=o.patients_max)}}return d({},t,{uniqid:e.id+"_"+t.id,patients_min:n,patients:r,patients_max:l})})})});a="Include"===t?d({},this.state.scenario,{includeCountries:n}):d({},this.state.scenario,{excludeCountries:n}),this.setState({scenario:a})}},{key:"onChangeConstraints",value:function(e){var t=this,a=this.state.scenario,n=a;n.createConstraints=!!e,e||(n=(0,S.default)(a,"countries")),this.setState({createConstraints:!!e,scenario:n},function(){t.setState(function(t){return d({},t,{steps:t.steps.map(function(t){if(t.id===ge.CONSTRAINTS){var a=le.default.COMPLETE;return d({},t,{status:a})}return t.id===ge.LOCATION?d({},t,{hide:!e}):t.id===ge.PATIENT_ALLOCATION?d({},t,{hide:!e}):t})})})})}},{key:"onChangeCohort",value:function(e,t,a,n,r){var l=this.state.scenario;l.cohorts=l.cohorts.map(function(l){var i=l;return i.id===e&&(n?i[n][t]=a:"locations"!==t||r?i[t]=a:i.locations=a.map(function(e){var t=e.countries.map(function(t){var a=null,n=null,r=i.locations.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});if(r){var l=r.countries.find(function(e){return e.name.toLowerCase()===t.name.toLowerCase()});l&&(a=l.patients,n=l.sites)}return d({},t,{patients:a,sites:n})});return d({},e,{countries:t})})),i});var i=(0,me.default)(l),o=this.state.steps.map(function(e){return e.id===ge.COHORTS&&(e.status=i?le.default.COMPLETE:le.default.ERROR),e});this.setState({scenario:l,steps:o})}},{key:"onAddCohort",value:function(){var e=this.state.scenario,t={id:w.default.generate(),name:"Cohort "+(e.cohorts.length+1),locations:[],trigger:{trigger_type:ue.default.MILESTONES,start_date:null,num_patients:null,num_patients_abs:!0,start_milestone:null,source_cohort_id:null}};e.cohorts=[].concat(r(e.cohorts),[t]);var a=(0,me.default)(e),n=this.state.steps.map(function(e){return e.id===ge.COHORTS&&(e.status=a?le.default.COMPLETE:le.default.ERROR),e});this.setState({scenario:e,steps:n})}},{key:"onRemoveCohort",value:function(e){var t=this.state.scenario;t.cohorts=t.cohorts.filter(function(t){return t.id!==e});var a=(0,me.default)(t),n=this.state.steps.map(function(e){return e.id===ge.COHORTS&&(e.status=a?le.default.COMPLETE:le.default.ERROR),e});this.setState({scenario:t,steps:n})}},{key:"onSubmitHandle",value:function(){var e=this,t=this.state.scenario,a=t.includeCountries,n=t.excludeCountries,r=this.state,l=r.createConstraints,i=r.defaultScenarioName,o=r.ownStudyConstraints,s=r.studyConstraints,u=[];void 0!==l&&l&&(a&&a.forEach(function(e){var t=e.countries.map(function(e){return d({},e,{constraint:"INCLUDE"})}),a=u.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});a?a.countries=a.countries.concat(t):u.push(d({},e,{countries:t}))}),n&&n.forEach(function(e){var t=e.countries.map(function(e){return d({},e,{constraint:"EXCLUDE"})}),a=u.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});a?a.countries=a.countries.concat(t):u.push(d({},e,{countries:t}))}));var c=(0,S.default)(this.state.scenario,"includeCountries","excludeCountries","fpfv_fpft");c.name=c.name?c.name:i,c.locations=u,this.props.showCohorts||(c=(0,S.default)(c,"cohorts")),o&&(c=d({},c,s,{ownStudyConstraints:o})),this.setState({submitted:!0},function(){(0,ve.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-new");var t=e.props.onSubmit(e.state.study,c,e.state.updateFp);t&&t.catch(function(){e.setState({submitted:!1})})})}},{key:"onChangePatientAllocation",value:function(e,t,a){var n=this.state.scenario,r=/^[1-9]\d*$/,l=!0;if(!r.test(a)&&0!==a.length)return void this.forceUpdate();n.includeCountries.forEach(function(r,i){return r.countries.forEach(function(r,o){r.id===e&&(n.includeCountries[i].countries[o][t]=parseInt(a,10),r.patients?(r.patients_min>r.patients||r.patients_max&&r.patients_max<r.patients)&&(l=!1):r.patients_max&&r.patients_max<r.patients_min&&(l=!1))})});var i=this.state.steps.map(function(e){return e.id===ge.PATIENT_ALLOCATION&&(e.status=l?le.default.COMPLETE:le.default.ERROR),e});this.setState({scenario:n,steps:i})}},{key:"onValidationChange",value:function(e,t,a){this.setState(function(n){return d({},n,{steps:n.steps.map(function(n){if(n.id===e){var r=le.default.INCOMPLETE;return t?r=le.default.COMPLETE:!t&&a&&(r=le.default.ERROR),d({},n,{status:r})}return n})})})}},{key:"onScrollHandler",value:function(){var e=this,t=function(){for(var t=void 0,a=0;!t&&a<e.state.steps.length;)e.state.steps[a].status===le.default.COMPLETE||e.state.steps[a].hide||(t=a+1),a+=1;return t}(),a=this["anchor"+(t+1)];a.getBoundingClientRect().top<this.wizardRef.clientHeight-150&&(this.ieBrowser?this.wizardRef.scrollTop=a.offsetParent.offsetTop-(this.wizardRef.clientHeight-150):this.wizardRef.scrollTop=a.offsetTop-(this.wizardRef.clientHeight-150));var n=Math.floor(this.wizardRef.scrollTop),r=this.wizardRef.clientHeight-150+n,l=this.state.steps.length+1;if(this.ieBrowser)for(;r<=this["anchor"+l].offsetParent.offsetTop;)l-=1;else for(;r<=this["anchor"+l].offsetTop;)l-=1;this.state.step!==l&&this.setState(d({},this.state,{step:l}))}},{key:"getDefaultScenarioName",value:function(){var e=this.props.study,t=e.scenarios?e.scenarios.length:0,a=e.archivedCount||0,n=t+a+1;return n<10?n="00"+n:n<100&&(n="0"+n),"Scenario "+n}},{key:"closeStepperHandler",value:function(){this.props.onClose(this.props.studyId)}},{key:"navigateHandler",value:function(e){var t=void 0;t=this.ieBrowser?this["anchor"+e].offsetParent.offsetTop:this["anchor"+e].offsetTop,_.default.animateScroll.scrollTo(t-80,{containerId:"new-scenario-wizard"})}},{key:"stepIsValid",value:function(e){var t=this.state.steps.find(function(t){return t.id===e});return t.status===le.default.COMPLETE||t.hide}},{key:"tabNavigateForward",value:function(e){1!==e&&this.stepIsValid(e-1)&&this.navigateHandler(e)}},{key:"regionCountrySelectorModeHandler",value:function(e){this.setState({regionCountrySelectorMode:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.step,n=t.createConstraints,r=t.scenario,l=t.ownStudyConstraints,i=t.studyConstraints,o=t.initialIncludedRegionsCountries,s=t.initialExcludedRegionsCountries,u=this.props,d=u.study,c=u.regionsCountries,f=u.showCohorts,m=u.newStudy,h=p.default.createElement("div",{style:{height:"0px"}});return p.default.createElement("div",{className:"new-scenario-wizard",style:{overflowY:"auto"},ref:function(t){e.wizardRef=t},id:"new-scenario-wizard"},p.default.createElement("div",{className:"fpo-grid"},p.default.createElement("div",{className:"fpo-row",style:{height:"80px"}},p.default.createElement("div",{className:(0,I.default)("fpo-col-1",{"fpo-col-offset-9":!f,"fpo-col-offset-10":f}),style:{backgroundColor:"rgba(0, 139, 139, 0.19)",color:"black"}},p.default.createElement(L.default,{navigate:this.navigateHandler,onCloseClick:this.closeStepperHandler,activeStep:this.state.step,steps:this.state.steps}))),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor1=t}}))),m?p.default.createElement(q.default,{onChange:this.onChangeStudyDetails,onValidationChange:function(t,a){return e.onValidationChange(ge.STUDY,t,a)},activeStep:a===ge.STUDY,onTabNavigate:function(){return e.tabNavigateForward(ge.STUDY_FILTERS)},availableTherapeuticAreas:this.props.availableTherapeuticAreas,availableIndications:this.props.availableIndications,selectedTa:this.state.study.therapeutic_area,showCohorts:f,study:this.state.study,initialValues:{therapeutic_area:this.state.study.therapeutic_area,indication:this.state.study.indication,study_id:this.state.study.study_id,description:this.state.study.description||""}}):h,p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor2=t}}))),m?p.default.createElement(W.default,{onChange:this.onChangeStudyFilters,onValidationChange:function(t,a){return e.onValidationChange(ge.STUDY_FILTERS,t,a)},activeStep:a===ge.STUDY_FILTERS,onTabNavigate:function(){return e.tabNavigateForward(ge.SCENARIO)},showCohorts:f,study:this.state.study,initialValues:(0,C.default)(this.state.study,ce.STUDY_FILTERS)}):h,p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor3=t}}))),p.default.createElement(x.default,{onChange:this.onChangeDetails,onValidationChange:function(t,a){return e.onValidationChange(ge.SCENARIO,t,a)},studyDescription:m?(0,g.default)(this.state.study,"description"):d.description,studyIndication:m?(0,g.default)(this.state.study,"indication.label"):d.indication,activeStep:a===ge.SCENARIO,onTabNavigate:function(){return e.tabNavigateForward(ge.TARGET_PATIENTS)},studyNumId:m?(0,g.default)(this.state.study,"id"):d.id,studyId:m?(0,g.default)(this.state.study,"study_id"):d.study_id,studyTa:m?(0,g.default)(this.state.study,"therapeutic_area.label"):d.therapeutic_area,existingScenariosNames:this.state.existingScenariosNames,isNewStudy:m,showCohorts:f,initialValues:{name:this.state.scenario.name||this.state.defaultScenarioName}}),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor4=t}}))),m?h:p.default.createElement(ne.default,{status:(0,g.default)(this.state.steps.find(function(e){return e.id===ge.STUDY_CONSTRAINTS}),"status")===le.default.COMPLETE,activeStep:a===ge.STUDY_CONSTRAINTS,ownStudyConstraints:l,showCohorts:f,values:i,validationChangeHandler:function(t,a){e.onValidationChange(ge.STUDY_CONSTRAINTS,a,!0)},onChange:this.onChangeStudyConstraints}),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor5=t}}))),m?p.default.createElement(B.default,{onChange:this.onChangeTargetPatients,activeStep:a===ge.TARGET_PATIENTS,onTabNavigate:function(){return e.tabNavigateForward(ge.MILESTONES)},initialValues:{target_num_patients:d.target_num_patients||this.state.study.target_num_patients},showCohorts:f,onValidationChange:function(t,a){return e.onValidationChange(ge.TARGET_PATIENTS,t,a)}}):h,p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor6=t}}))),m?p.default.createElement(U.default,{onTabNavigate:function(){return e.tabNavigateForward(ge.CONSTRAINTS)},onChange:this.onChangeMilestones,onValidationChange:function(t,a){return e.onValidationChange(ge.MILESTONES,t,a)},activeStep:a===ge.MILESTONES,disabled:!this.props.newStudy&&!this.state.updateFp,showCohorts:f,initialValues:{end_date:this.state.end_date||(0,fe.getMomentDate)(this.state.study.target_lpft),fp:this.state.fp||(0,fe.getMomentDate)(this.state.study.fp),fpfv_fpft:this.state.study.fpfv_fpft}}):h,p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor7=t}}))),f?h:p.default.createElement(X.default,{onChange:this.onChangeConstraints,createConstraints:n,activeStep:a===ge.CONSTRAINTS}),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{tabIndex:-1,ref:function(t){e.anchor8=t}}))),0===c.length||f||void 0!==n&&!n?h:p.default.createElement(G.default,{includedRegionsCountries:o,excludedRegionsCountries:s,includeCountries:r.includeCountries,excludeCountries:r.excludeCountries,onTabNavigate:function(){return e.tabNavigateForward(ge.PATIENT_ALLOCATION)},activeStep:a===ge.LOCATION,showCohorts:f,valid:r.includeCountries&&r.includeCountries.length>0||r.excludeCountries&&r.excludeCountries.length>0,onChange:this.onChangeRegionsCountries,onValidationChange:function(t,a){e.onValidationChange(ge.LOCATION,t,a),e.onValidationChange(ge.PATIENT_ALLOCATION,t,a)}}),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor9=t}}))),f?p.default.createElement(J.default,{cohorts:r.cohorts,onAdd:this.onAddCohort,onRemove:this.onRemoveCohort,onUpdate:this.onChangeCohort,locations:c,study:m?this.state.study:d,isDisabled:a!==ge.COHORTS,activeStep:a===ge.COHORTS}):h,p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor10=t}}))),f||void 0!==n&&!n?h:p.default.createElement($.default,{newScenario:!0,activeStep:a===ge.PATIENT_ALLOCATION,onUpdate:this.onChangePatientAllocation,study:d,locations:r.includeCountries}),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor11=t}}))),p.default.createElement(j.default,{disableSubmit:this.state.submitted,activeStep:a===ge.SUMMARY,dataStudyId:this.props.newStudy?this.state.study.study_id:d.study_id,dataScenarioName:r.name||this.state.defaultScenarioName,dataTargetPatients:this.state.study.target_num_patients||d.target_num_patients,dataFpp:(0,fe.getMomentDate)(r.fp),dataFpfvFpft:r.fpfv_fpft,dataTargetLpft:(0,fe.getMomentDate)(r.end_date),createConstraints:r.createConstraints,includeCountries:r.includeCountries,excludeCountries:r.excludeCountries,onSubmitClick:this.onSubmitHandle,mode:this.state.regionCountrySelectorMode,showCohorts:f,cohorts:r.cohorts,isNewStudy:m,isNewScenario:!0}),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col"},p.default.createElement("div",{ref:function(t){e.anchor12=t}}))),p.default.createElement("div",{className:"fpo-row"},p.default.createElement("div",{className:"fpo-col",style:{height:"150px"}}))),p.default.createElement(te.default,{removeStoredData:this.props.activeUser.id+"-"+this.props.studyId+"-new",hasUnsaved:!this.state.submitted&&!this.props.requirePageRefresh&&!this.state.forbidden}))}}]),t}(f.Component);ye.propTypes={availableTherapeuticAreas:h.default.array,availableIndications:h.default.array,newStudy:h.default.bool,onClose:h.default.func.isRequired,onSubmit:h.default.func.isRequired,regionsCountries:h.default.array.isRequired,study:h.default.object.isRequired,studyId:h.default.number.isRequired,showCohorts:h.default.bool,activeUser:h.default.object.isRequired,requirePageRefresh:h.default.bool,dirtyData:h.default.object,forbiddenError:h.default.func.isRequired},ye.defaultProps={availableTherapeuticAreas:[],availableIndications:[],newStudy:!1,showCohorts:!1,requirePageRefresh:!1,dirtyData:null},t.default=ye},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(951),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),m=a(66),h=n(m),v=a(85),_=n(v),E=a(54),g=n(E);a(2334);var y=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={focused:!1,note:""},a.handleFocus=a.handleFocus.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a.handleCancel=a.handleCancel.bind(a),a.handleChange=a.handleChange.bind(a),a.handleAddNote=a.handleAddNote.bind(a),a}return i(t,e),o(t,[{key:"handleFocus",value:function(){var e=this;this.setState({focused:!0},function(){e.textarea.focus()})}},{key:"handleClickOutside",value:function(){this.state.focused&&this.setState({focused:!1})}},{key:"handleCancel",value:function(){this.setState({focused:!1,note:""})}},{key:"handleChange",value:function(e){this.setState({note:e.target.value})}},{key:"handleAddNote",value:function(){var e=this,t={text:this.state.note};this.props.onSubmit(this.props.scenarioId,t).then(function(){e.handleCancel()})}},{key:"render",value:function(){var e=this,t=this.state,a=t.note,n=t.focused,r=(0,p.default)("fpo-notes-input__textarea-wrapper",{focused:!!n}),l=(0,p.default)("fpo-notes-input__buttons-wrapper",{focused:!!n}),i=(0,p.default)("fpo-notes-input__scroll-area","input-scrolled"),o=(0,p.default)("fpo-notes-input__textarea","input-scrolled");return u.default.createElement("div",{className:"fpo-notes-input__container"},u.default.createElement("div",{onClick:this.handleFocus,className:r},u.default.createElement(_.default,{className:i,style:{maxHeight:n?132:56},horizontal:!1,stopScrollPropagation:!0},u.default.createElement("textarea",{onKeyDown:function(e){return e.stopPropagation()},onChange:this.handleChange,placeholder:"Add note here",onWheel:function(e){e.stopPropagation(),e.preventDefault()},value:a,ref:function(t){e.textarea=t},className:o}))),u.default.createElement("div",{className:l},u.default.createElement(g.default,{className:"no-border",label:"Cancel",disabled:0===a.length,onClick:this.handleCancel}),u.default.createElement(g.default,{type:"primary",label:"Add note",disabled:0===a.length,onClick:this.handleAddNote})))}}]),t}(u.default.PureComponent);y.propTypes={onSubmit:c.default.func.isRequired,scenarioId:c.default.number.isRequired},t.default=(0,h.default)(y)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(953),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.OptimiseScenarioDialog=void 0;var r=a(0),l=n(r),i=a(1),o=n(i),s=a(39),u=a(6),d=a(46);a(2336);var c=function(e){var t=e.isShown,a=e.scenarioName,n=e.onClose,r=e.onSubmit;return l.default.createElement(s.PopupDialog,{titleIcon:u.Icons.OPTIMISE,title:"Optimize",scenarioName:a,className:"optimise-scenario-dialog",isShown:t,handleClose:n,buttons:[l.default.createElement(s.ActionButton,{className:"optimise-scenario-dialog__button-cancel",action:n},d.CANCEL),l.default.createElement(s.ActionButton,{action:r,primary:!0},d.OPTIMIZE)]},l.default.createElement("div",{className:"optimise-content"},d.OPTIMIZE_WARNING),l.default.createElement("br",null),l.default.createElement("div",{className:"optimise-content"},"The optimization could take a while!"))};c.defaultProps={isShown:!1,onClose:void 0},c.propTypes={isShown:o.default.bool,scenarioName:o.default.string.isRequired,onClose:o.default.func,onSubmit:o.default.func.isRequired},t.OptimiseScenarioDialog=c,t.default=l.default.memo(c)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(515),c=n(d),f=a(112),p=function(e){var t,a;return a=t=function(t){function a(){return r(this,a),l(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return i(a,t),o(a,[{key:"render",value:function(){return this.context.isOptimizing?u.default.createElement(c.default,null):u.default.createElement(e,this.props)}}]),a}(u.default.Component),t.contextType=f.ChartDataContext,a};t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(7),p=a(13),m=n(p),h=a(14),v=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.createdAt,a=e.value,n=e.originScenarioName,r=e.originScenarioStatus,l=e.originIsAdjusted,i=e.originStudyName,o=e.title,d=e.exactCopy,c=e.isAdjusted,p=e.status,v=t?(0,f.formatDate)((0,f.getMomentDate)(t)):"n/a",_=u.default.createElement("span",null,u.default.createElement("span",null,"New scenario. ",u.default.createElement("br",null),"Created at"),u.default.createElement("span",null," ",v)),E=null;return d?E="as exact copy of ":(c||p===h.SCENARIO_STATUS.APPROVED||p===h.SCENARIO_STATUS.PREV_APPROVED)&&(E="as adjusted copy of "),null!==n&&(_=null!==i?u.default.createElement("span",null,u.default.createElement("span",null,"Duplicated ",E||"from "," ",r.toLowerCase()," "),u.default.createElement("br",null),n&&i&&u.default.createElement(s.Fragment,null,u.default.createElement("span",null,'"'+i+'"'," - ",'"'+n+'"'),u.default.createElement("br",null)),u.default.createElement("span",null,"at ",v)):u.default.createElement("span",null,u.default.createElement("span",null,"Duplicated ",E||"from ",r.toLowerCase()," ",l?"adjusted":""," plan"),u.default.createElement("br",null),u.default.createElement("span",null,'"'+n+'"'),u.default.createElement("br",null),u.default.createElement("span",null,"at ",v))),o&&(_=u.default.createElement("span",null,u.default.createElement("span",null,o),u.default.createElement("br",null),_)),u.default.createElement(m.default,{mouseEnterDelay:.7,placement:"bottom",overlay:_},u.default.createElement("span",null,a))}}]),t}(u.default.PureComponent);v.defaultProps={createdAt:null,value:"",originScenarioName:null,originScenarioStatus:"OPEN",originIsAdjusted:!1,originStudyName:null,title:null,exactCopy:!1,isAdjusted:!1,status:null},v.propTypes={createdAt:c.default.object,value:c.default.string,originScenarioName:c.default.string,originScenarioStatus:c.default.string,originIsAdjusted:c.default.bool,originStudyName:c.default.string,title:c.default.string,exactCopy:c.default.bool,isAdjusted:c.default.bool,status:c.default.string},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(6),u=a(7);a(2338);var d=function(e){var t=e.isAggregatedRowSelected,a=e.countryName,n=e.numberOfPatients,r=e.originalLpft,i=r?(0,u.getMomentDate)(r).format("DD MMM YY"):"-",o="",d="";return t?(o="FPO forecasts suggests re-allocation from countries forecasted to be delayed to those \n      that are likely to have capacity (orig. F/LPFT: "+i+")",d=s.Icons.PATIENTS_GENERAL):n>0?(o=a+" seems likely to have capacity (orig. F/LPFT: "+i+"). \n      FPO suggests re-allocation of "+Math.abs(n)+" \n      patients to "+a+" to minimize delays",d=s.Icons.PATIENTS_OVER_ALLOCATION):(o=a+" is forecasted to be delayed (orig. F/LPFT: "+i+"). \n      FPO suggests re-allocation of "+Math.abs(n)+" \n      patients to other countries to minimize delays",d=s.Icons.PATIENTS_UNDER_ALLOCATION),l.default.createElement("div",{className:"overallocation-message-bar"},l.default.createElement("span",{className:"message-icon"},d),l.default.createElement("span",{className:"message"},o))};d.defaultProps={isAggregatedRowSelected:!0,countryName:"",numberOfPatients:"",originalLpft:null},d.propTypes={isAggregatedRowSelected:o.default.bool,countryName:o.default.string,numberOfPatients:o.default.oneOfType([o.default.string,o.default.number]),originalLpft:o.default.object},t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(958),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),m=a(85),h=n(m),v=a(31),_=n(v),E=a(124),g=n(E),y=a(61),S=n(y),b=a(23),C=n(b),O=a(6);a(2339);var T=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={open:!1,locations:e.cohort.locations,optionsMaxHeight:520},a.handleControlClick=a.handleControlClick.bind(a),a.handleOutsideClick=a.handleOutsideClick.bind(a),a.handleValueChange=a.handleValueChange.bind(a),a}return i(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.cohort.locations,a=this.calculateOptionsHeight();this.setState({locations:t,optionsMaxHeight:a,open:(!e.isDisabled||!this.state.open)&&this.state.open})}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.handleOutsideClick)}},{key:"handleOutsideClick",value:function(e){!this.dropdown.contains(e.target)&&this.state.open&&(this.setState({open:!1}),document.removeEventListener("click",this.handleOutsideClick))}},{key:"handleControlClick",value:function(){var e=this.state,t=e.open,a=e.optionsMaxHeight,n=a;t?document.body.removeEventListener("click",this.handleOutsideClick):(document.body.addEventListener("click",this.handleOutsideClick),n=this.calculateOptionsHeight()),this.setState({open:!t,optionsMaxHeight:n})}},{key:"handleValueChange",value:function(e,t,a){var n=(0,_.default)(this.state.locations),r=this.props.cohort;n.forEach(function(r,l){return r.countries.forEach(function(r,i){r.id===e&&(n[l].countries[i][t]=parseFloat(a))})}),this.setState({locations:n}),this.props.onUpdate(r.id,"locations",n,null,!0)}},{key:"calculateOptionsHeight",value:function(){if(this.dropdown){var e=this.dropdown.getBoundingClientRect(),t=e.height,a=e.top;return window.innerHeight-(t+a+46)}return this.state.optionsMaxHeight}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.locations,r=t.optionsMaxHeight,l=this.props,i=l.isDisabled,o=l.status,s=(0,p.default)("patients-allocation-dropdown",{"patients-allocation-dropdown__open":a}),d=(0,p.default)("patients-allocation-dropdown__control",{error:"error"===o}),c=0,f=0,m=!1,v=!1;return n.forEach(function(e){return e.countries.forEach(function(e){var t=e.patients,a=e.sites;t?c+=t:m||(m=!0),a?f+=a:v||(v=!0)})}),u.default.createElement("div",{className:s,ref:function(t){e.dropdown=t}},u.default.createElement("div",{className:"patients-allocation-dropdown__label"},"Patients & Sites Allocation"),u.default.createElement("div",{className:d,onClick:i?void 0:this.handleControlClick},u.default.createElement("div",null,u.default.createElement("span",{className:(0,p.default)("patients-sum",{error:m&&n.length>0})},c||"-"),u.default.createElement("span",{className:"control-icon"},O.Icons.VISITORS)),u.default.createElement(S.default,null),u.default.createElement("div",null,u.default.createElement("span",{className:(0,p.default)("sites-sum",{error:v&&n.length>0})},f||"-"),u.default.createElement("span",{className:"control-icon"},O.Icons.SITES))),u.default.createElement("div",{className:"patients-allocation-dropdown__options"},u.default.createElement(h.default,{horizontal:!1,stopScrollPropagation:!0,style:{maxHeight:r+"px"}},n.map(function(t){return u.default.createElement("div",{className:"options-region",key:t.id+"_"+t.name},!t.isCountryRegion&&u.default.createElement("span",{className:"options-region__name"},t.name),t.countries.map(function(a){return u.default.createElement("div",{className:"options-country",key:a.id+"_"+a.name},u.default.createElement("span",{className:(0,p.default)("options-country__name",{"region-name":t.isCountryRegion})},t.isCountryRegion?t.name:a.name),u.default.createElement("div",{className:"options-country__values"},u.default.createElement(C.default,{disabled:i,validators:[function(e){return""===e||g.default.isInt(e,{min:1,max:1e6})}],status:a.patients&&""!==a.patients?null:"error",onBlur:function(t,n){var r=n.value;return e.handleValueChange(a.id,"patients",r.replace(/^0+/,""))},value:a.patients||""}),u.default.createElement(C.default,{disabled:i,validators:[function(e){return""===e||g.default.isInt(e,{min:1,max:1e4})}],status:a.sites&&""!==a.sites?null:"error",onBlur:function(t,n){var r=n.value;return e.handleValueChange(a.id,"sites",r.replace(/^0+/,""))},value:a.sites||""})))}))}))))}}]),t}(s.PureComponent);T.defaultProps={isDisabled:!1,status:null},T.propTypes={cohort:c.default.object.isRequired,onUpdate:c.default.func.isRequired,isDisabled:c.default.bool,status:c.default.oneOf(["success","error"])},t.default=T},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(960),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i);a(2340);var s=function(e){var t=e.title,a=e.children;return l.default.createElement("div",{className:"placeholder__container"},l.default.createElement("h3",null,t),l.default.createElement("div",null,a))};s.propTypes={children:o.default.node,title:o.default.string},s.defaultProps={children:null,title:"Placeholder"},t.default=s},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(6),c=a(12),f=a(13),p=n(f),m=a(51),h=n(m),v=a(926),_=n(v),E=a(354),g=function(e){var t=e.scenarioData,a=e.rowIndex,n=e.isMultiEditing,r=e.onMultiCheck,i=e.data,o=e.multiRegionsData,s=e.isAdjusted,f=e.cellClickHandler,m=e.collapsed,v=e.onToggleEvents,g=function(e,t,a,n){return e[t]?e[t].includes(a):!e[t]&&e[a]&&e[a].length===n[0].length},y=function(e,t,a){for(var n=arguments.length,i=Array(n>3?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];return l.default.createElement("div",{className:"cell-control force-visibility check-multi-row",onClick:function(e){return e.stopPropagation()}},l.default.createElement(h.default,{label:"",checked:g(e,t,a,i),onChange:function(e){g(r(e,a,t,i),t,a,i)}}))},S=t[a],b=s?S.adjusted_events:S.events,C=d.Icons.EVENT,O=S.location,T=S.region_name,R=b&&b.length>0,w=S.ignore_aggregation,A=i.filter(function(e){return"country"===e.type&&e.region_id===S.region_id}).map(function(e){return e.country_name}),I="generic"===S.valuesType||"actual"===S.valuesType&&S.ignoreGenericData||"adjusted"===S.valuesType&&(0,E.showInAdjustedRow)(S.valuesType,t,a);return"region"===S.type&&!n&&("generic"===S.valuesType||"actual"===S.valuesType&&S.onlyActuals)?l.default.createElement(c.Cell,{cellClickHandler:function(e){return f(S,"collapse-icon-cell",e)},className:"collapse-icon-cell"},m.includes(S.location)?d.Icons.CHEVRON_DOWN:d.Icons.CHEVRON_UP):"region"===S.type&&"generic"===S.valuesType&&n?l.default.createElement(c.Cell,{className:"multiediting-checkbox-cell"},y(o,T,O,A)):"country"===S.type&&"generic"===S.valuesType&&n?l.default.createElement(c.Cell,{className:"multiediting-checkbox-cell"},y(o,T,O)):"country"===S.type&&I&&R&&!w?l.default.createElement(c.Cell,{className:(0,u.default)("event-icon-cell",{"region-view":S.isRegionCountry})},l.default.createElement(p.default,{mouseEnterDelay:.3,overlayClassName:"planning-table__events-tooltip",align:{offset:[0,-4]},overlay:l.default.createElement("span",null,"View events")},l.default.createElement("span",{onClick:v,"data-loc":O,"data-region":T},C))):"country"===S.type&&"generic"===S.valuesType&&w?l.default.createElement(c.Cell,{className:"event-icon-cell"},l.default.createElement(_.default,{canBeIgnored:S.canBeIgnored})):l.default.createElement(c.Cell,null)};g.propTypes={scenarioData:o.default.array.isRequired,rowIndex:o.default.number,isMultiEditing:o.default.bool,onMultiCheck:o.default.func.isRequired,data:o.default.array.isRequired,multiRegionsData:o.default.object,isAdjusted:o.default.bool,cellClickHandler:o.default.func.isRequired,collapsed:o.default.array.isRequired,onToggleEvents:o.default.func.isRequired},g.defaultProps={rowIndex:-1,isMultiEditing:!1,multiRegionsData:{},isAdjusted:!1},t.default=g},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(10),c=n(d),f=a(12),p=function(e){var t=e.rowData,a=e.isTracking,n=e.lpftView,r=e.isOverallocated;return l.default.createElement(f.CellGroup,{direction:"row",className:(0,u.default)("data-group active",{tracking:a})},l.default.createElement(f.Cell,{width:"20%",className:(0,u.default)("actual","value-cell",{empty:!t.values.fpfv,ignored:t.ignore_aggregation})},l.default.createElement("div",null,t.values.fpfv?(0,c.default)(t.values.fpfv).format("D MMM YY"):" ")),l.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("actual","value-cell",{empty:!t.values.fpfv_lpfv,ignored:t.ignore_aggregation})},l.default.createElement("div",null,t.values.fpfv_lpfv?t.values.fpfv_lpfv+"d":"")),l.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("align--right","actual","value-cell",{empty:!t.values.sr,ignored:t.ignore_aggregation})},l.default.createElement("div",null,t.values.sr?parseFloat(t.values.sr).toFixed(2):" ")),l.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("align--right","actual","value-cell",{empty:!t.values.screening_failure&&0!==t.values.screening_failure,ignored:t.ignore_aggregation})},l.default.createElement("div",null,t.values.screening_failure||0===t.values.screening_failure?Math.round(100*t.values.screening_failure)+"%":" ")),l.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("align--right","actual","value-cell",{empty:!t.values.randomisation_rate,ignored:t.ignore_aggregation})},l.default.createElement("div",null,t.values.randomisation_rate?t.values.randomisation_rate:" ")),l.default.createElement(f.Cell,{width:"20%",className:(0,u.default)("lpft-cell","value-cell",{empty:!t.values.lpft,ignored:t.ignore_aggregation,actual:n||null===t.values.lpftDiff,forecast:n&&t.values.lpft&&t.values.actual_date&&t.values.lpft.isAfter(t.values.actual_date),"bg-green":!n&&null!==t.values.lpftDiff&&t.values.lpftDiff>=0&&!r,"bg-red":!n&&t.values.lpftDiff&&t.values.lpftDiff<0&&!r,"bg-grey":!n&&0!==t.values.lpftDiff&&r})},n?l.default.createElement("div",{className:(0,u.default)({ignored:t.ignore_aggregation},{"color-grey":0!==t.values.lpftDiff&&r},{"color-green":t.values.lpftDiff>=0&&!r},{"color-red":t.values.lpftDiff&&t.values.lpftDiff<0&&!r})},t.values.lpft&&c.default.isMoment(t.values.lpft)?t.values.lpft.format("DD MMM YY"):""):l.default.createElement("div",{className:"color-white"},t.values.lpftDiff&&t.values.lpftDiff>0?"-"+t.values.lpftDiff+"d":" ",t.values.lpftDiff&&t.values.lpftDiff<0?"+"+-1*t.values.lpftDiff+"d":" ",0===t.values.lpftDiff?t.values.lpftDiff+"d":" ")))};p.propTypes={rowData:o.default.object,isTracking:o.default.bool,lpftView:o.default.bool,isOverallocated:o.default.bool},p.defaultProps={rowData:null,isTracking:!1,lpftView:!0,isOverallocated:!1},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(10),c=n(d),f=a(12),p=function(e){var t=e.rowData,a=e.isTracking,n=e.lpftView,r=e.isOverallocated,i=e.endDate,o=a&&"adjusted"===t.valuesType?t.planned_lpft:i,s=t.values.lpft&&o?t.values.lpft.diff(o,"days"):null;return l.default.createElement(f.CellGroup,{direction:"row",className:(0,u.default)("data-group active",{tracking:!0})},l.default.createElement(f.Cell,{width:"20%",className:(0,u.default)("overallocated","value-cell",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.fpfv,ignored:t.ignore_aggregation})},l.default.createElement("div",null,t.values.fpfv?(0,c.default)(t.values.fpfv).format("D MMM YY"):" ")),l.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("overallocated","value-cell",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.fpfv_lpfv,ignored:t.ignore_aggregation})},l.default.createElement("div",null,t.values.fpfv_lpfv?t.values.fpfv_lpfv+"d":"")),l.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("align--right","overallocated","value-cell",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.sr,ignored:t.ignore_aggregation})},l.default.createElement("div",null,t.values.sr?parseFloat(t.values.sr).toFixed(2):" ")),l.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("align--right","overallocated","value-cell",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.screening_failure&&0!==t.values.screening_failure,ignored:t.ignore_aggregation})},l.default.createElement("div",null,t.values.screening_failure||0===t.values.screening_failure?Math.round(100*t.values.screening_failure)+"%":" ")),l.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("align--right","overallocated","value-cell",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.randomisation_rate,ignored:t.ignore_aggregation})},l.default.createElement("div",null,t.values.randomisation_rate?t.values.randomisation_rate:" ")),l.default.createElement(f.Cell,{width:"20%",className:(0,u.default)("lpft-cell","value-cell",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.lpft,ignored:t.ignore_aggregation,overallocated:n||null===t.values.lpftDiff,forecast:n&&t.values.lpft&&t.values.actual_date&&t.values.lpft.isAfter(t.values.actual_date),"bg-green":!n&&s<=0&&!r,"bg-red":!n&&s>0&&!r,"bg-grey":!n&&0!==s&&r})},n?l.default.createElement("div",{className:(0,u.default)({ignored:t.ignore_aggregation},{"color-grey":0!==t.values.lpftDiff&&r},{"color-green":s<=0},{"color-red":s>0})},t.values.lpft&&c.default.isMoment(t.values.lpft)?t.values.lpft.format("DD MMM YY"):""):l.default.createElement("div",{className:"color-white"},s<=0?s+"d":" ",s>0?"+"+s+"d":" ",0===s?s+"d":" ")))};p.propTypes={rowData:o.default.object,isTracking:o.default.bool,lpftView:o.default.bool,isOverallocated:o.default.bool,endDate:o.default.object},p.defaultProps={rowData:null,isTracking:!1,lpftView:!0,isOverallocated:!1,endDate:null},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),i=n(l),o=a(1),s=n(o),u=a(10),d=n(u),c=a(2),f=n(c),p=a(12),m=a(968),h=n(m),v=a(962),_=n(v),E=a(963),g=n(E),y=a(966),S=n(y),b=a(970),C=n(b),O=a(969),T=n(O),R=a(113),w=n(R),A=a(87),I=function(e){var t=e.rowIndex,a=e.data,n=e.onFocusCountry,l=e.onDataChange,o=e.cellClickHandler,s=e.startDate,u=e.endDate,c=e.editingCountry,m=e.historicalEnabled,v=e.historicalFilter,E=e.isAdjusted,y=e.isApproved,b=e.isPrevApproved,O=e.isTracking,R=e.lpftView,A=e.isEditable,I=e.regionsData,N=e.activeRowValidationState,D=e.onMultiEditingApply,P=e.batchUpdate,L=e.fromPrevApproved,M=e.isExactCopy,x=e.multiEditType,k=r({},a[t]),j=void 0!==k.actual_overallocation&&0!==k.actual_overallocation,F="adjusted"===k.valuesType,U="generic"===k.valuesType&&(y||E),V=F?"adjusted_":"",B=k[V+"errorMessages"]||{},H=c===k.country_id,G=H?void 0:"D MMM YY",Y=A&&!U&&!k.ignore_aggregation&&(!c||c===k.country_id||a.every(function(e){return!e.values.invalids||e.values.invalids&&0===e.values.invalids.length})),q="multiediting"===k.type,z="historical_reference_data_by_"+v.toLowerCase(),W=!Object.keys(I).length,K=void 0;q&&(k.unlock?Object.values(k.unlock).forEach(function(e){e&&(K=!0)}):Object.keys(k.values).filter(function(e){return"type"!==e&&"location"!==e&&"events"!==e}).forEach(function(e){var t=k.values[e];null!==t&&""!==t&&void 0!==t&&(K=!0)}));var X=function(e){var t=k.values.fsiv||s;return e.isSameOrAfter(t)&&e.isSameOrAfter(s.clone().add(1,"d"))},Z={isAdjusted:E,isTracking:O,isEditable:Y,isMultiediting:q,isApproved:y,isPrevApproved:b,rowData:k,historicalEnabled:m,historicalDataKey:z,dataPrefix:V,adjustedRow:F,cellClickHandler:o,onFocusCountry:n,onDataChange:l,isEditing:H,activeRowValidationState:N,today:(0,d.default)(),fromPrevApproved:L,isExactCopy:M,multiEditType:x},J=i.default.createElement(p.CellGroup,{direction:"row",className:(0,f.default)("data-group active",{tracking:O&&!F,adjusted:F})},i.default.createElement(S.default,r({},Z,{tooltip:B.fpfv,datePickerFormat:G,filterDate:X,startDate:s})),i.default.createElement(p.Cell,{width:"22%",className:(0,f.default)("value-cell","fpfv_lpfv",{approved:(y&&O||E&&!L)&&!F,dimmed:m,ignored:k.ignore_aggregation,generated:k.generatedFields&&k.generatedFields.includes("fpfv_lpfv")})},i.default.createElement(w.default,{key:1,isNotEmpty:k.values.fpfv_lpfv&&k.values.fpfv_lpfv>=0,generatedFields:k.generatedFields,cellName:"fpfv_lpfv"}),i.default.createElement("div",{key:2},k.values.fpfv_lpfv?k.values.fpfv_lpfv+"d":"")),i.default.createElement(p.Cell,{width:"12%",className:(0,f.default)("align--right","value-cell","sr",{approved:(y&&O||E&&!L)&&!F,dimmed:m,ignored:k.ignore_aggregation,generated:k.generatedFields&&k.generatedFields.includes("sr")})},i.default.createElement(w.default,{key:1,isNotEmpty:k.values.sr&&k.values.sr>=0,generatedFields:k.generatedFields,cellName:"sr"}),i.default.createElement("div",null,k.values.sr?parseFloat(k.values.sr).toFixed(2):" ")),i.default.createElement(C.default,r({tooltip:B.screening_failure},Z)),i.default.createElement(T.default,r({tooltip:B.randomisation_rate},Z)),q?i.default.createElement(p.Cell,{width:"20%",className:"apply-button-cell"},i.default.createElement("div",{className:(0,f.default)("apply-button",{disabled:W||!K}),onClick:!W&&K?D:void 0},"Apply")):i.default.createElement(h.default,{fromPrevApproved:L,historicalEnabled:m,startDate:s,onChange:l,batchUpdate:P,scenarioEndDate:u,lpftViewType:R,adjustedRow:F,isAdjusted:E,isApproved:y,isTracking:O,generated:k.generatedFields&&k.generatedFields.includes("lpft"),isEditable:Y&&"country"===k.type,data:k}));return i.default.createElement(p.CellGroup,{direction:"column"},"generic"===k.valuesType&&J,"generic_overallocated"===k.valuesType&&i.default.createElement(g.default,{endDate:u,rowData:k,isTracking:O,isOverallocated:j,lpftView:R}),"actual"===k.valuesType&&i.default.createElement(_.default,{rowData:k,isTracking:O,isOverallocated:j,lpftView:R}),"adjusted"===k.valuesType&&J,"adjusted_overallocated"===k.valuesType&&i.default.createElement(g.default,{endDate:u,rowData:k,isTracking:O,isOverallocated:j,lpftView:R}))};I.displayName="EnrolmentDataCell",I.defaultProps={rowIndex:-1,editingCountry:null,isEditable:!1,dirtyData:{},lpftView:!0,isAdjusted:!1,isApproved:!1,isPrevApproved:!1,isTracking:!1,historicalEnabled:!1,historicalFilter:A.FILTER_BY.STUDIES,regionsData:null,endDate:null,activeRowValidationState:{},fromPrevApproved:!1,isExactCopy:!1,multiEditType:"edit"},I.propTypes={rowIndex:s.default.number,data:s.default.array.isRequired,onFocusCountry:s.default.func.isRequired,onDataChange:s.default.func.isRequired,startDate:s.default.object.isRequired,endDate:s.default.object,editingCountry:s.default.oneOfType([s.default.string,s.default.number]),isEditable:s.default.bool,lpftView:s.default.bool,isAdjusted:s.default.bool,isApproved:s.default.bool,isPrevApproved:s.default.bool,isTracking:s.default.bool,historicalEnabled:s.default.bool,historicalFilter:s.default.oneOf(Object.keys(A.FILTER_BY)),cellClickHandler:s.default.func.isRequired,regionsData:s.default.object,onMultiEditingApply:s.default.func.isRequired,batchUpdate:s.default.func.isRequired,activeRowValidationState:s.default.object,fromPrevApproved:s.default.bool,isExactCopy:s.default.bool,multiEditType:s.default.string},t.default=I},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(12),u=a(13),d=n(u),c=function(e){var t=e.caption,a=e.lpftView,n=e.lpftViewTypeToggle;return l.default.createElement(s.CellGroup,null,l.default.createElement(s.Cell,{className:"cell-caption"},l.default.createElement("h3",null,t)),l.default.createElement(s.CellGroup,{direction:"row",className:"header-group"},l.default.createElement(s.Cell,{width:"20%",className:"header-cell align--left"},l.default.createElement("div",null,"FPFV")),l.default.createElement(s.Cell,{width:"22%",className:"header-cell align--left"},l.default.createElement("div",null,"FPFV-LPFV")),l.default.createElement(s.Cell,{width:"12%",className:"header-cell align--right"},l.default.createElement(d.default,{align:{offset:[10,0]},mouseEnterDelay:.3,overlayClassName:"scenario-table__lpft-tooltip",overlay:l.default.createElement("span",null,"patients/site/month")},l.default.createElement("div",null,"SR"))),l.default.createElement(s.Cell,{width:"12%",className:"header-cell align--right"},l.default.createElement("div",null,"SF%")),l.default.createElement(s.Cell,{width:"12%",className:"header-cell align--right"},l.default.createElement(d.default,{align:{offset:[10,0]},mouseEnterDelay:.3,overlayClassName:"scenario-table__lpft-tooltip",overlay:l.default.createElement("span",null,"patients/site/month")},l.default.createElement("div",null,"RR"))),l.default.createElement(s.Cell,{width:"20%",className:"header-cell align--left"},l.default.createElement(d.default,{mouseEnterDelay:.3,overlayClassName:"scenario-table__lpft-tooltip",overlay:l.default.createElement("span",{onClick:function(){return n()}},"P/LPFT - ",a?"Days":"Date")},l.default.createElement("span",{className:"lpft-header-cell__title"},"P/LPFT")))))};c.propTypes={caption:o.default.string.isRequired,lpftView:o.default.bool.isRequired,lpftViewTypeToggle:o.default.func.isRequired},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(10),c=n(d),f=a(12),p=a(99),m=n(p),h=a(127),v=n(h),_=a(113),E=n(_),g=a(126),y=n(g),S=a(14),b=a(7),C=a(64),O=function(e){var t=e.rowData,a=e.isTracking,n=e.cellClickHandler,r=e.isApproved,i=e.isAdjusted,o=e.adjustedRow,s=e.isEditable,d=e.historicalEnabled,p=e.historicalDataKey,h=e.isMultiediting,_=e.onFocusCountry,g=e.startDate,O=e.datePickerFormat,T=e.onDataChange,R=e.dataPrefix,w=e.filterDate,A=e.activeRowValidationState,I=e.tooltip,N=e.today,D=e.fromPrevApproved,P=e.isExactCopy,L=e.multiEditType,M=(0,b.isCellDimmed)(S.ENROLMENT_TABLE_FIELDS_LIST.FPFV,t,p,d),x=function(){return t.values.fsiv?t.values.fsiv.clone().add(1,"w"):g.clone().add(1,"w")};return l.default.createElement(f.Cell,{width:"20%",cellClickHandler:function(e){return n(t,"fpfv",e)},className:(0,u.default)("value-cell",{overridden:(0,C.isOverriden)(t[R+"overrideList"],t[R+"unlock"],a,i,o,t.values.fpfv,"fpfv"),approved:(r&&a||i&&!D)&&!o,editable:"country"===t.type&&s,historical:d,dimmed:M,ignored:t.ignore_aggregation,generated:t.generatedFields&&t.generatedFields.includes("fpfv")},{"multiediting-cell":h&&"edit"===L})},"country"===t.type&&s&&l.default.createElement("div",null,l.default.createElement(m.default,{tooltip:I,simpleView:!0,onFocus:function(e){return _(e,t.country_id)},fixedHeight:!0,defaultDate:x(),filterDate:w,dateFormat:O,disabledKeyboardNavigation:!0,disabled:!P&&i&&t.values.fpfv&&t.values.fpfv.isBefore(N)&&null!==t.actual_fpfv&&t.actual_fpfv.isSame(t.values.fpfv),onChange:function(e,a){return T(t.country_id,R+"fpfv",a,null,t.values.fpfv)},status:t.values.invalids&&t.values.invalids.includes("fpfv")||t.invalidFields&&t.invalidFields.includes("fpfv")?"error":"success",validators:[function(e){return c.default.isMoment(e)}],selected:c.default.isMoment(t.values.fpfv)?t.values.fpfv:null})),h&&"unlock"===L&&l.default.createElement(f.Cell,{className:"flex-1-5 multiediting-cell unlock"},l.default.createElement(y.default,{type:S.ENROLMENT_TABLE_FIELDS_LIST.FPFV,unlock:t.unlock,onChange:T})),h&&"edit"===L&&l.default.createElement(v.default,{key:"multiediting_"+S.ENROLMENT_TABLE_FIELDS_LIST.FPFV,onChange:function(e){return T(null,S.ENROLMENT_TABLE_FIELDS_LIST.FPFV,e,"multiediting")},isValid:A[S.ENROLMENT_TABLE_FIELDS_LIST.FPFV],value:t.values.fpfv||null,type:"date",defaultDate:x(),filterDate:w,isEditMode:!0}),("country"!==t.type||!s)&&!h&&[l.default.createElement(E.default,{key:1,isNotEmpty:null!==t.values.fpfv&&void 0!==t.values.fpfv,generatedFields:t.generatedFields,cellName:S.ENROLMENT_TABLE_FIELDS_LIST.FPFV}),l.default.createElement("div",{key:2,className:(0,u.default)("cell-renderer-not-editable-view",{error:t.values.invalids&&t.values.invalids.includes(S.ENROLMENT_TABLE_FIELDS_LIST.FPFV)||t.invalidFields&&t.invalidFields.includes(S.ENROLMENT_TABLE_FIELDS_LIST.FPFV)})},t.values.fpfv?t.values.fpfv.format("D MMM YY"):" ")])};O.propTypes={cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,startDate:o.default.object.isRequired,datePickerFormat:o.default.string,filterDate:o.default.func.isRequired,activeRowValidationState:o.default.object,tooltip:o.default.string,today:o.default.object,fromPrevApproved:o.default.bool,isExactCopy:o.default.bool,multiEditType:o.default.string},O.defaultProps={rowData:null,isMultiediting:!1,isEditable:!1,isEditing:!1,dataPrefix:"",isApproved:!1,isPrevApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",datePickerFormat:void 0,activeRowValidationState:{},tooltip:null,today:(0,c.default)(),fromPrevApproved:!1,isExactCopy:!1,multiEditType:"edit"},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EnrolmentDataCell=t.EnrolmentHeaderCell=void 0;var r=a(965),l=n(r),i=a(964),o=n(i);t.EnrolmentHeaderCell=l.default,t.EnrolmentDataCell=o.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(50),p=n(f),m=a(2),h=n(m),v=a(10),_=n(v),E=a(12),g=a(13),y=n(g),S=a(99),b=n(S),C=a(214),O=n(C),T=a(495),R=n(T),w=a(113),A=n(w),I=a(37),N=a(1247),D=n(N),P=a(7),L=a(39),M=a(14),x=.25,k=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.worker=null,a.state={calculating:!1,calculationProgress:x,calculationStatus:void 0,clicked:0,calculationError:!1},a.handleLpftSelect=a.handleLpftSelect.bind(a),a.handleClicked=a.handleClicked.bind(a),a.handleOutsideClick=a.handleOutsideClick.bind(a),a.handleCalculationsAbort=a.handleCalculationsAbort.bind(a),a}return i(t,e),o(t,null,[{key:"handleCheckBoxAction",value:function(){(0,I.addToStorage)("fpo-warnings",{id:"lpft",lpftDescription:!1})}}]),o(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=this.props,n=a.lpftViewType,r=a.data,l=a.historicalEnabled,i=a.isEditable,o=this.state,s=o.clicked,u=o.calculating,d=o.calculationProgress,c=o.calculationStatus,f=o.calculationError;return e.lpftViewType!==n||!(0,p.default)(e.data,r)||e.historicalEnabled!==l||e.isEditable!==i||t.clicked!==s||t.calculating!==u||t.calculationProgress!==d||t.calculationStatus!==c||t.calculationError!==f||t.clicked>0}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleOutsideClick)}},{key:"handleLpftSelect",value:function(e,t,a){var n=this,r=this.props,l=r.startDate,i=r.scenarioEndDate,o=r.isAdjusted,s=M.WORKER_MESSAGE_TYPES.IN_PROGRESS,u=M.WORKER_MESSAGE_TYPES.COMPLETED;this.worker=new D.default,this.worker.postMessage({startDate:l.toDate(),scenarioEndDate:i&&i.toDate(),isAdjusted:o,selectedLpft:e.toDate(),countryId:t,rowData:JSON.stringify(a)}),this.worker.onmessage=function(e){var a=e.data,r=a.value,l=a.type;if(l===s||l===u)n.setState({calculationProgress:r.calculationProgress,calculationStatus:l});else{var i=r;n.worker.terminate();var o=n.props.adjustedRow?"adjusted_":"";i?n.setState({calculating:!1,calculationProgress:x,calculationStatus:void 0},function(){n.props.batchUpdate(t,[{name:o+"randomisation_rate",value:i.rr,isValid:!0},{name:o+"patient_allocation",value:i.patients,isValid:!0},{name:o+"num_sites",value:i.sites,isValid:!0}])}):n.setState({calculating:!1,calculationProgress:x,calculationStatus:void 0,calculationError:!0})}}}},{key:"handleClicked",value:function(){document.addEventListener("click",this.handleOutsideClick),this.props.isEditable&&this.state.clicked<=1&&this.setState({clicked:this.state.clicked+=1})}},{key:"handleOutsideClick",value:function(e){var t=this;e.target.closest(".lpft-cell-"+this.props.data.override_id)||e.target.closest(".lpft-description-tooltip")||this.setState({clicked:0},function(){document.removeEventListener("click",t.handleOutsideClick)})}},{key:"handleCalculationsAbort",value:function(){this.worker.terminate(),this.setState({calculating:!1,calculationProgress:x,calculationStatus:void 0})}},{key:"render",value:function(){var e=this,a=this.props,n=a.lpftViewType,r=a.data,l=a.historicalEnabled,i=a.scenarioEndDate,o=a.startDate,s=a.isEditable,d=a.isTracking,c=a.isAdjusted,f=a.isApproved,p=a.adjustedRow,m=a.generated,v=a.fromPrevApproved,g=(0,I.getParamItemStorage)("fpo-warnings","lpft","lpftDescription"),S=null===g||g,C=c&&"adjusted"===r.valuesType?r.planned_lpft:i,T=r.values.lpft&&C?r.values.lpft.diff(C,"days"):null,w=this.state,N=w.calculationError,D=w.calculating,x=w.calculationProgress,k=w.calculationStatus,j={width:x+"%"};if(k===M.WORKER_MESSAGE_TYPES.COMPLETED){var F=100-x;j={width:"100%",transition:"width "+25*F+"ms steps("+F+", start)"}}var U=function(e){var t=r.values.fpfv,a=r.values.fpfv_fpft,n=!0;if(p&&r&&r.actualTimeseriesSnapshot&&r.actualTimeseriesSnapshot.actual_date){var l=(0,P.getMomentDate)(r.actualTimeseriesSnapshot.actual_date);n=l&&e>l}return e>=o&&e>=t.clone().add(a+1,"d")&&n},V=function(){return r.values.lpft?d&&"generic"===r.valuesType?[u.default.createElement(A.default,{key:1,isNotEmpty:null!==r.values.lpft&&void 0!==r.values.lpft,generatedFields:r.generatedFields,cellName:"lpft"}),u.default.createElement("div",{key:2},r.values.lpft.format("D MMM YY"))]:n?u.default.createElement("div",{onClick:e.handleClicked},e.state.clicked>=1&&s?u.default.createElement("div",null,u.default.createElement(b.default,{popperPlacement:"top-end",simpleView:!0,fixedHeight:!0,filterDate:U,disabledKeyboardNavigation:!0,onChange:function(t){e.setState({clicked:0,calculating:!0},function(){e.handleLpftSelect(t,r.country_id,r.values,r.ignoreGenericData)})},selected:r.values.lpft})):u.default.createElement("div",{className:(0,h.default)({ignored:r.ignore_aggregation},{"color-green":T<=0&&!r.hasOverallocation},{"color-red":T>0&&!r.hasOverallocation})},r.values.lpft&&_.default.isMoment(r.values.lpft)?r.values.lpft.format("DD MMM YY"):"")):u.default.createElement("div",{className:"color-white"},T>0?"+"+T+"d":T+"d"):u.default.createElement("div",null)};return u.default.createElement(E.Cell,{width:"20%",className:(0,h.default)("value-cell","lpft-cell","lpft-cell-"+r.override_id,{editable:this.state.clicked,approved:(f&&d||c&&!v)&&!p,empty:!r.values.lpft,dimmed:l,ignored:r.ignore_aggregation,"bg-red":!n&&T&&T>0,"bg-green":!n&&null!==T&&T<=0,generated:m})},u.default.createElement("div",{style:{whiteSpace:"inherit",textOverflow:"inherit",overflow:"inherit"}},function(){return r.ignore_aggregation&&p?u.default.createElement("div",null,"CANCELLED"):"country"===r.type&&n&&s?u.default.createElement(y.default,{overlayClassName:"lpft-description-tooltip",align:{offset:[0,10]},placement:"bottomRight",visible:1===e.state.clicked&&S,overlay:u.default.createElement("div",null,u.default.createElement("div",{className:"lpft-description"},"When editing P/LPFT, you are setting a ",u.default.createElement("br",null)," user constraint on RR, Patients and Sites"),u.default.createElement(R.default,{label:"Don't show me again",onChange:t.handleCheckBoxAction,checked:!S}))},u.default.createElement("div",{style:e.state.clicked?null:{paddingBottom:"2px"}},V())):V()}(),u.default.createElement(O.default,{isShown:!1!==N,status:"error",title:"Failed to calculate",handleClose:function(){return e.setState({calculationError:!1})}},"Failed to calculate required randomisation rate value using provided data"),u.default.createElement(L.PopupDialog,{title:"P/LPFT reverse calculation",isShown:D,handleClose:this.handleCalculationsAbort,buttons:[u.default.createElement(L.ActionButton,{action:this.handleCalculationsAbort,primary:!0},"Cancel")]},u.default.createElement("div",{className:"unsaved-changes-dialog-content"},"Calculation in progress, please wait",u.default.createElement("div",{className:"bar-loader"},u.default.createElement("div",{className:"bar-loader__bar",style:j}))))))}}]),t}(s.Component);k.defaultProps={data:{},lpftViewType:!0,historicalEnabled:!1,isTracking:!1,isApproved:!1,isAdjusted:!1,adjustedRow:!1,isEditable:!0,generated:!1,scenarioEndDate:null,fromPrevApproved:!1},k.propTypes={data:c.default.object,startDate:c.default.object.isRequired,scenarioEndDate:c.default.object,lpftViewType:c.default.bool,historicalEnabled:c.default.bool,batchUpdate:c.default.func.isRequired,isTracking:c.default.bool,isAdjusted:c.default.bool,isApproved:c.default.bool,adjustedRow:c.default.bool,isEditable:c.default.bool,generated:c.default.bool,fromPrevApproved:c.default.bool},t.default=k},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(124),c=n(d),f=a(12),p=a(23),m=n(p),h=a(127),v=n(h),_=a(13),E=n(_),g=a(113),y=n(g),S=a(126),b=n(S),C=a(63),O=n(C),T=a(14),R=a(7),w=a(64),A=function(e){var t=e.cellClickHandler,a=e.onFocusCountry,n=e.onDataChange,r=e.rowData,i=e.isMultiediting,o=e.isEditable,s=e.isEditing,d=e.dataPrefix,p=e.isApproved,h=e.isAdjusted,_=e.adjustedRow,g=e.isTracking,S=e.historicalEnabled,C=e.historicalDataKey,A=e.activeRowValidationState,I=e.tooltip,N=e.fromPrevApproved,D=e.multiEditType,P=null,L=(0,R.isCellDimmed)(T.ENROLMENT_TABLE_FIELDS_LIST.RANDOMISATION_RATE,r,C,S);return"country"===r.type&&o||i?"country"===r.type&&o&&s&&!i?(P=l.default.createElement("div",null,l.default.createElement(m.default,{onKeyDown:function(e){"Escape"!==e.key&&"Enter"!==e.key||e.target.blur()},onFocus:function(e){return a(e,r.country_id)},onBlur:function(e,t){+t.value!=+r.values.randomisation_rate&&n(r.country_id,d+"randomisation_rate",t,null,r.values.randomisation_rate)},narrow:!0,status:r.values.invalids&&r.values.invalids.includes("randomisation_rate")||r.invalidFields&&r.invalidFields.includes("randomisation_rate")?"error":null,type:"text",value:r.values.randomisation_rate||0===r.values.randomisation_rate?r.values.randomisation_rate:"",validators:[function(e){return""===e||c.default.isFloat(e,{min:0,max:999})}],withoutBorder:!0,textAlign:"right",placeholder:""})),I&&(P=l.default.createElement(E.default,{mouseEnterDelay:.3,placement:"bottom",overlayClassName:"fpo-sidebar-button__tooltip",overlay:I},P))):"country"!==r.type||!o||s||i?i&&(P="unlock"===D?l.default.createElement(f.Cell,{className:"flex-col-12 multiediting-cell align--right unlock"},l.default.createElement(b.default,{type:T.ENROLMENT_TABLE_FIELDS_LIST.RANDOMISATION_RATE,unlock:r.unlock,onChange:n})):l.default.createElement(v.default,{key:"multiediting_"+T.ENROLMENT_TABLE_FIELDS_LIST.RANDOMISATION_RATE,value:r.values.randomisation_rate||"",onChange:function(e){return n(null,T.ENROLMENT_TABLE_FIELDS_LIST.RANDOMISATION_RATE,e,"multiediting")},type:"text",validators:[function(e){return""===e||c.default.isFloat(e,{min:0,max:999})}],isValid:A[T.ENROLMENT_TABLE_FIELDS_LIST.RANDOMISATION_RATE]&&!(r.invalidFields&&r.invalidFields.includes(T.ENROLMENT_TABLE_FIELDS_LIST.RANDOMISATION_RATE)),isEditMode:!0})):P=l.default.createElement("div",null,l.default.createElement(m.default,{onFocus:function(e){return a(e,r.country_id)},narrow:!0,status:r.values.invalids&&r.values.invalids.includes("randomisation_rate")||r.invalidFields&&r.invalidFields.includes("randomisation_rate")?"error":null,value:(0,O.default)(r.values.randomisation_rate)||"",withoutBorder:!0,textAlign:"right",placeholder:""})):P=[l.default.createElement(y.default,{key:1,isNotEmpty:null!==r.values.randomisation_rate&&void 0!==r.values.randomisation_rate,generatedFields:r.generatedFields,cellName:"randomisation_rate"}),l.default.createElement("div",{key:2},r.values.randomisation_rate?(0,O.default)(r.values.randomisation_rate):"")],l.default.createElement(f.Cell,{width:"12%",cellClickHandler:function(e){return t(r,"randomisation_rate",e)},className:(0,u.default)("value-cell","align--right",{overridden:(0,w.isOverriden)(r[d+"overrideList"],r[d+"unlock"],g,h,_,r.values.randomisation_rate,"randomisation_rate"),approved:(p&&g||h&&!N)&&!_,editable:"country"===r.type&&o,historical:S,dimmed:L,ignored:r.ignore_aggregation,generated:r.generatedFields&&r.generatedFields.includes("randomisation_rate"),"multiediting-cell":i&&"edit"===D})},P)};A.propTypes={cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,isEditing:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,activeRowValidationState:o.default.object,tooltip:o.default.string,fromPrevApproved:o.default.bool,multiEditType:o.default.string},A.defaultProps={rowData:null,isMultiediting:!1,isEditable:!1,isEditing:!1,dataPrefix:"",isApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",activeRowValidationState:{},tooltip:null,fromPrevApproved:!1,multiEditType:"edit"},t.default=A},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(12),c=a(23),f=n(c),p=a(127),m=n(p),h=a(13),v=n(h),_=a(113),E=n(_),g=a(126),y=n(g),S=a(14),b=a(7),C=a(64),O=function(e){var t=e.rowData,a=e.isTracking,n=e.cellClickHandler,r=e.isApproved,i=e.isAdjusted,o=e.adjustedRow,s=e.isEditable,c=e.historicalEnabled,p=e.historicalDataKey,h=e.isMultiediting,_=e.onFocusCountry,g=e.isEditing,O=e.onDataChange,T=e.dataPrefix,R=e.activeRowValidationState,w=e.tooltip,A=e.fromPrevApproved,I=e.multiEditType,N=!(t.values.invalids&&t.values.invalids.includes("screening_failure")),D=(0,b.isCellDimmed)(S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE,t,p,c),P=function(){return null!==t.values.screening_failure&&void 0!==t.values.screening_failure&&""!==t.values.screening_failure&&N?g||h?""+Math.round(100*t.values.screening_failure):Math.round(100*t.values.screening_failure)+"%":null!==t.values.screening_failure&&void 0!==t.values.screening_failure?t.values.screening_failure:""},L=null;return"country"===t.type&&s?(L=l.default.createElement("div",null,l.default.createElement(f.default,{onKeyDown:function(e){"Escape"!==e.key&&"Enter"!==e.key||e.target.blur()},onFocus:function(e){return _(e,t.country_id)},onBlur:function(e,a){var n=a.isValid&&""!==a.value?{value:parseInt(a.value,10)/100,isValid:!0}:a;(+n.value!=+t.values.screening_failure||null===t.values.screening_failure&&""!==n.value||0===t.values.screening_failure&&""===n.value)&&O(t.country_id,T+"screening_failure",n,null,t.values.screening_failure)},type:"text",status:!N||t.invalidFields&&t.invalidFields.includes("screening_failure")?"error":null,value:P(),validators:[function(e){return""===e||e.match(/^(?:\b|-)([0-9]{1,2}[0]?|99)\b%{0,1}$/)},function(e){return""===e||e>=0&&e<=99}],textAlign:"right",placeholder:"",withoutBorder:!0,narrow:!0})),w&&(L=l.default.createElement(v.default,{mouseEnterDelay:.3,placement:"bottom",overlayClassName:"fpo-sidebar-button__tooltip",overlay:w},L))):h?L="unlock"===I?l.default.createElement(d.Cell,{className:"flex-col-12 multiediting-cell align--right unlock"},l.default.createElement(y.default,{type:S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE,unlock:t.unlock,onChange:O})):l.default.createElement(m.default,{key:"multiediting_"+S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE,value:P(),onChange:function(e){var t=""!==e?e.replace(/%$/,"")/100:"";O(null,S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE,t,"multiediting")},type:"text",validators:[function(e){return""===e||e.match(/^(?:\b|-)([0-9]{1,2}[0]?|99)\b%{0,1}$/)},function(e){return""===e||e>=0&&e<=99}],isValid:R[S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE]&&!(t.invalidFields&&t.invalidFields.includes(S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE)),isEditMode:!0}):"country"===t.type&&s||h||(L=[l.default.createElement(E.default,{key:1,isNotEmpty:null!==t.values.screening_failure&&void 0!==t.values.screening_failure,generatedFields:t.generatedFields,cellName:S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE}),l.default.createElement("div",{key:2,className:(0,u.default)("cell-renderer-not-editable-view",{error:!N||t.invalidFields&&t.invalidFields.includes(S.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE)})},P())]),l.default.createElement(d.Cell,{width:"12%",cellClickHandler:function(e){return n(t,"screening_failure",e)},className:(0,u.default)("value-cell","align--right",{overridden:(0,C.isOverriden)(t[T+"overrideList"],t[T+"unlock"],a,i,o,t.values.screening_failure,"screening_failure"),approved:(r&&a||i&&!A)&&!o,editable:"country"===t.type&&s,historical:c,dimmed:D,ignored:t.ignore_aggregation,generated:t.generatedFields&&t.generatedFields.includes("screening_failure")},{"multiediting-cell":h&&"edit"===I})},L)};O.propTypes={cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,isEditing:o.default.bool,activeRowValidationState:o.default.object,tooltip:o.default.string,fromPrevApproved:o.default.bool,multiEditType:o.default.string},O.defaultProps={rowData:null,isMultiediting:!1,isEditable:!1,isEditing:!1,dataPrefix:"",isApproved:!1,isPrevApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",activeRowValidationState:{},tooltip:null,fromPrevApproved:!1,multiEditType:"edit"},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),m=a(50),h=n(m),v=a(12),_=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.data[this.props.rowIndex],a=e.data[e.rowIndex];return!(0,h.default)(t,a)||e.editingCountry===a.country_id||this.props.editingCountry===t.country_id||this.props.lpftView!==e.lpftView||e.isMultiEditing||this.props.isHistoricalDataViewEnabled||this.props.isHistoricalDataViewEnabled!==e.isHistoricalDataViewEnabled||!(0,h.default)(this.props.collapsedList,e.collapsedList)||this.props.clipboardEmpty!==e.clipboardEmpty||this.props.isEditable!==e.isEditable}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.rowIndex,n=e.children,r=e.editingCountry,l=e.isEditable,i=e.isTracking,o=e.isAdjusted,s=e.isMultiEditing,d=t[a];return u.default.createElement(v.Row,{className:(0,p.default)({tracking:i&&("actual"===d.valuesType||"generic"===d.valuesType&&o||"generic"===d.valuesType&&!l||"generic_overallocated"===d.valuesType)},{approved:i&&"generic"===d.valuesType},{actual:i&&"actual"===d.valuesType},{rollup:"rollup"===d.type},{region:"region"===d.type},{country:"country"===d.type},{overallocated:"generic_overallocated"===d.valuesType||"adjusted_overallocated"===d.valuesType},{editing:r===d.country_id&&"actual"!==d.valuesType&&("adjusted"===d.valuesType||!o&&"generic"===d.valuesType)},{editable:l&&"actual"!==d.valuesType&&("adjusted"===d.valuesType||!o&&"generic"===d.valuesType)},{multiediting:s},{"hidden-row":"actual"!==d.valuesType&&d.onlyActuals},{"hidden-row":"generic"===d.valuesType&&d.ignoreGenericData},{"hidden-row":"adjusted"===d.valuesType&&d.ignoreAdjustedData},{"only-actuals-row":"actual"===d.valuesType&&d.onlyActuals},{"ignore-adjusted-row":("approved"===d.valuesType||"actual"===d.valuesType)&&d.ignoreAdjustedData},{"has-ignore-adjusted-row":"generic"===d.valuesType&&d.ignoreAdjustedData})},n)}}]),t}(u.default.Component);_.propTypes={children:c.default.node.isRequired,data:c.default.array.isRequired,rowIndex:c.default.number,editingCountry:c.default.oneOfType([c.default.string,c.default.number]),isEditable:c.default.bool,isTracking:c.default.bool,isAdjusted:c.default.bool,isMultiEditing:c.default.bool,lpftView:c.default.bool,isHistoricalDataViewEnabled:c.default.bool,collapsedList:c.default.array,clipboardEmpty:c.default.bool},_.defaultProps={rowIndex:-1,editingCountry:void 0,isEditable:!1,isTracking:!1,isAdjusted:!1,isMultiEditing:!1,lpftView:!0,isHistoricalDataViewEnabled:!1,collapsedList:[],clipboardEmpty:!0},t.default=_},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(971),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(11),c=n(d),f=a(6),p=a(12),m=a(13),h=n(m),v=a(357),_=n(v),E=function(e){var t=e.rowData,a=e.isIgnored,n=e.isTracking,r=e.isOverallocated;return l.default.createElement(p.Cell,{width:"50%",overflow:!0,className:(0,u.default)("location-cell actual",{tracking:n,ignored:a})},l.default.createElement("div",{className:(0,u.default)({h2:!("country"===t.type&&!t.isRegionCountry)}),style:{margin:"0 4px",display:"flex",alignItems:"center",paddingTop:"5px",justifyContent:t.onlyActuals||t.ignoreGenericData?"flex-start":"flex-end"}},l.default.createElement(l.default.Fragment,null,t.onlyActuals&&"country"===t.type&&l.default.createElement(h.default,{overlay:"Country is not included to the scenario"},l.default.createElement("div",{className:"row-control-icon--info"},f.Icons.INFO_O)),(t.onlyActuals||t.ignoreGenericData)&&l.default.createElement(l.default.Fragment,null,l.default.createElement(_.default,{showTooltip:!0,status:(0,c.default)(t,"country_sites_approval_status.status")}),"country"===t.type&&t.location+(t.isEnroled?"":"*"),"region"===t.type&&t.location,"rollup"===t.type&&l.default.createElement("div",{className:"location-name-cell__title"},"Global (",t.amount_countries,")"))),r&&l.default.createElement(h.default,{placement:"top",overlay:l.default.createElement("span",null,"Actual study data. Considers re-allocation.")},l.default.createElement("div",{className:"scenario-table__row-overallocated-icon"},t.actual_overallocation>0?f.Icons.PATIENTS_OVER_ALLOCATION:f.Icons.PATIENTS_UNDER_ALLOCATION))))};E.defaultProps={isTracking:!1,isIgnored:!1,isOverallocated:!1},E.propTypes={rowData:o.default.object.isRequired,isTracking:o.default.bool,isIgnored:o.default.bool,isOverallocated:o.default.bool},t.default=E},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(12),c=function(e){var t=e.rowData,a=e.isIgnored;return l.default.createElement(d.Cell,{width:"25%",className:(0,u.default)("align--right","actual",{empty:!t.values.patient_allocation,ignored:a},"value-cell")},l.default.createElement("div",null,t.values.patient_allocation||""))};c.defaultProps={isIgnored:!1},c.propTypes={rowData:o.default.object.isRequired,isIgnored:o.default.bool},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(12),c=function(e){var t=e.rowData,a=e.isIgnored;return l.default.createElement(d.Cell,{width:"12.5%",className:(0,u.default)("align--right","actual",{empty:!t.values.num_sites,ignored:a},"value-cell")},l.default.createElement("div",null,t.values.num_sites||""))};c.defaultProps={isIgnored:!1},c.propTypes={rowData:o.default.object.isRequired,isIgnored:o.default.bool},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(12),c=a(13),f=n(c),p=function(e){var t=e.rowData,a=e.isIgnored,n=e.isTracking,r=e.showCountryName;return l.default.createElement(d.Cell,{width:"50%",overflow:!0,className:(0,u.default)("location-cell adjusted value-cell",{tracking:n,ignored:a})},l.default.createElement("div",{className:(0,u.default)("location-name-cell",{h2:!("country"===t.type&&!t.isRegionCountry)})},r&&"country"===t.type&&t.location+(t.isEnroled?"":"*"),r&&"region"===t.type&&t.location,"",t.hasOverallocation&&l.default.createElement(f.default,{placement:"top",overlay:l.default.createElement("span",null,"Adjusted plan data with overallocation")},l.default.createElement("div",{className:"overallocated-icon__wrapper"},"O/E"))))};p.defaultProps={isTracking:!1,isIgnored:!1,showCountryName:!1},p.propTypes={rowData:o.default.object.isRequired,isTracking:o.default.bool,isIgnored:o.default.bool,showCountryName:o.default.bool},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(11),c=n(d),f=a(12),p=a(13),m=n(p),h=a(357),v=n(h),_=function(e){var t=e.rowData,a=e.isIgnored,n=e.isTracking,r=e.cellClickHandler,i=e.multiEditType,o=e.navigateToViewSites,s=e.scenario,d=e.studyId,p=e.canViewSites;return"multiediting"===t.type&&"unlock"===i?l.default.createElement(f.Cell,{width:"50%",overflow:!0,className:(0,u.default)("location-cell value-cell",{tracking:n,ignored:a})},l.default.createElement("div",{className:"flex-4-8 multiediting-cell align--right unlock unlock-hint"},l.default.createElement("div",{className:"unlock-hint__message"},"Select columns to remove user constraints"))):l.default.createElement(f.Cell,{width:"50%",overflow:!0,cellClickHandler:function(e){return r(t,"location",e.target)},className:(0,u.default)("location-cell value-cell",{tracking:n,ignored:a})},l.default.createElement("div",{className:(0,u.default)("location-name-cell",{h2:!("country"===t.type&&!t.isRegionCountry)})},"country"===t.type&&l.default.createElement("div",{className:"location-name-cell__title clickable",onClick:p&&null!==t.platform_country_id?function(){return o(d,s.id,t.platform_country_id)}:void 0},l.default.createElement(v.default,{showTooltip:!0,status:(0,c.default)(t,"country_sites_approval_status.status")}),t.location+(t.isEnroled||!n?"":"*")),"rollup"===t.type&&l.default.createElement("div",{className:"location-name-cell__title"},"Global (",t.amount_countries,")"),"region"===t.type&&l.default.createElement("div",{className:"location-name-cell__title"},t.location," (",t.amount_countries,")"),t.hasOverallocation&&l.default.createElement(m.default,{placement:"top",overlay:l.default.createElement("span",null,n?"Current Approved plan data with over-enrollment":"Enrollment parameters with over-enrollment")},l.default.createElement("div",{className:"overallocated-icon__wrapper"},"O/E"))))};_.defaultProps={isTracking:!1,isIgnored:!1,multiEditType:"edit",studyId:null,canViewSites:!0},_.propTypes={rowData:o.default.object.isRequired,cellClickHandler:o.default.func.isRequired,isTracking:o.default.bool,isIgnored:o.default.bool,multiEditType:o.default.string,scenario:o.default.object.isRequired,navigateToViewSites:o.default.func.isRequired,studyId:o.default.number,canViewSites:o.default.bool},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(6),c=a(12),f=a(13),p=n(f),m=function(e){var t=e.rowData,a=e.isIgnored,n=e.isTracking,r="generic_overallocated"===t.valuesType?"Current Approved plan data without over-enrolled patients":"Adjusted plan data without over-enrolled patients";return l.default.createElement(c.Cell,{width:"50%",overflow:!0,className:(0,u.default)("location-cell",{tracking:n,ignored:a})},l.default.createElement("div",{className:(0,u.default)("overallocated_cell",{h2:!("country"===t.type&&!t.isRegionCountry)}),style:{margin:"0 4px",display:"flex",alignItems:"center",paddingTop:"5px"}},l.default.createElement(p.default,{placement:"top",overlay:l.default.createElement("span",null,n?r:"Enrollment parameters without over-enrolled patients")},l.default.createElement("div",{className:"scenario-table__row-overallocated-icon"},d.Icons.TARGET))))};m.defaultProps={isTracking:!1,isIgnored:!1},m.propTypes={rowData:o.default.object.isRequired,isTracking:o.default.bool,isIgnored:o.default.bool},t.default=m},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(12),c=function(e){var t=e.rowData,a=e.isTracking,n=e.isIgnored;return l.default.createElement(d.Cell,{width:"25%",className:(0,u.default)("align--right","overallocated",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.patient_allocation,ignored:n},"value-cell")},l.default.createElement("div",null,t.values.patient_allocation||""))};c.defaultProps={isTracking:!1,isIgnored:!1},c.propTypes={rowData:o.default.object.isRequired,isTracking:o.default.bool,isIgnored:o.default.bool},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(12),c=function(e){var t=e.rowData,a=e.isTracking,n=e.isIgnored;return l.default.createElement(d.Cell,{width:"12.5%",className:(0,u.default)("align--right","overallocated",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.num_sites,ignored:n},"value-cell")},l.default.createElement("div",null,t.values.num_sites||""))};c.defaultProps={isTracking:!1,isIgnored:!1},c.propTypes={rowData:o.default.object.isRequired,isTracking:o.default.bool,isIgnored:o.default.bool},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(124),c=n(d),f=a(12),p=a(23),m=n(p),h=a(127),v=n(h),_=a(13),E=n(_),g=a(126),y=n(g),S=a(14),b=a(7),C=a(64),O=function(e){var t=e.cellClickHandler,a=e.onFocusCountry,n=e.onDataChange,r=e.rowData,i=e.isMultiediting,o=e.isEditable,s=e.dataPrefix,d=e.isApproved,p=e.isAdjusted,h=e.adjustedRow,_=e.isTracking,g=e.historicalEnabled,O=e.historicalDataKey,T=e.activeRowValidationState,R=e.tooltip,w=e.fromPrevApproved,A=e.multiEditType,I=null,N=r.ignore_aggregation,D=(0,b.isCellDimmed)(S.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION,r,O,g);return N&&h?I=l.default.createElement("div",null):"country"===r.type&&o?(I=l.default.createElement("div",null,l.default.createElement(m.default,{onBlur:function(e,t){+t.value!=+r.values.patient_allocation&&n(r.country_id,s+"patient_allocation",t,null,+r.values.patient_allocation)},onFocus:function(e){return a(e,r.country_id)},narrow:!0,status:r.values.invalids&&r.values.invalids.includes("patient_allocation")||r.invalidFields&&r.invalidFields.includes("patient_allocation")?"error":"success",type:"text",value:r.values.patient_allocation||"",validators:[function(e){return""===e||c.default.isInt(e,{min:1,max:1e6})}],onKeyDown:function(e){"Escape"!==e.key&&"Enter"!==e.key||e.target.blur()},withoutBorder:!0,textAlign:"right",placeholder:""})),R&&(I=l.default.createElement(E.default,{mouseEnterDelay:.3,placement:"bottom",overlayClassName:"fpo-sidebar-button__tooltip patients-cell",overlay:R},I))):i?I="unlock"===A?l.default.createElement(f.Cell,{className:"flex-2-8 multiediting-cell align--right unlock"},l.default.createElement(y.default,{type:S.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION,unlock:r.unlock,onChange:n})):l.default.createElement(v.default,{key:"multiediting_"+S.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION,value:r[S.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION]||"",onChange:function(e){var t=""!==e?parseInt(e,10):"";n(null,S.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION,t,"multiediting")},type:"text",validators:[function(e){return""===e||c.default.isInt(e,{min:1,max:1e6})}],isValid:T[S.ENROLMENT_TABLE_FIELDS_LIST.PATIENT_ALLOCATION],isEditMode:!0}):"country"===r.type&&o||i||(I=l.default.createElement("div",null," ",r.values.patient_allocation||""," "),"country"===r.type&&R&&(I=l.default.createElement(E.default,{mouseEnterDelay:.3,placement:"bottom",overlayClassName:"fpo-sidebar-button__tooltip patients-cell",overlay:R},I))),l.default.createElement(f.Cell,{width:"25%",className:(0,u.default)("align--right","value-cell",{overridden:(0,C.isOverriden)(r[s+"overrideList"],r[s+"unlock"],_,p,h,r.values.patient_allocation,"patient_allocation"),approved:(d&&_||p&&!w)&&!h,editable:"country"===r.type&&o,historical:g,ignored:N,dimmed:D},{"multiediting-cell":i&&"edit"===A}),cellClickHandler:function(e){return t(r,"patient_allocation",e)}},I)};O.propTypes={cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,activeRowValidationState:o.default.object,tooltip:o.default.string,fromPrevApproved:o.default.bool,multiEditType:o.default.string},O.defaultProps={rowData:null,isMultiediting:!1,isEditable:!1,dataPrefix:"",isApproved:!1,isPrevApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",activeRowValidationState:{},tooltip:null,fromPrevApproved:!1,multiEditType:"edit"},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(124),c=n(d),f=a(12),p=a(23),m=n(p),h=a(127),v=n(h),_=a(13),E=n(_),g=a(113),y=n(g),S=a(126),b=n(S),C=a(14),O=a(7),T=a(64),R=function(e){var t=e.cellClickHandler,a=e.onFocusCountry,n=e.onDataChange,r=e.rowData,i=e.isMultiediting,o=e.isEditable,s=e.dataPrefix,d=e.isApproved,p=e.isAdjusted,h=e.adjustedRow,_=e.isTracking,g=e.historicalEnabled,S=e.historicalDataKey,R=e.activeRowValidationState,w=e.tooltip,A=e.fromPrevApproved,I=e.multiEditType,N=null,D=(0,O.isCellDimmed)(C.ENROLMENT_TABLE_FIELDS_LIST.NUM_SITES,r,S,g);return"country"===r.type&&o?(N=l.default.createElement("div",null,l.default.createElement(m.default,{onFocus:function(e){return a(e,r.country_id)},onBlur:function(e,t){+t.value!==r.values.num_sites&&n(r.country_id,s+"num_sites",t,null,+r.values.num_sites)},narrow:!0,status:r.values.invalids&&r.values.invalids.includes("num_sites")||r.invalidFields&&r.invalidFields.includes("num_sites")?"error":"success",type:"text",value:r.values.num_sites||"",onKeyDown:function(e){"Escape"!==e.key&&"Enter"!==e.key||e.target.blur()},validators:[function(e){return""===e||c.default.isInt(e,{min:1,max:1e4})}],withoutBorder:!0,textAlign:"right",placeholder:""})),w&&(N=l.default.createElement(E.default,{mouseEnterDelay:.3,placement:"bottom",overlayClassName:"fpo-sidebar-button__tooltip",overlay:w},N))):i?N="unlock"===I?l.default.createElement(f.Cell,{className:"flex-1-8 multiediting-cell align--right unlock"},l.default.createElement(b.default,{type:C.ENROLMENT_TABLE_FIELDS_LIST.NUM_SITES,unlock:r.unlock,onChange:n})):l.default.createElement(v.default,{key:"multiediting_"+C.ENROLMENT_TABLE_FIELDS_LIST.NUM_SITES,value:r.values.num_sites||"",onChange:function(e){var t=""!==e?parseInt(e,10):"";n(null,C.ENROLMENT_TABLE_FIELDS_LIST.NUM_SITES,t,"multiediting")},type:"text",isValid:R[C.ENROLMENT_TABLE_FIELDS_LIST.NUM_SITES],validators:[function(e){return""===e||c.default.isInt(e,{min:1,max:1e4})}],isEditMode:!0}):"country"===r.type&&o||i||(N=l.default.createElement(l.default.Fragment,null,l.default.createElement(y.default,{key:1,isNotEmpty:r.values.num_sites&&r.values.num_sites>0,generatedFields:r.generatedFields,cellName:C.ENROLMENT_TABLE_FIELDS_LIST.NUM_SITES}),l.default.createElement("div",{key:2}," ",r.values.num_sites||""," "))),l.default.createElement(f.Cell,{width:"12.5%",className:(0,u.default)("align--right","value-cell",{overridden:(0,T.isOverriden)(r[s+"overrideList"],r[s+"unlock"],_,p,h,r.values.num_sits,"num_sites"),approved:(d&&_||p&&!A)&&!h,editable:"country"===r.type&&o,historical:g,dimmed:D,ignored:r.ignore_aggregation,generated:r.generatedFields&&r.generatedFields.includes("num_sites")},{"multiediting-cell":i&&"edit"===I}),cellClickHandler:function(e){return t(r,"num_sites",e)}},N)};R.propTypes={cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,activeRowValidationState:o.default.object,tooltip:o.default.string,fromPrevApproved:o.default.bool,multiEditType:o.default.string},R.defaultProps={rowData:null,isMultiediting:!1,isEditable:!1,dataPrefix:"",isApproved:!1,isPrevApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",activeRowValidationState:{},tooltip:null,fromPrevApproved:!1,multiEditType:"edit"},t.default=R},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LocationDataCell=t.LocationHeaderCell=void 0;var r=a(985),l=n(r),i=a(984),o=n(i);t.LocationHeaderCell=l.default,t.LocationDataCell=o.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),i=n(l),o=a(1),s=n(o),u=a(2),d=n(u),c=a(12),f=a(977),p=n(f),m=a(978),h=n(m),v=a(973),_=n(v),E=a(976),g=n(E),y=a(974),S=n(y),b=a(979),C=n(b),O=a(982),T=n(O),R=a(981),w=n(R),A=a(975),I=n(A),N=a(980),D=n(N),P=a(87),L=a(354),M=function(e){var t=e.rowIndex,a=e.data,n=e.cellClickHandler,l=e.onFocusCountry,o=e.onDataChange,s=e.editingCountry,u=e.historicalEnabled,f=e.historicalFilter,m=e.isAdjusted,v=e.isApproved,E=e.isPrevApproved,y=e.isTracking,b=e.activeRowValidationState,O=e.isEditable,R=e.fromPrevApproved,A=e.multiEditType,N=e.navigateToViewSites,P=e.scenario,M=e.studyId,x=e.canViewSites,k=r({},a[t]),j=k.ignore_aggregation,F="adjusted"===k.valuesType,U=!!F&&(0,L.showInAdjustedRow)(k.valuesType,a,t),V="generic"===k.valuesType&&(v||m),B=F?"adjusted_":"",H="country"===k.type&&void 0!==k.actual_overallocation&&0!==k.actual_overallocation,G=O&&!V&&(!s||s===k.country_id||a.every(function(e){return!e.values.invalids||e.values.invalids&&0===e.values.invalids.length})),Y="multiediting"===k.type,q="historical_reference_data_by_"+f.toLowerCase(),z=k.errorMessages||{},W={isAdjusted:m,isTracking:y,isEditable:G&&!j,isMultiediting:Y,multiEditType:A,isApproved:v,isPrevApproved:E,rowData:k,historicalEnabled:u,historicalDataKey:q,dataPrefix:B,adjustedRow:F,cellClickHandler:n,onFocusCountry:l,onDataChange:o,activeRowValidationState:b,fromPrevApproved:R},K="Min# of patients: \n                    "+((F?k.adjusted_patient_allocation_min:k.patient_allocation_min)||"-")+" \n                   Max# of patients: \n                    "+((F?k.adjusted_patient_allocation_max:k.patient_allocation_max)||"-"),X=i.default.createElement(w.default,r({tooltip:z.patient_allocation||K},W)),Z=i.default.createElement(T.default,r({tooltip:z.num_sites},W));return i.default.createElement(c.CellGroup,{direction:"column"},"generic"===k.valuesType&&i.default.createElement(c.CellGroup,{direction:"row",className:(0,d.default)("data-group active",{tracking:y})},i.default.createElement(p.default,{multiEditType:A,rowData:k,cellClickHandler:n,isTracking:y,isIgnored:j,navigateToViewSites:N,scenario:P,studyId:M,canViewSites:x}),X,Z),"generic_overallocated"===k.valuesType&&i.default.createElement(c.CellGroup,{direction:"row",className:(0,d.default)("data-group active",{tracking:!0})},i.default.createElement(h.default,{rowData:k,isTracking:y,isIgnored:j}),i.default.createElement(C.default,{rowData:k,isTracking:y,isIgnored:j}),i.default.createElement(D.default,{rowData:k,isTracking:y,isIgnored:j})),"actual"===k.valuesType&&i.default.createElement(c.CellGroup,{direction:"row",className:(0,d.default)("data-group active",{tracking:y})},i.default.createElement(_.default,{rowData:k,isOverallocated:H,isTracking:y,isIgnored:j}),i.default.createElement(S.default,{rowData:k,isIgnored:j}),i.default.createElement(I.default,{rowData:k,isIgnored:j})),"adjusted"===k.valuesType&&i.default.createElement(c.CellGroup,{direction:"row",className:(0,d.default)("data-group active",{tracking:!1,adjusted:!0})},i.default.createElement(g.default,{showCountryName:U,rowData:k,isTracking:y,isIgnored:j}),X,Z),"adjusted_overallocated"===k.valuesType&&i.default.createElement(c.CellGroup,{direction:"row",className:(0,d.default)("data-group active",{tracking:!0})},i.default.createElement(h.default,{rowData:k,isTracking:y,isIgnored:j}),i.default.createElement(C.default,{rowData:k,isTracking:y,isIgnored:j}),i.default.createElement(D.default,{rowData:k,isTracking:y,isIgnored:j})))};M.displayName="LocationDataCell",M.defaultProps={rowIndex:-1,editingCountry:void 0,isEditable:!1,isAdjusted:!1,isApproved:!1,isPrevApproved:!1,isTracking:!1,historicalEnabled:!1,historicalFilter:P.FILTER_BY.STUDIES,activeRowValidationState:{},fromPrevApproved:!1,multiEditType:"edit",studyId:null,canViewSites:!0},M.propTypes={rowIndex:s.default.number,data:s.default.array.isRequired,cellClickHandler:s.default.func.isRequired,onFocusCountry:s.default.func.isRequired,onDataChange:s.default.func.isRequired,editingCountry:s.default.oneOfType([s.default.string,s.default.number]),isEditable:s.default.bool,isAdjusted:s.default.bool,isApproved:s.default.bool,isPrevApproved:s.default.bool,isTracking:s.default.bool,historicalEnabled:s.default.bool,historicalFilter:s.default.oneOf(Object.keys(P.FILTER_BY)),activeRowValidationState:s.default.object,fromPrevApproved:s.default.bool,multiEditType:s.default.string,scenario:s.default.object.isRequired,navigateToViewSites:s.default.func.isRequired,studyId:s.default.number,canViewSites:s.default.bool},t.default=M},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(12),u=function(e){var t=e.caption;return l.default.createElement(s.CellGroup,null,l.default.createElement(s.Cell,{className:"cell-caption"},l.default.createElement("h3",null,t)),l.default.createElement(s.CellGroup,{direction:"row",className:"header-group"},l.default.createElement(s.Cell,{width:"50%",className:"align--left header-cell"},l.default.createElement("div",null,"Locations")),l.default.createElement(s.Cell,{width:"25%",className:"align--right header-cell"},l.default.createElement("div",null,"Patients")),l.default.createElement(s.Cell,{width:"12.5%",className:"align--right header-cell"},l.default.createElement("div",null,"Sites"))))};u.propTypes={caption:o.default.element.isRequired},t.default=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(12),m=a(13),h=n(m),v=a(1001),_=n(v),E=a(857),g=n(E),y=a(826),S=n(y),b=a(6),C=a(14),O=a(358);a(2341);var T=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExcludeCountry=function(e){var t=a.props,n=t.removeCountryPopUp,r=t.data,l=t.rowIndex,i=o({},r[l]);e.stopPropagation(),n(i.country_id,i.country_name,i.region_id,i.region_name),a.closeCountryMenu()},a.handleViewSites=function(e){var t=a.props,n=t.navigateToViewSites,r=t.studyId,l=t.scenario,i=t.data,s=t.rowIndex,u=o({},i[s]);e.stopPropagation(),n(r,l.id,u.platform_country_id),a.closeCountryMenu()},a.handleCalculationToggle=function(e){var t=a.props,n=t.onDataChange,r=t.data,l=t.rowIndex,i=o({},r[l]);e.stopPropagation(),n(i.country_id,"ignore_aggregation",{value:!i.ignore_aggregation},i.override_id),a.closeCountryMenu()},a.closeCountryMenu=function(){a.setState({hideCountryMenu:!0})},a.state={hideCountryMenu:!0},a.handleClicked=a.handleClicked.bind(a),a.handleOutsideClick=a.handleOutsideClick.bind(a),a}return i(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=o({},e.data[e.rowIndex]),n=o({},this.props.data[this.props.rowIndex]),r=a.ignoreGenericData||!1;return!t.hideCountryMenu||t.hideCountryMenu!==this.state.hideCountryMenu||a.type!==n.type||r||this.props.showMenu!==e.showMenu||e.data.length!==this.props.data.length||a.ignore_aggregation!==n.ignore_aggregation}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleOutsideClick)}},{key:"handleClicked",value:function(e){e.stopPropagation(),this.state.hideCountryMenu&&document.addEventListener("click",this.handleOutsideClick),this.row=e.target.closest(".react-flex-table__row"),this.row&&this.row.classList.add("hovered"),this.setState({hideCountryMenu:!1})}},{key:"handleOutsideClick",value:function(e){var t=this;"true"!==e.target.getAttribute("data-ignore-click-outside")&&(this.row&&this.row.classList.remove("hovered"),this.setState({hideCountryMenu:!0},function(){document.removeEventListener("click",t.handleOutsideClick)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.showMenu,n=t.rowIndex,r=t.scenario,l=t.removeRegionPopUp,i=t.handleAddCountry,s=t.platformRegions,u=t.data,c=t.handleAddRegion,f=t.studyId,m=t.isEditable,v=t.canViewSites,E=t.onMultiEditingCancel,y=t.onCopy,T=t.onDataChange,R=t.onPaste,w=t.clipboardEmpty,A=t.isAdjusted,I=t.fullData,N=o({},u[n]);if("generic_overallocated"===N.valuesType||"adjusted_overallocated"===N.valuesType)return null;var D=this.state.hideCountryMenu?{}:{visible:!1};return!a&&"multiediting"!==N.type||this.props.isAdjusted&&("generic"===N.valuesType||"actual"===N.valuesType)?null:function(){if("rollup"===N.type&&m)return d.default.createElement(p.Cell,{overflow:!0,className:"table-menu-cell"},d.default.createElement(S.default,{platformRegions:s,assignedRegions:u.filter(function(e){return"region"===e.type||e.regionHasSingleCountry}).map(function(e){return e.regionHasSingleCountry?e.region_name:e.location}),addScenarioRegion:c,studyId:f,scenarioId:r.id}));var t=s.find(function(e){return"region"===N.type&&N.location===e.name})||{};if("region"===N.type&&m){var a=(t.countries||[]).concat({id:-1,name:"Unspecified country",region_id:N.region_id}).map(function(e){return e.name}),n=I.filter(function(e){return e.type===C.SCENARIO_DATA_TYPE.COUNTRY&&e.region_id===N.region_id}),P=n.map(function(e){return e.country_name}),L=n.filter(function(e){return e.hasActuals}).length>0;return d.default.createElement(p.Cell,{overflow:!0,className:"table-menu-cell"},d.default.createElement(h.default,o({mouseEnterDelay:.3},D,{overlayClassName:"scenario-table__region-more-tooltip",align:{offset:[0,10]},overlay:d.default.createElement("span",null,"Actions")}),d.default.createElement(h.default,{overlayClassName:"scenario-table__region-actions-tooltip",align:{offset:[0,-10]},placement:"bottomRight",trigger:["click"],overlay:d.default.createElement(_.default,{hideRemoveRegions:L,onRemoveRegion:function(){return l(N.region_id,N.location)},onAddCountry:function(e){return i(e,N.location,N.region_id)},countries:a,assignedCountries:P})},d.default.createElement("div",{className:"row-control-icon--more",onClick:e.handleClicked},b.Icons.MORE_HORIZ))))}if("country"===N.type){var M=N.hasActuals;return"generic"===N.valuesType||"adjusted"===N.valuesType||N.canBeIgnored||N.ignore_aggregation?d.default.createElement(p.Cell,{overflow:!0,className:"table-menu-cell"},d.default.createElement(h.default,o({},D,{mouseEnterDelay:.3,overlayClassName:"scenario-table__region-more-tooltip",align:{offset:[0,0]},overlay:d.default.createElement("span",null,"Actions")}),d.default.createElement(h.default,{overlayClassName:"scenario-table__country-actions-tooltip",align:{offset:[0,0]},placement:"bottomRight",visible:!e.state.hideCountryMenu,overlay:d.default.createElement(g.default,{isAdjusted:A,onUnlockCountry:function(t){t.stopPropagation(),T(N.country_id,O.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK,{value:Object.values(O.ENROLMENT_TABLE_FIELDS_LIST)},N.override_id,!1),e.setState({hideCountryMenu:!0})},hideUnlock:A||r.cohorts&&r.cohorts.length>0,hideIgnore:!N.canBeIgnored&&!N.ignore_aggregation||"adjusted"!==N.valuesType,isIgnored:N.ignore_aggregation,onCalculationToggle:e.handleCalculationToggle,onExcludeCountry:e.handleExcludeCountry,onViewSites:e.handleViewSites,canViewSites:v&&null!==N.platform_country_id,onCopy:function(t){t.stopPropagation(),y(N.country_id),e.setState({hideCountryMenu:!0})},onPaste:function(t){t.stopPropagation(),R(N.country_id),e.setState({hideCountryMenu:!0})},isEditable:m&&!M,clipboardEmpty:w})},d.default.createElement("div",{className:"row-control-icon--more",onClick:e.handleClicked},b.Icons.MORE_HORIZ)))):null}return"multiediting"===N.type?d.default.createElement("div",{className:"flex-4-8 multiediting-cell empty"},d.default.createElement("div",{className:"row-control-icon",onClick:E},b.Icons.CROSS_O)):null}()}}]),t}(u.Component);T.displayName="MenuCell",T.defaultProps={rowIndex:-1,activeCountry:null,activeCell:null,studyId:null,scenarioId:null,isEditable:!0,canViewSites:!0,platformRegions:[],assignedRegions:[],showMenu:!0,isAdjusted:!1,clipboardEmpty:!0,fullData:[],canManageSites:!1},T.propTypes={rowIndex:f.default.number,scenario:f.default.object.isRequired,data:f.default.array.isRequired,fullData:f.default.array,removeCountryPopUp:f.default.func.isRequired,removeRegionPopUp:f.default.func.isRequired,navigateToViewSites:f.default.func.isRequired,studyId:f.default.number,handleAddCountry:f.default.func.isRequired,platformRegions:f.default.array,handleAddRegion:f.default.func.isRequired,canViewSites:f.default.bool,isEditable:f.default.bool,showMenu:f.default.bool,isAdjusted:f.default.bool,onMultiEditingCancel:f.default.func.isRequired,onCopy:f.default.func.isRequired,onPaste:f.default.func.isRequired,clipboardEmpty:f.default.bool,onDataChange:f.default.func.isRequired},t.default=T},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),m=n(p),h=a(12),v=a(967),_=a(983),E=a(989),g=a(986),y=n(g),S=a(972),b=n(S),C=a(6),O=a(1066),T=n(O),R=a(39),w=a(932),A=n(w),I=a(961),N=n(I),D=a(354),P=n(D),L=a(7),M=a(272),x=a(14),k=a(87);a(2342);var j=function(e,t){return t.filter(function(t){return!e.includes(t.region)})},F=function(e){function t(e){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.toggleCollapse=a.toggleCollapse.bind(a),a.cellClickHandler=a.cellClickHandler.bind(a),a.handleDataChange=a.handleDataChange.bind(a),a.handleLpftModeToggle=a.handleLpftModeToggle.bind(a),a.removeCountryPopUp=a.removeCountryPopUp.bind(a),a.removeRegionPopUp=a.removeRegionPopUp.bind(a),a.handleRemoveRegion=a.handleRemoveRegion.bind(a),a.handleOutsideClick=a.handleOutsideClick.bind(a),a.handleEsc=a.handleEsc.bind(a);var n=e.isAdjusted,r=e.isTracking;return a.state={lpftView:!0,collapsed:[],data:(0,P.default)(e.data,r,n,e.tableFilter),editingCountry:null,editingFieldName:"",historical:{studiesCount:0,uncertaintyLevel:null,cell:null,data:null,cellName:null},activeRowValidationState:{},showInvalidDataWarning:!1,showPopUp:!1,popUpMessage:"",popUpTitle:"",countryToRemove:null},a}return s(t,e),d(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleEsc,!0),document.addEventListener("click",this.handleOutsideClick,!0)}},{key:"componentWillReceiveProps",value:function(e){if(e.data!==this.props.data||e.tableFilter!==this.props.tableFilter){var t=e.isAdjusted,a=e.isTracking;this.setState({data:(0,P.default)(e.data,a,t,e.tableFilter),activeRowValidationState:{}})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleEsc,!0),document.removeEventListener("click",this.handleOutsideClick,!0)}},{key:"toggleCollapse",value:function(e){var t=[].concat(l(this.state.collapsed));t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.setState({collapsed:t})}},{key:"isAdjusted",value:function(){return null!==this.props.scenario.source_scenario_id}},{key:"handleOutsideClick",value:function(e){var t=this;if(e&&this.state.editingCountry){var a=this.props.data.filter(function(e){return e.type.toUpperCase()===x.COUNTRY}).find(function(e){return e.country_id===t.state.editingCountry});if(a&&a.invalidFields&&a.invalidFields.length>0||a&&a.adjusted_invalids&&a.adjusted_invalids.length>0)return void(e.target.closest(".react-datepicker")||e.target.closest(".fpo-button")||e.target.closest(".editing")||e.target.closest(".fpo-exit-button")||(this.setState({showInvalidDataWarning:!0}),e.stopPropagation(),e.preventDefault()))}if(this.props.isHistoricalDataViewEnabled)e.target.closest(".historical")||this.setState({historical:{studiesCount:0,uncertaintyLevel:null,cell:null,data:null,cellName:null}});else{var n=e.target.closest(".react-flex-table__row.country.editable"),r=e.target.closest(".popup-dialog");n||r||!this.state.editingCountry||this.setState({editingCountry:null,editingFieldName:""})}}},{key:"handleEsc",value:function(e){var t=this;if(this.state.editingCountry&&27===e.keyCode){var a=this.props.data.filter(function(e){return e.type.toUpperCase()===x.COUNTRY}).find(function(e){return e.country_id===t.state.editingCountry});if(a&&a.invalidFields&&a.invalidFields.length>0)return void(e.target.closest(".react-datepicker")||e.target.closest(".fpo-button")||e.target.closest(".editing")||e.target.closest(".fpo-exit-button")||(e.stopPropagation(),e.preventDefault()));this.setState(function(e){return t.props.resetCountryData(e.editingCountry,e.editingFieldName),{editingCountry:null,editingFieldName:""}})}}},{key:"cellClickHandler",value:function(e,t,a){var n=this.props,r=n.isHistoricalDataViewEnabled,l=n.isCohortView,i=n.scenario,o=n.isEditable,s=n.historicalFilter;if(a.target){var u=a.target.closest(".react-datepicker");if("location"===t||"collapse-icon-cell"===t)return void("region"!==e.type||e.isRegionCountry||this.toggleCollapse(e.location));if((o||r)&&!u){if(!r&&"adjusted"===e.valuesType){var d={editingFieldName:"adjusted_"+t};this.state.editingCountry!==e.country_id&&(d.editingCountry=e.country_id),this.setState(d)}var c=e.values[t],f="historical_reference_data_by_"+s.toLowerCase(),p=k.FIELDS[t],m=e[f]&&e[f][p]||[],h=a.target.closest(".historical");if(r&&m&&m.length>0&&c){var v=(0,L.getParameterUncertainty)(e,t,l);this.setState({historical:{studiesCount:m.length,uncertaintyLevel:v,cell:h,data:{satellites:m,cellName:p,value:(0,L.getParamShift)(c,i.fp)},cellName:t}})}}}}},{key:"handleDataChange",value:function(e,t,a,n,l){if("unlock"===n)return void this.props.onMultiEditingCellChange({unlock:u({},this.props.data[0].unlock,r({},t,a))});if("multiediting"===n){this.props.onMultiEditingCellChange(r({},t,a));var i=this.props.data[0];i[t]=a;var o=this.props.scenario,s=o.fp,d=o.end_date,c=o.fpfv_fpft,f=void 0!==i.fsiv?i.fsiv:null,p=void 0!==i.fpfv?i.fpfv:null,m=void 0!==i["25_si"]?i["25_si"]:null,h=void 0!==i["50_si"]?i["50_si"]:null,v=void 0!==i["90_si"]?i["90_si"]:null,_=void 0!==i.num_sites?i.num_sites:null,E=void 0!==i.patient_allocation?i.patient_allocation:null,g=void 0!==i.sas?i.sas:null,y=void 0!==i.screening_failure?i.screening_failure:null,S=void 0!==i.randomisation_rate?i.randomisation_rate:null,b=(0,M.validateCurvesCalcArguments)(s,d,f,p,m,h,v,_,E,g,y,S,c,null),C=b.invalidFields.reduce(function(e,t){return e[t]=!1,e},{});return void this.setState({activeRowValidationState:u({},C)})}this.props.onDataChange(e,{fieldName:t,newValue:null!==a.value&&void 0!==a.value&&""!==a.value?a.value:null,oldValue:void 0!==l?l:null})}},{key:"editingCountryHandler",value:function(e,t){var a=this;if(this.state.editingCountry){var n=this.props.data.filter(function(e){return e.type.toUpperCase()===x.COUNTRY}).find(function(e){return e.country_id===a.state.editingCountry});if(n&&n.invalidFields&&n.invalidFields.length>0||n&&n.adjusted_invalids&&n.adjusted_invalids.length>0)return void(e&&(e.stopPropagation(),e.preventDefault()))}this.state.editingCountry!==t&&this.setState({editingCountry:t})}},{key:"handleLpftModeToggle",value:function(){this.setState({lpftView:!this.state.lpftView})}},{key:"removeCountryPopUp",value:function(e,t,a,n){var r=this.props.isCohortView,l=f.default.createElement("div",null,f.default.createElement("span",null,"Are you sure you want to remove"),f.default.createElement("span",{className:"bold"}," ",t),f.default.createElement("span",null,!r&&" and exclude it from future optimizations","?"));this.setState({showPopUp:!0,removeType:"country",popUpMessage:l,popUpTitle:"Exclude country",countryToRemove:{countryName:t,regionId:a,regionName:n}})}},{key:"removeRegionPopUp",value:function(e,t){var a=this.props.isCohortView,n=f.default.createElement("div",null,f.default.createElement("span",null,"Are you sure you want to remove"),f.default.createElement("span",{className:"bold"}," ",t),f.default.createElement("span",null," and all"),f.default.createElement("span",{className:"bold"}," selected countries"),f.default.createElement("span",null," within "),f.default.createElement("span",{className:"bold"},t),f.default.createElement("span",null,!a&&", and exclude them from future optimizations","?"));this.setState({showPopUp:!0,popUpMessage:n,popUpTitle:"Remove region",removeType:"region",countryToRemove:e})}},{key:"handleRemoveCountry",value:function(){this.props.handleDeleteCountry(this.state.countryToRemove.countryName,this.state.countryToRemove.regionId,this.state.countryToRemove.regionName),this.setState({showPopUp:!1,popUpMessage:"",countryToRemove:null,editingCountry:null,editingFieldName:""})}},{key:"handleRemoveRegion",value:function(){this.props.handleDeleteRegion(this.state.countryToRemove),this.setState({showPopUp:!1,popUpMessage:"",countryToRemove:null,editingCountry:null,editingFieldName:""})}},{key:"render",value:function(){var e=this,t=this.state,a=t.editingCountry,n=t.historical,r=t.collapsed,l=t.data,i=t.lpftView,o=this.props,s=o.isEditable,u=o.scenario,d=o.study,c=o.isTracking,p=o.isHistoricalDataViewEnabled,m=o.historicalFilter,g=o.platformRegions,S=o.tableHeaderPosition,O=o.handleAddCountry,w=o.handleAddRegion,I=o.navigateToViewSites,D=o.isCohortView,P=o.onMultiEditingCancel,L=o.onMultiCheck,M=o.isMultiEditing,k=o.multiRegionsData,F=o.onMultiEditingApply,U=o.onCopy,V=o.onPaste,B=o.clipboardEmpty,H=o.multiEditType,G=o.canManageSites,Y=j(r,l).filter(function(e){return"region"===e.type&&e.isRegionCountry?null:e}),q=f.default.createElement(R.ActionButton,{action:function(){return e.setState({showPopUp:!1,popUpMessage:"",countryToRemove:null})}},"Cancel"),z=f.default.createElement(R.ActionButton,{action:function(){return e.handleRemoveCountry()},primary:!0},"Confirm"),W=f.default.createElement(R.ActionButton,{action:function(){return e.handleRemoveRegion()},primary:!0},"Confirm");return f.default.createElement("div",{className:"planing-enrolment-table"},f.default.createElement(h.FlexTable,{rowsCount:Y.length,stickyHeader:!0,stickyPosition:S,rowHeight:40,headerHeight:93},f.default.createElement(b.default,{data:Y,isEditable:s,editingCountry:a,isAdjusted:this.props.isAdjusted,isTracking:c,lpftView:i,collapsedList:this.state.collapsed,isHistoricalDataViewEnabled:p,isMultiEditing:M,clipboardEmpty:B},f.default.createElement(h.Column,{columnName:"collapse",className:"control-column",header:f.default.createElement(h.Cell,null),style:{display:"flex",alignItems:"flex-end"},data:f.default.createElement(N.default,{scenarioData:Y,onMultiCheck:L,onToggleEvents:this.props.onToggleEvents,cellClickHandler:this.cellClickHandler,collapsed:this.state.collapsed,isAdjusted:this.props.isAdjusted,isMultiEditing:M,multiRegionsData:k,data:l}),fixedWidth:!0,width:48}),f.default.createElement(h.Column,{columnName:"location",className:"location-column",header:f.default.createElement(_.LocationHeaderCell,{caption:C.Icons.LANGUAGE}),data:f.default.createElement(_.LocationDataCell,{data:Y,fromPrevApproved:u.fromPrevApproved,isAdjusted:this.props.isAdjusted,isApproved:u.status===x.SCENARIO_STATUS.APPROVED,isPrevApproved:u.status===x.SCENARIO_STATUS.PREV_APPROVED,isTracking:c,cellClickHandler:this.cellClickHandler,onDataChange:this.handleDataChange,editingCountry:a,isEditable:s,activeRowValidationState:this.state.activeRowValidationState,historicalEnabled:p,historicalFilter:m,onFocusCountry:function(t,a){return e.editingCountryHandler(t,a)},scenarioStatus:u.status,multiEditType:H,onMultiCheck:L,regionsData:k,navigateToViewSites:I,scenario:u,studyId:d.id,canViewSites:!p&&!D}),width:240}),f.default.createElement(h.Column,{columnName:"site-initiation",className:"site-initiation-column",header:f.default.createElement(E.SiteInitiationHeaderCell,{caption:"Site initiation"}),data:f.default.createElement(E.SiteInitiationDataCell,{fullData:this.props.data,data:Y,fromPrevApproved:u.fromPrevApproved,isAdjusted:this.props.isAdjusted,isApproved:u.status===x.SCENARIO_STATUS.APPROVED,isPrevApproved:u.status===x.SCENARIO_STATUS.PREV_APPROVED,isTracking:c,isExactCopy:u.exact_copy,activeRowValidationState:this.state.activeRowValidationState,onDataChange:this.handleDataChange,cellClickHandler:this.cellClickHandler,startDate:u.fp,editingCountry:a,isEditable:s,multiEditType:H,historicalEnabled:p,historicalFilter:m,onFocusCountry:function(t,a){return e.editingCountryHandler(t,a)},scenarioStatus:u.status}),width:410}),f.default.createElement(h.Column,{columnName:"enrolment",className:"enrolment-column",header:f.default.createElement(v.EnrolmentHeaderCell,{caption:"Enrollment rates",lpftView:i,lpftViewTypeToggle:this.handleLpftModeToggle}),data:f.default.createElement(v.EnrolmentDataCell,{data:Y,fromPrevApproved:u.fromPrevApproved,isAdjusted:this.props.isAdjusted,isApproved:u.status===x.SCENARIO_STATUS.APPROVED,isPrevApproved:u.status===x.SCENARIO_STATUS.PREV_APPROVED,isTracking:c,isExactCopy:u.exact_copy,activeRowValidationState:this.state.activeRowValidationState,onDataChange:this.handleDataChange,batchUpdate:this.props.batchUpdate,cellClickHandler:this.cellClickHandler,startDate:u.fp,endDate:u.end_date,editingCountry:a,isEditable:s,lpftView:i,historicalEnabled:p,historicalFilter:m,onFocusCountry:function(t,a){return e.editingCountryHandler(t,a)},scenarioStatus:u.status,regionsData:k,multiEditType:H,onMultiEditingApply:F}),width:440}),f.default.createElement(h.Column,{columnName:"menu",header:f.default.createElement(h.Cell,null),style:{display:"flex",alignItems:"center"},data:f.default.createElement(y.default,{showMenu:!p||G,isAdjusted:this.props.isAdjusted,fullData:this.props.data,data:Y,onDataChange:this.handleDataChange,isEditable:s,removeRegionPopUp:this.removeRegionPopUp,removeCountryPopUp:this.removeCountryPopUp,handleAddCountry:O,navigateToViewSites:I,platformRegions:g,handleAddRegion:w,canViewSites:!p&&!D,canManageSites:G,scenario:u,studyId:d.id,onMultiEditingCancel:P,onCopy:U,onPaste:V,clipboardEmpty:B}),fixedWidth:!0,width:32}))),f.default.createElement(A.default,{isShown:this.state.showInvalidDataWarning,onClose:function(){return e.setState({showInvalidDataWarning:!1})}}),f.default.createElement(R.PopupDialog,{isShown:this.state.showPopUp,title:this.state.popUpTitle,handleClose:function(){return e.setState({showPopUp:!1,popUpMessage:"",countryToRemove:null})},buttons:[q,"country"===this.state.removeType?z:W]},f.default.createElement("div",{className:"h2"},this.state.popUpMessage)),p&&f.default.createElement(T.default,{parent:n.cell,data:n.data,viewType:m,studiesCount:n.studiesCount,uncertaintyLevel:n.uncertaintyLevel,cellName:n.cellName}))}}]),t}(c.PureComponent);F.propTypes={data:m.default.array.isRequired,scenario:m.default.object.isRequired,onDataChange:m.default.func.isRequired,isEditable:m.default.bool,isTracking:m.default.bool,isCohortView:m.default.bool,isHistoricalDataViewEnabled:m.default.bool,historicalFilter:m.default.oneOf(Object.keys(k.FILTER_BY)),tableHeaderPosition:m.default.number,platformRegions:m.default.array,handleAddRegion:m.default.func.isRequired,handleAddCountry:m.default.func.isRequired,handleDeleteRegion:m.default.func.isRequired,handleDeleteCountry:m.default.func.isRequired,navigateToViewSites:m.default.func.isRequired,onToggleEvents:m.default.func.isRequired,study:m.default.object,isAdjusted:m.default.bool,isMultiEditing:m.default.bool,onMultiCheck:m.default.func.isRequired,resetCountryData:m.default.func.isRequired,multiRegionsData:m.default.object,onMultiEditingCancel:m.default.func.isRequired,onMultiEditingApply:m.default.func.isRequired,onMultiEditingCellChange:m.default.func.isRequired,batchUpdate:m.default.func.isRequired,onCopy:m.default.func.isRequired,onPaste:m.default.func.isRequired,clipboardEmpty:m.default.bool,tableFilter:m.default.object,multiEditType:m.default.string,canManageSites:m.default.bool},F.defaultProps={isEditable:!1,isTracking:!1,isCohortView:!1,isHistoricalDataViewEnabled:!1,historicalFilter:k.FILTER_BY.STUDIES,tableHeaderPosition:0,platformRegions:[],study:{},isAdjusted:!1,isMultiEditing:!1,multiRegionsData:{},clipboardEmpty:!0,tableFilter:null,multiEditType:"edit",canManageSites:!1},t.default=F},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(10),c=n(d),f=a(12),p=a(99),m=n(p),h=a(127),v=n(h),_=a(113),E=n(_),g=a(126),y=n(g),S=a(14),b=a(7),C=a(64),O=function(e){var t=e.rowData,a=e.isTracking,n=e.cellClickHandler,r=e.isApproved,i=e.isAdjusted,o=e.adjustedRow,s=e.isEditable,d=e.historicalEnabled,p=e.historicalDataKey,h=e.isMultiediting,_=e.onFocusCountry,g=e.startDate,O=e.datePickerFormat,T=e.onDataChange,R=e.dataPrefix,w=e.filterDate,A=e.activeRowValidationState,I=e.tooltip,N=e.today,D=e.fromPrevApproved,P=e.isExactCopy,L=e.multiEditType,M=(0,b.isCellDimmed)(S.ENROLMENT_TABLE_FIELDS_LIST.FSIV,t,p,d);return l.default.createElement(f.Cell,{width:"22%",cellClickHandler:function(e){return n(t,"fsiv",e)},className:(0,u.default)("value-cell",{overridden:(0,C.isOverriden)(t[R+"overrideList"],t[R+"unlock"],a,i,o,t.values.fsiv,"fsiv"),approved:(r&&a||i&&!D)&&!o,editable:"country"===t.type&&s,historical:d,dimmed:M,ignored:t.ignore_aggregation,generated:t.generatedFields&&t.generatedFields.includes("fsiv")},{"multiediting-cell":h&&"edit"===L})},"country"===t.type&&s&&l.default.createElement("div",null,l.default.createElement(m.default,{simpleView:!0,tooltip:I,onFocus:function(e){return _(e,t.country_id)},style:{width:"100%"},fixedHeight:!0,defaultDate:g.clone().add(1,"w"),filterDate:w,dateFormat:O,disabled:!P&&i&&t.values.fsiv&&t.values.fsiv.isBefore(N)&&t.actual_fsiv&&null!==t.actual_fsiv&&t.actual_fsiv.isSame(t.values.fsiv),disabledKeyboardNavigation:!0,onChange:function(e,a){return T(t.country_id,R+"fsiv",a,null,t.values.fsiv)},status:t.values.invalids&&t.values.invalids.includes("fsiv")||t.invalidFields&&t.invalidFields.includes("fsiv")?"error":null,validators:[function(e){return c.default.isMoment(e)}],selected:c.default.isMoment(t.values.fsiv)?t.values.fsiv:null})),h&&"unlock"===L&&l.default.createElement(f.Cell,{className:"flex-col-22 multiediting-cell unlock"},l.default.createElement(y.default,{type:S.ENROLMENT_TABLE_FIELDS_LIST.FSIV,unlock:t.unlock,onChange:T})),h&&"edit"===L&&l.default.createElement(v.default,{key:"multiediting_"+S.ENROLMENT_TABLE_FIELDS_LIST.FSIV,onChange:function(e){return T(null,S.ENROLMENT_TABLE_FIELDS_LIST.FSIV,e,"multiediting")},isValid:A[S.ENROLMENT_TABLE_FIELDS_LIST.FSIV],value:t.values.fsiv||null,type:"date",defaultDate:g.clone().add(1,"w"),filterDate:w,isEditMode:!0}),("country"!==t.type||!s)&&!h&&[l.default.createElement(E.default,{key:1,isNotEmpty:null!==t.values.fsiv&&void 0!==t.values.fsiv,generatedFields:t.generatedFields,cellName:S.ENROLMENT_TABLE_FIELDS_LIST.FSIV}),l.default.createElement("div",{key:2,className:(0,u.default)("cell-renderer-not-editable-view",{error:t.values.invalids&&t.values.invalids.includes(S.ENROLMENT_TABLE_FIELDS_LIST.FSIV)||t.invalidFields&&t.invalidFields.includes(S.ENROLMENT_TABLE_FIELDS_LIST.FSIV)})},t.values.fsiv?t.values.fsiv.format("D MMM YY"):" ")])};O.propTypes={cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,startDate:o.default.object.isRequired,datePickerFormat:o.default.string,filterDate:o.default.func.isRequired,activeRowValidationState:o.default.object,tooltip:o.default.string,today:o.default.object,fromPrevApproved:o.default.bool,isExactCopy:o.default.bool,multiEditType:o.default.string},O.defaultProps={rowData:null,isMultiediting:!1,isEditable:!1,isEditing:!1,dataPrefix:"",isApproved:!1,isPrevApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",datePickerFormat:void 0,activeRowValidationState:{},tooltip:null,today:(0,c.default)(),fromPrevApproved:!1,isExactCopy:!1,multiEditType:"edit"},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SiteInitiationDataCell=t.SiteInitiationHeaderCell=void 0;var r=a(995),l=n(r),i=a(994),o=n(i);t.SiteInitiationHeaderCell=l.default,t.SiteInitiationDataCell=o.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(124),c=n(d),f=a(12),p=a(23),m=n(p),h=a(127),v=n(h),_=a(113),E=n(_),g=a(126),y=n(g),S=a(14),b=a(7),C=a(64),O=function(e){var t=e.rowData,a=e.isTracking,n=e.cellClickHandler,r=e.isApproved,i=e.isAdjusted,o=e.adjustedRow,s=e.isEditable,d=e.historicalEnabled,p=e.historicalDataKey,h=e.isMultiediting,_=e.onFocusCountry,g=e.onDataChange,O=e.dataPrefix,T=e.isEditing,R=e.activeRowValidationState,w=e.fromPrevApproved,A=e.multiEditType,I=!(t.values.invalids&&t.values.invalids.includes("sas")),N=(0,b.isCellDimmed)(S.ENROLMENT_TABLE_FIELDS_LIST.SAS,t,p,d),D=function(){return t.values.sas&&I?T||h?""+Math.round(100*t.values.sas):Math.round(100*t.values.sas)+"%":t.values.sas||""};return l.default.createElement(f.Cell,{width:"12%",cellClickHandler:function(e){return n(t,"sas",e)},className:(0,u.default)("value-cell",{overridden:(0,C.isOverriden)(t[O+"overrideList"],t[O+"unlock"],a,i,o,t.values.sas,"sas"),approved:(r&&a||i&&!w)&&!o,editable:"country"===t.type&&s,historical:d,dimmed:N,ignored:t.ignore_aggregation,generated:t.generatedFields&&t.generatedFields.includes("sas")},{"multiediting-cell":h&&"edit"===A})},"country"===t.type&&s&&l.default.createElement("div",null,l.default.createElement(m.default,{onFocus:function(e){return _(e,t.country_id)},onBlur:function(e,a){var n=a.isValid&&""!==a.value?{value:parseInt(a.value,10)/100,isValid:!0}:a;+n.value!=+t.values.sas&&g(t.country_id,O+"sas",n,null,t.values.sas)},onKeyDown:function(e){"Escape"!==e.key&&"Enter"!==e.key||e.target.blur()},narrow:!0,status:!I||t.invalidFields&&t.invalidFields.includes("sas")?"error":"success",value:D(),validators:[function(e){return""===e||c.default.isInt(e,{gt:0,lt:101})}],withoutBorder:!0,textAlign:"left",placeholder:""})),h&&"unlock"===A&&l.default.createElement(f.Cell,{className:"flex-col-12 multiediting-cell unlock"},l.default.createElement(y.default,{type:S.ENROLMENT_TABLE_FIELDS_LIST.SAS,unlock:t.unlock,onChange:g})),h&&"edit"===A&&l.default.createElement(v.default,{key:"multiediting_"+S.ENROLMENT_TABLE_FIELDS_LIST.SAS,value:D(),onChange:function(e){return g(null,S.ENROLMENT_TABLE_FIELDS_LIST.SAS,e.replace(/%$/,"")/100,"multiediting")},type:"text",validators:[function(e){return""===e||c.default.isInt(e,{gt:0,lt:101})}],isValid:R.sas,isEditMode:!0}),("country"!==t.type||!s)&&!h&&[l.default.createElement(E.default,{isNotEmpty:t.values.sas&&t.values.sas>0,key:1,generatedFields:t.generatedFields,cellName:S.ENROLMENT_TABLE_FIELDS_LIST.SAS}),l.default.createElement("div",{key:2,className:(0,u.default)("cell-renderer-not-editable-view",{error:t.values.invalids&&t.values.invalids.includes(S.ENROLMENT_TABLE_FIELDS_LIST.SAS)||t.invalidFields&&t.invalidFields.includes(S.ENROLMENT_TABLE_FIELDS_LIST.SAS)})},t.values.sas?Math.round(100*t.values.sas)+"%":"")])};O.propTypes={cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,isEditing:o.default.bool,activeRowValidationState:o.default.object,fromPrevApproved:o.default.bool,multiEditType:o.default.string},O.defaultProps={rowData:null,isMultiediting:!1,isEditable:!1,isEditing:!1,dataPrefix:"",isApproved:!1,isPrevApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",datePickerFormat:void 0,activeRowValidationState:{},fromPrevApproved:!1,multiEditType:"edit"},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(10),c=n(d),f=a(12),p=a(99),m=n(p),h=a(127),v=n(h),_=a(126),E=n(_),g=a(113),y=n(g),S=a(7),b=a(46),C=a(64),O=function(e){var t=e.cellName,a=e.rowData,n=e.isTracking,r=e.cellClickHandler,i=e.isApproved,o=e.isAdjusted,s=e.adjustedRow,d=e.isEditable,p=e.historicalEnabled,h=e.historicalDataKey,_=e.isMultiediting,g=e.onFocusCountry,O=e.startDate,T=e.datePickerFormat,R=e.onDataChange,w=e.dataPrefix,A=e.filterDate,I=e.activeRowValidationState,N=e.tooltip,D=e.rowFullData,P=e.fromPrevApproved,L=e.multiEditType,M=(0,S.isCellDimmed)(t,a,h,p),x=(0,c.default)();return l.default.createElement(f.Cell,{width:"22%",cellClickHandler:function(e){return r(a,t,e)},className:(0,u.default)("value-cell",{overridden:(0,C.isOverriden)(a[w+"overrideList"],a[w+"unlock"],n,o,s,a.values[t],t),approved:(i&&n||o&&!P)&&!s,editable:"country"===a.type&&d,historical:p,dimmed:M,ignored:a.ignore_aggregation,generated:a.generatedFields&&a.generatedFields.includes(t)},{"multiediting-cell":_&&"edit"===L})},"country"===a.type&&d&&l.default.createElement("div",null,l.default.createElement(m.default,{simpleView:!0,tooltip:N,onFocus:function(e){return g(e,a.country_id)},fixedHeight:!0,disabledKeyboardNavigation:!0,warningText:D["actual_"+t]&&a.values[t]&&x.isAfter(a.values[t])&&D["actual_"+t].isSame(a.values[t])?b.CHANGING_HISTORIC_DATA:null,defaultDate:O.clone().add(1,"w"),filterDate:A,dateFormat:T,onChange:function(e,n){return R(a.country_id,""+w+t,n,null,a.values[t])},status:a.values.invalids&&a.values.invalids.includes(t)||a.invalidFields&&a.invalidFields.includes(t)?"error":null,validators:[function(e){return c.default.isMoment(e)}],selected:c.default.isMoment(a.values[t])?a.values[t]:null})),_&&"unlock"===L&&l.default.createElement(f.Cell,{className:"flex-col-22 multiediting-cell unlock"},l.default.createElement(E.default,{type:t,unlock:a.unlock,onChange:R})),_&&"edit"===L&&l.default.createElement(v.default,{key:"multiediting_"+t,onChange:function(e){return R(null,t,e,"multiediting")},isValid:I[t],value:a.values[t]||null,type:"date",defaultDate:O.clone().add(1,"w"),filterDate:A,isEditMode:!0}),("country"!==a.type||!d)&&!_&&[l.default.createElement(y.default,{key:1,isNotEmpty:null!==a.values[t]&&void 0!==a.values[t],generatedFields:a.generatedFields,cellName:t}),l.default.createElement("div",{key:2,className:(0,u.default)("cell-renderer-not-editable-view",{error:a.values.invalids&&a.values.invalids.includes(t)||a.invalidFields&&a.invalidFields.includes(t)})},a.values[t]?(0,c.default)(a.values[t]).format("D MMM YY"):" ")])};O.propTypes={cellName:o.default.string.isRequired,cellClickHandler:o.default.func.isRequired,onFocusCountry:o.default.func.isRequired,onDataChange:o.default.func.isRequired,rowData:o.default.object,isMultiediting:o.default.bool,isEditable:o.default.bool,dataPrefix:o.default.string,isApproved:o.default.bool,isAdjusted:o.default.bool,adjustedRow:o.default.bool,isTracking:o.default.bool,historicalEnabled:o.default.bool,historicalDataKey:o.default.string,startDate:o.default.object.isRequired,datePickerFormat:o.default.string,filterDate:o.default.func.isRequired,activeRowValidationState:o.default.object,tooltip:o.default.string,rowFullData:o.default.object,fromPrevApproved:o.default.bool,multiEditType:o.default.string},O.defaultProps={rowData:null,rowFullData:{},isMultiediting:!1,isEditable:!1,isEditing:!1,dataPrefix:"",isApproved:!1,isPrevApproved:!1,isAdjusted:!1,adjustedRow:!1,isTracking:!1,historicalEnabled:!1,historicalDataKey:"",datePickerFormat:void 0,activeRowValidationState:{},tooltip:null,fromPrevApproved:!1,multiEditType:"edit"},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(10),c=n(d),f=a(12),p=function(e){var t=e.rowData,a=e.isTracking;return l.default.createElement(f.CellGroup,{direction:"row",className:(0,u.default)("data-group active",{tracking:a})},l.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("actual",{empty:!t.values.fsiv,ignored:t.ignore_aggregation},"value-cell")},l.default.createElement("div",null,t.values.fsiv?(0,c.default)(t.values.fsiv).format("D MMM YY"):" ")),l.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("actual",{empty:!t.values.sas&&0!==t.values.sas,ignored:t.ignore_aggregation},"value-cell")},l.default.createElement("div",null,t.values.sas||0===t.values.sas?Math.round(100*t.values.sas)+"%":"")),l.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("actual",{empty:!t.values["25_si"],ignored:t.ignore_aggregation},"value-cell")},l.default.createElement("div",null,t.values["25_si"]?(0,c.default)(t.values["25_si"]).format("D MMM YY"):" ")),l.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("actual",{empty:!t.values["50_si"],ignored:t.ignore_aggregation},"value-cell")},l.default.createElement("div",null,t.values["50_si"]?(0,c.default)(t.values["50_si"]).format("D MMM YY"):" ")),l.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("actual",{empty:!t.values["90_si"],ignored:t.ignore_aggregation},"value-cell")},l.default.createElement("div",null,t.values["90_si"]?(0,c.default)(t.values["90_si"]).format("D MMM YY"):" ")))};p.propTypes={rowData:o.default.object,isTracking:o.default.bool},p.defaultProps={rowData:null,isTracking:!1},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(10),c=n(d),f=a(12),p=function(e){var t=e.rowData,a=e.isTracking;return l.default.createElement(f.CellGroup,{direction:"row",className:(0,u.default)("data-group active",{tracking:!0})},l.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("overallocated",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.fsiv,ignored:t.ignore_aggregation},"value-cell")},l.default.createElement("div",null,t.values.fsiv?(0,c.default)(t.values.fsiv).format("D MMM YY"):" ")),l.default.createElement(f.Cell,{width:"12%",className:(0,u.default)("overallocated",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values.sas&&0!==t.values.sas,ignored:t.ignore_aggregation},"value-cell")},l.default.createElement("div",null,t.values.sas||0===t.values.sas?Math.round(100*t.values.sas)+"%":"")),l.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("overallocated",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values["25_si"],ignored:t.ignore_aggregation},"value-cell")},l.default.createElement("div",null,t.values["25_si"]?(0,c.default)(t.values["25_si"]).format("D MMM YY"):" ")),l.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("overallocated",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values["50_si"],ignored:t.ignore_aggregation},"value-cell")},l.default.createElement("div",null,t.values["50_si"]?(0,c.default)(t.values["50_si"]).format("D MMM YY"):" ")),l.default.createElement(f.Cell,{width:"22%",className:(0,u.default)("overallocated",{approved:a&&"generic_overallocated"===t.valuesType},{empty:!t.values["90_si"],ignored:t.ignore_aggregation},"value-cell")},l.default.createElement("div",null,t.values["90_si"]?(0,c.default)(t.values["90_si"]).format("D MMM YY"):" ")))};p.propTypes={rowData:o.default.object,isTracking:o.default.bool},p.defaultProps={rowData:null,isTracking:!1},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),i=n(l),o=a(1),s=n(o),u=a(2),d=n(u),c=a(10),f=n(c),p=a(12),m=a(992),h=n(m),v=a(988),_=n(v),E=a(990),g=n(E),y=a(991),S=n(y),b=a(14),C=a(87),O=a(993),T=n(O),R=function(e){var t=e.rowIndex,a=e.data,n=e.onFocusCountry,l=e.onDataChange,o=e.startDate,s=e.cellClickHandler,u=e.editingCountry,c=e.historicalEnabled,m=e.historicalFilter,v=e.isApproved,E=e.isPrevApproved,y=e.isAdjusted,C=e.isTracking,O=e.activeRowValidationState,R=e.isEditable,w=e.fullData,A=e.fromPrevApproved,I=e.isExactCopy,N=e.multiEditType,D=r({},a[t]),P=w.find(function(e){return e.country_id===D.country_id}),L="adjusted"===D.valuesType,M="generic"===D.valuesType&&(v||y),x=L?"adjusted_":"",k=u===D.country_id,j=k?void 0:"D MMM YY",F=D[x+"errorMessages"]||{},U=R&&!M&&!D.ignore_aggregation&&(!u||u===D.country_id||a.every(function(e){return!e.values.invalids||e.values.invalids&&0===e.values.invalids.length})),V="multiediting"===D.type,B="historical_reference_data_by_"+m.toLowerCase(),H=function(e){return e>=o.clone().add(1,"d")},G={cellClickHandler:s,onFocusCountry:n,onDataChange:l,isAdjusted:y,isTracking:C,isApproved:v,isPrevApproved:E,historicalEnabled:c,historicalDataKey:B,dataPrefix:x,adjustedRow:L,isEditable:U,isMultiediting:V,rowData:D,activeRowValidationState:O,today:(0,f.default)(),fromPrevApproved:A,isExactCopy:I,multiEditType:N},Y=i.default.createElement(p.CellGroup,{direction:"row",className:(0,d.default)("data-group active",{tracking:C&&!L,adjusted:L})},i.default.createElement(_.default,r({},G,{tooltip:F.fsiv,startDate:o,datePickerFormat:j,rowFullData:P,filterDate:H})),i.default.createElement(g.default,r({},G,{isEditing:k})),i.default.createElement(S.default,r({},G,{rowFullData:P,tooltip:F[b.ENROLMENT_TABLE_FIELDS_LIST.SI_25],startDate:o,datePickerFormat:j,filterDate:H,cellName:b.ENROLMENT_TABLE_FIELDS_LIST.SI_25})),i.default.createElement(S.default,r({},G,{rowFullData:P,startDate:o,datePickerFormat:j,filterDate:H,tooltip:F[b.ENROLMENT_TABLE_FIELDS_LIST.SI_50],cellName:b.ENROLMENT_TABLE_FIELDS_LIST.SI_50})),i.default.createElement(S.default,r({},G,{rowFullData:P,startDate:o,datePickerFormat:j,filterDate:H,tooltip:F[b.ENROLMENT_TABLE_FIELDS_LIST.SI_90],cellName:b.ENROLMENT_TABLE_FIELDS_LIST.SI_90})));return i.default.createElement(p.CellGroup,{direction:"column"},"generic"===D.valuesType&&Y,"generic_overallocated"===D.valuesType&&i.default.createElement(T.default,{rowData:D,isTracking:C}),"actual"===D.valuesType&&i.default.createElement(h.default,{rowData:D,isTracking:C}),"adjusted"===D.valuesType&&Y,"adjusted_overallocated"===D.valuesType&&i.default.createElement(T.default,{rowData:D,isTracking:C}))};R.displayName="SiteInitiationDataCell",R.defaultProps={rowIndex:-1,editingCountry:void 0,isEditable:!1,isApproved:!1,isPrevApproved:!1,isAdjusted:!1,isTracking:!1,historicalEnabled:!1,historicalFilter:C.FILTER_BY.STUDIES,activeRowValidationState:{},fromPrevApproved:!1,isExactCopy:!1,multiEditType:"edit"},R.propTypes={rowIndex:s.default.number,data:s.default.array.isRequired,onFocusCountry:s.default.func.isRequired,cellClickHandler:s.default.func.isRequired,onDataChange:s.default.func.isRequired,startDate:s.default.object.isRequired,editingCountry:s.default.oneOfType([s.default.string,s.default.number]),isEditable:s.default.bool,isApproved:s.default.bool,isPrevApproved:s.default.bool,isAdjusted:s.default.bool,isTracking:s.default.bool,historicalEnabled:s.default.bool,historicalFilter:s.default.oneOf(Object.keys(C.FILTER_BY)),activeRowValidationState:s.default.object,fullData:s.default.array.isRequired,fromPrevApproved:s.default.bool,isExactCopy:s.default.bool,multiEditType:s.default.string},t.default=R},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(12),u=function(e){var t=e.caption;return l.default.createElement(s.CellGroup,null,l.default.createElement(s.Cell,{className:"cell-caption"},l.default.createElement("h3",null,t)),l.default.createElement(s.CellGroup,{direction:"row",className:"header-group"},l.default.createElement(s.Cell,{width:"22%",className:"header-cell"},l.default.createElement("div",null,"FSIV")),l.default.createElement(s.Cell,{width:"12%",className:"header-cell"},l.default.createElement("div",null,"SAS%")),l.default.createElement(s.Cell,{width:"22%",className:"header-cell"},l.default.createElement("div",null,"25% SI")),l.default.createElement(s.Cell,{width:"22%",className:"header-cell"},l.default.createElement("div",null,"50% SI")),l.default.createElement(s.Cell,{width:"22%",className:"header-cell"},l.default.createElement("div",null,"90% SI"))))};u.propTypes={caption:o.default.string.isRequired},t.default=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PopupDialogComponent=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),i=n(l),o=a(1),s=n(o),u=a(67),d=n(u),c=a(2),f=n(c),p=a(512),m=n(p),h=a(519),v=n(h);a(2343);var _=function(e){var t=e.title,a=e.titleIcon,n=e.scenarioName,l=e.children,o=e.isShown,s=e.handleClose,u=e.buttons,c=e.size,p=e.className;if(!o)return null;var h=u&&u.length?u.map(function(e){return r({},e,{key:d.default.generate()})}):i.default.createElement(v.default,{action:s,primary:!0}),_=(0,f.default)("popup-dialog",c,p);return i.default.createElement(m.default,{handleClick:s},i.default.createElement("div",{className:_,onClick:function(e){return e.stopPropagation()}},i.default.createElement("div",{className:"popup-dialog__header"},i.default.createElement("div",{className:"popup-dialog__title"},a,t," ",n?i.default.createElement("span",{className:"popup-dialog__scenario"},n):null)),i.default.createElement("div",{className:"popup-dialog__content"},l),i.default.createElement("div",{className:"popup-dialog__action-panel"},h)))};_.propTypes={buttons:s.default.arrayOf(s.default.element),children:s.default.node.isRequired,handleClose:s.default.func,isShown:s.default.bool.isRequired,size:s.default.oneOf(["sm","md","lg","xl"]),className:s.default.string,title:s.default.oneOfType([s.default.string,s.default.node]),titleIcon:s.default.object,scenarioName:s.default.string},_.defaultProps={buttons:[],handleClose:void 0,size:"md",className:void 0,title:"Title",titleIcon:void 0,scenarioName:void 0};var E=_;t.PopupDialogComponent=E,t.default=i.default.memo(_)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(67),p=n(f),m=a(2),h=n(m);a(2344);var v=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={focused:!1,checked:e.checked},a.handleFocused=a.handleFocused.bind(a),a.handleBlur=a.handleBlur.bind(a),a}return i(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({checked:e.checked}),(e.inFocus&&!this.state.focused||e.inFocus&&!this.props.inFocus)&&(this.setState({focused:!0}),this.input.focus())}},{key:"handleKeyPress",value:function(e){9===e.keyCode&&null!==this.props.tabPress&&(this.input.blur(),this.props.tabPress())}},{key:"handleFocused",value:function(){this.setState({focused:!0})}},{key:"handleBlur",value:function(){this.setState({focused:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.disabled,n=t.label,r=t.name,l=t.onChange,i=t.value,o=t.tabInd,s=this.state,d=s.focused,c=s.checked,f=p.default.generate(),m=(0,h.default)("fpo-radio-button-container",{"fpo-radio-button-disabled":a}),v=u.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},u.default.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeOpacity:".3",strokeWidth:"2",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18z"})),_=u.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},u.default.createElement("g",{fill:"none",fillRule:"evenodd"},u.default.createElement("circle",{cx:"12",cy:"12",r:"11",stroke:"#5291DD",strokeWidth:"2"}),u.default.createElement("circle",{cx:"12",cy:"12",r:"9",stroke:"#000",strokeWidth:"2"}),u.default.createElement("circle",{cx:"12",cy:"12",r:"5",fill:"#000"}))),E=u.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},u.default.createElement("g",{fill:"none",fillRule:"evenodd"},u.default.createElement("circle",{cx:"12",cy:"12",r:"9",stroke:"#000",strokeWidth:"2"}),u.default.createElement("circle",{cx:"12",cy:"12",r:"5",fill:"#000"}))),g=u.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},u.default.createElement("g",{fill:"none",fillRule:"evenodd",strokeWidth:"2"},u.default.createElement("circle",{cx:"12",cy:"12",r:"11",stroke:"#5291DD"}),u.default.createElement("circle",{cx:"12",cy:"12",r:"9",stroke:"#000"}))),y=u.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},u.default.createElement("circle",{cx:"12",cy:"12",r:"9",fill:"none",fillRule:"evenodd",stroke:"#000",strokeWidth:"2"}));return u.default.createElement("div",{className:m},u.default.createElement("input",{ref:function(t){e.input=t},tabIndex:o,checked:c,onKeyDown:function(t){9===t.keyCode&&(t.preventDefault(),e.handleKeyPress(t))},className:"fpo-toggle-input",disabled:a,onChange:function(){return l(i)},onFocus:this.handleFocused,onBlur:this.handleBlur,id:f,name:r,type:"radio",value:i}),u.default.createElement("label",{htmlFor:f,onClick:function(){return!a&&!c&&l(i)}},u.default.createElement("span",null,function(){return a?v:c&&d?_:c?E:d?g:y}()),u.default.createElement("span",null,n)))}}]),t}(u.default.PureComponent);v.propTypes={checked:c.default.bool,disabled:c.default.bool,inFocus:c.default.bool,label:c.default.string.isRequired,name:c.default.string.isRequired,onChange:c.default.func.isRequired,tabInd:c.default.number,tabPress:c.default.func,value:c.default.oneOfType([c.default.string,c.default.number,c.default.object]).isRequired},v.defaultProps={checked:null,disabled:!1,inFocus:!1,tabPress:null,tabInd:null},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(30),c=n(d),f=a(1),p=n(f),m=a(67),h=n(m),v=a(2),_=n(v),E=a(521),g=n(E),y=a(522),S=n(y),b=a(264),C=n(b),O=a(520),T=n(O),R=a(79),w=n(R),A=a(999);a(2348);var I=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.refreshState=a.refreshState.bind(a),a.state={firstItemIndex:0,lastItemIndex:-1},a}return i(t,e),o(t,[{key:"componentWillMount",value:function(){this._isMounted=!0}},{key:"componentDidMount",value:function(){this.domNode=c.default.findDOMNode(this),this.props.useWindowing&&(this.refreshState(),document.addEventListener("scroll",this.refreshState),document.addEventListener("resize",this.refreshState))}},{key:"componentWillReceiveProps",value:function(e){var t=e.rowsCount,a=e.rowHeight;e.useWindowing&&this.setStateIfNeeded(this.domNode,window,t,a)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,document.removeEventListener("scroll",this.refreshState),document.removeEventListener("resize",this.refreshState)}},{key:"setStateIfNeeded",value:function(e,t,a,n,r){var l=(0,A.getVisibleItemBounds)(e,t,a,n,r);l||0!==a||this.setState({firstItemIndex:-1,lastItemIndex:-1}),void 0!==l&&(l.firstItemIndex>l.lastItemIndex||l.firstItemIndex===this.state.firstItemIndex&&l.lastItemIndex===this.state.lastItemIndex||this.setState(l))}},{key:"refreshState",value:function(){if(this._isMounted){var e=this.props,t=e.rowsCount,a=e.rowHeight;this.setStateIfNeeded(this.domNode,window,t,a)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.rowsCount,n=t.children,r=t.headerHeight,l=t.rowHeight,i=t.width,o=t.onRowDoubleClick,s=t.onRowClick,d=t.borders,c=t.noHeader,f=t.stickyHeader,p=t.stickyPosition,m=t.useWindowing,v=t.collapsedBody,E=function(){if(!(n instanceof Array||n.type&&n.type.displayName&&"FlexTableColumn"===n.type.displayName))return n}(),g=function(){return n instanceof Array?n:E?E.props.children instanceof Array?E.props.children:[E.props.children]:[n]}(),y=function(e){var t=g.filter(function(e){return!e.props.hidden}).map(function(t){return u.default.cloneElement(t,{key:t.props.columnName?"column-"+t.props.columnName+"-"+e:h.default.generate(),rowIndex:e})});return E?u.default.cloneElement(E,{key:"row-"+e,rowHeight:l,rowIndex:e,children:t}):u.default.createElement(S.default,{key:"row-"+e,rowHeight:l,onRowClick:s,onRowDoubleClick:o,rowIndex:e},t)},b=i?i+"px":"100%",C=this.state.firstItemIndex*l;return u.default.createElement("div",{style:{width:b},className:(0,_.default)("react-flex-table","react-flex-table__table",{"react-flex-table__borders":!0===d},{"react-flex-table__inner-borders":d&&"inner"===d},{"react-flex-table_no-header":!0===c})},!c&&function(){var e=u.default.createElement("div",{className:"react-flex-table__header",style:{height:r+"px"}},g.filter(function(e){return!e.props.hidden}).map(function(e){return u.default.cloneElement(e,{key:e.props.columnName?"column-"+e.props.columnName+"-header":h.default.generate(),rowIndex:-1})}));return f?u.default.createElement(w.default,{key:h.default.generate(),style:{top:p+"px"}},e):e}(),u.default.createElement("div",{className:(0,_.default)("react-flex-table_body",{hidden:v}),ref:function(t){e.container=t},style:{paddingTop:C}},function(){var t=[];if(!m){for(var n=0;n<a;n+=1)t.push(y(n));return t}var r=e.state,l=r.firstItemIndex,i=r.lastItemIndex;if(-1===i)return t;for(var o=l;o<i+1;o+=1)t.push(y(o));return t}()))}}]),t}(s.Component);I.propTypes={borders:p.default.oneOfType([p.default.bool,p.default.string]),children:p.default.node.isRequired,headerHeight:p.default.number,onRowClick:p.default.func,onRowDoubleClick:p.default.func,rowHeight:p.default.number,rowsCount:p.default.number.isRequired,width:p.default.number,noHeader:p.default.bool,stickyHeader:p.default.bool,stickyPosition:p.default.number,useWindowing:p.default.bool,collapsedBody:p.default.bool},I.defaultProps={borders:!1,headerHeight:30,rowHeight:30,onRowClick:void 0,onRowDoubleClick:void 0,width:void 0,noHeader:!1,stickyHeader:!1,stickyPosition:0,useWindowing:!1,collapsedBody:!1},I.Table=I,I.Column=g.default,I.Row=S.default,I.Cell=C.default,I.CellGroup=T.default,t.default=I},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t){return void 0!==t&&t?(t.offsetTop||0)+e(t.offsetParent):0},r=function(e){return e.pageYOffset?e.pageYOffset:e.document?e.document.documentElement&&e.document.documentElement.scrollTop?e.document.documentElement.scrollTop:e.document.body&&e.document.body.scrollTop?e.document.body.scrollTop:0:e.scrollY||e.scrollTop||0},l=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;if(t&&l&&0!==a){var o=t.innerHeight,s=t.clientHeight,u=o||s;if(u){var d=r(t),c=d+u,f=n(e)-n(t),p=l*a,m=Math.max(0,d-f),h=Math.max(0,Math.min(p,c-f));return{firstItemIndex:Math.max(0,Math.floor(m/l)-i),lastItemIndex:Math.min(a,Math.ceil(h/l)+i)-1}}}};t.topFromWindow=n,t.getElementTop=r,t.getVisibleItemBounds=l},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.textSortTable=t.SortTypes=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),m=n(p),h=a(2),v=n(h),_=a(264),E=n(_);a(2349);var g={ASC:"ASC",DESC:"DESC"},y=function(e,t){return function(a,n){var r=a[e],l=n[e],i=0;return r>l&&(i=1),r<l&&(i=-1),0!==i&&t===g.DESC&&(i*=-1),i}},S=function(e){function t(e){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onSortChange=a.onSortChange.bind(a),a}return s(t,e),d(t,[{key:"onSortChange",value:function(e){e.preventDefault();var t=g.DESC,a=g.ASC;this.props.onSortChange&&this.props.onSortChange(this.props.sortKey,this.props.sortDir?function(e){return e===a?t:a}(this.props.sortDir):a)}},{key:"render",value:function(){var e=this.props,t=e.sortDir,a=e.children,n=e.className,i=l(e,["sortDir","children","className"]),o=(0,v.default)(r({},n,n));return f.default.createElement(E.default,u({},i,{className:"react-flex-table__sort-header-cell "+o}),f.default.createElement("span",{onClick:this.onSortChange},a," ",function(){var e=(0,v.default)({"react-flex-table__sort-header-cell_sort-desc":t===g.ASC},{"react-flex-table__sort-header-cell_sort-asc":t===g.DESC});return f.default.createElement("div",{className:"react-flex-table__sort-header-cell_sort-dir "+e},t?"":"")}()))}}]),t}(c.Component);S.propTypes={children:m.default.node.isRequired,className:m.default.string,columnName:m.default.string,onSortChange:m.default.func,sortDir:m.default.oneOf([g.ASC,g.DESC]),sortKey:m.default.string.isRequired},S.defaultProps={className:void 0,columnName:void 0,onSortChange:void 0,sortDir:void 0},t.default=S,t.SortTypes=g,t.textSortTable=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1002),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(506),p=n(f);a(2352);var m=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={mode:1},a}return i(t,e),o(t,[{key:"render",value:function(){var e=this;return 1===this.state.mode?u.default.createElement("div",{className:"region-context-menu"},u.default.createElement("div",{className:"region-context-menu__menu-mode"},!this.props.hideRemoveRegions&&u.default.createElement("div",{className:"region-context-menu__remove region-context-menu__item"},u.default.createElement("span",{onClick:function(t){t.stopPropagation(),e.props.onRemoveRegion&&e.props.onRemoveRegion()}}," Remove region ")),u.default.createElement("div",{className:"region-context-menu__add region-context-menu__item"},u.default.createElement("span",{onClick:function(t){t.stopPropagation(),e.setState({mode:2})}}," Include country ")))):u.default.createElement("div",{className:"region-context-menu"},u.default.createElement("div",{className:"region-context-menu__addcountry-mode"},u.default.createElement(p.default,{countries:this.props.countries,disabledCountries:this.props.assignedCountries,height:190,onSelect:this.props.onAddCountry})))}}]),t}(u.default.Component);m.propTypes={countries:c.default.array,assignedCountries:c.default.array,onRemoveRegion:c.default.func,onAddCountry:c.default.func,hideRemoveRegions:c.default.bool},m.defaultProps={countries:[],assignedCountries:[],onRemoveRegion:void 0,onAddCountry:void 0,hideRemoveRegions:!1},t.default=m},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(85),u=n(s),d=a(51),c=n(d);a(2353);var f=function(e){var t=e.listItems,a=e.nameFieldName,n=e.idFieldName,r=e.width,i=e.height,o=e.onChange,s=e.selectedItems,d=e.disabledItems,f={width:r,height:i},p=t.map(function(e){return l.default.createElement("div",{key:"list-item_"+e[a],className:"list-box-item"},l.default.createElement(c.default,{disabled:-1!==d.indexOf(e[n]),label:e[a],checked:-1!==s.indexOf(e[n]),onChange:function(t){return o(e[n],t)}}))});return l.default.createElement("div",{className:"fpo-list-box-container",style:{height:function(){return t.length>4?240:1===t.length?44:44*t.length+60}()+"px"}},p.length>1?l.default.createElement("div",{className:"list-box-control"},l.default.createElement(c.default,{label:"Select all",checked:function(){return s.length===t.length}(),onChange:function(e){return o("all",e)}})):null,l.default.createElement(u.default,{style:f,autoHide:!1},p))};f.defaultProps={height:168,listItems:[],disabledItems:[],idFieldName:"id",nameFieldName:"name",width:240},f.propTypes={height:o.default.number,idFieldName:o.default.string,nameFieldName:o.default.string,onChange:o.default.func.isRequired,selectedItems:o.default.array.isRequired,disabledItems:o.default.array,listItems:o.default.array,width:o.default.number},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),f=a(1),p=n(f),m=a(50),h=n(m),v=a(523),_=n(v),E=a(1003),g=n(E);a(795);var y=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected:[],activeRegion:null,regions:e.regionsCountriesList},a.handleRegionClick=a.handleRegionClick.bind(a),a.state.regionStatistic=a.updateStatistic(),a}return i(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;(0,h.default)(e.regionsCountriesList,this.props.regionsCountriesList)||this.setState({regions:e.regionsCountriesList},function(){return t.setState({regionStatistic:t.updateStatistic()})})}},{key:"updateStatistic",value:function(){return this.state.regions.reduce(function(e,t){var a=e;a[t.id]={total:t.countries.length-(t.isCountryRegion?0:1),selected:0};var n=t.countries.reduce(function(e,n){var r=e;return n.isSelected&&n.id!=="unspecifiedCountry_"+t.id?(r[0]=e[0]+1,r):n.isSelected&&n.id==="unspecifiedCountry_"+t.id?(r[1]=e[1]+1,r):(n.isSelectedAsRegion&&(a[t.id].selectedRegion=!0),e)},[0,0]),r=s(n,2),l=r[0],i=r[1];return a[t.id].selected=l,a[t.id].selectedUnspecified=i,a},{})}},{key:"handleRegionClickInRegionMode",value:function(e){var t=this.state.regions.findIndex(function(t){return t.id===e});if(-1===t)return!1;var a=Object.assign({},this.state.regions[t]),n=!a.countries[0].isSelected;a.countries[0].isSelected=n;var r=this.state.regions.slice();r.splice(t,1,a);var l=Object.assign({},this.state.regionStatistic);return l[e].selected=n?l[e].selected+1:l[e].selected-1,this.setState({regions:r,regionStatistic:l,activeRegion:this.state.activeRegion===e?null:e}),this.valuesChanged(),!0}},{key:"handleRegionClickInCountryMode",value:function(e){this.setState({activeRegion:this.state.activeRegion===e?null:e})}},{key:"handleRegionClick",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.handleRegionClickInRegionMode(e):this.handleRegionClickInCountryMode(e)}},{key:"handleCountrySelection",value:function(e,t,a){var n=this.state.regions.findIndex(function(t){return t.id===e});if(-1===n)return!1;var r=o({},this.state.regions[n]);r.countries.forEach(function(e){var n=e;"all"!==t&&t!==e.id||n.forceDisabled||(n.isSelected=a)});var l=Object.assign({},this.state.regionStatistic),i=this.state.regions.slice();return i.splice(n,1,r),"all"===t?a?l[e].selected=r.countries.reduce(function(e,t){var a=e;return t.isSelected&&(a+=1),a},0):(l[e].selected=0,l[e].selectedUnspecified=0):t!=="unspecifiedCountry_"+e?l[e].selected=a?l[e].selected+1:l[e].selected-1:l[e].selectedUnspecified=a?l[e].selectedUnspecified+1:l[e].selectedUnspecified-1,this.setState({regions:i,regionStatistic:l}),this.valuesChanged(),!0}},{key:"valuesChanged",value:function(){var e=this.state,t=e.regionStatistic,a=e.regions;if(!Object.values(t).some(function(e){return 0!==e.selected||0!==e.selectedUnspecified}))return void this.props.onChange([]);var n=a.reduce(function(e,t){var a=t.countries.filter(function(e){return e.isSelected});if(0!==a.length){var n=Object.assign({},t,{countries:a});e.push(n)}return e},[]);this.props.onChange(n)}},{key:"render",value:function(){var e=this,t=this.props,a=t.disabled,n=t.width,r=this.state.regions.map(function(t){var r=!1,l=t.countries.reduce(function(e,a){return a.isSelected&&(e.push(a.id),a.id==="unspecifiedCountry_"+t.id&&(r=!0)),e},[]),i=t.countries.reduce(function(e,t){return t.forceDisabled&&e.push(t.id),e},[]),o=t.isCountryRegion&&t.countries[0]&&!!t.countries[0].forceDisabled;return c.default.createElement("div",{key:t.id},c.default.createElement(_.default,{disabled:a||t.filtered||o,regionName:t.name,showStat:!1,onClick:function(){return e.handleRegionClick(t.id,t.isCountryRegion)},hasUnspecifiedCountry:r,isSelected:e.state.regionStatistic[t.id].selected>0||e.state.regionStatistic[t.id].selectedUnspecified>0,selectedCountries:e.state.regionStatistic[t.id].selected,totalCountries:e.state.regionStatistic[t.id].total}),e.state.activeRegion!==t.id||t.isCountryRegion?null:c.default.createElement(g.default,{width:n,onChange:function(a,n){return e.handleCountrySelection(t.id,a,n)},selectedItems:l,disabledItems:i,listItems:t.countries}))});return c.default.createElement("div",{key:"event-country-selector",style:{outline:"0px",width:n},className:"fpo-region-country-selector",onKeyDown:function(e){return e.preventDefault()},onKeyUp:function(t){return e.tabPressActions(t)},ref:function(t){e.form=t}},c.default.createElement("div",{className:"regions-list"},r))}}]),t}(d.Component);y.defaultProps={disabled:!1,filterCountries:[],width:240},y.propTypes={disabled:p.default.bool,onChange:p.default.func.isRequired,regionsCountriesList:p.default.array.isRequired,width:p.default.number},t.default=y},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),f=a(1),p=n(f),m=a(31),h=n(m),v=a(523),_=n(v),E=a(934),g=n(E);a(795);var y=a(541),S=n(y),b=function(e,t,a){var n=!1;if(a&&a.length){var r=a.find(function(t){return"Unspecified country"===t.country_name&&t.region_name===e.name});r&&r.constraint===t.toUpperCase()&&(n=!0)}return{id:"unspecifiedCountry_"+e.id,name:"Unspecified country",region_id:e.id,isSelectedAsRegion:!1,isSelected:n}},C=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected:[],activeRegion:null,regionStatistic:null},a.handleRegionClick=a.handleRegionClick.bind(a),a.state.regions=a.props.regionsCountriesList.map(function(e){var t=(0,h.default)(e);return 1===t.countries.length?t.isCountryRegion=!0:t.countries.find(function(e){return"Unspecified country"===e.name})||(t.countries=[b(t,a.props.tabName,a.props.scenarioCountries)].concat(t.countries)),t}),a.state.regionStatistic=a.updateStatistic(),a}return i(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){e.activeTab!==this.props.activeTab&&this.setState({activeRegion:null})}},{key:"updateStatistic",value:function(){return this.state.regions.reduce(function(e,t){var a=e;a[t.id]={total:t.countries.length-(t.isCountryRegion?0:1),selected:0};var n=t.countries.reduce(function(e,n){var r=e;return n.isSelected&&n.id!=="unspecifiedCountry_"+t.id?(r[0]=e[0]+1,r):n.isSelected&&n.id==="unspecifiedCountry_"+t.id?(r[1]=e[1]+1,r):(n.isSelectedAsRegion&&(a[t.id].selectedRegion=!0),e)},[0,0]),r=s(n,2),l=r[0],i=r[1];return a[t.id].selected=l,a[t.id].selectedUnspecified=i,a},{})}},{key:"handleRegionClickInRegionMode",value:function(e){var t=this.props.selectorMode===S.default.REGIONS?"isSelectedAsRegion":"isSelected",a=this.state.regions.findIndex(function(t){return t.id===e});if(-1===a)return!1;var n=Object.assign({},this.state.regions[a]),r=b(e),l=n.isCountryRegion?0:n.countries.findIndex(function(e){return r.name===e.name}),i=!n.countries[l][t];n.countries[l][t]=i;var o=this.state.regions.slice();o.splice(a,1,n);var s=Object.assign({},this.state.regionStatistic);return this.props.selectorMode===S.default.REGIONS?s[e].selectedRegion=!s[e].selectedRegion:s[e].selected=i?s[e].selected+1:s[e].selected-1,this.setState({regions:o,regionStatistic:s,activeRegion:this.state.activeRegion===e?null:e}),this.valuesChanged(),!0}},{key:"handleRegionClickInCountryMode",value:function(e){this.setState({activeRegion:this.state.activeRegion===e?null:e})}},{key:"handleRegionClick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.props.selectorMode===S.default.REGIONS||t?this.handleRegionClickInRegionMode(e):this.handleRegionClickInCountryMode(e)}},{key:"handleCountrySelection",value:function(e,t,a){var n=this.state.regions.findIndex(function(t){return t.id===e});if(-1===n)return!1;var r=o({},this.state.regions[n]),l=this.props.filterCountries.find(function(e){return e.id===r.id});r.countries.forEach(function(n){var r=n;if("all"===t){var i={};l&&(i=l.countries.find(function(e){return e.id===n.id})||{}),a?n.id!=="unspecifiedCountry_"+e&&n.id!==i.id&&(r.isSelected=a):r.isSelected=a}else t===n.id&&(r.isSelected=a)});var i=Object.assign({},this.state.regionStatistic),s=this.state.regions.slice();return s.splice(n,1,r),"all"===t?a?i[e].selected=r.countries.reduce(function(e,t){var a=e;return t.isSelected&&(a+=1),a},0):(i[e].selected=0,i[e].selectedUnspecified=0):t!=="unspecifiedCountry_"+e?i[e].selected=a?i[e].selected+1:i[e].selected-1:i[e].selectedUnspecified=a?i[e].selectedUnspecified+1:i[e].selectedUnspecified-1,this.setState({regions:s,regionStatistic:i}),this.valuesChanged(),!0}},{key:"valuesChanged",value:function(e){var t=e;e||(t=this.props.selectorMode);var a=t===S.default.REGIONS?"isSelectedAsRegion":"isSelected";if(!Object.values(this.state.regionStatistic).some(function(e){return t===S.default.COUNTRIES&&(0!==e.selected||0!==e.selectedUnspecified)||t===S.default.REGIONS&&e.selectedRegion}))return void this.props.onChange([]);var n=this.state.regions.reduce(function(e,t){var n=t.countries.filter(function(e){return e[a]});if(0!==n.length){var r=Object.assign({},t,{countries:n});e.push(r)}return e},[]);this.props.onChange(n)}},{key:"tabPressActions",value:function(e){9===e.keyCode&&null!==this.props.tabPress&&(this.form.blur(),this.props.tabPress())}},{key:"render",value:function(){var e=this,t=this.props,a=t.recommendedByAnalytics,n=t.disabled,r=t.width,l=t.disabledCountries,i=void 0===l?[]:l,s=this.state.regions.map(function(t){var a=o({},t),n=e.props.filterCountries.find(function(e){return e.id===a.id});return n&&(a.isCountryRegion?a.filtered=!0:a.countries=a.countries.map(function(e){var t=o({},e);return n.countries.find(function(e){return e.name===t.name})&&(t.filtered=!0),t})),a}),u=s.map(function(t){var l=!1,o=t.countries.reduce(function(e,a){return a.isSelected&&(e.push(a.id),a.id==="unspecifiedCountry_"+t.id&&(l=!0)),e},[]),s=[],u=a.find(function(e){return e.name===t.name});u&&(s=u.countries);var d=void 0!==i.find(function(e){return e.region_name===t.name&&e.regionHasSingleCountry});return c.default.createElement("div",{key:t.id},c.default.createElement(_.default,{disabled:n||t.filtered||d,isRecommendedByAnalytics:!!u,regionName:t.name,showStat:!1,onClick:function(){return e.handleRegionClick(t.id,t.isCountryRegion)},hasUnspecifiedCountry:l,isSelected:e.state.regionStatistic[t.id].selectedRegion&&e.props.selectorMode===S.default.REGIONS||(e.state.regionStatistic[t.id].selected>0||e.state.regionStatistic[t.id].selectedUnspecified>0)&&e.props.selectorMode===S.default.COUNTRIES,selectedCountries:e.state.regionStatistic[t.id].selected,totalCountries:e.state.regionStatistic[t.id].total}),e.props.selectorMode!==S.default.COUNTRIES||e.state.activeRegion!==t.id||t.isCountryRegion?null:c.default.createElement(g.default,{width:r,disabledCountries:i,recommendedByAnalyticsCountries:s,activeTab:e.props.activeTab,onChange:function(a,n){return e.handleCountrySelection(t.id,a,n)},selectedItems:o,listItems:t.countries}))});return c.default.createElement("div",{key:"RCS",style:{outline:"0px",width:r},className:"fpo-region-country-selector",onKeyDown:function(e){return e.preventDefault()},onKeyUp:function(t){return e.tabPressActions(t)},ref:function(t){e.form=t},tabIndex:this.props.tabInd},c.default.createElement("div",{className:"regions-list"},u))}}]),t}(d.Component);C.defaultProps={selectorMode:S.default.COUNTRIES,tabPress:function(){},disabled:!1,filterCountries:[],tabInd:-1,width:240,disabledCountries:[],recommendedByAnalytics:[],scenarioCountries:[]},C.propTypes={activeTab:p.default.string.isRequired,tabName:p.default.string.isRequired,scenarioCountries:p.default.array,disabled:p.default.bool,onChange:p.default.func.isRequired,regionsCountriesList:p.default.array.isRequired,selectorMode:p.default.number,tabInd:p.default.number,tabPress:p.default.func,filterCountries:p.default.array,width:p.default.number,disabledCountries:p.default.array,recommendedByAnalytics:p.default.array},t.default=C},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1007),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveScenarioDialog=void 0;var r=a(0),l=n(r),i=a(1),o=n(i),s=a(39),u=a(46),d=function(e){var t=e.isShown,a=e.scenarioName,n=e.onClose,r=e.onSubmit;return l.default.createElement(s.PopupDialog,{title:"Delete scenario",isShown:t,handleClose:n,buttons:[l.default.createElement(s.ActionButton,{className:"optimise-scenario-dialog__button-cancel",action:n},u.CANCEL),l.default.createElement(s.ActionButton,{action:r,primary:!0},u.CONFIRM)]},l.default.createElement("div",null,"Are you sure you want to permanently delete ",l.default.createElement("b",null,a,"?")))};d.defaultProps={isShown:!1,onClose:void 0},d.propTypes={isShown:o.default.bool,scenarioName:o.default.string.isRequired,onClose:o.default.func,onSubmit:o.default.func.isRequired},t.RemoveScenarioDialog=d,t.default=l.default.memo(d)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(39),p=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleConfirm=a.handleConfirm.bind(a),a.handleCancel=a.handleCancel.bind(a),a}return i(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"handleConfirm",value:function(){this.props.onSubmit()}},{key:"handleCancel",value:function(){this.props.onClose()}},{key:"render",value:function(){return u.default.createElement(f.PopupDialog,{title:"Unsaved changes",className:"unsaved-changes-dialog",isShown:this.props.isShown,buttons:[u.default.createElement(f.ActionButton,{className:"unsaved-changes-dialog__button-cancel",action:this.handleCancel},"Discard"),u.default.createElement(f.ActionButton,{action:this.handleConfirm,primary:!0},"Continue")]},u.default.createElement("div",{className:"unsaved-changes-dialog-content"},"There are unsaved changes on this page"))}}]),t}(s.Component);p.defaultProps={actionType:"",callbackActions:[]},p.propTypes={onSubmit:c.default.func.isRequired,onClose:c.default.func.isRequired,isShown:c.default.bool.isRequired},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(6);a(2354);var u=function(e){var t=e.numberOfEvents;return l.default.createElement("div",{className:"scenario-events-title__container"},l.default.createElement("div",{className:"scenario-events-title__wrapper"},l.default.createElement("h1",null,"Events"),l.default.createElement("span",{className:"scenario-events-title__separator"},s.Icons.SEPARATOR),l.default.createElement("span",{className:"scenario-events-title__icon"},s.Icons.EVENT),l.default.createElement("span",{className:"scenario-events-title__value"},t)))};u.propTypes={numberOfEvents:o.default.number},u.defaultProps={numberOfEvents:0},t.default=u},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1011),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(6);a(2355);var u=function(e){var t=e.handleCloseDialog;return l.default.createElement("div",{className:"scenario-failed-status-bar"},s.Icons.ARROW_RIGHT_SQUARE_FILLED,l.default.createElement("span",{className:"dash"}),s.Icons.CIRCLE_FILLED_LARGE,l.default.createElement("span",{className:"message"},"Optimization Failed"),l.default.createElement("div",{className:"scenario-failed-closeContainer",onClick:t},s.Icons.CROSS_O))};u.propTypes={handleCloseDialog:o.default.func.isRequired},t.default=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return e.toString().split("").reduce(function(e,t){return e+="1"===t||"-"===t?6:11},0)-1}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(2),d=n(u),c=a(10),f=n(c),p=a(6);a(2356);var m=a(22),h=a(61),v=n(h),_=a(13),E=n(_),g={ORANGE:"#fcb13b",PURPLE:"#9c28c6"},y=function(e){var t=e.target,a=e.predicted,n=e.fpfv_lpfv,l=e.actual_fpfv_lpfv,o=e.fpp_fpfv,s=e.actual_date,u=e.startDate,c=e.actual_fpp_fpfv,h=e.actual_f_lpft,_=e.adjusted_fpp_fpfv,y=e.adjusted_fpfv_lpfv,S=e.adjustedLpft,b=e.showAdjusted,C=e.showActual,O=e.isOverallocated,T=e.isCohortView,R=e.isIgnored,w=e.isExactCopy;return i.default.createElement(m.Col,{offset:1,width:9,className:"scenario-highlights-bar__content"},i.default.createElement("div",{className:"icon-24x"},p.Icons.DATE_RANGE),i.default.createElement("div",{className:"fpp-fpfv__widget"},i.default.createElement(v.default,{className:"scenario-highlights-bar__separator"}),i.default.createElement(E.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:i.default.createElement("span",null,"Startup")},i.default.createElement("span",{className:"fpp-fpfv__label"},"FP - FPFV")),i.default.createElement("span",{className:"icon-24x"},p.Icons.ARROW_RIGHT),function(){return R?null:i.default.createElement("span",{className:"font-bold fpp-fpfv__caption"},i.default.createElement("div",{className:"fpp-fpfv__value"},o),o?"d":"-")}(),function(){if(!C)return null;var e=c?r(c):7;return i.default.createElement("span",{className:"font-bold fpp-fpfv__caption"},i.default.createElement("div",{className:"fpp-fpfv__value actual-value",style:{borderBottomStyle:"hidden"}},c||"-"),c?"d":"",i.default.createElement("div",{className:"underline-container"},i.default.createElement("svg",{height:"36px",width:e+"px"},i.default.createElement("g",null,i.default.createElement("line",{x2:e,y1:"35",y2:"35",className:"line siv",style:{strokeWidth:"3px",stroke:g.ORANGE,strokeDasharray:2.5}})))))}(),function(){if(!b||R)return null;var e=_&&u?u.clone().add(_,"d"):null,t=_;return s&&e&&(t=_&&(s.isSameOrAfter(e)||w)?_:null),i.default.createElement("span",{className:"font-bold fpp-fpfv__caption"},i.default.createElement("div",{className:"fpp-fpfv__value adjusted-value"},t||"-"),t?"d":"")}()),i.default.createElement("div",{className:"fpfv-lpfv__widget"},i.default.createElement(v.default,{className:"scenario-highlights-bar__separator"}),i.default.createElement(E.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:i.default.createElement("span",null,"Study Screening")},i.default.createElement("span",{className:"fpfv-lpfv__label"},"FPFV - LPFV")),i.default.createElement("span",{className:"icon-24x"},p.Icons.ARROW_RIGHT),function(){return R?null:i.default.createElement("span",{className:"font-bold fpfv-lpfv__caption"},i.default.createElement("div",{className:"fpfv-lpfv__value"},n),n?"d":"-")}(),function(){if(!C)return null;var e=l?r(l):7;return i.default.createElement("span",{className:"font-bold fpfv-lpfv__caption"},i.default.createElement("div",{className:"fpfv-lpfv__value actual-value",style:{borderBottomStyle:"hidden"}},l||"-"),l?"d":"",i.default.createElement("div",{className:"underline-container"},i.default.createElement("svg",{height:"36px",width:e+"px"},i.default.createElement("g",null,i.default.createElement("line",{x2:e,y1:"35",y2:"35",className:"line siv",style:{strokeWidth:"3px",stroke:g.PURPLE,strokeDasharray:2.5}})))))}(),function(){return!b||R?null:i.default.createElement("span",{className:"font-bold fpfv-lpfv__caption"},i.default.createElement("div",{className:"fpfv-lpfv__value adjusted-value"},y||"-"),y?"d":"")}(),function(){if(T&&C&&!b||R)return null;var e=a?Math.ceil(f.default.duration(new Date(C?h:t)-new Date(a)).asDays()):-1;if(!C)return i.default.createElement("div",{className:"lpft__widget"},p.Icons.ARROW_RIGHT_LONG,i.default.createElement("span",{style:{padding:"0 8px 0 21px",height:"24px"}},e<0?p.Icons.OFF_TARGET:p.Icons.ON_TARGET),i.default.createElement(v.default,{className:"scenario-highlights-bar__separator"}),i.default.createElement("div",{className:(0,d.default)("lpft__icon",{"bg-green":a&&e>=0},{"bg-red":a&&e<0})},i.default.createElement("span",null,"P/LPFT",i.default.createElement("span",{className:(0,d.default)("lpft__value",{"color-white":a},{"color-black":!a})},a?a.format("DD MMM YYYY"):"-"))));if(b){var n=S?S.diff(t,"days"):null;return i.default.createElement("div",{className:"lpft__widget"},p.Icons.ARROW_RIGHT_LONG,i.default.createElement("span",{style:{padding:"0 8px 0 21px",height:"24px"}},n>0?p.Icons.OFF_TARGET:p.Icons.ON_TARGET),i.default.createElement(v.default,{className:"scenario-highlights-bar__separator"}),i.default.createElement("div",{className:(0,d.default)("lpft__icon",{"bg-green":S&&null!==n&&n<=0},{"bg-red":S&&n&&n>0})},i.default.createElement("span",null,"A/LPFT",i.default.createElement("span",{className:(0,d.default)("lpft__value",{"color-white":S&&s},{"color-black":!S||!s})},S?S.format("DD MMM YYYY"):"-"))))}return i.default.createElement("div",{className:"lpft__widget"},p.Icons.ARROW_RIGHT_LONG,i.default.createElement("span",{style:{padding:"0 8px 0 21px",height:"24px"}},e<0?p.Icons.OFF_TARGET:p.Icons.ON_TARGET),i.default.createElement(v.default,{className:"scenario-highlights-bar__separator"}),i.default.createElement("div",{className:"lpft__icon predicted"},i.default.createElement("span",null,"F/LPFT"),i.default.createElement("span",{className:(0,d.default)("lpft__value",{"color-white":h},{"color-black":!h},{"bg-grey":h&&O},{"bg-green":h&&e<=0&&!O},{"bg-red":h&&e>0&&!O})},h?h.format("DD MMM YYYY"):"-")))}()))};y.defaultProps={target:void 0,predicted:void 0,fpfv_lpfv:void 0,fpp_fpfv:void 0,actual_fpp_fpfv:void 0,actual_fpfv_lpfv:void 0,actual_f_lpft:void 0,adjusted_fpp_fpfv:void 0,adjusted_fpfv_lpfv:void 0,actual_date:void 0,showAdjusted:!1,isOverallocated:!1,isImpact:!1,isCohortView:!1,adjustedLpft:null,isIgnored:!1,isExactCopy:!1},y.propTypes={target:s.default.object,predicted:s.default.object,fpfv_lpfv:s.default.number,fpp_fpfv:s.default.number,actual_fpp_fpfv:s.default.number,actual_fpfv_lpfv:s.default.number,actual_f_lpft:s.default.object,adjusted_fpp_fpfv:s.default.number,adjusted_fpfv_lpfv:s.default.number,showActual:s.default.bool.isRequired,showAdjusted:s.default.bool,actual_date:s.default.object,startDate:s.default.object.isRequired,isOverallocated:s.default.bool,isCohortView:s.default.bool,adjustedLpft:s.default.object,isIgnored:s.default.bool,isExactCopy:s.default.bool},t.default=i.default.memo(y)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1015),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(6),c=a(13),f=n(c),p=a(61),m=n(p);a(796);var h=function(e){var t=e.title,a=e.tooltip,n=e.value,r=e.className;return l.default.createElement("div",{className:(0,u.default)("bar-item",r)},l.default.createElement(m.default,{className:"bar-item-separator"}),l.default.createElement(f.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:l.default.createElement("span",null,a)},l.default.createElement("div",{className:"bar-item-label"},t)),l.default.createElement("span",{className:"bar-arrow-icon"},d.Icons.ARROW_RIGHT),l.default.createElement("div",{className:"bar-item-value"},n))};h.defaultProps={title:"",tooltip:"",value:"",className:null},h.propTypes={className:o.default.string,title:o.default.string,tooltip:o.default.string,value:o.default.oneOfType([o.default.string,o.default.number])},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{approvedScenario:(0,N.getApprovedScenario)(e,{params:{id:t.studyId}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioListTitleBar=void 0;var l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(2),c=n(d),f=a(146),p=a(1014),m=n(p),h=a(13),v=n(h),_=a(61),E=n(_),g=a(78),y=n(g),S=a(355),b=n(S),C=a(100),O=n(C),T=a(112),R=n(T),w=a(17),A=n(w),I=a(7),N=a(55);a(796);var D=function(e){var t=e.title,a=e.patientsNumber,n=e.endDate,r=e.approvedScenario,l=e.studyStatus,o=e.studyOwner,s=e.fp,u=e.fpfvFpft,d=e.showCsmsLink,p=e.onNavigateViewCsmsList,h=l===A.default.ACTIVE||l===A.default.COMPLETED,_=(l===A.default.ACTIVE||l===A.default.COMPLETED)&&null!==r&&void 0!==r,g=r&&r.fullData.find(function(e){return"rollup"===e.type}),S=g&&1===g.actual_overallocation;return i.default.createElement("div",{className:(0,c.default)("scenario-list-title_container",{expanded:_})},i.default.createElement("div",{className:"scenario-list-title__wrapper"},h?i.default.createElement("div",{className:"scenario-list_tracking-title"},i.default.createElement("h2",null,l===A.default.ACTIVE?"Tracking":"Completed"," - ")):null,i.default.createElement("div",{className:"scenario-list-title-bar__title"},i.default.createElement(v.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"right",overlay:i.default.createElement("span",null,t)},i.default.createElement("h2",{className:"scenario-list-title-bar__study"},t))),i.default.createElement("div",{className:"scenario-list-title-bar__wrapper"},i.default.createElement("span",{className:"scenario-list-title-bar__label"},"Study Owner"),"",i.default.createElement("span",{className:"scenario-list-title-bar__owner"},o&&o.trim().length>0?o:"-")),d&&i.default.createElement(i.default.Fragment,null,i.default.createElement(E.default,{className:"title-separator",size:"large"}),i.default.createElement("div",{className:"scenario-list-title-bar__wrapper"},i.default.createElement("span",{className:"scenario-list-title-bar__label"},"Country managers"),i.default.createElement("span",{className:"scenario-list-title-bar__owner"},i.default.createElement(b.default,{className:"change-study-level",tooltip:"View CSMs list",height:48,onClick:p},O.default.COHORTS))))),i.default.createElement("div",{className:"scenario-list-title-bar"},l===A.default.ACTIVE&&i.default.createElement(m.default,{title:"A/Patients",tooltip:"Actual enrolled patients. Data refreshed as of\n             "+(g&&g.actual_date?g.actual_date.format("DD MMM YYYY"):"now"),value:g&&g.actual_patient_allocation||"-"}),i.default.createElement(m.default,{className:(0,c.default)("patients-number",{empty:!a}),title:"T/Patients",tooltip:"Target Patients",value:a||"-"}),i.default.createElement(m.default,{className:(0,c.default)("target-fp",{empty:!s}),title:"FP",tooltip:"Target FP",value:s?(0,I.getMomentDate)(s).format("D MMM YYYY"):"-"}),i.default.createElement(m.default,{title:"FPFV-FPFT",tooltip:"FPFV-FPFT",value:u||0===u?u+"d":"14d (default)"}),i.default.createElement(m.default,{className:(0,c.default)("end-date",{empty:!n}),title:"T/LPFT",tooltip:"Target LPFT",value:n?(0,I.getMomentDate)(n).format("D MMM YYYY"):"-"})),_&&g?i.default.createElement(y.default,null,i.default.createElement(R.default,{isOverallocated:S,scenario:r,studyStatus:l,isImpact:r.isImpact,data:r.fullData.find(function(e){return"rollup"===e.type})},i.default.createElement(f.MinimisedEnrolmentChart,{hideAdjusted:!0}))):null)};D.defaultProps={patientsNumber:0,endDate:"",approvedScenario:null,studyStatus:A.default.PLANNED,fp:"",studyOwner:"",fpfvFpft:0,showCsmsLink:!1},D.propTypes={title:s.default.string.isRequired,patientsNumber:s.default.number,endDate:s.default.string,approvedScenario:s.default.object,studyStatus:s.default.string,studyOwner:s.default.string,fp:s.default.string,fpfvFpft:s.default.number,showCsmsLink:s.default.bool,onNavigateViewCsmsList:s.default.func.isRequired},t.ScenarioListTitleBar=D,t.default=(0,u.connect)(r)(D)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1017),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(0,c.default)(e),a=(0,c.default)().diff(t,"h");return a<=21?t.fromNow():a>21&&a<24?a+" hours ago":t.format("D MMM YYYY")}function l(e){var t=document.location,a=new RegExp("("+t.protocol+"\\/\\/"+t.host+"\\/[A-Za-z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])");return e.replace(a,'<a href="$1" target="_blank">$1</a>')}Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioNote=void 0;var i=a(0),o=n(i),s=a(1),u=n(s),d=a(10),c=n(d),f=a(6);a(2357);var p=function(e){var t=e.userName,a=e.text,n=e.userEmail,i=e.created;return o.default.createElement("div",{className:"scenario-note"},o.default.createElement("div",{className:"note-title-bar"},o.default.createElement("div",null,o.default.createElement("a",{className:"note-title",href:"mailto:"+n},t),o.default.createElement("span",null,f.Icons.EMAIL)),o.default.createElement("div",{className:"note-time"},r(i))),o.default.createElement("div",{className:"note-text",dangerouslySetInnerHTML:{__html:l(a)}}))};p.propTypes={userName:u.default.string.isRequired,text:u.default.string.isRequired,userEmail:u.default.string.isRequired,created:u.default.string.isRequired},t.ScenarioNote=p,t.default=o.default.memo(p)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1019),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioNotes=void 0;var r=a(0),l=n(r),i=a(1),o=n(i),s=a(10),u=n(s),d=a(1016),c=n(d);a(2358);var f=function(e){var t=e.notesData;return l.default.createElement("div",{className:"note-wrapper"},l.default.createElement("div",{className:"note-keyline"}),function(e){return e.map(function(e){return l.default.createElement("div",{key:"note_"+(0,u.default)(e.createdAt).valueOf()},l.default.createElement(c.default,{userName:e.userName,text:e.text,created:e.createdAt,userEmail:e.userEmail}),l.default.createElement("div",{className:"note-keyline"}))})}(t))};f.propTypes={notesData:o.default.array.isRequired},t.ScenarioNotes=f,t.default=l.default.memo(f)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),l=a(6);a(2359);var i=function(){return r.default.createElement("div",{className:"scenario-optimization-status-bar"},l.Icons.ARROW_RIGHT_SQUARE_FILLED,r.default.createElement("span",{className:"dash"}),l.Icons.CIRCLE_FILLED_LARGE,r.default.createElement("span",{className:"message"},"Running optimization"))};t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioTitle=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),i=n(l),o=a(1),s=n(o),u=a(6),d=a(61),c=n(d),f=a(516),p=n(f),m=a(7),h=a(14);a(2360);var v=function(e){var t=e.adjusted,a=e.createdAt,n=e.exactCopy,l=e.isAdjusted,o=e.isCohort,s=e.modified,d=e.name,f=e.optimisationWarning,v=e.optimised,_=e.originScenario,E=e.status,g=e.studyId,y=e.approvedAt,S=function(e){return e?e.format("DD MMMM YYYY"):"-"},b={};null!==_&&(b.originScenarioName=_.name,b.originScenarioStatus=_.status,b.originIsAdjusted=_.isAdjusted,b.originStudyName=_.studyName,b.isAdjusted=l,b.exactCopy=n,b.status=E);var C=i.default.createElement("div",{className:"scenario-title__details"},u.Icons.APPROVE,i.default.createElement("span",{className:"scenario-title__last-modified approved"},"APPROVED PLAN  ",S(y||s))),O=i.default.createElement("div",{className:"scenario-title__details"},u.Icons.UPDATED,i.default.createElement("span",{className:"scenario-title__last-modified"},"Last modified ",s?s.fromNow():"-")),T=i.default.createElement("div",null,i.default.createElement("div",{className:"scenario-title__details"},u.Icons.OPTIMISE,i.default.createElement("span",{className:"scenario-title__last-optimisation-date"},"Last optimized: ",S(v))),f&&i.default.createElement("div",{className:"scenario-title__notOptimizedWarning"},"Constraints have been removed. Scenario is not optimized.")),R=void 0;return E===h.SCENARIO_STATUS.APPROVED?R="approved":l&&(R="adjusted"),i.default.createElement("div",{className:"scenario-title"},i.default.createElement("div",{className:"h2 scenario-title__name"},i.default.createElement("span",null,g),i.default.createElement(p.default,r({title:g+"  "+d,value:"  "+d,createdAt:(0,m.getMomentDate)(a||t)},b))),i.default.createElement("div",{className:"scenario-title__statistics"},function(e){switch(e){case"approved":return o?C:i.default.createElement(i.default.Fragment,null,C,i.default.createElement(c.default,{className:"scenario-title__separator"}),T);case"adjusted":return i.default.createElement("div",{className:"scenario-title__details"},u.Icons.ADJUSTMENT,i.default.createElement("span",{className:"scenario-title__last-modified adjusted"},"PLAN ADJUSTMENT ",i.default.createElement("span",null," ",S(t))));default:return o?O:i.default.createElement(i.default.Fragment,null,T,i.default.createElement(c.default,{className:"scenario-title__separator"}),O)}}(R)))};v.propTypes={modified:s.default.object,optimised:s.default.object,adjusted:s.default.object,name:s.default.string,studyId:s.default.string.isRequired,status:s.default.string.isRequired,optimisationWarning:s.default.bool,isAdjusted:s.default.bool.isRequired,originScenario:s.default.object,createdAt:s.default.oneOfType([s.default.string,s.default.object]),exactCopy:s.default.bool,isCohort:s.default.bool,approvedAt:s.default.object},v.defaultProps={name:"",modified:null,adjusted:null,optimised:null,optimisationWarning:!1,originScenario:null,createdAt:null,exactCopy:!1,isCohort:!1,approvedAt:null},t.ScenarioTitle=v,t.default=i.default.memo(v)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1023),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(1025),p=n(f),m=a(1026),h=n(m),v=a(1024),_=n(v),E=a(219),g=n(E),y=a(6);a(797);var S=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.containerWidth=0,a.containerLeft=0,a.scrollTop=0,a.handleResize=a.handleResize.bind(a),a.handleStepClick=a.handleStepClick.bind(a),a}return i(t,e),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),window.addEventListener("scroll",this.handleResize),this.handleResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("scroll",this.handleResize)}},{key:"handleResize",value:function(e){var t=this.container,a=t?t.getBoundingClientRect():{};this.containerWidth=a.width,this.containerLeft=a.left;var n=document.querySelector(".application"),r=n?n.getBoundingClientRect().top:0;e&&("scroll"===e.type&&this.scrollTop===r||"resize"===e.type)?this.forceUpdate():this.scrollTop=r}},{key:"handleStepClick",value:function(e){this.props.navigate(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.activeStep,n=t.onCloseClick,r=this.props.steps.filter(function(e){return!e.hide}),l=r.find(function(e){return e.id===a});l||(l=r.find(function(e){return!e.hide}));var i=0,o=this.props.steps.filter(function(e){return e.status===g.default.COMPLETE||e.hide});o&&o.length>0&&(i=o[o.length-1].id);var s=r.map(function(t){return u.default.createElement(p.default,{key:t.id,step:t,activeStep:a,activeStepItem:l,lastCompleteStep:i,onStepClick:e.handleStepClick})});return u.default.createElement("div",{ref:function(t){e.container=t},className:"fpo-section-stepper-container"},u.default.createElement("div",{className:"section-stepper-back",style:{left:this.containerLeft+this.containerWidth,right:0}}),u.default.createElement("div",{className:"fpo-section-stepper-wrapper",style:{width:this.containerWidth,left:this.containerLeft}},u.default.createElement("div",{onClick:function(){return n()},className:"section-stepper-close-wrapper"},y.Icons.CROSS),u.default.createElement(_.default,{direction:"up",activeStep:a,activeStepItem:l,onArrowClick:this.handleStepClick,steps:r}),u.default.createElement("div",{className:"section-stepper-steps-wrapper"},s),u.default.createElement(h.default,{activeStep:a,activeStepItem:l,steps:r}),u.default.createElement(_.default,{direction:"down",activeStep:a,activeStepItem:l,onArrowClick:this.handleStepClick,steps:r})),u.default.createElement("div",{className:"section-stepper-border",style:{left:this.containerLeft+this.containerWidth-48}}))}}]),t}(u.default.Component);S.propTypes={steps:c.default.arrayOf(c.default.shape({id:c.default.number,status:c.default.string,title:c.default.string})).isRequired,activeStep:c.default.number.isRequired,navigate:c.default.func.isRequired,onCloseClick:c.default.func.isRequired},S.defaultProps={onCloseClick:void 0},t.default=S},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(219),c=n(d),f=function(e){var t=e.direction,a=e.activeStep,n=e.steps,r=e.activeStepItem,i=e.onArrowClick,o=l.default.createElement("svg",{width:"24",height:"48",viewBox:"0 0 24 24"},l.default.createElement("g",null,l.default.createElement("line",{x1:"12",y1:"1",x2:"12",y2:"48",strokeWidth:2}),l.default.createElement("line",{x1:"6",y1:"6",x2:"12",y2:"1",strokeWidth:2}),l.default.createElement("line",{x1:"18",y1:"6",x2:"12",y2:"1",strokeWidth:2}))),s=l.default.createElement("svg",{width:"24",height:"68",viewBox:"0 0 24 68"},l.default.createElement("g",null,l.default.createElement("line",{x1:"12",y1:"0",x2:"12",y2:"67",strokeWidth:2}),l.default.createElement("line",{x1:"6",y1:"61",x2:"12",y2:"67",strokeWidth:2}),l.default.createElement("line",{x1:"18",y1:"61",x2:"12",y2:"67",strokeWidth:2}))),d=void 0,f=void 0,p=void 0;return"up"===t?(d=(0,u.default)("nav-arrow","nav-arrow-up",{disabled:n[0].id===a}),f=n[n.indexOf(r)-1]?n[n.indexOf(r)-1].id:n[0].id,p=o):"down"===t&&(d=(0,u.default)("nav-arrow","nav-arrow-down",{disabled:r.status!==c.default.COMPLETE||n[n.length-1]&&r.id===n[n.length-1].id}),f=n[n.indexOf(r)+1]?n[n.indexOf(r)+1].id:r.id,p=s),l.default.createElement("div",{className:d,onClick:function(){return i(f)}},l.default.createElement("div",null,p))};f.propTypes={direction:o.default.oneOf(["up","down"]).isRequired,activeStep:o.default.number.isRequired,activeStepItem:o.default.shape({id:o.default.number,title:o.default.string,status:o.default.string}).isRequired,onArrowClick:o.default.func.isRequired,steps:o.default.arrayOf(o.default.shape({id:o.default.number,status:o.default.string,title:o.default.string})).isRequired},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(219),c=n(d);a(797);var f=function(e){var t=e.step,a=e.activeStep,n=e.activeStepItem,r=e.lastCompleteStep,i=e.onStepClick,o=l.default.createElement("svg",{width:"24",height:"8",viewBox:"0 0 24 8"},l.default.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#C6C6C6",d:"M.5 1.5h23v5H.5z"})),s=l.default.createElement("svg",{width:"24",height:"8",viewBox:"0 0 24 8"},l.default.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#000",d:"M.5 1.5h23v5H.5z"})),d=l.default.createElement("svg",{width:"24",height:"8",viewBox:"0 0 24 8"},l.default.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#EC3508",d:"M.5 1.5h23v5H.5z"})),f=l.default.createElement("svg",{width:"24",height:"8",viewBox:"0 0 24 8"},l.default.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M0 1h24v6H0z"})),p=l.default.createElement("svg",{className:"active-icon",width:"28",height:"16",viewBox:"0 0 28 16"},l.default.createElement("path",{fill:"#5291DD",fillRule:"evenodd",d:"M2 5h24v6H2z"})),m=o;t.id===a&&(m=s),t.status===c.default.COMPLETE&&(m=f),t.status===c.default.ERROR&&(m=d);var h=n.status===c.default.COMPLETE&&(t.id===r+1||t.id===n.id+1)||t.id<n.id||n.status===c.default.COMPLETE&&t.status===c.default.COMPLETE,v=(0,u.default)("step-item",{enabled:h});return l.default.createElement("div",{className:v,"data-test":"step-"+t.title,onClick:function(){return h&&i(t.id)}},m,p,l.default.createElement("div",{className:"step-title"},l.default.createElement("h3",null,t.title)))};f.propTypes={step:o.default.shape({id:o.default.number,title:o.default.string,status:o.default.string}).isRequired,activeStep:o.default.number.isRequired,activeStepItem:o.default.shape({id:o.default.number,title:o.default.string,status:o.default.string}).isRequired,lastCompleteStep:o.default.number.isRequired,onStepClick:o.default.func.isRequired},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(219),c=n(d),f=function(e){var t=e.activeStepItem,a=e.steps,n=l.default.createElement("svg",{width:"8",height:"28",viewBox:"0 0 8 28"},l.default.createElement("path",{fill:"#C6C6C6",fillRule:"evenodd",d:"M.996 0L8 28H7L0 0z"})),r=(0,u.default)("active-step",{error:t.status===c.default.ERROR,completed:t.status===c.default.COMPLETE});return l.default.createElement("div",{className:"steps-summary"},l.default.createElement("div",{className:r},a.indexOf(t)+1),l.default.createElement("div",null,n),l.default.createElement("div",null,a.length))};f.propTypes={activeStepItem:o.default.shape({id:o.default.number,title:o.default.string,status:o.default.string}).isRequired,steps:o.default.arrayOf(o.default.shape({id:o.default.number,status:o.default.string,title:o.default.string})).isRequired},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Separator=void 0;var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s);a(2361);var d=function(e){var t=e.size,a=e.className,n=(0,u.default)("fpo-separator",a),r={tiny:{width:4,height:12},small:{width:8,height:28},large:{width:12,height:48},extraLarge:{width:16,height:72}},i=r[t].width,o=r[t].height;return l.default.createElement("span",{className:n},l.default.createElement("svg",{height:o+"px",width:i+"px",viewBox:"0 0 "+i+" "+o},l.default.createElement("g",null,l.default.createElement("line",{stroke:"#9d9d9d",x1:i,y1:"0",x2:"0",y2:o,strokeWidth:"1"}))))};d.defaultProps={size:"small",className:null},d.propTypes={size:o.default.oneOf(["tiny","small","large","extraLarge"]),className:o.default.string},t.Separator=d,t.default=l.default.memo(d)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1029),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(214),u=n(s),d=a(54),c=n(d);a(2362);var f=function(e){var t=e.sessionExpired;return t&&(history.pushState(null,document.title,location.href),window.addEventListener("popstate",function(){history.pushState(null,document.title,location.href)})),l.default.createElement(u.default,{isShown:t,status:"warning",title:"Session has expired"},l.default.createElement("div",{className:"session-expired-warning-dialog-container"},l.default.createElement("div",{className:"session-expired-warning-dialog__content-wrapper"},l.default.createElement("span",null,"Your current session has expired. "),l.default.createElement("span",null,"Please refresh browser window to get a new session and keep all services working")),l.default.createElement("div",{className:"session-expired-warning-dialog__button-wrapper"},l.default.createElement(c.default,{onClick:function(){return window.location.reload()},label:"Refresh"}))))};f.propTypes={sessionExpired:o.default.bool},f.defaultProps={sessionExpired:!1},t.default=l.default.memo(f)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(323),f=a(1),p=n(f),m=a(13),h=n(m);a(2363);var v={transformOrigin:"center center"},_={entering:{transform:"rotate(0)",transition:"transform 300ms ease-out"},entered:{transform:"rotate(-360deg)",transition:"transform 300ms ease-out"},exiting:{transform:"rotate(-360deg)"},exited:{transform:"rotate(0)"}},E={entering:{transform:"scale3d(0,0,1)",transition:"all 300ms ease-out",opacity:1},entered:{transform:"scale3d(2,2,1)",transition:"all 300ms ease-out",opacity:.5},exiting:{transform:"scale3d(2,2,1)",transition:"all 100ms ease-out",opacity:.5},exited:{transform:"scale3d(0,0,1)",transition:"all 100ms ease-out",opacity:0}},g=function(e){function t(){var e,a,n,i;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={clicked:!1},n.handleClicked=function(){n.setState({clicked:!0})},n.handleTransitionEnd=function(){n.setState({clicked:!1})},i=a,l(n,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.styles,r=t.disabled,l=t.tooltip,i=this.state.clicked,s=n||_;return d.default.createElement("div",null,d.default.createElement(c.Transition,{in:i,addEndListener:function(t){t.addEventListener("transitionend",e.handleTransitionEnd,!1)},timeout:0},function(e){return d.default.createElement("div",{className:"click-background__wrapper",style:o({},v,E[e])},d.default.createElement("div",{className:"click-background"}))}),d.default.createElement(c.Transition,{in:i,addEndListener:function(t){t.addEventListener("transitionend",e.handleTransitionEnd,!1)},timeout:0},function(t){return d.default.createElement("div",{style:o({},v,s[t])},d.default.createElement("div",{onClick:r?void 0:e.handleClicked,className:"children-wrapper"},l?d.default.createElement(h.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlayClassName:"fpo-sidebar-button__tooltip",placement:"right",overlay:d.default.createElement("span",null,l)},a):{children:a}))}))}}]),t}(u.PureComponent);g.defaultProps={styles:null,disabled:!1,tooltip:null},g.propTypes={children:p.default.node.isRequired,styles:p.default.object,disabled:p.default.bool,tooltip:p.default.string},t.default=g},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(13),p=n(f),m=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.tooltip,a=e.children;return t?u.default.createElement(p.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlayClassName:"fpo-sidebar-button__tooltip",placement:"right",overlay:u.default.createElement("span",null,t)},a):a}}]),t}(s.PureComponent);m.defaultProps={tooltip:null},m.propTypes={tooltip:c.default.string,children:c.default.node.isRequired},t.default=u.default.memo(m)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1033),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(25),p=a(110),m=a(659),h=a(27),v=a(235),_=(n(v),a(433),a(414)),E=a(123),g=n(E),y=a(6),S=a(13),b=n(S);a(483),a(2367);var C={BLACK:"#000",GREY:"#ededed",DARK_GREY:"#9d9d9d",WHITE:"#FFF",GREEN:"#92c93a",RED:"#ec3508"},O=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={data:t.sortData(e.data),dataRegion:e.dataRegion},a.renderChart=a.renderChart.bind(a),a.handleResize=a.handleResize.bind(a),a.debounced=(0,g.default)(a.renderChart,200),a}return i(t,e),o(t,null,[{key:"sortData",value:function(e){return e.map(function(e){return{screening_rate:+e.norm_screening_rate||0,randomization_rate:+e.norm_randomization_rate||0,screen_failure_rate:+e.norm_screen_failure_rate||0,siv_fpfv:+e.norm_siv_fpfv||0,drop_out_rate:+e.norm_drop_out_rate||0,median_time_to_entry:+e.norm_median_time_to_entry||0,query_rate:+e.norm_query_rate||0,median_time_to_query:+e.norm_median_time_to_query||0,patients_with_ie_protocol_deviation:+e.norm_patients_with_ie_protocol_deviation||0,mvr_issues:+e.norm_mvr_issues||0}})}}]),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.renderChart()}},{key:"componentWillReceiveProps",value:function(e){var a=this;this.setState({data:t.sortData(e.data),dataRegion:e.dataRegion},function(){a.renderChart()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){this.debounced()}},{key:"renderChart",value:function(){var e=this;(0,f.select)("#svg_wrapper_site-detailed-chart").select(".svg-container").remove();var t=this.state.data,a=this.container,n={top:164,right:190,bottom:119,left:0},r=a.getBoundingClientRect().width-n.left-n.right,l=443-n.top-n.bottom,i=(r-96)/10,o=(0,f.select)("#svg_wrapper_site-detailed-chart"),s=o.append("div").classed("svg-container",!0).append("svg").attr("width",r+n.left+n.right).attr("height",l+n.top+n.bottom);s.append("rect").at({x:-20,y:-20,width:r+n.left+n.right+40,height:l+n.top+n.bottom+40,fill:C.WHITE});var u=s.append("g").attr("transform","translate("+n.left+","+n.top+")"),d=(0,p.scaleLinear)().rangeRound([l,0]),c=(0,p.scaleLinear)().rangeRound([l,0]);d.domain([2,0]),c.domain([0,2]);var v=t.map(function(e){return Object.values(e)}),E=v.reduce(function(e,t){return t.forEach(function(t,a){e[a].push(t)}),e},new Array(10).fill(0).map(function(){return[]})),g=(0,m.line)().x(function(e,t){var a=i*t;return t>=2&&(a+=64),t>=5&&(a+=32),a+i/2}).y(function(e,t){return t<2?e>2?l+12:d(e):e>2?-12:c(e)});u.append("rect").at({width:r,height:l/2}).st({fill:C.RED,opacity:.5}),u.append("rect").at({y:l/4,width:r,height:l/4}).st({fill:C.WHITE,opacity:.5}),u.append("rect").attr("y",l/2).attr("width",r).attr("height",l/2).style("fill",C.GREEN).style("opacity",.5),u.append("rect").attr("y",l/2).attr("width",r).attr("height",l/4).style("fill",C.WHITE).style("opacity",.5),u.append("line").attr("x2",r).attr("y1",l/4).attr("y2",l/4).style("stroke",C.BLACK).style("stroke-width",1).style("opacity",.5),u.append("line").attr("x2",r).attr("y1",l/2).attr("y2",l/2).style("stroke",C.BLACK).style("stroke-width",2).style("opacity",.5),u.append("line").attr("x2",r).attr("y1",l-l/4).attr("y2",l-l/4).style("stroke",C.BLACK).style("stroke-width",1).style("opacity",.5);for(var y=1;y<=9;y+=1)!function(e){2!==e&&5!==e&&u.append("line").attr("x1",function(){var t=i*e;return e>2&&(t+=64),e>=6&&(t+=32),t}).attr("x2",function(){var t=i*e;return e>2&&(t+=64),e>=6&&(t+=32),t}).attr("y2",l).style("stroke",C.WHITE).style("stroke-width",2)}(y);for(var S=0;S<v.length;S+=1)!function(t){u.append("path").data([v[t]]).attr("id","dataset-line_"+t).attr("class","dataset-line").style("display","none").style("opacity",0).attr("d",g);var a=u.selectAll("metric-romb").data(v[t]).enter().append("g").attr("id","metric-romb_"+t).classed("mark-g",!0).attr("transform",function(e,t){var a=i*t;t>=2&&(a+=64),t>=5&&(a+=32),a+=i/2;var n=0;return n=t<2?e>2?l+12:d(e):e>2?-12:c(e),"translate("+(a-12)+","+(n-12)+")"});a.append("defs").append("path").attr("id","a").attr("d","M12 7l5 5-5 5-5-5z");var n=a.append("g").style("opacity",1).attr("class","metric-romb").attr("fill","none").attr("fill-rule","evenodd");n.append("use").attr("fill",C.BLACK).attr("xlink:href","#a"),n.append("path").attr("stroke",C.WHITE).attr("stroke-width",2).attr("d","M12 5.586L18.414 12 12 18.414 5.586 12 12 5.586z");var r=a.append("g").attr("class","metric-romb-hover").style("display","none").attr("transform","rotate(90 18 18), translate(2, 14)");r.append("path").attr("d","M10 2l8 8-8 8L2 10z").style("stroke","black").style("stroke-width","2px").classed("inner-rect",!0).style("fill","#fff"),r.append("path").attr("d","M14 10l-4 4-4-4 4-4z").style("fill",C.BLACK);var o=e.props.hasCurrentStudy&&0===t?"#current .site-row-index-"+t:"#other .site-row-index-"+(t-1),s=(0,f.select)(o),p=function(e){return"clicked"===(0,f.select)(e).attr("data-clicked")},m=function(){p("#dataset-line_"+t)?((0,f.selectAll)(".dataset-line").style("display",null).attr("data-clicked",null).transition().duration(100).ease(_.easeLinear).style("opacity",0),r.style("display","none"),(0,f.selectAll)(".metric-romb").style("opacity",1),(0,f.select)(o).classed("selected",!1).style("background","none"),(0,f.select)("#active-study-shown").text("")):((0,f.selectAll)(".dataset-line").style("display",null).attr("data-clicked",null).transition().duration(100).ease(_.easeLinear).style("opacity",function(e,a){return a===t?((0,f.select)("#dataset-line_"+t).attr("data-clicked","clicked"),1):0}),(0,f.selectAll)(".metric-romb-hover").style("display","none"),r.style("display",null).transition().duration(1e3).ease(_.easeLinear).style("opacity",1),(0,f.selectAll)(".metric-romb").style("opacity",1),(0,f.selectAll)(".sites-row").classed("selected",!1).style("background","none"),(0,f.select)(o).classed("selected",!0).style("background",C.GREY),(0,f.select)("#active-study-shown").text("Study shown: "+(e.props.data[t]?e.props.data[t].study_id:"-")))},h=function(){p("#dataset-line_"+t)||((0,f.select)("#dataset-line_"+t).style("display",null).transition().duration(100).ease(_.easeLinear).style("opacity",.5),r.style("display",null).transition().duration(100).ease(_.easeLinear).style("opacity",.5),(0,f.selectAll)(".metric-romb").style("opacity",function(e,a){return a!==t?.2:.5}),(0,f.select)(o).classed("selected",!0).style("background",C.GREY),(0,f.select)("#active-study-shown").text("Study shown: "+(e.props.data[t]?e.props.data[t].study_id:"-")))},E=function(){p("#dataset-line_"+t)||((0,f.select)("#dataset-line_"+t).transition().duration(100).ease(_.easeLinear).style("opacity",0),r.style("display","none"),(0,f.selectAll)(".metric-romb").style("opacity",1),(0,f.select)(o).classed("selected",!1).style("background","none"),(0,f.select)("#active-study-shown").text(""))};a.on("click",m),s.on("click",m),a.on("mouseover",h),s.on("mouseover",h),a.on("mouseout",E),s.on("mouseout",E)}(S);u.append("rect").attr("x",5*i+64).attr("width",32).attr("height",l).style("fill",C.WHITE).style("opacity",.5);var b=u.append("g").attr("transform","translate("+2*i+")");b.append("rect").attr("width",64).attr("height",l).style("fill",C.WHITE).style("opacity",.5);var O=b.append("g").attr("transform","translate(0, "+(l/2-14)+")");O.append("rect").attr("width",64).attr("height",28),O.append("polygon").attr("points","7.5,0, 7.5,10, 0,5").attr("transform","translate(-6.5, 9)"),O.append("polygon").attr("points","0,0 7.5,5 0,10").attr("transform","translate(63, 9)"),O.append("text").attr("text-anchor","middle").attr("x",32).attr("y",19).style("fill",C.WHITE).text("1");var T=b.selectAll("left-label").data([0,.5,1.5,2]).enter().append("g").attr("transform",function(e,t){return t<2?"translate(0, "+(t*(l/4)-14)+")":"translate(0, "+((t+1)*(l/4)-14)+")"});T.append("polygon").attr("points","0,0 28,0 28,28 0,28 0,19 -5,14 0,9 0,0").style("fill",C.WHITE).style("stroke",C.BLACK).style("stroke-widht",1),T.append("text").attr("text-anchor","middle").attr("x",14).attr("y",19).text(function(e){return e});var R=b.selectAll("right-label").data([2,1.5,.5,0]).enter().append("g").attr("transform",function(e,t){return t<2?"translate(36, "+(t*(l/4)-14)+")":"translate(36, "+((t+1)*(l/4)-14)+")"});R.append("polygon").attr("points","0,0 28,0 28,9 33,14 28,19 28,28 0,28 0,0").style("fill",C.WHITE).style("stroke",C.BLACK).style("stroke-widht",1),R.append("text").attr("text-anchor","middle").attr("x",14).attr("y",19).text(function(e){return e});var w=u.append("g").attr("transform","translate("+r+")");w.append("line").at({x1:26,x2:50,y1:0,y2:0}).st({stroke:C.BLACK,strokeWidth:1,opacity:.5}),w.append("line").at({x1:26,x2:50,y1:l/4,y2:l/4}).st({stroke:C.BLACK,strokeWidth:1,opacity:.5}),w.append("line").at({x1:26,x2:50,y1:l/2,y2:l/2}).st({stroke:C.BLACK,strokeWidth:2,opacity:1}),w.append("line").at({x1:26,x2:50,y1:l-l/4,y2:l-l/4}).st({stroke:C.BLACK,strokeWidth:1,opacity:.5}),w.append("line").at({x1:26,x2:50,y1:l,y2:l}).st({stroke:C.BLACK,strokeWidth:1,opacity:.5});var A=["Average","normalized","performance"];w.selectAll("average-label-text").data(A).enter().append("g").append("text").attr("x",80).attr("y",64).attr("dy",function(e,t){return 18*t}).style("fill",C.BLACK).style("font-weight",500).text(function(e){return e});var I=u.append("g").translate([0,-114]);I.append("text").at({fontSize:20,fontWeight:"bold"}).text("Enrollment Metrics (Historical)"),I.append("line").at({stroke:C.BLACK,strokeWidth:2,y1:18,y2:18}).attr("x2",function(){return 5*i+64}),I.append("text").at({fontSize:12,y:34,id:"active-study-shown"}).text("");var N=u.append("g").translate([5*i+96,-114]);N.append("text").at({fontSize:20,fontWeight:"bold"}).text("Operational Metrics (Historical)"),N.append("line").at({stroke:C.BLACK,strokeWidth:2,y1:18,y2:18}).attr("x2",function(){return 5*i});var D=[["SR"],["RR"],["SF"],["SIV-FPFV"],["Drop-out","rate"]],P=u.append("g");D.forEach(function(e,t){P.selectAll("enr-col-title_"+t).data(e).enter().append("text").at({y:-52,fontSize:14,fill:C.DARK_GREY}).attr("x",function(){var e=i*t;return t>=2&&(e+=64),e}).attr("dy",function(e,t){return 18*t}).text(function(e){return e})});var L=[["Med. time","to entry"],["Query","rate"],["Med. time","to query"],["Patients","w/I/E p.dev."],["MVR","Issues"]],M=u.append("g").translate([5*i+96,1]);L.forEach(function(e,t){M.selectAll("oper-col-title_"+t).data(e).enter().append("text").at({x:i*t,y:-52,fontSize:14,fill:C.DARK_GREY}).attr("dy",function(e,t){return 18*t}).text(function(e){return e})});var x=["pt/site/mo","pt/site/mo","pt/site/mo","weeks","weeks","days","queries/CRF","days","of pt.rand.","total issues/t"],k=E.map(function(e,t){var a=(0,h.extent)(e);return{min:+a[0].toFixed(2),max:+a[1].toFixed(2),unit:x[t]}}),j=u.selectAll("col-legend").data(k).enter().append("g").translate([0,l+54]);j.append("text").at({fontSize:18,fontWeight:500,fill:C.BLACK}).attr("x",function(e,t){var a=i*t;return t>=2&&(a+=64),t>=5&&(a+=32),a}).text(function(e){return e.min+"-"+e.max}),j.append("text").at({fontSize:12,fill:C.BLACK}).attr("x",function(e,t){var a=i*t;return t>=2&&(a+=64),t>=5&&(a+=32),a}).attr("dy",18).text(function(e){return e.unit}),u.append("line").translate([0,-24]).at({stroke:C.DARK_GREY,strokeWidth:1,x2:5*i+64}),u.append("line").translate([0,l+24]).at({stroke:C.DARK_GREY,strokeWidth:1,x2:5*i+64}),u.append("line").translate([5*i+96,-24]).at({stroke:C.DARK_GREY,strokeWidth:1,x2:5*i}),u.append("line").translate([5*i+96,l+24]).at({stroke:C.DARK_GREY,strokeWidth:1,x2:5*i})}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{ref:function(t){e.container=t},className:"svg-wrapper",id:"svg_wrapper_site-detailed-chart"},u.default.createElement("div",{className:"site-detailed-chart__context-help"},u.default.createElement(b.default,{mouseEnterDelay:.3,align:{offset:[0,0]},placement:"bottomLeft",overlay:u.default.createElement("span",null,"Relative performance ",u.default.createElement("br",null),"against other sites in ",u.default.createElement("br",null),this.state.dataRegion.name," across studies. ",u.default.createElement("br",null),"Metrics for this site ",u.default.createElement("br",null),"is normalized using ",u.default.createElement("br",null),"the median value for ",u.default.createElement("br",null),"other sites in the studies.")},y.Icons.INFO_Q)))}}]),t}(u.default.Component);O.propTypes={data:c.default.arrayOf(c.default.shape({study_id:c.default.string,randomized_patients:c.default.oneOfType([c.default.string,c.default.number]),randomization_rate:c.default.oneOfType([c.default.string,c.default.number]),screen_failure_rate:c.default.oneOfType([c.default.string,c.default.number]),siv_fpfv:c.default.oneOfType([c.default.string,c.default.number]),drop_out_rate:c.default.oneOfType([c.default.string,c.default.number]),query_rate:c.default.oneOfType([c.default.string,c.default.number]),median_time_to_query:c.default.oneOfType([c.default.string,c.default.number]),patients_with_ie_protocol_deviation:c.default.oneOfType([c.default.string,c.default.number]),mvr_issues:c.default.oneOfType([c.default.string,c.default.number])})).isRequired,dataRegion:c.default.object,hasCurrentStudy:c.default.bool},O.defaultProps={dataRegion:{},hasCurrentStudy:!0},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PiDetailsPage=void 0;var r=a(1036),l=n(r),i=a(1035),o=n(i);t.PiDetailsPage=o.default,t.default=l.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(11),o=n(i),s=a(1),u=n(s),d=a(22),c=a(216),f=a(1040),p=n(f),m=a(63),h=a(528),v=n(h);a(798);var _=function(e){var t=e.data,a=e.currentStudy,n=e.siteId;return l.default.createElement("div",{className:"site-details-page__wrapper"},l.default.createElement(d.Grid,null,l.default.createElement(d.Row,null,l.default.createElement(d.Col,{offset:1,width:4},l.default.createElement(c.FlexItem,{className:"site-details-column__title"},l.default.createElement("h3",null,"General information")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Name"),l.default.createElement(c.FlexItem,null,t.name||"n/a")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Primary organization name"),l.default.createElement(c.FlexItem,null,t.primary_org_name||"n/a")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Emails"),l.default.createElement(c.FlexItem,null,t.emails||"n/a")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Specialities"),l.default.createElement(c.FlexItem,null,t.specialities||"n/a")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Last regulatory action"),l.default.createElement(c.FlexItem,null,t.last_regulatory_action||"n/a")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Last regulatory action date"),l.default.createElement(c.FlexItem,null,(0,m.getFormattedDate)(t.last_regulatory_action_date)||"n/a")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Total number of active studies"),l.default.createElement(c.FlexItem,null,t.PI_num_studies_active_total||"n/a")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Investigator patient count"),l.default.createElement(c.FlexItem,null,t.Investigator_patient_count||"n/a")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Clinical experience score"),l.default.createElement(c.FlexItem,null,t.clinical_experience_score||"n/a")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Publication count"),l.default.createElement(c.FlexItem,null,t.publication_count||"n/a"))),l.default.createElement(d.Col,{width:4},l.default.createElement(c.FlexItem,{className:"site-details-column__title"},l.default.createElement("h3",null,"History")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Has internal experience"),l.default.createElement(c.FlexItem,null,(0,v.default)(t.PI_has_internal_experience))),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Has pediatric experience"),l.default.createElement(c.FlexItem,null,(0,v.default)(t.has_pediatric_exp))),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Has adolescent experience"),l.default.createElement(c.FlexItem,null,(0,v.default)(t.has_adolescent_exp))),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement("span",null,"Number of internal Novartis studies within the indication completed")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,{className:"history-list-padding"},"- last year"),l.default.createElement(c.FlexItem,null,(0,o.default)(a,"PI_num_studies_complete_in_fpo2mi_1y","n/a"))),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,{className:"history-list-padding"},"- last 3 years"),l.default.createElement(c.FlexItem,null,(0,o.default)(a,"PI_num_studies_complete_in_fpo2mi_3y","n/a"))),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,{className:"history-list-padding"},"- last 5 years"),l.default.createElement(c.FlexItem,null,(0,o.default)(a,"PI_num_studies_complete_in_fpo2mi_1y","n/a"))))),l.default.createElement(d.Row,{className:"secondary-row"},l.default.createElement(d.Col,{offset:1,width:8},l.default.createElement(c.FlexItem,{className:"site-details-column__title"},l.default.createElement("h3",null,"Disease hierarchy")),l.default.createElement(c.FlexBox,{justifyContent:"space-between"},l.default.createElement(p.default,{siteId:n}))))))};_.defaultProps={data:{},currentStudy:{}},_.propTypes={data:u.default.object,currentStudy:u.default.object,siteId:u.default.string.isRequired},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(11),u=n(s),d=a(22),c=a(216),f=a(528),p=n(f);a(798);var m=function(e){var t=e.data,a=e.currentStudy;return l.default.createElement("div",{className:"site-details-page__wrapper"},l.default.createElement(d.Grid,null,l.default.createElement(d.Row,null,l.default.createElement(d.Col,{offset:1,width:4},l.default.createElement(c.FlexItem,{className:"site-details-column__title"},l.default.createElement("h3",null,"General information")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Name"),l.default.createElement(c.FlexItem,null,t.name||"n/a")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Total sites in country"),l.default.createElement(c.FlexItem,null,t.sitesInCountry||"n/a")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Address"),l.default.createElement(c.FlexItem,null,t.address||"n/a")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"City name"),l.default.createElement(c.FlexItem,null,t.city_name||"n/a")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Postcode"),l.default.createElement(c.FlexItem,null,t.post_code||"n/a")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Phones"),l.default.createElement(c.FlexItem,null,t.phones||"n/a"))),l.default.createElement(d.Col,{width:4},l.default.createElement(c.FlexItem,{className:"site-details-column__title"},l.default.createElement("h3",null,"History")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Has internal experience"),l.default.createElement(c.FlexItem,null,(0,p.default)(t.center_has_internal_experience))),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Has pediatric experience"),l.default.createElement(c.FlexItem,null,(0,p.default)(t.has_pediatric_exp))),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,null,"Has adolescent experience"),l.default.createElement(c.FlexItem,null,(0,p.default)(t.has_adolescent_exp))),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement("span",null,"Number of internal Novartis studies within the indication completed")),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,{className:"history-list-padding"},"- last year"),l.default.createElement(c.FlexItem,null,(0,u.default)(a,"center_num_studies_complete_in_fpo2mi_1y","n/a"))),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,{className:"history-list-padding"},"- last 3 years"),l.default.createElement(c.FlexItem,null,(0,u.default)(a,"center_num_studies_complete_in_fpo2mi_3y","n/a"))),l.default.createElement(c.FlexBox,{justifyContent:"space-between",className:"site-details-item"},l.default.createElement(c.FlexItem,{className:"history-list-padding"},"- last 5 years"),l.default.createElement(c.FlexItem,null,(0,u.default)(a,"center_num_studies_complete_in_fpo2mi_5y","n/a")))))))};m.defaultProps={data:{},currentStudy:{}},m.propTypes={data:o.default.object,currentStudy:o.default.object},t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getScenarioSiteSelectionStatus=void 0;var n=a(43),r=a(11),l=function(e){return e&&e.__esModule?e:{default:e}}(r),i=a(48),o=a(131);t.default=(0,n.createSelector)(i.getScenarioCountries,function(e){return e.reduce(function(e,t){switch(e.countriesNum+=1,(0,l.default)(t,"country_sites_approval_status.status",o.COUNTRY_SITE_APPROVAL_STATUS.NOT_READY_TO_LOCAL_MANAGE)){case o.COUNTRY_SITE_APPROVAL_STATUS.READY_TO_LOCAL_MANAGE:e.readyToManage+=1;break;case o.COUNTRY_SITE_APPROVAL_STATUS.IN_GLOBAL_REVIEW:e.inReview+=1;break;case o.COUNTRY_SITE_APPROVAL_STATUS.APPROVED:e.approved+=1;break;default:e.notReady+=1}return e},{approved:0,inReview:0,readyToManage:0,notReady:0,countriesNum:0})}),t.getScenarioSiteSelectionStatus=(0,n.createSelector)(i.getScenarioFromStore,function(e){return e&&e.site_selection_required})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a(0),o=n(i),s=a(1),u=n(s),d=a(2),c=n(d),f=a(8),p=a(59),m=a(357),h=n(m),v=a(51),_=n(v),E=a(60),g=a(1037),y=n(g),S=a(131);a(2368);var b=function(e){var t=e.approved,a=e.inReview,n=e.readyToManage,r=e.notReady,s=e.changeStatus,u=e.canChangeStatus,d=e.studyId,f=e.scenarioId,p=e.countriesNum,m=e.siteSelectionRequired,v=e.updateScenarioSiteSelectionStatus,E=(0,i.useState)(!1),g=l(E,2),y=g[0],b=g[1],C=(0,i.useCallback)(function(){s(d,f,S.COUNTRY_SITE_APPROVAL_STATUS.READY_TO_LOCAL_MANAGE)},[d,f,s]);return o.default.createElement("div",{className:"sites-approval-status-bar__container",onMouseLeave:function(){return b(!1)},onMouseEnter:function(){return b(!0)}},o.default.createElement("div",{className:(0,c.default)("sites-approval-status-bar__panel",{expanded:y})},u&&o.default.createElement("div",{className:(0,c.default)("control__link",{disabled:!m}),onClick:C},"Request site selection from all countries"),o.default.createElement("div",{className:(0,c.default)("sites-approval-status-bar__panel-content",{disabled:!m})},o.default.createElement("div",{className:"panel-list-header"},"Shown by countries"),o.default.createElement("div",null,o.default.createElement(h.default,{status:S.COUNTRY_SITE_APPROVAL_STATUS.APPROVED}),o.default.createElement("div",null,t),o.default.createElement("div",null,"Site selection agreed")),o.default.createElement("div",null,o.default.createElement(h.default,{status:S.COUNTRY_SITE_APPROVAL_STATUS.IN_GLOBAL_REVIEW}),o.default.createElement("div",null,a),o.default.createElement("div",null,"Site selection provided")),o.default.createElement("div",null,o.default.createElement(h.default,{status:S.COUNTRY_SITE_APPROVAL_STATUS.READY_TO_LOCAL_MANAGE}),o.default.createElement("div",null,n),o.default.createElement("div",null,"Site selection required")),o.default.createElement("div",null,o.default.createElement(h.default,{status:S.COUNTRY_SITE_APPROVAL_STATUS.NOT_READY_TO_LOCAL_MANAGE}),o.default.createElement("div",null,r),o.default.createElement("div",null,"No site selection required yet"))),o.default.createElement("div",{className:"bottom-control__wrapper"},u&&o.default.createElement(_.default,{label:"Scenario requires site selection",onChange:function(e){v(d,f,e)},checked:m}))),o.default.createElement("div",{className:"sites-approval-status-bar__title"},"Sites approval status"),o.default.createElement("div",{className:"sites-approval-status-bar"},o.default.createElement("div",{className:"approved",style:{width:100*t/p+"%"}}),o.default.createElement("div",{className:"in-review",style:{width:100*a/p+"%"}}),o.default.createElement("div",{className:"ready-to-manage",style:{width:100*n/p+"%"}})))};b.defaultProps={approved:9,inReview:5,readyToManage:1,notReady:3,canChangeStatus:!1,countriesNum:0,siteSelectionRequired:!0},b.propTypes={approved:u.default.number,inReview:u.default.number,readyToManage:u.default.number,notReady:u.default.number,changeStatus:u.default.func.isRequired,canChangeStatus:u.default.bool,studyId:u.default.number.isRequired,scenarioId:u.default.number.isRequired,countriesNum:u.default.number,siteSelectionRequired:u.default.bool,updateScenarioSiteSelectionStatus:u.default.func.isRequired};var C=function(e,t){return r({},(0,y.default)(e,t),{siteSelectionRequired:(0,g.getScenarioSiteSelectionStatus)(e,t)})};t.default=(0,p.withRouter)((0,f.connect)(C,{changeStatus:E.onChangeCountriesSitesStatus,updateScenarioSiteSelectionStatus:E.updateScenarioSiteSelection})(b))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i);a(799);var s=function(e){var t=e.diseaseHierarchy;return l.default.createElement("div",{className:"disease-hierarchy-container"},t)};s.propTypes={diseaseHierarchy:o.default.array},s.defaultProps={diseaseHierarchy:[]},t.default=s},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(43),o=a(11),s=n(o),u=a(8),d=a(2),c=n(d),f=a(1039),p=n(f);a(799);var m=function(e,t){return e.site[t]},h=(0,i.createSelector)(m,function(e){var t=(0,s.default)(e,"siteData.PI.disease_hierarchy")||[];return Array.isArray(t)?t.reduce(function(e,t){var a=t.split(":"),n=20*(a.length-1);return e.push(l.default.createElement("div",{className:(0,c.default)({"disease-root-item":1===a.length,diseaseItem:1!==a.length}),style:{paddingLeft:n+"px"},key:t},a[a.length-1])),e},[]):l.default.createElement("div",null,l.default.createElement("h4",null,"Unable to transform hierarchy to readable format"),t)}),v=function(e,t){return{diseaseHierarchy:h(e,t.siteId)}};t.default=(0,u.connect)(v,{})(p.default)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(6),c=a(131);a(2369);var f=a(181),p=n(f),m=function(e){var t=e.status,a=e.showTooltip,n=void 0,r=void 0;switch(t){case c.COUNTRY_SITE_APPROVAL_STATUS.READY_TO_LOCAL_MANAGE:n=d.Icons.SITE_IN_PROGRESS,r="Site selection required";break;case c.COUNTRY_SITE_APPROVAL_STATUS.IN_GLOBAL_REVIEW:n=d.Icons.SITE_IN_REVIEW,r="Site selection provided";break;case c.COUNTRY_SITE_APPROVAL_STATUS.APPROVED:n=d.Icons.SITE_APPROVED,r="Site selection agreed";break;default:n=""}var i=l.default.createElement("span",{className:(0,u.default)("sites-status-icon")},n);return a&&(i=l.default.createElement(p.default,{placement:"top",overlay:l.default.createElement("span",null,r),mouseEnterDelay:.3},l.default.createElement("span",{className:(0,u.default)("sites-status-icon")},n))),l.default.createElement("div",{className:"sites-status-icon__wrapper"},i)};m.defaultProps={status:"",showTooltip:!1},m.propTypes={status:o.default.string,showTooltip:o.default.bool},t.default=m},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(2277),m=n(p),h=m.default,v=function(){var e=document.createElement("a"),t=e.style;return t.cssText="position:sticky;position:-webkit-sticky;position:-ms-sticky;",-1!==t.position.indexOf("sticky")},_=function(){var e=navigator.userAgent.indexOf("Chrome")>-1,t=navigator.userAgent.indexOf("Safari")>-1;return e&&t&&(t=!1),t},E=function(){return v()&&!_()?"sticky":"-webkit-sticky"},g=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){h.add(this.stickyElement)}},{key:"componentWillUnmount",value:function(){h.remove(this.stickyElement)}},{key:"render",value:function(){var e=this;return d.default.createElement("div",o({},this.props,{className:"sticky "+(this.props.className||""),ref:function(t){e.stickyElement=t},style:o({top:0,zIndex:1,backfaceVisibility:"hidden",position:E()},this.props.style)}))}}]),t}(d.default.PureComponent);g.defaultProps={style:{},className:""},g.propTypes={style:f.default.object,className:f.default.string},t.default=d.default.memo(g)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(6);a(2370);var c=function(e){var t=e.handleCloseDialog,a=e.fullWidth;return l.default.createElement("div",{className:(0,u.default)("study-changed-status-bar",{fullWidth:a})},l.default.createElement("span",{className:"message"},"The study owner has made changes to this study. Scenario details may be modified."),l.default.createElement("div",{className:"study-changed-closeContainer",onClick:t},d.Icons.CROSS_O))};c.defaultProps={fullWidth:!1},c.propTypes={handleCloseDialog:o.default.func.isRequired,fullWidth:o.default.bool},t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1046),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(12),c=a(6),f=a(7);a(2371);var p=function(e){var t=e.approvedParams,a=e.currentParams,n=e.invalidFields,r=["fp"],i=["target_lpft","therapeutic_area","indication","target_num_patients","phase"],o={target_lpft:"T/LPFT",target_num_patients:"T/Patients",fp:"FP",indication:"Indication",therapeutic_area:"TA",phase:"Phase"},s=r.map(function(e){return{key:e,title:o[e],approved:t[e],current:a[e],status:a[e]?!n.includes(e):null}}),u=i.map(function(e){return{key:e,title:o[e],approved:t[e],current:a[e],status:a[e]?!n.includes(e):null}});return l.default.createElement("div",{style:{marginTop:"16px"},className:"fpo-study-details-warning-table"},l.default.createElement(d.FlexTable,{headerHeight:60,rowHeight:35,rowsCount:s.length},l.default.createElement(d.Row,{data:s},l.default.createElement(d.Column,{header:l.default.createElement(m,{title:null,name:null}),data:l.default.createElement(h,{rows:s,dataField:"title"}),fixedWidth:!0,width:120}),l.default.createElement(d.Column,{header:l.default.createElement(m,{name:""},"Study parameters",l.default.createElement("br",null)," in FPO"),data:l.default.createElement(h,{rows:s,dataField:"approved"}),width:95}),l.default.createElement(d.Column,{header:l.default.createElement(m,{name:""},"Study parameters",l.default.createElement("br",null)," in Impact"),data:l.default.createElement(h,{rows:s,dataField:"current"}),width:95}),l.default.createElement(d.Column,{header:l.default.createElement(m,{title:null,name:null}),data:l.default.createElement(h,{rows:s,dataField:"status"}),fixedWidth:!0,width:60}))),l.default.createElement(d.FlexTable,{headerHeight:0,rowHeight:35,rowsCount:u.length},l.default.createElement(d.Row,{data:u},l.default.createElement(d.Column,{header:l.default.createElement(m,{title:null,name:null}),data:l.default.createElement(h,{rows:u,dataField:"title"}),fixedWidth:!0,width:120}),l.default.createElement(d.Column,{header:l.default.createElement(m,{title:null,name:null}),data:l.default.createElement(h,{rows:u,dataField:"approved"}),width:95}),l.default.createElement(d.Column,{header:l.default.createElement(m,{title:null,name:null}),data:l.default.createElement(h,{rows:u,dataField:"current"}),width:95}),l.default.createElement(d.Column,{header:l.default.createElement(m,{title:null,name:null}),data:l.default.createElement(h,{rows:u,dataField:"status"}),fixedWidth:!0,width:60}))))};p.defaultProps={inDuplicateDialog:!1,dashboard:!1,partial:!1,scenarioName:null,approvedLpft:"-",nextarget_lpft:"-",recalculateWithActualParams:!1,confirmActualStudyParams:!1,showWarningOnDuplicate:!1,recalculateOption:!1,hideConfirmOption:!1,duplicate:!1},p.propTypes={approvedParams:o.default.object.isRequired,currentParams:o.default.object.isRequired,invalidFields:o.default.array.isRequired};var m=function(e){var t=e.name,a=e.children;return l.default.createElement(d.Cell,{className:"header-cell"},a,l.default.createElement("div",{className:"name"},t))};m.defaultProps={children:null,name:null},m.propTypes={children:o.default.node,name:o.default.string};var h=function(e){var t=e.rowIndex,a=e.rows,n=e.dataField,r=a[t];if(!r)return null;var i=r.key,o=r[n];!o||"target_lpft"!==i&&"fp"!==i||"-"===o||"approved"!==n&&"current"!==n||(o=(0,f.getMomentDate)(o).format("DD MMM YYYY"));var s=void 0;return s="status"===n?l.default.createElement("div",{className:(0,u.default)("status-icon__wrapper",{success:o,error:!o&&null!==o})},o||null===o?c.Icons.SUCCESS:c.Icons.ERROR):!o&&0!==o&&"fpfvFpft"!==i||"target_num_patients"===i&&0===o?l.default.createElement("div",{className:"missing-value"},"Missing value"):l.default.createElement("div",null,o,"fpfvFpft"===i&&"title"!==n?"w":""),l.default.createElement(d.Cell,{className:"data-cell"},s,l.default.createElement("div",{className:"cell-underline"}))};h.defaultProps={rowIndex:null},h.propTypes={rowIndex:o.default.number,rows:o.default.array.isRequired,dataField:o.default.string.isRequired},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(6),f=a(530),p=n(f),m=a(13),h=n(m);a(2373);var v=function(e){function t(){var e,a,n,i;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={isShown:!1},n.onCloseDetails=function(){n.setState({isShown:!1})},n.toggleDetails=function(){n.setState({isShown:!n.state.isShown})},i=a,l(n,i)}return i(t,e),s(t,[{key:"render",value:function(){return d.default.createElement("div",{className:"study-details-warning"},d.default.createElement("span",{className:"message"},"Study parameters aren't consistent with Impact data."),d.default.createElement(h.default,{mouseEnterDelay:.7,placement:"top",overlay:"Click to see mismatched parameters"},d.default.createElement("div",{className:"study-details-warning-details__wrapper",onClick:this.toggleDetails},c.Icons.INFO_O)),d.default.createElement(p.default,o({},this.props,{isShown:this.state.isShown,onClose:this.onCloseDetails})))}}]),t}(d.default.PureComponent);t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1048),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StudyListTitleBar=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(66),m=n(p),h=a(13),v=n(h),_=a(6),E=a(179),g=a(928),y=n(g),S=a(78),b=n(S);a(2374);var C=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showMenu:!1},a.toggleMenu=a.toggleMenu.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a}return i(t,e),s(t,[{key:"toggleMenu",value:function(e){this.setState({showMenu:void 0!==e?e:!this.state.showMenu})}},{key:"handleClickOutside",value:function(e){this.state.showMenu&&e&&!e.target.getAttribute("data-ignore-click-outside")&&this.toggleMenu(!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.trackingStudies,n=t.planningStudies,r=t.userStudies,l=t.unknownStudies,i=t.userName,s=t.onStudyAdd,u=t.onImport,c=t.getStudies,f=t.studies,p=t.metadata,m=this.state.showMenu?{visible:!1}:{},h=d.default.createElement("div",{className:"user-profile"},d.default.createElement("div",{className:"user-profile-icon"},_.Icons.USER_PROFILE),d.default.createElement("div",{className:"user-profile-text"},d.default.createElement("span",{className:"greeting"},"Hello,"),d.default.createElement("span",{className:"user-name"},i)));return d.default.createElement("div",{className:"study-list-title-bar"},h,l>0&&d.default.createElement("div",{className:"study-list-title-bar__item study-list-title-bar__item--na"},d.default.createElement("div",{className:"study-list-title-bar__item-title"},"Completed / Cancelled"),d.default.createElement("div",{className:"study-list-title-bar__item-value"},l)),d.default.createElement("div",{className:"study-list-title-bar__item study-list-title-bar__item--tracking"},d.default.createElement("div",{className:"study-list-title-bar__item-title"},"Tracking"),d.default.createElement("div",{className:"study-list-title-bar__item-value"},a)),d.default.createElement("div",{className:"study-list-title-bar__item study-list-title-bar__item--planning"},d.default.createElement("div",{className:"study-list-title-bar__item-title"},"Planning"),d.default.createElement("div",{className:"study-list-title-bar__item-value"},n)),d.default.createElement("div",{className:"study-list-title-bar__item study-list-title-bar__item--import"},d.default.createElement(b.default,null,d.default.createElement(y.default,{className:"studies-page__import-study",studies:f,getStudies:c,onImport:u}))),p.userCanViewPlaygroundStudy&&d.default.createElement("div",{className:"study-list-title-bar__item fpo-separator"}),p.userCanViewPlaygroundStudy&&d.default.createElement("div",{className:"study-list-title-bar__item study-list-title-bar__item--user"},d.default.createElement("div",{className:"study-list-title-bar__item-title"},d.default.createElement(v.default,o({mouseEnterDelay:.3},m,{placement:"topRight",align:{offset:[20,0]},overlay:d.default.createElement("span",null,"Create study not already in",d.default.createElement("br",null)," IMPACT")}),d.default.createElement(v.default,{destroyTooltipOnHide:!0,align:{offset:[20,0]},placement:"bottomRight",visible:this.state.showMenu,trigger:["click"],overlay:d.default.createElement(E.ContextMenu,null,d.default.createElement(E.ContextMenuItem,{label:"Create study","data-ignore-click-outside":!0,icon:d.default.createElement("div",{className:"icon-color-white"},_.Icons.PLUS),onClick:function(){s()}}),d.default.createElement(E.ContextMenuItem,{label:"Create cohort study","data-ignore-click-outside":!0,icon:d.default.createElement("div",{className:"icon-color-white"},_.Icons.PLUS),onClick:function(){return s(!0)}}))},d.default.createElement("span",{className:"row-control-icon--more",onClick:function(){return e.toggleMenu()}},_.Icons.PLUS))),"My playground"),d.default.createElement("div",{className:"study-list-title-bar__item-value"},r)))}}]),t}(d.default.PureComponent);C.defaultProps={trackingStudies:0,planningStudies:0,userStudies:0,unknownStudies:0,userName:""},C.propTypes={trackingStudies:f.default.number,planningStudies:f.default.number,userStudies:f.default.number,unknownStudies:f.default.number,userName:f.default.string,onStudyAdd:f.default.func.isRequired,studies:f.default.array.isRequired,getStudies:f.default.func.isRequired,onImport:f.default.func.isRequired,metadata:f.default.object.isRequired},t.StudyListTitleBar=C,t.default=(0,m.default)(C)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(10),c=n(d),f=a(12),p=a(6);n(a(51)),a(2375);var m=function(e){var t=e.hideConfirmOption,a=e.approvedParams,n=e.currentParams,r=e.invalidFields,i=e.scenarioName,o=e.approvedLpft,s=e.nextLpft,u=(e.confirmActualStudyParams,e.handleConfirmActualStudyParamsCheck,e.showWarningOnDuplicate),d=e.duplicate,c=["fp","fpfvFpft"],p=["tLpft","therapeutic_area","indication","target_num_patients"],m={tLpft:"T/LPFT",target_num_patients:"T/Patients",fp:"FP",fpfvFpft:"FPFV-FPFT",indication:"Indication",therapeutic_area:"TA"},_=c.map(function(e){return{key:e,title:m[e],approved:a[e],current:n[e],status:!r.includes(e)}}),E=p.map(function(e){return{key:e,title:m[e],approved:a[e],current:n[e],status:!r.includes(e)}}),g=c.reduce(function(e,t){var a=e;return r.includes(t)&&(a=!0),a},!1);return p.reduce(function(e,t){var a=e;return r.includes(t)&&(a=!0),a},!1),l.default.createElement("div",{style:{marginTop:"16px"},className:"fpo-study-params-details-warning-table"},l.default.createElement(f.FlexTable,{headerHeight:60,rowHeight:35,rowsCount:_.length},l.default.createElement(f.Row,{data:_},l.default.createElement(f.Column,{header:l.default.createElement(h,{title:null,name:null}),data:l.default.createElement(v,{rows:_,dataField:"title"}),fixedWidth:!0,width:120}),l.default.createElement(f.Column,{header:l.default.createElement(h,{name:""},"Study parameters",l.default.createElement("br",null)," used for ",i," plan"),data:l.default.createElement(v,{rows:_,dataField:"approved"}),width:95}),l.default.createElement(f.Column,{header:l.default.createElement(h,{name:""},"Actual study",l.default.createElement("br",null)," parameters"),data:l.default.createElement(v,{rows:_,dataField:"current"}),width:95}),l.default.createElement(f.Column,{header:l.default.createElement(h,{title:null,name:null}),data:l.default.createElement(v,{rows:_,dataField:"status"}),fixedWidth:!0,width:60}))),!t&&g&&u&&l.default.createElement("div",{className:"table-inner-control__wrapper"},l.default.createElement("div",{className:"checkbox__wrapper"},d?l.default.createElement("div",null,l.default.createElement("strong",null," P/LPFT")," in duplicate will be adjusted accordingly: ",l.default.createElement("br",null),o&&l.default.createElement("strong",null," ",o)," to ",l.default.createElement("strong",null,s)):l.default.createElement("div",null,"Recalculate scenario with actual study parameters.",l.default.createElement("strong",null," P/LPFT")," will be adjusted accordingly:",o&&l.default.createElement("strong",null," ",o)," to ",l.default.createElement("strong",null,s)))),l.default.createElement(f.FlexTable,{headerHeight:0,rowHeight:35,rowsCount:E.length},l.default.createElement(f.Row,{data:E},l.default.createElement(f.Column,{header:l.default.createElement(h,{title:null,name:null}),data:l.default.createElement(v,{rows:E,dataField:"title"}),fixedWidth:!0,width:120}),l.default.createElement(f.Column,{header:l.default.createElement(h,{title:null,name:null}),data:l.default.createElement(v,{rows:E,dataField:"approved"}),width:95}),l.default.createElement(f.Column,{header:l.default.createElement(h,{title:null,name:null}),data:l.default.createElement(v,{rows:E,dataField:"current"}),width:95}),l.default.createElement(f.Column,{header:l.default.createElement(h,{title:null,name:null}),data:l.default.createElement(v,{rows:E,dataField:"status"}),fixedWidth:!0,width:60}))),!1)};m.defaultProps={inDuplicateDialog:!1,dashboard:!1,partial:!1,scenarioName:null,approvedLpft:"-",nextLpft:"-",recalculateWithActualParams:!1,confirmActualStudyParams:!1,showWarningOnDuplicate:!1,recalculateOption:!1,hideConfirmOption:!1,duplicate:!1},m.propTypes={approvedParams:o.default.object.isRequired,currentParams:o.default.object.isRequired,invalidFields:o.default.array.isRequired,scenarioName:o.default.string,approvedLpft:o.default.string,nextLpft:o.default.string,confirmActualStudyParams:o.default.bool,showWarningOnDuplicate:o.default.bool,handleConfirmActualStudyParamsCheck:o.default.func.isRequired,hideConfirmOption:o.default.bool,duplicate:o.default.bool};var h=function(e){var t=e.name,a=e.children;return l.default.createElement(f.Cell,{className:"header-cell"},a,l.default.createElement("div",{className:"name"},t))};h.defaultProps={children:null,name:null},h.propTypes={children:o.default.node,name:o.default.string};var v=function(e){var t=e.rowIndex,a=e.rows,n=e.dataField,r=a[t];if(!r)return null;var i=r.key,o=r[n];!o||"tLpft"!==i&&"fp"!==i||"-"===o||"approved"!==n&&"current"!==n||(o=(0,c.default)(o).format("DD MMM YYYY"));var s=void 0;return s="status"===n?l.default.createElement("div",{className:(0,u.default)("status-icon__wrapper",{success:o,error:!o})},o?p.Icons.SUCCESS:p.Icons.ERROR):!o&&0!==o&&"fpfvFpft"!==i||"target_num_patients"===i&&0===o?l.default.createElement("div",{className:"missing-value"},"Missing value"):l.default.createElement("div",null,o,"fpfvFpft"===i&&"title"!==n?"d":""),l.default.createElement(f.Cell,{className:"data-cell"},s,l.default.createElement("div",{className:"cell-underline"}))};v.defaultProps={rowIndex:null},v.propTypes={rowIndex:o.default.number,rows:o.default.array.isRequired,dataField:o.default.string.isRequired},t.default=m},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(6),m=a(531),h=n(m);a(2377);var v=function(e){function t(){var e,a,n,i;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={isShown:!1},n.onCloseDetails=function(){n.setState({isShown:!1})},n.toggleDetails=function(){n.setState({isShown:!n.state.isShown})},i=a,l(n,i)}return i(t,e),s(t,[{key:"render",value:function(){return d.default.createElement("div",{className:"study-params-warning"},d.default.createElement("span",{className:"message"},"Study parameters have been changed.",this.props.dashboard?" Approved ":" Current ","scenario was created with different study parameters."),!this.props.dashboard&&d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:"study-params-warning-details__wrapper",onClick:this.toggleDetails},p.Icons.INFO_O),d.default.createElement(h.default,o({},this.props,{isShown:this.state.isShown,onClose:this.onCloseDetails}))))}}]),t}(d.default.PureComponent);v.propTypes={dashboard:f.default.bool},v.defaultProps={dashboard:!1},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,S.getStudyData)(e,t),n=(0,C.default)(e,t),r=t.dataType===w.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",i=n[r][t.rowIndex],o=(0,y.default)(e.auth.user,a,l({},i,{state:i.state?i.state:{}})),s=o.isShareAvailable,u=o.isDuplicateAvailable,d=o.isAdmin,c=o.isUserHasScenarioFullControl;return{calculating:i.calculating,status:i.status,nerve_job_status:i.nerve_job_status,studyId:a.id,isDuplicateAvailable:u,isShareAvailable:s,isUserHasScenarioFullControl:c,isAdmin:d,scenarioId:i.id||"impact",isArchived:e.routing.locationBeforeTransitions.pathname.indexOf("archived")>-1}}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=a(0),s=n(o),u=a(1),d=n(u),c=a(2),f=n(c),p=a(8),m=a(13),h=n(m),v=a(179),_=a(6),E=a(52),g=a(40),y=n(g),S=a(103),b=a(55),C=n(b),O=a(36),T=a(47),R=n(T),w=a(62),A=function(e){var t=e.isBold,a=e.duplicateScenario,n=e.archiveScenario,r=e.unarchiveScenario,l=e.shareScenario,u=e.removeScenario,d=e.calculating,c=e.status,p=e.nerve_job_status,m=e.studyId,g=e.isShareAvailable,y=e.isDuplicateAvailable,S=e.isUserHasScenarioFullControl,b=e.isAdmin,C=e.scenarioId,O=e.exportScenario,T=e.isArchived,w=(0,o.useRef)(),A=(0,o.useState)(!1),I=i(A,2),N=I[0],D=I[1],P=(0,f.default)("data-cell","study-scenarios-context-menu",{calculating:d,"cell-approved":"APPROVED"===c,failed_optimisation:p===R.default.FAILED&&"APPROVED"!==c,requested_optimisation:p===R.default.RUNNING||p===R.default.QUEUED,bold:t}),L=(0,o.useCallback)(function(){N&&D(!1)},[D,N]);return(0,o.useEffect)(function(){return N&&document.addEventListener("click",L),N||document.removeEventListener("click",L),function(){document.removeEventListener("click",L)}},[N,L]),s.default.createElement(E.Cell,{className:P},s.default.createElement(h.default,{mouseEnterDelay:.3,overlayClassName:"scenarios-table__more-tooltip",align:{offset:[0,0]},overlay:s.default.createElement("span",null,"Actions")},s.default.createElement(h.default,{visible:N,destroyTooltipOnHide:!0,overlayClassName:"scenarios-table__actions-tooltip",align:{offset:[12,0]},placement:"bottomRight",trigger:["click"],overlay:s.default.createElement("div",{ref:w},s.default.createElement(v.ContextMenu,null,!T&&y&&s.default.createElement(v.ContextMenuItem,{label:"Duplicate",icon:s.default.createElement(_.Icons.duplicateIconComponent,{isNegative:!0}),onClick:function(){D(!1),a(C)}}),s.default.createElement(v.ContextMenuItem,{label:"Export",icon:s.default.createElement(_.Icons.exportIconComponent,{isNegative:!0}),onClick:function(){D(!1),O(m,"impact"===C?null:C)}}),!T&&g&&s.default.createElement(v.ContextMenuItem,{label:"Share",icon:s.default.createElement(_.Icons.shareIconComponent,{isNegative:!0}),onClick:function(){D(!1),l(C)}}),["OPEN","PREV. APPROVED"].includes(c)&&s.default.createElement(v.ContextMenuItem,{label:T?"Unarchive":"Archive",icon:s.default.createElement(_.Icons.archiveIconComponent,{isNegative:!0}),onClick:function(){D(!1),T?r(C):n(C)}}),u&&"OPEN"===c&&(b||S)&&s.default.createElement(v.ContextMenuItem,{label:"Remove",icon:s.default.createElement(_.Icons.removeIconComponent,{isNegative:!0}),onClick:function(){D(!1),u(C)}})))},s.default.createElement("div",{className:"row-control-icon--more",onClick:function(e){e.stopPropagation(),D(!0)}},_.Icons.MORE_HORIZ))))};A.defaultProps={rowIndex:0,dataField:"",dateType:!1,isBold:!1,scenarioData:{},removeScenario:void 0,calculating:!1,status:null,nerve_job_status:null,isShareAvailable:!1,isDuplicateAvailable:!1,isUserHasScenarioFullControl:!1,isAdmin:!1,isArchived:!1},A.propTypes={isBold:d.default.bool,duplicateScenario:d.default.func.isRequired,archiveScenario:d.default.func.isRequired,shareScenario:d.default.func.isRequired,removeScenario:d.default.func,calculating:d.default.bool,status:d.default.string,nerve_job_status:d.default.string,studyId:d.default.number.isRequired,isShareAvailable:d.default.bool,isDuplicateAvailable:d.default.bool,isUserHasScenarioFullControl:d.default.bool,isAdmin:d.default.bool,scenarioId:d.default.oneOfType([d.default.number,d.default.string]).isRequired,exportScenario:d.default.func.isRequired,unarchiveScenario:d.default.func.isRequired,isArchived:d.default.bool};var I={exportScenario:O.exportScenarioData};t.default=(0,p.connect)(r,I)(A)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,v.default)(e,t),n=t.dataType===g.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",r=a[n][t.rowIndex];return{calculating:r.calculating,status:r.status,nerve_job_status:r.nerve_job_status,value:(0,p.default)(r,"fullData[0].uniqueCountries")||(0,p.default)(r,"countries",[]).length,failedFetch:r&&r.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(2),c=n(d),f=a(11),p=n(f),m=a(52),h=a(55),v=n(h),_=a(47),E=n(_),g=a(62),y=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.value,l=e.failedFetch,o=(0,c.default)("data-cell",{failedFetch:l,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===E.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===E.default.RUNNING||n===E.default.QUEUED});return i.default.createElement(m.Cell,{className:o},i.default.createElement("div",{className:"align-right"},r),i.default.createElement("div",{className:"cell-underline"}))};y.defaultProps={rowIndex:0,calculating:!1,status:null,nerve_job_status:null,value:0,failedFetch:!1},y.propTypes={calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,value:s.default.number,failedFetch:s.default.bool},t.default=(0,u.connect)(r)(y)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,g.default)(e,t),n=t.dataType===v.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",r=a[n][t.rowIndex],l=r.source_scenario_id,i=l?"adjusted_":"",o=r.fullData[0][i+"overallocatedData"],s=o?o.lpft:r.fullData[0][i+"lpft"],u=r.tooltipData;return{calculating:r.calculating,status:r.status,nerve_job_status:r.nerve_job_status,studyParamsWarning:r.studyParamsWarning,predicted:s,targetDate:r.targetDate,tooltipData:u,failedFetch:r&&r.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(2),c=n(d),f=a(52),p=a(47),m=n(p),h=a(14),v=a(62),_=a(7),E=a(55),g=n(E),y=a(181),S=n(y),b=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.isActive,l=e.studyParamsWarning,o=e.predicted,s=e.targetDate,u=e.tooltipData,d=e.failedFetch,p=a===h.SCENARIO_STATUS.APPROVED,v=(0,c.default)("data-cell",{failedFetch:d,calculating:t,"cell-approved":p,failed_optimisation:n===m.default.FAILED&&!p,requested_optimisation:n===m.default.RUNNING||n===m.default.QUEUED}),E=void 0;E=p&&r?o&&s?(0,_.getMomentDate)(o).diff((0,_.getMomentDate)(s),"days"):null:o&&s?(0,_.getMomentDate)(s).diff((0,_.getMomentDate)(o),"days"):null;var g=(0,c.default)({"color-green":o&&E>=0},{"color-red":o&&E<0}),y=void 0,b=void 0;return l&&l.showStudyParamsWarning&&(l.invalidFields.includes("tLpft")||l.invalidFields.includes("fp"))?b=i.default.createElement("div",{className:g},""):0===E?b=i.default.createElement("div",{className:g},"0d"):o&&null!==E?(y=E>0?"-":"+",b=i.default.createElement("div",{className:g},o?""+y+Math.abs(E):"-")):b=i.default.createElement("div",{className:g},"-"),i.default.createElement(f.Cell,{className:v},u?i.default.createElement(S.default,{overlay:i.default.createElement("div",null,u)},i.default.createElement("div",{className:"align-right"},b)):i.default.createElement("div",{className:"align-right"},b),i.default.createElement("div",{className:"cell-underline"}))};b.defaultProps={rowIndex:0,isActive:!1,calculating:!1,status:null,nerve_job_status:null,studyParamsWarning:null,predicted:null,targetDate:null,failedFetch:!1,tooltipData:null},b.propTypes={isActive:s.default.bool,calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,studyParamsWarning:s.default.object,predicted:s.default.oneOfType([s.default.string,s.default.object]),targetDate:s.default.oneOfType([s.default.string,s.default.object]),tooltipData:s.default.string,failedFetch:s.default.bool},t.default=(0,u.connect)(r)(b)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,v.default)(e,t),n=t.dataType===_.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",r=a[n][t.rowIndex],l=r.source_scenario_id,i=l?"adjusted_":"",o=r.fullData[0][i+"overallocatedData"],s=o?o.fpfv_lpfv:r.fullData[0][i+"fpfv_lpfv"];return{calculating:r.calculating,status:r.status,nerve_job_status:r.nerve_job_status,value:s,failedFetch:r&&r.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(2),c=n(d),f=a(52),p=a(47),m=n(p),h=a(55),v=n(h),_=a(62),E=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.value,l=e.failedFetch,o=(0,c.default)("data-cell",{failedFetch:l,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===m.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===m.default.RUNNING||n===m.default.QUEUED});return i.default.createElement(f.Cell,{className:o},i.default.createElement("div",{className:"align-right"},r?r+"d":"-"),i.default.createElement("div",{className:"cell-underline"}))};E.defaultProps={rowIndex:0,calculating:!1,status:null,nerve_job_status:null,value:0,failedFetch:!1},E.propTypes={calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,value:s.default.number,failedFetch:s.default.bool},t.default=(0,u.connect)(r)(E)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={createdAt:(0,p.getMomentDate)(t.createdAt||t.adjusted_createdAt),value:e};if(t.originScenario){var n=t.originScenario,r=n.name,l=n.studyName,i=n.status,s=n.isAdjusted;a.originScenarioName=r,a.originScenarioStatus=i,a.originIsAdjusted=s,t.platform_study_id!==l&&(a.originStudyName=l),a.exactCopy=!!t.exact_copy,a.isAdjusted=null!==t.source_scenario_id,a.status=t.status}return o.default.createElement("div",null,o.default.createElement("div",null,o.default.createElement(v.default,a)),o.default.createElement("div",{className:"cell-underline"}))}function l(e,t){var a=(0,S.default)(e,t),n=t.dataType===g.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",r=a[n][t.rowIndex],l=r[t.dataField]||"";return"owner_name"===t.dataField&&(l=l&&l.trim().length>0?l:"-"),{calculating:r.calculating,status:r.status,nerve_job_status:r.nerve_job_status,value:l,createdAt:r.createdAt,adjusted_createdAt:r.adjusted_createdAt,originScenario:r.originScenario,exact_copy:r.exact_copy,source_scenario_id:r.source_scenario_id,failedFetch:r&&r.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),o=n(i),s=a(1),u=n(s),d=a(8),c=a(2),f=n(c),p=a(7),m=a(52),h=a(516),v=n(h),_=a(47),E=n(_),g=a(62),y=a(55),S=n(y),b=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,l=e.value,i=e.dataField,s=e.dateType,u=e.isBold,d=e.createdAt,c=e.adjusted_createdAt,h=e.originScenario,v=e.exact_copy,_=e.source_scenario_id,g=e.failedFetch,y=(0,f.default)("data-cell",{failedFetch:g,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===E.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===E.default.RUNNING||n===E.default.QUEUED,bold:u}),S=l;s?S=(0,p.formatDate)(l):"status"===i&&_&&(S=o.default.createElement("div",{style:{position:"relative",display:"inline-block"}},l,o.default.createElement("div",{className:"sup",style:{right:"-134%",top:"-8px"}},"Adjusted")));var b=o.default.createElement("div",null,o.default.createElement("div",null,S),o.default.createElement("div",{className:"cell-underline"}));return o.default.createElement(m.Cell,{className:y},"name"===i?r(l,{createdAt:d,adjusted_createdAt:c,originScenario:h,exact_copy:v,source_scenario_id:_,status:a}):b)};b.defaultProps={rowIndex:0,dataField:"",dateType:!1,isBold:!1,calculating:!1,status:null,nerve_job_status:null,value:"",failedFetch:!1},b.propTypes={dataField:u.default.string,dateType:u.default.bool,isBold:u.default.bool,calculating:u.default.bool,status:u.default.string,nerve_job_status:u.default.string,value:u.default.string,createdAt:u.default.object,adjusted_createdAt:u.default.object,originScenario:u.default.object,exact_copy:u.default.bool,source_scenario_id:u.default.number,failedFetch:u.default.bool},t.default=(0,d.connect)(l)(b)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(52),c=function(e){var t=e.title,a=e.alignTo,n=e.hideUnderline,r=(0,u.default)({"align-right":"right"===a,"align-left":"left"===a});return l.default.createElement(d.Cell,{className:"header-cell"},l.default.createElement("div",{className:r},t),!n&&l.default.createElement("div",{className:"header-cell-underline"}))};c.defaultProps={title:"",alignTo:"left",hideUnderline:!1},c.propTypes={title:o.default.string,alignTo:o.default.oneOf(["left","right"]),hideUnderline:o.default.bool},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,_.default)(e,t),n=t.dataType===h.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",r=a[n][t.rowIndex],l=r.source_scenario_id,i=l?"adjusted_patient_allocation":"patient_allocation",o=r.fullData[0][i];return{calculating:r.calculating,status:r.status,nerve_job_status:r.nerve_job_status,value:o,failedFetch:r&&r.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(2),c=n(d),f=a(52),p=a(47),m=n(p),h=a(62),v=a(55),_=n(v),E=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.value,l=e.failedFetch,o=(0,c.default)("data-cell",{failedFetch:l,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===m.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===m.default.RUNNING||n===m.default.QUEUED});return i.default.createElement(f.Cell,{className:o},i.default.createElement("div",{className:"align-right"},r),i.default.createElement("div",{className:"cell-underline"}))};E.defaultProps={rowIndex:0,calculating:!1,status:null,nerve_job_status:null,value:0,failedFetch:!1},E.propTypes={calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,value:s.default.number,failedFetch:s.default.bool},t.default=(0,u.connect)(r)(E)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,E.default)(e,t),n=t.dataType===v.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",r=a[n][t.rowIndex],l=r.source_scenario_id,i=l?"adjusted_":"",o=r.fullData[0][i+"overallocatedData"],s=o?o.lpft:r.fullData[0][i+"lpft"];return{calculating:r.calculating,status:r.status,nerve_job_status:r.nerve_job_status,predicted:s,targetDate:r.targetDate,failedFetch:r&&r.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(2),c=n(d),f=a(7),p=a(52),m=a(47),h=n(m),v=a(62),_=a(55),E=n(_),g=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.isActive,l=e.predicted,o=e.targetDate,s=e.failedFetch,u=(0,c.default)("data-cell",{failedFetch:s,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===h.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===h.default.RUNNING||n===h.default.QUEUED}),d=void 0;d="APPROVED"===a&&r?l&&o?(0,f.getMomentDate)(l).diff((0,f.getMomentDate)(o),"days"):null:l&&o?(0,f.getMomentDate)(o).diff((0,f.getMomentDate)(l),"days"):null;var m=(0,c.default)({"color-green":l&&d>=0},{"color-red":l&&d<0});return i.default.createElement(p.Cell,{className:u},i.default.createElement("div",{className:m},l?(0,f.formatDate)((0,f.getMomentDate)(l)):"-"),i.default.createElement("div",{className:"cell-underline"}))};g.defaultProps={rowIndex:0,target:"",isActive:!1,calculating:!1,status:null,nerve_job_status:null,value:0,predicted:null,targetDate:null,failedFetch:!1},g.propTypes={calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,isActive:s.default.bool,predicted:s.default.oneOfType([s.default.string,s.default.object]),targetDate:s.default.oneOfType([s.default.string,s.default.object]),failedFetch:s.default.bool},t.default=(0,u.connect)(r)(g)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,S.default)(e,t),n=t.dataType===g.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",r=a[n][t.rowIndex];return{data:r,calculating:r.calculating,status:r.status,nerve_job_status:r.nerve_job_status,scenarioId:r.id||"impact",showStudyParamsWarning:r.studyParamsWarning&&r.studyParamsWarning.showStudyParamsWarning,failedFetch:r&&r.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(2),c=n(d),f=a(259),p=n(f),m=a(6),h=a(13),v=n(h),_=a(47),E=n(_),g=a(62),y=a(55),S=n(y),b=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.onWarningIconClick,l=e.showStudyParamsWarning,o=e.failedFetch,s=e.data,u=(0,c.default)("data-cell","pull-center",{failedFetch:o,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===E.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===E.default.RUNNING||n===E.default.QUEUED});return i.default.createElement(p.default,{className:u},i.default.createElement(v.default,{mouseEnterDelay:.7,placement:"top",overlay:"Click to see mismatched parameters"},i.default.createElement("div",{className:"warning-icon",onClick:function(e){l&&(e.stopPropagation(),r(s))}},l?m.Icons.MISMATCH:"")))};b.defaultProps={rowIndex:0,calculating:!1,status:null,nerve_job_status:null,showStudyParamsWarning:!1,failedFetch:!1},b.propTypes={calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,onWarningIconClick:s.default.func.isRequired,data:s.default.object.isRequired,showStudyParamsWarning:s.default.bool,failedFetch:s.default.bool},t.default=(0,u.connect)(r)(b)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,y.default)(e,t),n=t.dataType===E.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",r=a[n][t.rowIndex],l=r.cohorts&&r.cohorts.length>0;return{isCohort:l,calculating:r.calculating,status:r.status,nerve_job_status:r.nerve_job_status,value:l?r.cohorts.length:"-",failedFetch:r&&r.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(2),c=n(d),f=a(52),p=a(6),m=a(13),h=n(m),v=a(47),_=n(v),E=a(62),g=a(55),y=n(g),S=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.value,l=e.isCohort,o=e.failedFetch,s=(0,c.default)("data-cell","cohort","pull-center",{failedFetch:o,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===_.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===_.default.RUNNING||n===_.default.QUEUED});return i.default.createElement(f.Cell,{className:s},l?i.default.createElement(h.default,{overlay:"Cohort scenario",mouseEnterDelay:.3},i.default.createElement("div",{className:"info-icon"},p.Icons.COHORTS,i.default.createElement("div",{className:"sup"},r))):i.default.createElement("div",null,r),i.default.createElement("div",{className:"cell-underline"}))};S.defaultProps={rowIndex:0,calculating:!1,status:null,nerve_job_status:null,value:"",isCohort:!1,failedFetch:!1},S.propTypes={calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,value:s.default.oneOfType([s.default.number,s.default.string]),isCohort:s.default.bool,failedFetch:s.default.bool},t.default=(0,u.connect)(r)(S)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,_.default)(e,t),n=t.dataType===h.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",r=a[n][t.rowIndex],l=r.source_scenario_id,i=l?"adjusted_num_sites":"num_sites",o=r.fullData[0][i];return{calculating:r.calculating,status:r.status,nerve_job_status:r.nerve_job_status,value:o,failedFetch:r&&r.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(2),c=n(d),f=a(52),p=a(47),m=n(p),h=a(62),v=a(55),_=n(v),E=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.value,l=e.failedFetch,o=(0,c.default)("data-cell",{failedFetch:l,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===m.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===m.default.RUNNING||n===m.default.QUEUED});return i.default.createElement(f.Cell,{className:o},i.default.createElement("div",{className:"align-right"},r),i.default.createElement("div",{className:"cell-underline"}))};E.defaultProps={rowIndex:0,calculating:!1,status:null,nerve_job_status:null,value:0,failedFetch:!1},E.propTypes={calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,value:s.default.number,failedFetch:s.default.bool},t.default=(0,u.connect)(r)(E)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,C.default)(e,t),n=t.dataType===S.COLLECTION_TYPES.APPROVED?"approvedScenarios":"preparedScenarios",r=a[n][t.rowIndex];return{calculating:r.calculating,status:r.status,nerve_job_status:r.nerve_job_status,hasCohorts:r.cohorts&&r.cohorts.length>0,showParamsWarning:r.studyParamsWarning&&r.studyParamsWarning.showStudyParamsWarning,id:r.id?r.id:"impact",value:r.updated,failedFetch:r&&r.failedFetch}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(2),c=n(d),f=a(7),p=a(52),m=a(51),h=n(m),v=a(6),_=a(181),E=n(_),g=a(47),y=n(g),S=a(62),b=a(55),C=n(b),O=function(e){var t=e.calculating,a=e.status,n=e.nerve_job_status,r=e.hasCohorts,l=e.showParamsWarning,o=e.id,s=e.value,u=e.onSelect,d=e.checkedScenarios,m=e.failedFetch,_=(0,c.default)("data-cell",{failedFetch:m,calculating:t,"cell-approved":"APPROVED"===a,failed_optimisation:n===y.default.FAILED&&"APPROVED"!==a,requested_optimisation:n===y.default.RUNNING||n===y.default.QUEUED}),g=(0,c.default)("cell-control",{"cell-approved":"APPROVED"===a,requested_optimisation:n===y.default.RUNNING||n===y.default.QUEUED,failed_optimisation:n===y.default.FAILED&&"APPROVED"!==a,hidden:d.length>=3&&-1===d.indexOf(o)||r||l,"force-visibility":-1!==d.indexOf(o||"impact")||m}),S=void 0;return S=m?i.default.createElement(E.default,{mouseEnterDelay:.3,overlay:i.default.createElement("span",null,"There was an error occurred while fetching scenario data")},i.default.createElement("div",{className:"error-icon__wrapper"},v.Icons.ERROR)):i.default.createElement(h.default,{label:"",checked:d.indexOf(o||"impact")>-1,onChange:function(){u(o||"impact")}}),i.default.createElement(p.Cell,{className:_},i.default.createElement("div",null,s?(0,f.formatDate)((0,f.getMomentDate)(s)):""),i.default.createElement("div",{className:"cell-underline"}),t&&i.default.createElement("div",{className:"cell-control force-visibility calculate-progress"},v.Icons.ITEM_LOADER),i.default.createElement("div",{className:g,onClick:function(e){return e.stopPropagation()}},S))};O.defaultProps={rowIndex:0,dataField:"",dateType:!1,isBold:!1,calculating:!1,status:null,nerve_job_status:null,value:null,hasCohorts:!1,showParamsWarning:!1,failedFetch:!1},O.propTypes={onSelect:s.default.func.isRequired,checkedScenarios:s.default.array.isRequired,calculating:s.default.bool,status:s.default.string,nerve_job_status:s.default.string,value:s.default.oneOfType([s.default.object,s.default.string]),hasCohorts:s.default.bool,showParamsWarning:s.default.bool,id:s.default.oneOfType([s.default.number,s.default.string]).isRequired,failedFetch:s.default.bool},t.default=(0,u.connect)(r)(O)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TableToolbarFilter=void 0;var r=a(0),l=n(r),i=a(1),o=n(i),s=a(51),u=n(s);a(2378);var d=function(e){var t=e.overallocated,a=e.actualData,n=e.onChange,r=e.showOverallocation,i=e.showActual;return l.default.createElement("div",{className:"table-toolbar-filter"},l.default.createElement("span",{className:"table-toolbar-filter__label"},"Show in the table:"),l.default.createElement(u.default,{name:"overallocated",onChange:function(){return n("overallocated")},label:"Not over-enrolled",disabled:!r,checked:!!t}),i&&l.default.createElement(u.default,{name:"actualData",onChange:function(){return n("actualData")},label:"Actual data",checked:a}))};d.defaultProps={overallocated:void 0,actualData:void 0,showActual:!1,showOverallocation:!1},d.propTypes={overallocated:o.default.bool,actualData:o.default.bool,onChange:o.default.func.isRequired,showOverallocation:o.default.bool,showActual:o.default.bool},t.TableToolbarFilter=d,t.default=l.default.memo(d)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1065),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=a(0),i=n(l),o=a(1),s=n(o),u=a(2),d=n(u);a(1892),a(2379);var c=function(e){var t=e.outsideLabel,a=e.insideLabel,n=e.status,o=e.statusMessage,s=e.disabled,u=e.height,c=e.value,f=e.onChange,p=e.placeholder,m=e.defaultValue,h=(0,l.useState)(!1),v=r(h,2),_=v[0],E=v[1],g=(0,l.useRef)(null),y=function(e){return e?i.default.createElement("label",{onClick:function(e){return e.stopPropagation()&&E(!0)},htmlFor:g},e):null},S=(0,d.default)("fpo-text-area-container",{disabled:s}),b=(0,d.default)("fpo-text-area-wrapper",{"wrapper-focused":_,enabled:!s,error:"error"===n,success:"success"===n});return i.default.createElement("div",{className:S},y(t),i.default.createElement("div",{style:{height:u},onClick:function(){return!s&&E(!0)},className:b},y(a),i.default.createElement("textarea",{style:{minHeight:u-4,height:20*c.split(/\r*\n/).length},ref:g,onFocus:function(){return E(!0)},onBlur:function(e){E(!1),f(e.target.value)},onKeyDown:function(e){return e.stopPropagation()},placeholder:p,defaultValue:m})),function(){if(!n||!o)return null;var e=(0,d.default)("fpo-text-input-status-message",{error:"error"===n,success:"success"===n});return i.default.createElement("div",{className:e},o)}())};c.defaultProps={height:116,outsideLabel:null,insideLabel:null,status:null,statusMessage:null,disabled:!1,value:"",onChange:void 0,placeholder:"",defaultValue:""},c.propTypes={height:s.default.number,outsideLabel:s.default.string,insideLabel:s.default.string,status:s.default.string,statusMessage:s.default.string,disabled:s.default.bool,value:s.default.string,onChange:s.default.func,placeholder:s.default.string,defaultValue:s.default.string},t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1067),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(e){var a=(0,f.findDOMNode)(e);a&&(t?a.classList.remove("clicked"):a.classList.add("clicked"))}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),f=a(30),p=n(f),m=a(1),h=n(m),v=a(2),_=n(v),E=a(61),g=n(E),y=a(146),S=a(87);a(2381);var b=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={parent:a.props.parent,data:a.props.data,cellName:a.props.cellName,uncertaintyLevel:a.props.uncertaintyLevel,studiesCount:a.props.studiesCount},a.orientationX="right",a.orientationY="top",a.updatePosition=a.updatePosition.bind(a),a}return i(t,e),u(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updatePosition),window.addEventListener("scroll",this.updatePosition),document.body.addEventListener("scroll",this.updatePosition)}},{key:"componentWillReceiveProps",value:function(e){var t={};if(this.props.parent!==e.parent&&(t={parent:e.parent},o(this.props.parent,!0)),this.props.data!==e.data&&(t=s({},t,{data:e.data})),this.props.cellName!==e.cellName&&(t=s({},t,{cellName:e.cellName})),this.props.uncertaintyLevel!==e.uncertaintyLevel&&(t=s({},t,{uncertaintyLevel:e.uncertaintyLevel})),this.props.studiesCount!==e.studiesCount&&(t=s({},t,{studiesCount:e.studiesCount})),this.element&&t.parent){var a=t.parent.getBoundingClientRect(),n=this.element.getBoundingClientRect();window.innerHeight-(a.bottom+n.height)<0?(t=s({},t,{top:a.top-n.height}),this.orientationY="top"):(t=s({},t,{top:a.bottom}),this.orientationY="bottom"),window.innerWidth-(a.left+n.width)<0?(t=s({},t,{left:a.right-n.width}),this.orientationX="left"):(t=s({},t,{left:a.left}),this.orientationX="right"),o(t.parent)}this.setState(t)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updatePosition),window.removeEventListener("scroll",this.updatePosition),document.body.removeEventListener("scroll",this.updatePosition),o(this.state.parent,!0)}},{key:"updatePosition",value:function(){if(this.element&&this.state.parent){var e=this.state.parent.getBoundingClientRect(),t=this.element.getBoundingClientRect(),a={};window.innerHeight-(e.bottom+t.height)<0?(a=s({},a,{top:e.top-t.height}),this.orientationY="top"):(a=s({},a,{top:e.bottom}),this.orientationY="bottom"),window.innerWidth-(e.left+t.width)<0?(a=s({},a,{left:e.right-t.width}),this.orientationX="left"):(a=s({},a,{left:e.left}),this.orientationX="right"),o(this.state.parent),this.setState(a)}}},{key:"render",value:function(){var e=this,t=this.state,a=t.top,n=t.left,r=t.parent,l=t.data,i=t.cellName,o=t.studiesCount,s={top:a+"px",left:n+"px"},u=this.props.viewType===S.FILTER_BY.INDICATION?"Indication":"Historical reference studies";return p.default.createPortal(c.default.createElement("div",{className:(0,_.default)("trials-panel",this.orientationX,this.orientationY,{hidden:l&&0===l.satellites.length&&!this.props.uncertaintyLevel}),style:r&&s,ref:function(t){e.element=t}},this.props.uncertaintyLevel&&c.default.createElement("div",{className:"forecast-uncertainty"},c.default.createElement("span",{className:"description"},"Forecast Uncertainty:"),c.default.createElement("span",{className:"value"},this.props.uncertaintyLevel)),l&&l.satellites.length>0&&c.default.createElement("div",{className:"mini-chart"},c.default.createElement(y.HistoricalBenchmarkChart,{data:l})),l&&l.satellites.length>0&&c.default.createElement("div",{className:"statistics"},c.default.createElement("div",{className:"benchmark"},c.default.createElement("div",{className:"label"},S.LABELS[i]+" Benchmark"),c.default.createElement("div",{className:"type"},u),c.default.createElement("div",{className:"dash"})),c.default.createElement("div",{className:"studies-counter"},c.default.createElement(g.default,{size:"large"}),c.default.createElement("div",{className:"content"},c.default.createElement("div",{className:"description"},"Studies"),c.default.createElement("div",{className:"value"},o),c.default.createElement("div",{className:"dash"})))),c.default.createElement("div",{"data-ignore-click-outside":!0,className:"overlay"})),document.body)}}]),t}(d.Component);b.defaultProps={parent:null,viewType:S.FILTER_BY.INDICATION,studiesCount:0,uncertaintyLevel:null,cellName:null,data:null},b.propTypes={parent:h.default.object,cellName:h.default.oneOf(Object.keys(S.LABELS)),viewType:h.default.oneOf(Object.keys(S.FILTER_BY)),uncertaintyLevel:h.default.oneOf([S.UNCERTAINTY.HIGH,S.UNCERTAINTY.LOW,S.UNCERTAINTY.MEDIUM,"N/A"]),studiesCount:h.default.number,data:h.default.object},t.default=b},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(39),p=a(14),m=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={submitted:!1},a.handleConfirm=a.handleConfirm.bind(a),a.handleCancel=a.handleCancel.bind(a),a}return i(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"handleConfirm",value:function(){var e=this;this.setState({submitted:!0},function(){e.props.onSubmit().then(function(){var t=e.props,a=t.callbackActions,n=t.actionType,r=a.find(function(e){return e.type===n}),l=r?r.action:void 0;setTimeout(function(){e.handleCancel(),l()},2e3)}).catch(function(){return e.handleCancel()})})}},{key:"handleCancel",value:function(){var e=this;this.setState({submitted:!1},function(){e.props.onClose()})}},{key:"render",value:function(){var e=this.props.actionType,t="You have unsaved changes, you need to save in order \n    to "+e.toLowerCase()+" this scenario.";return e===p.SIDEBAR_BUTTONS.EVENT&&(t="You have unsaved changes, you need to save in order \n    to navigate to events page."),u.default.createElement(f.PopupDialog,{title:"Unsaved changes",className:"unsaved-changes-dialog",isShown:this.props.isShown,handleClose:this.handleCancel,buttons:[u.default.createElement(f.ActionButton,{className:"unsaved-changes-dialog__button-cancel",action:this.handleCancel},"Cancel"),u.default.createElement(f.ActionButton,{disabled:this.state.submitted,action:this.handleConfirm,primary:!0},"Save")]},u.default.createElement("div",{className:"unsaved-changes-dialog-content"},t))}}]),t}(s.Component);m.defaultProps={actionType:"",callbackActions:[]},m.propTypes={actionType:c.default.string,callbackActions:c.default.arrayOf(c.default.shape({type:c.default.string,action:c.default.func})),onSubmit:c.default.func.isRequired,onClose:c.default.func.isRequired,isShown:c.default.bool.isRequired},t.default=m},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.UnsavedDialog=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(59),p=a(367),m=a(39),h=a(37),v=!1,_=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showDialog:!1},a.hasUnsavedData=a.hasUnsavedData.bind(a),a.handleConfirm=a.handleConfirm.bind(a),a.handleCancel=a.handleCancel.bind(a),a.handleLeave=a.handleLeave.bind(a),a.handleUnload=a.handleUnload.bind(a),a}return i(t,e),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.handleLeave)}},{key:"componentWillReceiveProps",value:function(e){e.hasUnsaved?window.addEventListener("unload",this.handleUnload):window.removeEventListener("unload",this.handleUnload)}},{key:"componentWillUnmount",value:function(){this.remove&&this.remove(),window.removeEventListener("beforeunload",this.handleLeave),window.removeEventListener("unload",this.handleUnload)}},{key:"handleUnload",value:function(){var e=this.props.removeStoredData;e&&(0,h.removeParamItemStorage)("fpo-dirty-data",e)}},{key:"handleConfirm",value:function(){var e=this.props.removeStoredData;e&&(0,h.removeParamItemStorage)("fpo-dirty-data",e),this.setState({showDialog:!1}),v=!0,p.history.push(this.state.nextLocation.pathname)}},{key:"handleCancel",value:function(){this.setState({showDialog:!1})}},{key:"handleLeave",value:function(e){if(this.hasUnsavedData()){var t=this.props.warningMessage;return(e||window.event).returnValue=t,t}return null}},{key:"hasUnsavedData",value:function(){return this.props.hasUnsaved}},{key:"render",value:function(){var e=this,t=this.props,a=t.router,n=t.routes,r=t.warningMessage,l=t.allowTabs,i=t.tabsCommonPath;return this.hasUnsavedData()&&a&&n&&n.length>0&&(this.remove=a.setRouteLeaveHook(n[n.length-1],function(t){var n=a.getCurrentLocation().pathname,r=t.pathname,o=n.substr(0,n.indexOf(i)+i.length),s=r.substr(0,n.indexOf(i)+i.length),u=r.substr(s.length,r.length);return v||!e.hasUnsavedData()||l&&o===s&&(""===u||u.startsWith("/"))?(v=!1,!0):(e.setState({showDialog:!0,nextLocation:t}),!1)})),u.default.createElement(m.PopupDialog,{title:"Unsaved changes",className:"unsaved-changes-dialog",isShown:this.state.showDialog,handleClose:this.handleCancel,buttons:[u.default.createElement(m.ActionButton,{className:"unsaved-changes-dialog__button-cancel",action:this.handleCancel},"Cancel"),u.default.createElement(m.ActionButton,{action:this.handleConfirm,primary:!0},"Leave, anyway")]},u.default.createElement("div",{className:"unsaved-changes-dialog-content"},r))}}]),t}(s.PureComponent);_.defaultProps={hasUnsaved:!1,router:void 0,routes:void 0,warningMessage:"Are you sure you want to leave? The changes you made will not be saved.",allowTabs:!1,tabsCommonPath:"",removeStoredData:null},_.propTypes={hasUnsaved:c.default.bool,router:c.default.object,routes:c.default.array,warningMessage:c.default.string,allowTabs:c.default.bool,tabsCommonPath:c.default.string,removeStoredData:c.default.string},t.UnsavedDialog=_,t.default=(0,f.withRouter)(_)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1071),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(39),u=function(e){var t=e.show,a=e.message,n=e.title,r=e.onOk,i=e.onCancel,o=e.onClose;return l.default.createElement(s.PopupDialog,{isShown:t,title:n,handleClose:o,buttons:[l.default.createElement(s.ActionButton,{action:i},"Cancel"),l.default.createElement(s.ActionButton,{action:r,primary:!0},"Yes")]},l.default.createElement("div",{className:"h2"},a))};u.defaultProps={title:"Warning!"},u.propTypes={show:o.default.bool.isRequired,message:o.default.string.isRequired,title:o.default.string,onOk:o.default.func.isRequired,onCancel:o.default.func.isRequired,onClose:o.default.func.isRequired},t.default=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(59),o=a(1),s=n(o),u=a(2),d=n(u),c=a(6),f=a(13),p=n(f);a(2382);var m=function(e){var t=e.target,a=e.predicted,n=e.title,r=e.href,o=a&&t?t.diff(a,"d"):-1,s=(0,d.default)({"color-green":a&&o>=0},{"color-red":a&&o<0}),u=void 0,f=void 0;return 0===o?f="0d":(u=o>0?"-":"+",f=l.default.createElement("div",{className:s},a&&""+u+Math.abs(o)+"d")),l.default.createElement("div",{className:"compare-scenario-widget"},l.default.createElement("div",{style:{flex:"auto",lineHeight:"28px"}},l.default.createElement("div",{className:"compare-scenario-widget__title"},l.default.createElement("span",null,n),l.default.createElement(i.Link,{to:r,target:"_blank",className:"compare-scenario-widget__expand-icon"},c.Icons.EXPAND)),l.default.createElement("div",{style:{height:"28px",display:"flex"}},l.default.createElement(p.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,align:{offset:[0,-5]},placement:"bottom",overlay:l.default.createElement("span",null,"Planned LPFT")},l.default.createElement("span",{className:"compare-scenario-widget__predicted-title"},"P/LPFT")),l.default.createElement("span",{className:(0,d.default)("compare-scenario-widget__predicted-value",s)},a?a.format("DD MMM YYYY"):"-"),l.default.createElement("span",{className:"compare-scenario-widget__arrow-icon"},c.Icons.ARROW_RIGHT),l.default.createElement("span",{className:"compare-scenario-widget__target-icon"},o>=0?c.Icons.ON_TARGET:c.Icons.OFF_TARGET),l.default.createElement("span",{className:s},f))))};m.defaultProps={predicted:null},m.propTypes={predicted:s.default.object,target:s.default.object.isRequired,title:s.default.string.isRequired,href:s.default.string.isRequired},t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1072),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){switch(t){case O.PATIENT_ALLOCATION:return 0===e?b.ON_TARGET:e>0?b.OVER:b.UNDER;case O.LPFT:default:return 0===e?b.ON_TIME:e>0?b.EARLY:b.LATE}}function u(e,t){var a,n,r,l;return(l={},o(l,b.LATE,(a={},o(a,b.OVER,C.BAD),o(a,b.ON_TARGET,C.BAD),o(a,b.UNDER,C.BAD),a)),o(l,b.ON_TIME,(n={},o(n,b.OVER,C.BAD),o(n,b.ON_TARGET,C.GOOD),o(n,b.UNDER,C.BAD),n)),o(l,b.EARLY,(r={},o(r,b.OVER,C.BAD),o(r,b.ON_TARGET,C.GOOD),o(r,b.UNDER,C.BAD),r)),l)[e][t]}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),m=n(p),h=a(2),v=n(h),_=a(6),E=a(7),g=a(14),y=a(17),S=n(y);a(2383);var b={OVER:"OVER",UNDER:"UNDER",ON_TARGET:"ON TARGET",ON_TIME:"ON TIME",LATE:"LATE",EARLY:"EARLY"},C={BAD:"BAD",GOOD:"GOOD"},O={PATIENT_ALLOCATION:"PATIENT_ALLOCATION",LPFT:"LPFT"},T=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showDiff:!1},a.handleMouseEnter=a.handleMouseEnter.bind(a),a.handleMouseLeave=a.handleMouseLeave.bind(a),a}return i(t,e),d(t,[{key:"handleMouseEnter",value:function(){var e=this.props,t=e.scenario,a=e.study,n=(t.status===g.SCENARIO_STATUS.APPROVED||t.status===g.SCENARIO_STATUS.PREV_APPROVED)&&a.state.status===S.default.ACTIVE,r=t.cohorts&&t.cohorts.length>0,l=null!==t.source_scenario_id;r&&(n||l)||this.setState({showDiff:!0})}},{key:"handleMouseLeave",value:function(){this.setState({showDiff:!1})}},{key:"render",value:function(){var e=this.props,t=e.scenario,a=e.study,n=e.globalData,r=this.state.showDiff,l=(t.status===g.SCENARIO_STATUS.APPROVED||t.status===g.SCENARIO_STATUS.PREV_APPROVED)&&a.state.status===S.default.ACTIVE,i=null!==t.source_scenario_id,o=t.cohorts&&t.cohorts.length>0,d=0,c=0,p="",m="",h=void 0,y=void 0,T="",R="";i&&o?(h=n.adjusted_overallocatedData?n.adjusted_overallocatedData.lpft:n.adjusted_lpft,T="A/"):i?(d=n.patient_allocation,c=n.adjusted_patient_allocation,p="P/",m="A/",h=n.overallocatedData?n.overallocatedData.lpft:n.lpft,y=n.adjusted_overallocatedData?n.adjusted_overallocatedData.lpft:n.adjusted_lpft,T="P/",R="A/"):l?(h=n.overallocatedData?n.overallocatedData.lpft:n.lpft,y=n.actual_f_lpft,T="P/",R="F/"):(d=t.target_num_patients,c=n.patient_allocation,p="T/",m="P/",h=t.target_lpft?(0,E.getMomentDate)(t.target_lpft):t.end_date,y=n.overallocatedData?n.overallocatedData.lpft:n.lpft,T="T/",R="P/");var w=c-d,A=s(w,O.PATIENT_ALLOCATION),I=y&&h?h.diff(y,"days"):null,N=s(I,O.LPFT);t.isImpact&&null===I&&(N=b.ON_TIME);var D=u(N,A);return f.default.createElement("div",{className:(0,v.default)("scenario-alerts-container",{success:D===C.GOOD,error:D===C.BAD,"show-diff":r,extended:l||i}),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},f.default.createElement("div",{className:(0,v.default)("widget-wrapper","status-bar",{success:D===C.GOOD,error:D===C.BAD,"show-diff":r,extended:l||i})},l||i?f.default.createElement("svg",{width:"32",height:"58"},f.default.createElement("g",null,f.default.createElement("polygon",{fill:"#ec3508",points:"0,0 23,0 10,58 0,58"}),f.default.createElement("line",{stroke:"#9d9d9d",x1:"31",x2:"18",y1:"0",y2:"58"}))):f.default.createElement("svg",{width:"32",height:"48"},f.default.createElement("g",null,f.default.createElement("polygon",{fill:"#ec3508",points:"0,0 23,0 10,48 0,48"}),f.default.createElement("line",{stroke:"#9d9d9d",x1:"31",x2:"18",y1:"0",y2:"48"})))),f.default.createElement("div",{className:(0,v.default)("widget-wrapper","pat-allocation",{success:r&&D===C.GOOD,error:r&&D===C.BAD,hidden:l||o&&i,extended:l||i})},function(){return r?[f.default.createElement("div",{className:"widget-column",key:"pat-icon"},f.default.createElement("div",{className:(0,v.default)("widget-icon",{"icon-black":r})}," ",_.Icons.VISITORS," ")),f.default.createElement("div",{className:"widget-column",key:"pat-label"},f.default.createElement("div",{className:"patient-allocation-widget__target"},0!==w?Math.abs(w):"Patients"),f.default.createElement("div",{className:"patient-allocation-widget__predicted"},0!==w?"Patients "+A.toLowerCase():f.default.createElement("span",{className:"capitalize"},A.toLowerCase())))]:[f.default.createElement("div",{className:"widget-column",key:"pat-icon"},f.default.createElement("div",{className:(0,v.default)("widget-icon",{"icon-black":r})}," ",_.Icons.VISITORS," "),f.default.createElement("div",null,"Patients")),f.default.createElement("div",{className:"widget-column",key:"pat-label"},l||i?f.default.createElement("div",{className:"patient-allocation-widget__target"},"T/"):null,f.default.createElement("div",{className:"patient-allocation-widget__target"},p),f.default.createElement("div",{className:"patient-allocation-widget__predicted"},m)),f.default.createElement("div",{className:"widget-column",key:"pat-value"},l||i?f.default.createElement("div",{className:"patient-allocation-widget__target","data-test":"patient-allocation-target"},t.target_num_patients):null,f.default.createElement("div",{className:"patient-allocation-widget__target","data-test":"patient-allocation-target"},d),f.default.createElement("div",{className:(0,v.default)("patient-allocation-widget__predicted"),"data-test":"patient-allocation-predicted"},c),f.default.createElement("div",{className:(0,v.default)("widget-value-underline",{success:A===b.ON_TARGET,error:A!==b.ON_TARGET})}))]}()),!(l||i)&&f.default.createElement("div",null,f.default.createElement("svg",{width:"13",height:"48"},f.default.createElement("g",null,f.default.createElement("line",{stroke:"#9d9d9d",x1:"13",x2:"0",y1:"0",y2:"48"})))),f.default.createElement("div",{className:(0,v.default)("widget-wrapper","lpft",{success:r&&D===C.GOOD,error:r&&D===C.BAD,extended:l||i})},function(){if(r)return null===I?[f.default.createElement("div",{className:"widget-column",key:"lpft-icon"},f.default.createElement("div",{className:(0,v.default)("widget-icon",{"icon-black":r})},I>=0?_.Icons.ON_TARGET:_.Icons.OFF_TARGET)),f.default.createElement("div",{className:"widget-column",key:"lpft-label"},f.default.createElement("div",null,"N/A"))]:[f.default.createElement("div",{className:"widget-column",key:"lpft-icon"},f.default.createElement("div",{className:(0,v.default)("widget-icon",{"icon-black":r})},I>=0?_.Icons.ON_TARGET:_.Icons.OFF_TARGET)),f.default.createElement("div",{className:"widget-column",key:"lpft-label"},f.default.createElement("div",null,0!==I?Math.abs(I):""),f.default.createElement("div",null,0!==I?"Days "+N.toLowerCase():"LPFT "+N.toLowerCase()))];var e=[f.default.createElement("div",{key:"lpft-pred-value",className:(0,v.default)("lpft-widget__predicted"),"data-test":"lpft-widget-predicted"},y?y.format("DD MMM YYYY"):"-"),f.default.createElement("div",{key:"lpft-pred-underline",className:(0,v.default)("widget-value-underline",{success:N===b.EARLY||N===b.ON_TIME,error:N===b.LATE})})],a=t.target_lpft||t.end_date,n=f.default.createElement("div",{key:"lpft-pred-value",className:(0,v.default)("lpft-widget__predicted"),"data-test":"lpft-widget-predicted"},a?(0,E.getMomentDate)(a).format("DD MMM YYYY"):"-");return[f.default.createElement("div",{className:"widget-column",key:"lpft-icon"},f.default.createElement("div",{className:(0,v.default)("widget-icon",{"icon-black":r})},I>=0?_.Icons.ON_TARGET:_.Icons.OFF_TARGET),f.default.createElement("div",null,"LPFT")),f.default.createElement("div",{className:"widget-column",key:"lpft-label"},l||i?f.default.createElement("div",{className:"lpft-widget__target"},"T/"):null,f.default.createElement("div",{className:"lpft-widget__target"},T),o&&(l||i)?null:f.default.createElement("div",{className:"lpft-widget__predicted"},R)),f.default.createElement("div",{className:"widget-column",key:"lpft-value"},l||i?n:null,f.default.createElement("div",{className:"lpft-widget__target","data-test":"lpft-widget-target"},h?h.format("DD MMM YYYY"):"-"),o&&(l||i)?null:e)]}()))}}]),t}(f.default.PureComponent);T.defaultProps={predicted:null,actual:null},T.propTypes={scenario:m.default.object.isRequired,study:m.default.object.isRequired,globalData:m.default.object.isRequired},t.default=T},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(66),p=n(f),m=a(2),h=n(m),v=a(23),_=n(v),E=a(1081),g=n(E),y=a(1082),S=n(y),b=a(6),C=a(13),O=n(C),T=a(179),R=a(957),w=n(R),A=a(117),I=a(102),N=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showMenu:!1},a.toggleMenu=a.toggleMenu.bind(a),a.handleClickOutside=a.handleClickOutside.bind(a),a}return i(t,e),o(t,[{key:"toggleMenu",value:function(e){this.setState({showMenu:void 0!==e?e:!this.state.showMenu})}},{key:"handleClickOutside",value:function(e){this.state.showMenu&&e&&!e.target.getAttribute("data-ignore-click-outside")&&this.toggleMenu(!1)}},{key:"render",value:function(){var e=this,t=this.state.showMenu,a=this.props,n=a.item,r=a.index,l=a.cohorts,i=a.onRemove,o=a.onUpdate,s=a.isDisabled,d=a.locations,c=a.minDate,f=a.isAdjusted,p=(0,h.default)("wizard-cohorts-item__wrapper",{hovered:t});return u.default.createElement("div",{key:n.id,className:p},u.default.createElement("div",{className:"single-line-component__content"},u.default.createElement("div",{className:"single-line-component__element-wrapper"},u.default.createElement("div",{className:"element-wrapper__label"},"Cohort "+(r+1)),u.default.createElement(_.default,{maxLength:255,status:function(){if(""===n.name)return"error";for(var e=null,t=l.filter(function(e){return e.state!==I.ITEM_STATE.DELETED}),a=0;a<t.length;a+=1)if(t[a].id!==n.id&&t[a].name===n.name){e="error";break}return e}(),disabled:s,placeholder:"Add short, clear name",onBlur:function(e){return n.name!==e.target.value&&o(n.id,"name",e.target.value)},value:n.name}))),u.default.createElement(S.default,{minDate:c,cohorts:l,cohort:n,onUpdate:o,isDisabled:s}),u.default.createElement(g.default,{locations:d,cohorts:l,cohort:n,onUpdate:o,isDisabled:s}),u.default.createElement(w.default,{cohort:n,onUpdate:o,isDisabled:s||0===n.locations.length}),u.default.createElement("div",{className:(0,h.default)("wizard-cohorts-item__control",{hide:(0,A.isReadOnly)(n,l)||f})},u.default.createElement(O.default,{mouseEnterDelay:.3,align:{offset:[0,0]},overlay:u.default.createElement("span",null,"Actions")},u.default.createElement(O.default,{destroyTooltipOnHide:!0,align:{offset:[12,0]},placement:"bottomRight",visible:this.state.showMenu&&!s,trigger:["click"],overlay:u.default.createElement(T.ContextMenu,null,u.default.createElement(T.ContextMenuItem,{label:"Remove","data-ignore-click-outside":!0,icon:u.default.createElement("div",{className:"icon-color-white"},b.Icons.CROSS_O),onClick:function(){s||(n.id!==I.INITIAL_COHORT_ID&&i(n.id),e.toggleMenu(!1))}}))},u.default.createElement("div",{className:"row-control-icon--more",onClick:function(){return!s&&e.toggleMenu()}},b.Icons.MORE_HORIZ)))))}}]),t}(u.default.Component);N.defaultProps={locations:[],scenario:null,cohorts:[],isDisabled:!1,isAdjusted:!1},N.propTypes={index:c.default.number.isRequired,item:c.default.object.isRequired,cohorts:c.default.array,isDisabled:c.default.bool,onRemove:c.default.func.isRequired,onUpdate:c.default.func.isRequired,locations:c.default.array,minDate:c.default.object.isRequired,isAdjusted:c.default.bool},t.default=(0,p.default)(N)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(6),u=a(61),d=n(u),c=a(7),f=function(e){var t=e.study;return l.default.createElement("div",{className:"scenario-details-subheader__container"},l.default.createElement("div",{className:"scenario-details-bar__wrapper"},l.default.createElement("div",{className:"scenario-details-bar"},l.default.createElement("span",{className:"icon-color-grey"},s.Icons.VISITORS),l.default.createElement("span",null,"T/Patients"),l.default.createElement("span",null,t.target_num_patients||"-")),l.default.createElement(d.default,{className:"bar-item-separator"}),l.default.createElement("div",{className:"scenario-details-bar"},l.default.createElement("span",{className:"icon-color-grey"},s.Icons.DATE_RANGE),l.default.createElement("span",null,"FP"),l.default.createElement("span",null,t.fp?(0,c.getMomentDate)(t.fp).format("D MMM YY"):"-")),l.default.createElement(d.default,{className:"bar-item-separator"}),l.default.createElement("div",{className:"scenario-details-bar"},l.default.createElement("span",null,"FPFV-FPFT"),l.default.createElement("span",{className:"icon-color-grey"},s.Icons.ARROW_RIGHT),l.default.createElement("span",{className:"font-bold underline"},t.fpfv_fpft||0===t.fpfv_fpft?t.fpfv_fpft+"d":"14d (default)")),l.default.createElement("div",{className:"scenario-details-bar padding-left-1"},l.default.createElement("span",{className:"icon-color-grey"},s.Icons.ARROW_RIGHT_LONG),l.default.createElement("span",{className:"icon-color-grey"},s.Icons.ON_TARGET),l.default.createElement("span",null,"T/LPFT"),l.default.createElement("span",null,t.target_lpft?(0,c.getMomentDate)(t.target_lpft).format("D MMM YY"):"-"))))};f.defaultProps={study:null},f.propTypes={study:o.default.object},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(10),u=n(s),d=a(6),c=a(99),f=n(c),p=function(e){var t=e.onUpdate,a=e.value,n=e.cohortId,r=e.minDate,i=function(e){var t=(0,u.default)(e).utcOffset(0,!0),a=r.day();return t.day()===a&&t>=r};return l.default.createElement("div",{className:"single-line__datepicker-wrapper"},l.default.createElement(f.default,{simpleView:!0,defaultDate:r,filterDate:i,selected:a?(0,u.default)(a):null,onChange:function(e){t(n,"start_date",e.format("YYYY-MM-DD"),"trigger")}}),l.default.createElement("span",null,d.Icons.CALENDAR))};p.defaultProps={value:null},p.propTypes={cohortId:o.default.oneOfType([o.default.number,o.default.string]).isRequired,onUpdate:o.default.func.isRequired,value:o.default.string,minDate:o.default.object.isRequired},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(69),u=n(s),d=a(102),c=function(e){var t=e.onUpdate,a=e.data,n=e.cohortId,r=e.cohorts,i=e.isDisabled;return l.default.createElement("div",{className:"single-line__milestones-wrapper"},l.default.createElement("div",{style:{width:"150px"}},l.default.createElement(u.default,{disabled:i,onOptionSelect:function(e){t(n,"start_milestone",e.value,"trigger"),e.value===d.TRIGGER_START_MILESTONES.GLOBAL_FP&&t(n,"source_cohort_id",null,"trigger")}},l.default.createElement(s.DropdownOption,{label:"Global FP",selected:a.start_milestone===d.TRIGGER_START_MILESTONES.GLOBAL_FP,value:d.TRIGGER_START_MILESTONES.GLOBAL_FP}),l.default.createElement(s.DropdownOption,{label:"FSIV",selected:a.start_milestone===d.TRIGGER_START_MILESTONES.FSIV,value:d.TRIGGER_START_MILESTONES.FSIV}),l.default.createElement(s.DropdownOption,{label:"FPFV",selected:a.start_milestone===d.TRIGGER_START_MILESTONES.FPFV,value:d.TRIGGER_START_MILESTONES.FPFV}),l.default.createElement(s.DropdownOption,{label:"FPFT",selected:a.start_milestone===d.TRIGGER_START_MILESTONES.FPFT,value:d.TRIGGER_START_MILESTONES.FPFT}))),l.default.createElement("div",{style:{width:"140px"}},l.default.createElement(u.default,{resultsHeight:180,disabled:1===r.length||i||a.start_milestone===d.TRIGGER_START_MILESTONES.GLOBAL_FP,onOptionSelect:function(e){return t(n,"source_cohort_id",e.value,"trigger")}},r.filter(function(e){return e.id!==n&&e.state!==d.ITEM_STATE.DELETED}).map(function(e){return l.default.createElement(s.DropdownOption,{key:e.id,label:e.name,selected:a.source_cohort_id===e.id,value:e.id})}))))};c.defaultProps={cohorts:[],isDisabled:!1,data:{}},c.propTypes={cohortId:o.default.oneOfType([o.default.number,o.default.string]).isRequired,cohorts:o.default.array,onUpdate:o.default.func.isRequired,data:o.default.object,isDisabled:o.default.bool},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(69),c=n(d),f=a(23),p=n(f),m=a(61),h=n(m),v=a(102),_=function(e){var t=e.onUpdate,a=e.data,n=e.cohortId,r=e.cohorts,i=e.isDisabled;return l.default.createElement("div",{className:"single-line__milestones-wrapper"},l.default.createElement("div",{style:{width:"60px"}},l.default.createElement(p.default,{type:"number",status:""===a.num_patients?"error":null,disabled:i,placeholder:"",onBlur:function(e){if(a.num_patients!==e.target.value){var r=e.target.value;a.num_patients_abs||r>100&&(r=100),r<=0&&(r=1),t(n,"num_patients",+r,"trigger")}},value:a.num_patients||""})),l.default.createElement("div",{className:"trigger-panel__type-toggle"},l.default.createElement("span",{onClick:function(){return!i&&t(n,"num_patients_abs",!0,"trigger")},className:(0,u.default)({active:a.num_patients_abs})},"#"),l.default.createElement(h.default,{size:"tiny",className:(0,u.default)({"turn-left":!a.num_patients_abs})}),l.default.createElement("span",{onClick:function(){i||(a.num_patients>100&&t(n,"num_patients",100,"trigger"),t(n,"num_patients_abs",!1,"trigger"))},className:(0,u.default)({active:!a.num_patients_abs})},"%")),l.default.createElement("div",{className:"font-bold"},"from"),l.default.createElement("div",{style:{width:"140px"}},l.default.createElement(c.default,{disabled:1===r.length||i,onOptionSelect:function(e){return t(n,"source_cohort_id",e.value,"trigger")}},r.filter(function(e){return e.id!==n&&e.state!==v.ITEM_STATE.DELETED}).map(function(e){return l.default.createElement(d.DropdownOption,{key:e.id,label:e.name,selected:a.source_cohort_id===e.id,value:e.id})}))))};_.defaultProps={cohorts:[],isDisabled:!1,data:{}},_.propTypes={cohortId:o.default.oneOfType([o.default.number,o.default.string]).isRequired,cohorts:o.default.array,onUpdate:o.default.func.isRequired,data:o.default.object,isDisabled:o.default.bool},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(10),p=n(f),m=a(2),h=n(m),v=a(54),_=n(v),E=a(6),g=a(1076),y=n(g),S=a(1075),b=n(S);a(2384);var C=a(102),O=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.cohorts,a=e.activeStep,n=e.onAdd,r=e.onRemove,l=e.onUpdate,i=e.study,o=e.isDisabled,s=e.locations,d=e.isAdjusted,c=t.filter(function(e){return e.state!==C.ITEM_STATE.DELETED}).map(function(e,a){return u.default.createElement(b.default,{isAdjusted:d,index:a,key:e.id,isDisabled:o,cohorts:t,minDate:i?(0,p.default)(i.fp):(0,p.default)(),onUpdate:l,locations:s,item:e,onRemove:r})}),f=(0,h.default)("wizard-step","fpo-row","fpo-wizard-cohorts-container",{"wizard-active-step":a}),m=(0,h.default)("fpo-col-offset-1","fpo-col-9"),v=c.length<10&&!d;return u.default.createElement("div",{className:f},u.default.createElement("div",{className:m},u.default.createElement("h1",null,"Cohorts"),u.default.createElement(y.default,{study:i}),u.default.createElement("div",{className:"wizard-cohorts-list__wrapper"},c),u.default.createElement("div",{className:"wizard-cohorts-control__wrapper"},u.default.createElement(_.default,{onClick:n,disabled:!v||!a},u.default.createElement("div",{className:"wizard-cohorts-control"},u.default.createElement("div",{style:{opacity:v&&a?1:.3}},E.Icons.PLUS),u.default.createElement("span",null,"Add cohort"))))))}}]),t}(u.default.Component);O.propTypes={cohorts:c.default.array,activeStep:c.default.bool,onAdd:c.default.func.isRequired,onRemove:c.default.func.isRequired,onUpdate:c.default.func.isRequired,study:c.default.object,isDisabled:c.default.bool,locations:c.default.array,isAdjusted:c.default.bool},O.defaultProps={cohorts:[],activeStep:!1,study:null,isDisabled:!1,locations:[],isAdjusted:!1},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(66),m=n(p),h=a(2),v=n(h),_=a(31),E=n(_),g=a(6),y=a(217),S=a(69),b=n(S),C=a(117),O=a(102),T=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=[];return e.cohort&&e.cohort.locations&&e.locations&&(n=(0,C.prepareLocationsData)(e.cohort,e.locations)),a.state={locations:n,showLocationsPanel:!1,copyCohortInitialSelect:null},a.handleClickOutside=a.handleClickOutside.bind(a),a.toggleLocationsPanel=a.toggleLocationsPanel.bind(a),a}return i(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){var t={};(this.props.locations.length!==e.locations.length||e.locations&&0!==e.locations.length&&e.cohort&&this.state.showLocationsPanel)&&(t={locations:(0,C.prepareLocationsData)(e.cohort,e.locations)}),e.isDisabled&&this.state.showLocationsPanel&&(t=o({},t,{showLocationsPanel:!1})),this.setState(t)}},{key:"handleClickOutside",value:function(){this.state.showLocationsPanel&&this.toggleLocationsPanel()}},{key:"toggleLocationsPanel",value:function(){this.setState({showLocationsPanel:!this.state.showLocationsPanel})}},{key:"render",value:function(){var e=this,t=this.props,a=t.cohort,n=t.onUpdate,r=t.isDisabled,l=t.cohorts,i=this.state,o=i.showLocationsPanel,s=i.locations,u=i.copyCohortInitialSelect;if(!a)return null;var c=(0,v.default)("selector__content-wrapper",{visible:o}),f=[];return s&&s.length>0&&a.locations.forEach(function(e){var t=e.name;if(!e.isCountryRegion&&!e.hasSingleCountry){var a=s.find(function(t){return t.name===e.name}).countries.length;t+=" (",t+=e.countries.length===a?"All":e.countries.length,t+=")"}f.push(t)}),d.default.createElement("div",{className:"single-line-component__content"},d.default.createElement("div",{className:"single-line-component__element-wrapper"},d.default.createElement("div",{className:"element-wrapper__label"},"Region/Country"),d.default.createElement("div",{className:"selector__wrapper"},d.default.createElement("div",{className:"selector__label-wrapper",onClick:r?void 0:this.toggleLocationsPanel},d.default.createElement("div",{className:"control-label"},f.length>0?d.default.createElement("div",{className:"success"},f.join(", ")):d.default.createElement("div",{className:"select-placeholder"},d.default.createElement("div",{className:"error"},"Select regions/countries"))),d.default.createElement("div",{className:"control-icon"},o?g.Icons.CHEVRON_UP:g.Icons.CHEVRON_DOWN)),d.default.createElement("div",{className:c},l.length>1&&d.default.createElement("div",{className:"selector__copy-cohort"},d.default.createElement("span",null,"same as"),d.default.createElement(b.default,{narrow:!0,initialSelect:u,onOptionSelect:function(t){var r=(0,E.default)(l.find(function(e){return e.id===t.value}).locations);e.setState({copyCohortInitialSelect:null},function(){return n(a.id,"locations",r,!1,!0)})}},l.filter(function(e){return e.id!==a.id&&e.state!==O.ITEM_STATE.DELETED}).map(function(e){return d.default.createElement(S.DropdownOption,{key:e.id,label:e.name,value:e.id})}))),s&&s.length>0&&d.default.createElement(y.EventCountrySelector,{disabled:r,width:290,regionsCountriesList:s,onChange:function(t){e.setState({copyCohortInitialSelect:{}},function(){return n(a.id,"locations",t)})}})))))}}]),t}(d.default.Component);T.defaultProps={locations:[],scenario:null,isDisabled:!1,cohorts:[]},T.propTypes={cohort:f.default.object.isRequired,onUpdate:f.default.func.isRequired,locations:f.default.array,isDisabled:f.default.bool,cohorts:f.default.array},t.default=(0,m.default)(T)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(66),p=n(f),m=a(2),h=n(m),v=a(6),_=a(263),E=n(_),g=a(1077),y=n(g),S=a(1078),b=n(S),C=a(1079),O=n(C),T=a(117),R=a(102),w=n(R),A=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={showPanel:!1},a.handleClickOutside=a.handleClickOutside.bind(a),a.togglePanel=a.togglePanel.bind(a),a.handleTriggerSelect=a.handleTriggerSelect.bind(a),a}return i(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){e.isDisabled&&this.state.showPanel&&this.setState({showPanel:!1})}},{key:"handleClickOutside",value:function(e){!this.state.showPanel||"calendar"===e.target.getAttribute("data-element-id")||e.target.classList.contains("react-datepicker")||e.target.classList.contains("react-datepicker__week")||e.target.classList.contains("react-datepicker__month")||e.target.classList.contains("react-datepicker__day")||e.target.classList.contains("react-datepicker__day--disabled")||e.target.classList.contains("react-datepicker__day-name")||e.target.classList.contains("react-datepicker__day-names")||e.target.classList.contains("date-picker-control")||e.target.classList.contains("react-datepicker__header")||e.target.classList.contains("controls")||this.togglePanel()}},{key:"togglePanel",value:function(){this.setState({showPanel:!this.state.showPanel})}},{key:"handleTriggerSelect",value:function(e){var t=this.props.cohort;this.props.onUpdate(t.id,"trigger_type",e,"trigger")}},{key:"render",value:function(){var e=this.props,t=e.cohort,a=e.cohorts,n=e.onUpdate,r=e.isDisabled,l=e.minDate,i=this.state.showPanel,o=(0,h.default)("selector__content-wrapper","standalone","right-align",{visible:i}),s=t.id===R.INITIAL_COHORT_ID||r||0===t.rank,d=(0,T.getLabelValue)(t,a);return u.default.createElement("div",{className:"single-line-component__content"},u.default.createElement("div",{className:"single-line-component__element-wrapper"},u.default.createElement("div",{className:"element-wrapper__label"},"Triggered by"),u.default.createElement("div",{className:"selector__wrapper",style:{width:"236px"}},u.default.createElement("div",{className:"selector__label-wrapper",onClick:r?void 0:this.togglePanel},u.default.createElement("div",{className:"control-label"},u.default.createElement("span",{className:"select-placeholder"},d)),u.default.createElement("div",{className:"control-icon"},i?v.Icons.CHEVRON_UP:v.Icons.CHEVRON_DOWN)),u.default.createElement("div",{className:o,style:{width:"330px"}},u.default.createElement("div",{className:"trigger-panel_wrapper"},u.default.createElement("div",{className:"trigger-panel_radio-group"},u.default.createElement(E.default,{disabled:r,value:w.default.MILESTONES,checked:t.trigger.trigger_type===w.default.MILESTONES,name:"trigger-option",onChange:this.handleTriggerSelect,label:"Milestones"}),u.default.createElement(E.default,{disabled:s,value:w.default.PATIENTS_RANDOMIZED,checked:t.trigger.trigger_type===w.default.PATIENTS_RANDOMIZED,name:"trigger-option",onChange:this.handleTriggerSelect,label:"Patients randomized"}),u.default.createElement(E.default,{disabled:s,value:w.default.DATE,checked:t.trigger.trigger_type===w.default.DATE,name:"trigger-option",onChange:this.handleTriggerSelect,label:"Date"})),u.default.createElement("div",{className:"trigger-panel_inputs"},function(){switch(t.trigger.trigger_type){case w.default.PATIENTS_RANDOMIZED:return u.default.createElement(O.default,{isDisabled:s,cohorts:a,onUpdate:n,data:t.trigger,cohortId:t.id});case w.default.DATE:return u.default.createElement(y.default,{minDate:l,cohort:t,onUpdate:n,value:t.trigger.start_date,cohortId:t.id});case w.default.MILESTONES:default:return u.default.createElement(b.default,{isDisabled:s,cohorts:a,onUpdate:n,data:t.trigger,cohortId:t.id})}}()))))))}}]),t}(u.default.Component);A.defaultProps={scenario:null,cohorts:[],isDisabled:!1},A.propTypes={cohort:c.default.object.isRequired,cohorts:c.default.array,onUpdate:c.default.func.isRequired,isDisabled:c.default.bool,minDate:c.default.object.isRequired},t.default=(0,p.default)(A)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1084),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),m=a(263),h=n(m);a(2385);var v=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.createConstraints,n=e.onChange,r=(0,p.default)("wizard-step","fpo-row","fpo-wizard-constraints-container",{"wizard-active-step":t}),l=(0,p.default)("fpo-col-offset-4","fpo-col-5");return u.default.createElement("div",{className:r},u.default.createElement("div",{className:l},u.default.createElement("h1",null,"Country and Regional considerations"),u.default.createElement("div",{className:"fpo-wizard-constraints__checkbox-wrapper"},u.default.createElement(h.default,{tabInd:6,autoFocus:!0,label:"Let FPO suggest countries and regions to include",name:"fpo_suggest",onChange:n,disabled:!t,checked:!1===a,value:0}),u.default.createElement(h.default,{tabInd:7,label:"I have countries or regions that I want to be considered in FPO suggestions",name:"fpo_suggest",onChange:n,disabled:!t,checked:void 0!==a&&a,value:1})),u.default.createElement("div",{className:"keyline-separator"})))}}]),t}(u.default.Component);v.propTypes={activeStep:c.default.bool.isRequired,createConstraints:c.default.bool,onChange:c.default.func.isRequired},v.defaultProps={createConstraints:void 0},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),m=a(217),h=n(m);a(2386);var v={INCLUDE:"Include",EXCLUDE:"Exclude"},_=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={valid:!1,activeTab:v.INCLUDE},a}return i(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.props.valid===e.valid&&e.anyTouched===this.props.anyTouched||this.props.onValidationChange&&this.props.onValidationChange(e.valid,e.anyTouched)}},{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"handleChange",value:function(e,t){var a=void 0;a=0!==e.length,this.state.valid!==a&&(this.setState({valid:a}),this.props.onValidationChange(a,!0)),this.props.onChange(e,t)}},{key:"toggleTab",value:function(e){this.setState({activeTab:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.activeStep,n=t.scenarioCountries,r=t.includeCountries,l=t.excludeCountries,i=t.disabledIncludedCountries,o=t.disabledExcludedCountries,s=t.recommendedByAnalytics,d=t.hidden,c=(0,p.default)("wizard-step","fpo-row","fpo-wizard-locations-container",{"wizard-active-step":a}),f=(0,p.default)("fpo-col-offset-4","fpo-col-4"),m=0,_=0,E=0;return r.forEach(function(e){e.isCountryRegion?m+=1:e.countries.forEach(function(e){"Unspecified country"===e.name?_+=1:m+=1})}),l.forEach(function(e){e.isCountryRegion?E+=1:e.countries.forEach(function(e){"Unspecified country"!==e.name&&(E+=1)})}),u.default.createElement("div",{className:c,style:{display:d?"none":null}},u.default.createElement("div",{className:f},u.default.createElement("h1",null,"Locations"),u.default.createElement("div",{className:"fpo-wizard-locations__tabs"},[v.INCLUDE,v.EXCLUDE].map(function(t){return u.default.createElement("div",{key:t,className:(0,p.default)("fpo-wizard-locations__tabs__item",{"fpo-wizard-locations__tabs__item--active":e.state.activeTab===t}),onClick:function(){return e.toggleTab(t)}},t)})),u.default.createElement("div",{className:(0,p.default)("fpo-wizard-locations__tab__content",{"fpo-wizard-locations__tab-content--visible":this.state.activeTab===v.INCLUDE})},u.default.createElement("div",{className:"fpo-wizard-locations__tab__content__title"},"Specify ",u.default.createElement("strong",null,"countries")," that must be ",u.default.createElement("strong",null,"included")," in the scenario"),u.default.createElement(h.default,{key:1,tabName:v.INCLUDE,scenarioCountries:n,tabInd:5,activeTab:this.state.activeTab,filterCountries:l,disabledCountries:i,recommendedByAnalytics:s,disabled:!a,tabPress:function(){e.state.valid&&e.props.onTabNavigate()},regionsCountriesList:this.props.includedRegionsCountries,onChange:function(t){return e.handleChange(t,v.INCLUDE)},selectorMode:2})),u.default.createElement("div",{className:(0,p.default)("fpo-wizard-locations__tab__content",{"fpo-wizard-locations__tab-content--visible":this.state.activeTab===v.EXCLUDE})},u.default.createElement("div",{className:"fpo-wizard-locations__tab__content__title"},"Specify ",u.default.createElement("strong",null,"countries")," that must be ",u.default.createElement("strong",null,"excluded")," in the scenario"),u.default.createElement(h.default,{key:2,tabName:v.EXCLUDE,scenarioCountries:n,activeTab:this.state.activeTab,filterCountries:r,disabledCountries:o,recommendedByAnalytics:s,disabled:!a,tabPress:function(){e.state.valid&&e.props.onTabNavigate()},regionsCountriesList:this.props.excludedRegionsCountries,onChange:function(t){return e.handleChange(t,v.EXCLUDE)},selectorMode:2})),u.default.createElement("div",{className:"fpo-wizard-locations__summary"},u.default.createElement("div",{className:"separator__short"}),u.default.createElement("div",{className:"fpo-wizard-locations__summary-block"},u.default.createElement("div",null,"Must include:"),u.default.createElement("div",{className:"fpo-wizard-locations__summary-block__wrapper"},u.default.createElement("span",{className:(0,p.default)("fpo-wizard-locations__summary-block__value",{active:m>0})},m),u.default.createElement("span",null,0===m||m>1?"countries":"country")),u.default.createElement("div",{className:"fpo-wizard-locations__summary-block__wrapper"},u.default.createElement("span",{className:(0,p.default)("fpo-wizard-locations__summary-block__value",{active:_>0})},_),u.default.createElement("span",null,"unspecified "+(0===_||_>1?"countries":"country")))),u.default.createElement("div",{className:"separator__short"}),u.default.createElement("div",{className:"fpo-wizard-locations__summary-block"},u.default.createElement("div",null,"Must exclude:"),u.default.createElement("div",{className:"fpo-wizard-locations__summary-block__wrapper"},u.default.createElement("span",{className:(0,p.default)("fpo-wizard-locations__summary-block__value",{active:E>0})},E),u.default.createElement("span",null,0===E||E>1?"countries":"country")))),u.default.createElement("div",{className:"keyline-separator"})))}}]),t}(s.Component);_.defaultProps={scenarioCountries:[],includeCountries:[],excludeCountries:[],onTabNavigate:void 0,hidden:!1,disabledIncludedCountries:[],disabledExcludedCountries:[],recommendedByAnalytics:[]},_.propTypes={activeStep:c.default.bool.isRequired,scenarioCountries:c.default.array,includeCountries:c.default.array,excludeCountries:c.default.array,onChange:c.default.func.isRequired,onValidationChange:c.default.func.isRequired,includedRegionsCountries:c.default.array.isRequired,excludedRegionsCountries:c.default.array.isRequired,disabledIncludedCountries:c.default.array,disabledExcludedCountries:c.default.array,recommendedByAnalytics:c.default.array,hidden:c.default.bool,onTabNavigate:c.default.func},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WizardMilestonesComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=a(0),d=n(u),c=a(1),f=n(c),p=a(75),m=a(2),h=n(m),v=a(10),_=n(v),E=a(11),g=n(E),y=a(13),S=n(y),b=a(100),C=n(b),O=a(23),T=n(O),R=a(99),w=n(R),A=a(148),I=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(A),N=a(7);a(2387);var D=function(e){var t=e.input,a=e.disabled,n=e.insideLabel,r=e.placeholder,l=e.meta,i=l.touched,o=l.error,u=e.autoFocus,c=e.tabPress;return d.default.createElement("div",null,d.default.createElement(T.default,s({tabPress:c},t,{autoFocus:u&&!i,type:"text",tabInd:3,disabled:a,placeholder:r,status:i&&o?"error":null,insideLabel:n})))},P=void 0,L=function(e){var t=e.input,a=e.disabled,n=e.maxDate,r=e.label,l=e.anyTouched,i=e.placeholder,o=e.isEditing,u=e.meta.error;return P=(0,N.getMomentDate)(t.value),d.default.createElement("div",null,d.default.createElement(w.default,s({},t,{selected:(0,N.getMomentDate)(t.value)||null,label:r,maxDate:n,disabled:a,placeholder:i,status:(l||o)&&u?"error":null})))},M=function(e){var t=e.input,a=e.disabled,n=e.label,r=e.anyTouched,l=e.placeholder,i=e.isEditing,o=e.meta.error;return d.default.createElement("div",null,d.default.createElement(w.default,s({},t,{selected:(0,N.getMomentDate)(t.value)||null,label:n,filterDate:function(e){return P?e>=P.clone().add(1,"d"):e>(0,_.default)()},disabled:a,placeholder:l,defaultDate:P?P.clone().add(1,"d"):void 0,status:(r||i)&&o?"error":null})))},x=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.props.valid===e.valid&&e.anyTouched===this.props.anyTouched||this.props.onValidationChange&&this.props.onValidationChange(e.valid,e.anyTouched)}},{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.isEditing,n=e.maxStartDate,r=e.onTabNavigate,l=e.anyTouched,i=e.showCohorts,o=e.invalidFields,s=e.impactParams,u=e.study,c=(0,h.default)("wizard-step","fpo-row","fpo-wizard-milestones-container",{"wizard-active-step":t}),f=(0,h.default)("fpo-col-4",{"fpo-col-offset-4":!i,"fpo-col-offset-1":i});return d.default.createElement("div",{className:c},d.default.createElement("div",{className:f},d.default.createElement("h1",null,"Milestones"),d.default.createElement("form",{action:"javascript:void(0);"},d.default.createElement("div",{className:"data-row"},d.default.createElement("span",{className:"data-row-col-1"},d.default.createElement(p.Field,{name:"fp",isEditing:a,label:"Start date (FP)",placeholder:"D MMM YY",component:L,disabled:!a&&!t||!!(0,g.default)(u,"synchronizedWithImpact",!1),anyTouched:l,maxDate:n,validate:[I.required]}),o.includes("fp")&&d.default.createElement(S.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:d.default.createElement("span",null,"Impact value:",d.default.createElement("br",null),s.fp)},d.default.createElement("div",{className:"misaligned-warning__icon"},C.default.INFO_O)))),d.default.createElement("div",{className:"data-row"},d.default.createElement("span",{className:"data-row-col-1"},d.default.createElement(p.Field,{name:"end_date",label:"Target (T/LPFT)",placeholder:"D MMM YY",component:M,disabled:!a&&!t||!!(0,g.default)(u,"synchronizedWithImpact",!1),isEditing:a,anyTouched:l,validate:[I.required]}),o.includes("target_lpft")&&d.default.createElement(S.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:d.default.createElement("span",null,"Impact value:",d.default.createElement("br",null),s.target_lpft)},d.default.createElement("div",{className:"misaligned-warning__icon"},C.default.INFO_O)))),d.default.createElement("div",{className:"data-row"},d.default.createElement("span",{className:"data-row-col-1"},function(){return d.default.createElement(p.Field,{name:"fpfv_fpft",tabPress:r,insideLabel:"FPFV-FPFT (days)",placeholder:"# Days",component:D,autoFocus:!a&&t,disabled:!a&&!t,validate:[I.required,I.isInteger]})}()))),d.default.createElement("div",{className:"keyline-separator"})))}}]),t}(u.Component);x.defaultProps={activeStep:!1,isEditing:!1,startDate:null,targetDate:null,anyTouched:!1,maxStartDate:null,showCohorts:!1,invalidFields:[],impactParams:{},study:null},x.propTypes={activeStep:f.default.bool,isEditing:f.default.bool,anyTouched:f.default.bool,maxStartDate:f.default.object,onTabNavigate:f.default.func,showCohorts:f.default.bool,invalidFields:f.default.array,impactParams:f.default.object,study:f.default.object};var k=function(e,t){e.fp&&e.end_date&&_.default.duration(e.end_date-e.fp).asDays()<1&&t.dispatch((0,p.change)("wizardMilestones","end_date",e.fp.clone().add(1,"d")))};t.WizardMilestonesComponent=x,t.default=(0,p.reduxForm)({form:"wizardMilestones",enableReinitialize:!0,keepDirtyOnReinitialize:!0,validate:k})(x)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(269),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(23),c=n(d),f=function(e){var t=e.activeStep,a=e.studyId,n=e.studyDescription,r=e.studyTa,i=e.studyIndication,o=e.isNewStudy,s=e.showCohorts,d=e.value,f=e.onChange,p=e.onBlur,m=e.status,h=(0,u.default)("wizard-step","fpo-row","fpo-wizard-scenario-details-container",{"wizard-active-step":t}),v=(0,u.default)("fpo-col-4",{"fpo-col-offset-4":!s,"fpo-col-offset-1":s}),_="";return m||d?m||(_="Please enter a unique scenario ID"):_="Please enter scenario ID",l.default.createElement("div",{className:h},l.default.createElement("div",{className:v},l.default.createElement("h1",null,o?"First scenario details":"Scenario details"),l.default.createElement(c.default,{value:d,onChange:function(e){return f(e.target.value)},onBlur:function(e){return p(e.target.value)},tabInd:1,type:"text",maxLength:45,placeholder:"Enter scenario title",outsideLabel:"Scenario ID",status:m?null:"error",statusMessage:_,insideLabel:a+" -"}),l.default.createElement("h4",null,r+"  "+i),l.default.createElement("p",null,n),l.default.createElement("div",{className:"keyline-separator"})))};f.defaultProps={activeStep:!1,isEditing:!1,studyDescription:"",showCohorts:!1,isNewStudy:!1,status:!0},f.propTypes={activeStep:o.default.bool,studyId:o.default.string.isRequired,studyDescription:o.default.string,studyTa:o.default.string.isRequired,studyIndication:o.default.string.isRequired,isNewStudy:o.default.bool,showCohorts:o.default.bool,value:o.default.string.isRequired,onChange:o.default.func.isRequired,onBlur:o.default.func.isRequired,status:o.default.bool},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WizardScenarioDetailsComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=a(0),d=n(u),c=a(1),f=n(c),p=a(75),m=a(2),h=n(m),v=a(23),_=n(v);a(2389);var E=a(36),g=function(e){var t=e.input,a=e.disabled,n=e.insideLabel,r=e.outsideLabel,l=e.placeholder,i=e.meta,o=i.touched,u=i.error,c=e.autoFocus,f=e.tabPress;return d.default.createElement("div",null,d.default.createElement(_.default,s({},t,{autoFocus:c,tabPress:f,tabInd:1,type:"text",maxLength:45,disabled:a,placeholder:l,outsideLabel:r,status:o&&u?"error":null,statusMessage:u,insideLabel:n})))},y=function(e){return function(t){return t&&-1===e.indexOf(t)?void 0:"Please enter a unique scenario ID"}},S=function(e){return e?void 0:"Please enter scenario ID"},b=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.isExist=y(e.existingScenariosNames),a}return i(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.valid,n=t.anyTouched,r=t.onValidationChange,l=t.dirty,i=t.activeStep,o=t.asyncValidate,s=t.initialValues;a===e.valid&&e.anyTouched===n||r&&r(e.valid,e.anyTouched),l&&i!==e.activeStep&&!e.activeStep&&o("name",s.name,"blur")}},{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.isEditing,n=e.studyId,r=e.studyDescription,l=e.studyTa,i=e.studyIndication,o=e.onTabNavigate,s=e.isNewStudy,u=e.showCohorts,c=(0,h.default)("wizard-step","fpo-row","fpo-wizard-scenario-details-container",{"wizard-active-step":t}),f=(0,h.default)("fpo-col-4",{"fpo-col-offset-4":!u,"fpo-col-offset-1":u});return d.default.createElement("div",{className:c},d.default.createElement("div",{className:f},d.default.createElement("h1",null,s?"First scenario details":"Scenario details"),d.default.createElement("form",{action:"javascript:void(0);"},d.default.createElement(p.Field,{name:"name",tabPress:o,insideLabel:n+" -",outsideLabel:"Scenario ID",placeholder:"Enter scenario title",autoFocus:!a&&t,disabled:!a&&!t,component:g,validate:[S,this.isExist]})),d.default.createElement("h4",null,l+"  "+i),d.default.createElement("p",null,r),d.default.createElement("div",{className:"keyline-separator"})))}}]),t}(u.Component);b.defaultProps={activeStep:!1,isEditing:!1,studyDescription:"",showCohorts:!1,isNewStudy:!1},b.propTypes={activeStep:f.default.bool,isEditing:f.default.bool,existingScenariosNames:f.default.array.isRequired,onValidationChange:f.default.func.isRequired,onTabNavigate:f.default.func,studyId:f.default.string,studyDescription:f.default.string,studyTa:f.default.string,studyIndication:f.default.string,isNewStudy:f.default.bool,showCohorts:f.default.bool},t.WizardScenarioDetailsComponent=b,t.default=(0,p.reduxForm)({form:"wizardScenarioDetails",asyncValidate:E.validateScenarioNameOnCreate,asyncBlurFields:["name"]})(b)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1092),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=function(e){var t=e.icon,a=e.children;return l.default.createElement("div",null,l.default.createElement("div",{className:"summary-row-icon"},t),a,l.default.createElement("div",{className:"keyline-separator"}))};s.propTypes={icon:o.default.node.isRequired,children:o.default.node.isRequired},t.default=s},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),m=a(10),h=n(m),v=a(54),_=n(v),E=a(1091),g=n(E),y=a(6),S=a(7),b=a(117);a(2390);var C=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.dataStudyId,n=e.dataScenarioName,r=e.dataTargetPatients,l=e.dataFpp,i=e.dataFpfvFpft,o=e.dataTargetLpft,s=e.includeCountries,d=e.excludeCountries,c=e.isNewStudy,f=e.onSubmitClick,m=e.createConstraints,h=e.showCohorts,v=e.cohorts,E=e.isNewScenario,C=e.disableSubmit,O=(0,p.default)("wizard-step","fpo-row","fpo-wizard-scenario-summary-container",{"wizard-active-step":t}),T=(0,p.default)("fpo-col-5",{"fpo-col-offset-4":!h,"fpo-col-offset-1":h}),R=0,w=0,A=0;return s.forEach(function(e){e.isCountryRegion?R+=1:e.countries.forEach(function(e){"Unspecified country"===e.name?w+=1:R+=1})}),d.forEach(function(e){e.isCountryRegion?A+=1:e.countries.forEach(function(e){"Unspecified country"===e.name||(A+=1)})}),u.default.createElement("div",{className:O},u.default.createElement("div",{className:T},u.default.createElement("h1",null,"Summary scenario inputs"),u.default.createElement("div",{className:"summary-data-wrapper"},u.default.createElement(g.default,{icon:y.Icons.DETAILS},u.default.createElement("span",{className:"summary-row-wrapper"},u.default.createElement("span",{className:"data-label"},u.default.createElement("span",{className:"data-content"},a)),u.default.createElement("span",{className:"data-value",title:n},n))),c&&u.default.createElement(g.default,{icon:y.Icons.VISITORS},u.default.createElement("span",{className:"summary-row-wrapper"},u.default.createElement("span",{className:"data-label"},"Target Patients"),u.default.createElement("span",{className:"data-value",title:r},r))),c&&u.default.createElement(g.default,{icon:y.Icons.DATE_RANGE},u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"FP"),u.default.createElement("span",{className:"data-value",title:l?(0,S.getMomentDate)(l).format("DD MMM YYYY"):""},l?(0,S.getMomentDate)(l).format("DD MMM YYYY"):"")),u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"FPFV-FPFT"),u.default.createElement("span",{className:"data-value",title:i+" "+(i>1?"days":"day")},i," ",i>1?"days":"day")),u.default.createElement("span",{className:"summary-row-wrapper"},u.default.createElement("span",{className:"data-label"},"Target LPFT"),u.default.createElement("span",{className:"data-value",title:o?(0,S.getMomentDate)(o).format("DD MMM YYYY"):""},o?(0,S.getMomentDate)(o).format("DD MMM YYYY"):""))),!h&&function(){return m?u.default.createElement(g.default,{icon:y.Icons.LANGUAGE},u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"Countries included"),u.default.createElement("span",{className:"data-value"},R)),u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"Unspecified countries included"),u.default.createElement("span",{className:"data-value"},w)),u.default.createElement("div",{className:"keyline-separator"}),u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"Countries excluded"),u.default.createElement("span",{className:"data-value"},A))):u.default.createElement(g.default,{icon:y.Icons.LANGUAGE},u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"FPO to suggest countries and regions to include")))}(),h&&v.map(function(e,t){var a=0;return e.locations.forEach(function(e){return e.countries.forEach(function(e){var t=e.patients;a+=t})}),u.default.createElement(g.default,{icon:"",key:e.id},u.default.createElement("div",null,u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"Cohort ",t+1),u.default.createElement("span",{className:"data-value"},e.name)),u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"Patients"),u.default.createElement("span",{className:"data-value"},a)),u.default.createElement("span",{className:"summary-row-wrapper combined"},u.default.createElement("span",{className:"data-label"},"Trigger"),u.default.createElement("span",{className:"data-value"},(0,b.getLabelValue)(e,v)))))})),u.default.createElement("span",{className:"summary-button-wrapper"},!E&&u.default.createElement("div",{className:"summary-attention"},"Editing the target patients or T/LPFT will effect all scenarios within this study, including the approved plan."),u.default.createElement(_.default,{className:"summary-button",label:"Run scenario",disabled:C,onClick:function(){return f()}}))))}}]),t}(u.default.Component);C.propTypes={activeStep:c.default.bool.isRequired,dataStudyId:c.default.string.isRequired,dataScenarioName:c.default.string,dataTargetPatients:c.default.oneOfType([c.default.number,c.default.string]),dataFpp:c.default.object,dataFpfvFpft:c.default.oneOfType([c.default.number,c.default.string]),dataTargetLpft:c.default.object,isNewStudy:c.default.bool,onSubmitClick:c.default.func.isRequired,includeCountries:c.default.array,excludeCountries:c.default.array,createConstraints:c.default.bool,showCohorts:c.default.bool,cohorts:c.default.array,isNewScenario:c.default.bool,disableSubmit:c.default.bool},C.defaultProps={dataScenarioName:"",dataTargetPatients:0,dataFpfvFpft:0,dataFpp:(0,h.default)(),dataTargetLpft:(0,h.default)(),dataCountries:[],isNewStudy:!1,includeCountries:[],excludeCountries:[],createConstraints:!0,showCohorts:!1,cohorts:[],isNewScenario:!1,disableSubmit:!1},t.default=C},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(2),p=n(f),m=a(124),h=n(m),v=a(263),_=n(v),E=a(23),g=n(E),y=a(99),S=n(y),b=a(7);a(2391);var C=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onBlurValidationHandler=a.onBlurValidationHandler.bind(a),a}return i(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"onBlurValidationHandler",value:function(e,t){t||this.props.validationChangeHandler&&this.props.validationChangeHandler("studyConstraints",!1)}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.ownStudyConstraints,n=e.onChange,r=e.values,l=e.status,i=e.showCohorts,o=(0,p.default)("wizard-step","fpo-row","fpo-wizard-study-constraints-container",{"wizard-active-step":t}),s=(0,p.default)("fpo-col-4",{"fpo-col-offset-4":!i,"fpo-col-offset-1":i});return u.default.createElement("div",{className:o},u.default.createElement("div",{className:s},u.default.createElement("div",{className:"fpo-grid no-gaps"},u.default.createElement("div",{className:"fpo-row"},u.default.createElement("div",{className:"fpo-col-5"},u.default.createElement("h1",null,"Study constraints"),u.default.createElement("div",{className:"fpo-wizard-constraints__checkbox-wrapper"},u.default.createElement(_.default,{tabInd:4,label:"Keep scenario aligned with constraints defined on study level",name:"studyConstraints",onChange:n,checked:void 0!==a&&!a,value:0}),u.default.createElement(_.default,{tabInd:5,label:"Scenario has own set of constraints",name:"studyConstraints",onChange:n,checked:void 0!==a&&a,value:1})))),u.default.createElement("div",{className:(0,p.default)("fpo-row",{hidden:!a})},u.default.createElement("div",{className:"fpo-col-3"},u.default.createElement("h1",null,"Target patients"),u.default.createElement(g.default,{tabInd:6,status:l||r.target_num_patients?null:"error",value:r.target_num_patients||"",validators:[function(e){return""===e||h.default.isInt(e,{min:1,max:1e6})}],onChange:function(e){return n(e.target.value,"target_num_patients")},insideLabel:"Target patients (N)",placeholder:"Patients"}),u.default.createElement("h1",{className:(0,p.default)({disabled:!a})},"Milestones"),u.default.createElement(S.default,{disabled:!t,tabInd:7,status:l||r.fp?null:"error",selected:(0,b.getMomentDate)(r.fp),label:"Start date (FP)",onChange:function(e){return n(e,"fp")}}),u.default.createElement(S.default,{disabled:!t,minDate:(0,b.getMomentDate)(r.fp).add(1,"day"),status:l||r.target_lpft?null:"error",selected:(0,b.getMomentDate)(r.target_lpft),label:"Target (T/LPFT)",onBlur:this.onBlurValidationHandler,onChange:function(e){return n(e,"target_lpft")}}),u.default.createElement(g.default,{value:r.fpfv_fpft||0===r.fpfv_fpft?r.fpfv_fpft:"",status:l||r.fpfv_fpft||0===r.fpfv_fpft?null:"error",validators:[function(e){return""===e||h.default.isInt(e,{min:0,max:1e4})}],onChange:function(e){return n(e.target.value,"fpfv_fpft")},insideLabel:"FPFV-FPFT (days)",placeholder:"Days"}))))))}}]),t}(u.default.Component);C.defaultProps={ownStudyConstraints:!1,values:{},status:!0,showCohorts:!1,validationChangeHandler:void 0},C.propTypes={activeStep:c.default.bool.isRequired,ownStudyConstraints:c.default.bool,onChange:c.default.func.isRequired,validationChangeHandler:c.default.func,values:c.default.object,status:c.default.bool,showCohorts:c.default.bool},C.defaultProps={createConstraints:void 0},t.default=C},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1095),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WizardStudyDetailsComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=a(0),d=n(u),c=a(1),f=n(c),p=a(75),m=a(2),h=n(m),v=a(148),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(v),E=a(23),g=n(E),y=a(69),S=n(y),b=a(88),C=a(28),O=a(1249);a(2392);var T=function(e){var t=e.input,a=e.disabled,n=e.maxLength,r=e.insideLabel,l=e.outsideLabel,i=e.placeholder,o=e.meta,u=(o.asyncValidating,o.touched),c=o.error;return d.default.createElement("div",null,d.default.createElement(g.default,s({},t,{defaultValue:t.value,onChange:void 0,onBlur:t.onChange,type:"text",maxLength:n,disabled:a,placeholder:i,outsideLabel:l,status:u&&c?"error":null,statusMessage:c,insideLabel:r})))},R=function(e){var t=e.input,a=e.disabled,n=e.outsideLabel,r=e.options,l=e.placeholder,i=e.initialSelect,o=e.meta,s=o.touched,u=o.error;return d.default.createElement("div",null,d.default.createElement(S.default,{initialSelect:i,onOptionSelect:t.onChange,label:n,disabled:a,status:s&&u?"error":null,placeholder:l},r.map(function(e){return d.default.createElement(y.DropdownOption,{selected:i&&i.name===e.name,key:"drop-down-option_"+e.name,label:e.name,value:e})})))},w=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.props.valid===e.valid&&e.anyTouched===this.props.anyTouched||this.props.onValidationChange&&this.props.onValidationChange(e.valid,e.anyTouched),e.selectedTa&&this.props.selectedTa&&e.selectedTa.label!==this.props.selectedTa.label&&this.props.dispatch((0,p.change)("wizardStudyDetails","indication",null))}},{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.availableIndications,n=e.availableTherapeuticAreas,r=e.selectedTa,l=e.showCohorts,i=e.study,o=(0,h.default)("wizard-step","fpo-row","fpo-wizard-study-details-container",{"wizard-active-step":t}),s=(0,h.default)("fpo-col-4",{"fpo-col-offset-4":!l,"fpo-col-offset-1":l}),u=null,c=null;return i&&i.therapeutic_area&&(u=n.filter(function(e){return e.name===i.therapeutic_area.label}).pop(),i.indication&&(c=a.filter(function(e){return e.name===i.indication.label}).pop())),d.default.createElement("div",{className:o},d.default.createElement("div",{className:s},d.default.createElement("h1",null,"Study details"),d.default.createElement("form",{action:"javascript:void(0);"},d.default.createElement(p.Field,{initialSelect:u,name:"therapeutic_area",outsideLabel:"Therapeutic area",placeholder:"Select therapeutic area",options:n,component:R,disabled:!t,validate:[_.required]}),d.default.createElement(p.Field,{initialSelect:c,name:"indication",outsideLabel:"Indication",placeholder:"Select indication",options:r?(0,b.getIndications)(r.value,a):[],component:R,disabled:!t||!r,validate:[_.required]}),d.default.createElement(p.Field,{initialSelect:null,name:"phase",outsideLabel:"Phase",placeholder:"Select phase",options:Object.keys(O.PHASE).map(function(e){return{id:e,name:O.PHASE[e]}}),component:R,disabled:!t,validate:[_.required]}),d.default.createElement(p.Field,{name:"study_id",outsideLabel:"Study",placeholder:"Add study code",maxLength:45,component:T,disabled:!t,validate:[_.requiredStudy]}),d.default.createElement(p.Field,{name:"description",outsideLabel:"Description (optional)",placeholder:"Add description",maxLength:1e3,component:T,disabled:!t})),d.default.createElement("div",{className:"keyline-separator"})))}}]),t}(u.Component);w.propTypes={activeStep:f.default.bool.isRequired,availableIndications:f.default.array,availableTherapeuticAreas:f.default.array,onValidationChange:f.default.func.isRequired,selectedTa:f.default.object,showCohorts:f.default.bool,study:f.default.object.isRequired},w.defaultProps={availableTherapeuticAreas:[],availableIndications:[],selectedTa:null,showCohorts:!1},t.WizardStudyDetailsComponent=w,t.default=(0,p.reduxForm)({form:"wizardStudyDetails",asyncValidate:C.validateStudyName,asyncBlurFields:["study_id"]})(w)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),o=n(i),s=a(1),u=n(s),d=a(1064),c=n(d),f=function(e){var t=e.input,a=e.meta,n=(a.asyncValidating,a.touched,a.error,r(e,["input","meta"]));return o.default.createElement(c.default,l({},t,n))};f.propTypes={input:u.default.object.isRequired,meta:u.default.object.isRequired},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(75),p=a(2),m=n(p),h=a(1096),v=n(h),_=a(145),E=n(_),g=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.props.valid===e.valid&&e.anyTouched===this.props.anyTouched||this.props.onValidationChange&&this.props.onValidationChange(e.valid,e.anyTouched)}},{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.showCohorts,n=e.study,r=(0,m.default)("wizard-step","fpo-row","fpo-wizard-study-details-container","wizard-study-filters",{"wizard-active-step":t}),l=(0,m.default)("fpo-col-4",{"fpo-col-offset-4":!a,"fpo-col-offset-1":a});return u.default.createElement("div",{className:r},u.default.createElement("div",{className:l},u.default.createElement("h1",null,"Inclusion and Exclusion criteria (optional)"),u.default.createElement("form",{action:"javascript:void(0);"},u.default.createElement(f.Field,{name:"inclusion",outsideLabel:"Inclusion",defaultValue:n.inclusion,placeholder:"Add inclusion criteria",component:v.default,disabled:!t}),u.default.createElement(f.Field,{name:"exclusion",outsideLabel:"Exclusion",defaultValue:n.exclusion,placeholder:"Add exclusion criteria",component:v.default,disabled:!t})),u.default.createElement(E.default,{isShown:!0,multiline:!0,status:"reminder",title:"Changes in this section will be delivered to Nerve within 24 hours."},"Please re-optimize the scenario again in 24 hours."),u.default.createElement("div",{className:"keyline-separator"})))}}]),t}(s.Component);g.propTypes={activeStep:c.default.bool.isRequired,onValidationChange:c.default.func.isRequired,showCohorts:c.default.bool,study:c.default.object.isRequired},g.defaultProps={showCohorts:!1},t.default=(0,f.reduxForm)({form:"wizardStudyFilters"})(g)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WizardTargetPatientsComponent=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=a(0),d=n(u),c=a(1),f=n(c),p=a(75),m=a(2),h=n(m),v=a(124),_=n(v),E=a(148),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(E),y=a(23),S=n(y);a(2393);var b=a(13),C=n(b),O=a(100),T=n(O),R=function(e){var t=e.input,a=e.disabled,n=e.insideLabel,r=e.placeholder,l=e.meta,i=l.touched,o=l.error,u=e.autoFocus,c=e.tabPress;return d.default.createElement("div",null,d.default.createElement(S.default,s({},t,{tabPress:c,autoFocus:u,tabInd:2,type:"text",disabled:a,placeholder:r,validators:[function(e){return""===e||_.default.isInt(e,{min:1,max:1e6})}],status:i&&o?"error":null,insideLabel:n})))},w=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.props.valid===e.valid&&e.anyTouched===this.props.anyTouched||this.props.onValidationChange&&this.props.onValidationChange(e.valid,e.anyTouched)}},{key:"shouldComponentUpdate",value:function(e){return e.activeStep||e.activeStep!==this.props.activeStep}},{key:"render",value:function(){var e=this.props,t=e.activeStep,a=e.isEditing,n=e.onTabNavigate,r=e.disabled,l=e.placeholder,i=e.showCohorts,o=e.impactTooltip,s=(0,h.default)("wizard-step","fpo-row","fpo-wizard-target-patients-container",{"wizard-active-step":t}),u=(0,h.default)("fpo-col-2",{"fpo-col-offset-4":!i,"fpo-col-offset-1":i});return d.default.createElement("div",{className:s},d.default.createElement("div",{className:u},d.default.createElement("h1",null,"Target patients"),d.default.createElement("form",{action:"javascript:void(0);"},d.default.createElement(p.Field,{name:"target_num_patients",tabPress:n,insideLabel:"Target patients (N)",placeholder:l,component:R,autoFocus:!a&&t,disabled:r||!a&&!t,validate:[g.required,g.isInteger,g.minValue1,g.maxValue1m]}),o&&0!==o?d.default.createElement(C.default,{mouseEnterDelay:.3,mouseLeaveDelay:.3,overlay:d.default.createElement("span",null,"Impact value:",d.default.createElement("br",null),o)},d.default.createElement("div",{className:"misaligned-warning__icon"},T.default.INFO_O)):null),d.default.createElement("div",{className:"keyline-separator"})))}}]),t}(u.Component);w.defaultProps={activeStep:!1,isEditing:!1,placeholder:"# Patients",showCohorts:!1,impactTooltip:null},w.propTypes={activeStep:f.default.bool,isEditing:f.default.bool,onValidationChange:f.default.func.isRequired,onTabNavigate:f.default.func,disabled:f.default.bool,placeholder:f.default.string,showCohorts:f.default.bool,impactTooltip:f.default.oneOfType([f.default.number,f.default.string])},t.WizardTargetPatientsComponent=w,t.default=(0,p.reduxForm)({form:"wizardTargetPatients",enableReinitialize:!0,keepDirtyOnReinitialize:!0})(w)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=(0,A.getStudyData)(e,t);return{studiesIds:a&&a.state.status!==V.default.ACTIVE?[t.params.id]:[],jobs:e.jobs,scenarios:e.scenarios,errors:e.errors,showBrand:(0,w.isDisplayBrand)(t.location.pathname)}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(8),m=a(18),h=a(832),v=n(h),_=a(214),E=n(_),g=a(830),y=n(g),S=a(1028),b=n(S),C=a(1168),O=n(C),T=a(32),R=n(T),w=a(49),A=a(103),I=a(822),N=n(I),D=a(28),P=a(36),L=a(144),M=a(347),x=n(M),k=a(348),j=n(k),F=a(60);a(2394);var U=a(17),V=n(U),B=function(e){function t(){var e,a,n,i;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.sessionExpired=function(){n.props.sessionExpired()},n.internalServerError=function(){n.props.internalServerError("Error")},i=a,l(n,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=setTimeout(function t(){var a=this.props,n=a.scenarios,r=a.getStudyDashboardData,l=a.getScenarioViewerDataWithFullStudy,i=a.updateScenarioJobStatus,o=a.updateStudyScenarioJobStatus,s=a.showNotificationOnJobFinished,u=a.studiesIds;return this.props.scenarioJobStatus({studiesIds:u,scenarios:n,dispatchGetStudy:r,dispatchGetScenario:l,dispatchUpdateScenarioJobStatus:i,dispatchUpdateStudyScenarioJobStatus:o,showNotificationMessage:s}),e=setTimeout(t.bind(this),6e4)}.bind(this),1e3),t=setTimeout(function e(){return this.props.getSitesHealth(),t=setTimeout(e.bind(this),3e5)}.bind(this),1e3);this.props.getContextHelpPageList()}},{key:"render",value:function(){var e=this,t=this.props.errors,a=t.forbidden,n=t.internalServer,r=t.notFound,l=t.approveODA,i=t.sessionExpired,o=t.badRequest;return d.default.createElement("div",{className:"application"},d.default.createElement(v.default,{showBrand:this.props.showBrand,onTestSession:this.sessionExpired,onTestError:this.internalServerError}),d.default.createElement("div",{className:"application-content-wrapper"},this.props.children),d.default.createElement(y.default,{showBrand:this.props.showBrand}),d.default.createElement(E.default,{isShown:null!==a&&void 0!==a,status:"error",title:"Forbidden",handleClose:function(){e.props.forbiddenError(),e.props.push("/")}},a),d.default.createElement(E.default,{isShown:null!==n&&void 0!==n,status:"error",title:"An unexpected error occurred"},"We are sorry, but there was a problem dealing with your request. Please refresh the page and try again."),d.default.createElement(E.default,{isShown:null!==r&&void 0!==r,status:"error",title:"Not Found",handleClose:function(){return e.props.notFoundError()}},r),d.default.createElement(E.default,{isShown:null!==l&&void 0!==l,status:"error",title:"ODA API Server issue",handleClose:function(){return e.props.ODAError()}},l),d.default.createElement(E.default,{isShown:null!==o&&void 0!==o,status:"error",title:"Request error",handleClose:function(){return e.props.badRequestError()}},o),d.default.createElement(b.default,{sessionExpired:i}),d.default.createElement(O.default,null),d.default.createElement(R.default,null))}}]),t}(u.Component);B.propTypes={children:f.default.node,errors:f.default.object.isRequired,showBrand:f.default.bool,forbiddenError:f.default.func.isRequired,notFoundError:f.default.func.isRequired,badRequestError:f.default.func.isRequired,scenarioJobStatus:f.default.func,getStudyDashboardData:f.default.func,getScenarioViewerDataWithFullStudy:f.default.func.isRequired,updateScenarioJobStatus:f.default.func,updateStudyScenarioJobStatus:f.default.func,scenarios:f.default.object.isRequired,ODAError:f.default.func.isRequired,getSitesHealth:f.default.func.isRequired,internalServerError:f.default.func.isRequired,sessionExpired:f.default.func.isRequired,push:f.default.func.isRequired,showNotificationOnJobFinished:f.default.func.isRequired,studiesIds:f.default.array,getContextHelpPageList:f.default.func.isRequired},B.defaultProps={children:null,showBrand:!0,scenarioJobStatus:void 0,getStudyDashboardData:void 0,getScenario:void 0,updateScenarioJobStatus:void 0,updateStudyScenarioJobStatus:void 0,studiesIds:[]},t.default=(0,p.connect)(o,{internalServerError:L.internalServerError,sessionExpired:L.sessionExpired,forbiddenError:L.forbiddenError,notFoundError:L.notFoundError,ODAError:L.ODAError,scenarioJobStatus:N.default,getScenarioViewerDataWithFullStudy:P.getScenarioViewerDataWithFullStudy,getStudyDashboardData:D.getStudyDashboardData,showNotificationOnJobFinished:I.showNotificationOnJobFinished,getScenario:P.getScenario,updateScenarioJobStatus:P.updateScenarioJobStatus,updateStudyScenarioJobStatus:D.updateStudyScenarioJobStatus,getApplicationMetaData:x.default,push:m.push,badRequestError:L.badRequestError,getContextHelpPageList:j.default,getSitesHealth:F.getSitesHealth})(B)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1099),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{availableUsers:(0,_.getActionableUsers)(e)}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(8),m=a(39),h=a(69),v=a(36),_=a(555),E=a(32);a(2395);var g=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={newOwnerId:null},a.handleSubmit=a.handleSubmit.bind(a),a.handleCancel=a.handleCancel.bind(a),a.handleSelectNewOwner=a.handleSelectNewOwner.bind(a),a}return i(t,e),s(t,[{key:"handleSelectNewOwner",value:function(e){var t=e.value;this.setState({newOwnerId:t})}},{key:"handleSubmit",value:function(){var e=this,t=this.props.studyId;this.props.setNewStudyOwner(t,this.state.newOwnerId).then(function(){e.handleCancel()}).catch(function(){return e.handleCancel()})}},{key:"handleCancel",value:function(){var e=this;this.setState({newOwnerId:null},function(){e.props.onClose()})}},{key:"render",value:function(){var e=this.props,t=e.isShown,a=e.availableUsers,n=this.state.newOwnerId;return d.default.createElement(m.PopupDialog,{title:"Change study owner",isShown:t,handleClose:this.handleCancel,buttons:[d.default.createElement(m.ActionButton,{action:this.handleCancel},"Cancel"),d.default.createElement(m.ActionButton,{disabled:!n,action:this.handleSubmit,primary:!0},"Change owner")]},d.default.createElement("div",{className:"change-owner-dialog-content"},"Changing ownership will allow the new owner to edit study details. The new owner can ",d.default.createElement("ul",null,d.default.createElement("li",null,"Have access and permission to edit study characteristics"),d.default.createElement("li",null,"Select reference studies"),d.default.createElement("li",null,"Change study ownership")),"You will ",d.default.createElement("b",null,"no longer")," be the study owner. Are you sure?",d.default.createElement("div",{className:"dropdown-container"},d.default.createElement("span",{className:"__title"},"New study owner"),d.default.createElement(h.DropdownSelectFilterable,{narrow:!0,placeholder:"Search by email",onOptionSelect:this.handleSelectNewOwner},a.filter(function(e){return e.email}).map(function(e){return d.default.createElement(h.DropdownOption,{key:e.id,label:e.email,value:e.id,selected:e.id===n})}))),d.default.createElement(E.ContextHelpButton,{page:"popup__change-study-owner",popup:!0})))}}]),t}(u.Component),y={setNewStudyOwner:v.setNewStudyOwner};g.defaultProps={availableUsers:[]},g.propTypes={studyId:f.default.number.isRequired,isShown:f.default.bool.isRequired,onClose:f.default.func.isRequired,availableUsers:f.default.array,setNewStudyOwner:f.default.func.isRequired},t.default=(0,p.connect)(o,y)(g)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1101),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=parseInt(t.params.scenarioId,10),n=parseInt(t.params.cohortId,10),r=e.scenarios[a],l=r&&r.cohorts?r.cohorts.find(function(e){return e.id===n}):void 0,i=parseInt(t.params.id,10);return{cohort:l,cohortId:n,scenario:r,studyId:parseInt(t.params.id,10),study:e.study[i]||{state:{status:B.default.PLANNED}},scenarioId:a,events:(0,U.getEvents)(e,t),locations:(0,U.getAvailableLocations)(e,t),stat:(0,U.getEventsStatistics)(e,t),eventsAreValid:(0,U.areEventsValid)(e,t),allEvents:(0,U.getEventsFromStore)(e,t),activeUser:e.auth.user,groupByType:e.events.groupByType}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(8),m=a(18),h=a(59),v=a(31),_=n(v),E=a(83),g=n(E),y=a(22),S=a(86),b=a(6),C=a(524),O=n(C),T=a(54),R=n(T),w=a(552),A=n(w),I=a(505),N=n(I),D=a(493),P=a(77),L=a(28),M=a(41),x=a(70),k=a(40),j=n(k),F=a(36),U=a(1104);a(801);var V=a(17),B=n(V),H=a(14),G=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.sortEventsByStartDate=function(){a.props.sortEventsByStartDate(a.props.scenarioId,a.state.sortOrder),a.setState({sortOrder:!a.state.sortOrder})},a.toggleGroupByType=function(){a.props.toggleGroupEventsByType(),a.props.sortEventsByStartDate(a.props.scenarioId,!a.state.sortOrder,!1)},a.state={sortOrder:!1},a.scrollTop=0,a.containerWidth=0,a.containerLeft=0,a.handleResize=a.handleResize.bind(a),a.handleAddNewEvent=a.handleAddNewEvent.bind(a),a.handleEventUpdate=a.handleEventUpdate.bind(a),a.handleEventDuplicate=a.handleEventDuplicate.bind(a),a.handleEventRemove=a.handleEventRemove.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.handleEventDisable=a.handleEventDisable.bind(a),a}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.studyId,a=e.scenarioId,n=e.cohortId,r=e.scenario,l=e.study,i=e.locations;window.addEventListener("resize",this.handleResize),window.addEventListener("scroll",this.handleResize),this.handleResize(),l.id!==t&&this.props.getPlainStudy(t),i&&0!==i.length||this.props.getPlatformRegions(),r||this.props.getScenario(t,a),this.props.getScenarioCohortEvents(a,t,n)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("scroll",this.handleResize)}},{key:"handleResize",value:function(e){var t=this.container;if(t){var a=t.getBoundingClientRect();this.containerWidth=a.width,this.containerLeft=a.left;var n=document.querySelector(".application").getBoundingClientRect().top;e&&("scroll"===e.type&&this.scrollTop===n||"resize"===e.type)?this.forceUpdate():this.scrollTop=n}}},{key:"handleAddNewEvent",value:function(e){var t=(0,x.getNewEventByType)(e);this.props.addNewEvent(this.props.scenarioId,t)}},{key:"handleEventUpdate",value:function(e,t,a){this.props.updateEvent(this.props.scenarioId,e,t,a)}},{key:"handleEventDuplicate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.props.duplicateEvent(this.props.scenarioId,e,t)}},{key:"handleEventRemove",value:function(e){this.props.removeEvent(this.props.scenarioId,e)}},{key:"handleEventDisable",value:function(e,t){this.props.disableEvent(this.props.scenarioId,e,t)}},{key:"handleSubmit",value:function(){var e=this,t=this.props,a=t.allEvents,n=t.scenarioId,r=t.studyId,l=t.cohortId,i=[];a.forEach(function(e){if(e.state){var t=(0,_.default)(e);t.locations=[],e.locations.forEach(function(e){e.countries.forEach(function(a){t.locations.push({platform_country_id:a.platform_country_id,country_name:a.name,region_name:e.name})})}),i.push((0,g.default)(t,"isValid"))}}),this.props.applyScenarioCohortEventsChanges(n,l,i).then(function(){return e.props.push("/studies/"+r+"/scenarios/"+n+"/cohorts/"+l)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.cohort,n=t.cohortId,r=t.events,l=t.studyId,i=t.scenarioId,o=t.locations,s=t.scenario,u=t.study,c=t.stat,f=t.activeUser,p=t.groupByType,m=(0,j.default)(f,u,s),v=m.isTracking,_=m.isAdjusted,E=m.isUserHasScenarioFullControl,g=E&&s&&s.status!==H.SCENARIO_STATUS.APPROVED&&a&&a.countries.length>0&&!(v&&!_);return d.default.createElement("div",{className:"scenario-events"},d.default.createElement(S.Sidebar,null,d.default.createElement(S.Button,{height:60},d.default.createElement(h.Link,{to:"/"},b.Icons.HOME)),d.default.createElement(S.Separator,{height:20}),d.default.createElement(S.Button,{height:56,onClick:this.sortEventsByStartDate,tooltip:"Sort events by start date"},this.state.sortOrder?b.Icons.FILTER_DESCENDING:b.Icons.FILTER_ASCENDING),d.default.createElement(S.Button,{height:56,onClick:this.toggleGroupByType,tooltip:this.props.groupByType?"Ungroup events":"Group events by type"},this.props.groupByType?b.Icons.UNGROUP:b.Icons.GROUP)),d.default.createElement(y.Grid,null,d.default.createElement(y.Row,null,d.default.createElement(y.Col,{offset:1,width:10},d.default.createElement(O.default,{numberOfEvents:r.filter(function(e){return e.isValid}).length})),d.default.createElement("div",{className:"fpo-col-1",width:1,ref:function(t){e.container=t}},d.default.createElement("div",{className:"scenario-events__fixed-bar",style:{width:this.containerWidth,left:this.containerLeft}},d.default.createElement("div",{className:"fixed-bar_line"}),d.default.createElement("div",{className:"scenario-events__close-button",onClick:function(){return e.props.push("/studies/"+l+"/scenarios/"+i+"/cohorts/"+n)}},b.Icons.CROSS)))),d.default.createElement(y.Row,null,d.default.createElement(y.Col,{offset:1,width:10,style:{display:"flex"}},d.default.createElement(N.default,{actionable:g,type:M.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE,counters:c[M.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE],isTracking:v,onAdd:function(){return e.handleAddNewEvent(M.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE)}}),d.default.createElement(N.default,{actionable:g,type:M.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS,counters:c[M.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS],isTracking:v,onAdd:function(){return e.handleAddNewEvent(M.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS)}}),d.default.createElement(N.default,{actionable:g,type:M.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE,counters:c[M.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE],isTracking:v,onAdd:function(){return e.handleAddNewEvent(M.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE)}}),d.default.createElement(N.default,{actionable:g,type:M.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE,counters:c[M.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE],isTracking:v,onAdd:function(){return e.handleAddNewEvent(M.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE)}})))),d.default.createElement("div",{style:{height:"20px"}}),d.default.createElement(A.default,{metadata:m,isTracking:u.state.status===B.default.ACTIVE,events:r,scenario:a,onUpdate:this.handleEventUpdate,onDuplicate:this.handleEventDuplicate,onRemove:this.handleEventRemove,onDisable:this.handleEventDisable,locations:o,groupByType:p,isAdjusted:_,activeUser:f}),d.default.createElement(y.Grid,null,d.default.createElement(y.Row,null,d.default.createElement(y.Col,{offset:1,width:10},d.default.createElement("div",{className:"scenario-events-control-buttons__wrapper"},d.default.createElement(R.default,{label:"Cancel",className:"secondary-button",onClick:function(){return e.props.push("/studies/"+l+"/scenarios/"+i+"/cohorts/"+n)}}),d.default.createElement(R.default,{disabled:!this.props.eventsAreValid,label:"Apply",onClick:this.handleSubmit}))))))}}]),t}(u.Component);G.defaultProps={events:[],scenario:null,cohort:null,allEvents:[],eventsAreValid:!1},G.propTypes={studyId:f.default.number.isRequired,scenarioId:f.default.number.isRequired,events:f.default.array,getScenarioCohortEvents:f.default.func.isRequired,push:f.default.func.isRequired,addNewEvent:f.default.func.isRequired,updateEvent:f.default.func.isRequired,locations:f.default.array.isRequired,getPlatformRegions:f.default.func.isRequired,getPlainStudy:f.default.func.isRequired,duplicateEvent:f.default.func.isRequired,removeEvent:f.default.func.isRequired,study:f.default.object.isRequired,stat:f.default.object.isRequired,allEvents:f.default.array,eventsAreValid:f.default.bool,getScenario:f.default.func.isRequired,scenario:f.default.object,applyScenarioCohortEventsChanges:f.default.func.isRequired,activeUser:f.default.object.isRequired,cohortId:f.default.number.isRequired,cohort:f.default.object,sortEventsByStartDate:f.default.func.isRequired,toggleGroupEventsByType:f.default.func.isRequired,groupByType:f.default.bool.isRequired,disableEvent:f.default.func.isRequired};var Y={getScenarioCohortEvents:D.getScenarioCohortEvents,addNewEvent:D.addNewEvent,updateEvent:D.updateEvent,duplicateEvent:D.duplicateEvent,removeEvent:D.removeEvent,getPlatformRegions:P.getPlatformRegions,getPlainStudy:L.getPlainStudy,getScenario:F.getScenario,applyScenarioCohortEventsChanges:D.applyScenarioCohortEventsChanges,sortEventsByStartDate:D.sortEventsByStartDate,toggleGroupEventsByType:D.toggleGroupEventsByType,disableEvent:D.disableEvent,push:m.push};t.default=(0,p.connect)(o,Y)(G)},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.areEventsValid=t.getEventsStatistics=t.getAvailableLocations=t.getEvents=t.getScenarioFromStore=t.getEventsFromStore=void 0;var r=a(43),l=a(70),i=a(41),o=t.getEventsFromStore=function(e,t){return e.events[t.params.scenarioId]||[]},s=t.getScenarioFromStore=function(e,t){return e.scenarios[t.params.scenarioId]||{}},u=function(e,t){return t.params.cohortId},d=t.getEvents=(0,r.createSelector)([o,s,u],function(e,t,a){var n=t.cohorts?t.cohorts.find(function(e){return e.id===+a}):{},r=e.filter(function(e){return e.state!==i.EVENT_STATE.DELETED});return r.forEach(function(e){e.isValid=(0,l.validateByType)(e,t,n)}),r});t.getAvailableLocations=function(e){return e.platform.regions},t.getEventsStatistics=(0,r.createSelector)(d,function(e){var t;return e.reduce(function(e,t){if(!t.isValid)return e;switch(t.status){case i.EVENT_STATUS.ACTIVE:e[t.event_type].inProgress+=1;break;case i.EVENT_STATUS.PENDING:e[t.event_type].pending+=1;break;case i.EVENT_STATUS.COMPLETED:default:e[t.event_type].completed+=1}return e[t.event_type].total+=1,e},(t={},n(t,i.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),n(t,i.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS,{inProgress:0,pending:0,completed:0,total:0}),n(t,i.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),n(t,i.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),t))}),t.areEventsValid=(0,r.createSelector)(o,function(e){var t=e.filter(function(e){return!e.isValid}),a=e.filter(function(e){return e.state});return 0===t.length&&a.length>0})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1103),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var a=t.params,n=a.scenarioId,r=a.id,l=a.cohortId,i=(0,$.getStudyData)(e,t),o=(0,$.getScenarioData)(e,t),s=o.cohorts.find(function(e){return e.id===+l})||{};return{scenarioId:n,scenario:o,studyId:r,cohortId:l,cohort:s,study:i,isTrackingEventsPanel:function(){return i.state.status===ne.default.ACTIVE&&(o.status!==ee.SCENARIO_STATUS.OPEN||null!==o.source_scenario_id)},activeUser:e.auth.user,platformRegions:e.platform.regions,clipboardEmpty:!e.scenarios.clipboard||0===Object.keys(e.scenarios.clipboard).length}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),m=n(p),h=a(8),v=a(2),_=n(v),E=a(18),g=a(84),y=n(g),S=a(180),b=n(S),C=a(22),O=a(218),T=n(O),R=a(146),w=n(R),A=a(262),I=n(A),N=a(145),D=n(N),P=a(494),L=n(P),M=a(352),x=n(M),k=a(79),j=n(k),F=a(517),U=n(F),V=a(266),B=n(V),H=a(267),G=n(H),Y=a(78),q=n(Y),z=a(112),W=n(z),K=a(36),X=a(7),Z=a(37),J=a(64),Q=a(70),$=a(103),ee=a(14),te=n(ee),ae=a(17),ne=n(ae);a(2396);var re=(0,y.default)(J.getStudyParamsWarning),le=(0,y.default)(J.getFilteredData),ie=(0,y.default)(J.getFilteredTableData),oe=(0,y.default)(J.getTableHeaderPosition),se=(0,y.default)(J.getGlobalRollupData),ue=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));de.call(a);var n=(0,Z.getParamItemStorage)("fpo-ui-settings","chartState","collapsed"),r=(0,Z.getParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter")||{overallocated:!1,actualData:!0};return a.state={filter:{name:te.default,type:ee.ROLLUP,subject:null},historicalEnabled:!1,historicalFilter:"INDICATION",currentEvents:[],currentLocation:"",currentRegion:"",eventsPanelOpen:!1,isMultiEditing:!1,multiEditingValues:{},isShowApplyingEditsDialog:!1,multiRegionsData:{},chartCollapsed:n,tableFilter:r},a.alertsHeight=44,a.alertsPosition=149,a.historicalBenchmarkHeight=50,a.historicalBenchmarkPosition=n?204:412,a.tableFilterPosition=n?204:412,a.locationsFilterPosition=149,a.tableHeaderPosition=n?254:460,a.miniChartPosition=208,a.handleFilterSelect=a.handleFilterSelect.bind(a),a.onMultiEditingCancel=a.onMultiEditingCancel.bind(a),a.setHistoricalStatus=a.setHistoricalStatus.bind(a),a.setHistoricalFilter=a.setHistoricalFilter.bind(a),a.handleDeleteRegion=a.handleDeleteRegion.bind(a),a.handleDeleteCountry=a.handleDeleteCountry.bind(a),a.handleAddRegion=a.handleAddRegion.bind(a),a.handleAddCountry=a.handleAddCountry.bind(a),a.handleMultiEditingClick=a.handleMultiEditingClick.bind(a),a.handleCloseApplyingEditsDialog=a.handleCloseApplyingEditsDialog.bind(a),a.handleSubmitApplyingEditsDialog=a.handleSubmitApplyingEditsDialog.bind(a),a.closeEventsPanel=a.closeEventsPanel.bind(a),a.toggleEvents=a.toggleEvents.bind(a),a.multiCheck=a.multiCheck.bind(a),a.saveMultiColumnData=a.saveMultiColumnData.bind(a),a.onMultiEditingApply=a.onMultiEditingApply.bind(a),a.onMultiEditingCellChange=a.onMultiEditingCellChange.bind(a),a.resetCountryData=a.resetCountryData.bind(a),a}return o(t,e),d(t,[{key:"componentDidMount",value:function(){var e={root:null,rootMargin:"80px 0px 0px 0px",threshold:.75},t=this.handleMiniChart;this.observer=new IntersectionObserver(t,e),this.chartContainer&&this.observer.observe(this.chartContainer)}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.filter,a=!1;e.cohort&&e.cohort.fullData&&(t.type===ee.REGION?a=e.cohort.fullData.find(function(e){return e.region_name===t.name}):t.type===ee.COUNTRY&&(a=e.cohort.fullData.find(function(e){return e.country_name===t.name}))),a&&this.props.scenario.id===e.scenario.id||this.setState({filter:{name:te.default,type:ee.ROLLUP,subject:null}})}},{key:"componentDidUpdate",value:function(){this.chartContainer&&this.observer.observe(this.chartContainer)}},{key:"componentWillUnmount",value:function(){this.chartContainer&&this.observer.unobserve(this.chartContainer)}},{key:"onMultiEditingCancel",value:function(){this.setState({isMultiEditing:!1,multiEditingValues:{},multiRegionsData:{}})}},{key:"onMultiEditingApply",value:function(){(0,Z.getParamItemStorage)("applyingEditsMultiColumnDialog",this.props.activeUser.id,"applyingEditsDialogCheckedClose")?this.saveMultiColumnData():this.setState({isShowApplyingEditsDialog:!0})}},{key:"onMultiEditingCellChange",value:function(e){this.setState({multiEditingValues:u({},this.state.multiEditingValues,e)})}},{key:"getCurrentEvents",value:function(e,t){var a=this.props,n=a.study,r=a.scenario,l=a.cohort,i=[];return(n.state.status===ne.default.ACTIVE&&r.status!==ee.SCENARIO_STATUS.APPROVED&&null!==r.source_scenario_id?l.adjusted_events:l.events).forEach(function(a,n,r){return a.locations.forEach(function(a){a.name===e&&a.countries.forEach(function(e){e.name===t&&i.push(r[n])})})}),i}},{key:"setHistoricalStatus",value:function(e){this.setState({historicalEnabled:e})}},{key:"setHistoricalFilter",value:function(e){this.setState({historicalFilter:e})}},{key:"handleCloseApplyingEditsDialog",value:function(){this.setState({isShowApplyingEditsDialog:!1})}},{key:"handleSubmitApplyingEditsDialog",value:function(e){e&&(0,Z.addToStorage)("applyingEditsMultiColumnDialog",{id:this.props.activeUser.id,applyingEditsDialogCheckedClose:!0}),this.saveMultiColumnData()}},{key:"saveMultiColumnData",value:function(){var e=this.props,t=e.scenario,a=e.cohort,n=this.state,r=n.multiRegionsData,l=n.multiEditingValues,i=a.fullData.filter(function(e){return"country"===e.type}).reduce(function(e,t){var a=e,n=r[t.region_name];return n&&n.includes(t.country_name)&&(a[t.country_id]=Object.keys(l).reduce(function(e,a){var n=l[a],r=t[a];return e.push({fieldName:a,newValue:null!==n&&void 0!==n&&""!==n?n:null,oldValue:void 0!==r?r:null}),e},[])),a},{});this.props.changeCohortCountriesData(t.id,a.id,i),this.setState({isMultiEditing:!1,multiEditingValues:{},multiRegionsData:{},isShowApplyingEditsDialog:!1})}},{key:"handleAddCountry",value:function(e,t,a){var n=this,r=this.props,l=r.scenario,i=r.cohort,o=this.props.platformRegions.find(function(e){return e.name===t}),s=o.countries.find(function(t){return t.name===e});this.props.getParametersByCohortAndCountry(this.props.study.id,i.id,s?s.id:null,t).then(function(r){var s=null!==l.source_scenario_id,u=(0,X.getNewCountryObject)(e,t,a,1===o.countries.length,s);r&&Object.keys(r).length>0&&(u=(0,X.mergeCountryParameters)(i,r,u,s,!0)),n.props.addCohortCountry(l.id,i.id,u)}).catch(function(){var r=null!==l.source_scenario_id,s=(0,X.getNewCountryObject)(e,t,a,1===o.countries.length,r);n.props.addCohortCountry(l.id,i.id,s)})}},{key:"handleAddRegion",value:function(e,t,a){var n=this.props.platformRegions.find(function(e){return e.name===a}),r="Unspecified country";1===n.countries.length&&(r=n.countries[0].name),this.handleAddCountry(r,a,a)}},{key:"handleDeleteRegion",value:function(e,t,a){var n=this.props,r=n.cohort,l=n.platformRegions,i=l.find(function(e){return e.name===a});this.props.deleteCohortCountry(e,r.id,{regionId:t,regionName:i&&i.name})}},{key:"handleDeleteCountry",value:function(e,t,a,n){var r=this.props,l=r.cohort,i=r.platformRegions,o=i.find(function(e){return e.name===n});this.props.deleteCohortCountry(e,l.id,{countryName:t,regionId:a,regionName:o&&o.name})}},{key:"toggleEvents",value:function(e){e.stopPropagation();var t=e.currentTarget.dataset.region,a=e.currentTarget.dataset.loc,n=this.state,r=n.currentRegion,l=n.currentLocation;if(t&&a&&t===r&&a===l)return void this.setState({eventsPanelOpen:!1,currentRegion:"",currentLocation:"",currentEvents:[]});this.setState({eventsPanelOpen:!0,currentRegion:t,currentLocation:a,currentEvents:(0,Q.sortEventsByField)(this.getCurrentEvents(t,a),"start_date","ASC",!0)})}},{key:"closeEventsPanel",value:function(){this.setState({eventsPanelOpen:!1})}},{key:"handleFilterSelect",value:function(e){this.setState({filter:e,isMultiEditing:!1,multiEditingValues:{},multiRegionsData:{}})}},{key:"multiCheck",value:function(e,t,a,n){var l=function(e){var n=Object.assign({},e);return e[a]?delete n[a]:delete n[t],n},i=Object.assign({},this.state.multiRegionsData),o={};return e?(o=a?Object.assign({},i,r({},a,i[a]&&!i[a].includes(t)?i[a].concat([t]):[t])):Object.assign({},i,r({},t,n[0])),this.setState({multiRegionsData:o})):(a?i[a].filter(function(e){return e!==t}):[]).length?this.setState({multiRegionsData:Object.assign({},i,r({},a,i[a].filter(function(e){return e!==t})))}):(l(i),this.setState({multiRegionsData:l(i)})),o}},{key:"handleMultiEditingClick",value:function(){var e={};this.props.cohort.fullData.forEach(function(t){var a=t.type,n=t.location,r=t.region_name,l=t.country_name;"region"!==a||e[n]||(e[n]=[]),"country"===a&&e[r].push(l)}),this.setState({isMultiEditing:!0,multiEditingValues:{},multiRegionsData:e})}},{key:"resetCountryData",value:function(e,t){var a=this.props,n=a.scenario,r=a.cohort;this.props.revertCohortCountryData(n.id,r.id,e,t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.scenario,n=t.study,r=t.cohort,l=t.platformRegions,i=t.activeUser,o=t.isTrackingEventsPanel,s=this.state,d=s.filter,c=s.historicalEnabled,p=s.isMultiEditing,m=s.multiEditingValues,h=s.tableFilter;if(r&&null===r.fp||!a)return null;var v=n.state.status===ne.default.ACTIVE,E=(0,X.isEditableScenario)(a,i,n)&&(n.state.status===ne.default.PLANNED||v&&null!==a.source_scenario_id||null===n.state.status)&&!p,g=le(r.fullData,d),y=void 0!==g.actual_overallocation&&0!==g.actual_overallocation,S=g&&g.ignore_aggregation,O=se(r.fullData),A=a.aggregatedGlobalData||{},N=ie(r.fullData,O,d,p,m),P=re(n,a),M=a.cohorts.filter(function(e){var t=e.fullData[0].curves;return 0!==t[0].length&&0!==t[1].length&&0!==t[2].length}),k=M.length!==a.cohorts.length||P.showStudyParamsWarning,F=oe(this.tableHeaderPosition,k||y,this.alertsHeight);return f.default.createElement("div",{className:(0,_.default)("cohort-scenario-container",{"show-alert":k,overallocated:y})},k&&!P.showStudyParamsWarning&&f.default.createElement(j.default,{style:{top:this.alertsPosition+"px"}},f.default.createElement("div",{className:"cohorts-alerts-container"},f.default.createElement(C.Grid,null,f.default.createElement(C.Row,null,f.default.createElement(C.Col,{offset:1,width:11},f.default.createElement(D.default,{isShown:!0,title:"",status:"info",className:"cohorts-alert"},"There are missing parameters in some cohorts. Go to individual cohort\n                    tabs and enter the relevant values.")))))),y&&f.default.createElement(U.default,{topOffset:this.alertsPosition,type:g.type,isRegionCountry:g.isRegionCountry,overallocation:g.actual_overallocation,location:g.location,originalLpft:g.original_f_lpft}),P.showStudyParamsWarning&&f.default.createElement(j.default,{style:{top:this.alertsPosition+"px",zIndex:4}},f.default.createElement("div",{className:(0,_.default)("cohorts-alerts-container")},f.default.createElement(C.Grid,null,f.default.createElement(C.Row,null,f.default.createElement(C.Col,{offset:1,width:11},f.default.createElement(B.default,{status:a.status,study:n,scenario:a,data:P,studyId:n.id,scenarioId:a.id})))))),f.default.createElement(j.default,{key:k||y?this.locationsFilterPosition+this.alertsHeight:this.locationsFilterPosition,style:{top:(k||y?this.locationsFilterPosition+this.alertsHeight:this.locationsFilterPosition)+"px",zIndex:4}},f.default.createElement("div",{className:"filters-container"},f.default.createElement(C.Grid,null,f.default.createElement(C.Row,null,f.default.createElement(C.Col,{offset:1,width:11},f.default.createElement(q.default,null,f.default.createElement(b.default,{activeFilter:d,data:r.fullData,platformRegions:l,onFilterSelect:this.handleFilterSelect}))))))),f.default.createElement("div",null,f.default.createElement(C.Grid,null,f.default.createElement(C.Row,null,f.default.createElement(C.Col,{offset:8,width:4},f.default.createElement(x.default,{onClose:this.closeEventsPanel,currentLocation:this.state.currentLocation,currentRegion:this.state.currentRegion,currentEvents:this.state.currentEvents,eventTrackingStatus:o(),expanded:this.state.eventsPanelOpen}))))),f.default.createElement("div",null,f.default.createElement(C.Grid,null,f.default.createElement(C.Row,{className:"scenario-highlights-bar"},f.default.createElement(q.default,null,f.default.createElement(T.default,{globalData:A,target:null!==a.source_scenario_id?g.lpft:a.end_date,predicted:g.lpft,fpfv_lpfv:g.fpfv_lpfv,fpp_fpfv:g.fpp_fpfv,actual_date:g.actual_date,startDate:r.fp,isCohortView:!0,actual_fpfv_lpfv:g.actual_fpfv_lpfv,actual_fpp_fpfv:g.actual_fpp_fpfv,actual_f_lpft:g.actual_f_lpft,adjusted_fpfv_lpfv:g.adjusted_fpfv_lpfv,adjusted_fpp_fpfv:g.adjusted_fpp_fpfv,adjustedLpft:g.adjusted_lpft,isIgnored:S,showAdjusted:null!==a.source_scenario_id,showActual:!(a.status!==ee.SCENARIO_STATUS.APPROVED&&a.status!==ee.SCENARIO_STATUS.PREV_APPROVED&&null===a.source_scenario_id||n.state.status!==ne.default.ACTIVE&&n.state.status!==ne.default.COMPLETED),isExactCopy:a.exact_copy})),f.default.createElement(C.Col,{width:1},f.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"flex-end"}},f.default.createElement(R.ChartCollapseControl,{isCollapsed:this.state.chartCollapsed,onOptionSelect:this.handleChartCollapse})))))),!this.state.chartCollapsed&&f.default.createElement(W.default,{scenario:r,studyStatus:n.state.status,cohortName:{shortName:"C"+(a.cohorts.findIndex(function(e){return e.name===r.name})+1),fullName:r.name},data:g},f.default.createElement("div",{className:"minimised-chart-container exclude-from-screenshot",style:{top:(k||y?this.miniChartPosition+this.alertsHeight:this.miniChartPosition)+"px",width:"100%"},ref:function(t){e.miniChartContainer=t}},f.default.createElement(C.Grid,null,f.default.createElement(C.Row,null,f.default.createElement(C.Col,{offset:1,width:11},f.default.createElement("div",{className:"minimised-chart"},f.default.createElement(q.default,null,f.default.createElement(R.MinimisedEnrolmentChart,null))))))),f.default.createElement(C.Grid,null,f.default.createElement(C.Row,null,f.default.createElement(C.Col,{className:"highlights-bar-separator",offset:1},f.default.createElement("div",null))),f.default.createElement(C.Row,null,f.default.createElement(C.Col,{offset:1,width:11},f.default.createElement("div",{className:"full-chart chart-container",ref:function(t){e.chartContainer=t}},f.default.createElement(q.default,null,f.default.createElement(w.default,null))))))),f.default.createElement(C.Grid,null,(!v||a.status===ee.SCENARIO_STATUS.OPEN&&null===a.source_scenario_id)&&f.default.createElement(j.default,{className:"exclude-from-screenshot",style:{top:(k||y?this.historicalBenchmarkPosition+this.alertsHeight:this.historicalBenchmarkPosition)+"px",backgroundColor:"white"}},f.default.createElement(C.Grid,{noGaps:!0},f.default.createElement(C.Row,null,f.default.createElement(C.Col,{offset:1,width:11},f.default.createElement(q.default,null,f.default.createElement(L.default,{isCohortView:!0,onCloseDialog:this.handleCloseApplyingEditsDialog,onSubmitDialog:this.handleSubmitApplyingEditsDialog,enableMultiedit:d.type===ee.ROLLUP&&(n.state.status===ne.default.PLANNED||null===n.state.status&&n.state.isOwner)&&(n.state.isOwner||"FPO_ADMIN"===i.role)&&E,isShowApplyingEditsDialog:this.state.isShowApplyingEditsDialog,hasTrials:n.historical_references.length>0,uncertaintyLevel:"N/A",isActive:c,isMultiEditing:p,onFilterChange:this.setHistoricalFilter,onActiveChange:this.setHistoricalStatus,onEdit:this.handleMultiEditingClick})))))),v&&f.default.createElement(j.default,{key:k||y?this.tableFilterPosition+this.alertsHeight:this.tableFilterPosition,className:"exclude-from-screenshot",style:{top:(k||y?this.tableFilterPosition+this.alertsHeight:this.tableFilterPosition)+"px",backgroundColor:"white",height:"50px",zIndex:2}},f.default.createElement(C.Grid,{noGaps:!0},f.default.createElement(C.Row,null,f.default.createElement(C.Col,{offset:1,width:11},f.default.createElement("div",{className:"table-filter"},f.default.createElement(q.default,null,f.default.createElement(G.default,{showOverallocation:!!O.overallocatedData||!!O.adjusted_overallocatedData,onChange:this.handleTableFilterChange,actualData:h&&h.actualData,overallocated:h&&h.overallocated}))))))),f.default.createElement(C.Row,{className:"exclude-from-screenshot"},f.default.createElement(C.Col,{offset:1,width:11},f.default.createElement(q.default,null,f.default.createElement(I.default,{data:N,scenario:u({},r,{exact_copy:a.exact_copy}),study:n,isCohortView:!0,tableFilter:h,historicalFilter:this.state.historicalFilter,navigateToViewSites:this.props.navigateToViewSites,platformRegions:l,tableHeaderPosition:F,onInvalidData:function(){return e.props.changeCohortEnableSave(!1)},isEditable:E&&!c,isHistoricalDataViewEnabled:c,isAdjusted:null!==a.source_scenario_id,isTracking:v&&(a.status===ee.SCENARIO_STATUS.APPROVED||null!==a.source_scenario_id||a.status===ee.SCENARIO_STATUS.PREV_APPROVED),onDataChange:function(t,n){e.props.changeCohortCountryData(a.id,r.id,t,n)},batchUpdate:function(t,n){var l=n.map(function(e){return{fieldName:e.name,newValue:e.value,oldValue:e.value}});e.props.changeCohortCountryData(a.id,r.id,t,l)},handleAddRegion:this.handleAddRegion,handleAddCountry:this.handleAddCountry,handleDeleteRegion:function(t,a){return e.handleDeleteRegion(e.props.scenario.id,t,a)},handleDeleteCountry:function(t,a,n){return e.handleDeleteCountry(e.props.scenario.id,t,a,n)},onToggleEvents:this.toggleEvents,resetCountryData:this.resetCountryData,isMultiEditing:p,multiEditType:"edit",multiRegionsData:this.state.multiRegionsData,onMultiCheck:this.multiCheck,onMultiEditingCancel:this.onMultiEditingCancel,onMultiEditingApply:this.onMultiEditingApply,onMultiEditingCellChange:this.onMultiEditingCellChange,onCopy:this.onCopy,onPaste:this.onPaste,clipboardEmpty:this.props.clipboardEmpty}))))))}}]),t}(c.PureComponent),de=function(){var e=this;this.onCopy=function(t){var a=e.props,n=a.scenario,r=a.cohort;e.props.onCopy(n.id,r.id,t)},this.onPaste=function(t){var a=e.props,n=a.scenario,r=a.cohort;e.props.onPaste(n.id,r.id,t)},this.handleMiniChart=function(t){t.forEach(function(t){t.boundingClientRect.top<=-150&&!e.state.fixedChart?(e.miniChartContainer.style.visibility="visible",e.chartContainer.style.visibility="hidden",e.setState({fixedChart:!0})):e.state.fixedChart&&(e.miniChartContainer.style.visibility="hidden",e.chartContainer.style.visibility="visible",e.setState({fixedChart:!1}))})},this.handleChartCollapse=function(t){t?(e.historicalBenchmarkPosition=204,e.tableHeaderPosition=254,e.tableFilterPosition=204):(e.historicalBenchmarkPosition=412,e.tableHeaderPosition=460,e.tableFilterPosition=412),null===e.state.chartCollapsed?(0,Z.addToStorage)("fpo-ui-settings",{id:"chartState",selected:t}):(0,Z.setParamItemStorage)("fpo-ui-settings","chartState","collapsed",t),e.setState({chartCollapsed:t})},this.handleTableFilterChange=function(t){var a=u({},e.state.tableFilter,r({},t,!e.state.tableFilter[t]));(0,Z.getParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter")?(0,Z.setParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter",a):(0,Z.addToStorage)("fpo-ui-settings",{id:"tableFilter",tableFilter:a}),e.setState({tableFilter:a})}};ue.defaultProps={clipboardEmpty:!0},ue.propTypes={scenario:m.default.object.isRequired,study:m.default.object.isRequired,platformRegions:m.default.array.isRequired,cohort:m.default.object.isRequired,changeCohortCountryData:m.default.func.isRequired,changeCohortEnableSave:m.default.func.isRequired,activeUser:m.default.object.isRequired,navigateToViewSites:m.default.func.isRequired,addCohortCountry:m.default.func.isRequired,deleteCohortCountry:m.default.func.isRequired,isTrackingEventsPanel:m.default.func.isRequired,changeCohortCountriesData:m.default.func.isRequired,getParametersByCohortAndCountry:m.default.func.isRequired,revertCohortCountryData:m.default.func.isRequired,onCopy:m.default.func.isRequired,onPaste:m.default.func.isRequired,clipboardEmpty:m.default.bool};var ce={changeCohortCountryData:K.changeCohortCountryData,changeCohortEnableSave:K.changeCohortEnableSave,addCohortCountry:K.addCohortCountry,deleteCohortCountry:K.deleteCohortCountry,navigateToViewSites:function(e,t,a){return(0,E.push)("/studies/"+e+"/scenarios/"+t+"/sites/"+a)},changeCohortCountriesData:K.changeCohortCountriesData,getParametersByCohortAndCountry:K.getParametersByCohortAndCountry,revertCohortCountryData:K.revertCohortCountryData,onCopy:K.onCopy,onPaste:K.onPaste};t.default=(0,h.connect)(s,ce)(ue)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1106),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var a=t.params,n=a.scenarioId,l=a.id,i=a.cohortId,o=e.auth.user,s=e.scenarios[n],u=e.errors.sessionExpired||e.errors.internalServer,d=(0,oe.getParamItemStorage)("fpo-dirty-data",o.id+"-"+l+"-"+n,"values"),c=null;if(d&&d.valuesToSave){var f=(0,ne.getDateFields)();c=d.valuesToSave.map(function(e){var t=e;return t.fp=(0,ne.getMomentDate)(t.fp),f.has(t.fieldName)&&(t.fieldValue=(0,ne.getMomentDate)(t.fieldValue),t.oldValue=(0,ne.getMomentDate)(t.oldValue)),t})}var p=null;return d&&d.deleteCountries&&(p=[].concat(r(d.deleteCountries))),{dataToRestore:c||p?{valuesToSave:c,deleteCountries:p}:null,requirePageRefresh:u,scenarioId:n,enableSave:e.scenarios.enableSave,dataToSave:e.scenarios.dataToSave,deleteCountries:e.scenarios.deleteCountries,hasInvalidCohorts:!!s&&s.hasInvalidCohorts,scenario:s,studyId:l,aggregatedGlobalData:s?s.aggregatedGlobalData:{},cohortId:+i,study:(0,fe.getStudyData)(e,t),platformRegions:e.platform.regions,activeUser:e.auth.user,notes:(0,pe.getScenarioNotesFromStore)(e,n).length,undoStack:e.scenarios.past?e.scenarios.past.length:0,redoStack:e.scenarios.future?e.scenarios.future.length:0,studies:e.studies.studies}}function u(e,t){return{addScenarioNote:function(t,a){return e((0,ae.addScenarioNote)(t,a))},getScenarioNotes:function(t,a){return e((0,ae.getScenarioNotes)(t,a))},duplicateScenario:function(t,a,n,r,l,i){return e((0,$.duplicateScenario)(t,a,n,r,l,i))},createAdjustmentScenario:function(t,a,n,r,l){return e((0,$.createAdjustmentScenario)(t,a,n,r,l))},approveScenario:function(t,a,n){return e((0,$.approveScenario)(t,a,n))},saveOverrides:function(t,a,n){return e((0,$.saveOverrides)(t,a,n))},getScenario:function(t,a){return e((0,$.getScenario)(t,a))},getPlainStudy:function(t){return e((0,te.getPlainStudy)(t))},getPlatformRegions:function(){return e((0,ee.getPlatformRegions)())},backToStudy:function(){return e((0,g.push)("/studies/"+t.params.id))},goToScenario:function(t,a){return e((0,g.push)("/studies/"+t+"/scenarios/"+a))},goToScenarioEdit:function(t,a){return e((0,g.push)("/studies/"+t+"/scenarios/"+a+"/edit?cohorts=true"))},goToScenarioWithCohorts:function(t,a){return e((0,g.push)("/studies/"+t+"/scenarios/"+a+"/cohorts"))},navigateToEvents:function(t,a,n){return e((0,g.push)("/studies/"+t+"/scenarios/"+a+"/cohorts-events/"+n))},changeCohortEnableSave:function(t){return e((0,$.changeCohortEnableSave)(t))},removeCohortCountry:function(t,a,n){return e((0,$.removeCohortCountry)(t,a,n))},restoreUnsavedData:function(t){return e((0,$.restoreUnsavedData)(t))},resetUnsavedData:function(){return e((0,$.resetUnsavedData)())},getScenarioViewerData:function(t,a){return e((0,$.getScenarioViewerData)(t,a))},undoLastAction:function(t){return e((0,$.undoLastAction)(t))},redoLastAction:function(t){return e((0,$.redoLastAction)(t))},getStudies:function(t){return e((0,te.getStudies)(t))},createApprovedSnapshot:function(t,a,n){return e((0,$.createApprovedSnapshot)(t,a,n))}}}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a(0),p=n(f),m=a(30),h=n(m),v=a(1),_=n(v),E=a(8),g=a(18),y=a(59),S=a(2),b=n(S),C=a(199),O=n(C),T=a(86),R=a(6),w=a(22),A=a(265),I=n(A),N=a(844),D=n(N),P=a(268),L=n(P),M=a(261),x=n(M),k=a(257),j=n(k),F=a(350),U=n(F),V=a(353),B=n(V),H=a(129),G=n(H),Y=a(101),q=n(Y),z=a(79),W=n(z),K=a(128),X=n(K),Z=a(258),J=n(Z),Q=a(32),$=a(36),ee=a(77),te=a(28),ae=a(213),ne=a(7),re=a(147),le=a(49),ie=a(117),oe=a(37),se=a(40),ue=n(se),de=a(63),ce=a(64),fe=a(103),pe=a(48),me=a(14),he=a(17),ve=n(he);a(2397);var _e=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleUndoAction=function(){a.props.undoLastAction(a.props.scenarioId)},a.handleRedoAction=function(){a.props.redoLastAction(a.props.scenarioId)},a.createApprovedSnapshot=function(){var e=a.props,t=e.study,n=e.scenario;a.props.createApprovedSnapshot(t.id,n.id,(0,de.serializeScenarioData)(t,n,null))},a.handleApproveAction=function(){var e=a.props,t=e.study,n=e.scenario;a.setState({showLoader:!0},function(){a.props.approveScenario(t.id,n.id,(0,de.serializeScenarioData)(t,n,null)).then(function(){return a.setState({isApproveScenarioDialogShown:!1,stopEditMode:-1*a.state.stopEditMode,showLoader:!1})})})},a.state={notesPanelOpen:!1,isDuplicateScenarioDialogShown:!1,isApproveScenarioDialogShown:!1,isSaveChangesDialogShown:!1,isIncompleteDataDialogShown:!1,isRestoredDialogShown:!1,saveChangesActionType:void 0,showLoader:!1},a.exportToExcel=a.exportToExcel.bind(a),a.toggleNotes=a.toggleNotes.bind(a),a.handleDuplicateScenarioDialogClose=a.handleDuplicateScenarioDialogClose.bind(a),a.handleDuplicateScenarioDialogSubmit=a.handleDuplicateScenarioDialogSubmit.bind(a),a.handleDuplicateScenarioClick=a.handleDuplicateScenarioClick.bind(a),a.navigateToEvents=a.navigateToEvents.bind(a),a.handlerEditScenarioClick=a.handlerEditScenarioClick.bind(a),a.handlerApproveScenario=a.handlerApproveScenario.bind(a),a.handleSaveAction=(0,O.default)(a.handleSaveAction.bind(a),2e3),a.handleUnsavedAction=a.handleUnsavedAction.bind(a),a.handleSaveData=a.handleSaveData.bind(a),a.handleSaveDataDialogClose=a.handleSaveDataDialogClose.bind(a),a.applyRestoredData=a.applyRestoredData.bind(a),a}return o(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scenarioId,a=e.studyId;this.controller=new AbortController;var n=this.controller.signal;this.props.studies||this.props.getStudies(n),this.props.getScenarioViewerData(a,t)}},{key:"componentWillReceiveProps",value:function(e){e.scenarioId!==this.props.scenarioId&&(this.props.getScenarioViewerData(e.studyId,e.scenarioId),this.props.getScenarioNotes(e.scenarioId,this.controller.signal));var t=e.deleteCountries,a=e.dataToSave;e.requirePageRefresh&&(a&&a.length>0||t&&t.length>0)&&((0,oe.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"-"+this.props.studyId+"-"+this.props.scenarioId),(0,oe.addToStorage)("fpo-dirty-data",{id:e.activeUser.id+"-"+e.studyId+"-"+e.scenarioId,values:{valuesToSave:a,deleteCountries:t}})),this.setState({isRestoredDialogShown:!!e.dataToRestore})}},{key:"componentWillUnmount",value:function(){this.props.resetUnsavedData(),this.controller.abort()}},{key:"exportToExcel",value:function(){var e=this.props,t=e.study,a=e.scenario;(0,re.exportToExcelCohorts)(t,a)}},{key:"toggleNotes",value:function(){this.setState({notesPanelOpen:!this.state.notesPanelOpen})}},{key:"handleSaveData",value:function(){var e=this.props,t=e.scenario,a=e.study,n=a.state.status===ve.default.ACTIVE&&t.status!==me.SCENARIO_STATUS.APPROVED&&null!==t.source_scenario_id,l=[];n?t.cohorts.forEach(function(e){var t=e.fullData.filter(function(e){return e.type.toUpperCase()===me.COUNTRY}).reduce(function(e,t){if(t.adjusted_invalids&&t.adjusted_invalids.length>0){if(t.invalidFields&&1===t.invalidFields.length&&"start_date"===t.invalidFields[0])return e;if(t.adjusted_invalids&&1===t.adjusted_invalids.length&&"start_date"===t.adjusted_invalids[0])return e;e.push(t.id)}return e},[]);l=[].concat(r(l),r(t))}):t.cohorts.forEach(function(e){var t=e.fullData.filter(function(e){return e.type.toUpperCase()===me.COUNTRY}).reduce(function(e,t){if(t.invalidFields&&t.invalidFields.length>0){if(1===t.invalidFields.length&&"start_date"===t.invalidFields[0])return e;e.push(t.id)}return e},[]);l=[].concat(r(l),r(t))}),l.length>0?this.setState({isIncompleteDataDialogShown:!0}):this.handleSaveAction()}},{key:"handleSaveDataDialogClose",value:function(){this.setState({isIncompleteDataDialogShown:!1})}},{key:"handleDuplicateScenarioClick",value:function(){this.setState({isDuplicateScenarioDialogShown:!0})}},{key:"handleDuplicateScenarioDialogClose",value:function(){this.setState({isDuplicateScenarioDialogShown:!1})}},{key:"handleDuplicateScenarioDialogSubmit",value:function(e,t,a,n,r){var l=this,i=this.props,o=i.studyId,s=i.scenario,u=i.goToScenario,d=i.goToScenarioWithCohorts,c=i.study,f=(s&&s.status===me.SCENARIO_STATUS.APPROVED||s&&s.status===me.SCENARIO_STATUS.PREV_APPROVED)&&c.state.status===ve.default.ACTIVE;new Promise(function(i){if(r){var o=(0,ie.getCohortsFpOffsets)(s);return i(l.props.createAdjustmentScenario(s.id,e,o,a,n))}return i(l.props.duplicateScenario(s.id,e,t,a,n,f))}).then(function(e){var a=e.id;s.cohorts.length>0?d(t||o,a):u(t||o,a)}),this.handleDuplicateScenarioDialogClose()}},{key:"navigateToEvents",value:function(){this.props.navigateToEvents(this.props.studyId,this.props.scenarioId,this.props.cohortId)}},{key:"handlerEditScenarioClick",value:function(){var e=this.props,t=e.studyId,a=e.scenarioId;(0,e.goToScenarioEdit)(t,a)}},{key:"handlerApproveScenario",value:function(){this.setState({isApproveScenarioDialogShown:!0})}},{key:"handleSaveAction",value:function(){var e=this,t=this.props,a=t.dataToSave,n=t.scenarioId,r=t.cohortId,l=t.platformRegions,i=t.deleteCountries,o=i.reduce(function(e,t){return e[t.cohort_id]?e[t.cohort_id].push(t.country_id):e[t.cohort_id]=[t.country_id],e},{}),s=a.filter(function(e){return!o[e.cohortId]||!o[e.cohortId].includes(e.countryId)});this.props.changeCohortEnableSave(!1);var u=(0,ne.prepareDataToSaveOverrides)(s,l,!0);return new Promise(function(t){Object.keys(o).length>0&&t(Promise.all(Object.keys(o).map(function(t){return e.props.removeCohortCountry(e.props.scenario.id,t,o[t])}))),t()}).then(function(){return(0,oe.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-"+e.props.scenarioId),e.props.saveOverrides(u,e.props.studyId,n,r)}).then(function(){return e.props.changeCohortEnableSave(!1)}).catch(function(){return e.props.changeCohortEnableSave(!0)}).finally(function(){e.state.isIncompleteDataDialogShown&&e.setState({isIncompleteDataDialogShown:!1})})}},{key:"handleUnsavedAction",value:function(e){this.setState({isSaveChangesDialogShown:!0,saveChangesActionType:e})}},{key:"applyRestoredData",value:function(){var e=this.props.dataToRestore;(0,oe.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"-"+this.props.studyId+"-"+this.props.scenarioId),this.props.restoreUnsavedData(d({},e,{scenario:this.props.scenario}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.scenarioId,n=t.scenario,l=t.studyId,i=t.study,o=t.platformRegions,s=t.notes,u=t.cohortId,c=t.activeUser,f=t.aggregatedGlobalData,m=t.hasInvalidCohorts,v=t.enableSave,_=t.dataToSave,E=t.requirePageRefresh,g=t.deleteCountries,S=t.studies,C=this.state,O=C.isDuplicateScenarioDialogShown,A=C.isApproveScenarioDialogShown,N=C.isIncompleteDataDialogShown,P=C.showLoader;if(!(n&&i&&o.length&&S))return p.default.createElement(q.default,null);var M=(0,ue.default)(c,i,n),k=M.isEditable&&!this.state.historicalEnabled,F=M.isApprovable&&!m,V=M.isAdjusted,Y=M.isDuplicateAvailable,z=n.cohorts.find(function(e){return e.id===u}),K=0;z&&(K=(V?z.adjusted_events:z.events).length);var Z=(_.length>0||g.length>0)&&!E,$=(0,ce.getStudyParamsWarning)(i,n);n.studyParamsWarning=$;var ee=function(t){var a=[];return V?n.cohorts.forEach(function(e){var t=e.fullData.filter(function(e){return e.type.toUpperCase()===me.COUNTRY}).reduce(function(e,t){if(t.adjusted_invalids&&t.adjusted_invalids.length>0){if(1===t.adjusted_invalids.length&&"start_date"===t.adjusted_invalids[0])return e;e.push(t.id)}return e},[]);a=[].concat(r(a),r(t))}):n.cohorts.forEach(function(e){var t=e.fullData.filter(function(e){return e.type.toUpperCase()===me.COUNTRY}).reduce(function(e,t){if(t.invalidFields&&t.invalidFields.length>0){if(1===t.invalidFields.length&&"start_date"===t.invalidFields[0])return e;e.push(t.id)}return e},[]);a=[].concat(r(a),r(t))}),a.length>0&&n.status!==me.SCENARIO_STATUS.APPROVED?e.handleSaveData:Z?e.handleUnsavedAction:t},te="scenario-viewer__";return i.state.status?"ACTIVE"===i.state.status?"APPROVED"===n.status?te+="tracking--cohort-approved":n.source_scenario_id?(te="scenario-viewer__tracking--cohort-",te+=n.exact_copy?"adjusted-exact":"adjusted-weighted"):te+="tracking--cohort":te+="planning--cohort":te+="playground--cohort",p.default.createElement("div",{className:"cohorts-scenario-container screenshot-container"},p.default.createElement(T.Sidebar,null,p.default.createElement(T.Button,{className:"fpo-exit-button",height:60},p.default.createElement(y.Link,{to:"/"},R.Icons.HOME)),p.default.createElement(T.Separator,{height:20}),p.default.createElement(T.Button,{className:"fpo-exit-button",height:51,onClick:function(){return e.props.backToStudy()}},R.Icons.CHEVRON_LEFT),p.default.createElement(T.Separator,{height:22,noLine:!0}),p.default.createElement(T.Button,{height:56,onClick:this.toggleNotes,tooltip:"Notes"},p.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},R.Icons.NOTES,p.default.createElement("div",{className:"sup"},s>0?(0,le.kFormatter)(s):""))),p.default.createElement(T.Button,{height:56,onClick:ee(this.navigateToEvents),actionName:me.SIDEBAR_BUTTONS.EVENT,tooltip:"Events",disabled:!u},p.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},R.Icons.EVENT,p.default.createElement("div",{className:"sup"},K>0?(0,le.kFormatter)(K):""))),p.default.createElement(T.Separator,{height:20}),p.default.createElement(T.Button,{className:"fpo-exit-button",height:56,disabled:!this.props.undoStack,onClick:this.handleUndoAction},p.default.createElement(T.AnimatedContent,{disabled:!this.props.undoStack,tooltip:"Undo"},R.Icons.UNDO)),p.default.createElement(T.Button,{className:"fpo-exit-button flip-vertical",height:56,disabled:!this.props.redoStack,onClick:this.handleRedoAction},p.default.createElement(T.AnimatedContent,{disabled:!this.props.redoStack,tooltip:"Redo"},R.Icons.UNDO)),p.default.createElement(T.Button,{height:56,disabled:!v,onClick:this.handleSaveData,tooltip:"Save"},R.Icons.SAVE),p.default.createElement(T.Button,{height:56,tooltip:"Duplicate and edit",disabled:!Y,actionName:me.SIDEBAR_BUTTONS.DUPLICATE,onClick:ee(this.handleDuplicateScenarioClick)},R.Icons.DUPLICATE),p.default.createElement(J.default,{exportToExcel:this.exportToExcel,study:i,scenario:n,notCollapsibleChart:!u}),p.default.createElement(T.Button,{height:56,disabled:!k,tooltip:"Edit",actionName:me.SIDEBAR_BUTTONS.EDIT,onClick:ee(this.handlerEditScenarioClick)},R.Icons.EDIT),p.default.createElement(T.Separator,{height:20}),p.default.createElement(T.Button,{height:56,disabled:!0,tooltip:"Optimize scenario"},R.Icons.OPTIMISE),p.default.createElement(T.Button,{height:56,disabled:!F||!f.lpft,tooltip:"Approve scenario",actionName:me.SIDEBAR_BUTTONS.APPROVE,onClick:ee(this.handlerApproveScenario)},R.Icons.APPROVE)),p.default.createElement(w.Grid,null,p.default.createElement(w.Row,null,p.default.createElement(w.Col,{offset:8,width:4},p.default.createElement(x.default,{isEditable:!0,scenarioId:n.id,onSubmitNote:this.props.addScenarioNote,onClose:this.toggleNotes,expanded:this.state.notesPanelOpen})))),p.default.createElement(W.default,{style:{zIndex:4}},p.default.createElement("div",{ref:function(t){e.titleBar=t},className:(0,b.default)({fixed:this.fixedHeader})},p.default.createElement("div",{className:(0,b.default)("scenario__title-bar",{approved:n.status===me.SCENARIO_STATUS.APPROVED})},p.default.createElement(w.Grid,null,p.default.createElement(w.Row,{className:(0,b.default)({approved:n.status===me.SCENARIO_STATUS.APPROVED}),style:{height:"87px"}},p.default.createElement(w.Col,{offset:1,width:6},p.default.createElement(I.default,{adjusted:n.adjusted_createdAt,approvedAt:n.approvedAt,createdAt:n.createdAt,exactCopy:!!n.exact_copy,isAdjusted:V,isCohort:!!n.cohorts.length,modified:n.updated,name:n.name,originScenario:n.originScenario,status:n.status,studyId:i.study_id})),p.default.createElement(w.Col,{width:5},p.default.createElement("div",{className:"scenario-alerts-wrapper"},p.default.createElement(L.default,{scenario:n,globalData:f,study:i})))),p.default.createElement(w.Row,{className:(0,b.default)({approved:n.status===me.SCENARIO_STATUS.APPROVED}),style:{height:"62px"}},p.default.createElement(w.Col,{offset:1,width:11},p.default.createElement(D.default,{studyId:l,scenarioId:a,active:u,cohorts:n.cohorts}))))))),this.props.children,p.default.createElement(H.SaveChangesDialog,{isShown:this.state.isSaveChangesDialogShown,onSubmit:this.handleSaveAction,actionType:this.state.saveChangesActionType,callbackActions:[{type:me.SIDEBAR_BUTTONS.EVENT,action:this.navigateToEvents},{type:me.SIDEBAR_BUTTONS.DUPLICATE,action:this.handleDuplicateScenarioClick},{type:me.SIDEBAR_BUTTONS.EXPORT,action:this.exportToExcel},{type:me.SIDEBAR_BUTTONS.EDIT,action:this.handlerEditScenarioClick},{type:me.SIDEBAR_BUTTONS.APPROVE,action:this.handlerApproveScenario}],onClose:function(){return e.setState({isSaveChangesDialogShown:!1})}}),p.default.createElement(B.default,{isShown:N,onClose:this.handleSaveDataDialogClose,onSubmit:this.handleSaveAction}),p.default.createElement(G.default,{allowTabs:!0,tabsCommonPath:"/cohorts",removeStoredData:this.props.activeUser.id+"-"+this.props.studyId+"-"+this.props.scenarioId,hasUnsaved:Z}),i&&p.default.createElement(j.default,{studyParamsWarning:$,study:i,scenario:d({},n,{fullData:f}),studies:S,isShown:O,onClose:this.handleDuplicateScenarioDialogClose,onSubmit:this.handleDuplicateScenarioDialogSubmit,showCreateAdjustedOption:(n.status===me.SCENARIO_STATUS.APPROVED||n.status===me.SCENARIO_STATUS.PREV_APPROVED)&&i.state.status===ve.default.ACTIVE,isPrevApproved:n.status===me.SCENARIO_STATUS.PREV_APPROVED,isApproved:n.status===me.SCENARIO_STATUS.APPROVED}),p.default.createElement(X.default,{isShown:this.state.isRestoredDialogShown,onSubmit:function(){return e.applyRestoredData()},onClose:function(){(0,oe.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-"+e.props.scenarioId),e.setState({isRestoredDialogShown:!1})}}),i&&p.default.createElement(U.default,{fullData:[],studyParamsWarning:$,willOverride:i.scenarios.some(function(e){return e.status===me.SCENARIO_STATUS.APPROVED}),isAdjusted:V,predictedPatients:(V?f.adjusted_patient_allocation:f.patient_allocation)||0,targetPatients:(V?f.patient_allocation:n.target_num_patients)||0,targetDate:V?f.lpft:n.end_date,predictedDate:V?f.adjusted_lpft:f.lpft,isShown:A,onClose:function(){return e.setState({isApproveScenarioDialogShown:!1})},onSubmit:this.handleApproveAction}),p.default.createElement(Q.ContextHelpButton,{page:te}),P&&h.default.createPortal(p.default.createElement(q.default,null),document.body))}}]),t}(f.PureComponent);_e.propTypes={activeUser:_.default.object.isRequired,scenario:_.default.object,scenarioId:_.default.string.isRequired,study:_.default.object,studyId:_.default.string.isRequired,getScenarioViewerData:_.default.func.isRequired,platformRegions:_.default.array.isRequired,cohortId:_.default.oneOfType([_.default.number,_.default.string]),hasInvalidCohorts:_.default.bool,children:_.default.element.isRequired,enableSave:_.default.bool,backToStudy:_.default.func.isRequired,addScenarioNote:_.default.func.isRequired,getScenarioNotes:_.default.func.isRequired,notes:_.default.number,duplicateScenario:_.default.func.isRequired,createAdjustmentScenario:_.default.func.isRequired,approveScenario:_.default.func.isRequired,aggregatedGlobalData:_.default.object,goToScenario:_.default.func.isRequired,goToScenarioEdit:_.default.func.isRequired,goToScenarioWithCohorts:_.default.func.isRequired,navigateToEvents:_.default.func.isRequired,changeCohortEnableSave:_.default.func.isRequired,dataToSave:_.default.array,deleteCountries:_.default.array,saveOverrides:_.default.func.isRequired,removeCohortCountry:_.default.func.isRequired,resetUnsavedData:_.default.func.isRequired,restoreUnsavedData:_.default.func.isRequired,requirePageRefresh:_.default.bool,dataToRestore:_.default.object,undoLastAction:_.default.func.isRequired,redoLastAction:_.default.func.isRequired,undoStack:_.default.number,redoStack:_.default.number,studies:_.default.array,getStudies:_.default.func.isRequired,createApprovedSnapshot:_.default.func.isRequired},_e.defaultProps={scenario:void 0,study:void 0,cohortId:void 0,goToStudy:void 0,notes:0,aggregatedGlobalData:{},hasInvalidCohorts:!1,enableSave:!1,dataToSave:[],deleteCountries:[],requirePageRefresh:!1,dataToRestore:null,undoStack:0,redoStack:0,studies:null},t.default=(0,E.connect)(s,u)(_e)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1108),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=t.params,n=a.scenarioId,r=a.id,l=e.scenarios[n];return{hasInvalidCohorts:!!l&&l.hasInvalidCohorts,aggregatedGlobalData:l?l.aggregatedGlobalData:null,scenarioId:n,scenario:l,studyId:r,study:e.study[r]}}function l(e){return{navigateToCohort:function(t,a,n){return e((0,p.push)("/studies/"+t+"/scenarios/"+a+"/cohorts/"+n))}}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=a(0),s=n(o),u=a(1),d=n(u),c=a(8),f=a(749),p=a(18),m=a(2),h=n(m),v=a(10),_=n(v),E=a(22),g=a(842),y=n(g),S=a(146),b=n(S),C=a(6),O=a(145),T=n(O),R=a(79),w=n(R),A=a(218),I=n(A),N=a(266),D=n(N),P=a(112),L=n(P),M=a(117),x=a(64),k=a(17),j=n(k);a(2398);var F=a(14),U=function(e){var t=e.scenario,a=e.study,n=e.navigateToCohort,r=e.aggregatedGlobalData,l=void 0===r?{}:r,o=t.cohorts.filter(function(e){var a=null!==t.source_scenario_id?"adjusted_curves":"curves",n=e.fullData[0][a];return 0!==n[0].length&&0!==n[1].length&&0!==n[2].length}),u=(0,_.default)(t.fp),d=t.cohorts.map(function(e,t){var a=e.fullData[0].curves,n=e.fullData[0].actual_curves,r=e.fullData[0].adjusted_curves,l=0===a[0].length||0===a[1].length||0===a[2].length||!e.fullData[0].lpft,i=0===n[0].length||0===n[1].length||0===n[2].length,o=0===r[0].length||0===r[1].length||0===r[2].length||!e.fullData[0].adjusted_lpft;return{cohortId:e.id,cohortName:"C"+(t+1),countriesLength:e.countries.length,startDate:e.fp,fromPrevApproved:e.fromPrevApproved,isEmptyGeneric:l,isEmptyActual:i,isEmptyAdjusted:o,data:e.fullData.find(function(e){return"rollup"===e.type})}});d.unshift({cohortId:0,cohortName:"All",countriesLength:l.uniqueCountries&&l.uniqueCountries.length,startDate:u,isEmpty:0===o.length,fromPrevApproved:t.fromPrevApproved,data:l});var c=(0,M.getMilestonesChartCohortsData)(d,t),p=i({},t,{fp:u}),m=(0,x.getStudyParamsWarning)(a,t),v=o.length!==t.cohorts.length;return s.default.createElement("div",{className:(0,h.default)("fpo-all-cohorts__container",{"show-alert":v})},v&&!m.showStudyParamsWarning&&s.default.createElement("div",{className:"alerts-container"},s.default.createElement(E.Grid,null,s.default.createElement(E.Row,null,s.default.createElement(E.Col,{offset:1,width:11},s.default.createElement(T.default,{isShown:!0,title:"",status:"info",className:"cohorts-alert"},"There are missing parameters in some cohorts. Go to individual cohort\n                  tabs and enter the relevant values."))))),m.showStudyParamsWarning&&s.default.createElement(w.default,{style:{top:"149px",zIndex:2}},s.default.createElement("div",{className:(0,h.default)("alerts-container")},s.default.createElement(E.Grid,null,s.default.createElement(E.Row,null,s.default.createElement(E.Col,{offset:1,width:11},s.default.createElement(D.default,{status:t.status,study:a,scenario:t,studyId:a.id,scenarioId:t.id,data:m})))))),s.default.createElement(E.Grid,null,s.default.createElement(E.Row,{style:{minHeight:"87px"}},s.default.createElement(E.Col,{offset:1,width:11},s.default.createElement(f.Tabs,{selectedTabClassName:"fpo-all-cohorts__tab-active"},s.default.createElement(f.TabList,{className:"fpo-all-cohorts__tabs-wrapper"},s.default.createElement(f.Tab,{className:"fpo-all-cohorts__tab"},s.default.createElement("div",null,C.Icons.ROMB_EMPTY),s.default.createElement("div",null,"Milestones")),s.default.createElement(f.Tab,{className:"fpo-all-cohorts__tab"},s.default.createElement("div",null,C.Icons.CHART_MENU),s.default.createElement("div",null,"Curves"))),s.default.createElement(f.TabPanel,null,s.default.createElement(y.default,{isAdjusted:null!==t.source_scenario_id,isTracking:!(a.state.status!==j.default.ACTIVE&&a.state.status!==j.default.COMPLETED||t.status!==F.SCENARIO_STATUS.APPROVED&&null===t.source_scenario_id&&t.status!==F.SCENARIO_STATUS.PREV_APPROVED),onCohortClick:n,studyId:a.id,data:c,scenario:p})),s.default.createElement(f.TabPanel,null,s.default.createElement(E.Row,{className:"scenario-highlights-bar"},s.default.createElement(I.default,{globalData:l,target:null!==t.source_scenario_id?l.lpft:t.end_date,predicted:l.lpft,fpfv_lpfv:l.fpfv_lpfv,fpp_fpfv:l.fpp_fpfv,actual_date:l.actual_date,startDate:(0,_.default)(t.fp),actual_fpfv_lpfv:l.actual_fpfv_lpfv,actual_fpp_fpfv:l.actual_fpp_fpfv,actual_f_lpft:l.actual_f_lpft,adjusted_fpfv_lpfv:l.adjusted_fpfv_lpfv,adjusted_fpp_fpfv:l.adjusted_fpp_fpfv,adjustedLpft:l.adjusted_lpft,showAdjusted:null!==t.source_scenario_id,isCohortView:!0,showActual:!(t.status!==F.SCENARIO_STATUS.APPROVED&&t.status!==F.SCENARIO_STATUS.PREV_APPROVED&&null===t.source_scenario_id||a.state.status!==j.default.ACTIVE&&a.state.status!==j.default.COMPLETED)})),s.default.createElement("div",{className:"cohorts-highlights-bar__separator"}),s.default.createElement(L.default,{scenario:p,isImpact:!1,studyStatus:a.state.status,data:l},s.default.createElement(b.default,null))))))))};U.defaultProps={scenario:null,aggregatedGlobalData:null},U.propTypes={scenario:d.default.object,study:d.default.object.isRequired,navigateToCohort:d.default.func.isRequired,aggregatedGlobalData:d.default.object},t.default=(0,c.connect)(r,l)(U)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1110),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){return{scenariosIds:t.location.query.scenario,activeFilter:t.location.query.activeFilter,studyId:t.params.id,scenarios:e.comparator.scenarios,error:e.comparator.error}}function s(e){return{goToHome:function(){return e((0,v.push)("/"))},goToStudy:function(t){return e((0,v.push)("/studies/"+t))},applyFilter:function(t){return e((0,v.push)(t))},getStudyScenariosToCompare:function(t,a){return e((0,P.getStudyScenariosToCompare)(t,a))}}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),m=n(p),h=a(8),v=a(18),_=a(123),E=n(_),g=a(702),y=n(g),S=a(86),b=a(850),C=n(b),O=a(846),T=n(O),R=a(22),w=a(848),A=n(w),I=a(940),N=n(I),D=a(6),P=a(28),L=a(7),M=a(1213),x=a(49),k=a(215),j=n(k),F=a(14),U=a(32);a(2399);var V=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={preparedScenarios:[],filteredScenarios:[],activeRegion:null,activeCountry:null,allRegions:[],allCountries:[],filteredCountries:[],srRrViewType:"SR"},a.onFilterSetHandler=a.onFilterSetHandler.bind(a),a.handleResize=a.handleResize.bind(a),a.handleFixHeader=a.handleFixHeader.bind(a),a.handleRegionSelect=a.handleRegionSelect.bind(a),a.handleCountrySelect=a.handleCountrySelect.bind(a),a.toggleSrRrViewType=a.toggleSrRrViewType.bind(a),a.debounced=(0,E.default)(a.forceUpdate,200),a.scrollTop=0,a}return i(t,e),d(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.studyId,a=e.scenariosIds;this.props.getStudyScenariosToCompare(t,a);var n=!!(0,x.isSupportPassive)()&&{passive:!0};window.addEventListener("resize",this.handleFixHeader,n),window.addEventListener("scroll",this.handleFixHeader,n),document.body.addEventListener("scroll",this.handleFixHeader,n),this.handleFixHeader()}},{key:"componentWillReceiveProps",value:function(e){var t=e.scenarios.filter(function(e){return!e.cohorts||0===e.cohorts.length}).map(function(e){if(e){var t=(0,L.prepareScenarioObject)(e);return t.source_scenario_id&&(t.hasAdjustedOrigin=!0),t.countries=(0,L.prepareScenarioCountriesObject)(t).map(function(e){var t="Unspecified country"===e.country_name?"Unspecified country ("+e.region_name+")":e.country_name;return u({},e,{location:t})}),u({},t,{fullData:(0,L.getScenarioCalculatedData)(t.countries,t)})}return null}),a=[{value:k.LOCATION_FILTER_OPTIONS.GLOBALS_ONLY,label:k.LOCATION_FILTER_OPTIONS.GLOBALS_ONLY},{value:k.LOCATION_FILTER_OPTIONS.ALL_REGIONS,label:k.LOCATION_FILTER_OPTIONS.ALL_REGIONS}],n=[{value:k.LOCATION_FILTER_OPTIONS.ALL,label:k.LOCATION_FILTER_OPTIONS.ALL}];t.forEach(function(e){e.fullData.forEach(function(e){e.type===F.SCENARIO_DATA_TYPE.REGION?a.push({label:e.location,value:e.location}):e.type!==F.SCENARIO_DATA_TYPE.COUNTRY||e.isRegionCountry||n.push({label:e.location,value:e.location,region:e.region})})});var r=this.state.allRegions.find(function(e){return e.selected}),l=this.state.filteredCountries.find(function(e){return e.selected});if(r){var i=a.find(function(e){return e.value===r.value});i?i.selected=!0:a[0].selected=!0}else a[0].selected=!0;this.setState({preparedScenarios:t,allRegions:(0,y.default)(a,"value"),allCountries:(0,y.default)(n,"value"),filteredCountries:r?(0,y.default)(n,"value").filter(function(e){return e.region===r.value||e.value===k.LOCATION_FILTER_OPTIONS.ALL||r.value===k.LOCATION_FILTER_OPTIONS.ALL_REGIONS}).map(function(e){return l&&e.value===l.value?u({},e,{selected:!0}):e}):(0,y.default)(n,"value")})}},{key:"componentDidUpdate",value:function(){if(!this.initialRender||this.prevFilter!==this.props.activeFilter){var e=this.filtersBar;if(!e)return;var t=e.getBoundingClientRect(),a=t.width,n=t.left;this.timeline.style.left=n+"px",this.timeline.style.width=a+"px",this.dashedLine.style.height=window.innerHeight-this.scenariosWrapper.getBoundingClientRect().bottom+"px",this.initialRender=!0,this.prevFilter=this.props.activeFilter,(0,M.fireResize)()}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleFixHeader),window.removeEventListener("scroll",this.handleFixHeader),document.body.removeEventListener("scroll",this.handleFixHeader)}},{key:"onFilterSetHandler",value:function(e){if(this.state.activeFilter!==e){var t={scenario:this.props.scenariosIds,activeFilter:e};this.props.applyFilter({pathname:"/studies/"+this.props.studyId+"/compare",query:t})}}},{key:"handleFixHeader",value:function(e){var t=this.container;if(t){var a=t.getBoundingClientRect(),n=a.width,r=a.left,l=[this.titleBar,this.filtersBar],i=document.querySelector(".application").getBoundingClientRect().top;i<=-80&&!this.fixedHeader?(l.forEach(function(e){e.classList.add("fixed")}),this.placeholder.style.display="block",this.fixedHeader=!0):i>-80&&this.fixedHeader&&(l.forEach(function(e){e.classList.remove("fixed")}),this.placeholder.style.display="none",this.fixedHeader=!1),this.fixedHeader?l.forEach(function(e){var t=e;t.style.left=r+"px",t.style.width=n+"px"}):l.forEach(function(e){var t=e;t.style.left=null,t.style.width=null}),e&&("scroll"===e.type&&this.scrollTop===i||"resize"===e.type)?(this.timeline.style.left=r+"px",this.timeline.style.width=n+"px",this.dashedLine.style.height=window.innerHeight-this.scenariosWrapper.getBoundingClientRect().bottom+"px",this.forceUpdate()):this.scrollTop=i}}},{key:"handleResize",value:function(){this.debounced()}},{key:"handleRegionSelect",value:function(e){var t=this.state,a=t.allRegions,n=t.allCountries;this.setState({activeRegion:e.value,activeCountry:null,allRegions:a.map(function(t){return Object.assign({},t,{selected:t.value===e.value})}),filteredCountries:n.filter(function(t){return t.region!==t.value&&(t.region===e.value||t.value===k.LOCATION_FILTER_OPTIONS.ALL||e.value===k.LOCATION_FILTER_OPTIONS.ALL_REGIONS)}).map(function(t){return t.value===k.LOCATION_FILTER_OPTIONS.ALL&&"All regions"!==e.value?Object.assign({},t,{selected:!0}):Object.assign({},t,{selected:!1})})},function(){(0,M.fireResize)()})}},{key:"handleCountrySelect",value:function(e){var t=this.state,a=t.allRegions,n=t.allCountries,r=t.activeRegion,l=t.filteredCountries,i=n.find(function(t){return t.value===e.value});this.setState({activeCountry:e.value,activeRegion:i.region?i.region:r,allRegions:r&&r!==k.LOCATION_FILTER_OPTIONS.ALL_REGIONS?a:a.map(function(e){return Object.assign({},e,{selected:e.value===i.region})}),filteredCountries:l.filter(function(e){return e.region===i.region||e.value===k.LOCATION_FILTER_OPTIONS.ALL||i.value===k.LOCATION_FILTER_OPTIONS.ALL}).map(function(t){return Object.assign({},t,{selected:t.value===e.value})})},function(){(0,M.fireResize)()})}},{key:"toggleSrRrViewType",value:function(e){this.setState({srRrViewType:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.preparedScenarios,n=t.activeRegion,r=t.activeCountry,l=t.allRegions,i=t.filteredCountries,o=this.props,s=o.error,u=o.activeFilter;if(0===a.length)return null;if(s)return f.default.createElement("div",{className:"error-message-container"},"There was an error during data loading.");var d=(0,M.filterSelectedScenarios)(a,u,n,r),c=(0,M.getMinMaxDates)(d),p=f.default.createElement(I.MilestonesTimelineTooltip,{data:{minMaxDates:c,tLpft:d[0].end_date}}),m=d.map(function(t,a){return f.default.createElement(A.default,{key:"compare-milestone-view_"+t.id,activeFilter:u,scenario:t,scenarioNumber:a+1,minDate:c[0],maxDate:c[1],srRrViewType:e.state.srRrViewType})});return f.default.createElement("div",{ref:function(t){e.container=t},className:"compare-scenarios"},f.default.createElement(S.Sidebar,null,f.default.createElement(S.Button,{height:80,onClick:function(){return e.props.goToHome()}},D.Icons.HOME),f.default.createElement(S.Separator,null),f.default.createElement(S.Button,{height:51,onClick:function(){return e.props.goToStudy(e.props.studyId)}},D.Icons.CHEVRON_LEFT)),f.default.createElement("div",{className:"fixed-placeholder",ref:function(t){e.placeholder=t}}),f.default.createElement("div",{className:"title-bar",ref:function(t){e.titleBar=t}},f.default.createElement(C.default,{scenarios:a})),f.default.createElement("div",{className:"filters-bar",ref:function(t){e.filtersBar=t}},f.default.createElement(R.Grid,null,f.default.createElement(R.Row,null,f.default.createElement(R.Col,{offset:1,width:11},f.default.createElement(T.default,{regions:l,countries:i,onRegionSelect:this.handleRegionSelect,onCountrySelect:this.handleCountrySelect,activeFilter:u,onClickHandler:this.onFilterSetHandler}))),f.default.createElement(w.CompareMilestonesViewRow,{srRrViewType:this.state.srRrViewType,setSrRrViewType:this.toggleSrRrViewType,activeFilter:u,graphElement:p,isTitle:!0}))),f.default.createElement("div",{id:"scenarios-wrapper",ref:function(t){e.scenariosWrapper=t},style:{width:"100%"}},m),f.default.createElement("div",{ref:function(t){e.dashedLine=t}},f.default.createElement(R.Grid,null,f.default.createElement(R.Row,null,f.default.createElement(R.Col,{offset:3,width:7},f.default.createElement(I.MilestonesTimelinePlaceholder,{data:{minMaxDates:c,tLpft:d[0].end_date}}))))),f.default.createElement("div",{className:"timeline",ref:function(t){e.timeline=t}},f.default.createElement(R.Grid,null,f.default.createElement(R.Row,null,f.default.createElement(R.Col,{offset:3,width:7},f.default.createElement(N.default,{data:{minMaxDates:c,tLpft:d[0].end_date}}))))),f.default.createElement(U.ContextHelpButton,{page:"scenario-comparator"}))}}]),t}(c.Component);V.propTypes={activeFilter:m.default.string,applyFilter:m.default.func.isRequired,error:m.default.bool,getStudyScenariosToCompare:m.default.func.isRequired,goToStudy:m.default.func.isRequired,goToHome:m.default.func.isRequired,scenarios:m.default.array.isRequired,scenariosIds:m.default.array.isRequired,studyId:m.default.string.isRequired},V.contextTypes={router:m.default.object},V.defaultProps={error:!1,activeFilter:j.default.LPFT_ALL},t.default=(0,h.connect)(o,s)(V)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1112),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),o=n(i),s=a(1),u=n(s),d=a(8),c=a(749),f=a(84),p=n(f),m=a(50),h=n(m),v=a(65),_=n(v),E=a(11),g=n(E),y=a(22),S=a(499),b=n(S),C=a(1032),O=n(C),T=a(862),R=n(T),w=a(1034),A=n(w),I=a(32),N=a(543),D=n(N),P=a(48),L=a(1116),M=a(359),x=a(60),k=a(131);a(2400);var j=(0,p.default)(M.getHeaderData,h.default),F=function(e){var t=e.studyId,a=e.scenarioId,n=e.countryId,l=e.siteId,s=e.metricsFilter,u=e.milestonesFilter,d=e.headerData,f=e.hasSiteData,p=e.getSite,m=e.setMetricsFilter,h=e.setMilestonesFilter,v=e.siteData,_=e.studies_by_site,E=e.handleSiteAction,S=e.sitesItem,C=e.isEditable,T=e.currentIndication,N=e.currentStudy,P=e.otherStudies,L=e.dataType,M=v.platformCountry,x=void 0===M?{}:M;return(0,i.useEffect)(function(){f||p(t,a,l)},[p,t,a,l,f]),o.default.createElement("div",{className:"country-sites-container"},o.default.createElement(y.Grid,null,o.default.createElement(y.Row,null,o.default.createElement(y.Col,{offset:1,width:10},o.default.createElement(b.default,{dataHeader:d})),o.default.createElement(y.Col,{width:1},C?o.default.createElement("div",{className:"country-site-action-button__wrapper"},o.default.createElement(D.default,{dataType:L,rowData:S,onSubmit:function(e,t,r,l){E(a,n,t,e,r,l)},isEditable:C})):o.default.createElement("div",null)))),o.default.createElement(c.Tabs,{selectedTabClassName:"country-sites__tab-active"},o.default.createElement(y.Grid,null,o.default.createElement(y.Row,null,o.default.createElement(y.Col,{offset:1,width:11},o.default.createElement(c.TabList,{className:"country-sites__tabs-wrapper"},o.default.createElement(c.Tab,{className:"country-sites__tab"},"Site history"),o.default.createElement(c.Tab,{className:"country-sites__tab"},"Primary investigator details"),o.default.createElement(c.Tab,{className:"country-sites__tab"},"Primary center details"))))),o.default.createElement(c.TabPanel,null,o.default.createElement(y.Grid,null,o.default.createElement(y.Row,null,o.default.createElement(y.Col,{offset:1,width:11},_&&_.length>0?o.default.createElement(o.default.Fragment,null,o.default.createElement(O.default,{hasCurrentStudy:N.length>0,data:[].concat(r(N),r(P)),dataRegion:(0,g.default)(x,"region")}),o.default.createElement(R.default,{id:"current",data:N,metricsFilter:s,onMetricsFilter:m,milestonesFilter:u,onMilestonesFilter:h}),o.default.createElement("h3",null,"Other studies for the site"),o.default.createElement(R.default,{id:"other",noHeader:!0,data:P,metricsFilter:s,onMetricsFilter:m,milestonesFilter:u,onMilestonesFilter:h})):o.default.createElement("section",{className:"country-sites-table__separator"},"Site has no Novartis experience within ",T," indication"))))),o.default.createElement(c.TabPanel,null,o.default.createElement(w.PiDetailsPage,{data:v.PI,currentStudy:N[0],siteId:l})),o.default.createElement(c.TabPanel,null,o.default.createElement(A.default,{data:v,currentStudy:N[0]}))),o.default.createElement(I.ContextHelpButton,{page:"site-details"}))};F.propTypes={getSite:u.default.func.isRequired,siteId:u.default.string.isRequired,studyId:u.default.oneOfType([u.default.number,u.default.string]).isRequired,scenarioId:u.default.oneOfType([u.default.number,u.default.string]).isRequired,countryId:u.default.oneOfType([u.default.number,u.default.string]).isRequired,siteData:u.default.object,sitesItem:u.default.object,studies_by_site:u.default.array,metricsFilter:u.default.string.isRequired,milestonesFilter:u.default.string.isRequired,headerData:u.default.array.isRequired,hasSiteData:u.default.bool,setMetricsFilter:u.default.func.isRequired,setMilestonesFilter:u.default.func.isRequired,handleSiteAction:u.default.func.isRequired,isEditable:u.default.bool,currentIndication:u.default.string,currentStudy:u.default.array,otherStudies:u.default.array,dataType:u.default.string},F.defaultProps={hasSiteData:!1,siteData:{},studies_by_site:[],sitesItem:{},isEditable:!1,currentIndication:"-",currentStudy:[],otherStudies:[],dataType:"NONE"};var U=function(e,t){var a=t.params,n=a.scenarioId,r=a.id,i=a.countryId,o=a.siteId,s=(0,P.getStudyData)(e,t),u=(0,P.getScenarioData)(e,t),d=(0,P.getActiveCountry)(e,t),c=!!e.site[o],f=e.site[o],p=e.sites[n]&&e.sites[n][i]&&e.sites[n][i].find(function(e){return e.investigator_center_id===o}),m=(0,g.default)(d,"country_sites_approval_status.status",k.COUNTRY_SITE_APPROVAL_STATUS.NOT_READY_TO_LOCAL_MANAGE),h=(0,L.getSiteDataType)(p);return l({},(0,L.getFilteredStudies)(e,t),f,{sitesItem:p,hasSiteData:c,dataType:h,headerData:j((0,_.default)(s,["therapeutic_area","indication","state"]),d,l({},f,p)),studyId:+r,scenarioId:+n,countryId:+i,siteId:o,currentIndication:s.indication,metricsFilter:e.site.metricsFilter,milestonesFilter:e.site.milestonesFilter,isEditable:e.sites.editableCountriesIds&&e.sites.editableCountriesIds.includes(+i)&&m===k.COUNTRY_SITE_APPROVAL_STATUS.READY_TO_LOCAL_MANAGE&&(0,g.default)(u,"site_selection_required")})},V={getSite:x.getCountrySite,setMetricsFilter:x.setSiteMetricsFilter,setMilestonesFilter:x.setSiteMilestonesFilter,handleSiteAction:x.onSiteAction};t.default=(0,d.connect)(U,V)(F)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1114),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSiteDataType=t.getFilteredStudies=t.EMPTY_ARRAY=void 0;var n=a(43),r=a(11),l=function(e){return e&&e.__esModule?e:{default:e}}(r),i=a(48),o=t.EMPTY_ARRAY=[],s=function(e,t){return e.site[t.params.siteId]},u=(0,n.createSelector)(s,function(e){return(0,l.default)(e,"studies_by_site",o)}),d=(0,n.createSelector)(i.getStudyData,function(e){return e.study_id});t.getFilteredStudies=(0,n.createSelector)(u,d,function(e,t){return e.reduce(function(e,a){return a.study_id===t?e.currentStudy.push(a):e.otherStudies.push(a),e},{currentStudy:[],otherStudies:[]})}),t.getSiteDataType=function(e){if(!e)return"NONE";var t=(0,l.default)(e,"state.status");return e.is_recommended_by_FPO&&!t||"ADD"===t?"SELECTED":!e.is_recommended_by_FPO&&e.isInternal&&!t||"REMOVE"===t?"OTHER":!e.isInternal&&!t||"REMOVE"===t?"EXTERNAL":e.raw&&!t||"REMOVE"===t?"RAW":"NONE"}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=a(0),i=n(l),o=a(1),s=n(o),u=a(11),d=n(u),c=a(54),f=n(c),p=a(39),m=a(222),h=a(13),v=n(h),_=a(129),E=a(46),g=function(e){var t=e.scenarioStartDate,a=e.selectedSitesNum,n=e.selectedSitesAverageRR,o=e.saveOverridesData,s=e.hasChanges,u=e.saveData,c=(0,l.useContext)(m.CountryDataContext),h=(0,d.default)(c,"countryPlannedData",null),g=(0,l.useState)(!1),y=r(g,2),S=y[0],b=y[1],C=(0,l.useState)(!1),O=r(C,2),T=O[0],R=O[1],w=(0,l.useCallback)(function(){var e=[{countryName:(0,d.default)(h,"country_name"),fp:t,oldValue:(0,d.default)(h,"num_sites"),overrideId:(0,d.default)(h,"override_id"),regionName:(0,d.default)(h,"region_name"),values:[{num_sites:a},{randomisation_rate:n}]}];b(!1),o(e,c.studyId,c.scenarioId,!0)},[t,c,h,n,a,o]);return i.default.createElement("div",{style:{marginRight:"20px"}},i.default.createElement(v.default,{placement:"top",mouseEnterDelay:.3,overlay:i.default.createElement("div",null,"Align country parameters ",i.default.createElement("br",null)," with current site selection")},i.default.createElement("div",null,i.default.createElement(f.default,{label:"Align",onClick:function(){s?R(!0):b(!0)}}))),i.default.createElement(p.PopupDialog,{title:i.default.createElement("div",null,"Align country parameters with ",i.default.createElement("br",null)," current site selection"),className:"optimise-scenario-dialog",isShown:S,handleClose:function(){return b(!1)},buttons:[i.default.createElement(p.ActionButton,{className:"optimise-scenario-dialog__button-cancel",action:function(){return b(!1)}},E.CANCEL),i.default.createElement(p.ActionButton,{action:w,primary:!0},E.ALIGN_AUTOMATICALLY)]},i.default.createElement("div",{className:"optimise-content"},"Country sites number and randomization rate in scenario will be changed according to the number / performance of selected sites")),i.default.createElement(_.SaveChangesDialog,{isShown:T,onSubmit:u,actionType:"SAVE_OVERRIDES",callbackActions:[{type:"SAVE_OVERRIDES",action:w}],onClose:function(){return R(!1)}}))};g.defaultProps={scenarioStartDate:null,selectedSitesNum:0,selectedSitesAverageRR:0,hasUnsavedData:!0,hasChanges:!1},g.propTypes={scenarioStartDate:s.default.object,selectedSitesNum:s.default.number,selectedSitesAverageRR:s.default.number,saveOverridesData:s.default.func.isRequired,hasChanges:s.default.bool,saveData:s.default.func.isRequired},t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1117),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(11),c=n(d),f=a(84),p=n(f),m=a(65),h=n(m),v=a(2),_=n(v),E=a(50),g=n(E),y=a(22),S=a(6),b=a(499),C=n(b),O=a(873),T=n(O),R=a(859),w=n(R),A=a(1124),I=n(A),N=a(550),D=n(N),P=a(1144),L=n(P),M=a(1123),x=n(M),k=a(48),j=a(271),F=a(551),U=a(183),V=a(270),B=a(115),H=a(359),G=a(60),Y=n(G),q=a(131),z=a(46),W=a(14);a(2405);var K=a(17),X=n(K),Z=(0,p.default)(H.getHeaderData,g.default),J=function(e){var t=e.headerData,a=e.studyId,n=e.scenarioId,o=e.countryId,s=e.status,u=e.selectedSitesCount,d=e.otherSitesCount,c=e.rawSitesCount,f=e.multieditView,p=e.setMultieditView,m=e.onSubmitMultiedit,h=e.isEditable,v=e.loadingSites,E=e.rawTableExpanded,g=e.setRawTableExpanded,b=e.otherTableExpanded,O=e.setOtherTableExpanded,R=e.selectedTableExpanded,A=e.externalSitesCount,N=e.externalTableExpanded,P=e.setExternalTableExpanded,M=e.activePages,k=e.setSectionsActivePages,j=e.showNoAffectingAlert,F=e.otherFilteredSitesCount,U=e.externalFilteredSitesCount,V=e.rawFilteredSitesCount,G=(0,H.useIntersect)({threshold:1,rootMargin:"-50px 0px 0px 0px"}),Y=r(G,2),q=Y[0],W=Y[1],K=(0,H.useIntersect)({threshold:1,rootMargin:"-200px 0px 0px 0px"}),X=r(K,2),Z=X[0],J=X[1],Q=(0,H.useIntersect)({threshold:1,rootMargin:"-200px 0px 0px 0px"}),$=r(Q,2),ee=$[0],te=$[1],ae=(0,H.useIntersect)({threshold:1,rootMargin:"-200px 0px 0px 0px"}),ne=r(ae,2),re=ne[0],le=ne[1];return(0,l.useEffect)(function(){var e={};[{field:"OTHER",count:F},{field:"EXTERNAL",count:U},{field:"RAW",count:V}].forEach(function(t){Math.ceil(M[t.field]*B.PER_PAGE)>t.count&&(e[t.field]=0)}),Object.keys(e).length>0&&k(e)},[F,U,V,k,M]),i.default.createElement("div",{className:"country-sites-container"},i.default.createElement("div",{style:{top:"59px",width:"100%",position:"fixed",zIndex:8,background:"white",height:"126px",display:q.boundingClientRect&&q.boundingClientRect.top<=50?"block":"none"},className:"sites-table__subheader"},i.default.createElement(y.Grid,null,i.default.createElement(y.Row,null,i.default.createElement(y.Col,{offset:1,width:11},i.default.createElement("div",{className:"country-sites-table"},i.default.createElement(x.default,{active:q.boundingClientRect&&q.boundingClientRect.top<=50,rawSitesView:re.boundingClientRect&&re.boundingClientRect.top<=200,externalSitesView:ee.boundingClientRect&&ee.boundingClientRect.top<=200,otherSitesView:Z.boundingClientRect&&Z.boundingClientRect.top<=200,status:s,studyId:a,isEditable:h,scenarioId:n,countryId:o,dataType:"HEADER"})))))),i.default.createElement(y.Grid,null,i.default.createElement(y.Row,null,i.default.createElement(y.Col,{offset:1,width:11},i.default.createElement(C.default,{dataHeader:t},i.default.createElement(w.default,{params:{scenarioId:n,studyId:a,countryId:o}}),i.default.createElement(T.default,null)))),i.default.createElement(y.Row,null,i.default.createElement(y.Col,{offset:1,width:11},i.default.createElement("div",{ref:W}),i.default.createElement("div",{className:"country-sites-table"},i.default.createElement(x.default,{active:!q.boundingClientRect||q.boundingClientRect.top>50,otherSitesView:!Z.isIntersecting&&Z.boundingClientRect&&Z.boundingClientRect.top<=200,status:s,studyId:a,scenarioId:n,countryId:o,isEditable:h,collapsed:!R,dataType:"SELECTED"}),i.default.createElement(I.default,{otherSitesView:!Z.isIntersecting&&Z.boundingClientRect&&Z.boundingClientRect.top<=200,status:s,studyId:a,scenarioId:n,isEditable:h,countryId:o,collapsed:!R,dataType:"SELECTED"})))),j&&i.default.createElement(y.Row,null,i.default.createElement(y.Col,{offset:1,width:11},i.default.createElement("section",{className:(0,_.default)("country-sites-table__separator")},i.default.createElement("span",{className:"icon-text__wrapper",style:{display:"flex",alignItems:"center"}},i.default.createElement("span",{className:"icon__wrapper warning",style:{height:"22px",width:"22px"}},S.Icons.WARNING),i.default.createElement("span",{className:"text__wrapper"},"Approved (Prev.Approved) scenario cannot be aligned with site selection changes"))))),u>0?i.default.createElement(L.default,{loadingSites:v,studyId:a,scenarioId:n,countryId:o}):null,i.default.createElement(y.Row,null,i.default.createElement(y.Col,{offset:1,width:11,className:"raw-table__wrapper"},i.default.createElement("h3",{className:"raw-table__control-wrapper",onClick:function(){return O()}},i.default.createElement("span",{className:(0,_.default)("raw-table__control",{expand:b})},S.Icons.CHEVRON_DOWN),i.default.createElement("span",null,z.VIEW_NOT_SELECTED_SITES," (",d,")")),i.default.createElement("span",{className:(0,_.default)("sites-multiedit-panel__toggle",{hidden:!h||0===d||u<15}),onClick:function(){return p(n,o,"OTHER")}},S.Icons.MULTIPLE_EDIT),i.default.createElement("div",{ref:J}),i.default.createElement("div",{className:(0,_.default)("country-sites-table",{hidden:!b})},i.default.createElement(I.default,{status:s,studyId:a,isEditable:h,scenarioId:n,countryId:o,dataType:"OTHER"})))),i.default.createElement(y.Row,null,i.default.createElement(y.Col,{offset:1,width:11,className:"raw-table__wrapper"},i.default.createElement("h3",{className:"raw-table__control-wrapper",onClick:function(){return P()}},i.default.createElement("span",{className:(0,_.default)("raw-table__control",{expand:N})},S.Icons.CHEVRON_DOWN),i.default.createElement("span",null,z.VIEW_EXTERNAL_SITES," ",A>0&&"(top "+A+")")),i.default.createElement("span",{className:(0,_.default)("sites-multiedit-panel__toggle",{hidden:!h||0===A||u<15}),onClick:function(){return p(n,o,"OTHER")}},S.Icons.MULTIPLE_EDIT),i.default.createElement("div",{ref:te}),i.default.createElement("div",{className:(0,_.default)("country-sites-table",{hidden:!N})},i.default.createElement(I.default,{status:s,studyId:a,isEditable:h,scenarioId:n,countryId:o,dataType:"EXTERNAL"})))),i.default.createElement(y.Row,null,i.default.createElement(y.Col,{offset:1,width:11,className:"raw-table__wrapper"},i.default.createElement("h3",{className:"raw-table__control-wrapper",onClick:function(){return g()}},i.default.createElement("span",{className:(0,_.default)("raw-table__control",{expand:E})},S.Icons.CHEVRON_DOWN),i.default.createElement("span",null,z.VIEW_RAW_SITES," ",c>0&&"(first "+c+" from unranked list)")),i.default.createElement("span",{className:(0,_.default)("sites-multiedit-panel__toggle",{hidden:!h||0===c||u<15}),onClick:function(){return p(n,o,"RAW")}},S.Icons.MULTIPLE_EDIT),i.default.createElement("div",{ref:le},i.default.createElement("div",{className:(0,_.default)("country-sites-table",{hidden:!E})},i.default.createElement(I.default,{status:s,studyId:a,isEditable:h,scenarioId:n,countryId:o,dataType:"RAW"})))))),i.default.createElement(D.default,{dataType:f,setMultieditView:function(e){return p(n,o,e)},onSubmit:function(e,t){m(n,o,e,t)}}),i.default.createElement("div",{style:{paddingBottom:"300px"}}))},Q=function(e,t){var a=t.params,n=a.scenarioId,r=a.id,l=a.countryId,i=(0,k.getStudyData)(e,t),o=(0,k.getScenarioData)(e,t),s=(0,k.getActiveCountry)(e,t),u=(0,c.default)(s,"country_sites_approval_status.status",q.COUNTRY_SITE_APPROVAL_STATUS.NOT_READY_TO_LOCAL_MANAGE),d=(0,c.default)(o,"status");return{status:u,headerData:Z((0,h.default)(i,["therapeutic_area","indication","state"]),(0,h.default)(s,["country_sites_approval_status","actual_num_sites","actual_sites_enrolling","patient_allocation","actual_patient_allocation"])),studyId:+r,scenarioId:+n,countryId:+l,hasScenarioData:!!o,selectedSitesCount:(0,U.getSelectedSitesCount)(e,t.params),otherSitesCount:(0,j.getOtherSitesCount)(e,t.params),otherFilteredSitesCount:(0,j.getOtherFilteredSitesCount)(e,t.params),externalFilteredSitesCount:(0,V.getExternalFilteredSitesCount)(e,t.params),rawFilteredSitesCount:(0,F.getRawFilteredSitesCount)(e,t.params),rawSitesCount:(0,F.getRawSitesCount)(e,t.params),externalSitesCount:(0,V.getExternalSitesCount)(e,t.params),multieditView:e.sites.multieditView,isEditable:e.sites.editableCountriesIds&&e.sites.editableCountriesIds.includes(+l)&&u===q.COUNTRY_SITE_APPROVAL_STATUS.READY_TO_LOCAL_MANAGE&&(0,c.default)(o,"site_selection_required")&&i.state.status!==X.default.COMPLETED,loadingSites:e.sites.loadingSites,rawTableExpanded:e.sites.rawTableExpanded,otherTableExpanded:e.sites.otherTableExpanded,selectedTableExpanded:e.sites.selectedTableExpanded,externalTableExpanded:e.sites.externalTableExpanded,activePages:e.sites.activePages,showNoAffectingAlert:d===W.SCENARIO_STATUS.APPROVED||d===W.SCENARIO_STATUS.PREV_APPROVED}},$={getSites:Y.default,getCountryManagerDetails:G.getCountryManager,setMultieditView:G.setSitesMultieditView,onSubmitMultiedit:G.onSubmitMultieditAction,setRawTableExpanded:G.setRawTableState,setOtherTableExpanded:G.setOtherTableState,setExternalTableExpanded:G.setExternalTableState,setSectionsActivePages:G.setActivePages};J.defaultProps={hasScenarioData:!1,countrySitesManager:null,otherSitesCount:0,rawSitesCount:0,multieditView:"NONE",isEditable:!1,selectedSitesCount:0,loadingSites:!1,rawTableExpanded:!1,otherTableExpanded:!0,selectedTableExpanded:!0,externalSitesCount:0,externalTableExpanded:!0,showNoAffectingAlert:!1,otherFilteredSitesCount:0,externalFilteredSitesCount:0,rawFilteredSitesCount:0},J.propTypes={headerData:s.default.array.isRequired,studyId:s.default.oneOfType([s.default.number,s.default.string]).isRequired,scenarioId:s.default.oneOfType([s.default.number,s.default.string]).isRequired,countryId:s.default.oneOfType([s.default.number,s.default.string]).isRequired,status:s.default.string.isRequired,otherSitesCount:s.default.number,rawSitesCount:s.default.number,multieditView:s.default.string,setMultieditView:s.default.func.isRequired,onSubmitMultiedit:s.default.func.isRequired,isEditable:s.default.bool,selectedSitesCount:s.default.number,loadingSites:s.default.bool,rawTableExpanded:s.default.bool,setRawTableExpanded:s.default.func.isRequired,otherTableExpanded:s.default.bool,setOtherTableExpanded:s.default.func.isRequired,selectedTableExpanded:s.default.bool,externalSitesCount:s.default.number,externalTableExpanded:s.default.bool,setExternalTableExpanded:s.default.func.isRequired,activePages:s.default.object.isRequired,setSectionsActivePages:s.default.func.isRequired,showNoAffectingAlert:s.default.bool,otherFilteredSitesCount:s.default.number,externalFilteredSitesCount:s.default.number,rawFilteredSitesCount:s.default.number},t.default=(0,u.connect)(Q,$)(J)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),o=n(i),s=a(1),u=n(s),d=a(2),c=n(d),f=a(8),p=a(54),m=n(p),h=a(263),v=n(h),_=a(46),E={ADD:_.ADD,REMOVE:_.REMOVE},g=function(){},y=function(e){var t=e.status,a=e.reason,n=e.setReason,i=e.handleCancel,s=e.handleSubmit,u=e.reasons,d={};u.filter(function(e){return e.action===t&&e.is_active}).forEach(function(e){var t=d[e.group_name];t?t.items=l({},t.items,r({},e.id,e.text)):d[e.group_name]={title:e.group_name,items:r({},e.id,e.text)}});var f=Object.keys(d).map(function(e){var t=d[e],r=Object.keys(t.items).map(function(e){return o.default.createElement("div",{key:e,className:(0,c.default)("reasons-list-item",{active:a===e}),onClick:function(){return n(e)}},o.default.createElement(v.default,{checked:a===e,value:e,onChange:g,name:"reason",label:""}),o.default.createElement("div",{className:"reasons-list-item__label"},t.items[e]))});return o.default.createElement("div",{key:t.title},o.default.createElement("h4",null,t.title,":"),o.default.createElement("div",null,r))});return o.default.createElement(o.default.Fragment,null,o.default.createElement("h3",null,"Set reason to "+E[t].toLowerCase()),o.default.createElement("div",{className:"action-cell-popup-menu__options",onScroll:function(e){return e.stopPropagation()}},f),o.default.createElement("div",{className:"action-cell-popup-menu__control"},o.default.createElement(m.default,{label:_.CANCEL,type:"transparent",onClick:i}),o.default.createElement(m.default,{label:E[t],type:"primary",onClick:s,disabled:!a})))},S=function(e){return{reasons:e.sites.siteEditReasons}};y.defaultProps={status:"REMOVE",reason:null,tab:1,reasons:[]},y.propTypes={status:u.default.string,reason:u.default.string,setReason:u.default.func.isRequired,handleCancel:u.default.func.isRequired,handleSubmit:u.default.func.isRequired,reasons:u.default.array},t.default=(0,f.connect)(S)(y)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(12),c=a(543),f=n(c),p=function(e){var t=e.rowIndex,a=e.data,n=e.onSubmit,r=e.isEditable,i=e.dataType,o=a[t];return l.default.createElement(d.CellGroup,{direction:"row",className:"data-group"},l.default.createElement(d.Cell,{overflow:!0,width:32,className:(0,u.default)("value-cell action-cell",{disabled:!r})},l.default.createElement(f.default,{dataType:i,isEditable:r,onSubmit:n,rowData:o})))};p.defaultProps={rowIndex:-1,isEditable:!1},p.propTypes={rowIndex:o.default.number,data:o.default.array.isRequired,onSubmit:o.default.func.isRequired,isEditable:o.default.bool,dataType:o.default.string.isRequired},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(12),u=a(6),d=function(e){var t=e.setMultieditView,a=e.dataType,n=e.selectedSitesCount;return l.default.createElement(s.CellGroup,null,l.default.createElement(s.Cell,{className:"cell-caption"},l.default.createElement("h3",null,"")),l.default.createElement(s.CellGroup,{direction:"row",className:"header-group"},l.default.createElement(s.Cell,{className:"header-cell"},"")),l.default.createElement(s.CellGroup,{direction:"row",className:"header-group header-group-narrow"},"HEADER"!==a&&l.default.createElement("span",{style:{marginLeft:"auto",marginRight:"auto",cursor:"pointer",display:n>=15?"block":"none"},onClick:function(){return t("SELECTED")}},u.Icons.MULTIPLE_EDIT)))};d.defaultProps={selectedSitesCount:0},d.propTypes={setMultieditView:o.default.func.isRequired,dataType:o.default.oneOf(["SELECTED","OTHER","RAW","HEADER"]).isRequired,selectedSitesCount:o.default.number},t.default=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(8),u=a(12),d=a(544),c=n(d),f=a(549),p=a(542),m=a(1131),h=n(m),v=a(1135),_=n(v),E=a(60),g=a(183),y=a(114),S=a(131);a(800);var b=function(e){var t=e.scenarioId,a=e.countryId,n=e.selectedSitesCount,r=e.studiesFilter,i=e.metricsFilter,o=e.sortData,s=e.setStudiesFilterValue,d=e.setMetricsFilterValue,m=e.handleSortAction,v=e.tableView,E=e.toggleTableView,g=e.dataType,y=e.showInitialSelection,S=e.isEditable,b=e.otherSitesView,C=e.rawSitesView,O=e.externalSitesView,T=e.multieditView,R=e.setMultieditView,w=e.onSelectAllSites,A=e.viewForecastAsDecile,I=e.toggleViewForecastAsDecile,N=e.active;return l.default.createElement(u.FlexTable,{rowsCount:0,rowHeight:48,collapsedBody:!0,headerHeight:139},l.default.createElement(c.default,{dataType:"HEADER",onSelectAll:function(e,n){return w(t,a,e,n)},multieditView:T===g,showInitialSelection:y,data:[],className:"sites-row",onRowClick:function(){}},l.default.createElement(u.Column,{className:"sites-column",overflow:!0,header:l.default.createElement(f.SitesHeaderCell,{active:N,otherSitesView:b,rawSitesView:C,externalSitesView:O,scenarioId:t,countryId:a,selectedSitesCount:n,sortData:o,handleSort:function(e,n){return m(e,n,a,t)}}),data:l.default.createElement("div",null),width:400}),(0,h.default)({scenarioId:t,countryId:a,sites:[],studiesFilter:r,metricsFilter:i,sortData:o,setStudiesFilterValue:s,setMetricsFilterValue:d,handleSortAction:m,tableView:v,toggleTableView:E,dataType:g,viewForecastAsDecile:A,toggleViewForecastAsDecile:I}),l.default.createElement(u.Column,{hidden:!0,className:"sites-column",overflow:!0,header:l.default.createElement(_.default,null),data:l.default.createElement("div",null),fixedWidth:!0,width:64}),l.default.createElement(u.Column,{hidden:!S,className:"sites-column",overflow:!0,header:l.default.createElement(p.ActionHeaderCell,{dataType:g,selectedSitesCount:n,setMultieditView:function(e){return R(t,a,e)}}),data:l.default.createElement("div",null),fixedWidth:!0,width:32})))},C=function(e,t){return{studiesFilter:e.sites.studiesFilter,metricsFilter:e.sites.metricsFilter,sortData:e.sites.sortData,tableView:e.sites.tableView,selectedSitesCount:(0,g.getSelectedSitesCount)(e,t),showInitialSelection:e.sites.showInitialSelection,isEditable:e.sites.editableCountriesIds&&e.sites.editableCountriesIds.includes(t.countryId)&&t.status===S.COUNTRY_SITE_APPROVAL_STATUS.READY_TO_LOCAL_MANAGE&&t.isEditable,multieditView:e.sites.multieditView,viewForecastAsDecile:e.sites.viewForecastAsDecile,hasSelectedSitesWithoutRR:(0,g.getSelectedSitesWithoutRR)(e,t)>0,hasSelectedSitesWithRROverrides:(0,g.getSelectedSitesWithRROverride)(e,t)>0}},O={setStudiesFilterValue:E.setStudiesFilter,setMetricsFilterValue:E.setMetricsFilter,handleSortAction:E.sortData,toggleTableView:E.toggleTableViewMode,setMultieditView:E.setSitesMultieditView,onSelectAllSites:E.onSelectAllSitesAction,toggleViewForecastAsDecile:E.toggleViewForecastAsDecileAction};b.defaultProps={selectedSitesCount:0,tableView:y.TABLE_VIEW.HISTORICAL,dataType:"SELECTED",isEditable:!1,otherSitesView:!1,externalSitesView:!1,rawSitesView:!1,viewForecastAsDecile:!0,hasSelectedSitesWithoutRR:!1,hasSelectedSitesWithRROverrides:!1,active:!1},b.propTypes={scenarioId:o.default.oneOfType([o.default.string,o.default.number]).isRequired,countryId:o.default.oneOfType([o.default.string,o.default.number]).isRequired,selectedSitesCount:o.default.number,studiesFilter:o.default.string.isRequired,metricsFilter:o.default.string.isRequired,sortData:o.default.object.isRequired,setStudiesFilterValue:o.default.func.isRequired,setMetricsFilterValue:o.default.func.isRequired,handleSortAction:o.default.func.isRequired,tableView:o.default.string,toggleTableView:o.default.func.isRequired,dataType:o.default.string,showInitialSelection:o.default.bool.isRequired,isEditable:o.default.bool,otherSitesView:o.default.bool,rawSitesView:o.default.bool,externalSitesView:o.default.bool,multieditView:o.default.oneOf(["SELECTED","OTHER","RAW","NONE"]).isRequired,setMultieditView:o.default.func.isRequired,onSelectAllSites:o.default.func.isRequired,viewForecastAsDecile:o.default.bool,toggleViewForecastAsDecile:o.default.func.isRequired,active:o.default.bool},t.default=(0,s.connect)(C,O)(b)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(8),u=a(18),d=a(11),c=n(d),f=a(2),p=n(f),m=a(2043),h=n(m),v=a(12),_=a(544),E=n(_),g=a(549),y=a(542),S=a(546),b=n(S),C=a(1127),O=n(C),T=a(1134),R=n(T),w=a(1146),A=n(w),I=a(1137),N=n(I),D=a(60),P=a(115),L=a(48),M=a(271),x=a(551),k=a(270),j=a(183),F=a(114),U=a(131);a(800);var V=a(46),B=function(e){var t=e.studyId,a=e.scenarioId,n=e.countryId,r=e.sites,i=e.studiesFilter,o=e.metricsFilter,s=e.navigateToSite,u=e.tableView,d=e.dataType,f=e.handleSiteAction,m=e.showInitialSelection,_=e.isEditable,S=e.multieditView,C=e.onSelectAllSites,T=e.onMultiSelect,w=e.reasons,I=e.updateValue,D=e.viewForecastAsDecile,P=e.collapsed,L=e.loadingSites,M=e.setActivePage,x=e.pagesCount,k=e.activePage,j=void 0;switch(d){case"OTHER":j=V.OTHER_INTERNAL_SITES_EXP;break;case"EXTERNAL":j=V.OTHER_NEW_SITES_EXP;break;case"RAW":j=V.OTHER_SITES_EXP;break;case"SELECTED":j="";break;default:j=null}return L?l.default.createElement(A.default,null):l.default.createElement(l.default.Fragment,null,("SELECTED"!==d||!r.length)&&l.default.createElement("section",{className:(0,p.default)("country-sites-table__separator",{expanded:!r.length&&"SELECTED"!==d})},l.default.createElement("div",{className:"country-sites-table__separator-row-wrapper"},l.default.createElement("div",null,j),("EXTERNAL"===d||"RAW"===d)&&l.default.createElement(N.default,{studyId:t,scenarioId:a,dataType:d,countryId:n})),!r.length&&l.default.createElement("div",{className:"country-sites__no-data-info"},"No sites were found")),l.default.createElement(v.FlexTable,{rowsCount:r.length,rowHeight:48,collapsedBody:P,headerHeight:0},l.default.createElement(E.default,{dataType:d,onSelectAll:function(e,t){return C(a,n,e,t)},multieditAction:"OTHER"===d||"RAW"===d?"add":"remove",multieditView:S===d,showInitialSelection:m,data:r,className:"sites-row",onRowClick:function(e,l){s(t,a,n,(0,c.default)(r[l],"investigator_center_id"))}},l.default.createElement(v.Column,{className:"sites-column",overflow:!0,header:l.default.createElement(b.default,null),data:l.default.createElement(g.SitesDataCell,{dataType:d,data:r,reasons:w,onMultiSelect:function(e){return T(a,n,e)},multieditView:S===d,cellClickHandler:function(e,t){return s(r[t])}}),width:400}),(0,O.default)({sites:r,studiesFilter:i,metricsFilter:o,tableView:u,viewForecastAsDecile:D}),l.default.createElement(v.Column,{hidden:!0,className:"sites-column",overflow:!0,header:l.default.createElement(b.default,null),data:l.default.createElement(R.default,{onUpdateValue:function(e,t,r){return I(a,n,e,t,r)},showInputs:"SELECTED"===d,isEditable:_,data:r}),fixedWidth:!0,width:64}),l.default.createElement(v.Column,{hidden:!_,className:"sites-column",overflow:!0,header:l.default.createElement(b.default,null),data:l.default.createElement(y.ActionDataCell,{dataType:d,isEditable:_,onSubmit:function(e,t,r){f(a,n,t,e,r)},data:r}),fixedWidth:!0,width:32}))),"SELECTED"!==d&&!!r.length&&x>1&&l.default.createElement("span",{className:"pagination__wrapper"},l.default.createElement(h.default,{previousLabel:"Previous page",nextLabel:"Next page",breakLabel:"...",initialPage:k,disableInitialCallback:!0,breakClassName:"break-me",pageCount:x,marginPagesDisplayed:1,pageRangeDisplayed:3,onPageChange:function(e){var t=e.selected;M(d,t)},previousClassName:"pagination__prev",nextClassName:"pagination__next",containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"})))},H=function(e,t){var a=t.dataType,n=(0,L.getScenarioData)(e,{params:{id:t.studyId,scenarioId:t.scenarioId}}),r=void 0,l=void 0;switch(a){case"SELECTED":r=j.getSelectedFilteredSites,l=j.getSelectedSitesPages;break;case"OTHER":r=M.getOtherFilteredSitesPaginated,l=M.getOtherSitesPages;break;case"EXTERNAL":r=k.getExternalFilteredSitesPaginated,l=k.getExternalSitesPages;break;case"RAW":r=x.getRawFilteredSitesPaginated,l=x.getRawSitesPages;break;default:r=null}return{studyId:t.studyId,studiesFilter:e.sites.studiesFilter,metricsFilter:e.sites.metricsFilter,sortData:e.sites.sortData,tableView:e.sites.tableView,sites:null!==r?r(e,t):P.EMPTY_SITES,showInitialSelection:e.sites.showInitialSelection,isEditable:e.sites.editableCountriesIds&&e.sites.editableCountriesIds.includes(t.countryId)&&t.status===U.COUNTRY_SITE_APPROVAL_STATUS.READY_TO_LOCAL_MANAGE&&(0,c.default)(n,"site_selection_required")&&t.isEditable,multieditView:e.sites.multieditView,reasons:e.sites.siteEditReasons,viewForecastAsDecile:e.sites.viewForecastAsDecile,hasSelectedSitesWithoutRR:(0,j.getSelectedSitesWithoutRR)(e,t)>0,hasSelectedSitesWithRROverrides:(0,j.getSelectedSitesWithRROverride)(e,t)>0,loadingSites:e.sites.loadingSites,pagesCount:l(e,t),activePage:e.sites.activePages[a]}},G={handleSiteAction:D.onSiteAction,navigateToSite:function(e,t,a,n){return(0,u.push)("/studies/"+e+"/scenarios/"+t+"/sites/"+a+"/site/"+n)},onSelectAllSites:D.onSelectAllSitesAction,onMultiSelect:D.onSelectSiteAction,updateValue:D.updateSiteValue,setActivePage:D.setActiveSitesPage};B.defaultProps={tableView:F.TABLE_VIEW.HISTORICAL,dataType:"SELECTED",isEditable:!1,otherSitesView:!1,rawSitesView:!1,reasons:[],updateValue:void 0,viewForecastAsDecile:!0,hasSelectedSitesWithoutRR:!1,hasSelectedSitesWithRROverrides:!1,collapsed:!1,loadingSites:!1,pagesCount:0,activePage:0},B.propTypes={studyId:o.default.oneOfType([o.default.string,o.default.number]).isRequired,scenarioId:o.default.oneOfType([o.default.string,o.default.number]).isRequired,countryId:o.default.oneOfType([o.default.string,o.default.number]).isRequired,sites:o.default.array.isRequired,studiesFilter:o.default.string.isRequired,metricsFilter:o.default.string.isRequired,navigateToSite:o.default.func.isRequired,tableView:o.default.string,handleSiteAction:o.default.func.isRequired,dataType:o.default.string,showInitialSelection:o.default.bool.isRequired,isEditable:o.default.bool,multieditView:o.default.oneOf(["SELECTED","OTHER","EXTERNAL","RAW","NONE"]).isRequired,onSelectAllSites:o.default.func.isRequired,onMultiSelect:o.default.func.isRequired,reasons:o.default.array,updateValue:o.default.func,viewForecastAsDecile:o.default.bool,collapsed:o.default.bool,loadingSites:o.default.bool,setActivePage:o.default.func.isRequired,pagesCount:o.default.number,activePage:o.default.number},t.default=(0,s.connect)(H,G)(B)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(11),u=n(s),d=a(12),c=a(63),f=function(e){var t=e.rowIndex,a=e.data,n=(0,u.default)(a[t],"studyLevelData",{})||{};return l.default.createElement(d.CellGroup,{direction:"row",className:"historical-data"},l.default.createElement(d.CellGroup,{width:74,direction:"row",className:"data-group"},l.default.createElement(d.Cell,{width:32,className:"value-cell"},l.default.createElement("div",null,n.target_patients)),l.default.createElement(d.Cell,{width:32,className:"value-cell"},l.default.createElement("div",null,n.randomized_patients))),l.default.createElement(d.CellGroup,{direction:"row",width:138,className:"data-group"},l.default.createElement(d.Cell,{width:32,className:"value-cell"},l.default.createElement("div",null,(0,c.getFormattedDate)(n.siv))),l.default.createElement(d.Cell,{width:32,className:"value-cell"},l.default.createElement("div",null,(0,c.getFormattedDate)(n.fpfv))),l.default.createElement(d.Cell,{width:32,className:"value-cell"},l.default.createElement("div",null,(0,c.getFormattedDate)(n.lpfv)))))};f.defaultProps={rowIndex:-1},f.propTypes={rowIndex:o.default.number,data:o.default.array.isRequired},t.default=f},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(12),c=a(6),f=a(114),p=function(e){var t=e.sortData,a=e.handleSort,n=e.toggleTableView;return l.default.createElement(d.CellGroup,null,l.default.createElement(d.Cell,{className:"cell-caption"},l.default.createElement("h3",null,l.default.createElement("span",{className:"toggle-active",onClick:function(){return n(f.TABLE_VIEW.CURRENT)}},"Current study"),l.default.createElement("span",null,"/"),l.default.createElement("span",{className:"toggle",onClick:function(){return n(f.TABLE_VIEW.HISTORICAL)}},"Historical"),l.default.createElement("span",null,"/"),l.default.createElement("span",{className:"toggle",onClick:function(){return n(f.TABLE_VIEW.FORECAST)}},"Forecast"))),l.default.createElement(d.CellGroup,{direction:"row",className:"header-group"},l.default.createElement(d.Cell,{width:74,className:"header-cell"},l.default.createElement("div",null,"Patients")),l.default.createElement(d.Cell,{width:138,className:"header-cell"},l.default.createElement("div",null,"Milestones"))),l.default.createElement(d.CellGroup,{direction:"row",className:"header-group header-group-narrow"},l.default.createElement(d.CellGroup,{width:74,direction:"row",className:"header-group"},l.default.createElement(d.Cell,{className:"header-cell-category",width:32},l.default.createElement(d.SortHeaderCell,{sortDir:t.direction,onSortChange:a,sortKey:"target_patients"},l.default.createElement("div",{className:(0,u.default)("align-left",{active:"target_patients"===t.active})},"Target"),a?l.default.createElement("div",{className:"sort-direction"},"ASC"===t.direction?c.Icons.FILTER_DESCENDING:c.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"}))),l.default.createElement(d.Cell,{className:"header-cell-category",width:32},l.default.createElement(d.SortHeaderCell,{sortDir:t.direction,onSortChange:a,sortKey:"randomized_patients"},l.default.createElement("div",{className:(0,u.default)("align-left",{active:"randomized_patients"===t.active})},"Actual"),a?l.default.createElement("div",{className:"sort-direction"},"ASC"===t.direction?c.Icons.FILTER_DESCENDING:c.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"})))),l.default.createElement(d.CellGroup,{width:138,direction:"row",className:"header-group"},l.default.createElement(d.Cell,{className:"header-cell-category",width:32},l.default.createElement(d.SortHeaderCell,{sortDir:t.direction,onSortChange:a,sortKey:"siv"},l.default.createElement("div",{className:(0,u.default)("align-left",{active:"siv"===t.active})},"SIV"),a?l.default.createElement("div",{className:"sort-direction"},"ASC"===t.direction?c.Icons.FILTER_DESCENDING:c.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"}))),l.default.createElement(d.Cell,{className:"header-cell-category",width:32},l.default.createElement(d.SortHeaderCell,{sortDir:t.direction,onSortChange:a,sortKey:"fpfv"},l.default.createElement("div",{className:(0,u.default)("align-left",{active:"fpfv"===t.active})},"FPFV"),a?l.default.createElement("div",{className:"sort-direction"},"ASC"===t.direction?c.Icons.FILTER_DESCENDING:c.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"}))),l.default.createElement(d.Cell,{className:"header-cell-category",width:32},l.default.createElement(d.SortHeaderCell,{sortDir:t.direction,onSortChange:a,sortKey:"lpfv"},l.default.createElement("div",{className:(0,u.default)("align-left",{active:"lpfv"===t.active})},"LPFV"),a?l.default.createElement("div",{className:"sort-direction"},"ASC"===t.direction?c.Icons.FILTER_DESCENDING:c.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"}))))))};p.propTypes={handleSort:o.default.func.isRequired,sortData:o.default.object.isRequired,toggleTableView:o.default.func.isRequired},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(12),u=a(548),d=a(546),c=n(d),f=a(547),p=a(545),m=a(114),h=function(e){var t=e.sites,a=e.studiesFilter,n=e.metricsFilter,r=e.tableView,i=e.viewForecastAsDecile,o=void 0;switch(r){case m.TABLE_VIEW.HISTORICAL:o=l.default.createElement(s.Column,{className:"sites-column",overflow:!0,header:l.default.createElement(c.default,null),data:l.default.createElement(u.HistoricalDataCell,{studiesFilter:a,metricsFilter:n,data:t}),width:600});break;case m.TABLE_VIEW.FORECAST:o=l.default.createElement(s.Column,{className:"sites-column",overflow:!0,header:l.default.createElement(c.default,null),data:l.default.createElement(f.ForecastedDataCell,{decileView:i,data:t}),width:600});break;case m.TABLE_VIEW.CURRENT:default:o=l.default.createElement(s.Column,{className:"sites-column",overflow:!0,header:l.default.createElement(c.default,null),data:l.default.createElement(p.CurrentStudyDataCell,{data:t}),width:600})}return o};h.defaultProps={selectedSitesCount:0,tableView:m.TABLE_VIEW.HISTORICAL,dataType:"SELECTED",isEditable:!1,otherSitesView:!1,rawSitesView:!1,reasons:[],viewForecastAsDecile:!0},h.propTypes={sites:o.default.array.isRequired,studiesFilter:o.default.string.isRequired,metricsFilter:o.default.string.isRequired,setStudiesFilterValue:o.default.func.isRequired,setMetricsFilterValue:o.default.func.isRequired,handleSortAction:o.default.func.isRequired,tableView:o.default.string,toggleTableView:o.default.func.isRequired,dataType:o.default.string,updateValue:o.default.func.isRequired,viewForecastAsDecile:o.default.bool,toggleViewForecastAsDecile:o.default.func.isRequired},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s);a(2402);var d=function(e){var t=e.value,a=0,n=void 0;switch(t){case"LOW":a=1,n="Low";break;case"MEDIUM":a=2,n="Medium";break;case"HIGH":a=3,n="High";break;default:a=0,n="N/A"}return l.default.createElement("div",{className:"confidence-indicator__wrapper"},l.default.createElement("span",{className:(0,u.default)("confidence-indicator",{active:a>0})}),l.default.createElement("span",{className:(0,u.default)("confidence-indicator",{active:a>1})}),l.default.createElement("span",{className:(0,u.default)("confidence-indicator",{active:a>2})}),l.default.createElement("span",{className:"confidence-indicator__label"},n))};d.defaultProps={value:"MEDIUM"},d.propTypes={value:o.default.string},t.default=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(12),u=a(1128),d=n(u),c=function(e){var t=e.rowIndex,a=e.data,n=e.decileView,r=a[t],i=null!==r.forecast_screen_failure_rate?Math.round(100*r.forecast_screen_failure_rate)+"%":"",o=null!==r.forecast_default_probability?Math.round(100*r.forecast_default_probability)+"%":"",u=null!==r.forecast_siv_fpfv?Math.round(r.forecast_siv_fpfv)+"w":"",c=null!==r.forecast_randomization_rate?(+r.forecast_randomization_rate).toFixed(2):"",f=r.decile_siv_fpfv,p=r.decile_randomization_rate,m=r.decile_screen_failure_rate,h=r.decile_default_probability_rate;return l.default.createElement(s.CellGroup,{direction:"row",className:"data-group"},l.default.createElement(s.Cell,{width:64,className:"value-cell align--right"},l.default.createElement("div",null,n?f:u)),l.default.createElement(s.Cell,{width:32,className:"value-cell"},l.default.createElement("div",null,n?p:c)),l.default.createElement(s.Cell,{width:35,className:"value-cell"},l.default.createElement("div",null,n?m:i)),l.default.createElement(s.Cell,{width:36,className:"value-cell"},l.default.createElement("div",null,n?h:o)),l.default.createElement(s.Cell,{width:44,className:"value-cell"},l.default.createElement(d.default,{value:r.forecast_confidence_score})))};c.defaultProps={rowIndex:-1,decileView:!0},c.propTypes={rowIndex:o.default.number,data:o.default.array.isRequired,decileView:o.default.bool},t.default=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(12),c=a(6),f=a(13),p=n(f),m=a(114),h=a(222),v=function(e){var t=e.sortData,a=e.handleSort,n=e.toggleTableView,i=e.decileView,o=e.toggleViewForecastAsDecile,s=(0,r.useContext)(h.CountryDataContext),f=s.hasSitesWithTrackingData;return l.default.createElement(d.CellGroup,null,l.default.createElement(d.Cell,{className:"cell-caption"},l.default.createElement("h3",null,l.default.createElement("span",{className:(0,u.default)("toggle",{disabled:!f}),onClick:function(){return n(m.TABLE_VIEW.CURRENT)}},"Current study"),l.default.createElement("span",null,"/"),l.default.createElement("span",{className:"toggle",onClick:function(){return n(m.TABLE_VIEW.HISTORICAL)}},"Historical"),l.default.createElement("span",null,"/"),l.default.createElement("span",{className:"toggle-active",onClick:function(e){e.shiftKey&&o(),n(m.TABLE_VIEW.FORECAST)}},"Forecast"))),l.default.createElement(d.CellGroup,{direction:"row",className:"header-group"},l.default.createElement(d.Cell,{className:"header-cell"},l.default.createElement("div",null,"Enrollment rates"))),l.default.createElement(d.CellGroup,{direction:"row",className:"header-group header-group-narrow"},l.default.createElement(d.Cell,{width:64,className:"header-cell-category"},l.default.createElement(d.SortHeaderCell,{sortDir:t.direction,onSortChange:a,sortKey:"forecast_siv_fpfv"},l.default.createElement("div",{className:(0,u.default)("align-left",{active:"forecast_siv_fpfv"===t.active})},"SIV-FPFV ",i&&"(decile)"),a?l.default.createElement("div",{className:"sort-direction"},"ASC"===t.direction?c.Icons.FILTER_DESCENDING:c.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"}))),l.default.createElement(d.Cell,{width:32,className:"header-cell-category"},l.default.createElement(d.SortHeaderCell,{sortDir:t.direction,onSortChange:a,sortKey:"forecast_randomization_rate"},l.default.createElement(p.default,{align:{offset:[0,0]},overlay:"patients/site/month"},l.default.createElement("div",null,l.default.createElement("div",{className:(0,u.default)("align-left",{active:"forecast_randomization_rate"===t.active})},"RR ",i&&"(decile)"),a?l.default.createElement("div",{className:"sort-direction"},"ASC"===t.direction?c.Icons.FILTER_DESCENDING:c.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"}))))),l.default.createElement(d.Cell,{width:35,className:"header-cell-category"},l.default.createElement(d.SortHeaderCell,{sortDir:t.direction,onSortChange:a,sortKey:"forecast_screen_failure_rate"},l.default.createElement(p.default,{align:{offset:[0,0]},overlay:"Screening failure rate"},l.default.createElement("div",null,l.default.createElement("div",{className:(0,u.default)("align-left",{active:"forecast_screen_failure_rate"===t.active})},"SF% ",i&&"(decile)"),a?l.default.createElement("div",{className:"sort-direction"},"ASC"===t.direction?c.Icons.FILTER_DESCENDING:c.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"}))))),l.default.createElement(d.Cell,{width:36,className:"header-cell-category"},l.default.createElement(d.SortHeaderCell,{sortDir:t.direction,onSortChange:a,sortKey:"forecast_default_probability"},l.default.createElement(p.default,{align:{offset:[0,0]},overlay:"Default Probability"},l.default.createElement("div",null,l.default.createElement("div",{className:(0,u.default)("align-left",{active:"forecast_default_probability"===t.active})},"DP% ",i&&"(decile)"),a?l.default.createElement("div",{className:"sort-direction"},"ASC"===t.direction?c.Icons.FILTER_DESCENDING:c.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"}))))),l.default.createElement(d.Cell,{width:44,className:"header-cell-category"},l.default.createElement(d.SortHeaderCell,{sortDir:t.direction,onSortChange:a,sortKey:"forecast_confidence_score"},l.default.createElement(p.default,{align:{offset:[0,0]},overlay:"Forecast confidence"},l.default.createElement("div",null,l.default.createElement("div",{className:(0,u.default)("align-left",{active:"forecast_confidence_score"===t.active})},"Confidence (RR)"),a?l.default.createElement("div",{className:"sort-direction"},"ASC"===t.direction?c.Icons.FILTER_DESCENDING:c.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"})))))))};v.defaultProps={decileView:!0},v.propTypes={handleSort:o.default.func.isRequired,sortData:o.default.object.isRequired,toggleTableView:o.default.func.isRequired,decileView:o.default.bool,toggleViewForecastAsDecile:o.default.func.isRequired},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(12),u=a(548),d=a(547),c=a(545),f=a(114),p=function(e){var t=e.scenarioId,a=e.countryId,n=e.studiesFilter,r=e.metricsFilter,i=e.sortData,o=e.setStudiesFilterValue,p=e.setMetricsFilterValue,m=e.handleSortAction,h=e.tableView,v=e.toggleTableView,_=e.viewForecastAsDecile,E=e.toggleViewForecastAsDecile,g=void 0;switch(h){case f.TABLE_VIEW.HISTORICAL:g=l.default.createElement(s.Column,{className:"sites-column",overflow:!0,header:l.default.createElement(u.HistoricalHeaderCell,{caption:"Historical",toggleTableView:v,studiesFilter:n,onStudiesFilter:o,metricsFilter:r,onMetricsFilter:p,sortData:i,handleSort:function(e,n){return m(e,n,a,t)}}),data:l.default.createElement("div",null),width:600});break;case f.TABLE_VIEW.FORECAST:g=l.default.createElement(s.Column,{className:"sites-column",overflow:!0,header:l.default.createElement(d.ForecastedHeaderCell,{caption:"Forecasted",toggleViewForecastAsDecile:E,decileView:_,toggleTableView:v,sortData:i,handleSort:function(e,n){return m(e,n,a,t)}}),data:l.default.createElement("div",null),width:600});break;case f.TABLE_VIEW.CURRENT:default:g=l.default.createElement(s.Column,{className:"sites-column",overflow:!0,header:l.default.createElement(c.CurrentStudyHeaderCell,{caption:"Current study",toggleTableView:v,sortData:i,handleSort:function(e,n){return m(e,n,a,t)}}),data:l.default.createElement("div",null),width:600})}return g};p.defaultProps={selectedSitesCount:0,tableView:f.TABLE_VIEW.HISTORICAL,dataType:"SELECTED",isEditable:!1,otherSitesView:!1,rawSitesView:!1,reasons:[],viewForecastAsDecile:!0},p.propTypes={scenarioId:o.default.oneOfType([o.default.string,o.default.number]).isRequired,countryId:o.default.oneOfType([o.default.string,o.default.number]).isRequired,sites:o.default.array.isRequired,studiesFilter:o.default.string.isRequired,metricsFilter:o.default.string.isRequired,sortData:o.default.object.isRequired,setStudiesFilterValue:o.default.func.isRequired,setMetricsFilterValue:o.default.func.isRequired,handleSortAction:o.default.func.isRequired,tableView:o.default.string,toggleTableView:o.default.func.isRequired,dataType:o.default.string,updateValue:o.default.func.isRequired,viewForecastAsDecile:o.default.bool,toggleViewForecastAsDecile:o.default.func.isRequired},t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(11),u=n(s),d=a(198),c=n(d),f=a(12),p=a(114),m=function(e,t){return(0,c.default)(e)?"":t?t(e):e},h=function(e){var t=e.rowIndex,a=e.data,n=e.studiesFilter,r=e.metricsFilter,i=a[t],o=(0,c.default)(i.screen_failure_rate)?"":Math.round(100*i.screen_failure_rate)+"%",s=(0,c.default)(i.randomization_rate)?"":(+i.randomization_rate).toFixed(2),d=void 0;switch(n){case"studies_active":d=i[n];break;case"studies_complete":default:d=(0,c.default)(i[n])?(0,u.default)(i,"studyLevelData.center_num_studies_complete_in_fpo2mi_3y",""):i[n]}var p=i[r];return p=null===p?"":"median_time_to_query"===r||"median_time_to_entry"===r?(0,c.default)(p)?"":Math.round(p)+"d":"query_rate"===r?(0,c.default)(p)?"":(100*p).toFixed(2)+"%":(+p).toFixed(2),l.default.createElement(f.CellGroup,{direction:"row",className:"historical-data"},l.default.createElement(f.CellGroup,{width:74,className:"data-group"},l.default.createElement(f.Cell,{className:"value-cell align--right"},l.default.createElement("div",null,d))),l.default.createElement(f.CellGroup,{direction:"row",width:138,className:"data-group"},l.default.createElement(f.Cell,{width:32,className:"value-cell align--right"},l.default.createElement("div",null,m(i.min_patients_randomized))),l.default.createElement(f.Cell,{width:32,className:"value-cell align--right"},l.default.createElement("div",null,m(i.max_patients_randomized))),l.default.createElement(f.Cell,{width:32,className:"value-cell align--right"},l.default.createElement("div",null,m(i.average_patients_randomized,Math.round)))),l.default.createElement(f.CellGroup,{direction:"row",width:155,className:"data-group"},l.default.createElement(f.Cell,{width:32,className:"value-cell"},l.default.createElement("div",null,s)),l.default.createElement(f.Cell,{width:32,className:"value-cell"},l.default.createElement("div",null,o)),l.default.createElement(f.Cell,{width:65,className:"value-cell align--right"},l.default.createElement("div",null,(0,c.default)(i.drop_out_rate)?"":(+i.drop_out_rate).toFixed(2)))),l.default.createElement(f.CellGroup,{width:150,className:"data-group"},l.default.createElement(f.Cell,{className:"value-cell align--right"},l.default.createElement("div",null,p,""))))};h.defaultProps={rowIndex:-1},h.propTypes={rowIndex:o.default.number,data:o.default.array.isRequired,studiesFilter:o.default.string.isRequired,metricsFilter:o.default.oneOf(Object.values(p.METRICS_FILTER_KEYS)).isRequired},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(12),c=a(1142),f=n(c),p=a(114),m=a(6),h=a(13),v=n(h),_=a(222),E=function(e){var t=e.studiesFilter,a=e.onStudiesFilter,n=e.metricsFilter,i=e.onMetricsFilter,o=e.sortData,s=e.handleSort,c=e.toggleTableView,h=(0,r.useContext)(_.CountryDataContext),E=h.hasSitesWithTrackingData;return l.default.createElement(d.CellGroup,null,l.default.createElement(d.Cell,{className:"cell-caption"},l.default.createElement("h3",null,l.default.createElement("span",{className:(0,u.default)("toggle",{disabled:!E}),onClick:function(){return c(p.TABLE_VIEW.CURRENT)}},"Current study"),l.default.createElement("span",null,"/"),l.default.createElement("span",{className:"toggle-active",onClick:function(){return c(p.TABLE_VIEW.HISTORICAL)}},"Historical"),l.default.createElement("span",null,"/"),l.default.createElement("span",{className:"toggle",onClick:function(){return c(p.TABLE_VIEW.FORECAST)}},"Forecast"))),l.default.createElement(d.CellGroup,{direction:"row",className:"header-group"},l.default.createElement(d.Cell,{width:74,className:"header-cell"},l.default.createElement("div",null,"Studies")),l.default.createElement(d.Cell,{width:138,className:"header-cell"},l.default.createElement("div",null,"Patients randomized")),l.default.createElement(d.Cell,{width:155,className:"header-cell"},l.default.createElement("div",null,"Enrollment rates")),l.default.createElement(d.Cell,{width:150,className:"header-cell"},l.default.createElement("div",null,"Ops. metrics"))),l.default.createElement(d.CellGroup,{direction:"row",className:"header-group"},l.default.createElement(d.CellGroup,{width:74,className:"header-group"},l.default.createElement(f.default,{className:"header-cell-category",sortDir:o.direction,onSortChange:s,sortKey:t,sortData:o,selected:t,options:p.STUDIES_FILTER,onSelect:a})),l.default.createElement(d.CellGroup,{width:138,direction:"row",className:"header-group"},l.default.createElement(d.Cell,{className:"header-cell-category",width:32},l.default.createElement(d.SortHeaderCell,{sortDir:o.direction,onSortChange:s,sortKey:"min_patients_randomized"},l.default.createElement("div",{className:(0,u.default)("align-left",{active:"min_patients_randomized"===o.active})},"Min."),s?l.default.createElement("div",{className:"sort-direction"},"ASC"===o.direction?m.Icons.FILTER_DESCENDING:m.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"}))),l.default.createElement(d.Cell,{className:"header-cell-category",width:32},l.default.createElement(d.SortHeaderCell,{sortDir:o.direction,onSortChange:s,sortKey:"max_patients_randomized"},l.default.createElement("div",{className:(0,u.default)("align-left",{active:"max_patients_randomized"===o.active})},"Max."),s?l.default.createElement("div",{className:"sort-direction"},"ASC"===o.direction?m.Icons.FILTER_DESCENDING:m.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"}))),l.default.createElement(d.Cell,{className:"header-cell-category",width:32},l.default.createElement(d.SortHeaderCell,{sortDir:o.direction,onSortChange:s,sortKey:"average_patients_randomized"},l.default.createElement("div",{className:(0,u.default)("align-left",{active:"average_patients_randomized"===o.active})},"Avg."),s?l.default.createElement("div",{className:"sort-direction"},"ASC"===o.direction?m.Icons.FILTER_DESCENDING:m.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"})))),l.default.createElement(d.CellGroup,{width:155,direction:"row",className:"header-group"},l.default.createElement(d.Cell,{className:"header-cell-category",width:32},l.default.createElement(d.SortHeaderCell,{sortDir:o.direction,onSortChange:s,sortKey:"randomization_rate"},l.default.createElement(v.default,{align:{offset:[0,0]},overlay:"patients/site/month"},l.default.createElement("div",null,l.default.createElement("div",{className:(0,u.default)("align-left",{active:"randomization_rate"===o.active})},"RR"),s?l.default.createElement("div",{className:"sort-direction"},"ASC"===o.direction?m.Icons.FILTER_DESCENDING:m.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"}))))),l.default.createElement(d.Cell,{className:"header-cell-category",width:32},l.default.createElement(d.SortHeaderCell,{className:"header-cell-category",width:32,sortDir:o.direction,onSortChange:s,sortKey:"screen_failure_rate"},l.default.createElement(v.default,{align:{offset:[0,0]},overlay:"Screening failure rate"},l.default.createElement("div",null,l.default.createElement("div",{className:(0,u.default)("align-left",{active:"screen_failure_rate"===o.active})},"SF%"),s?l.default.createElement("div",{className:"sort-direction"},"ASC"===o.direction?m.Icons.FILTER_DESCENDING:m.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"}))))),l.default.createElement(d.CellGroup,{width:65,className:"header-group"},l.default.createElement(d.SortHeaderCell,{className:"header-cell-category",width:32,sortDir:o.direction,onSortChange:s,sortKey:"drop_out_rate"},l.default.createElement(v.default,{align:{offset:[0,0]},overlay:"Dropout Rate Randomization"},l.default.createElement("div",null,l.default.createElement("div",{className:(0,u.default)("align-left",{active:"drop_out_rate"===o.active})},"DR Randomization"),s?l.default.createElement("div",{className:"sort-direction"},"ASC"===o.direction?m.Icons.FILTER_DESCENDING:m.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"})))))),l.default.createElement(d.CellGroup,{width:150,className:"header-group"},l.default.createElement(f.default,{className:"header-cell-category",sortDir:o.direction,onSortChange:s,sortKey:n,sortData:o,selected:n,options:p.METRICS_FILTER,onSelect:i}))))};E.propTypes={onStudiesFilter:o.default.func.isRequired,studiesFilter:o.default.string.isRequired,metricsFilter:o.default.string.isRequired,onMetricsFilter:o.default.func.isRequired,handleSort:o.default.func.isRequired,sortData:o.default.object.isRequired,toggleTableView:o.default.func.isRequired},t.default=E},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(124),c=n(d),f=a(12),p=a(23),m=n(p),h=function(e){var t=e.rowIndex,a=e.data,n=e.isEditable,r=e.showInputs,i=e.onUpdateValue,o=a[t];return l.default.createElement(f.CellGroup,{direction:"row",className:"data-group"},l.default.createElement(f.Cell,{width:64,className:"value-cell"},r&&(!o.forecast_randomization_rate&&!o.randomization_rate||o.hasOverrodeRR)&&l.default.createElement("div",{onClick:function(e){return e.stopPropagation()},className:(0,u.default)("data-input",{overridden:o.hasOverrodeRR})},l.default.createElement(m.default,{narrow:!0,disabled:!n,value:o.state.randomization_rate||0===o.state.randomization_rate?o.state.randomization_rate:"",onBlur:function(e,t){""===t.value&&null===o.state.randomization_rate||+t.value!=+o.state.randomization_rate&&i(o.investigator_center_id,"randomization_rate",t.value)},validators:[function(e){return""===e||c.default.isFloat(e,{min:0,max:999})}],type:"text",onClick:function(e){return e.stopPropagation()}}))))};h.defaultProps={rowIndex:-1,isEditable:!1,showInputs:!1},h.propTypes={rowIndex:o.default.number,data:o.default.array.isRequired,isEditable:o.default.bool,showInputs:o.default.bool,onUpdateValue:o.default.func.isRequired},t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(2),o=n(i),s=a(12),u=a(13),d=n(u),c=function(){return l.default.createElement(s.CellGroup,null,l.default.createElement(s.Cell,{className:"cell-caption"},l.default.createElement("h3",null,"")),l.default.createElement(s.CellGroup,{direction:"row",className:"header-group"},l.default.createElement(s.Cell,{className:"header-cell"},"")),l.default.createElement(s.CellGroup,{direction:"row",className:"header-group header-group-narrow"},l.default.createElement(s.CellGroup,{width:64,fixedWidth:!0,className:"header-group rank"},l.default.createElement(s.SortHeaderCell,{className:"header-cell-category no-interaction",sortDir:"ASC",onSortChange:void 0,sortKey:"rr_cell_placeholder"},l.default.createElement(d.default,{mouseEnterDelay:.3,overlay:"Expected RR entered manually by user"},l.default.createElement("div",null,l.default.createElement("div",{className:(0,o.default)("align-left")},"Exp. RR"),l.default.createElement("div",{className:"header-cell-underline"})))))))};t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1138),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=a(0),i=n(l),o=a(1),s=n(o),u=a(123),d=n(u),c=a(11),f=n(c),p=a(8),m=a(2),h=n(m),v=a(67),_=n(v),E=a(6),g=a(13),y=n(g),S=a(23),b=n(S),C=a(60),O=a(1139),T=a(115),R=function(e){var t=e.handleSearchSitesValue,a=e.studyId,n=e.scenarioId,o=e.countryId,s=e.searchResults,u=e.dataType,c=e.addSelectedSite,p=e.sitesDataAvailable,m=(0,l.useRef)(),v=(0,l.useRef)((0,d.default)(function(e,a,n,r,l){var i=_.default.generate();t(e,a,n,r,l,i)},500)).current,g=(0,l.useState)(""),S=r(g,2),C=S[0],O=S[1],T=(0,l.useState)(!1),R=r(T,2),w=R[0],A=R[1],I=(0,l.useCallback)(function(e){e.target&&e.target.closest(".search-input-wrapper "+u)||w&&m.current.contains(e.target)||w&&(O(""),A(!1))},[A,w,u]),N=(0,l.useCallback)(function(e){O(e.target.value),v(a,n,o,u,e.target.value)},[v,a,n,o,u]);return(0,l.useEffect)(function(){return w&&document.addEventListener("click",I),w||document.removeEventListener("click",I),function(){document.removeEventListener("click",I)}},[w,I]),(0,l.useEffect)(function(){s&&A(!0)},[s,A]),i.default.createElement("div",{className:(0,h.default)("search-input-wrapper",u)},i.default.createElement("div",{className:"icon-wrapper"},E.Icons.SEARCH_HISTORICAL),i.default.createElement(y.default,{mouseEnterDelay:.3,overlay:p?i.default.createElement("span",null,"Search for sites by PI and Primary center",i.default.createElement("br",null),i.default.createElement("span",{className:"color-grey italic"},"Enter 3 characters to search...")):i.default.createElement("div",null,"Sorry, site functionality is not fully available ",i.default.createElement("br",null),"because of data update running at the moment.",i.default.createElement("br",null),"Please try again in a few minutes")},i.default.createElement("div",null,i.default.createElement(b.default,{disabled:!p,value:C,placeholder:"Search for sites",onClick:function(){O(""),A(!1)},clearIcon:!0,onChange:N}))),i.default.createElement("div",{ref:m,className:(0,h.default)("search-results__panel-container",{hidden:!w})},i.default.createElement("div",null,void 0!==C&&null!==C&&C.length<3&&i.default.createElement("div",null,"Enter 3 characters to search"),s&&C.length>=3&&0===s.length&&i.default.createElement("div",null,"No sites found"),s&&s.map(function(e){return i.default.createElement("div",{key:e.investigator_center_id,onClick:function(){c(n,o,e),O(""),A(!1)},className:(0,h.default)("sites-search-result__item",{exist:e.exist})},i.default.createElement("span",null,(0,f.default)(e,"investigator_center.investigator.name")),i.default.createElement("span",{className:"sites-search-result__item-separator"},"|"),i.default.createElement("span",null,(0,f.default)(e,"investigator_center.center.name")))}))))};R.defaultProps={searchResults:null,sitesDataAvailable:!0},R.propTypes={handleSearchSitesValue:s.default.func.isRequired,studyId:s.default.number.isRequired,scenarioId:s.default.number.isRequired,countryId:s.default.number.isRequired,searchResults:s.default.array,dataType:s.default.string.isRequired,addSelectedSite:s.default.func.isRequired,sitesDataAvailable:s.default.bool};var w=function(e,t){return{searchResults:("EXTERNAL"===t.dataType?O.getExternalSitesSearchResults:O.getRawSitesSearchResults)(e),sitesDataAvailable:(0,T.getSitesDataAvailability)(e)}},A={handleSearchSitesValue:C.searchForSitesAction,addSelectedSite:C.addSelectedSiteAction};t.default=(0,p.connect)(w,A)(R)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(8),u=a(123),d=n(u),c=a(6),f=a(23),p=n(f),m=a(13),h=n(m),v=a(60),_=function(e){var t=e.searchSitesValue,a=e.handleSearchSitesValue,n=(0,r.useRef)((0,d.default)(function(e){return a(e)},500)).current,i=(0,r.useCallback)(function(e){n(e.target.value)},[n]);return l.default.createElement("span",{className:"search-input-wrapper"},l.default.createElement("div",{className:"icon-wrapper"},c.Icons.SEARCH_HISTORICAL),l.default.createElement(h.default,{mouseEnterDelay:.3,overlay:l.default.createElement("span",null,"Search for sites by PI and Primary center",l.default.createElement("br",null),l.default.createElement("span",{className:"color-grey italic"},"Enter 3 characters to search..."))},l.default.createElement("div",null,l.default.createElement(p.default,{value:t,withoutBorder:!0,placeholder:"Filter sites",onClick:function(){return a("")},clearIcon:!0,onChange:i}))))};_.defaultProps={searchSitesValue:""},_.propTypes={searchSitesValue:o.default.string,handleSearchSitesValue:o.default.func.isRequired};var E=function(e){return{searchSitesValue:e.sites.searchSitesValue}},g={handleSearchSitesValue:v.searchSitesValueAction};t.default=l.default.memo((0,s.connect)(E,g)(_))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExternalSitesSearchResults=t.getRawSitesSearchResults=void 0;var n=a(43),r=function(e){return e.sitesSearch.RAW},l=function(e){return e.sitesSearch.EXTERNAL};t.getRawSitesSearchResults=(0,n.createSelector)([r],function(e){return e}),t.getExternalSitesSearchResults=(0,n.createSelector)([l],function(e){return e})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return null===e||void 0===e?"n/a":e?"Internal":"New to Novartis"}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(2),d=n(u),c=a(11),f=n(c),p=a(13),m=n(p),h=a(12),v=a(216),_=a(51),E=n(_),g=a(6),y=function(e){var t=e.rowIndex,a=e.data,n=e.cellClickHandler,l=e.multieditView,o=e.onMultiSelect,s=e.reasons,u=e.dataType,c=a[t],p=(0,f.default)(c,"isInternal"),_=c.state.status,y=(0,f.default)(c,"investigator_center.investigator",{}),S=(0,f.default)(c,"investigator_center.center",{}),b=i.default.createElement(v.FlexBox,{direction:"column"},i.default.createElement(v.FlexBox,{justifyContent:"space-between"},i.default.createElement(v.FlexItem,{className:"label opacity8"},"Primary investigator: "),i.default.createElement(v.FlexItem,{className:"value"},r(y.PI_has_internal_experience))),i.default.createElement(v.FlexBox,{justifyContent:"space-between"},i.default.createElement(v.FlexItem,{className:"label opacity8"},"Primary center:"),i.default.createElement(v.FlexItem,{className:"value"},r(S.center_has_internal_experience))),!!c.is_recommended_by_FPO&&i.default.createElement(v.FlexBox,{justifyContent:"space-between"},i.default.createElement(v.FlexItem,{className:"label"},"Recommended")),c.PIList&&!!c.PIList.length&&i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{style:{height:"1px",background:"white",margin:"8px 0",opacity:.8}}),i.default.createElement("div",{className:"italic opacity8"},"Other PIs in the center to consider (ordered by site rank):"),c.PIList.map(function(e){return i.default.createElement(v.FlexBox,{justifyContent:"space-between",key:e.name},i.default.createElement(v.FlexItem,{className:"label"},e.name||"-"))})),_&&i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{style:{height:"1px",background:"white",margin:"8px 0",opacity:.8}}),i.default.createElement(v.FlexBox,{justifyContent:"space-between",style:{marginTop:"12px "}},i.default.createElement(v.FlexItem,{className:"label bold"},"REMOVE"===_?"Removed":"Added")),i.default.createElement(v.FlexBox,{justifyContent:"space-between"},i.default.createElement(v.FlexItem,{className:"label disabled"},"Reason:")),i.default.createElement(v.FlexBox,{justifyContent:"space-between"},i.default.createElement(v.FlexItem,{className:"label"},(0,f.default)(s.find(function(e){return+e.id==+c.state.reason_id}),"text","-"))))),C=null,O=null;return p||c.raw?p&&!c.raw&&c.is_recommended_by_FPO?(C=i.default.createElement("span",null,"Site with Novartis experience"),O=c.ranking):c.raw?(C=i.default.createElement("span",null,"Not recommended site due to insufficient data"),O="N/A"):p&&!c.is_recommended_by_FPO&&(C=i.default.createElement("span",null,"Site with Novartis experience"),O=c.ranking):(C=i.default.createElement("span",null,"Site without Novartis experience",i.default.createElement("br",null)," (external site, no historical data available)"),O=(0,f.default)(c,"studyLevelData.ranking")),i.default.createElement(h.CellGroup,{direction:"row",className:"sites-data"},i.default.createElement(h.CellGroup,{width:48,fixedWidth:!0,className:"data-group rank"},i.default.createElement(h.Cell,{overflow:!0,className:(0,d.default)("value-cell","align--right",{selected:c.is_recommended_by_FPO,internal:p,external:!p&&!c.raw,active:c.isActive})},i.default.createElement("div",{onClick:function(e){return e.stopPropagation()},className:(0,d.default)("sites-multiedit-checkbox__wrapper",{hidden:!l||(0,f.default)(c,"studyLevelData.randomized_patients",0)&&"SELECTED"===u})},i.default.createElement(E.default,{label:"",onChange:function(){return o(c.investigator_center_id)},checked:c.multiSelected})),C?i.default.createElement(m.default,{overlay:C,mouseEnterDelay:.3},i.default.createElement("div",{className:"rank__value"},c.raw?i.default.createElement("span",{className:"rank__icon"},g.Icons.FLAG):null,i.default.createElement("span",{className:(0,d.default)("ranking",{raw:c.raw})},O),"")):i.default.createElement("div",{className:"rank__value"},c.raw?i.default.createElement("span",{className:"rank__icon"},g.Icons.FLAG):null,i.default.createElement("span",{className:(0,d.default)("ranking",{raw:c.raw})},O),""))),i.default.createElement(m.default,{align:{offset:[0,0]},destroyTooltipOnHide:!0,mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"bottomLeft",overlay:i.default.createElement("div",{className:"country-sites-trials",onClick:function(e){return n(e,t)}},i.default.createElement(v.FlexBox,{direction:"column"},b))},i.default.createElement(h.CellGroup,{width:100,className:"data-group site-pi"},i.default.createElement(h.Cell,{className:(0,d.default)("value-cell",{selected:c.is_recommended_by_FPO,active:c.isActive})},i.default.createElement("div",null,(0,f.default)(c,"investigator_center.investigator.name")||"","")))),i.default.createElement(m.default,{align:{offset:[0,0]},destroyTooltipOnHide:!0,mouseEnterDelay:.3,mouseLeaveDelay:.3,placement:"bottomLeft",overlay:i.default.createElement("div",{className:"country-sites-trials",onClick:function(e){return n(e,t)}},i.default.createElement(v.FlexBox,{direction:"column"},b))},i.default.createElement(h.CellGroup,{width:245,className:"data-group site-name"},i.default.createElement(h.Cell,{className:(0,d.default)("value-cell",{selected:c.is_recommended_by_FPO,active:c.isActive})},i.default.createElement("div",null,(0,f.default)(c,"investigator_center.center.name"))))))};y.defaultProps={rowIndex:-1,multieditView:!1,reasons:[],dataType:"SELECTED"},y.propTypes={rowIndex:s.default.number,data:s.default.array.isRequired,cellClickHandler:s.default.func.isRequired,multieditView:s.default.bool,onMultiSelect:s.default.func.isRequired,reasons:s.default.array,dataType:s.default.string},t.default=y},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(8),c=a(12),f=a(6),p=a(13),m=n(p),h=a(51),v=n(h),_=a(1136),E=n(_),g=a(60),y=a(115),S=a(46);a(2404);var b=function(e){var t=e.handleSort,a=e.sortData,n=e.toggleShowInternalSites,i=e.toggleShowExternalSites,o=e.showInternalSites,s=e.showExternalSites,d=e.selectedSitesCount,p=e.toggleShowInitialSelection,h=e.showInitialSelection,_=e.sitesListCustomized,g=e.otherSitesView,y=e.showFilterPanel,b=e.toggleShowFilterPanel,C=e.piPediatric,O=e.piAdolescence,T=e.pcPediatric,R=e.pcAdolescence,w=e.toggleShowFilteredData,A=e.rawSitesView,I=e.externalSitesView,N=e.toggleSelectedTableViewState,D=e.toggleOtherTableViewState,P=e.toggleRawTableViewState,L=e.selectedTableExpanded,M=e.otherTableExpanded,x=e.rawTableExpanded,k=e.active,j=(0,r.useRef)(),F=(0,r.useCallback)(function(e){k&&(e.target&&e.target.closest(".filters-panel__wrapper")||y&&j.current.contains(e.target)||y&&b())},[b,y,k]);(0,r.useEffect)(function(){return y&&document.addEventListener("click",F),y||document.removeEventListener("click",F),function(){document.removeEventListener("click",F)}},[y,F]);var U=[{name:"Internal",value:o,func:n},{name:"External",value:s,func:i},{name:"PI: Pediatric",value:C,field:"piPediatric",func:w},{name:"PI: Adolescence",value:O,field:"piAdolescence",func:w},{name:"PC: Pediatric",value:T,field:"pcPediatric",func:w},{name:"PC: Adolescence",value:R,field:"pcAdolescence",func:w},{name:"Initial FPO Selection",value:h,func:p}],V=U.reduce(function(e,t){return t.value&&e.push(l.default.createElement("div",{className:"site-filter__tag",key:t.name},l.default.createElement("div",{className:"site-filter__tag-label"},t.name),l.default.createElement("div",{className:"site-filter__tag-remove",onClick:function(){return t.func(t.field)}},f.Icons.CROSS))),e},[]),B=S.SELECTED_SITES+" ("+d+")",H={expand:L},G=N;return g&&(B=S.VIEW_NOT_SELECTED_SITES,H={expand:M},G=D),I&&(B=S.VIEW_EXTERNAL_SITES,H={expand:x},G=P),A&&(B=S.VIEW_RAW_SITES,H={expand:x},G=P),l.default.createElement(c.CellGroup,null,l.default.createElement(c.Cell,{className:"cell-caption",overflow:!0},l.default.createElement("h3",null,l.default.createElement("div",{className:"inline-flex__wrapper"},l.default.createElement("span",{onClick:function(){return G()}},l.default.createElement("span",{className:(0,u.default)("table__control",H)},f.Icons.CHEVRON_DOWN),l.default.createElement("span",{className:"column__label"},B)),!_||g||A?null:l.default.createElement(m.default,{mouseEnterDelay:.3,overlay:l.default.createElement("div",null,"Customized")},l.default.createElement("span",null,f.Icons.INFO_O)),l.default.createElement(E.default,{active:k})))),l.default.createElement(c.CellGroup,{direction:"row",className:"header-group"},l.default.createElement(c.Cell,{className:"header-cell"},l.default.createElement("div",{className:"inline-flex__wrapper"},l.default.createElement("div",{className:(0,u.default)("filters-panel__toggle",{opened:y}),onClick:b},l.default.createElement("div",{className:"filters-panel__toggle-label"},"Filters ",y?f.Icons.CHEVRON_UP:f.Icons.CHEVRON_DOWN),l.default.createElement("div",{className:"filters-panel__toggle-underline"})),l.default.createElement("div",{ref:j,onClick:function(e){return e.stopPropagation()},className:(0,u.default)("filters-panel__wrapper",{hidden:!y,extended:_})},l.default.createElement("div",{className:"filter-panel__flex"},l.default.createElement("div",{className:"filter-panel__flex-1"},l.default.createElement("h4",null,"Sites:"),l.default.createElement(v.default,{disabled:s,label:"Internal",customLabel:l.default.createElement("div",{className:"site-source internal"},"Internal"),onChange:n,checked:o})),l.default.createElement("div",{className:"filter-panel__flex-1"},l.default.createElement("h4",null,""),l.default.createElement(v.default,{disabled:o,label:"External",customLabel:l.default.createElement("div",{className:"site-source external"},"External"),onChange:i,checked:s}))),l.default.createElement("div",{className:"filter-panel__flex"},l.default.createElement("div",{className:"filter-panel__flex-1"},l.default.createElement("h4",null,"PI experience"),l.default.createElement(v.default,{label:"Pediatric",onChange:function(){return w("piPediatric")},checked:C}),l.default.createElement(v.default,{label:"Adolescence",onChange:function(){return w("piAdolescence")},checked:O})),l.default.createElement("div",{className:"filter-panel__flex-1"},l.default.createElement("h4",null,"Center experience"),l.default.createElement(v.default,{label:"Pediatric",onChange:function(){return w("pcPediatric")},checked:T}),l.default.createElement(v.default,{label:"Adolescence",onChange:function(){return w("pcAdolescence")},checked:R}))),l.default.createElement("div",{className:"filter-panel__flex"},l.default.createElement("div",{className:"filter-panel__flex-1"},_&&l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"separator__line"}),l.default.createElement(v.default,{label:"Initial FPO selection",customLabel:l.default.createElement("div",{className:"site-source internal color-blue"},"Initial FPO selection"),onChange:p,checked:h}))))),l.default.createElement("div",{className:"tags-wrapper"},V)))),l.default.createElement(c.CellGroup,{direction:"row",className:"header-group header-group-narrow"},l.default.createElement(c.CellGroup,{width:48,fixedWidth:!0,className:"header-group rank"},l.default.createElement(c.SortHeaderCell,{className:"header-cell-category",sortDir:a.direction,onSortChange:t,sortKey:"ranking"},l.default.createElement(m.default,{mouseEnterDelay:.3,overlay:"FPO rank of sites based on combined predictions of enrolment parameters"},l.default.createElement("div",null,l.default.createElement("div",{className:(0,u.default)("align-left",{active:"ranking"===a.active})},"Rank"),t?l.default.createElement("div",{className:"sort-direction"},"ASC"===a.direction?f.Icons.FILTER_DESCENDING:f.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"}))))),l.default.createElement(c.CellGroup,{width:100,className:"header-group"},l.default.createElement(c.SortHeaderCell,{className:"header-cell-category",sortDir:a.direction,onSortChange:t,sortKey:"site_pi"},l.default.createElement("div",null,l.default.createElement("div",{className:(0,u.default)("align-left",{active:"site_pi"===a.active})},"PI"),t?l.default.createElement("div",{className:"sort-direction"},"ASC"===a.direction?f.Icons.FILTER_DESCENDING:f.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"})))),l.default.createElement(c.CellGroup,{width:245,className:"header-group"},l.default.createElement(c.SortHeaderCell,{className:"header-cell-category",sortDir:a.direction,onSortChange:t,sortKey:"site_name"},l.default.createElement("div",null,l.default.createElement("div",{className:(0,u.default)("align-left",{active:"site_name"===a.active})},"Primary center"),t?l.default.createElement("div",{className:"sort-direction"},"ASC"===a.direction?f.Icons.FILTER_DESCENDING:f.Icons.FILTER_ASCENDING):null,l.default.createElement("div",{className:"header-cell-underline"}))))))};b.defaultProps={selectedSitesCount:0,sitesListCustomized:!1,otherSitesView:!1,rawSitesView:!1,externalSitesView:!1,showFilterPanel:!1,piPediatric:!1,piAdolescence:!1,piPhase:!1,pcPediatric:!1,pcAdolescence:!1,pcPhase:!1,selectedTableExpanded:!0,otherTableExpanded:!0,rawTableExpanded:!1,active:!1},b.propTypes={otherSitesView:o.default.bool,rawSitesView:o.default.bool,externalSitesView:o.default.bool,toggleShowInternalSites:o.default.func.isRequired,toggleShowExternalSites:o.default.func.isRequired,showInternalSites:o.default.bool.isRequired,showExternalSites:o.default.bool.isRequired,selectedSitesCount:o.default.number,handleSort:o.default.func.isRequired,sortData:o.default.object.isRequired,toggleShowInitialSelection:o.default.func.isRequired,showInitialSelection:o.default.bool.isRequired,sitesListCustomized:o.default.bool,showFilterPanel:o.default.bool,toggleShowFilterPanel:o.default.func.isRequired,piPediatric:o.default.bool,piAdolescence:o.default.bool,pcPediatric:o.default.bool,pcAdolescence:o.default.bool,toggleShowFilteredData:o.default.func.isRequired,toggleSelectedTableViewState:o.default.func.isRequired,toggleOtherTableViewState:o.default.func.isRequired,toggleRawTableViewState:o.default.func.isRequired,selectedTableExpanded:o.default.bool,otherTableExpanded:o.default.bool,rawTableExpanded:o.default.bool,active:o.default.bool};var C=function(e,t){return{studyId:t.studyId,sortData:e.sites.sortData,showInternalSites:e.sites.showInternalSites,showExternalSites:e.sites.showExternalSites,showFilterPanel:e.sites.showFilterPanel,showInitialSelection:e.sites.showInitialSelection,sitesListCustomized:(0,y.areSitesListCustomized)(e,t),piPediatric:e.sites.piPediatric,piAdolescence:e.sites.piAdolescence,pcPediatric:e.sites.pcPediatric,pcAdolescence:e.sites.pcAdolescence,selectedTableExpanded:e.sites.selectedTableExpanded,otherTableExpanded:e.sites.otherTableExpanded,rawTableExpanded:e.sites.rawTableExpanded}},O={toggleShowFilteredData:g.toggleShowFilteredDataView,toggleShowInternalSites:g.toggleInternalSitesView,toggleShowExternalSites:g.toggleExternalSitesView,toggleShowInitialSelection:g.toggleInitialSelection,toggleShowFilterPanel:g.toggleFilterPanel,toggleSelectedTableViewState:g.setSelectedTableState,toggleOtherTableViewState:g.setOtherTableState,toggleRawTableViewState:g.setRawTableState};t.default=(0,d.connect)(C,O)(b)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),f=a(1),p=n(f),m=a(2),h=n(m),v=a(264),_=n(v),E=a(256),g=n(E),y=a(6),S=a(13),b=n(S);a(2403);var C={ASC:"ASC",DESC:"DESC"},O=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={opened:!1},a.onSortChange=a.onSortChange.bind(a),a.selectChanged=a.selectChanged.bind(a),a}return o(t,e),u(t,[{key:"onSortChange",value:function(e){e.stopPropagation();var t=C.DESC,a=C.ASC;this.props.onSortChange&&this.props.onSortChange(this.props.sortKey,this.props.sortDir?function(e){return e===a?t:a}(this.props.sortDir):"ASC")}},{key:"selectChanged",value:function(e){this.setState({opened:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.sortData,n=t.sortKey,l=t.className,i=t.sortDir,o=r(t,["sortData","sortKey","className","sortDir"]),u=this.props.options.find(function(t){return t.key===e.props.selected}),d=u.tooltip||u.value;return c.default.createElement(_.default,s({},o,{className:"sort-select-header-cell "+l,overflow:!0}),c.default.createElement(b.default,{align:{offset:[0,0]},overlay:d},c.default.createElement("span",null,c.default.createElement("div",{className:(0,h.default)("align-left",{active:a.active===n})},c.default.createElement(g.default,{selected:this.props.selected,options:this.props.options,onSelect:this.props.onSelect,onStatusChange:this.selectChanged})),this.props.onSortChange&&!this.state.opened?c.default.createElement("div",{className:"sort-direction",onClick:this.onSortChange},"ASC"===i?y.Icons.FILTER_DESCENDING:y.Icons.FILTER_ASCENDING):null,c.default.createElement("div",{className:"header-cell-underline"}))))}}]),t}(d.Component);O.propTypes={className:p.default.string,onSortChange:p.default.func,sortDir:p.default.oneOf([C.ASC,C.DESC]),sortKey:p.default.string.isRequired,options:p.default.array.isRequired,selected:p.default.string,onSelect:p.default.func.isRequired,sortData:p.default.object.isRequired},O.defaultProps={className:void 0,onSortChange:void 0,sortDir:void 0,selected:void 0},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),u=n(s),d=a(1),c=n(d),f=a(25),p=a(27),m=a(110),h=a(165),v=a(10),_=n(v),E=a(123),g=n(E),y=a(125),S=a(7);a(339);var b=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleResize=function(){a.debounced()},a.renderChart=function(){(0,f.select)("#svg_wrapper_country-updates-stat-chart").select(".svg-container").remove();var e=a.state.data,t=a.props,n=t.startDate,r=t.endDate;if(e&&n&&r&&!e.error){var l=a.container;if(l){var i={top:4,right:40,bottom:4,left:40},o=e.lpft,s=(0,S.getMomentDate)(r),u=e.expectedLpft,d=[o,s,u],c=(0,p.max)(d),v=l.getBoundingClientRect().width-i.left-i.right,E=86-i.top-i.bottom,g=(0,f.select)("#svg_wrapper_country-updates-stat-chart"),b=g.append("div").classed("svg-container",!0).append("svg").attr("width",v+i.left+i.right).attr("height",E+i.top+i.bottom),C=b.append("g").attr("transform","translate("+i.left+","+i.top+")"),O=(0,m.scaleTime)().rangeRound([0,v]);if(!c)return void C.append("text").attr("transform","translate("+v/2+","+E/2+")").attr("text-anchor","middle").classed("no-data-message",!0).text("There is not enough data to build a chart yet");if(c.isSameOrBefore(n))return(0,f.select)("#enrolment-chart__legend-toggle").style("display","none"),void C.append("text").translate([v/2,E/2]).attr("text-anchor","middle").classed("no-data-message",!0).text("The approved scenario and graph cannot be loaded due to data inconsistencies");O.domain([n,c]),C.append("rect").attr("transform","translate(0,46)").attr("width",v).attr("height",16).attr("class","chart-background").st({fill:y.COLORS.BLACK,opacity:.04}),C.append("rect").attr("transform","translate(0,46)").attr("x",-30).attr("width",30).attr("height",16).attr("class","chart-background side").st({fill:y.COLORS.BLACK,opacity:.02}),C.append("rect").attr("transform","translate(0,46)").attr("x",v).attr("width",30).attr("height",16).attr("class","chart-background side").st({fill:y.COLORS.BLACK,opacity:.02});var T=(0,y.getMonthsTickValues)(n,c,10),R=(0,h.axisBottom)().scale(O).tickValues(T).tickSizeOuter(0);(0,y.injectPatternDefs)(b,"actualPattern1",u<s?y.COLORS.GREEN:y.COLORS.RED);var w=[{x:function(){return O(n.isSameOrBefore(s)?o<s?o:s:o<s?o:n)},y:46,width:function(){return n.isSameOrBefore(s)?o<s?O(s)-O(o):O(o)-O(s):o<s?O(s)-O(o):O(o)-O(n)},height:16,fill:o<s?y.COLORS.GREEN:y.COLORS.RED,opacity:.2},{x:function(){return O(n.isSameOrBefore(s)?u<s?u:s:u<s?u:n)},y:46,width:function(){return n.isSameOrBefore(s)?u<s?O(s)-O(u):O(u)-O(s):u<s?O(s)-O(u):O(u)-O(n)},height:16,fill:"url(#actualPattern1)",opacity:.6},{x:function(){return O(n.isSameOrBefore(s)?u<s?u:s:u<s?u:n)},y:46,width:function(){return n.isSameOrBefore(s)?u<s?O(s)-O(u):O(u)-O(s):u<s?O(s)-O(u):O(u)-O(n)},height:16,fill:u<s?y.COLORS.GREEN:y.COLORS.RED,opacity:.2}];o&&(0,y.drawOverflowRect)(C,w[0]),u&&((0,y.drawOverflowRect)(C,w[1]),(0,y.drawOverflowRect)(C,w[2]));var A=C.append("g").attr("class","axis axis--x").attr("transform","translate(0,28)").call(R);A.selectAll("text").attr("class","tick").attr("y",3).st({textTransform:"uppercase",fontSize:"12px",fontFamily:"VoltaModern, sans-serif"}).style("text-anchor","middle").text(function(e){return(0,_.default)(e).format("MMM YY")}).attr("transform","translate(0, 36)"),A.selectAll("line").attr("class","tick-line").st({fill:"none",stroke:y.COLORS.BLACK,shapeRendering:"crispEdges",strokeWidth:"1px"}).attr("y2","-4").attr("y2","10").attr("transform","translate(0.5, 24)"),A.selectAll("path").st({fill:"none",stroke:y.COLORS.BLACK,opacity:0,shapeRendering:"crispEdges"});var I={stroke:y.COLORS.MID_GREY,strokeWidth:"4px",opacity:.6},N={stroke:y.COLORS.GREY,strokeWidth:"16px"},D=C.append("g").attr("transform","translate(0, 32)");D.append("line").attr("x2",v).classed("milestones-bar-background",!0).st(N),D.append("line").attr("x2",v).classed("milestones-bar",!0).st(I);var P=(0,y.appendFppMark)(D,O(n));P.append("line").attr("y1",10).attr("y2",30).style("stroke","black").style("stroke-width","2px"),(0,y.appendNarrowLabelToMilestone)(P,"FP",y.COLORS.BLACK,y.COLORS.WHITE,y.COLORS.BLACK,-64),P.append("line").attr("y1",-12).attr("y2",-16).style("stroke",y.COLORS.BLACK).style("stroke-width","1px");var L=void 0;s&&s.isAfter(n)&&(L=D.append("g").attr("transform","translate("+O(s)+")"),L.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",y.COLORS.WHITE).attr("r",9),L.append("circle").style("fill",y.COLORS.BLACK).attr("r",6),L.append("line").attr("y1",10).attr("y2",30).style("stroke","black").style("stroke-dasharray","6 3").style("stroke-width","1px"),(0,y.appendNarrowLabelToMilestone)(L,"T/LPFT",y.COLORS.BLACK,y.COLORS.BLACK,y.COLORS.WHITE,-64),L.append("line").attr("y1",-12).attr("y2",-16).style("stroke",y.COLORS.BLACK).style("stroke-width","1px"));var M=void 0;o&&(M=D.append("g").attr("transform","translate("+O(o)+")"),M.append("line").attr("y1",10).attr("y2",30).style("stroke","black").style("stroke-width","2px"),M.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",y.COLORS.WHITE).attr("r",9),M.append("circle").style("fill",function(){return o<=s?y.COLORS.GREEN:y.COLORS.RED}).attr("r",6),(0,y.appendNarrowLabelToMilestone)(M,"P/LPFT",y.COLORS.BLACK,y.COLORS.WHITE,y.COLORS.BLACK,-64),M.append("line").attr("y1",-12).attr("y2",-16).style("stroke",y.COLORS.BLACK).style("stroke-width","1px"));var x=void 0;u&&(x=D.append("g").attr("transform","translate("+O(u)+")"),x.append("line").attr("y1",10).attr("y2",30).style("stroke","black").style("stroke-width","2px"),x.append("circle").style("stroke","black").style("stroke-width","2px").style("fill",y.COLORS.WHITE).attr("r",9),x.append("circle").style("fill",function(){return u<=s?y.COLORS.GREEN:y.COLORS.RED}).attr("r",6),(0,y.appendNarrowLabelToMilestone)(x,"S/LPFT",y.COLORS.BLACK,y.COLORS.WHITE,y.COLORS.BLACK,-64),x.append("line").attr("y1",-12).attr("y2",-16).style("stroke",y.COLORS.BLACK).style("stroke-width","1px"))}}},a.state={data:e.data},a.debounced=(0,g.default)(a.renderChart,200),a}return i(t,e),o(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.renderChart()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({data:e.data},function(){t.renderChart()})}},{key:"componentDidUpdate",value:function(){this.renderChart()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{ref:function(t){e.container=t},className:"svg-wrapper",id:"svg_wrapper_country-updates-stat-chart"})}}]),t}(u.default.Component);b.defaultProps={data:null,startDate:null,endDate:null},b.propTypes={data:c.default.object,startDate:c.default.object,endDate:c.default.object},t.default=b},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(11),c=n(d),f=a(65),p=n(f),m=a(2),h=n(m),v=a(84),_=n(v),E=a(22),g=a(61),y=n(g),S=a(1143),b=n(S),C=a(1147),O=a(1118),T=n(O),R=a(222),w=a(36),A=a(60),I=a(40),N=n(I),D=a(63),P=n(D),L=a(183),M=a(48);a(2406);var x=(0,_.default)(N.default),k=function(e){var t=e.studyId,a=e.scenarioId,n=e.countryId,o=e.selectedSitesNum,s=e.selectedSitesAverageRR,u=e.selectedSitesExpectedCountryData,d=e.scenarioStartDate,f=e.scenarioEndDate,m=e.hasSelectedSitesWithoutRR,v=e.editableByTom,_=e.saveOverridesData,g=e.loadingSites,S=e.isAdjusted,O=e.updateCountrySites,w=e.hasChanges,A=(0,l.useCallback)(function(){return O(t,a,n,!0)},[t,a,n,O]),I=(0,l.useContext)(R.CountryDataContext),N=(0,c.default)(I,"countryPlannedData",null),L=S?["adjusted_num_sites","adjusted_randomisation_rate","adjusted_lpft","adjusted_overallocatedData"]:["num_sites","randomisation_rate","lpft","overallocatedData"],M=(0,p.default)(N,L),x=void 0,k=void 0,j=void 0,F=void 0;S?(x=M.adjusted_num_sites,k=M.adjusted_randomisation_rate,j=M.adjusted_lpft,F=M.adjusted_overallocatedData):(x=M.num_sites,k=M.randomisation_rate,j=M.lpft,F=M.overallocatedData);var U=j;F&&(U=F.lpft);var V=null;u&&(V=u.overallocatedData?u.overallocatedData.lpft:S?u.adjusted_lpft:u.lpft);var B=x===o&&(+k).toFixed(9)===(+s).toFixed(9),H=void 0;return H=m?i.default.createElement("div",{className:"country-sites-updates-stat__item-loader"},"One or more selected sites does not have randomization rate value. Please, edit country parameters according to site selection"):!u||g?i.default.createElement(C.CountryUpdatesStatChartLoader,null):i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"country-sites-updates-stat__data-item"},i.default.createElement("div",{className:"country-sites-updates-stat__data-item-title"},"Planned"),i.default.createElement("div",null,i.default.createElement("span",null,"Sites:"),i.default.createElement("span",null,x)),i.default.createElement("div",null,i.default.createElement("span",null,"RR:"),i.default.createElement("span",null,(0,P.default)(k))),i.default.createElement("div",null,i.default.createElement("span",null,"LPFT:"),i.default.createElement("span",{className:(0,h.default)({green:U&&U.isSameOrBefore(f,"day"),red:U&&U.isAfter(f,"day")})},(0,D.getFormattedDate)(U)))),i.default.createElement(y.default,{className:"separator",size:"extraLarge"}),i.default.createElement("div",{className:"country-sites-updates-stat__data-item"},i.default.createElement("div",{className:"country-sites-updates-stat__data-item-title"},"Selected"),i.default.createElement("div",null,i.default.createElement("span",null,"Sites:"),i.default.createElement("span",null,o)),i.default.createElement("div",null,i.default.createElement("span",null,"RR:"),i.default.createElement("span",null,(0,P.default)(s))),i.default.createElement("div",null,i.default.createElement("span",null,"LPFT:"),i.default.createElement("span",{className:(0,h.default)({green:V&&V.isSameOrBefore(f,"day"),red:V&&V.isAfter(f,"day")})},(0,D.getFormattedDate)(V)))),i.default.createElement(y.default,{className:"separator",size:"extraLarge"}),i.default.createElement("div",{style:{flex:1,padding:"0 12px"}},i.default.createElement(b.default,{data:r({},u,{lpft:U,expectedLpft:V}),startDate:d,endDate:f})),v&&V&&!B&&i.default.createElement(i.default.Fragment,null,i.default.createElement(y.default,{className:"separator",size:"extraLarge"}),i.default.createElement(T.default,{hasChanges:w,saveData:A,scenarioStartDate:d,selectedSitesAverageRR:s,selectedSitesNum:o,saveOverridesData:_}))),i.default.createElement(E.Row,null,i.default.createElement(E.Col,{offset:1,width:11},i.default.createElement("div",{className:"country-sites-updates-stat__container"},i.default.createElement("div",{className:"country-sites-updates-stat__wrapper"},H))))};k.defaultProps={selectedSitesNum:0,selectedSitesAverageRR:0,selectedSitesExpectedCountryData:null,scenarioStartDate:null,scenarioEndDate:null,hasSelectedSitesWithoutRR:!1,editableByTom:!1,loadingSites:!1,isAdjusted:!1,hasChanges:!1},k.propTypes={studyId:s.default.oneOfType([s.default.number,s.default.string]).isRequired,scenarioId:s.default.oneOfType([s.default.number,s.default.string]).isRequired,countryId:s.default.oneOfType([s.default.number,s.default.string]).isRequired,selectedSitesNum:s.default.number,selectedSitesAverageRR:s.default.number,selectedSitesExpectedCountryData:s.default.object,scenarioStartDate:s.default.object,scenarioEndDate:s.default.object,hasSelectedSitesWithoutRR:s.default.bool,editableByTom:s.default.bool,saveOverridesData:s.default.func.isRequired,loadingSites:s.default.bool,isAdjusted:s.default.bool,updateCountrySites:s.default.func.isRequired,hasChanges:s.default.bool};var j=function(e,t){var a=r({},t,{params:r({id:t.studyId},(0,p.default)(t,["studyId","scenarioId","countryId"]))}),n=(0,M.getScenarioData)(e,a),l=e.auth.user,i=(0,M.getStudyData)(e,a),o=x(l,i,n),s=(0,L.getSelectedSitesAverageRR)(e,t);return{scenarioStartDate:(0,c.default)(n,"fp"),scenarioEndDate:(0,c.default)(n,"end_date"),selectedSitesNum:(0,L.getSelectedSitesCount)(e,t),selectedSitesAverageRR:s,selectedSitesExpectedCountryData:(0,L.getSelectedSitesExpectedCountryData)(e,a),hasSelectedSitesWithoutRR:0===s,editableByTom:o.isEditable&&(o.isAdmin||o.isUserHasScenarioFullControl)&&(0,c.default)(n,"site_selection_required"),isAdjusted:n&&!!n.source_scenario_id,hasChanges:e.sites.hasChanges}},F={saveOverridesData:w.saveOverrides,updateCountrySites:A.updateSites};t.default=(0,u.connect)(j,F)(k)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1119),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),l=function(){return r.default.createElement("div",{style:{width:"100%",height:"280px"},title:"Loading sites list..."},r.default.createElement("svg",{width:"100%",height:"280px"},r.default.createElement("defs",null,r.default.createElement("clipPath",{id:"uun7xtu4kb"},r.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"40px"}),r.default.createElement("rect",{x:"0",y:"60",width:"100%",height:"40px"}),r.default.createElement("rect",{x:"0",y:"120",width:"100%",height:"40px"}),r.default.createElement("rect",{x:"0",y:"180",width:"100%",height:"40px"}),r.default.createElement("rect",{x:"0",y:"240",width:"100%",height:"40px"})),r.default.createElement("linearGradient",{id:"uiukws9a2d"},r.default.createElement("stop",{offset:"0%",stopColor:"#f0f0f0",stopOpacity:"1"},r.default.createElement("animate",{attributeName:"offset",values:"-2; -2; 1",keyTimes:"0; 0.25; 1",dur:"2s",repeatCount:"indefinite"})),r.default.createElement("stop",{offset:"50%",stopColor:"#e0e0e0",stopOpacity:"1"},r.default.createElement("animate",{attributeName:"offset",values:"-1; -1; 2",keyTimes:"0; 0.25; 1",dur:"2s",repeatCount:"indefinite"})),r.default.createElement("stop",{offset:"100%",stopColor:"#f0f0f0",stopOpacity:"1"},r.default.createElement("animate",{attributeName:"offset",values:"0; 0; 3",keyTimes:"0; 0.25; 1",dur:"2s",repeatCount:"indefinite"})))),r.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"40px",clipPath:"url(#uun7xtu4kb)",fill:"url(#uiukws9a2d)"}),r.default.createElement("rect",{x:"0",y:"60",width:"100%",height:"40px",clipPath:"url(#uun7xtu4kb)",fill:"url(#uiukws9a2d)"}),r.default.createElement("rect",{x:"0",y:"120",width:"100%",height:"40px",clipPath:"url(#uun7xtu4kb)",fill:"url(#uiukws9a2d)"}),r.default.createElement("rect",{x:"0",y:"180",width:"100%",height:"40px",clipPath:"url(#uun7xtu4kb)",fill:"url(#uiukws9a2d)"}),r.default.createElement("rect",{x:"0",y:"240",width:"100%",height:"40px",clipPath:"url(#uun7xtu4kb)",fill:"url(#uiukws9a2d)"})))};t.default=l},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CountryUpdatesStatChartLoader=t.CountryUpdatesStatItemLoader=void 0;var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(458),c=n(d),f=a(6),p=t.CountryUpdatesStatItemLoader=function(e){var t=e.long;return l.default.createElement("div",{className:(0,u.default)("country-sites-updates-stat__item-loader",{long:t})},l.default.createElement(c.default,{width:t?220:160,height:86,preserveAspectRatio:"none"},l.default.createElement("rect",{x:"0",y:"20",width:t?220:160,height:"20"}),l.default.createElement("rect",{x:"0",y:"50",width:t?220:160,height:"20"})))};p.defaultProps={long:!1},p.propTypes={long:o.default.bool},t.CountryUpdatesStatChartLoader=function(){return l.default.createElement("div",{className:(0,u.default)("country-sites-updates-stat__chart-loader")},f.Icons.ITEM_LOADER)}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScenariosListLoader=t.LocationsFilterLoader=t.UsersListLoader=void 0;var r=a(0),l=n(r),i=a(458),o=n(i);t.UsersListLoader=function(){return l.default.createElement(o.default,{height:440},l.default.createElement("rect",{x:"0",y:"10",width:"80",height:"20"}),l.default.createElement("rect",{x:"0",y:"50",width:"340",height:"20"}),l.default.createElement("rect",{x:"0",y:"90",width:"80",height:"20"}),l.default.createElement("rect",{x:"0",y:"130",width:"340",height:"20"}),l.default.createElement("rect",{x:"0",y:"170",width:"340",height:"20"}),l.default.createElement("rect",{x:"0",y:"210",width:"340",height:"20"}),l.default.createElement("rect",{x:"0",y:"250",width:"340",height:"20"}),l.default.createElement("rect",{x:"0",y:"290",width:"80",height:"20"}),l.default.createElement("rect",{x:"0",y:"330",width:"340",height:"20"}),l.default.createElement("rect",{x:"0",y:"370",width:"340",height:"20"}),l.default.createElement("rect",{x:"0",y:"410",width:"340",height:"20"}))},t.LocationsFilterLoader=function(){return l.default.createElement(o.default,null,l.default.createElement("rect",{x:"80",y:"10",width:"100",height:"10"}))},t.ScenariosListLoader=function(){return l.default.createElement(o.default,{height:400},l.default.createElement("rect",{x:"0",y:"0",width:"400",height:"400"}))}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(18),c=a(2),f=n(c),p=a(11),m=n(p),h=a(10),v=n(h),_=a(86),E=a(6),g=a(22),y=a(1153),S=n(y),b=a(554),C=n(b),O=a(12),T=a(532),R=a(1151),w=n(R),A=a(32),I=a(180),N=n(I),D=a(1148),P=a(351),L=n(P),M=a(60),x=a(821),k=n(x),j=a(28),F=a(103),U=a(48),V=a(1152),B=a(7),H=a(88),G=a(14),Y=n(G);a(2407);var q=function(e){var t=e.navigate,a=e.getCsmsList,n=e.study,o=e.studyId,s=e.data,u=e.getCsmsScenarios,d=e.selectedUser,c=e.userScenarios,p=e.checkedScenarios,h=e.shareScenarioWithUser,y=e.activeUser,b=e.onUserSelect,R=e.platformRegions,I=e.fullData,P=e.allPlatformCountries,M=e.selectedUserName,x=e.getStudyScenarios,k=e.studyScenarios;(0,l.useEffect)(function(){a(o)},[o,a]),(0,l.useEffect)(function(){x(o)},[o,x]),(0,l.useEffect)(function(){u(o,d)},[o,d,u]),(0,l.useEffect)(function(){n.is_imported||t("/studies/"+o)},[t,o,n]),(0,l.useEffect)(function(){return function(){return b(null)}},[b]);var j=(0,l.useState)({name:Y.default,type:G.ROLLUP,subject:null}),F=r(j,2),U=F[0],V=F[1];(0,l.useEffect)(function(){if(s){for(var e=Object.keys(s).filter(function(e){return U.type===G.ROLLUP||(U.type===G.REGION?!!P.filter(function(e){return e.region_name===U.name}).find(function(t){return t.country_name===e}):U.type===G.COUNTRY&&e===U.name)}).sort(),t=void 0,a=0;a<e.length;a+=1){var n=e[a];if(t=!!s[n].find(function(e){return e.id===d}))break}t||b((0,m.default)(s,"["+e[0]+"][0].id",null))}},[P,U,s,b,d]);var q=function(e){h(o,e,d,[{id:d}],p.includes(e))},z=s?Object.keys(s).filter(function(e){return U.type===G.ROLLUP||(U.type===G.REGION?!!P.filter(function(e){return e.region_name===U.name}).find(function(t){return t.country_name===e}):U.type===G.COUNTRY&&e===U.name)}).sort().map(function(e){return i.default.createElement("div",{key:e},i.default.createElement("h3",null,e),i.default.createElement("ul",{className:"csms-list"},s[e].map(function(e){var t=(0,B.getMomentDate)(e.startDate);return i.default.createElement("li",{key:e.name,className:(0,f.default)({selected:d===e.id}),onClick:function(){return b(e.id)}},i.default.createElement("div",null,e.name),t&&(0,v.default)().isSameOrBefore(t,"day")?i.default.createElement("div",{className:"secondary-label"},"(start date - ",(0,H.formatDate)(t),")"):null)})))}):null;return i.default.createElement("div",{className:"csms-container"},i.default.createElement(_.Sidebar,null,i.default.createElement(_.Button,{height:80,onClick:function(){t("/studies/"+o)}},E.Icons.CHEVRON_LEFT),i.default.createElement(_.Separator,{height:1})),i.default.createElement(g.Grid,null,i.default.createElement(g.Row,{className:"csms-filter__wrapper"},i.default.createElement(g.Col,{offset:2,width:8},i.default.createElement(L.default,null,i.default.createElement("h1",{className:"csms-title"},i.default.createElement("span",null,n.study_id," - CSMs list")),I&&R?i.default.createElement(N.default,{activeFilter:U,data:I,platformRegions:R,onFilterSelect:function(e){return V(e)}}):i.default.createElement(D.LocationsFilterLoader,null)))),i.default.createElement(g.Row,null,i.default.createElement(g.Col,{offset:2,width:4},i.default.createElement(L.default,null,i.default.createElement("div",{className:"csms-content__wrapper"},s?z:i.default.createElement(D.UsersListLoader,null)))),i.default.createElement(g.Col,{width:4},i.default.createElement(L.default,null,k?i.default.createElement("div",{className:"csms-content__wrapper bordered"},i.default.createElement("div",{className:"csms-sub-title"},i.default.createElement("h3",null,"Shared study scenarios"),i.default.createElement("div",{className:"shared-scenarios__counter"},i.default.createElement("span",null,p.length),i.default.createElement("span",null,"/"),i.default.createElement("span",null,k.length))),i.default.createElement("h4",{className:"csms-sub-title__secondary"},M,""),i.default.createElement(O.FlexTable,{headerHeight:48,rowHeight:48,rowsCount:k.length},i.default.createElement(C.default,{params:{id:o},onRowClick:function(){}},i.default.createElement(O.Column,{header:i.default.createElement(T.HeaderCell,{title:"Shared"}),data:i.default.createElement(S.default,{study:n,selectedUser:d,activeUser:y,preparedScenarios:k,onSelect:q,checkedScenarios:p}),width:60,fixedWidth:!0}),i.default.createElement(O.Column,{overflow:!1,header:i.default.createElement(T.HeaderCell,{title:"Scenario name"}),data:i.default.createElement(w.default,{preparedScenarios:k,dataField:"name"}),width:400}))),i.default.createElement("div",{className:"csms-scenarios-list-loader",style:{display:c?"none":"flex"}},i.default.createElement("div",{className:"calculate-progress"},E.Icons.ITEM_LOADER))):i.default.createElement("div",{className:"csms-content__wrapper"},i.default.createElement(D.ScenariosListLoader,null)))))),i.default.createElement(A.ContextHelpButton,{page:"csm-list"}))};q.defaultProps={data:null,study:null,selectedUser:null,userScenarios:null,checkedScenarios:null,platformRegions:null,fullData:null,allPlatformCountries:null,selectedUserName:null,studyScenarios:null},q.propTypes={getCsmsScenarios:s.default.func.isRequired,navigate:s.default.func.isRequired,getCsmsList:s.default.func.isRequired,studyId:s.default.string.isRequired,data:s.default.object,selectedUser:s.default.string,userScenarios:s.default.array,checkedScenarios:s.default.array,shareScenarioWithUser:s.default.func.isRequired,activeUser:s.default.object.isRequired,study:s.default.object,onUserSelect:s.default.func.isRequired,platformRegions:s.default.array,fullData:s.default.array,allPlatformCountries:s.default.array,selectedUserName:s.default.string,getStudyScenarios:s.default.func.isRequired,studyScenarios:s.default.array};var z=function(e,t){var a=t.params.id,n=e.auth.user,r=(0,F.getStudyData)(e,t),l=(0,U.getPlatformRegionsFromStore)(e),i=(0,V.getCsmsListFromStore)(e,t),o=(0,V.getPlainLocations)(e),s=(0,V.getFullData)(e,t);return{studyId:a,study:r,data:i,selectedUser:(0,V.getSelectedUserFromStore)(e),userScenarios:(0,V.getUserScenarios)(e,t),checkedScenarios:(0,V.getCheckedScenarios)(e,t),studyScenarios:e.csms.studyScenarios,activeUser:n,platformRegions:l,fullData:s,allPlatformCountries:o,selectedUserName:(0,V.getSelectedUsername)(e,t)}},W={getCsmsList:M.getCsmsByStudy,getCsmsScenarios:M.getCsmsScenariosData,shareScenarioWithUser:k.default,onUserSelect:M.onCsmUserSelect,navigate:d.push,getStudyScenarios:j.getStudyScenariosList};t.default=(0,u.connect)(z,W)(q)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1149),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),i=n(l),o=a(1),s=n(o),u=a(2),d=n(u),c=a(52),f=function(e){var t=e.rowIndex,a=e.preparedScenarios,n=r({},a[t]),l=(0,d.default)("data-cell");return i.default.createElement(c.Cell,{className:l},i.default.createElement("div",null,i.default.createElement("div",null,n.name),i.default.createElement("div",{className:"cell-underline"})),");")};f.defaultProps={rowIndex:0,dataField:"",dateType:!1,isBold:!1,study:null,selectedUser:null},f.propTypes={preparedScenarios:s.default.array.isRequired,rowIndex:s.default.number},t.default=f},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getCheckedScenarios=t.getSelectedUsername=t.getFullData=t.getPlainLocations=t.getUserScenarios=t.getUserScenariosFromStore=t.getSelectedUserFromStore=t.getCsmsListFromStore=void 0;var r=a(10),l=function(e){return e&&e.__esModule?e:{default:e}}(r),i=a(43),o=a(48),s=a(7),u=a(223),d=t.getCsmsListFromStore=function(e,t){return e.csms[t.params.id]},c=t.getSelectedUserFromStore=function(e){return e.csms.selectedUser},f=t.getUserScenariosFromStore=function(e){return e.csms.userScenarios},p=t.getUserScenarios=(0,i.createSelector)([c,f],function(e,t){return t[e]}),m=t.getPlainLocations=(0,i.createSelector)(o.getPlatformRegionsFromStore,function(e){return e.reduce(function(e,t){var a=t,r=a.countries.map(function(e){return{platform_country_id:e.id,country_name:e.name,region_name:a.name,region_id:e.region_id,hasSingleCountry:1===a.countries.length}});return[].concat(n(e),n(r))},[])}),h=(t.getFullData=(0,i.createSelector)([d,m],function(e,t){var a=[];return e&&Object.keys(e).forEach(function(e){var n=e,r=t.find(function(e){return e.country_name===n});r&&a.push((0,s.getNewCountryObject)(r.country_name,r.region_name,r.region_id,r.hasSingleCountry,!1))}),(0,u.calculateTableData)(a,l.default.now(),{},!1)}),t.getSelectedUsername=(0,i.createSelector)([d,c],function(e,t){var a="";return e&&t&&Object.keys(e).forEach(function(n){var r=e[n].find(function(e){return e.id===t});r&&(a=r.name)}),a}),[]);t.getCheckedScenarios=(0,i.createSelector)([p],function(e){return e?e.filter(function(e){return e.shared}).map(function(e){return e.id}):h})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),i=n(l),o=a(1),s=n(o),u=a(2),d=n(u),c=a(52),f=a(51),p=n(f),m=a(40),h=n(m),v=function(e){var t=e.rowIndex,a=e.preparedScenarios,n=e.onSelect,l=e.checkedScenarios,o=e.activeUser,s=e.study,u=e.selectedUser,f=r({},a[t]),m=(0,d.default)("data-cell"),v=(0,d.default)("cell-control"),_=(0,h.default)(o,s,r({},f,{state:f.state?f.state:{}})),E=_.isShareAvailable;return i.default.createElement(c.Cell,{className:m},i.default.createElement("div",{className:"cell-underline"}),i.default.createElement("div",{className:v,onClick:function(e){return e.stopPropagation()}},i.default.createElement(p.default,{disabled:!E||!u,label:"",checked:l.indexOf(f.id)>-1,onChange:function(){n(f.id)}})))};v.defaultProps={rowIndex:0,dataField:"",dateType:!1,isBold:!1,study:null,selectedUser:null},v.propTypes={preparedScenarios:s.default.array.isRequired,rowIndex:s.default.number,onSelect:s.default.func.isRequired,checkedScenarios:s.default.array.isRequired,activeUser:s.default.object.isRequired,study:s.default.object,selectedUser:s.default.string},t.default=v},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(8),m=a(18),h=a(10),v=n(h),_=a(28),E=a(36),g=a(77),y=a(7),S=a(37),b=a(884),C=n(b),O=a(128),T=n(O),R=a(101),w=n(R),A=a(32),I=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isRestoredDialogShown:!1},a.onClose=a.onClose.bind(a),a.onSubmit=a.onSubmit.bind(a),a.applyRestoredData=a.applyRestoredData.bind(a),a}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scenarioId,a=e.studyId;this.props.getScenarioViewerData(a,t,!0)}},{key:"componentWillReceiveProps",value:function(e){var t=e.scenario,a=e.studyId,n=e.scenarioId;t&&!(0,y.isEditableScenario)(t,this.props.activeUser,this.props.study)&&this.props.replace("/studies/"+a+"/scenarios/"+n),!e.dirtyData||this.state.isRestoredDialogShown||this.state.restored||this.setState({isRestoredDialogShown:!0})}},{key:"onClose",value:function(){var e=this.props,t=e.showCohorts,a=e.studyId,n=e.scenarioId;this.props.push("/studies/"+a+"/scenarios/"+n+(t?"/cohorts":""))}},{key:"onSubmit",value:function(e){this.props.updateScenario(this.props.studyId,this.props.scenarioId,e).then(this.onClose)}},{key:"applyRestoredData",value:function(){this.setState({isRestoredDialogShown:!1,restored:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.study,n=t.studyId,r=t.scenario,l=t.regionsCountries,i=t.showCohorts,o=t.requirePageRefresh,s=t.scenarioId,u=t.activeUser,c=t.dirtyData,f=t.validateScenarioNameOnEdit;if(!r||!a||!l.length)return d.default.createElement(w.default,null);var p=i?"scenario-wizard__edit--cohort":"scenario-wizard__edit";return d.default.createElement("div",null,!this.state.isRestoredDialogShown&&d.default.createElement(C.default,{key:r.countries.length,activeUser:u,dirtyData:!this.state.discardChanges&&c?c:null,requirePageRefresh:o,showCohorts:i,regionsCountries:l,study:a,studyId:n,scenarioId:s,scenario:r,onClose:this.onClose,validateScenarioName:f,onSubmit:this.onSubmit}),d.default.createElement(T.default,{isShown:this.state.isRestoredDialogShown&&!o,onSubmit:function(){return e.applyRestoredData()},onClose:function(){(0,S.removeParamItemStorage)("fpo-dirty-data",u.id+"-"+n+"-"+s+"-edit"),e.setState({isRestoredDialogShown:!1,discardChanges:!0})}}),d.default.createElement(A.ContextHelpButton,{page:p}))}}]),t}(u.Component);I.defaultProps={study:null,scenario:null,showCohorts:!1,requirePageRefresh:!1,dirtyData:null},I.propTypes={studyId:f.default.number.isRequired,scenarioId:f.default.number.isRequired,study:f.default.object,scenario:f.default.object,updateScenario:f.default.func.isRequired,push:f.default.func.isRequired,replace:f.default.func.isRequired,regionsCountries:f.default.array.isRequired,getScenarioViewerData:f.default.func.isRequired,activeUser:f.default.object.isRequired,showCohorts:f.default.bool,requirePageRefresh:f.default.bool,dirtyData:f.default.object,validateScenarioNameOnEdit:f.default.func.isRequired};var N=function(e,t){var a=+t.params.id,n=+t.params.scenarioId,r=e.errors.sessionExpired||e.errors.internalServer,l=e.auth.user,i=(0,S.getParamItemStorage)("fpo-dirty-data",l.id+"-"+a+"-"+n+"-edit","values"),s={dirtyData:i,activeUser:l,requirePageRefresh:r,study:e.study[a],studyId:a,scenario:null,scenarioId:n,regionsCountries:e.platform.regions,showCohorts:t.location.query.cohorts&&"true"===t.location.query.cohorts},u=e.scenarios[+t.params.scenarioId];return u&&(s.scenario=o({},u,{fp:(0,y.getMomentDate)(u.fp),end_date:(0,y.getMomentDate)(u.end_date),updated:(0,v.default)(u.updated)})),s},D={getPlainStudy:_.getPlainStudy,updateScenario:E.updateScenario,validateScenarioNameOnEdit:E.validateScenarioNameOnEdit,getScenario:E.getScenario,getPlatformRegions:g.getPlatformRegions,getScenarioViewerData:E.getScenarioViewerData,push:m.push,replace:m.replace};t.default=(0,p.connect)(N,D)(I)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1154),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return{closeWizard:function(t){return e((0,y.push)("/studies/"+t))},getStudyOptions:function(){return e((0,I.getStudyOptions)())},getStudy:function(t){return e((0,N.getStudy)(t))},updateStudy:function(t,a){return e((0,N.updateStudy)(t,a))},replace:function(t){return e((0,y.replace)(t))},forbiddenError:function(t){return e((0,D.forbiddenError)(t))},getStudyDashboardData:function(t){return e((0,N.getStudyDashboardData)(t))}}}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),p=a(0),m=n(p),h=a(1),v=n(h),_=a(8),E=a(11),g=n(E),y=a(18),S=a(891),b=n(S),C=a(128),O=n(C),T=a(32),R=a(37),w=a(88),A=a(103),I=a(77),N=a(28),D=a(144),P=a(17),L=function(e){function t(e){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={apiError:!1,isRestoredDialogShown:!1},a.handleSubmit=a.handleSubmit.bind(a),a.applyRestoredData=a.applyRestoredData.bind(a),a}return s(t,e),f(t,[{key:"componentDidMount",value:function(){this.props.getStudyOptions()}},{key:"componentWillReceiveProps",value:function(e){var t=e.study,a=e.studyId;t&&!(0,w.isEditableStudy)(t,this.props.activeUser)&&this.props.replace("/studies/"+a),!e.dirtyData||this.state.isRestoredDialogShown||this.state.restored||this.setState({isRestoredDialogShown:!0})}},{key:"handleSubmit",value:function(e){var t=this,a=["id","study_id","description"].concat(l(P.STUDY_PARAMS),l(P.STUDY_FILTERS));e.synchronizedWithImpact&&(a=["id","study_id","fpfv_fpft","synchronizedWithImpact"].concat(l(P.STUDY_FILTERS)));var n=Object.entries(e).filter(function(e){return a.includes(e[0])}).reduce(function(e,t){var a=c(t,2),n=a[0],l=a[1];return d({},e,r({},n,l))},{});this.props.updateStudy(this.props.studyId,n).then(function(e){var t=n.study_id,a=e.study_details_updated_by;(0,R.setParamItemStorage)("studiesChanged",t,"usersWhoClosed",[]),(0,R.setParamItemStorage)("studiesChanged",t,"updatedBy",a)}).then(function(){t.props.closeWizard(t.props.studyId)}).catch(function(e){var t=new Error(e.message);throw t.status=e.status,t})}},{key:"applyRestoredData",value:function(){this.setState({isRestoredDialogShown:!1,restored:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.availableTherapeuticAreas,n=t.availableIndications,r=t.study,l=t.studyId,i=t.closeWizard,o=t.dirtyData,s=t.activeUser,u=t.requirePageRefresh,d="study-wizard__edit--";return(0,g.default)(r,"state.status")?d+=r.scenarios.length?"ws":"wos":d+="playground",m.default.createElement("div",null,m.default.createElement(b.default,{forbiddenError:this.props.forbiddenError,activeUser:s,studyId:l,dirtyData:!this.state.discardChanges&&o?o:null,requirePageRefresh:u,onClose:i,onSubmit:this.handleSubmit,study:r,availableTherapeuticAreas:a,availableIndications:n}),m.default.createElement(O.default,{isShown:this.state.isRestoredDialogShown&&!u,onSubmit:function(){return e.applyRestoredData()},onClose:function(){(0,R.removeParamItemStorage)("fpo-dirty-data",s.id+"-"+l+"-edit"),e.setState({isRestoredDialogShown:!1,discardChanges:!0})}}),m.default.createElement(T.ContextHelpButton,{page:d}))}}]),t}(p.Component),M=function(e,t){var a=parseInt(t.params.id,10),n=e.errors.sessionExpired||e.errors.internalServer,r=e.auth.user;return{activeUser:r,requirePageRefresh:n,dirtyData:(0,R.getParamItemStorage)("fpo-dirty-data",r.id+"-"+a+"-edit","values"),study:(0,A.getStudyData)(e,t),studyId:a,availableTherapeuticAreas:(0,g.default)(e.platform.studyOptions,"therapeuticAreas",[]),availableIndications:(0,g.default)(e.platform.studyOptions,"indications",[])}};L.propTypes={closeWizard:v.default.func.isRequired,availableTherapeuticAreas:v.default.array.isRequired,availableIndications:v.default.array.isRequired,getStudyOptions:v.default.func.isRequired,updateStudy:v.default.func.isRequired,studyId:v.default.number.isRequired,study:v.default.object,replace:v.default.func.isRequired,requirePageRefresh:v.default.bool,dirtyData:v.default.object,activeUser:v.default.object.isRequired,forbiddenError:v.default.func.isRequired},L.defaultProps={study:null,requirePageRefresh:!1,dirtyData:null},t.default=(0,_.connect)(M,u)(L)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1156),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=parseInt(t.params.id,10);return{studyId:a,study:e.study[a],historicalStudies:(0,_.getFilteredHistoricalStudies)(e,t),selectedHistoricalStudies:(0,_.getSelectedHistoricalStudies)(e,t),activeUser:e.auth.user}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(8),m=a(18),h=a(28),v=a(349),_=a(360);a(485);var E=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.historicalStudies,a=e.study,n=e.studyId;a||this.props.getPlainStudy(n),t&&0!==t.length||this.props.getHistoricalStudies(n)}},{key:"render",value:function(){var e=this.props,t=e.study,a=e.historicalStudies,n=e.children;return t&&a?d.default.createElement("div",null,n):null}}]),t}(u.Component);E.defaultProps={historicalStudies:[],filterValue:"",study:null},E.propTypes={studyId:f.default.number.isRequired,children:f.default.node.isRequired,historicalStudies:f.default.array,getHistoricalStudies:f.default.func.isRequired,getPlainStudy:f.default.func.isRequired,study:f.default.object};var g={getPlainStudy:h.getPlainStudy,getHistoricalStudies:v.getHistoricalStudies,push:m.push};t.default=(0,p.connect)(o,g)(E)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=parseInt(t.params.id,10);return{activeUser:e.auth.user,studyId:a,study:e.study[a],historicalStudies:(0,N.getSelectedHistoricalStudies)(e,t),statistics:(0,N.getSelectedStudiesStatistic)(e,t)}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(8),m=a(18),h=a(59),v=a(22),_=a(86),E=a(6),g=a(54),y=n(g),S=a(12),b=a(508),C=n(b),O=a(498),T=n(O),R=a(509),w=a(32),A=a(28),I=a(349),N=a(360),D=a(49),P=a(40),L=n(P);a(485);var M=a(17),x=n(M),k=a(182),j=n(k),F=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.sortData={fpfv:"DESC",indication:"DESC"},a.scrollTop=0,a.containerWidth=0,a.containerLeft=0,a.initUpdate=!1,a.handleResize=a.handleResize.bind(a),a.handleRowSelect=a.handleRowSelect.bind(a),a.handleSort=a.handleSort.bind(a),a.handleApply=a.handleApply.bind(a),a.handleCancel=a.handleCancel.bind(a),a.handleEdit=a.handleEdit.bind(a),a.metadata=(0,L.default)(e.activeUser,e.study),a}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=!!(0,D.isSupportPassive)()&&{passive:!0};window.addEventListener("resize",this.handleResize,e),window.addEventListener("scroll",this.handleResize,e),this.handleResize()}},{key:"componentWillReceiveProps",value:function(e){var t=e.study,a=e.activeUser,n=e.studyId,r=e.historicalStudies;this.metadata=(0,L.default)(a,t),t&&t.historical_references&&0===t.historical_references.length&&t.state.status!==x.default.ACTIVE&&0===r.length&&this.metadata.isUserHasStudyFullControl&&this.props.replace((0,N.getHistoricalUrl)(n))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("scroll",this.handleResize)}},{key:"getCountSelectedHistorical",value:function(){return this.props.historicalStudies.filter(function(e){return e.selected}).length}},{key:"handleResize",value:function(e){var t=this.container;if(t){var a=t.getBoundingClientRect();this.containerWidth=a.width,this.containerLeft=a.left;var n=document.querySelector(".application").getBoundingClientRect().top;this.initUpdate||(this.initUpdate=!0,this.forceUpdate()),e&&("scroll"===e.type&&this.scrollTop===n||"resize"===e.type)?this.forceUpdate():this.scrollTop=n}}},{key:"handleRowSelect",value:function(e){this.props.toggleCheckbox(e,this.props.studyId)}},{key:"handleSort",value:function(e,t){this.sortData[e]=t,this.props.sortData(e,t,this.props.studyId)}},{key:"handleApply",value:function(){var e=this,t=this.props.historicalStudies.filter(function(e){return e.selected}).map(function(e){return e.study_id});this.props.applyHistoricalStudiesChanges(this.props.studyId,t).then(function(){e.props.rollbackChanges(e.props.studyId)})}},{key:"handleCancel",value:function(){this.props.rollbackChanges(this.props.studyId),this.props.push("/studies/"+this.props.studyId)}},{key:"handleEdit",value:function(){this.props.push((0,N.getHistoricalUrl)(this.props.studyId))}},{key:"render",value:function(){var e=this,t=this.props,a=t.studyId,n=t.study,r=t.activeUser,l=t.historicalStudies,i=t.statistics;if(n&&n.historical_references&&0===n.historical_references.length&&n.state.status!==x.default.ACTIVE&&this.metadata.isUserHasStudyFullControl&&0===l.length)return null;var o=n.state.status!==x.default.ACTIVE&&(n.state.isOwner||r.role===j.default.ADMIN)&&this.metadata.isUserHasStudyFullControl;return d.default.createElement("div",{className:"historical-reference-trials"},d.default.createElement(_.Sidebar,null,d.default.createElement(_.Button,{height:60},d.default.createElement(h.Link,{to:o?"/studies/"+a+"/historical":"/studies/"+a},E.Icons.CHEVRON_LEFT)),d.default.createElement(_.Separator,{height:20})),d.default.createElement(v.Grid,null,d.default.createElement(v.Row,null,d.default.createElement(v.Col,{offset:1,width:9},d.default.createElement("div",null,d.default.createElement("div",{className:"historical-reference-trials__title"},"Historical reference studies"),d.default.createElement("div",null,"Select studies to setup as Historical References. Studies available here are those which have enrolled more than 50% of their patient target, and operated in the last 10 years"))),d.default.createElement("div",{className:"fpo-col-1",width:1,ref:function(t){e.container=t}},d.default.createElement("div",{className:"historical-reference-trials__fixed-bar",style:{width:this.containerWidth,left:this.containerLeft}},d.default.createElement("div",{className:"fixed-bar_line"}),d.default.createElement("div",{className:"historical-reference-trials__close-button",onClick:this.handleCancel},E.Icons.CROSS))))),d.default.createElement("div",{style:{height:"20px"}}),d.default.createElement("div",{style:{minHeight:"calc(100vh - 290px)"}},d.default.createElement(v.Grid,null,d.default.createElement(v.Row,null,d.default.createElement(v.Col,{offset:1,width:9},d.default.createElement(C.default,{columnWidth:2*this.containerWidth+72,isEditable:o,historicalStudies:l,sortData:this.sortData,handleRowSelect:this.handleRowSelect}))),d.default.createElement(v.Row,null,d.default.createElement(v.Col,{offset:1,width:9},d.default.createElement("div",{className:"historical-reference-summary__stat-table-wrapper"},d.default.createElement(S.FlexTable,{noHeader:!0,rowHeight:48,rowsCount:i.length},d.default.createElement(S.Row,{data:i},d.default.createElement(S.Column,{data:d.default.createElement(R.GenericDataCell,{rows:i,dataField:"title"}),width:90,fixedWidth:!0}),d.default.createElement(S.Column,{data:d.default.createElement(R.GenericDataCell,{rows:i,alignTo:"right",dataField:"target_num_patients"}),width:90,fixedWidth:!0}),d.default.createElement(S.Column,{data:d.default.createElement(R.GenericDataCell,{rows:i,alignTo:"right",dataField:"num_countries"}),width:90,fixedWidth:!0}),d.default.createElement(S.Column,{data:d.default.createElement(R.GenericDataCell,{rows:i,alignTo:"right",dataField:"num_sites"}),width:70,fixedWidth:!0}),d.default.createElement(S.Column,{data:d.default.createElement(R.GenericDataCell,{rows:i,alignTo:"right",type:"percentage",dataField:"screen_failure_rate"}),width:72,fixedWidth:!0}),d.default.createElement(S.Column,{data:d.default.createElement(R.GenericDataCell,{rows:i,alignTo:"right",dataField:"enrollment_rate"}),width:70,fixedWidth:!0})))))))),d.default.createElement(v.Grid,null,d.default.createElement(v.Row,null,d.default.createElement(v.Col,{offset:1,width:2},d.default.createElement(T.default,{count:this.getCountSelectedHistorical()})),d.default.createElement(v.Col,{offset:1,width:6},function(){return n.state.status===x.default.ACTIVE||!n.state.isOwner&&r.role!==j.default.ADMIN||!e.metadata.isUserHasStudyFullControl?d.default.createElement("div",{className:"historical-reference-trials-control-buttons__wrapper"},d.default.createElement(y.default,{label:"Cancel",className:"secondary-button",onClick:e.handleCancel})):d.default.createElement("div",{className:"historical-reference-trials-control-buttons__wrapper"},d.default.createElement(y.default,{label:"Edit",className:"secondary-button",onClick:e.handleEdit}),d.default.createElement(y.default,{label:"Apply",onClick:e.handleApply}))}()))),d.default.createElement(w.ContextHelpButton,{page:"historical-reference-studies"}))}}]),t}(u.Component);F.defaultProps={historicalStudies:[],statistics:[]},F.propTypes={activeUser:f.default.object.isRequired,studyId:f.default.number.isRequired,study:f.default.object.isRequired,push:f.default.func.isRequired,replace:f.default.func.isRequired,historicalStudies:f.default.array,toggleCheckbox:f.default.func.isRequired,sortData:f.default.func.isRequired,statistics:f.default.array,applyHistoricalStudiesChanges:f.default.func.isRequired,rollbackChanges:f.default.func.isRequired};var U={getPlainStudy:A.getPlainStudy,getHistoricalStudies:I.getHistoricalStudies,toggleCheckbox:I.toggleCheckbox,sortData:I.sortData,applyHistoricalStudiesChanges:I.applyHistoricalStudiesChanges,rollbackChanges:I.rollbackChanges,push:m.push,replace:m.replace};t.default=(0,p.connect)(o,U)(F)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=parseInt(t.params.id,10);return{activeUser:e.auth.user,studyId:a,study:e.study[a],historicalStudies:(0,A.getFilteredHistoricalStudies)(e,t),filterValue:(0,A.getFilterValue)(e)}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(8),m=a(18),h=a(22),v=a(86),_=a(6),E=a(54),g=n(E),y=a(508),S=n(y),b=a(498),C=n(b),O=a(533),T=n(O),R=a(28),w=a(349),A=a(360),I=a(49),N=a(40),D=n(N),P=a(17),L=n(P);a(485);var M=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.sortData={indication:"ASC",active:"indication"},a.metadata=(0,D.default)(e.activeUser,e.study),a.scrollTop=0,a.containerWidth=0,a.containerLeft=0,a.initUpdate=!1,a.handleResize=a.handleResize.bind(a),a.handleRowSelect=a.handleRowSelect.bind(a),a.handleSort=a.handleSort.bind(a),a.handleFilter=a.handleFilter.bind(a),a.handleCancel=a.handleCancel.bind(a),a}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=!!(0,I.isSupportPassive)()&&{passive:!0};window.addEventListener("resize",this.handleResize,e),window.addEventListener("scroll",this.handleResize,e),this.handleResize()}},{key:"componentWillReceiveProps",value:function(e){var t=e.study,a=e.activeUser,n=e.studyId;this.metadata=(0,D.default)(a,t),this.metadata.isUserHasStudyFullControl&&t.state.status!==L.default.ACTIVE||this.props.push("/studies/"+n+"/historical/summary")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("scroll",this.handleResize)}},{key:"getCountSelectedHistorical",value:function(){return this.props.historicalStudies.filter(function(e){return e.selected}).length}},{key:"handleResize",value:function(e){var t=this.container;if(t){var a=t.getBoundingClientRect();this.containerWidth=a.width,this.containerLeft=a.left;var n=document.querySelector(".application").getBoundingClientRect().top;this.initUpdate||(this.initUpdate=!0,this.forceUpdate()),e&&("scroll"===e.type&&this.scrollTop===n||"resize"===e.type)?this.forceUpdate():this.scrollTop=n}}},{key:"handleRowSelect",value:function(e){this.props.toggleCheckbox(e,this.props.studyId)}},{key:"handleSort",value:function(e,t){this.sortData[e]=t,this.sortData.active=e,this.props.sortData(e,t,this.props.studyId)}},{key:"handleFilter",value:function(e){this.props.filterData(e.target.value)}},{key:"handleCancel",value:function(){this.handleFilter({target:{value:""}}),this.props.rollbackChanges(this.props.studyId),this.props.push("/studies/"+this.props.studyId)}},{key:"render",value:function(){var e=this,t=this.props,a=t.studyId,n=t.study,r=t.historicalStudies,l=t.filterValue,i=n.state.status!==L.default.ACTIVE&&this.metadata.isUserHasStudyFullControl;return d.default.createElement("div",{className:"historical-reference-trials"},d.default.createElement(v.Sidebar,null,d.default.createElement(v.Button,{height:60,onClick:this.handleCancel},_.Icons.CHEVRON_LEFT),d.default.createElement(v.Separator,{height:20})),d.default.createElement(h.Grid,null,d.default.createElement(h.Row,null,d.default.createElement(h.Col,{offset:1,width:9},d.default.createElement("div",null,d.default.createElement("h1",null,"Historical reference studies"),d.default.createElement("div",null,"Select studies to setup as Historical References. Studies available here are those which have enrolled more than 50% of their patient target, and operated in the last 10 years"))),d.default.createElement("div",{className:"fpo-col-1",width:1,ref:function(t){e.container=t}},d.default.createElement("div",{className:"historical-reference-trials__fixed-bar",style:{width:this.containerWidth,left:this.containerLeft}},d.default.createElement("div",{className:"fixed-bar_line"}),d.default.createElement("div",{className:"historical-reference-trials__close-button",onClick:this.handleCancel},_.Icons.CROSS))))),d.default.createElement("div",{style:{height:"20px"}}),d.default.createElement(h.Grid,null,d.default.createElement(h.Row,null,d.default.createElement(h.Col,{offset:1,width:4},d.default.createElement("div",{className:"historical-reference-trials__search-input-wrapper"},d.default.createElement("div",{className:"icon-wrapper"},_.Icons.SEARCH_HISTORICAL),d.default.createElement(T.default,{withoutBorder:!0,placeholder:"Search for study by name, TA or indication",value:l,clearIcon:!0,onClick:function(){return e.handleFilter({target:{value:""}})},onChange:this.handleFilter})))),d.default.createElement(h.Row,null,d.default.createElement(h.Col,{offset:1,width:9},d.default.createElement("div",{style:{minHeight:"calc(100vh - 390px)"}},d.default.createElement(S.default,{columnWidth:2*this.containerWidth+72,isEditable:i,historicalStudies:r,sortData:this.sortData,handleSort:this.handleSort,handleRowSelect:this.handleRowSelect}))))),d.default.createElement(h.Grid,null,d.default.createElement(h.Row,null,d.default.createElement(h.Col,{offset:1,width:1},d.default.createElement(C.default,{count:this.getCountSelectedHistorical()})),d.default.createElement(h.Col,{offset:6,width:2},d.default.createElement("div",{className:"historical-reference-trials-control-buttons__wrapper"},d.default.createElement(g.default,{label:"Cancel",className:"secondary-button",onClick:this.handleCancel}),d.default.createElement(g.default,{label:"Continue",onClick:function(){e.handleFilter({target:{value:""}}),e.props.push("/studies/"+a+"/historical/summary")}}))))))}}]),t}(u.Component);M.defaultProps={historicalStudies:[],filterValue:"",study:null},M.propTypes={studyId:f.default.number.isRequired,push:f.default.func.isRequired,historicalStudies:f.default.array,toggleCheckbox:f.default.func.isRequired,sortData:f.default.func.isRequired,filterValue:f.default.string,filterData:f.default.func.isRequired,rollbackChanges:f.default.func.isRequired,study:f.default.object,activeUser:f.default.object.isRequired};var x={getPlainStudy:R.getPlainStudy,getHistoricalStudies:w.getHistoricalStudies,toggleCheckbox:w.toggleCheckbox,sortData:w.sortData,filterData:w.filterData,rollbackChanges:w.rollbackChanges,push:m.push};t.default=(0,p.connect)(o,x)(M)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HistoricalDataPreloader=t.HistoricalReferenceSummary=t.HistoricalReferenceTrials=void 0;var r=a(1160),l=n(r),i=a(1159),o=n(i),s=a(1158),u=n(s);t.HistoricalReferenceTrials=l.default,t.HistoricalReferenceSummary=o.default,t.HistoricalDataPreloader=u.default,t.default=l.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var a=t.params.id;return{scenario:e.impactScenarios[a]||{},studyId:a,notes:e.impactNotes[a]||[],study:e.study[a],platformRegions:e.platform.regions}}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a(0),p=n(f),m=a(1),h=n(m),v=a(8),_=a(18),E=a(59),g=a(2),y=n(g),S=a(22),b=a(86),C=a(49),O=a(6),T=a(261),R=n(T),w=a(268),A=n(w),I=a(218),N=n(I),D=a(146),P=n(D),L=a(262),M=n(L),x=a(180),k=n(x),j=a(265),F=n(j),U=a(145),V=n(U),B=a(518),H=n(B),G=a(79),Y=n(G),q=a(258),z=n(q),W=a(267),K=n(W),X=a(78),Z=n(X),J=a(112),Q=n(J),$=a(36),ee=a(77),te=a(28),ae=a(213),ne=a(14),re=n(ne),le=a(147),ie=a(362),oe=a(37);a(2408);var se=function(){},ue=function(e){function t(e){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));de.call(a);var n=(0,oe.getParamItemStorage)("fpo-ui-settings","chartState","collapsed"),r=(0,oe.getParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter")||{overallocated:!1,actualData:!0};return a.state={notesPanelOpen:!1,filter:{name:re.default,type:ne.ROLLUP,subject:null},isDuplicateScenarioDialogShown:!1,chartCollapsed:n,tableFilter:r},a.alertsHeight=44,a.alertsPosition=87,a.locationsFilterPosition=87,a.tableHeaderPosition=n?196:398,a.miniChartPosition=146,a.tableFilterPosition=n?146:352,a.exportToExcel=a.exportToExcel.bind(a),a.toggleNotes=a.toggleNotes.bind(a),a.handleFilterSelect=a.handleFilterSelect.bind(a),a}return s(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scenario,a=e.studyId,n=e.platformRegions;this.controller=new AbortController;var r=this.controller.signal;t&&t.study_id===a||this.props.getImpactScenario(a,r),n.length||this.props.getPlatformRegions();var l={root:null,rootMargin:"80px 0px 0px 0px",threshold:.75},i=this.handleMiniChart;this.observer=new IntersectionObserver(i,l),this.chartContainer&&this.observer.observe(this.chartContainer)}},{key:"componentWillReceiveProps",value:function(e){this.props.studyId!==e.studyId&&(this.props.getPlainStudy(e.studyId),this.props.getImpactScenario(e.studyId)),this.setState({filter:{name:re.default,type:ne.ROLLUP,subject:null}})}},{key:"componentDidUpdate",value:function(){this.chartContainer&&this.observer.observe(this.chartContainer)}},{key:"componentWillUnmount",value:function(){this.controller.abort(),this.chartContainer&&this.observer.unobserve(this.chartContainer)}},{key:"handleFilterSelect",value:function(e){this.setState({filter:e})}},{key:"exportToExcel",value:function(){var e=this.props,t=e.study,a=e.scenario;(0,le.exportToExcel)(t,a,a.fullData)}},{key:"toggleNotes",value:function(){this.setState({notesPanelOpen:!this.state.notesPanelOpen})}},{key:"render",value:function(){var e=this,t=this.props,a=t.scenario,n=t.study,r=t.platformRegions,i=t.notes,o=this.state,s=o.filter,u=o.tableFilter,d=o.chartCollapsed;if(!a.study_id||!n||!r.length)return null;var c=a.fullData.find(function(e){return e.type.toUpperCase()===ne.ROLLUP})||{},f=a.fullData.find(function(e){return e.location===s.name&&e.type===s.type.toLowerCase()&&(!s.subject||e.region===s.subject)}),m=[];if(m.push(c),s.type===ne.REGION){var h=a.fullData.filter(function(e){return e.location===s.name||e.region_name===s.name});m=[].concat(l(m),l(h))}else if(s.type===ne.COUNTRY){var v=a.fullData.find(function(e){return e.location===s.name&&e.type.toUpperCase()===ne.COUNTRY&&(!s.subject||e.region===s.subject)}),_=a.fullData.find(function(e){return e.location===v.region_name});m=[].concat(l(m),[_,v])}else m=a.fullData;var g=void 0!==f.actual_overallocation&&0!==f.actual_overallocation;return p.default.createElement("div",{className:"cohorts-scenario-container screenshot-container"},p.default.createElement(b.Sidebar,null,p.default.createElement(b.Button,{height:60},p.default.createElement(E.Link,{to:"/"},O.Icons.HOME)),p.default.createElement(b.Separator,{height:20}),p.default.createElement(b.Button,{height:51,onClick:function(){return e.props.backToStudy()}},O.Icons.CHEVRON_LEFT),p.default.createElement(b.Separator,{height:22,noLine:!0}),p.default.createElement(b.Button,{height:56,onClick:this.toggleNotes,tooltip:"Notes"},p.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},O.Icons.NOTES,p.default.createElement("div",{className:"sup"},i.length>0?(0,C.kFormatter)(i.length):""))),p.default.createElement(b.Button,{height:56,onClick:se,tooltip:"Events",disabled:!0},p.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},O.Icons.EVENT,p.default.createElement("div",{className:"sup"}))),p.default.createElement(b.Separator,{height:20}),p.default.createElement(b.Button,{height:56,disabled:!0,onClick:se,tooltip:"Save"},O.Icons.SAVE),p.default.createElement(b.Button,{height:56,tooltip:"Duplicate and edit",disabled:!0,actionName:ne.SIDEBAR_BUTTONS.DUPLICATE,onClick:this.handleDuplicateScenarioClick},O.Icons.DUPLICATE),p.default.createElement(z.default,{exportToExcel:this.exportToExcel,study:n,scenario:a,filter:s.name}),p.default.createElement(b.Button,{height:56,disabled:!0,tooltip:"Edit",onClick:se},O.Icons.EDIT),p.default.createElement(b.Separator,{height:20}),p.default.createElement(b.Button,{height:56,disabled:!0,tooltip:"Optimize scenario"},O.Icons.OPTIMISE),p.default.createElement(b.Button,{height:56,disabled:!0,tooltip:"Approve scenario",actionName:ne.SIDEBAR_BUTTONS.APPROVE,onClick:se},O.Icons.APPROVE)),p.default.createElement(S.Grid,null,p.default.createElement(S.Row,null,p.default.createElement(S.Col,{offset:8,width:4},p.default.createElement(R.default,{isImpact:a.isImpact,notes:i,isEditable:!0,scenarioId:a.study_id,onSubmitNote:this.props.addImpactScenarioNote,onClose:this.toggleNotes,expanded:this.state.notesPanelOpen})))),p.default.createElement(Y.default,{style:{zIndex:4}},p.default.createElement("div",{ref:function(t){e.titleBar=t}},p.default.createElement("div",{className:"scenario__title-bar approved"},p.default.createElement(S.Grid,null,p.default.createElement(S.Row,{className:"approved",style:{height:"87px"}},p.default.createElement(S.Col,{offset:1,width:6},p.default.createElement(Z.default,null,p.default.createElement(F.default,{name:a.name,modified:null,approvedAt:a.approvedAt,optimised:a.last_optimisation_date,adjusted:a.adjusted_createdAt,status:a.status,isAdjusted:!1,optimisationWarning:!1,studyId:n.study_id}))),p.default.createElement(S.Col,{width:5},p.default.createElement("div",{className:"scenario-alerts-wrapper"},p.default.createElement(Z.default,null,p.default.createElement(A.default,{scenario:a,globalData:c,study:n}))))))))),p.default.createElement("div",{ref:function(t){e.container=t},className:(0,y.default)("impact-scenario-container",{"show-alert":g})},g&&p.default.createElement(Y.default,{style:{top:this.alertsPosition+"px",zIndex:4}},p.default.createElement("div",{className:"alerts-container"},p.default.createElement(S.Grid,null,p.default.createElement(S.Row,null,p.default.createElement(S.Col,{offset:1,width:11},p.default.createElement(Z.default,null,p.default.createElement(V.default,{isShown:!0,title:"",status:"info",className:"overallocation-alert"},p.default.createElement(H.default,{isAggregatedRowSelected:"country"!==f.type&&!f.isRegionCountry,numberOfPatients:f.actual_overallocation,countryName:f.location,originalLpft:f.original_f_lpft})))))))),p.default.createElement(Y.default,{key:g?this.locationsFilterPosition+this.alertsHeight:this.locationsFilterPosition,style:g?{top:this.locationsFilterPosition+this.alertsHeight+"px",zIndex:4}:{top:this.locationsFilterPosition+"px",zIndex:4}},p.default.createElement("div",{className:"filters-container"},p.default.createElement(S.Grid,null,p.default.createElement(S.Row,null,p.default.createElement(S.Col,{offset:1,width:11},p.default.createElement(Z.default,null,p.default.createElement(k.default,{activeFilter:s,data:a.fullData,platformRegions:r,onFilterSelect:this.handleFilterSelect}))))))),p.default.createElement("div",null,p.default.createElement(S.Grid,null,p.default.createElement(S.Row,{className:"scenario-highlights-bar"},p.default.createElement(Z.default,null,p.default.createElement(N.default,{globalData:c,target:a.end_date,predicted:f.lpft,fpfv_lpfv:f.fpfv_lpfv,fpp_fpfv:f.fpp_fpfv,actual_date:f.actual_date,startDate:a.fp,actual_fpfv_lpfv:f.actual_fpfv_lpfv,actual_fpp_fpfv:f.actual_fpp_fpfv,actual_f_lpft:f.actual_f_lpft,adjusted_fpfv_lpfv:f.adjusted_fpfv_lpfv,adjusted_fpp_fpfv:f.adjusted_fpp_fpfv,showAdjusted:!1,showActual:!0,isOverallocated:g,isImpact:!0})),p.default.createElement(S.Col,{width:1},p.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"flex-end"}},p.default.createElement(D.ChartCollapseControl,{isCollapsed:this.state.chartCollapsed,onOptionSelect:this.handleChartCollapse})))))),!d&&p.default.createElement(Q.default,{scenario:a,isImpact:!0,studyStatus:n.state.status,data:f},p.default.createElement("div",{ref:function(t){e.chartContainer=t},className:"chart-container"},p.default.createElement(S.Grid,null,p.default.createElement(S.Row,null,p.default.createElement(S.Col,{offset:1,width:11},p.default.createElement("div",{className:"full-chart"},p.default.createElement(Z.default,null,p.default.createElement(P.default,null))))))),p.default.createElement("div",{ref:function(t){e.miniChartContainer=t},style:{top:(g?this.miniChartPosition+this.alertsHeight:this.miniChartPosition)+"px"},className:"minimised-chart-container exclude-from-screenshot"},p.default.createElement(S.Grid,null,p.default.createElement(S.Row,null,p.default.createElement(S.Col,{offset:1,width:11},p.default.createElement("div",{className:"minimised-chart"},p.default.createElement(Z.default,null,p.default.createElement(D.MinimisedEnrolmentChart,null)))))))),p.default.createElement(Y.default,{key:g?this.tableFilterPosition+this.alertsHeight:this.tableFilterPosition,className:"exclude-from-screenshot",style:{top:(g?this.tableFilterPosition+this.alertsHeight:this.tableFilterPosition)+"px",backgroundColor:"white",height:"50px",zIndex:2}},p.default.createElement(S.Grid,null,p.default.createElement(S.Row,null,p.default.createElement(S.Col,{offset:1,width:11},p.default.createElement("div",{className:"table-filter"},p.default.createElement(Z.default,null,p.default.createElement(K.default,{showOverallocation:!!c.overallocatedData||!!c.adjusted_overallocatedData,onChange:this.handleTableFilterChange,actualData:u&&u.actualData,overallocated:u&&u.overallocated}))))))),p.default.createElement(S.Grid,null,p.default.createElement(S.Row,{className:"exclude-from-screenshot"},p.default.createElement(S.Col,{offset:1,width:11},p.default.createElement(Z.default,null,p.default.createElement(M.default,{batchUpdate:se,onMultiCheck:se,onMultiEditingApply:se,onMultiEditingCancel:se,onMultiEditingCellChange:se,isMultiEditing:!1,multiRegionsData:{},data:m,scenario:a,study:n,onCopy:se,onPaste:se,isCohortView:!0,navigateToViewSites:se,platformRegions:r,tableFilter:u,tableHeaderPosition:g?this.tableHeaderPosition+this.alertsHeight:this.tableHeaderPosition,onInvalidData:se,isEditable:!1,isHistoricalDataViewEnabled:!1,isAdjusted:!1,isTracking:!0,onDataChange:se,handleAddRegion:se,handleAddCountry:se,handleDeleteRegion:se,handleDeleteCountry:se,resetCountryData:se,onToggleEvents:se})))))))}}]),t}(f.Component),de=function(){var e=this;this.handleMiniChart=function(t){t.forEach(function(t){t.boundingClientRect.top<=-150&&!e.state.fixedChart?(e.miniChartContainer.style.visibility="visible",e.chartContainer.style.visibility="hidden",e.setState({fixedChart:!0})):e.state.fixedChart&&(e.miniChartContainer.style.visibility="hidden",e.chartContainer.style.visibility="visible",e.setState({fixedChart:!1}))})},this.handleDuplicateScenarioClick=function(){e.setState({isDuplicateScenarioDialogShown:!0})},this.handleDuplicateScenarioDialogClose=function(){e.setState({isDuplicateScenarioDialogShown:!1})},this.handleDuplicateScenarioDialogSubmit=function(t){var a=e.props,n=a.studyId,r=a.scenario,l=a.navigateToScenario,i=(0,ie.prepareImpactScenarioData)(r);i.name=t,e.props.duplicateImpactScenario(n,i).then(function(e){var t=e.id;return l(n,t)}),e.handleDuplicateScenarioDialogClose()},this.handleChartCollapse=function(t){e.tableHeaderPosition=t?196:398,e.tableFilterPosition=t?146:352,null===e.state.chartCollapsed?(0,oe.addToStorage)("fpo-ui-settings",{id:"chartState",selected:t}):(0,oe.setParamItemStorage)("fpo-ui-settings","chartState","collapsed",t),e.setState({chartCollapsed:t})},this.handleTableFilterChange=function(t){var a=d({},e.state.tableFilter,r({},t,!e.state.tableFilter[t]));(0,oe.getParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter")?(0,oe.setParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter",a):(0,oe.addToStorage)("fpo-ui-settings",{id:"tableFilter",tableFilter:a}),e.setState({tableFilter:a})}};ue.propTypes={getImpactScenario:h.default.func.isRequired,scenario:h.default.object,study:h.default.object,studyId:h.default.string.isRequired,getPlainStudy:h.default.func.isRequired,getPlatformRegions:h.default.func.isRequired,platformRegions:h.default.array.isRequired,duplicateImpactScenario:h.default.func.isRequired,backToStudy:h.default.func.isRequired,notes:h.default.array,navigateToScenario:h.default.func.isRequired,addImpactScenarioNote:h.default.func.isRequired},ue.defaultProps={scenario:void 0,study:void 0,notes:[]};var ce={getImpactScenario:$.getImpactScenario,getPlainStudy:te.getPlainStudy,getPlatformRegions:ee.getPlatformRegions,addImpactScenarioNote:ae.addImpactScenarioNote,duplicateImpactScenario:$.duplicateImpactScenario,push:_.push,navigateToScenario:function(e,t){return(0,_.push)("/studies/"+e+"/scenarios/"+t)}},fe=function(e,t,a){var n=t.push,r=e.scenario;return d({},a,e,t,{backToStudy:function(){return n("/studies/"+a.params.id+(r&&r.is_archived?"/archived":""))}})};t.default=(0,v.connect)(u,ce,fe)(ue)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1162),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1165),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=parseInt(t.params.id,10),n=e.errors.sessionExpired||e.errors.internalServer,r=e.auth.user;return{dirtyData:(0,N.getParamItemStorage)("fpo-dirty-data",r.id+"-"+a+"-new","values"),activeUser:r,requirePageRefresh:n,studyId:a,study:e.study[a],regionsCountries:e.platform.regions.map(function(e){var t=e.countries.map(function(e){return u({},e,{platform_country_id:e.id})});return u({},e,{countries:t})}),showCohorts:t.location.query.cohorts&&"true"===t.location.query.cohorts}}function s(e){return{goToStudy:function(t){return e((0,h.push)("/studies/"+t))},loadRegions:function(){return e((0,w.getPlatformRegions)())},getStudy:function(t){return e((0,R.getPlainStudy)(t))},forbiddenError:function(t){return e((0,D.forbiddenError)(t))},createNewScenario:function(t,a,n){return e((0,T.default)(t,a,n))}}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),m=n(p),h=a(18),v=a(8),_=a(513),E=n(_),g=a(214),y=n(g),S=a(128),b=n(S),C=a(32),O=a(36),T=n(O),R=a(28),w=a(77),A=a(17),I=n(A),N=a(37),D=a(144),P=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={apiError:!1,isRestoredDialogShown:!1},a.createNewScenario=a.createNewScenario.bind(a),a.applyRestoredData=a.applyRestoredData.bind(a),a}return i(t,e),d(t,[{key:"componentDidMount",value:function(){null===this.props.study&&this.props.getStudy(this.props.studyId),0===this.props.regionsCountries.length&&this.props.loadRegions()}},{key:"componentWillReceiveProps",value:function(e){e.dirtyData&&!this.state.isRestoredDialogShown&&this.setState({isRestoredDialogShown:!0})}},{key:"createNewScenario",value:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.props.createNewScenario.apply(this,Object.values(t))}},{key:"applyRestoredData",value:function(){(0,N.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"-"+this.props.studyId+"-new"),this.setState({isRestoredDialogShown:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.studyId,n=t.study,r=t.regionsCountries,l=t.goToStudy,i=t.showCohorts,o=t.requirePageRefresh,s=t.activeUser,u=t.dirtyData;if(!n||!r||0===r.length)return null;var d=i?"scenario-wizard__create--cohort":"scenario-wizard__create";return n.state.status===I.default.ACTIVE||n.state.status===I.default.COMPLETED?f.default.createElement(y.default,{isShown:!0,status:"error",title:"Forbidden",handleClose:function(){return l(a)}},"You do not have access to view this page"):f.default.createElement("div",null,!this.state.isRestoredDialogShown&&f.default.createElement(E.default,{showCohorts:i,studyId:a,study:n,regionsCountries:r,onClose:l,activeUser:s,dirtyData:this.state.discardChanges?null:u,requirePageRefresh:o,forbiddenError:this.props.forbiddenError,onSubmit:this.createNewScenario}),f.default.createElement(b.default,{isShown:this.state.isRestoredDialogShown&&!o,onSubmit:function(){return e.applyRestoredData()},onClose:function(){(0,N.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-new"),e.setState({isRestoredDialogShown:!1,discardChanges:!0})}}),f.default.createElement(C.ContextHelpButton,{page:d}))}}]),t}(c.Component);P.defaultProps={study:null,showCohorts:!1,requirePageRefresh:!1,dirtyData:null},P.propTypes={createNewScenario:m.default.func.isRequired,getStudy:m.default.func.isRequired,goToStudy:m.default.func.isRequired,loadRegions:m.default.func.isRequired,regionsCountries:m.default.array.isRequired,study:m.default.object,studyId:m.default.number.isRequired,showCohorts:m.default.bool,activeUser:m.default.object.isRequired,requirePageRefresh:m.default.bool,dirtyData:m.default.object,forbiddenError:m.default.func.isRequired},t.default=(0,v.connect)(o,s)(P)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1167),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=e.errors.sessionExpired||e.errors.internalServer,n=e.auth.user;return{dirtyData:(0,R.getParamItemStorage)("fpo-dirty-data",n.id+"--1-new","values"),activeUser:n,requirePageRefresh:a,availableIndications:(0,E.default)(e.platform.studyOptions,"indications",[]),availableTherapeuticAreas:(0,E.default)(e.platform.studyOptions,"therapeuticAreas",[]),regionsCountries:e.platform.regions.map(function(e){var t=e.countries.map(function(e){return u({},e,{platform_country_id:e.id})});return u({},e,{countries:t})}),showCohorts:t.location.query.cohorts&&"true"===t.location.query.cohorts}}function s(e){return{closeWizard:function(){return e((0,h.push)("/studies"))},loadRegions:function(){return e((0,T.getPlatformRegions)())},createNewStudyAndScenario:function(t){return e((0,O.createNewStudyAndScenario)(t))},getStudyOptions:function(){return e((0,T.getStudyOptions)())},forbiddenError:function(t){return e((0,w.forbiddenError)(t))}}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(0),f=n(c),p=a(1),m=n(p),h=a(18),v=a(8),_=a(11),E=n(_),g=a(513),y=n(g),S=a(128),b=n(S),C=a(32),O=a(28),T=a(77),R=a(37),w=a(144),A=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={apiError:!1,isRestoredDialogShown:!1},a.handleSubmit=a.handleSubmit.bind(a),a.applyRestoredData=a.applyRestoredData.bind(a),a}return i(t,e),d(t,[{key:"componentDidMount",value:function(){0===this.props.regionsCountries.length&&this.props.loadRegions(),this.props.getStudyOptions()}},{key:"componentWillReceiveProps",value:function(e){e.dirtyData&&!this.state.isRestoredDialogShown&&this.setState({isRestoredDialogShown:!0})}},{key:"handleSubmit",value:function(e,t){var a={study:e,scenario:t};this.props.createNewStudyAndScenario(a)}},{key:"applyRestoredData",value:function(){(0,R.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"--1-new"),this.setState({isRestoredDialogShown:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.regionsCountries,n=t.availableIndications,r=t.availableTherapeuticAreas,l=t.closeWizard,i=t.showCohorts,o=t.requirePageRefresh,s=t.activeUser,u=t.dirtyData;if(!a||0===a.length)return null;var d=i?"study-wizard__create--cohort":"study-wizard__create";return f.default.createElement("div",null,!this.state.isRestoredDialogShown&&f.default.createElement(y.default,{forbiddenError:this.props.forbiddenError,activeUser:s,requirePageRefresh:o,dirtyData:this.state.discardChanges?null:u,newStudy:!0,showCohorts:i,studyId:-1,study:{},regionsCountries:a,onClose:l,onSubmit:this.handleSubmit,availableIndications:n,availableTherapeuticAreas:r}),f.default.createElement(b.default,{isShown:this.state.isRestoredDialogShown&&!o,onSubmit:function(){return e.applyRestoredData()},onClose:function(){(0,R.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"--1-new"),e.setState({isRestoredDialogShown:!1,discardChanges:!0})}}),f.default.createElement(C.ContextHelpButton,{page:d}))}}]),t}(c.Component);A.defaultProps={showCohorts:!1,requirePageRefresh:!1,dirtyData:null},A.propTypes={availableIndications:m.default.array.isRequired,availableTherapeuticAreas:m.default.array.isRequired,getStudyOptions:m.default.func.isRequired,createNewStudyAndScenario:m.default.func.isRequired,closeWizard:m.default.func.isRequired,loadRegions:m.default.func.isRequired,regionsCountries:m.default.array.isRequired,showCohorts:m.default.bool,activeUser:m.default.object.isRequired,requirePageRefresh:m.default.bool,dirtyData:m.default.object,forbiddenError:m.default.func.isRequired},t.default=(0,v.connect)(o,s)(A)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1169),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{notifications:e.notification.notifications}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),f=a(30),p=n(f),m=a(1),h=n(m),v=a(323),_=a(8),E=a(18),g=a(2),y=n(g),S=a(6),b=a(823),C=n(b),O=a(15);a(2409);var T={entering:{transform:"translate3d(0, 0, 0)"},entered:{transform:"translate3d(-340px, 0, 0)"},exiting:{transform:"translate3d(-340px, 0, 0)"},exited:{transform:"translate3d(0, 0, 0)"}},R=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.notifications,a=e.push,n=e.hideNotification;return p.default.createPortal(c.default.createElement("div",{className:"fpo-notifications"},t.map(function(e){var t=e.animateIn,r=e.notificationType,l=e.message,i=e.id,o=e.link;return c.default.createElement(v.Transition,{in:t,timeout:0,key:i,appear:!0},function(e){return c.default.createElement("div",{onClick:function(){o&&(n(i),a(o))},className:(0,y.default)("fpo-notifications-panel",{clickable:o}),style:s({},T[e])},c.default.createElement("div",{className:"fpo-notifications-panel__content-wrapper"},r&&(r===O.SUCCESS||r===O.ERROR)&&c.default.createElement("div",{className:(0,y.default)("status-icon__wrapper",{success:r===O.SUCCESS,error:r===O.ERROR})},r===O.SUCCESS?S.Icons.SUCCESS:S.Icons.CROSS_O),c.default.createElement("div",{className:"notification-message__wrapper"},l),c.default.createElement("div",{className:"notification-close",onClick:function(e){e.stopPropagation(),n(i)}},S.Icons.CROSS)))})})),document.body)}}]),t}(d.Component);R.defaultProps={notifications:[]},R.propTypes={notifications:h.default.array,push:h.default.func.isRequired,hideNotification:h.default.func.isRequired};var w={hideNotification:C.default,push:E.push};t.default=(0,_.connect)(o,w)(R)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1171),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var a=t.scenarioId,n=t.studyId,r=t.scenario,l=t.countries,i=e.study[n];r.studyParamsWarning=(0,Be.getStudyParamsWarning)(i,r);var o=(0,ke.getParamItemStorage)("fpo-dirty-data",e.auth.user.id+"-"+n+"-"+a,"values"),s=null;if(o&&o.valuesToSave){var u=(0,Le.getDateFields)();s=o.valuesToSave.map(function(e){var t=e;return t.fp=(0,Le.getMomentDate)(t.fp),u.has(t.fieldName)&&(t.fieldValue=(0,Le.getMomentDate)(t.fieldValue)),t})}var d=null;return o&&o.countriesToRemove&&(d=o.countriesToRemove),{countriesToRemove:d,requirePageRefresh:!(!e.errors.sessionExpired&&!e.errors.internalServer),valuesToSave:s,scenario:r,study:i,countries:l,scenarioId:a,studyId:n,platformRegions:e.platform.regions,isPlatformRegionsLoading:e.platform.isRegionsLoading,activeUser:e.auth.user,notes:(0,Me.getScenarioNotesFromStore)(e,a).length,studies:e.studies.studies}}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a(0),p=n(f),m=a(30),h=n(m),v=a(1),_=n(v),E=a(8),g=a(18),y=a(31),S=n(y),b=a(199),C=n(b),O=a(83),T=n(O),R=a(200),w=n(R),A=a(2),I=n(A),N=a(742),D=n(N),P=a(10),L=n(P),M=a(84),x=n(M),k=a(22),j=a(180),F=n(j),U=a(218),V=n(U),B=a(494),H=n(B),G=a(146),Y=n(G),q=a(257),z=n(q),W=a(350),K=n(W),X=a(952),Z=n(X),J=a(353),Q=n(J),$=a(129),ee=n($),te=a(261),ae=n(te),ne=a(352),re=n(ne),le=a(1174),ie=n(le),oe=a(79),se=n(oe),ue=a(128),de=n(ue),ce=a(262),fe=n(ce),pe=a(1173),me=n(pe),he=a(1172),ve=n(he),_e=a(267),Ee=n(_e),ge=a(358),ye=a(32),Se=a(78),be=n(Se),Ce=a(356),Oe=n(Ce),Te=a(101),Re=n(Te),we=a(112),Ae=n(we),Ie=a(36),Ne=a(28),De=a(77),Pe=a(213),Le=a(7),Me=a(48),xe=a(559),ke=a(37),je=a(40),Fe=n(je),Ue=a(147),Ve=a(63),Be=a(64),He=a(70),Ge=a(221),Ye=a(14),qe=n(Ye),ze=a(47),We=n(ze),Ke=a(17),Xe=n(Ke),Ze=(0,x.default)(Fe.default),Je=(0,x.default)(Be.getFilteredData),Qe=(0,x.default)(Be.getFilteredTableData),$e=(0,x.default)(Be.getTableHeaderPosition),et=(0,x.default)(Be.getGlobalRollupData),tt=function(e){function t(e){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));at.call(a);var n=[Ye.SIDEBAR_BUTTONS.SAVE],r=(0,Le.getScenarioCalculatedData)(e.countries,e.scenario),l=(0,ke.getParamItemStorage)("fpo-ui-settings","chartState","collapsed"),s=(0,ke.getParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter"),u=(0,ke.getParamItemStorage)("fpo-ui-settings","chartViewMode","showOverallocationOnChart");a.state={valuesToSave:[],countriesToRemove:[],filter:{name:qe.default,type:Ye.ROLLUP,subject:null},disabledButtons:n,fullData:r,countries:e.countries,isDuplicateScenarioDialogShown:!1,isApproveScenarioDialogShown:!1,isOptimiseScenarioDialogShown:!1,isSaveChangesDialogShown:!1,isIncompleteDataDialogShown:!1,isRestoredDialogShown:!1,isMultiEditing:!1,multiEditingValues:{},saveChangesActionType:void 0,collapsedRegions:[],isStudyChangedDialogClose:!1,currentLocation:"",currentRegion:"",currentEvents:[],historicalEnabled:!1,historicalFilter:"INDICATION",multiRegionsData:{},isShowApplyingEditsDialog:!1,clipboard:{},dataHistoryPointer:0,chartCollapsed:l,tableFilter:s,showOverallocationOnChart:u,showLoader:!1};var d={disabledButtons:(0,S.default)(n),valuesToSave:[],countriesToRemove:[],fullData:(0,S.default)(r),scenario:e.scenario};return a.dataHistory=[d],a.fixedChart=!1,a.notesPanelOpen=!1,a.eventsPanelOpen=!1,a.alertsHeight=44,a.alertsPosition=87,a.historicalBenchmarkHeight=50,a.historicalBenchmarkPosition=l?146:348,a.locationsFilterPosition=87,a.tableHeaderPosition=l?196:398,a.miniChartPosition=146,a.handleFilterSelect=a.handleFilterSelect.bind(a),a.handleBackClick=a.handleBackClick.bind(a),a.handleDuplicateScenarioClick=a.handleDuplicateScenarioClick.bind(a),a.handleDuplicateScenarioDialogClose=a.handleDuplicateScenarioDialogClose.bind(a),a.handleDuplicateScenarioDialogSubmit=a.handleDuplicateScenarioDialogSubmit.bind(a),a.handlerEditScenarioClick=a.handlerEditScenarioClick.bind(a),a.handleValidationChange=a.handleValidationChange.bind(a),a.saveRowValues=(0,C.default)(a.saveRowValues.bind(a),2e3,{trailing:!1}),a.handleSubmitApproveScenario=(0,C.default)(a.handleSubmitApproveScenario.bind(a),4e3,{trailing:!1}),a.exportToExcel=a.exportToExcel.bind(a),a.handlerApproveScenario=a.handlerApproveScenario.bind(a),a.handlerOptimiseScenario=a.handlerOptimiseScenario.bind(a),a.handleEsc=a.handleEsc.bind(a),a.handleUnsavedAction=a.handleUnsavedAction.bind(a),a.toggleNotes=a.toggleNotes.bind(a),a.toggleEvents=a.toggleEvents.bind(a),a.multiCheck=a.multiCheck.bind(a),a.closeEventsPanel=a.closeEventsPanel.bind(a),a.addCountryForPlay=a.addCountryForPlay.bind(a),a.removeScenarioRegion=a.removeScenarioRegion.bind(a),a.removeScenarioCountry=a.removeScenarioCountry.bind(a),a.handleToggleRegion=a.handleToggleRegion.bind(a),a.handleCloseScenarioDialog=a.handleCloseScenarioDialog.bind(a),a.navigateToEvents=a.navigateToEvents.bind(a),a.setHistoricalStatus=a.setHistoricalStatus.bind(a),a.setHistoricalFilter=a.setHistoricalFilter.bind(a),a.handleMultiEditingClick=a.handleMultiEditingClick.bind(a),a.onMultiEditingCellChange=a.onMultiEditingCellChange.bind(a),a.onMultiEditingCancel=a.onMultiEditingCancel.bind(a),a.onMultiEditingApply=a.onMultiEditingApply.bind(a),a.onStudyChangedDialogClose=a.onStudyChangedDialogClose.bind(a),a.handleCloseApplyingEditsDialog=a.handleCloseApplyingEditsDialog.bind(a),a.handleSubmitApplyingEditsDialog=a.handleSubmitApplyingEditsDialog.bind(a),a.handleSaveData=a.handleSaveData.bind(a),a.handleSaveDataDialogClose=a.handleSaveDataDialogClose.bind(a),a.applyRestoredData=a.applyRestoredData.bind(a),a}return s(t,e),c(t,[{key:"componentDidMount",value:function(){document.body.addEventListener("keydown",this.handleEsc);var e={root:null,rootMargin:"80px 0px 0px 0px",threshold:.75},t=this.handleMiniChart;this.observer=new IntersectionObserver(t,e),this.chartContainer&&this.observer.observe(this.chartContainer)}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(this.props.scenarioId!==e.scenarioId)this.setState({filter:{name:qe.default,type:Ye.ROLLUP,subject:null}});else{var a=this.state.filter,n=this.state.valuesToSave,r=this.state.countriesToRemove;e.requirePageRefresh&&(n&&n.length>0||r&&r.length>0)&&((0,ke.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"-"+this.props.studyId+"-"+this.props.scenarioId),(0,ke.addToStorage)("fpo-dirty-data",{id:e.activeUser.id+"-"+e.studyId+"-"+e.scenarioId,values:this.state}));var l=!1;a.type===Ye.REGION?l=void 0!==e.countries.find(function(e){return e.region_name===a.name}):a.type===Ye.COUNTRY&&(l=void 0!==e.countries.find(function(e){return e.country_name===a.name&&e.region_name===a.subject})),l||this.setState({filter:{name:qe.default,type:Ye.ROLLUP,subject:null}});var i=e.countries;r&&r.length>0&&i.forEach(function(e){r.includes(e.country_id)&&t.props.removeCountryFromCountriesList(t.props.scenarioId,e.region_id,e.country_name)}),n.length>0&&n.forEach(function(t){var a=i.find(function(e){return t.countryName===e.country_name&&t.regionName===e.region_name});if(a)a[t.fieldName]=t.fieldValue;else if(e.platformRegions&&e.platformRegions.length>0){var n=e.platformRegions.find(function(e){return e.name===t.regionName}),r=(0,Le.getNewCountryObject)(t.countryName,t.regionName,t.regionName,n&&1===n.countries.length,!1);r[t.fieldName]=t.fieldValue,i.push(r)}});var o={isRestoredDialogShown:!(!e.valuesToSave&&!e.countriesToRemove),countriesToRemove:e.countriesToRemove&&e.countriesToRemove.length>0?e.countriesToRemove:r,valuesToSave:e.valuesToSave?e.valuesToSave:n,fullData:(0,Le.getScenarioCalculatedData)(i,e.scenario)};e.valuesToSave&&(o.disabledButtons=[]),this.setState(o,function(){1===t.dataHistory.length&&t.dataHistory[0].scenario?t.dataHistory[0].scenario.updatedAt!==e.scenario.updatedAt&&(t.dataHistory=[],t.setState({dataHistoryPointer:-1},function(){t.addHistoryStep(!0)})):0===t.dataHistory.length&&-1===t.state.dataHistoryPointer&&t.addHistoryStep(!0)})}}},{key:"componentDidUpdate",value:function(){this.chartContainer&&this.observer.observe(this.chartContainer)}},{key:"componentWillUnmount",value:function(){this.chartContainer&&this.observer.unobserve(this.chartContainer),document.body.removeEventListener("keydown",this.handleEsc)}},{key:"handleEsc",value:function(e){27===(e.charCode||e.keyCode||e.which)&&e.preventDefault()}},{key:"saveRowValues",value:function(){var e=this;return this.setState({disabledButtons:[Ye.SIDEBAR_BUTTONS.SAVE]}),new Promise(function(t){e.state.countriesToRemove&&e.state.countriesToRemove.length>0&&t(e.props.removeScenarioCountry(e.props.scenario.id,e.state.countriesToRemove)),t()}).then(function(){var t=e.state.valuesToSave,a=[],n=t.concat(a),r=(0,Le.prepareDataToSaveOverrides)(n,e.props.platformRegions);return e.props.saveOverrides(r,e.props.studyId,e.props.scenario.id).then(function(){return(0,ke.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-"+e.props.scenarioId),e.dataHistory=[],e.setState({isIncompleteDataDialogShown:!1,valuesToSave:[],countriesToRemove:[],disabledButtons:[Ye.SIDEBAR_BUTTONS.SAVE],dataHistoryPointer:-1}),!0}).catch(function(){e.setState({disabledButtons:[]})})})}},{key:"onStudyChangedDialogClose",value:function(){this.setState({isStudyChangedDialogClose:!0}),(0,xe.hideDialogStudyChanged)(this.props.study.study_id,this.props.activeUser.id)}},{key:"handleFilterSelect",value:function(e){var t=this;this.setState({filter:e,isMultiEditing:!1,multiEditingValues:{},multiRegionsData:{}},function(){t.miniChartContainer&&"visible"===t.miniChartContainer.style.visibility&&D.default.animateScroll.scrollTo(522,{duration:0})})}},{key:"handleBackClick",value:function(){var e=this.props,t=e.studyId,a=e.goToStudy,n=e.scenario;a(t,n&&n.is_archived)}},{key:"handleDuplicateScenarioClick",value:function(){this.setState({isDuplicateScenarioDialogShown:!0})}},{key:"handleUnsavedAction",value:function(e){this.setState({isSaveChangesDialogShown:!0,saveChangesActionType:e})}},{key:"handleDuplicateScenarioDialogClose",value:function(){this.setState({isDuplicateScenarioDialogShown:!1})}},{key:"handleDuplicateScenarioDialogSubmit",value:function(e,t,a,n){var r=this,l=this.props,i=l.studyId,o=l.scenario,s=l.goToScenario,u=l.study;new Promise(function(l){return l(o.status===Ye.SCENARIO_STATUS.APPROVED&&u.state.status===Xe.default.ACTIVE?r.props.createAdjustmentScenario(o.id,e,null,a,n):r.props.duplicateScenario(o.id,e,t,a,n))}).then(function(e){var a=e.id;return s(t||i,a)}),this.handleDuplicateScenarioDialogClose()}},{key:"handleSaveData",value:function(){this.state.fullData.filter(function(e){return e.type.toUpperCase()===Ye.COUNTRY}).reduce(function(e,t){return t.invalidFields&&t.invalidFields.length>0&&e.push(t.id),e},[]).length>0&&this.props.scenario.status!==Ye.SCENARIO_STATUS.APPROVED?this.setState({isIncompleteDataDialogShown:!0}):this.saveRowValues()}},{key:"handleSaveDataDialogClose",value:function(){this.setState({isIncompleteDataDialogShown:!1})}},{key:"handlerEditScenarioClick",value:function(){var e=this.props,t=e.studyId,a=e.scenarioId;(0,e.goToScenarioEdit)(t,a)}},{key:"handleMultiEditingClick",value:function(e){var t={};this.props.countries.forEach(function(e){var a=e.country_name,n=e.region_name;t[n]||(t[n]=[]),t[n].push(a)}),this.setState({isMultiEditing:!0,multiEditingValues:{},multiRegionsData:t,multiEditType:e})}},{key:"onMultiEditingCellChange",value:function(e){this.setState({multiEditingValues:d({},this.state.multiEditingValues,e)})}},{key:"onMultiEditingCancel",value:function(){this.setState({isMultiEditing:!1,multiEditingValues:{},multiRegionsData:{},multiEditType:null})}},{key:"filerDataForMultiEdit",value:function(){var e=this,t=this.state.multiEditingValues,a=[];return(0,Be.filterMultiColumnBeforeApply)(this.state.fullData,this.state.multiRegionsData).filter(function(e){return"country"===e.type}).forEach(function(n){Object.keys(t).forEach(function(r){var i=t[r];if("unlock"===r){var o=e.state.valuesToSave.find(function(e){return e.overrideId===n.override_id&&"unlock"===e.fieldName}),s=o?(0,S.default)(o.fieldValue):[],u=n.unlock?n.unlock:[],d=Object.keys(i).reduce(function(e,t){return i[t]&&e.push(t),e},[].concat(l(s),l(u)));a.push({fieldName:r,fieldValue:(0,w.default)(d),regionName:n.region_name,countryName:n.country_name,overrideId:n.override_id,fp:e.props.scenario.fp})}else""!==i&&null!==i&&(i instanceof L.default&&(i=i.clone()),a.push({fieldName:r,fieldValue:t[r],regionName:n.region_name,countryName:n.country_name,overrideId:n.override_id,fp:e.props.scenario.fp}))})}),a}},{key:"saveMultiColumnData",value:function(){var e=this,t=this.state.valuesToSave;this.filerDataForMultiEdit().forEach(function(e){var a=t.find(function(t){return t.countryName===e.countryName&&t.fieldName===e.fieldName});a?a.fieldValue=e.fieldValue:t.push(e)});var a=(0,S.default)(this.props.countries);t.forEach(function(e){var n=a.find(function(t){return e.countryName===t.country_name&&e.regionName===t.region_name});n&&(!t.some(function(t){return t.countryName===e.countryName&&t.regionName===e.regionName&&t.fieldName===ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK})&&n[ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK]&&(n[ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK]=n[ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK].filter(function(t){return t!==e.fieldName})),n[e.fieldName]=e.fieldValue)}),this.setState({disabledButtons:[],isMultiEditing:!1,multiEditingValues:{},multiRegionsData:{},isShowApplyingEditsDialog:!1,multiEditType:null,valuesToSave:t,fullData:(0,Le.getScenarioCalculatedData)(a,this.props.scenario)},function(){e.addHistoryStep()})}},{key:"onMultiEditingApply",value:function(){(0,ke.getParamItemStorage)("applyingEditsMultiColumnDialog",this.props.activeUser.id,"applyingEditsDialogCheckedClose")?this.saveMultiColumnData():this.setState({isShowApplyingEditsDialog:!0})}},{key:"handleCloseApplyingEditsDialog",value:function(){this.setState({isShowApplyingEditsDialog:!1})}},{key:"handleSubmitApplyingEditsDialog",value:function(e){e&&(0,ke.addToStorage)("applyingEditsMultiColumnDialog",{id:this.props.activeUser.id,applyingEditsDialogCheckedClose:!0}),this.saveMultiColumnData()}},{key:"addCountryForPlay",value:function(e,t,a){var n=this,r=this.props.platformRegions.find(function(e){return e.name===t}),l=r.countries.find(function(t){return t.name===e});this.props.getParametersByScenarioAndCountry(this.props.study.id,this.props.scenario.id,l?l.id:null,t).then(function(l){var i=(0,Le.getNewCountryObject)(e,t,a,1===r.countries.length,!1);l&&Object.keys(l).length>0&&(i=(0,Le.mergeCountryParameters)(n.props.scenario,l,i,!1)),n.props.addPlayGroundCountry(n.props.scenario.id,i);var o={countryName:e,overrideId:null,regionName:t},s=(0,S.default)(n.state.valuesToSave);s.push(o),n.setState({valuesToSave:s,disabledButtons:[]}),n.addHistoryStep(!0)}).catch(function(){var l=(0,Le.getNewCountryObject)(e,t,a,1===r.countries.length,!1);n.props.addPlayGroundCountry(n.props.scenario.id,l);var i={countryName:e,overrideId:null,regionName:t},o=(0,S.default)(n.state.valuesToSave);o.push(i),n.setState({valuesToSave:o,disabledButtons:[]}),n.addHistoryStep(!0)})}},{key:"removeScenarioRegion",value:function(e){var t=this,a=this.props.scenarioId,n=this.props.countries.filter(function(t){return e===t.region_id}),r=n[0].region_name,l=[];n.length>0&&r!==e&&this.state.countriesToRemove&&(l=this.state.countriesToRemove.concat(n.map(function(n){return t.removeScenarioCountry(a,n.country_name,e,!0),n.country_id})));var i=this.state.valuesToSave.filter(function(e){return-1===n.findIndex(function(t){return t.country_name===e.countryName})&&e.regionName!==r});this.setState({valuesToSave:i,countriesToRemove:l,disabledButtons:[]},function(){t.props.removeCountryFromCountriesList(a,e),t.addHistoryStep(!0)})}},{key:"removeScenarioCountry",value:function(e,t,a,n){var r=this,l=this.props.scenarioId,i=this.props.countries.find(function(a){return a.country_name===e&&t===a.region_id});if(i&&i.override_id&&this.state.countriesToRemove){var o=this.state.countriesToRemove.slice();o.push(i.country_id),this.setState({countriesToRemove:o,disabledButtons:[]})}var s=this.state.valuesToSave.filter(function(t){return!(t.countryName===e&&t.regionName===i.region_name)});this.setState({valuesToSave:s},function(){r.props.removeCountryFromCountriesList(l,t,e),n||r.addHistoryStep(!0)})}},{key:"handleValidationChange",value:function(e,t){var a=this,n=this.props,r=n.countries,l=n.scenario,i=this.state.valuesToSave,o=r.find(function(t){return t.country_id===e});if(o){var s=o.override_id,u=o.country_name,d=o.region_name,c=t.fieldName,f=t.newValue,p=t.oldValue,m=l.fp,h={overrideId:s,countryName:u,regionName:d,fieldName:c,fieldValue:f,oldValue:p,fp:m},v=(0,S.default)(i),_=v.find(function(e){return h.countryName===e.countryName&&h.regionName===e.regionName&&h.fieldName===e.fieldName});_?_.fieldValue=h.fieldValue:v.push(h);var E=(0,S.default)(this.props.countries);v.forEach(function(e){var t=E.find(function(t){return e.countryName===t.country_name&&e.regionName===t.region_name});t&&(![h].some(function(t){return t.countryName===e.countryName&&t.regionName===e.regionName&&t.fieldName===ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK})&&t[ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK]&&(t[ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK]=t[ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK].filter(function(t){return t!==e.fieldName})),t[e.fieldName]=e.fieldValue)}),this.setState({disabledButtons:[],valuesToSave:v,fullData:(0,Le.getScenarioCalculatedData)(E,this.props.scenario)},function(){a.addHistoryStep()})}}},{key:"exportToExcel",value:function(){var e=this.props,t=e.study,a=e.scenario,n=this.state.fullData;(0,Ue.exportToExcel)(t,a,n)}},{key:"handlerApproveScenario",value:function(){this.setState({isApproveScenarioDialogShown:!0})}},{key:"handlerOptimiseScenario",value:function(){this.setState({isOptimiseScenarioDialogShown:!0})}},{key:"handleToggleRegion",value:function(e,t){var a=[].concat(l(this.state.collapsedRegions));t?a.push(e):a.splice(a.indexOf(e),1),this.setState(d({},this.state,{collapsedRegions:a}))}},{key:"toggleNotes",value:function(){this.setState({notesPanelOpen:!this.state.notesPanelOpen})}},{key:"handleCloseScenarioDialog",value:function(){var e=this.props,t=e.scenario,a=e.activeUser,n=(0,ke.getParamItemStorage)("failedScenarios",t.id,"usersWhoClosed")||[];n.push(a.id),(0,ke.setParamItemStorage)("failedScenarios",t.id,"usersWhoClosed",n),this.forceUpdate()}},{key:"toggleEvents",value:function(e){e.stopPropagation();var t=e.currentTarget.dataset.region,a=e.currentTarget.dataset.loc,n=this.state,r=n.currentRegion,l=n.currentLocation;if(t&&a&&t===r&&a===l)return void this.setState({eventsPanelOpen:!1,currentRegion:"",currentLocation:"",currentEvents:[]});this.setState({eventsPanelOpen:!0,currentRegion:t,currentLocation:a,currentEvents:(0,He.sortEventsByField)(this.getCurrentEvents(t,a),"start_date","ASC",!0)})}},{key:"multiCheck",value:function(e,t,a,n){var l=function(e){var n=Object.assign({},e);return e[a]?delete n[a]:delete n[t],n},i=Object.assign({},this.state.multiRegionsData),o={};return e?(o=a?Object.assign({},i,r({},a,i[a]&&!i[a].includes(t)?i[a].concat([t]):[t])):Object.assign({},i,r({},t,n[0])),this.setState({multiRegionsData:o})):(a?i[a].filter(function(e){return e!==t}):[]).length?this.setState({multiRegionsData:Object.assign({},i,r({},a,i[a].filter(function(e){return e!==t})))}):(l(i),this.setState({multiRegionsData:l(i)})),o}},{key:"closeEventsPanel",value:function(){this.setState({eventsPanelOpen:!1})}},{key:"navigateToEvents",value:function(){this.props.navigateToEvents(this.props.studyId,this.props.scenarioId)}},{key:"setHistoricalStatus",value:function(e){this.setState({historicalEnabled:e})}},{key:"setHistoricalFilter",value:function(e){this.setState({historicalFilter:e})}},{key:"getCurrentEvents",value:function(e,t){var a=this.props.countries.find(function(a){return a.region_name===e&&a.country_name===t});return a?a.events:[]}},{key:"applyRestoredData",value:function(){var e=this,t=this.props,a=t.valuesToSave,n=t.countriesToRemove,r=t.countries,l=t.platformRegions;(0,ke.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"-"+this.props.studyId+"-"+this.props.scenarioId);var i=r;n&&n.length>0&&i.forEach(function(t){n.includes(t.country_id)&&e.props.removeCountryFromCountriesList(e.props.scenarioId,t.region_id,t.country_name)}),a.length>0&&a.forEach(function(t){var a=i.find(function(e){return t.countryName===e.country_name&&t.regionName===e.region_name});if(a)a[t.fieldName]=t.fieldValue;else if(l&&l.length>0){var n=l.find(function(e){return e.name===t.regionName}),r=(0,Le.getNewCountryObject)(t.countryName,t.regionName,t.regionName,n&&1===n.countries.length,!1);r[t.fieldName]=t.fieldValue,i.push(r),e.props.addPlayGroundCountry(e.props.scenario.id,r)}});var o={isRestoredDialogShown:!1,countriesToRemove:n,valuesToSave:a,disabledButtons:[],fullData:(0,Le.getScenarioCalculatedData)(i,this.props.scenario)};this.setState(o)}},{key:"handleSubmitApproveScenario",value:function(){var e=this,t=this.props,a=t.study,n=t.scenario;this.setState({showLoader:!0},function(){e.props.approveScenario(a.id,n.id,(0,Ve.serializeScenarioData)(a,n,e.state.fullData)).then(function(){})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.scenario,n=t.study,r=t.platformRegions,l=t.activeUser,i=t.notes,o=t.studies,s=t.navigateToViewSites,u=t.requirePageRefresh,c=this.state,f=c.fullData,m=c.filter,v=c.isDuplicateScenarioDialogShown,_=c.isApproveScenarioDialogShown,E=c.isOptimiseScenarioDialogShown,g=c.isIncompleteDataDialogShown,y=c.isStudyChangedDialogClose,S=c.isMultiEditing,b=c.multiEditType,C=c.multiEditingValues,O=c.tableFilter,T=c.historicalFilter,R=c.historicalEnabled,w=c.multiRegionsData,A=c.clipboard,N=c.disabledButtons,D=c.dataHistoryPointer,P=c.showLoader;if(!a||!n||!r.length)return null;var L=!y&&(0,xe.isShowDialogStudyChanged)("studiesChanged",n.study_id,n.study_details_updated_at,n.study_details_updated_by,l.id)&&n.is_imported,M=Ze(l,n,a),x=M.isEditable&&!R&&!S,j=M.isApprovable,U=M.canBeOptimised,B=M.isAdjusted,q=M.optimizingStatus,W=M.isDuplicateAvailable,X=!N.includes(Ye.SIDEBAR_BUTTONS.SAVE)&&!u,J=(0,ke.getParamItemStorage)("failedScenarios",a.id,"usersWhoClosed")||[],te=!J.includes(l.id)&&(0,ke.getParamItemStorage)("failedScenarios",a.id,"showErrorBar"),ne=a.studyParamsWarning,le=q||te||ne.showStudyParamsWarning||L&&!te&&!q,oe=$e(this.tableHeaderPosition,le,this.alertsHeight),ue=et(f);ue.parameter_uncertainty=a.parameter_uncertainty;var ce=Je(f,m),pe=Qe(f,ue,m,S,C),he="scenario-viewer__";return n.state.status?he+="ACTIVE"===n.state.status?"tracking":"planning":he+="playground",p.default.createElement("div",{ref:function(t){e.container=t},className:(0,I.default)("scenario-page-container","screenshot-container",{optimizing:q},{failed:te},{warning:ne.showStudyParamsWarning},{studyChanged:L})},p.default.createElement(ie.default,{canBeOptimised:U,globalRollupData:ue,isApprovable:j,isDuplicateAvailable:W,isEditable:x,notes:i,scenario:a,study:n,filter:m.name,disabledButtons:N,handleDuplicateScenarioClick:this.handleDuplicateScenarioClick,saveRowValues:this.handleSaveData,handleBackClick:this.handleBackClick,toggleNotes:this.toggleNotes,navigateToEvents:this.navigateToEvents,exportToExcel:this.exportToExcel,handlerEditScenarioClick:this.handlerEditScenarioClick,handlerOptimiseScenario:this.handlerOptimiseScenario,handlerApproveScenario:this.handlerApproveScenario,getOnClickAction:this.getOnClickAction,isUndoAvailable:D>0,isRedoAvailable:D<this.dataHistory.length-1,handleUndoAction:this.handleUndoAction,handleRedoAction:this.handleRedoAction}),p.default.createElement(k.Grid,null,p.default.createElement(k.Row,null,p.default.createElement(k.Col,{offset:8,width:4},p.default.createElement(ae.default,{isEditable:!0,scenarioId:a.id,onSubmitNote:this.props.addScenarioNote,onClose:this.toggleNotes,expanded:this.state.notesPanelOpen}),p.default.createElement(re.default,{onClose:this.closeEventsPanel,currentLocation:this.state.currentLocation,currentRegion:this.state.currentRegion,currentEvents:this.state.currentEvents,eventTrackingStatus:n.state.status===Xe.default.ACTIVE&&a.status!==Ye.SCENARIO_STATUS.OPEN,expanded:this.state.eventsPanelOpen})))),p.default.createElement(me.default,{globalRollupData:ue,fullData:f,scenario:a,study:n,isAdjusted:B,isApproved:a.status===Ye.SCENARIO_STATUS.APPROVED}),p.default.createElement(ve.default,{alertsPosition:this.alertsPosition,handleCloseScenarioDialog:this.handleCloseScenarioDialog,onStudyChangedDialogClose:this.onStudyChangedDialogClose,scenario:a,study:n,studyParamsWarning:ne,isFailed:te,isStudyChangedClose:L,optimizingStatus:q}),p.default.createElement(se.default,{key:le?this.locationsFilterPosition+this.alertsHeight:this.locationsFilterPosition,style:{top:(le?this.locationsFilterPosition+this.alertsHeight:this.locationsFilterPosition)+"px",zIndex:4}},p.default.createElement("div",{className:"filters-container"},p.default.createElement(k.Grid,null,p.default.createElement(k.Row,null,p.default.createElement(k.Col,{offset:1,width:11},p.default.createElement(F.default,{activeFilter:m,data:f,platformRegions:r,onFilterSelect:this.handleFilterSelect})))))),p.default.createElement(k.Grid,null,p.default.createElement(k.Row,{className:"scenario-highlights-bar"},p.default.createElement(be.default,null,p.default.createElement(V.default,{globalData:ue,target:a.end_date,predicted:ce.overallocatedData?ce.overallocatedData.lpft:ce.lpft,fpfv_lpfv:ce.overallocatedData?ce.overallocatedData.fpfv_lpfv:ce.fpfv_lpfv,fpp_fpfv:ce.fpp_fpfv,actual_date:ce.actual_date,startDate:a.fp,actual_fpfv_lpfv:ce.actual_fpfv_lpfv,actual_fpp_fpfv:ce.actual_fpp_fpfv,actual_f_lpft:ce.actual_f_lpft,showActual:"APPROVED"===a.status&&"ACTIVE"===n.state.status})),p.default.createElement(k.Col,{width:2},p.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"flex-end"}},p.default.createElement(Oe.default,{canChangeStatus:!M.isCompleted&&(M.isAdmin||M.isUserHasScenarioFullControl),studyId:n.id,scenarioId:a.id}),p.default.createElement(G.ChartCollapseControl,{isCollapsed:this.state.chartCollapsed,onOptionSelect:this.handleChartCollapse})))),!this.state.chartCollapsed&&p.default.createElement(k.Row,null,p.default.createElement(k.Col,{className:"highlights-bar-separator",offset:1},p.default.createElement("div",null)))),!this.state.chartCollapsed&&p.default.createElement(Ae.default,{isOptimizing:q,scenario:a,isImpact:!1,studyStatus:n.state.status,showOverallocation:this.state.showOverallocationOnChart,data:ce},p.default.createElement("div",{ref:function(t){e.chartContainer=t},className:"chart-container"},p.default.createElement(k.Grid,null,p.default.createElement(k.Row,null,p.default.createElement(k.Col,{offset:1,width:11},p.default.createElement("div",{className:"full-chart"},p.default.createElement(be.default,null,p.default.createElement(Y.default,{onToggleOverallocation:this.handleOverallocationChartState}))))))),p.default.createElement("div",{ref:function(t){e.miniChartContainer=t},style:{top:(le?this.miniChartPosition+this.alertsHeight:this.miniChartPosition)+"px"},className:"minimised-chart-container exclude-from-screenshot"},p.default.createElement(k.Grid,null,p.default.createElement(k.Row,null,p.default.createElement(k.Col,{offset:1,width:11},p.default.createElement("div",{className:"minimised-chart"},p.default.createElement(be.default,null,p.default.createElement(G.MinimisedEnrolmentChart,null)))))))),p.default.createElement(se.default,{key:le?this.historicalBenchmarkPosition+this.alertsHeight:this.historicalBenchmarkPosition,className:"exclude-from-screenshot",style:{top:(le?this.historicalBenchmarkPosition+this.alertsHeight:this.historicalBenchmarkPosition)+"px",backgroundColor:"white",zIndex:2}},p.default.createElement("div",{className:"benchmarks-toolbar-container"},p.default.createElement(k.Grid,null,p.default.createElement(k.Row,null,p.default.createElement(k.Col,{offset:1,width:11},p.default.createElement(be.default,null,p.default.createElement(H.default,{enableMultiedit:m.type===Ye.ROLLUP&&(n.state.status===Xe.default.PLANNED||null===n.state.status&&n.state.isOwner)&&(n.state.isOwner||"FPO_ADMIN"===l.role)&&x,isShowApplyingEditsDialog:this.state.isShowApplyingEditsDialog,onCloseDialog:this.handleCloseApplyingEditsDialog,onSubmitDialog:this.handleSubmitApplyingEditsDialog,disabled:(0,Le.isOptimizing)(a),hasTrials:n.historical_references.length>0,uncertaintyLevel:ue.uncertainty,isActive:this.state.historicalEnabled,isMultiEditing:this.state.isMultiEditing,onFilterChange:this.setHistoricalFilter,onActiveChange:this.setHistoricalStatus,onEdit:this.handleMultiEditingClick,multiEditType:this.state.multiEditType},p.default.createElement(Ee.default,{showOverallocation:!!ue.overallocatedData,onChange:this.handleTableFilterChange,overallocated:O&&O.overallocated})))))))),p.default.createElement(k.Grid,null,p.default.createElement(k.Row,{className:"exclude-from-screenshot"},p.default.createElement(k.Col,{offset:1,width:11},p.default.createElement(be.default,null,p.default.createElement(fe.default,{data:pe,scenario:a,study:n,tableFilter:O,historicalFilter:T,navigateToViewSites:s,platformRegions:r,tableHeaderPosition:oe,isEditable:x,isHistoricalDataViewEnabled:R,isAdjusted:!1,isTracking:!1,onDataChange:this.handleValidationChange,batchUpdate:this.handleBatchUpdate,handleAddRegion:this.handleAddRegion,handleAddCountry:this.addCountryForPlay,handleDeleteRegion:this.removeScenarioRegion,handleDeleteCountry:this.removeScenarioCountry,onToggleEvents:this.toggleEvents,resetCountryData:Be.noop,isMultiEditing:S,multiEditType:b,multiRegionsData:w,onMultiCheck:this.multiCheck,onMultiEditingCancel:this.onMultiEditingCancel,onMultiEditingApply:this.onMultiEditingApply,onMultiEditingCellChange:this.onMultiEditingCellChange,canManageSites:M.canManageSites,onCopy:this.onCopy,onPaste:this.onPaste,clipboardEmpty:0===Object.keys(A).length}))))),p.default.createElement(be.default,{hidden:!0},p.default.createElement($.SaveChangesDialog,{isShown:this.state.isSaveChangesDialogShown,onSubmit:this.saveRowValues,actionType:this.state.saveChangesActionType,callbackActions:[{type:Ye.SIDEBAR_BUTTONS.EVENT,action:this.navigateToEvents},{type:Ye.SIDEBAR_BUTTONS.DUPLICATE,action:this.handleDuplicateScenarioClick},{type:Ye.SIDEBAR_BUTTONS.EXPORT,action:this.exportToExcel},{type:Ye.SIDEBAR_BUTTONS.EDIT,action:this.handlerEditScenarioClick},{type:Ye.SIDEBAR_BUTTONS.APPROVE,action:this.handlerApproveScenario},{type:Ye.SIDEBAR_BUTTONS.OPTIMISE,action:this.handlerOptimiseScenario}],onClose:function(){return e.setState({isSaveChangesDialogShown:!1})}})),p.default.createElement(de.default,{isShown:this.state.isRestoredDialogShown,onSubmit:function(){return e.applyRestoredData()},onClose:function(){(0,ke.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-"+e.props.scenarioId),e.setState({disabledButtons:[Ye.SIDEBAR_BUTTONS.SAVE],isRestoredDialogShown:!1}),e.props.getScenarioViewerData(e.props.studyId,e.props.scenarioId,!1,!0)}}),p.default.createElement(be.default,{hidden:!0},p.default.createElement(z.default,{status:a.status,study:n,scenario:d({},a,{fullData:f}),studies:o,isShown:v,onClose:this.handleDuplicateScenarioDialogClose,onSubmit:this.handleDuplicateScenarioDialogSubmit,isApproved:a.status===Ye.SCENARIO_STATUS.APPROVED})),p.default.createElement(Q.default,{isShown:g,onClose:this.handleSaveDataDialogClose,onSubmit:this.saveRowValues}),p.default.createElement(ee.default,{removeStoredData:this.props.activeUser.id+"-"+this.props.studyId+"-"+this.props.scenarioId,hasUnsaved:X}),p.default.createElement(be.default,{hidden:!0},p.default.createElement(K.default,{willOverride:n.scenarios.some(function(e){return e.status===Ye.SCENARIO_STATUS.APPROVED}),predictedPatients:(B?ue.adjusted_patient_allocation:ue.patient_allocation)||0,targetPatients:a.target_num_patients||0,targetDate:B?a.adjusted_createdAt:a.end_date,predictedDate:(0,Ge.getPredictedDate)(ue,B),fullData:f,isShown:_,onClose:this.handleCloseApproveScenario,onSubmit:this.handleSubmitApproveScenario})),p.default.createElement(Z.default,{isShown:E,scenarioName:a.name,onClose:this.handleCloseOptimizeScenario,onSubmit:this.handleSubmitOptimizeScenario}),p.default.createElement(ye.ContextHelpButton,{page:he}),P&&h.default.createPortal(p.default.createElement(Re.default,null),document.body))}}]),t}(f.Component),at=function(){var e=this;this.onCopy=function(t){var a=e.state.fullData,n=a.filter(function(e){return e.type===Ye.SCENARIO_DATA_TYPE.COUNTRY}).find(function(e){return e.country_id===t});if(n){var r=Object.keys(ge.ENROLMENT_TABLE_FIELDS_LIST).reduce(function(e,t){var a=ge.ENROLMENT_TABLE_FIELDS_LIST[t];if(a===ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK)return e;var r=void 0;return r=a===ge.ENROLMENT_TABLE_FIELDS_LIST.SAS&&n[a]?+n[a]:a===ge.ENROLMENT_TABLE_FIELDS_LIST.SCREENING_FAILURE&&null!==n[a]&&""!==n[a]?+n[a]:n[a],e[a]=r instanceof L.default?r.clone():r,e},{});e.setState({clipboard:r})}},this.onPaste=function(t){var a=e.state,n=a.clipboard,r=a.fullData,l=a.valuesToSave,i=r.filter(function(e){return e.type===Ye.SCENARIO_DATA_TYPE.COUNTRY}).find(function(e){return e.country_id===t});if(i){Object.keys(n).forEach(function(t){var a=n[t];a instanceof L.default&&(a=a.clone());var r=l.find(function(e){return i.country_name===e.countryName&&i.region_name===e.regionName&&t===e.fieldName});r?r.fieldValue=a:l.push({fieldName:t,fieldValue:a,regionName:i.region_name,countryName:i.country_name,overrideId:i.override_id,fp:e.props.scenario.fp})});var o=(0,S.default)(e.props.countries);l.forEach(function(e){var t=o.find(function(t){return e.countryName===t.country_name&&e.regionName===t.region_name});t&&(!l.some(function(t){return t.countryName===e.countryName&&t.regionName===e.regionName&&t.fieldName===ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK})&&t[ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK]&&(t[ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK]=t[ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK].filter(function(t){return t!==e.fieldName})),t[e.fieldName]=e.fieldValue)}),e.setState({disabledButtons:[],valuesToSave:l,fullData:(0,Le.getScenarioCalculatedData)(o,e.props.scenario)},function(){e.addHistoryStep()})}},this.addHistoryStep=function(t){e.dataHistory.length===Ye.UNDO_HISTORY_LENGTH&&e.dataHistory.shift();var a={disabledButtons:(0,S.default)(e.state.disabledButtons),valuesToSave:(0,S.default)(e.state.valuesToSave),countriesToRemove:(0,S.default)(e.state.countriesToRemove),fullData:e.state.fullData};t&&(a.scenario=(0,S.default)(e.props.scenario));var n=e.state.dataHistoryPointer;n<Ye.UNDO_HISTORY_LENGTH-1&&(n+=1),e.dataHistory.splice(n),e.dataHistory.push(a),e.setState({dataHistoryPointer:n})},this.handleUndoAction=function(){if(e.state.dataHistoryPointer>=0){var t=e.dataHistory[e.state.dataHistoryPointer-1];if(t){var a=e.state.dataHistoryPointer;a>0&&(a-=1,t.dataHistoryPointer=a);var n=t.scenario;e.setState((0,T.default)(t,"scenario"),function(){n&&e.props.restoreScenarioData(t.scenario)})}}},this.handleRedoAction=function(){var t=e.dataHistory[e.state.dataHistoryPointer+1];if(t){var a=e.state.dataHistoryPointer;a<e.dataHistory.length&&(a+=1,t.dataHistoryPointer=a);var n=t.scenario;e.setState((0,T.default)(t,"scenario"),function(){n&&e.props.restoreScenarioData(t.scenario)})}},this.handleAddRegion=function(t,a,n){var r=e.props.platformRegions.find(function(e){return e.name===n}),l="Unspecified country";1===r.countries.length&&(l=r.countries[0].name),e.addCountryForPlay(l,n,n)},this.handleBatchUpdate=function(t,a){var n=e.state,r=n.fullData,l=n.valuesToSave,i=a.map(function(e){return{fieldName:e.name,newValue:e.value,oldValue:e.value}}),o=r.filter(function(e){return e.type===Ye.SCENARIO_DATA_TYPE.COUNTRY}).find(function(e){return e.country_id===t});if(o){i.forEach(function(t){var a=l.find(function(e){return o.country_name===e.countryName&&o.region_name===e.regionName&&t.fieldName===e.fieldName});a?a.fieldValue=t.newValue:l.push({fieldName:t.fieldName,fieldValue:t.newValue,regionName:o.region_name,countryName:o.country_name,overrideId:o.override_id,fp:e.props.scenario.fp})});var s=(0,S.default)(e.props.countries);l.forEach(function(e){var t=s.find(function(t){return e.countryName===t.country_name&&e.regionName===t.region_name});t&&(!l.some(function(t){return t.countryName===e.countryName&&t.regionName===e.regionName&&t.fieldName===ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK})&&t[ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK]&&(t[ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK]=t[ge.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK].filter(function(t){return t!==e.fieldName})),t[e.fieldName]=e.fieldValue)}),e.setState({disabledButtons:[],valuesToSave:l,fullData:(0,Le.getScenarioCalculatedData)(s,e.props.scenario)},function(){e.addHistoryStep()})}},this.handleMiniChart=function(t){t.forEach(function(t){t.boundingClientRect.top<=-150&&!e.state.fixedChart?(e.miniChartContainer.style.visibility="visible",e.chartContainer.style.visibility="hidden",e.setState({fixedChart:!0})):e.state.fixedChart&&(e.miniChartContainer.style.visibility="hidden",e.chartContainer.style.visibility="visible",e.setState({fixedChart:!1}))})},this.getOnClickAction=function(t){return e.state.fullData.filter(function(e){return e.type.toUpperCase()===Ye.COUNTRY}).reduce(function(e,t){return t.invalidFields&&t.invalidFields.length>0&&e.push(t.id),e},[]).length>0?e.handleSaveData:e.state.disabledButtons.includes(Ye.SIDEBAR_BUTTONS.SAVE)&&!e.props.countries.some(function(e){return null===e.override_id})||e.props.requirePageRefresh?t:e.handleUnsavedAction},this.createApprovedSnapshot=function(){var t=e.props,a=t.study,n=t.scenario;e.props.createApprovedSnapshot(a.id,n.id,(0,Ve.serializeScenarioData)(a,n,e.state.fullData))},this.handleChartCollapse=function(t){t?(e.historicalBenchmarkPosition=146,e.tableHeaderPosition=196):(e.historicalBenchmarkPosition=348,e.tableHeaderPosition=398),null===e.state.chartCollapsed?(0,ke.addToStorage)("fpo-ui-settings",{id:"chartState",selected:t}):(0,ke.setParamItemStorage)("fpo-ui-settings","chartState","collapsed",t),e.setState({chartCollapsed:t})},this.handleOverallocationChartState=function(t){null===e.state.showOverallocationOnChart?(0,ke.addToStorage)("fpo-ui-settings",{id:"chartViewMode",showOverallocationOnChart:t}):(0,ke.setParamItemStorage)("fpo-ui-settings","chartViewMode","showOverallocationOnChart",t),e.setState({showOverallocationOnChart:t})},this.handleTableFilterChange=function(t){var a=e.state.tableFilter?d({},e.state.tableFilter,r({},t,!e.state.tableFilter[t])):{overallocated:!0};null===e.state.tableFilter?(0,ke.addToStorage)("fpo-ui-settings",{id:"tableFilter",tableFilter:a}):(0,ke.setParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter",a),e.setState({tableFilter:a})},this.handleCloseOptimizeScenario=function(){e.setState({isOptimiseScenarioDialogShown:!1})},this.handleSubmitOptimizeScenario=function(){var t=e.props.scenario;e.props.optimiseScenario(t.id).then(function(){return e.props.updateScenarioJobStatus(t.id,t.study_id,We.default.QUEUED)}).then(function(){e.handleCloseOptimizeScenario()})},this.handleCloseApproveScenario=function(){e.setState({isApproveScenarioDialogShown:!1,showLoader:!1})}};tt.propTypes={activeUser:_.default.object.isRequired,countries:_.default.array,removeScenarioCountry:_.default.func.isRequired,scenario:_.default.object,scenarioId:_.default.string.isRequired,study:_.default.object,studyId:_.default.string.isRequired,platformRegions:_.default.array.isRequired,goToStudy:_.default.func.isRequired,duplicateScenario:_.default.func.isRequired,createAdjustmentScenario:_.default.func.isRequired,goToScenario:_.default.func.isRequired,goToScenarioEdit:_.default.func.isRequired,approveScenario:_.default.func.isRequired,optimiseScenario:_.default.func.isRequired,updateScenarioJobStatus:_.default.func.isRequired,getParametersByScenarioAndCountry:_.default.func.isRequired,saveOverrides:_.default.func.isRequired,addPlayGroundCountry:_.default.func.isRequired,removeCountryFromCountriesList:_.default.func.isRequired,addScenarioNote:_.default.func.isRequired,notes:_.default.number,navigateToEvents:_.default.func.isRequired,navigateToViewSites:_.default.func.isRequired,valuesToSave:_.default.array,requirePageRefresh:_.default.bool,countriesToRemove:_.default.array,restoreScenarioData:_.default.func.isRequired,studies:_.default.array,createApprovedSnapshot:_.default.func.isRequired,getScenarioViewerData:_.default.func.isRequired},tt.defaultProps={countries:[],scenario:void 0,study:void 0,notes:0,valuesToSave:[],requirePageRefresh:!1,countriesToRemove:[],studies:null};var nt={removeScenarioCountry:Ie.removeScenarioCountry,getPlatformRegions:De.getPlatformRegions,duplicateScenario:Ie.duplicateScenario,createAdjustmentScenario:Ie.createAdjustmentScenario,getPlainStudy:Ne.getPlainStudy,approveScenario:Ie.approveScenario,optimiseScenario:Ie.optimiseScenario,updateScenarioJobStatus:Ie.updateScenarioJobStatus,saveOverrides:Ie.saveOverrides,addPlayGroundCountry:Ie.addCountryToTheCountryList,removeCountryFromCountriesList:Ie.removeCountryFromCountriesList,addScenarioNote:Pe.addScenarioNote,getParametersByScenarioAndCountry:Ie.getParametersByScenarioAndCountry,restoreScenarioData:Ie.restoreScenarioData,getStudies:Ne.getStudies,getScenarioViewerData:Ie.getScenarioViewerData,createApprovedSnapshot:Ie.createApprovedSnapshot,push:g.push,goToScenario:function(e,t){return(0,g.push)("/studies/"+e+"/scenarios/"+t)},goToScenarioEdit:function(e,t){return(0,g.push)("/studies/"+e+"/scenarios/"+t+"/edit")},navigateToEvents:function(e,t){return(0,g.push)("/studies/"+e+"/scenarios/"+t+"/events")},navigateToViewSites:function(e,t,a){return(0,g.push)("/studies/"+e+"/scenarios/"+t+"/sites/"+a)}};t.default=(0,E.connect)(u,nt)(tt)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(79),c=n(d),f=a(22),p=a(525),m=n(p),h=a(1010),v=n(h),_=a(529),E=n(_),g=a(266),y=n(g),S=a(78),b=n(S),C=function(e){var t=e.optimizingStatus,a=e.isFailed,n=e.isStudyChangedClose,r=e.studyParamsWarning,i=e.study,o=e.scenario,s=e.alertsPosition,d=e.handleCloseScenarioDialog,p=e.onStudyChangedDialogClose;return l.default.createElement(b.default,null,t&&l.default.createElement(c.default,{style:{top:s+"px",zIndex:4}},l.default.createElement("div",{className:"optimization-status-container"},l.default.createElement(f.Grid,null,l.default.createElement(f.Row,null,l.default.createElement(f.Col,{offset:1,width:11},l.default.createElement(m.default,null)))))),a&&l.default.createElement(c.default,{style:{top:s+"px",zIndex:4}},l.default.createElement("div",{className:(0,u.default)("optimization-status-container")},l.default.createElement(f.Grid,null,l.default.createElement(f.Row,null,l.default.createElement(f.Col,{offset:1,width:11},l.default.createElement(v.default,{handleCloseDialog:d})))))),n&&!a&&!t&&l.default.createElement(c.default,{style:{top:s+"px",zIndex:4}},l.default.createElement("div",{className:(0,u.default)("study-changed-status-container")},l.default.createElement(f.Grid,null,l.default.createElement(f.Row,null,l.default.createElement(f.Col,{offset:1,width:11},l.default.createElement(E.default,{handleCloseDialog:p,fullWidth:!0})))))),r.showStudyParamsWarning&&l.default.createElement(c.default,{style:{top:s+"px",zIndex:4}},l.default.createElement("div",{className:(0,u.default)("study-params-warning-container")},l.default.createElement(f.Grid,null,l.default.createElement(f.Row,null,l.default.createElement(f.Col,{offset:1,width:11},l.default.createElement(y.default,{study:i,scenario:o,data:r,studyId:i.id,scenarioId:o.id,status:o.status})))))))};C.defaultProps={optimizingStatus:!1,isFailed:!1,isStudyChangedClose:!1,studyParamsWarning:null,alertsPosition:0},C.propTypes={alertsPosition:o.default.number,optimizingStatus:o.default.bool,isFailed:o.default.bool,isStudyChangedClose:o.default.bool,studyParamsWarning:o.default.object,study:o.default.object.isRequired,scenario:o.default.object.isRequired,handleCloseScenarioDialog:o.default.func.isRequired,onStudyChangedDialogClose:o.default.func.isRequired},t.default=l.default.memo(C)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(2),u=n(s),d=a(22),c=a(265),f=n(c),p=a(268),m=n(p),h=a(79),v=n(h),_=a(78),E=n(_),g=function(e){var t=e.isApproved,a=e.isAdjusted,n=e.scenario,r=e.globalRollupData,i=e.fullData,o=e.study;return l.default.createElement(v.default,{style:{zIndex:4}},l.default.createElement("div",{className:(0,u.default)("scenario__title-bar",{approved:t})},l.default.createElement(d.Grid,null,l.default.createElement(d.Row,{style:{height:"87px"}},l.default.createElement(d.Col,{offset:1,width:6},l.default.createElement(E.default,null,l.default.createElement(f.default,{name:n.name,modified:n.updatedAt,optimised:n.last_optimisation_date,adjusted:n.adjusted_createdAt,approvedAt:n.approvedAt,status:n.status,isAdjusted:a,optimisationWarning:i.some(function(e){return e.unlock&&e.unlock.length>0}),originScenario:n.originScenario,createdAt:n.createdAt,studyId:o.study_id}))),l.default.createElement(d.Col,{width:5},l.default.createElement("div",{className:"scenario-alerts-wrapper"},l.default.createElement(E.default,null,l.default.createElement(m.default,{scenario:n,globalData:r,study:o}))))))))};g.defaultProps={isApproved:!1,isAdjusted:!1},g.propTypes={isApproved:o.default.bool,isAdjusted:o.default.bool,scenario:o.default.object.isRequired,globalRollupData:o.default.object.isRequired,study:o.default.object.isRequired,fullData:o.default.array.isRequired},t.default=l.default.memo(g)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(59),u=a(86),d=a(6),c=a(258),f=n(c),p=a(49),m=a(78),h=n(m),v={EVENT:"EVENT",DUPLICATE:"DUPLICATE",NOTES:"NOTES",COHORTS:"COHORTS",SAVE:"SAVE",EXPORT:"EXPORT",EDIT:"EDIT",OPTIMISE:"OPTIMISE",APPROVE:"APPROVE"},_=function(e){var t=e.notes,a=e.scenario,n=e.study,r=e.filter,i=e.isEditable,o=e.isDuplicateAvailable,c=e.getOnClickAction,m=e.canBeOptimised,_=e.isApprovable,E=e.globalRollupData,g=e.disabledButtons,y=e.handleDuplicateScenarioClick,S=e.saveRowValues,b=e.handleBackClick,C=e.toggleNotes,O=e.navigateToEvents,T=e.exportToExcel,R=e.handlerEditScenarioClick,w=e.handlerOptimiseScenario,A=e.handlerApproveScenario,I=e.isUndoAvailable,N=e.isRedoAvailable,D=e.handleUndoAction,P=e.handleRedoAction;return l.default.createElement(h.default,null,l.default.createElement(u.Sidebar,null,l.default.createElement(u.Button,{className:"fpo-exit-button",height:60},l.default.createElement(s.Link,{to:"/"},d.Icons.HOME)),l.default.createElement(u.Separator,{height:20}),l.default.createElement(u.Button,{className:"fpo-exit-button",height:51,onClick:b},d.Icons.CHEVRON_LEFT),l.default.createElement(u.Separator,{height:22,noLine:!0}),l.default.createElement(u.Button,{height:56,onClick:C,tooltip:"Notes"},l.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},d.Icons.NOTES,l.default.createElement("div",{className:"sup"},t>0?(0,p.kFormatter)(t):""))),l.default.createElement(u.Button,{height:56,onClick:c(O),tooltip:"Events",actionName:v.EVENT},l.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},d.Icons.EVENT,l.default.createElement("div",{className:"sup"},a.events&&a.events.length>0?(0,p.kFormatter)(a.events.length):""))),l.default.createElement(u.Separator,{height:20}),l.default.createElement(u.Button,{className:"fpo-exit-button",height:56,disabled:!I,onClick:D},l.default.createElement(u.AnimatedContent,{tooltip:"Undo",disabled:!I},d.Icons.UNDO)),l.default.createElement(u.Button,{className:"fpo-exit-button flip-vertical",height:56,disabled:!N,onClick:P},l.default.createElement(u.AnimatedContent,{tooltip:"Redo",disabled:!N},d.Icons.UNDO)),l.default.createElement(u.Button,{height:56,tooltip:"Save",disabled:!i||g.includes(v.SAVE),onClick:S},d.Icons.SAVE),l.default.createElement(u.Button,{height:56,tooltip:"Duplicate and edit",disabled:!o,actionName:v.DUPLICATE,onClick:c(y)},d.Icons.DUPLICATE),l.default.createElement(f.default,{exportToExcel:T,study:n,scenario:a,filter:r}),l.default.createElement(u.Button,{height:56,tooltip:"Edit",actionName:v.EDIT,disabled:!i,onClick:c(R)},d.Icons.EDIT),l.default.createElement(u.Separator,{height:20}),l.default.createElement(u.Button,{height:56,disabled:!m,tooltip:"Optimize scenario",actionName:v.OPTIMISE,onClick:c(w)},d.Icons.OPTIMISE),l.default.createElement(u.Button,{height:56,disabled:!_||!E.lpft,tooltip:"Approve scenario",actionName:v.APPROVE,onClick:c(A)},d.Icons.APPROVE)))};_.propTypes={isEditable:o.default.bool,isDuplicateAvailable:o.default.bool,getOnClickAction:o.default.func.isRequired,canBeOptimised:o.default.bool,isApprovable:o.default.bool,globalRollupData:o.default.object,scenario:o.default.object.isRequired,study:o.default.object.isRequired,filter:o.default.string,notes:o.default.number,disabledButtons:o.default.array,handleDuplicateScenarioClick:o.default.func.isRequired,saveRowValues:o.default.func.isRequired,handleBackClick:o.default.func.isRequired,toggleNotes:o.default.func.isRequired,navigateToEvents:o.default.func.isRequired,exportToExcel:o.default.func.isRequired,handlerEditScenarioClick:o.default.func.isRequired,handlerOptimiseScenario:o.default.func.isRequired,handlerApproveScenario:o.default.func.isRequired,isUndoAvailable:o.default.bool,isRedoAvailable:o.default.bool,handleUndoAction:o.default.func.isRequired,handleRedoAction:o.default.func.isRequired},_.defaultProps={isEditable:!1,isDuplicateAvailable:!1,canBeOptimised:!1,isApprovable:!1,globalRollupData:{},scenario:{},notes:0,disabledButtons:[],isUndoAvailable:!1,isRedoAvailable:!1,filter:""},t.default=l.default.memo(_)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1176),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(8);a(1891),a(1933),a(2279),a(1893),Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject&&new Promise(function(e){a.e(1).then(function(t){e(a(2480))}.bind(null,a)).catch(a.oe)});var u=function(e){var t=e.children;return l.default.createElement("div",{className:"full-height"},t)};u.propTypes={children:o.default.node.isRequired};var d=function(e,t){return t};t.default=(0,s.connect)(d,null)(u)},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.areEventsValid=t.getEventsStatistics=t.getAvailableLocations=t.getEvents=t.getScenarioFromStore=t.getEventsFromStore=void 0;var r=a(43),l=a(70),i=a(41),o=t.getEventsFromStore=function(e,t){return e.events[t.params.scenarioId]||[]},s=t.getScenarioFromStore=function(e,t){return e.scenarios[t.params.scenarioId]||{}},u=t.getEvents=(0,r.createSelector)([o,s],function(e,t){var a=e.filter(function(e){return e.state!==i.EVENT_STATE.DELETED});return a.forEach(function(e){e.isValid=(0,l.validateByType)(e,t)}),a});t.getAvailableLocations=function(e){return e.platform.regions},t.getEventsStatistics=(0,r.createSelector)(u,function(e){var t;return e.reduce(function(e,t){if(!t.isValid)return e;switch(t.status){case i.EVENT_STATUS.ACTIVE:e[t.event_type].inProgress+=1;break;case i.EVENT_STATUS.PENDING:e[t.event_type].pending+=1;break;case i.EVENT_STATUS.COMPLETED:default:e[t.event_type].completed+=1}return e[t.event_type].total+=1,e},(t={},n(t,i.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),n(t,i.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS,{inProgress:0,pending:0,completed:0,total:0}),n(t,i.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),n(t,i.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE,{inProgress:0,pending:0,completed:0,total:0}),t))}),t.areEventsValid=(0,r.createSelector)(o,function(e){var t=e.filter(function(e){return!e.isValid}),a=e.filter(function(e){return e.state});return 0===t.length&&a.length>0})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1179),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=parseInt(t.params.scenarioId,10),n=parseInt(t.params.id,10);return{scenario:e.scenarios[a],studyId:n,study:e.study[n]||{state:{status:q.default.PLANNED}},scenarioId:a,events:(0,G.getEvents)(e,t),locations:(0,G.getAvailableLocations)(e,t),stat:(0,G.getEventsStatistics)(e,t),eventsAreValid:(0,G.areEventsValid)(e,t),allEvents:(0,G.getEventsFromStore)(e,t),activeUser:e.auth.user,groupByType:e.events.groupByType}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(8),m=a(18),h=a(59),v=a(31),_=n(v),E=a(83),g=n(E),y=a(11),S=n(y),b=a(22),C=a(86),O=a(6),T=a(524),R=n(T),w=a(54),A=n(w),I=a(552),N=n(I),D=a(505),P=n(D),L=a(32),M=a(493),x=a(77),k=a(28),j=a(41),F=a(70),U=a(40),V=n(U),B=a(36),H=a(7),G=a(1177);a(801);var Y=a(17),q=n(Y),z=a(14),W=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.sortEventsByStartDate=function(){a.props.sortEventsByStartDate(a.props.scenarioId,a.state.sortOrder,!1),a.setState({sortOrder:!a.state.sortOrder})},a.toggleGroupByType=function(){a.props.toggleGroupEventsByType(),a.props.sortEventsByStartDate(a.props.scenarioId,!a.state.sortOrder,!1)},a.state={sortOrder:!1},a.scrollTop=0,a.containerWidth=0,a.containerLeft=0,a.handleResize=a.handleResize.bind(a),a.handleAddNewEvent=a.handleAddNewEvent.bind(a),a.handleEventUpdate=a.handleEventUpdate.bind(a),a.handleEventDuplicate=a.handleEventDuplicate.bind(a),a.handleEventRemove=a.handleEventRemove.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.handleEventDisable=a.handleEventDisable.bind(a),a}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.studyId,a=e.scenarioId;window.addEventListener("resize",this.handleResize),window.addEventListener("scroll",this.handleResize),this.handleResize(),this.props.getScenarioViewerData(t,a),this.props.getScenarioEvents(a,t)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("scroll",this.handleResize)}},{key:"handleResize",value:function(e){var t=this.container;if(t){var a=t.getBoundingClientRect();this.containerWidth=a.width,this.containerLeft=a.left;var n=document.querySelector(".application").getBoundingClientRect().top;e&&("scroll"===e.type&&this.scrollTop===n||"resize"===e.type)?this.forceUpdate():this.scrollTop=n}}},{key:"handleAddNewEvent",value:function(e){var t=(0,F.getNewEventByType)(e);this.props.addNewEvent(this.props.scenarioId,t)}},{key:"handleEventUpdate",value:function(e,t,a){this.props.updateEvent(this.props.scenarioId,e,t,a)}},{key:"handleEventDuplicate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.props.duplicateEvent(this.props.scenarioId,e,t)}},{key:"handleEventRemove",value:function(e){this.props.removeEvent(this.props.scenarioId,e)}},{key:"handleSubmit",value:function(){var e=this,t=this.props,a=t.allEvents,n=t.scenarioId,r=t.studyId,l=[];a.forEach(function(e){if(e.state){var t=(0,_.default)(e);t.locations=[],e.locations.forEach(function(e){e.countries.forEach(function(a){t.locations.push({platform_country_id:a.platform_country_id,country_name:a.name,region_name:e.name})})}),l.push((0,g.default)(t,"isValid"))}}),this.props.applyScenarioEventsChanges(r,n,l).then(function(){return e.props.push("/studies/"+r+"/scenarios/"+n)})}},{key:"handleEventDisable",value:function(e,t){this.props.updateEvent(this.props.scenarioId,e,"disabled",t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.events,n=t.studyId,r=t.scenarioId,l=t.locations,i=t.scenario,o=t.study,s=t.stat,u=t.activeUser,c=t.groupByType,f=(0,V.default)(u,o,i),p=f.isTracking,m=f.isAdjusted,v=f.isUserHasScenarioFullControl,_=v&&!f.isCompleted&&i&&i.status!==z.SCENARIO_STATUS.APPROVED&&i.status!==z.SCENARIO_STATUS.PREV_APPROVED&&i.countries.length>0&&!(p&&!m)&&(0,H.isEditableScenario)(i,u,o),E=(0,H.isOptimizing)(i),g="ACTIVE"===(0,S.default)(o,"state.status")?"events-page--tracking":"events-page";return d.default.createElement("div",{className:"scenario-events"},d.default.createElement(C.Sidebar,null,d.default.createElement(C.Button,{height:60},d.default.createElement(h.Link,{to:"/"},O.Icons.HOME)),d.default.createElement(C.Separator,{height:20}),d.default.createElement(C.Button,{height:56,onClick:this.sortEventsByStartDate,tooltip:"Sort events by start date"},this.state.sortOrder?O.Icons.FILTER_DESCENDING:O.Icons.FILTER_ASCENDING),d.default.createElement(C.Button,{height:56,onClick:this.toggleGroupByType,tooltip:this.props.groupByType?"Ungroup events":"Group events by type"},this.props.groupByType?O.Icons.UNGROUP:O.Icons.GROUP)),d.default.createElement(b.Grid,null,d.default.createElement(b.Row,null,d.default.createElement(b.Col,{offset:1,width:10},d.default.createElement(R.default,{numberOfEvents:a.filter(function(e){return e.isValid}).length})),d.default.createElement("div",{className:"fpo-col-1",width:1,ref:function(t){e.container=t}},d.default.createElement("div",{className:"scenario-events__fixed-bar",style:{width:this.containerWidth,left:this.containerLeft}},d.default.createElement("div",{className:"fixed-bar_line"}),d.default.createElement("div",{className:"scenario-events__close-button",onClick:function(){return e.props.push("/studies/"+n+"/scenarios/"+r)}},O.Icons.CROSS)))),d.default.createElement(b.Row,null,d.default.createElement(b.Col,{offset:1,width:10,style:{display:"flex"}},d.default.createElement(P.default,{isOptimizing:E,actionable:_,type:j.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE,counters:s[j.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE],isTracking:p,onAdd:function(){return e.handleAddNewEvent(j.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE)}}),d.default.createElement(P.default,{isOptimizing:E,actionable:_,type:j.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS,counters:s[j.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS],isTracking:p,onAdd:function(){return e.handleAddNewEvent(j.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS)}}),d.default.createElement(P.default,{isOptimizing:E,actionable:_,type:j.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE,counters:s[j.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE],isTracking:p,onAdd:function(){return e.handleAddNewEvent(j.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE)}}),d.default.createElement(P.default,{isOptimizing:E,actionable:_,type:j.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE,counters:s[j.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE],isTracking:p,onAdd:function(){return e.handleAddNewEvent(j.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE)}})))),d.default.createElement("div",{style:{height:"20px"}}),d.default.createElement(N.default,{onDisable:this.handleEventDisable,isTracking:o.state.status===q.default.ACTIVE,events:a,scenario:i,onUpdate:this.handleEventUpdate,onDuplicate:this.handleEventDuplicate,onRemove:this.handleEventRemove,locations:l,isAdjusted:m,metadata:f,groupByType:c,activeUser:u}),d.default.createElement(b.Grid,null,d.default.createElement(b.Row,null,d.default.createElement(b.Col,{offset:1,width:10},d.default.createElement("div",{className:"scenario-events-control-buttons__wrapper"},d.default.createElement(A.default,{label:"Cancel",className:"secondary-button",onClick:function(){return e.props.push("/studies/"+n+"/scenarios/"+r)}}),d.default.createElement(A.default,{disabled:!this.props.eventsAreValid,label:"Apply",onClick:this.handleSubmit}))))),d.default.createElement(L.ContextHelpButton,{page:g}))}}]),t}(u.Component);W.defaultProps={events:[],scenario:null,allEvents:[],eventsAreValid:!1},W.propTypes={studyId:f.default.number.isRequired,scenarioId:f.default.number.isRequired,events:f.default.array,getScenarioEvents:f.default.func.isRequired,push:f.default.func.isRequired,addNewEvent:f.default.func.isRequired,updateEvent:f.default.func.isRequired,locations:f.default.array.isRequired,duplicateEvent:f.default.func.isRequired,removeEvent:f.default.func.isRequired,study:f.default.object.isRequired,stat:f.default.object.isRequired,allEvents:f.default.array,eventsAreValid:f.default.bool,getScenarioViewerData:f.default.func.isRequired,scenario:f.default.object,applyScenarioEventsChanges:f.default.func.isRequired,sortEventsByStartDate:f.default.func.isRequired,activeUser:f.default.object.isRequired,toggleGroupEventsByType:f.default.func.isRequired,groupByType:f.default.bool.isRequired};var K={getScenarioEvents:M.getScenarioEvents,addNewEvent:M.addNewEvent,updateEvent:M.updateEvent,duplicateEvent:M.duplicateEvent,removeEvent:M.removeEvent,getPlatformRegions:x.getPlatformRegions,getPlainStudy:k.getPlainStudy,getScenarioViewerData:B.getScenarioViewerData,applyScenarioEventsChanges:M.applyScenarioEventsChanges,sortEventsByStartDate:M.sortEventsByStartDate,toggleGroupEventsByType:M.toggleGroupEventsByType,push:m.push};t.default=(0,p.connect)(o,K)(W)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1181),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a=t.params,n=a.scenarioId,r=a.id;return{scenarioId:n,scenario:(0,N.getScenarioData)(e,t),studyId:r,countries:(0,N.getScenarioCountries)(e,t),study:(0,N.getStudyData)(e,t),platformRegions:(0,N.getPlatformRegionsList)(e,t),studies:e.studies.studies}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(0),d=n(u),c=a(1),f=n(c),p=a(8),m=a(18),h=a(11),v=n(h),_=a(1170),E=n(_),g=a(1198),y=n(g),S=a(101),b=n(S),C=a(36),O=a(77),T=a(28),R=a(347),w=a(17),A=n(w),I=a(37),N=a(48);a(2410);var D=a(47),P=n(D),L=a(14),M=a(78),x=n(M),k=function(e){function t(){var e,a,n,i;r(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.componentWillReceiveProps=function(e){e.scenarioId!==n.props.scenarioId&&n.props.getScenarioViewerData(e.studyId,e.scenarioId)},i=a,l(n,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scenarioId,a=e.studyId;this.controller=new AbortController;var n=this.controller.signal;this.props.studies||this.props.getStudies(n),this.props.getScenarioViewerData(a,t)}},{key:"render",value:function(){var e=this.props,t=e.scenarioId,a=e.scenario,n=e.studyId,r=e.study,l=e.platformRegions,i=e.goToStudy,o=e.countries;if(!a||!r||!l.length)return d.default.createElement(b.default,null);var s=(0,v.default)(a,"nerve_job_status");s===P.default.FAILED?(0,I.addToStorage)("failedScenarios",{id:a.id,showErrorBar:!0}):(s===P.default.QUEUED||P.default.RUNNING)&&(0,I.removeParamItemStorage)("failedScenarios",a.id);var u=void 0;return u=function(){return!(r.state.status!==A.default.ACTIVE&&r.state.status!==A.default.COMPLETED||a.status!==L.SCENARIO_STATUS.APPROVED&&a.status!==L.SCENARIO_STATUS.PREV_APPROVED&&null===a.source_scenario_id&&"IMPACT"!==a.origin)}()?d.default.createElement(y.default,{scenarioId:t,scenario:a,countries:o,studyId:n,goToStudy:i}):d.default.createElement(E.default,{scenarioId:t,scenario:a,countries:o,studyId:n,goToStudy:i}),d.default.createElement(x.default,null,u)}}]),t}(u.PureComponent);k.propTypes={scenario:f.default.object,scenarioId:f.default.string.isRequired,countries:f.default.array,study:f.default.object,studyId:f.default.string.isRequired,getScenarioViewerData:f.default.func.isRequired,platformRegions:f.default.array.isRequired,goToStudy:f.default.func.isRequired,getStudies:f.default.func.isRequired,studies:f.default.array},k.defaultProps={scenario:void 0,study:void 0,countries:[],studies:null};var j={getPlainStudy:T.getPlainStudy,getPlatformRegions:O.getPlatformRegions,getScenarioViewerData:C.getScenarioViewerData,getStudies:T.getStudies,push:m.push,goToStudy:R.navigateToStudy};t.default=(0,p.connect)(o,j)(k)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{availableUsers:(0,S.default)(e),inProgress:e.users.isLoading,activeUser:e.auth.user}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),c=n(d),f=a(1),p=n(f),m=a(8),h=a(39),v=a(32),_=a(945),E=n(_),g=a(36),y=a(555),S=n(y);a(2411);var b=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={availableUsers:e.availableUsers,sharedWith:[],suggestions:[]},a.handleSubmit=a.handleSubmit.bind(a),a.handleCancel=a.handleCancel.bind(a),a.getSuggestions=a.getSuggestions.bind(a),a.handleTagAdd=a.handleTagAdd.bind(a),a.handleTagRemove=a.handleTagRemove.bind(a),a}return o(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){e.availableUsers&&e.availableUsers.length>0&&this.setState({availableUsers:e.availableUsers})}},{key:"shouldComponentUpdate",value:function(e){return e.isShown||e.isShown!==this.props.isShown}},{key:"getSuggestions",value:function(e){var t=this;this.setState({suggestions:this.state.availableUsers.filter(function(a){return!!a.email&&(-1!==a.email.toLowerCase().indexOf(e.toLowerCase())&&a.id!==t.props.activeUser.id)})})}},{key:"handleTagAdd",value:function(e){this.setState({sharedWith:[].concat(r(this.state.sharedWith),[e])})}},{key:"handleTagRemove",value:function(e){this.setState({sharedWith:this.state.sharedWith.filter(function(t){return t.id!==e.id})})}},{key:"handleSubmit",value:function(){var e=this;this.props.shareScenario(this.props.studyId,this.props.scenario.id,this.state.sharedWith).then(function(){e.handleCancel()}).catch(function(){return e.handleCancel()})}},{key:"handleCancel",value:function(){var e=this;this.setState({sharedWith:[]},function(){e.props.onClose()})}},{key:"render",value:function(){var e=this.state,t=e.sharedWith,a=e.suggestions,n=this.props.isShown;return c.default.createElement(h.PopupDialog,{title:"Share scenario",isShown:n,handleClose:this.handleCancel,buttons:[c.default.createElement(h.ActionButton,{action:this.handleCancel},"Cancel"),c.default.createElement(h.ActionButton,{action:this.handleSubmit,disabled:0===t.length,primary:!0},"Share")]},c.default.createElement("div",{className:"share-scenario-dialog-content"},c.default.createElement("div",{className:"share-scenario-dialog__warning-message"},"Sharing with another user will give them access and permissions to duplicate scenario"),c.default.createElement(E.default,{onTagAdd:this.handleTagAdd,onTagRemove:this.handleTagRemove,tags:t,suggestions:a,getSuggestions:this.getSuggestions}),c.default.createElement(v.ContextHelpButton,{page:"popup__share-scenario",popup:!0})))}}]),t}(d.Component),C={shareScenario:g.shareScenario};b.defaultProps={sharedWith:[],availableUsers:[],inProgress:!1},b.propTypes={activeUser:p.default.object.isRequired,studyId:p.default.number.isRequired,scenario:p.default.object.isRequired,isShown:p.default.bool.isRequired,onClose:p.default.func.isRequired,availableUsers:p.default.array,shareScenario:p.default.func.isRequired},t.default=(0,m.connect)(s,C)(b)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1184),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a(0),o=n(i),s=a(1),u=n(s),d=a(8),c=a(18),f=a(11),p=n(f),m=a(2),h=n(m),v=a(86),_=a(6),E=a(79),g=n(E),y=a(22),S=a(180),b=n(S),C=a(129),O=n(C),T=a(356),R=n(T),w=a(128),A=n(w),I=a(32),N=a(222),D=n(N),P=a(351),L=n(P),M=a(48),x=a(115),k=a(183),j=a(271),F=a(270),U=a(37),V=a(36),B=a(60),H=n(B),G=a(14),Y=n(G);a(2412);var q=a(181),z=n(q),W={name:Y.default,type:G.ROLLUP,subject:null},K=function(e){var t=e.studyId,a=e.scenarioId,n=e.countryId,s=e.navigate,u=e.children,d=e.platformRegions,c=e.getScenario,f=e.studyName,p=e.scenarioName,m=e.fullData,E=e.hasChanges,S=e.updateCountrySites,C=e.undoLastAction,T=e.redoLastAction,w=e.undoStack,N=e.redoStack,P=e.resetSitesData,M=e.getEditableSitesCountries,x=e.onSiteDetailsPage,k=e.countryName,j=e.siteName,F=e.dirtyDataFor,V=e.hasSiteData,B=e.getSites,H=e.hasScenarioData,G=e.getSiteEditReasons,Y=e.hasSitesWithTrackingData,q=e.tableView,K=e.toggleTableView,X=e.exportToExcel,Z=e.loadingSites,J=e.selectedSitesCount,Q=e.otherSitesCount,$=e.externalSitesCount,ee=e.sitesDataAvailable,te=(0,i.useRef)(),ae=(0,i.useState)(!1),ne=l(ae,2),re=ne[0],le=ne[1];(0,i.useEffect)(function(){G()},[G]),(0,i.useEffect)(function(){if(m&&m.length){var e=m.find(function(e){return e.platform_country_id===+n});e&&(te.current={name:e.country_name,type:"COUNTRY",subject:e.region_name})}},[te,m,n]),(0,i.useEffect)(function(){H||c(t,a)},[c,t,a,H]),(0,i.useEffect)(function(){return function(){(0,U.resetState)("fpo-sites-state"),P(a)}},[P,a]),(0,i.useEffect)(function(){M(t,a)},[t,a,M]),(0,i.useEffect)(function(){E?F&&F.scenarioId===a&&F.countryId.includes(n)?le(!0):((0,U.resetState)("fpo-sites-state"),P(a)):!E&&F&&F.scenarioId===a&&((0,U.resetState)("fpo-sites-state"),P(a))},[]),(0,i.useEffect)(function(){V||B(t,a,n)},[B,t,a,n,V]),(0,i.useEffect)(function(){Y||"CURRENT"!==q||K("HISTORICAL")},[Y,q,K]);var ie=(0,i.useCallback)(function(){C(a)},[C,a]),oe=(0,i.useCallback)(function(){T(a)},[T,a]),se=(0,i.useCallback)(function(){S(t,a,n)},[S,t,a,n]),ue=(0,i.useCallback)(function(){X(t,a,n)},[X,t,a,n]),de=function(e){var n=void 0;if("REGION"===e.type){var l=m.filter(function(t){return t.region_name===e.name&&"country"===t.type}),i=l[0];n=i.platform_country_id,te.current={name:i.country_name,type:"COUNTRY",subject:i.region_name}}else if("COUNTRY"===e.type){var o=m.find(function(t){return t.country_name===e.name});n=o.platform_country_id,te.current=r({},e)}else{var u=m.filter(function(e){return"country"===e.type}),d=u[0];n=d.platform_country_id,te.current={name:d.country_name,type:"COUNTRY",subject:d.region_name}}s("/studies/"+t+"/scenarios/"+a+"/sites/"+n)};return o.default.createElement("div",{className:"sites-container"},o.default.createElement(v.Sidebar,null,o.default.createElement(v.Button,{height:60,onClick:function(){s(x?"/studies/"+t+"/scenarios/"+a+"/sites/"+n:"/studies/"+t+"/scenarios/"+a)}},_.Icons.CHEVRON_LEFT),o.default.createElement(v.Separator,{height:20}),o.default.createElement(v.Button,{className:"fpo-exit-button",height:56,disabled:!w,onClick:ie},o.default.createElement(v.AnimatedContent,{tooltip:"Undo",disabled:!w},_.Icons.UNDO)),o.default.createElement(v.Button,{className:"fpo-exit-button flip-vertical",height:56,disabled:!N,onClick:oe},o.default.createElement(v.AnimatedContent,{tooltip:"Redo",disabled:!N},_.Icons.UNDO)),o.default.createElement(v.Button,{height:56,tooltip:"Save",disabled:!E,onClick:se},_.Icons.SAVE),o.default.createElement(v.Button,{height:56,tooltip:E?"You have unsaved changes, please save in order to export site list":"Export to Excel",disabled:Z||0===J&&0===Q&&0===$||E,onClick:ue},_.Icons.DOWNLOAD)),o.default.createElement(y.Grid,null,o.default.createElement(y.Row,null,o.default.createElement(y.Col,{offset:1,width:10},o.default.createElement("h3",{className:"study-scenario-name"},o.default.createElement("span",{className:"breadcrumb-link",onClick:function(){return s("/studies/"+t)}},x?"...":f),o.default.createElement("span",{className:"arrow-separator"},_.Icons.ARROW_RIGHT),o.default.createElement("span",{className:"breadcrumb-link",onClick:function(){return s("/studies/"+t+"/scenarios/"+a)}},p),o.default.createElement("span",{className:"arrow-separator"},_.Icons.ARROW_RIGHT),o.default.createElement("span",{className:(0,h.default)({"breadcrumb-link":x}),onClick:function(){x&&s("/studies/"+t+"/scenarios/"+a+"/sites/"+n)}},x?"Sites | "+k:"Sites"),x&&o.default.createElement(o.default.Fragment,null,o.default.createElement("span",{className:"arrow-separator"},_.Icons.ARROW_RIGHT),o.default.createElement("span",null,j||"n/a")),!ee&&o.default.createElement(z.default,{placement:"top",mouseEnterDelay:.3,overlay:o.default.createElement("div",null,"Sorry, site functionality is not fully available ",o.default.createElement("br",null),"because of data update running at the moment.",o.default.createElement("br",null),"Please try again in a few minutes")},o.default.createElement("div",{className:"sites-health-icon"},_.Icons.WARNING)))),o.default.createElement(y.Col,{width:1},o.default.createElement("h3",null,o.default.createElement(R.default,{studyId:t,scenarioId:a}))))),!x&&o.default.createElement(g.default,{style:{top:0,zIndex:4,backgroundColor:"white"}},o.default.createElement(y.Grid,null,o.default.createElement(y.Row,null,o.default.createElement(y.Col,{offset:1,width:11},o.default.createElement(L.default,null,o.default.createElement(b.default,{hideAllCountries:!0,activeFilter:te.current||W,data:m,platformRegions:d,onFilterSelect:de})))))),o.default.createElement(L.default,null,o.default.createElement(D.default,{data:m,hasSitesWithTrackingData:Y,studyId:t,scenarioId:a,countryId:n},u)),o.default.createElement(O.default,{allowTabs:!0,tabsCommonPath:"/sites",hasUnsaved:E}),o.default.createElement(A.default,{isShown:re,onSubmit:function(){return le(!1)},onClose:function(){(0,U.resetState)("fpo-sites-state"),P(a),le(!1)}}),o.default.createElement(I.ContextHelpButton,{page:"site-list"}))},X=function(e,t){var a=t.params,n=a.scenarioId,r=a.id,l=a.countryId,i=a.siteId,o=e.auth.user,s=(0,M.getStudyData)(e,t),u=(0,M.getScenarioData)(e,t),d=(0,M.getActiveCountry)(e,t),c=!!e.sites[n]&&!!e.sites[n][l]&&void 0!==e.sites.dirtyDataFor&&null!==e.sites.dirtyDataFor&&e.sites.dirtyDataFor.scenarioId===+n&&e.sites.dirtyDataFor.countryId.includes(+l),f=["/site/"],m=f.filter(function(e){return-1!==t.location.pathname.indexOf(e)}).length>0,h=(0,p.default)(e,"site["+i+"].siteData",{});return{siteName:((0,p.default)(h,"PI.name","")||"n/a")+" | "+((0,p.default)(h,"name","")||"n/a"),countryName:d?d.country_name:"",onSiteDetailsPage:m,hasSiteData:c,activeUser:o,studyName:(0,p.default)(s,"study_id",""),scenarioName:(0,p.default)(u,"name",""),studyId:+r,scenarioId:+n,countryId:+l,hasChanges:e.sites.hasChanges,dirtyDataFor:e.sites.dirtyDataFor,fullData:(0,M.getScenarioFullData)(e,t),platformRegions:(0,M.getPlatformRegionsList)(e,t),undoStack:(0,p.default)(e,"sites.past",[]).length,redoStack:(0,p.default)(e,"sites.future",[]).length,editableCountriesIds:e.sites.editableCountriesIds,hasScenarioData:!!u,hasSitesWithTrackingData:(0,x.hasTrackingData)(e,t.params),tableView:e.sites.tableView,loadingSites:e.sites.loadingSites,selectedSitesCount:(0,k.getSelectedSitesCount)(e,t.params),otherSitesCount:(0,j.getOtherSitesCount)(e,t.params),externalSitesCount:(0,F.getExternalSitesCount)(e,t.params),sitesDataAvailable:(0,x.getSitesDataAvailability)(e)}},Z={getScenario:V.getScenarioViewerData,updateCountrySites:B.updateSites,resetSitesData:B.resetSites,getEditableSitesCountries:B.getEditableCountries,getSites:H.default,sortData:B.sortData,undoLastAction:B.undoSiteAction,redoLastAction:B.redoSiteAction,navigate:c.push,getSiteEditReasons:B.getSiteEditReasonsAction,toggleTableView:B.toggleTableViewMode,exportToExcel:B.exportCountrySitesSelection};K.defaultProps={platformRegions:[],studyName:"",scenarioName:"",fullData:[],hasChanges:!1,undoStack:0,redoStack:0,onSiteDetailsPage:!1,countryName:"",siteName:"",dirtyDataFor:{},hasSiteData:!1,editableCountriesIds:null,hasScenarioData:!1,hasSitesWithTrackingData:!1,tableView:"HISTORICAL",loadingSites:!1,selectedSitesCount:0,otherSitesCount:0,externalSitesCount:0,sitesDataAvailable:!0},K.propTypes={studyId:u.default.number.isRequired,scenarioId:u.default.number.isRequired,countryId:u.default.number.isRequired,navigate:u.default.func.isRequired,children:u.default.node.isRequired,platformRegions:u.default.array,getScenario:u.default.func.isRequired,studyName:u.default.string,scenarioName:u.default.string,fullData:u.default.array,hasChanges:u.default.bool,updateCountrySites:u.default.func.isRequired,undoLastAction:u.default.func.isRequired,redoLastAction:u.default.func.isRequired,undoStack:u.default.number,redoStack:u.default.number,resetSitesData:u.default.func.isRequired,getEditableSitesCountries:u.default.func.isRequired,onSiteDetailsPage:u.default.bool,countryName:u.default.string,siteName:u.default.string,dirtyDataFor:u.default.object,hasSiteData:u.default.bool,getSites:u.default.func.isRequired,hasScenarioData:u.default.bool,getSiteEditReasons:u.default.func.isRequired,hasSitesWithTrackingData:u.default.bool,tableView:u.default.string,toggleTableView:u.default.func.isRequired,exportToExcel:u.default.func.isRequired,loadingSites:u.default.bool,selectedSitesCount:u.default.number,otherSitesCount:u.default.number,externalSitesCount:u.default.number,sitesDataAvailable:u.default.bool},t.default=(0,d.connect)(X,Z)(K)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1190),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(43),l=function(e){return e.platform.studies},i=function(e){return e.studies.studies};t.default=(0,r.createSelector)([l,i],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.map(function(e){return n({},e,{imported:t.some(function(t){return t.study_id===e.study_id&&t.is_imported})})})})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1188),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),i=n(l),o=a(1),s=n(o),u=a(10),d=n(u),c=a(52),f=n(c),p=a(6),m=a(553),h=n(m),v=a(1189),_=n(v),E=a(361);a(802);var g=a(17),y=n(g),S=function(e,t,a){if(!t||t.column!==e)return i.default.createElement(c.Cell,{className:"sort-cell-default"},i.default.createElement("div",{onClick:function(){return a(e)}},i.default.createElement("div",null,E.COLUMN_TITLES[e]),i.default.createElement("div",null,p.Icons.FILTER_ASCENDING)));var n=t.order,r=p.Icons.FILTER_ASCENDING;return n===E.SORTING_ORDER.DESC&&(r=p.Icons.FILTER_DESCENDING),i.default.createElement(c.Cell,{className:"sort-cell-default active"},i.default.createElement("div",{onClick:function(){return a(e)}},i.default.createElement("div",null,E.COLUMN_TITLES[e]),i.default.createElement("div",null,r)))},b=function(e){var t=e.studies,a=e.onStudyClick,n=e.onStudyDelete,l=e.sorting,o=e.sortingClickHandler;return i.default.createElement("div",{className:"studies-table","data-test":"studies-table"},i.default.createElement(f.default,{rowHeight:56,headerHeight:30,onRowClick:function(e,n){e.preventDefault(),e.stopPropagation(),a(t[n].id)},rowsCount:t.length},i.default.createElement(c.Column,{header:S(E.COLUMN_NAMES.STUDY_NAME,l,o),data:function(e){return i.default.createElement(h.default,r({},e,{studies:t,getCellValue:function(e){var t=e.study;return e.status===y.default.COMPLETED?i.default.createElement("span",null,t," ",i.default.createElement("span",{className:"color-grey label"},"(completed)")):t},className:"h2",dataTest:"study-container"}))},width:400}),i.default.createElement(c.Column,{header:S(E.COLUMN_NAMES.TA_INDICATION,l,o),data:function(e){return i.default.createElement(h.default,r({},e,{studies:t,getCellValue:function(e){return e.therapeutic_area+"/"+e.indication}}))},width:400}),i.default.createElement(c.Column,{header:i.default.createElement(c.Cell,{className:"sort-cell-default"},i.default.createElement("div",null,"Number of scenarios")),data:function(e){return i.default.createElement(h.default,r({},e,{studies:t,getCellValue:function(e){return e.scenarios},icon:p.Icons.DETAILS}))},width:100}),i.default.createElement(c.Column,{header:i.default.createElement(c.Cell,{className:"sort-cell-default"},i.default.createElement("div",null,"Owner")),data:function(e){return i.default.createElement(h.default,r({},e,{studies:t,className:"ellipse-text",getCellValue:function(e){return e.owner_name||"-"},icon:p.Icons.USER_PROFILE}))},width:160}),i.default.createElement(c.Column,{header:S(E.COLUMN_NAMES.UPDATE_TIME,l,o),data:function(e){return i.default.createElement(h.default,r({},e,{studies:t,className:"ellipse-text",getCellValue:function(e){var t=e.lastUpdatedAt;return t&&d.default.duration((0,d.default)(t)-(0,d.default)()).humanize(!0)},icon:p.Icons.UPDATED}))},width:140}),i.default.createElement(c.Column,{header:i.default.createElement(c.Cell,{className:"without-underline-header"},""),data:function(e){return i.default.createElement(h.default,r({},e,{studies:t,getCellValue:function(){return p.Icons.CROSS_O},className:"studies-table__remove-button studies-table__cell-icon",dataTest:"study-remove",onStudyDelete:n}))},fixedWidth:!0,width:48}),i.default.createElement(c.Column,{header:i.default.createElement(c.Cell,{className:"without-underline-header"},""),data:function(e){return i.default.createElement(_.default,r({},e,{studies:t}))},fixedWidth:!0,width:0})))};b.propTypes={studies:s.default.array,onStudyClick:s.default.func.isRequired,onStudyDelete:s.default.func.isRequired,sortingClickHandler:s.default.func.isRequired,sorting:s.default.object},b.defaultProps={studies:[],sorting:{column:E.COLUMN_NAMES.UPDATE_TIME,order:E.SORTING_ORDER.DESC}},t.default=b},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(0),i=n(l),o=a(1),s=n(o),u=a(84),d=n(u),c=a(50),f=n(c),p=a(65),m=n(p),h=a(88),v=a(13),_=n(v),E=a(7),g=a(100),y=n(g),S=a(553),b=n(S),C=(0,d.default)(h.getMisalignedDetails,function(e,t){return(0,f.default)(e,t)}),O=function(e){var t=e.studies,a=e.rowIndex,n=t[a],l=(0,m.default)(n,["impactStudyParams","fp","target_lpft","therapeutic_area","indication","target_num_patients","fpfv_fpft"]),o=C(l),s=o.invalidFields,u=s&&s.length>0,d=[],c=null;n.showApproveAlert&&d.push(i.default.createElement("div",{key:1,className:"tooltip-row-item"},"This study still doesn`t have approved plan.",i.default.createElement("br",null),"Study FP - ",(0,h.formatDate)((0,E.getMomentDate)(n.fp)))),n.showOutdatedApproveAlert&&d.push(i.default.createElement("div",{key:2,className:"tooltip-row-item"},"Approved plan in this study created ",i.default.createElement("br",null),"considering different study parameters")),u&&d.push(i.default.createElement("div",{key:3,className:"tooltip-row-item"},"Study parameters aren't consistent with Impact data")),d.length>1?c=i.default.createElement("div",{className:"multiple-icons__wrapper"},i.default.createElement("div",null,y.default.INFO_O),i.default.createElement("div",null,y.default.INFO_O)):n.showApproveAlert?c=i.default.createElement("div",null,y.default.ALARM):(n.showOutdatedApproveAlert||u)&&(c=i.default.createElement("div",null,y.default.MISMATCH));var f=i.default.createElement(_.default,{mouseEnterDelay:.7,placement:"top",align:{offset:[0,-10]},overlay:i.default.createElement(i.default.Fragment,null,d.length>1&&i.default.createElement("h3",null,"Multiple alerts:"),d)},c);return i.default.createElement(b.default,r({},e,{studies:t,getCellValue:function(){return n.showApproveAlert||n.showOutdatedApproveAlert||u?f:""},className:"approve-alert"}))};O.propTypes={studies:s.default.array,rowIndex:s.default.number},O.defaultProps={studies:[],rowIndex:-1},t.default=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return d({studies:e.studies.studies,unknownStudies:Array.isArray(e.studies.unknownStudies)?e.studies.unknownStudies:[],userName:e.auth.user.name,metadata:te(e.auth.user),studiesToImport:(0,z.default)(e),missingIndicationStudy:e.studies.missingIndicationStudy,isLoading:e.studies.isLoading,TAFilterValue:e.studies.TAFilterValue,collapsedSections:e.studies.collapsedSections},e.studies.sorting)}Object.defineProperty(t,"__esModule",{value:!0});var u,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a(0),p=n(f),m=a(1),h=n(m),v=a(8),_=a(18),E=a(11),g=n(E),y=a(701),S=n(y),b=a(200),C=n(b),O=a(710),T=n(O),R=a(84),w=n(R),A=a(1047),I=n(A),N=a(1187),D=n(N),P=a(39),L=a(214),M=n(L),x=a(101),k=n(x),j=a(23),F=n(j),U=a(930),V=n(U),B=a(54),H=n(B),G=a(22),Y=a(32),q=a(1186),z=n(q),W=a(6),K=a(28),X=a(77),Z=a(40),J=n(Z),Q=a(361),$=a(17),ee=n($);a(2413);var te=(0,w.default)(J.default),ae=function(e){function t(e){l(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isRemoveDialogShown:!1,isUnknownDialogShow:!1,studyToRemove:null,studiesSection:""},a.handleStudyClick=a.handleStudyClick.bind(a),a.handleStudyDeleteClick=a.handleStudyDeleteClick.bind(a),a.handleCancelStudyDelete=a.handleCancelStudyDelete.bind(a),a.handleConfirmStudyDelete=a.handleConfirmStudyDelete.bind(a),a.handlerImportStudy=a.handlerImportStudy.bind(a),a.filterHandler=a.filterHandler.bind(a),a.handleShowUnknownStudies=a.handleShowUnknownStudies.bind(a),a.handleHideUnknownStudies=a.handleHideUnknownStudies.bind(a),a}return o(t,e),c(t,[{key:"componentDidMount",value:function(){this.controller=new AbortController;var e=this.controller.signal;this.props.getStudies(e),this.props.getUnknownStudies()}},{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"getSortingForSection",value:function(e){return this.props[e+"_sorting"].column===Q.COLUMN_NAMES.TA_INDICATION?[this.props[e+"_sorting"].column,Q.COLUMN_NAMES.INDICATION,Q.COLUMN_NAMES.STUDY_NAME]:[this.props[e+"_sorting"].column,Q.COLUMN_NAMES.STUDY_NAME]}},{key:"handleStudyClick",value:function(e){this.props.push("/studies/"+e)}},{key:"handleStudyDeleteClick",value:function(e,t){this.setState({isRemoveDialogShown:!0,studyToRemove:e,studiesSection:t})}},{key:"handleCancelStudyDelete",value:function(){this.setState({isRemoveDialogShown:!1,studyToRemove:null})}},{key:"handleConfirmStudyDelete",value:function(){this.props.deleteStudy(this.state.studyToRemove.id),this.handleCancelStudyDelete()}},{key:"handlerImportStudy",value:function(e){var t=this;this.props.importPlatformStudy(e).then(function(){t.props.getStudies()})}},{key:"handleCollapseSection",value:function(e){this.props.setCollapsedSection(e)}},{key:"sortingClickHandler",value:function(e,t){this.props.setSortingOrder(e,t)}},{key:"filterHandler",value:function(e){this.props.setFilterValue(e)}},{key:"handleShowUnknownStudies",value:function(){this.setState({isUnknownDialogShow:!0})}},{key:"handleHideUnknownStudies",value:function(){this.setState({isUnknownDialogShow:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.studies,n=t.studiesToImport,r=t.onStudyAdd,l=t.userName,i=t.missingIndicationStudy,o=t.isLoading,s=t.metadata,u=t.TAFilterValue,d=t.collapsedSections,c=t.unknownStudies,f=(a||[]).map(function(e){return{id:e.id,study:e.study_id,indication:e.indication,lastUpdatedAt:e.updatedAt,scenarios:e.scenarios,therapeutic_area:e.therapeutic_area,is_imported:e.is_imported,status:e.state.status,isOwner:e.state.isOwner,is_new_owner:e.is_new_owner,showApproveAlert:e.approveAlert&&e.state.status!==Q.STUDY_TYPE.ACTIVE,showOutdatedApproveAlert:e.outdatedApproveWarning,owner_name:e.state.owner_name,fp:e.fp,target_num_patients:e.target_num_patients,target_lpft:e.target_lpft,impactStudyParams:e.impactStudyParams}});if(u&&u.length>0)try{f=f.filter(function(e){return e.indication&&0===e.indication.toLowerCase().indexOf(u.toLowerCase())||e.therapeutic_area&&0===e.therapeutic_area.toLowerCase().indexOf(u.toLowerCase())})}catch(e){}var m=f.filter(function(e){return e.is_imported}),h=(0,S.default)(m.filter(function(e){return e.status===Q.STUDY_TYPE.ACTIVE}),function(t){var a=e.getSortingForSection(Q.SECTIONS.TRACKING);return(0,C.default)([t[a[0]].toLowerCase(),t[a[1]].toLowerCase()])}),v=(0,S.default)(m.filter(function(e){return e.status===Q.STUDY_TYPE.PLANNED}),function(t){var a=e.getSortingForSection(Q.SECTIONS.PLANNING);return[t[a[0]].toLowerCase(),t[a[1]].toLowerCase()]}),_=(0,S.default)(f.filter(function(e){return!e.is_imported}),function(t){var a=e.getSortingForSection(Q.SECTIONS.PLAYGROUND);return[t[a[0]].toLowerCase(),t[a[1]].toLowerCase()]}),E=(0,S.default)(m.filter(function(e){return!e.status||e.status===ee.default.COMPLETED}),function(t){var a=e.getSortingForSection(Q.SECTIONS.UNKNOWN);return[t[a[0]].toLowerCase(),t[a[1]].toLowerCase()]});this.props[Q.SECTIONS.TRACKING+"_sorting"].order===Q.SORTING_ORDER.DESC&&h.reverse(),this.props[Q.SECTIONS.PLANNING+"_sorting"].order===Q.SORTING_ORDER.DESC&&v.reverse(),this.props[Q.SECTIONS.PLAYGROUND+"_sorting"].order===Q.SORTING_ORDER.DESC&&_.reverse(),this.props[Q.SECTIONS.UNKNOWN+"_sorting"].order===Q.SORTING_ORDER.DESC&&_.reverse();var y=this.state.studiesSection===Q.SECTIONS.PLAYGROUND,b=c.filter(function(e){return!e.status}).length;return p.default.createElement("div",{className:"studies-page"},p.default.createElement(G.Grid,null,p.default.createElement(G.Row,null,p.default.createElement(G.Col,{offset:1,width:11},b>0&&p.default.createElement(V.default,{message:"\n                  "+b+" \n                  "+(0,T.default)("study",b)+"\n                  in FPO currently do not have any analytics data associated.\n                   Usually, this is caused by the study status changing to completed or cancelled.\n                    Please click on the icon to see the full list.",messageSide:"right",type:"alert"},p.default.createElement(H.default,{onClick:this.handleShowUnknownStudies,type:"transparent"},W.Icons.INFO_O)),p.default.createElement(I.default,{userName:l,trackingStudies:h.length,planningStudies:v.length,userStudies:_.length,unknownStudies:E.length,onStudyAdd:r,studies:n,getStudies:this.props.getPlatformStudies,metadata:s,onImport:this.handlerImportStudy}))),p.default.createElement(G.Row,null,p.default.createElement(G.Col,{offset:1,width:2},p.default.createElement("div",{className:"search-input-wrapper"},p.default.createElement("div",{className:"icon-wrapper"},W.Icons.SEARCH_HISTORICAL),p.default.createElement(F.default,{withoutBorder:!0,placeholder:"Search for TA or indication",value:u,clearIcon:!0,onClick:function(){return e.filterHandler("")},onChange:function(t){return e.filterHandler(t.currentTarget.value)}})))),s.userCanViewTrackingStudy&&p.default.createElement(G.Row,{className:"studies-page__section"},p.default.createElement(G.Col,{width:1},h.length>0&&p.default.createElement("div",{className:"collapse-icon-container",onClick:function(){return e.handleCollapseSection(Q.SECTIONS.TRACKING)}},d.includes(Q.SECTIONS.TRACKING)?W.Icons.CHEVRON_DOWN:W.Icons.CHEVRON_UP)),p.default.createElement(G.Col,{offset:0,width:11,className:"studies-page__section-separator"},p.default.createElement("div",{className:"studies-page__section-title h1"},Q.SECTIONS.TRACKING),h.length>0&&!d.includes(Q.SECTIONS.TRACKING)&&p.default.createElement(D.default,{studies:h,sorting:this.props[Q.SECTIONS.TRACKING+"_sorting"],sortingClickHandler:function(t){return e.sortingClickHandler(Q.SECTIONS.TRACKING,t)},onStudyClick:this.handleStudyClick,onStudyDelete:function(t){return e.handleStudyDeleteClick(t,Q.SECTIONS.TRACKING)}}),0===h.length&&p.default.createElement("div",null,"There are currently no studies in this section."))),s.userCanViewPlanningStudy&&p.default.createElement(G.Row,{className:"studies-page__section"},p.default.createElement(G.Col,{width:1},v.length>0&&p.default.createElement("div",{className:"collapse-icon-container",onClick:function(){return e.handleCollapseSection(Q.SECTIONS.PLANNING)}},d.includes(Q.SECTIONS.PLANNING)?W.Icons.CHEVRON_DOWN:W.Icons.CHEVRON_UP)),p.default.createElement(G.Col,{offset:0,width:11,className:"studies-page__section-separator"},p.default.createElement("div",{className:"studies-page__section-title h1"},Q.SECTIONS.PLANNING),v.length>0&&!d.includes(Q.SECTIONS.PLANNING)&&p.default.createElement(D.default,{studies:v,sortingClickHandler:function(t){return e.sortingClickHandler(Q.SECTIONS.PLANNING,t)},sorting:this.props[Q.SECTIONS.PLANNING+"_sorting"],onStudyClick:this.handleStudyClick,onStudyDelete:function(t){return e.handleStudyDeleteClick(t,Q.SECTIONS.PLANNING)}}),0===v.length&&p.default.createElement("div",null,"There are currently no studies in this section."))),E.length>0&&p.default.createElement(G.Row,{className:"studies-page__section studies-page__section--unknown-studies"},p.default.createElement(G.Col,{width:1},p.default.createElement("div",{className:"collapse-icon-container",onClick:function(){return e.handleCollapseSection(Q.SECTIONS.UNKNOWN)}},d.includes(Q.SECTIONS.UNKNOWN)?W.Icons.CHEVRON_DOWN:W.Icons.CHEVRON_UP)),p.default.createElement(G.Col,{offset:0,width:11,className:"studies-page__section-separator"},p.default.createElement("div",{className:"studies-page__section-title h1"},"Completed / Cancelled"),!d.includes(Q.SECTIONS.UNKNOWN)&&p.default.createElement(D.default,{studies:E,sorting:this.props[Q.SECTIONS.UNKNOWN+"_sorting"],sortingClickHandler:function(t){return e.sortingClickHandler(Q.SECTIONS.UNKNOWN,t)},onStudyClick:this.handleStudyClick,onStudyDelete:function(t){return e.handleStudyDeleteClick(t,Q.SECTIONS.UNKNOWN)}}))),s.userCanViewPlaygroundStudy&&p.default.createElement(G.Row,{className:"studies-page__section"},p.default.createElement(G.Col,{width:1},_.length>0&&p.default.createElement("div",{className:"collapse-icon-container",onClick:function(){return e.handleCollapseSection(Q.SECTIONS.PLAYGROUND)}},d.includes(Q.SECTIONS.PLAYGROUND)?W.Icons.CHEVRON_DOWN:W.Icons.CHEVRON_UP)),p.default.createElement(G.Col,{offset:0,width:11,className:"studies-page__section-separator"},p.default.createElement("div",{className:"studies-page__section-title h1 color-mid-carmine"},Q.SECTIONS.PLAYGROUND),_.length>0&&!d.includes(Q.SECTIONS.PLAYGROUND)&&p.default.createElement(D.default,{studies:_,sortingClickHandler:function(t){return e.sortingClickHandler(Q.SECTIONS.PLAYGROUND,t)},sorting:this.props[Q.SECTIONS.PLAYGROUND+"_sorting"],onStudyClick:this.handleStudyClick,onStudyDelete:function(t){return e.handleStudyDeleteClick(t,Q.SECTIONS.PLAYGROUND)}}),0===_.length&&p.default.createElement("div",null,"There are currently no studies in this section.")))),p.default.createElement(P.PopupDialog,{isShown:this.state.isRemoveDialogShown,title:(y?"Delete":"Remove")+" study",handleClose:this.handleCancelStudyDelete,buttons:[p.default.createElement(P.ActionButton,{action:this.handleCancelStudyDelete},"Cancel"),p.default.createElement(P.ActionButton,{action:this.handleConfirmStudyDelete,primary:!0},"Confirm")]},p.default.createElement("div",{className:"h2"},"Are you sure you want to "+(y?"permanently delete":"remove")," ",p.default.createElement("b",null,(0,g.default)(this.state,"studyToRemove.study")),(y?"":" from your dashboard")+"?")),p.default.createElement(M.default,{isShown:i,status:"info",title:"Missing Indication",handleClose:function(){return e.props.closeMissingIndicationError()}},"There is no indication for this study. Study with no indication cannot be imported into FPO, and will be updated once a day."),p.default.createElement(P.PopupDialog,{title:"FPO studies with unknown status",isShown:this.state.isUnknownDialogShow,handleClose:this.handleHideUnknownStudies,buttons:[p.default.createElement(P.ActionButton,{action:this.handleHideUnknownStudies},"Close")]},p.default.createElement("div",{className:"unknown-stadies-dialog"},p.default.createElement("header",{className:"unknown-stadies-dialog__header"},p.default.createElement("h3",{className:"unknown-stadies-dialog__headline"},"Study"),p.default.createElement("h3",{className:"unknown-stadies-dialog__headline"},"Owner")),p.default.createElement("section",{className:"unknown-stadies-dialog__content-wrapper"},p.default.createElement("div",{className:"unknown-stadies-dialog__content"},c.map(function(e){return p.default.createElement(p.default.Fragment,{key:e.studyName},p.default.createElement("span",{className:"unknown-stadies-dialog__column"},e.studyName),p.default.createElement("span",{className:"unknown-stadies-dialog__column"},e.ownerName||"-"))}))))),p.default.createElement(Y.ContextHelpButton,{page:"dashboard"}),o&&p.default.createElement(k.default,null))}}]),t}(f.Component);ae.propTypes=(u={getStudies:h.default.func.isRequired,deleteStudy:h.default.func.isRequired,studies:h.default.array,unknownStudies:h.default.array,userName:h.default.string.isRequired,metadata:h.default.object.isRequired,studiesToImport:h.default.array,getPlatformStudies:h.default.func.isRequired,importPlatformStudy:h.default.func.isRequired,onStudyAdd:h.default.func.isRequired,push:h.default.func.isRequired,missingIndicationStudy:h.default.bool,closeMissingIndicationError:h.default.func.isRequired,isLoading:h.default.bool,TAFilterValue:h.default.string,setFilterValue:h.default.func.isRequired,setCollapsedSection:h.default.func.isRequired,collapsedSections:h.default.array},r(u,Q.SECTIONS.TRACKING+"_sorting",h.default.object.isRequired),r(u,Q.SECTIONS.PLANNING+"_sorting",h.default.object.isRequired),r(u,Q.SECTIONS.PLAYGROUND+"_sorting",h.default.object.isRequired),r(u,"setSortingOrder",h.default.func.isRequired),r(u,"getUnknownStudies",h.default.func.isRequired),u),ae.defaultProps={studies:void 0,unknownStudies:[],studiesToImport:void 0,missingIndicationStudy:!1,isLoading:!1,TAFilterValue:"",collapsedSections:[]},t.default=(0,v.connect)(s,{getStudies:K.getStudies,deleteStudy:K.deleteStudy,getPlatformStudies:X.getPlatformStudies,importPlatformStudy:X.importPlatformStudy,onStudyAdd:function(e){return(0,_.push)("/studies/new?cohorts="+(e||"false"))},push:_.push,closeMissingIndicationError:K.closeMissingIndicationError,setFilterValue:K.setFilterValue,setCollapsedSection:K.setCollapsedSection,setSortingOrder:K.setSortingOrder,getUnknownStudies:K.getUnknownStudies})(ae)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1192),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(8),u=a(510),d=n(u),c=a(28),f=function(e){var t=e.studyId,a=e.getStudyData,n=e.children,i=e.dataLoaded,o=e.isArchived;return(0,r.useEffect)(function(){a(t,o)}),l.default.createElement(l.default.Fragment,null,i?n:l.default.createElement(d.default,null))};f.defaultProps={dataLoaded:!1,isArchived:!1},f.propTypes={studyId:o.default.string.isRequired,getStudyData:o.default.func.isRequired,children:o.default.node.isRequired,dataLoaded:o.default.bool,isArchived:o.default.bool};var p=function(e,t){var a=t.params.id,n=t.location.pathname.indexOf("archived")>-1;return{studyId:a,dataLoaded:!!e.study[a]&&e.study[a]&&e.study[a].isArchivedScenarios===n,isArchived:n}},m={getStudyData:c.getStudyDashboardData};t.default=(0,s.connect)(p,m)(f)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(62),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(22),u=a(266),d=n(u),c=a(1044),f=n(c),p=a(145),m=n(p),h=a(529),v=n(h),_=function(e){var t=e.study,a=e.isShowStatusBar,n=e.studyParamsWarning,r=e.invalidFields,i=e.metadata,o=e.showApproveAbsenceWarning,u=e.onStudyChangedDialogClose;return l.default.createElement(l.default.Fragment,null,(!t.target_lpft||!t.fp||!t.target_num_patients)&&l.default.createElement(s.Row,null,l.default.createElement(s.Col,{offset:1,width:11},l.default.createElement(m.default,{title:"",status:"error",isShown:!0},"All milestones need to be set by the study owner before creating scenarios within the study"))),a&&l.default.createElement(s.Row,null,l.default.createElement(s.Col,{offset:1,width:11},l.default.createElement(v.default,{handleCloseDialog:u}))),n.showStudyParamsWarning&&l.default.createElement(s.Row,null,l.default.createElement(s.Col,{offset:1,width:11},l.default.createElement(d.default,{dashboard:!0,data:n}))),r&&r.length>0&&l.default.createElement(s.Row,null,l.default.createElement(s.Col,{offset:1,width:11},l.default.createElement(f.default,{study:t,infoOnly:!i||!i.isAdmin&&!i.isUserHasStudyFullControl||i.isCompleted}))),o&&l.default.createElement(s.Row,null,l.default.createElement(s.Col,{offset:1,width:11},l.default.createElement(m.default,{title:"",status:"error",isShown:!0},"This study still doesn`t have Approved plan"))))};_.defaultProps={isShowStatusBar:!1,studyParamsWarning:null,invalidFields:null,metadata:null,showApproveAbsenceWarning:!1,onStudyChangedDialogClose:function(){}},_.propTypes={study:o.default.object.isRequired,isShowStatusBar:o.default.bool,studyParamsWarning:o.default.object,invalidFields:o.default.array,metadata:o.default.object,showApproveAbsenceWarning:o.default.bool,onStudyChangedDialogClose:o.default.func},t.default=_},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,O.getStudyData)(e,{params:{id:t.studyId}}),n=(0,O.getMetadata)(e,{params:{id:t.studyId}});return{historicalReferences:(0,f.default)(a,"historical_references",[]).length>0?(0,f.default)(a,"historical_references").length:"",isImported:(0,f.default)(a,"is_imported",!1),isUserHasStudyFullControl:n.isUserHasStudyFullControl,isEditable:!!a&&(0,C.isEditableStudy)(a,e.auth.user),id:t.studyId,targetLpft:(0,f.default)(a,"target_lpft"),fp:(0,f.default)(a,"fp"),targetNumPatients:(0,f.default)(a,"target_num_patients"),archivedCount:(0,f.default)(a,"archivedCount"),userCanCreateNewScenario:n.userCanCreateNewScenario,isArchived:e.routing.locationBeforeTransitions.pathname.indexOf("archived")>-1}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(18),c=a(11),f=n(c),p=a(527),m=n(p),h=a(355),v=n(h),_=a(100),E=n(_),g=a(526),y=n(g),S=a(947),b=n(S),C=a(88),O=a(103),T=function(e){var t=e.navigate,a=e.id,n=e.targetLpft,r=e.fp,o=e.targetNumPatients,s=e.archivedCount,u=e.historicalReferences,d=e.isImported,c=e.compareScenariosLink,f=e.userCanCreateNewScenario,p=e.markedScenarios,h=e.handleChangeOwnerClick,_=e.handleEditStudyLevelClick,g=e.isUserHasStudyFullControl,S=e.isEditable,C=e.isArchived,O=(0,l.useCallback)(function(e){t(e)},[t]),T=(0,l.useCallback)(function(){O("/")},[O]),R=(0,l.useCallback)(function(){O("/studies/"+a)},[O,a]),w=(0,l.useCallback)(function(e){O("/studies/"+a+"/scenarios/new?cohorts="+(e||"false"))},[O,a]),A=(0,l.useCallback)(function(){O("/studies/"+a+"/compare?"+c())},[O,a,c]),I=(0,l.useCallback)(function(){O("/studies/"+a+"/archived")},[O,a]),N=(0,l.useCallback)(function(){O("/studies/"+a+"/historical/summary")},[O,a]);return i.default.createElement(m.default,null,i.default.createElement(v.default,{height:80,onClick:C?R:T},E.default.CHEVRON_LEFT),i.default.createElement(y.default,{height:1}),!C&&i.default.createElement(i.default.Fragment,null,i.default.createElement(y.default,{noLine:!0,height:190}),i.default.createElement(b.default,{isDisabled:!(n&&r&&o&&f),onItemClick:w}),i.default.createElement(v.default,{tooltip:"To compare select up to 3 scenarios",disabled:p.length<2,onClick:A,height:48},i.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},E.default.COMPARE,i.default.createElement("div",{className:"sup"},p.length>0?p.length:""))),i.default.createElement(v.default,{tooltip:"View archived scenarios",height:48,onClick:I},i.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},E.default.ARCHIVE,i.default.createElement("div",{className:"sup"},s))),i.default.createElement(y.default,{height:20}),i.default.createElement(v.default,{tooltip:"Select historical reference trials",onClick:N,height:48},i.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},E.default.REFERENCE_STUDIES,i.default.createElement("div",{className:"sup"},u))),d&&g?i.default.createElement(v.default,{className:"change-study-owner",tooltip:"Change study owner",height:48,onClick:h},E.default.USER_OWNER):null,g&&S&&i.default.createElement(v.default,{className:"change-study-level",tooltip:"Edit study level characteristics",height:48,onClick:_},E.default.EDIT)))},R={navigate:d.push};T.propTypes={compareScenariosLink:s.default.func.isRequired,markedScenarios:s.default.array,handleChangeOwnerClick:s.default.func.isRequired,handleEditStudyLevelClick:s.default.func.isRequired,navigate:s.default.func.isRequired,id:s.default.number.isRequired,targetLpft:s.default.string,fp:s.default.string,targetNumPatients:s.default.number,archivedCount:s.default.number,historicalReferences:s.default.oneOfType([s.default.string,s.default.number]),isImported:s.default.bool,userCanCreateNewScenario:s.default.bool,isUserHasStudyFullControl:s.default.bool,isEditable:s.default.bool,isArchived:s.default.bool},T.defaultProps={study:null,compareScenariosLink:null,markedScenarios:[],targetLpft:null,fp:null,targetNumPatients:null,archivedCount:null,historicalReferences:"",isImported:!1,userCanCreateNewScenario:!1,isUserHasStudyFullControl:!1,isEditable:!1,isArchived:!1},t.default=(0,u.connect)(r,R)(T)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=(0,_.getStudyData)(e,{params:{id:t.studyId}}),n=(0,g.default)(e,{params:{id:t.studyId}});return{studyId:t.studyId,targetLpft:a.target_lpft,isActive:a.state.status===h.default.ACTIVE||a.state.status===h.default.COMPLETED,rowsCount:t.dataType===v.COLLECTION_TYPES.APPROVED?n.approvedScenarios.length:n.preparedScenarios.length}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),i=n(l),o=a(1),s=n(o),u=a(8),d=a(12),c=a(554),f=n(c),p=a(532),m=a(17),h=n(m),v=a(62),_=a(103),E=a(55),g=n(E),y=function(e){var t=e.dataType,a=e.markedScenarios,n=e.activeUser,r=e.handleScenarioCheckboxClick,l=e.handleShareScenarioClick,o=e.handleDuplicateScenarioClick,s=e.handleRowClick,u=e.headerHeight,c=e.handleArchiveScenario,m=e.handleUnarchiveScenario,h=e.showScenarioWarningColumn,v=e.onWarningIconClick,_=e.removeScenario,E=e.targetLpft,g=e.isActive,y=e.studyId,S=e.rowsCount;return i.default.createElement(d.FlexTable,{headerHeight:u,rowHeight:48,rowsCount:S},i.default.createElement(f.default,{dataType:t,params:{id:y},checkedScenarios:a,onRowClick:s},i.default.createElement(d.Column,{header:i.default.createElement(p.HeaderCell,{title:"Updated"}),data:i.default.createElement(p.UpdatedDataCell,{dataType:t,params:{id:y},onSelect:r,checkedScenarios:a}),width:130,fixedWidth:!0}),i.default.createElement(d.Column,{header:i.default.createElement(p.HeaderCell,{hideUnderline:!0}),data:i.default.createElement(p.ScenarioDetailsDataCell,{onWarningIconClick:v,dataType:t,params:{id:y}}),fixedWidth:!0,width:h?36:0}),i.default.createElement(d.Column,{overflow:!1,header:i.default.createElement(p.HeaderCell,{title:"Scenario name"}),data:i.default.createElement(p.GenericDataCell,{dataType:t,params:{id:y},dataField:"name"}),width:400}),i.default.createElement(d.Column,{header:i.default.createElement(p.HeaderCell,{title:"Type"}),data:i.default.createElement(p.ScentarioTypeDataCell,{dataType:t,params:{id:y}}),fixedWidth:!0,width:50}),i.default.createElement(d.Column,{header:i.default.createElement(p.HeaderCell,{title:"Countries",alignTo:"right"}),data:i.default.createElement(p.CountriesDataCell,{dataType:t,params:{id:y}}),fixedWidth:!0,width:84}),i.default.createElement(d.Column,{header:i.default.createElement(p.HeaderCell,{title:"Patients",alignTo:"right"}),data:i.default.createElement(p.PatientsDataCell,{dataType:t,params:{id:y}}),fixedWidth:!0,width:74}),i.default.createElement(d.Column,{header:i.default.createElement(p.HeaderCell,{title:"Sites",alignTo:"right"}),data:i.default.createElement(p.SitesDataCell,{dataType:t,params:{id:y}}),fixedWidth:!0,width:59}),i.default.createElement(d.Column,{header:i.default.createElement(p.HeaderCell,{title:"FPFV-LPFV"}),data:i.default.createElement(p.FpfvLpfvDataCell,{dataType:t,params:{id:y}}),fixedWidth:!0,width:101}),i.default.createElement(d.Column,{header:i.default.createElement(p.HeaderCell,{title:"P/LPFT"}),data:i.default.createElement(p.PlpftDataCell,{dataType:t,params:{id:y},target:E,isActive:g}),fixedWidth:!0,width:90}),i.default.createElement(d.Column,{header:i.default.createElement(p.HeaderCell,{title:"Days (+/-)"}),data:i.default.createElement(p.DaysDataCell,{dataType:t,params:{id:y},target:E,isActive:g}),fixedWidth:!0,width:90}),i.default.createElement(d.Column,{header:i.default.createElement(p.HeaderCell,{title:"Owner"}),data:i.default.createElement(p.GenericDataCell,{dataType:t,params:{id:y},dataField:"owner_name"}),width:200}),i.default.createElement(d.Column,{header:i.default.createElement(p.HeaderCell,{title:"Status"}),data:i.default.createElement(p.GenericDataCell,{dataType:t,params:{id:y},dataField:"status",isBold:!0}),width:110}),i.default.createElement(d.Column,{header:i.default.createElement(d.Cell,null,""),fixedWidth:!0,data:i.default.createElement(p.ActionDataCell,{params:{id:y},activeUser:n,shareScenario:l,duplicateScenario:o,removeScenario:_,archiveScenario:c,unarchiveScenario:m,dataType:t}),width:40})))};y.propTypes={activeUser:s.default.object.isRequired,markedScenarios:s.default.array.isRequired,handleScenarioCheckboxClick:s.default.func.isRequired,handleShareScenarioClick:s.default.func.isRequired,handleDuplicateScenarioClick:s.default.func.isRequired,handleRowClick:s.default.func.isRequired,headerHeight:s.default.number,handleArchiveScenario:s.default.func.isRequired,showScenarioWarningColumn:s.default.bool,onWarningIconClick:s.default.func.isRequired,removeScenario:s.default.func,dataType:s.default.string.isRequired,targetLpft:s.default.string,isActive:s.default.bool,studyId:s.default.number.isRequired,rowsCount:s.default.number.isRequired,handleUnarchiveScenario:s.default.func.isRequired},y.defaultProps={headerHeight:void 0,showScenarioWarningColumn:!1,removeScenario:null,selectedScenario:null,targetLpft:null,isActive:!1},t.default=(0,u.connect)(r)(y)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n);a(2415);var l=function(){return r.default.createElement("div",{className:"wrapper"},r.default.createElement("div",{className:"gutter"}),r.default.createElement("div",{className:"main"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-offset-1 col-width-3 area-red"}))),r.default.createElement("div",{className:"gutter"}))};t.default=l},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1201),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},function(e,t,a){"use strict";function n(e,t,a){return e.filter(function(e){return"country"===e.type}).map(function(e){if(e.country_id===t){var n=a[e.country_id]||{};return l({},e,{adjusted_num_sites:n.num_sites?+n.num_sites.value:e.adjusted_num_sites,adjusted_patient_allocation:n.patient_allocation?n.patient_allocation.value:e.adjusted_patient_allocation,adjusted_25_si:n["25_si"]?n["25_si"].value:e.adjusted_25_si,adjusted_50_si:n["50_si"]?n["50_si"].value:e.adjusted_50_si,adjusted_90_si:n["90_si"]?n["90_si"].value:e.adjusted_90_si,adjusted_fpfv:n.fpfv?n.fpfv.value:e.adjusted_fpfv,adjusted_fsiv:n.fsiv?n.fsiv.value:e.adjusted_fsiv,adjusted_randomisation_rate:n.randomisation_rate?n.randomisation_rate.value:e.adjusted_randomisation_rate,adjusted_sas:n.sas?+n.sas.value:e.adjusted_sas,adjusted_screening_failure:n.screening_failure?n.screening_failure.value:e.adjusted_screening_failure,adjusted_invalids:[],ignore_aggregation:n.ignore_aggregation?n.ignore_aggregation.value:e.ignore_aggregation})}return e})}function r(e,t){var a=[];return(0,o.default)(t).isSameOrBefore(e.adjusted_fsiv)||a.push("adjusted_fsiv"),(0,o.default)(e.adjusted_fsiv).isSameOrBefore(e.adjusted_25_si)||a.push("adjusted_25_si"),(0,o.default)(e.adjusted_25_si).isSameOrBefore(e.adjusted_50_si)||a.push("adjusted_50_si"),(0,o.default)(e.adjusted_50_si).isSameOrBefore(e.adjusted_90_si)||a.push("adjusted_90_si"),(0,o.default)(e.adjusted_fsiv).isSameOrBefore(e.adjusted_fpfv)||a.push("adjusted_fpfv"),a}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.getDirtyFullData=n,t.countryGroupValidation=r;var i=a(10),o=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(1),o=n(i),s=a(59),u=a(86),d=a(258),c=n(d),f=a(6),p=a(49),m={DUPLICATE:"DUPLICATE",NOTES:"NOTES",COHORTS:"COHORTS",SAVE:"SAVE",EXPORT:"EXPORT",EDIT:"EDIT",OPTIMISE:"OPTIMISE",APPROVE:"APPROVE"},h=function(e){var t=e.notes,a=e.eventsCount,n=e.toggleNotes,r=e.navigateToEvents,i=e.handleBackClick,o=e.dataHistoryPointer,d=e.handleUndoAction,h=e.dataHistory,v=e.handleRedoAction,_=e.handleSaveData,E=e.disabledButtons,g=e.isEditable,y=e.getOnClickAction,S=e.handleDuplicateScenarioClick,b=e.exportToExcel,C=e.handlerEditScenarioClick,O=e.handlerApproveScenario,T=e.globalRollupData,R=e.canBeOptimised,w=e.isApprovable,A=e.study,I=e.scenario,N=e.filter,D=e.isDuplicateAvailable;return l.default.createElement(u.Sidebar,null,l.default.createElement(u.Button,{className:"fpo-exit-button",height:60},l.default.createElement(s.Link,{to:"/"},f.Icons.HOME)),l.default.createElement(u.Separator,{height:20}),l.default.createElement(u.Button,{className:"fpo-exit-button",height:51,onClick:i},f.Icons.CHEVRON_LEFT),l.default.createElement(u.Separator,{height:22,noLine:!0}),l.default.createElement(u.Button,{height:56,onClick:n,tooltip:"Notes"},l.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},f.Icons.NOTES,l.default.createElement("div",{className:"sup"},t>0?(0,p.kFormatter)(t):""))),l.default.createElement(u.Button,{height:56,onClick:r,tooltip:"Events"},l.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",width:"100%"}},f.Icons.EVENT,l.default.createElement("div",{className:"sup"},a&&a.length>0?(0,p.kFormatter)(a.length):""))),l.default.createElement(u.Separator,{height:20}),l.default.createElement(u.Button,{className:"fpo-exit-button",height:56,disabled:0===o,onClick:d},l.default.createElement(u.AnimatedContent,{disabled:0===o,tooltip:"Undo"},f.Icons.UNDO)),l.default.createElement(u.Button,{className:"fpo-exit-button flip-vertical",height:56,disabled:o===h.length-1,onClick:v},l.default.createElement(u.AnimatedContent,{tooltip:"Redo",disabled:o===h.length-1},f.Icons.UNDO)),l.default.createElement(u.Button,{height:56,tooltip:"Save",disabled:!g||E.includes(m.SAVE),onClick:_},f.Icons.SAVE),l.default.createElement(u.Button,{height:56,tooltip:"Duplicate and edit",disabled:!D,actionName:m.DUPLICATE,onClick:y(S)},f.Icons.DUPLICATE),l.default.createElement(c.default,{exportToExcel:b,study:A,scenario:I,filter:N}),l.default.createElement(u.Button,{height:56,tooltip:"Edit",actionName:m.EDIT,disabled:!g,onClick:y(C)},f.Icons.EDIT),l.default.createElement(u.Separator,{height:20}),l.default.createElement(u.Button,{height:56,disabled:!R,tooltip:"Optimize scenario",actionName:m.OPTIMISE},f.Icons.OPTIMISE),l.default.createElement(u.Button,{height:56,disabled:!w||!T.lpft,tooltip:"Approve scenario",actionName:m.APPROVE,onClick:y(O)},f.Icons.APPROVE))};h.defaultProps={notes:0,eventsCount:[],dataHistoryPointer:0,dataHistory:[],disabledButtons:[],isEditable:!1,globalRollupData:{},canBeOptimised:!1,isApprovable:!1,isDuplicateAvailable:!1,filter:""},h.propTypes={notes:o.default.number,eventsCount:o.default.array,toggleNotes:o.default.func.isRequired,navigateToEvents:o.default.func.isRequired,handleBackClick:o.default.func.isRequired,dataHistoryPointer:o.default.number,handleUndoAction:o.default.func.isRequired,dataHistory:o.default.array,handleRedoAction:o.default.func.isRequired,handleSaveData:o.default.func.isRequired,disabledButtons:o.default.array,isEditable:o.default.bool,getOnClickAction:o.default.func.isRequired,handleDuplicateScenarioClick:o.default.func.isRequired,exportToExcel:o.default.func.isRequired,handlerEditScenarioClick:o.default.func.isRequired,handlerApproveScenario:o.default.func.isRequired,globalRollupData:o.default.object,canBeOptimised:o.default.bool,isApprovable:o.default.bool,isDuplicateAvailable:o.default.bool,scenario:o.default.object.isRequired,study:o.default.object.isRequired,filter:o.default.string},t.default=l.default.memo(h)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var a=t.scenarioId,n=t.studyId,l=t.scenario,i=t.countries,o=e.study[n];l.studyParamsWarning=(0,Ne.getStudyParamsWarning)(o,l);var s=(0,Pe.getParamItemStorage)("fpo-dirty-data",e.auth.user.id+"-"+n+"-"+a,"values");if(s&&s.adjustedData){var u=(0,Oe.getDateFields)();Object.values(s.adjustedData).forEach(function(e){Object.keys(e).forEach(function(t){u.has(t)&&(e[t].value=(0,Oe.getMomentDate)(e[t].value))})})}var d=s?s.adjustedData:null,c=null;if(s&&s.deleteCountries){c=[].concat(r(s.deleteCountries));var f=c.map(function(e){return e.country_id});i=i.filter(function(e){return!f.includes(e.country_id)})}return{deleteCountries:c,valuesToSave:d,requirePageRefresh:e.errors.sessionExpired||!!e.errors.internalServer,scenario:l,study:e.study[n],countries:i,scenarioId:a,studyId:n,platformRegions:e.platform.regions,isPlatformRegionsLoading:e.platform.isRegionsLoading,activeUser:e.auth.user,notes:(0,Me.getScenarioNotesFromStore)(e,a).length,actuals:e.actuals[n]}}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a(0),p=n(f),m=a(30),h=n(m),v=a(1),_=n(v),E=a(8),g=a(18),y=a(10),S=n(y),b=a(2),C=n(b),O=a(31),T=n(O),R=a(84),w=n(R),A=a(199),I=n(A),N=a(356),D=n(N),P=a(22),L=a(265),M=n(L),x=a(180),k=n(x),j=a(517),F=n(j),U=a(262),V=n(U),B=a(218),H=n(B),G=a(146),Y=n(G),q=a(257),z=n(q),W=a(350),K=n(W),X=a(129),Z=n(X),J=a(261),Q=n(J),$=a(352),ee=n($),te=a(268),ae=n(te),ne=a(79),re=n(ne),le=a(353),ie=n(le),oe=a(128),se=n(oe),ue=a(1200),de=n(ue),ce=a(267),fe=n(ce),pe=a(78),me=n(pe),he=a(32),ve=a(101),_e=n(ve),Ee=a(112),ge=n(Ee),ye=a(36),Se=a(28),be=a(77),Ce=a(213),Oe=a(7),Te=a(147),Re=a(40),we=n(Re),Ae=a(1214),Ie=a(1199),Ne=a(64),De=a(70),Pe=a(37),Le=a(63),Me=a(48),xe=a(14),ke=n(xe),je=a(41),Fe=a(17),Ue=n(Fe),Ve=a(221);a(2416);var Be=(0,w.default)(we.default),He=(0,w.default)(Ne.getFilteredData),Ge=(0,w.default)(Ne.getFilteredTableData),Ye=(0,w.default)(Ne.getTableHeaderPosition),qe=(0,w.default)(Ne.getGlobalRollupData),ze=function(e){function t(e){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));We.call(a);var n=e.countries,r=(0,Oe.getScenarioCalculatedData)(n,e.scenario),l=[xe.SIDEBAR_BUTTONS.SAVE],s=(0,Pe.getParamItemStorage)("fpo-ui-settings","chartState","collapsed"),u=(0,Pe.getParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter")||{overallocated:!1,actualData:!0},d=(0,Pe.getParamItemStorage)("fpo-ui-settings","chartViewMode","showOverallocationOnChart");a.state={filter:{name:ke.default,type:xe.ROLLUP,subject:null},disabledButtons:l,fullData:r,dirtyFullData:r,adjustedData:void 0,deleteCountries:[],isDuplicateScenarioDialogShown:!1,isApproveScenarioDialogShown:!1,isSaveChangesDialogShown:!1,isIncompleteDataDialogShown:!1,isRestoredDialogShown:!1,saveChangesActionType:void 0,currentLocation:"",currentRegion:"",currentEvents:[],fixedChart:!1,dataHistoryPointer:0,chartCollapsed:s,tableFilter:u,showOverallocationOnChart:d,showLoader:!1};var c={filter:(0,T.default)(a.state.filter),disabledButtons:(0,T.default)(l),adjustedData:void 0,dirtyFullData:(0,T.default)(r),deleteCountries:[]};return a.dataHistory=[c],a.alertsHeight=44,a.alertsPosition=87,a.locationsFilterPosition=87,a.tableHeaderPosition=s?196:398,a.miniChartPosition=146,a.tableFilterPosition=s?146:352,a.notesPanelOpen=!1,a.handleFilterSelect=a.handleFilterSelect.bind(a),a.handleBackClick=a.handleBackClick.bind(a),a.handleDuplicateScenarioClick=a.handleDuplicateScenarioClick.bind(a),a.handleDuplicateScenarioDialogClose=a.handleDuplicateScenarioDialogClose.bind(a),a.handleDuplicateScenarioDialogSubmit=a.handleDuplicateScenarioDialogSubmit.bind(a),a.handlerEditScenarioClick=a.handlerEditScenarioClick.bind(a),a.exportToExcel=a.exportToExcel.bind(a),a.handlerApproveScenario=a.handlerApproveScenario.bind(a),a.submitApproveDialog=(0,I.default)(a.submitApproveDialog.bind(a),4e3,{trailing:!1}),a.handleEsc=a.handleEsc.bind(a),a.handleUnsavedAction=a.handleUnsavedAction.bind(a),a.toggleNotes=a.toggleNotes.bind(a),a.handleCloseScenarioDialog=a.handleCloseScenarioDialog.bind(a),a.navigateToEvents=a.navigateToEvents.bind(a),a.handleDataChange=a.handleDataChange.bind(a),a.handleBatchDataChange=a.handleBatchDataChange.bind(a),a.resetCountryData=a.resetCountryData.bind(a),a.toggleEvents=a.toggleEvents.bind(a),a.getStateEventForPatientsRandomized=a.getStateEventForPatientsRandomized.bind(a),a.closeEventsPanel=a.closeEventsPanel.bind(a),a.saveOverrides=(0,I.default)(a.saveOverrides.bind(a),2e3,{trailing:!1}),a.removeScenarioRegion=a.removeScenarioRegion.bind(a),a.removeScenarioCountry=a.removeScenarioCountry.bind(a),a.addScenarioRegion=a.addScenarioRegion.bind(a),a.addScenarioCountry=a.addScenarioCountry.bind(a),a.handleSaveData=a.handleSaveData.bind(a),a.handleSaveDataDialogClose=a.handleSaveDataDialogClose.bind(a),a.applyRestoredData=a.applyRestoredData.bind(a),a}return s(t,e),c(t,[{key:"componentDidMount",value:function(){document.body.addEventListener("keydown",this.handleEsc);var e={root:null,rootMargin:"80px 0px 0px 0px",threshold:.75},t=this.handleMiniChart;this.observer=new IntersectionObserver(t,e),this.chartContainer&&this.observer.observe(this.chartContainer)}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(this.props.scenarioId!==e.scenarioId)this.setState({filter:{name:ke.default,type:xe.ROLLUP,subject:null}});else{var a=this.state,n=a.filter,r=a.adjustedData,l=r,i=this.state.deleteCountries,o=e.countries;l&&Object.keys(l).forEach(function(t){var a=l[t],n=o.find(function(e){return e.id===+t});if(n&&a)Object.keys(a).forEach(function(e){n["adjusted_"+e]=a[e].value});else if(e.platformRegions&&e.platformRegions.length>0){var r=t.split("-"),i=r&&r[0],s=o.find(function(e){return e.country_name===i});if(!s){var u=r&&r[2],d=e.platformRegions.find(function(e){return e.name===u});if(d){var c=(0,Oe.getNewCountryObject)(i,u,u,d&&1===d.countries.length,!0);Object.keys(a).forEach(function(e){c["adjusted_"+e]=a[e].value}),o.push(c)}}}}),e.requirePageRefresh&&(l||i&&i.length>0)&&((0,Pe.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"-"+this.props.studyId+"-"+this.props.scenarioId),(0,Pe.addToStorage)("fpo-dirty-data",{id:e.activeUser.id+"-"+e.studyId+"-"+e.scenarioId,values:this.state}));var s=!1;n.type===xe.REGION?s=void 0!==e.countries.find(function(e){return e.region_name===n.name}):n.type===xe.COUNTRY&&(s=void 0!==e.countries.find(function(e){return e.country_name===n.name})),s||this.setState({filter:{name:ke.default,type:xe.ROLLUP,subject:null}});var u=(0,Oe.getScenarioCalculatedData)(o,e.scenario);this.setState({isRestoredDialogShown:!(!e.valuesToSave&&!e.deleteCountries),deleteCountries:i,fullData:u,dirtyFullData:u},function(){0===t.dataHistory.length&&-1===t.state.dataHistoryPointer&&t.addHistoryStep()})}}},{key:"componentDidUpdate",value:function(){this.chartContainer&&this.observer.observe(this.chartContainer)}},{key:"componentWillUnmount",value:function(){this.chartContainer&&(this.observer.unobserve(this.chartContainer),this.observer.disconnect()),document.body.removeEventListener("keydown",this.handleEsc)}},{key:"getCurrentEvents",value:function(e,t){var a=this,n=this.props,r=n.study,l=n.scenario,i=[];return(r.state.status!==Ue.default.ACTIVE||l.status===xe.SCENARIO_STATUS.APPROVED||null===l.source_scenario_id&&"IMPACT"!==l.origin?l.events:l.adjusted_events).forEach(function(n,r,l){return n.locations.forEach(function(n){n.name===e&&n.countries.forEach(function(e){if(e.name===t){var n=l[r];n.trackingStatus=a.getStateEventForPatientsRandomized(t),i.push(n)}})})}),i}},{key:"getStateEventForPatientsRandomized",value:function(e){var t=Object.assign({},this.state.fullData),a=Object.values(t).filter(function(t){return t.country_name===e}).pop(),n=a.actual_curves[2],r=a.actual_date,i=n.reduce(function(e,t){return(0,S.default)(t[0]).isSameOrBefore(r)&&e.push(t),e},[]);return a.events.map(function(e){var t;if(e.event_type!==je.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS)return null;for(var a=e.patients,n=e.start_after,r=e.duration,o=null,s=0;s<i.length;s+=1)if(i[s][1]>=a){o=(0,S.default)(i[s][0]);break}if(!o)return"PENDING";var u=o.clone().add(n,"d"),d=o.clone().add(n+r,"d"),c=(0,S.default)(),f=c.isBefore(u),p=c.isAfter(d),m=c.isSameOrAfter(u)&&c.isSameOrBefore(d);return(0,Ae.switchCase)((t={},l(t,f,"PENDING"),l(t,p,"COMPLETED"),l(t,m,"ACTIVE"),t))(null)(!0)})}},{key:"handleBatchDataChange",value:function(e,t){var a=this,n=this.state,r=n.adjustedData,i=void 0===r?{}:r,o=n.dirtyFullData,s=this.state.disabledButtons;i[e]=t.reduce(function(e,t){var a=t.name.replace("adjusted_","");return d({},e,l({},a,{focused:!1,value:t.value,isValid:!0}))},i[e]);var u=(0,Ie.getDirtyFullData)(o,e,i),c=(0,Oe.getScenarioCalculatedData)(u,this.props.scenario);this.setState({adjustedData:i,disabledButtons:s.filter(function(e){return e!==xe.SIDEBAR_BUTTONS.SAVE}),dirtyFullData:c},function(){a.addHistoryStep()})}},{key:"handleDataChange",value:function(e,t){var a=this,n=this.state,r=n.adjustedData,i=void 0===r?{}:r,o=n.dirtyFullData,s=this.state.disabledButtons,u=t.fieldName.replace("adjusted_","");i[e]=d({},i[e],l({},u,{focused:!1,value:t.newValue,isValid:!0}));var c=(0,Ie.getDirtyFullData)(o,e,i),f=(0,Oe.getScenarioCalculatedData)(c,this.props.scenario);this.setState({adjustedData:i,dirtyFullData:f,disabledButtons:s.filter(function(e){return e!==xe.SIDEBAR_BUTTONS.SAVE})},function(){a.addHistoryStep()})}},{key:"resetCountryData",value:function(e,t){var a=this,n=this.state,r=n.adjustedData,i=void 0===r?{}:r,o=n.dirtyFullData;delete i[e];var s=this.state.disabledButtons;s.push(xe.SIDEBAR_BUTTONS.SAVE);var u=this.props.countries.find(function(t){return t.country_id===e}),c=o.filter(function(e){return"country"===e.type}).map(function(a){if(a.country_id===e){var n;return d({},a,(n={},l(n,t,u[t]),l(n,"adjusted_invalids",[]),n))}return a}),f=(0,Oe.getScenarioCalculatedData)(c,this.props.scenario),p=Object.keys(i).length>0?s.filter(function(e){return e!==xe.SIDEBAR_BUTTONS.SAVE}):s;this.setState({adjustedData:i,fullData:f,disabledButtons:p,dirtyFullData:f},function(){a.addHistoryStep()})}},{key:"handleEsc",value:function(e){27===(e.charCode||e.keyCode||e.which)&&e.preventDefault()}},{key:"handleFilterSelect",value:function(e){this.setState({filter:e})}},{key:"handleBackClick",value:function(){var e=this.props,t=e.studyId,a=e.goToStudy,n=e.scenario;a(t,n&&n.is_archived)}},{key:"handleSaveData",value:function(){this.saveOverrides()}},{key:"handleSaveDataDialogClose",value:function(){this.setState({isIncompleteDataDialogShown:!1})}},{key:"handleDuplicateScenarioClick",value:function(){this.setState({isDuplicateScenarioDialogShown:!0})}},{key:"handleUnsavedAction",value:function(e){this.setState({isSaveChangesDialogShown:!0,saveChangesActionType:e})}},{key:"handleDuplicateScenarioDialogClose",value:function(){this.setState({isDuplicateScenarioDialogShown:!1})}},{key:"handleDuplicateScenarioDialogSubmit",value:function(e,t,a,n,r){var l=this,i=this.props,o=i.studyId,s=i.scenario,u=i.study,d=i.goToScenario,c=(s&&s.status===xe.SCENARIO_STATUS.APPROVED||s&&s.status===xe.SCENARIO_STATUS.PREV_APPROVED)&&u.state.status===Ue.default.ACTIVE,f=s.countries.filter(function(e){return e.onlyActuals}).map(function(e){return e.platform_country_id});new Promise(function(t){return t(r?l.props.createAdjustmentScenario(s.id,e,null,a,n,f):l.props.duplicateScenario(s.id,e,null,a,n,c,f))}).then(function(e){var t=e.id;return d(o,t)}),this.handleDuplicateScenarioDialogClose()}},{key:"handlerEditScenarioClick",value:function(){var e=this.props,t=e.studyId,a=e.scenarioId;(0,e.goToScenarioEdit)(t,a)}},{key:"exportToExcel",value:function(){var e=this.props,t=e.study,a=e.scenario,n=this.state.fullData;(0,Te.exportToExcel)(t,a,n)}},{key:"handlerApproveScenario",value:function(){this.setState({isApproveScenarioDialogShown:!0})}},{key:"toggleNotes",value:function(){this.setState({notesPanelOpen:!this.state.notesPanelOpen})}},{key:"addScenarioCountry",value:function(e,t,a){var n=this,r=this.state,l=r.adjustedData,i=void 0===l?{}:l,o=r.dirtyFullData,s=this.props.scenario,u=e+"-"+a+"-"+t;"Unspecified country"===e&&(u=e+"-"+t+"-"+t);var c=this.props.platformRegions.find(function(e){return e.name===t}),f=c.countries.find(function(t){return t.name===e});this.props.getParametersByScenarioAndCountry(this.props.study.id,this.props.scenario.id,f?f.id:null,t).then(function(r){var l=(0,Oe.getNewCountryObject)(e,t,a,1===c.countries.length);if(r&&Object.keys(r).length>0){var p=null!==s.source_scenario_id||"IMPACT"===s.origin;l=(0,Oe.mergeCountryParameters)(s,r,l,p,!0)}if(f&&f.id&&n.props.actuals){var m=n.props.actuals[f.id];m&&(l=d({},l,(0,Oe.prepareCountryActualData)(m)))}var h=o.filter(function(e){return"country"===e.type&&e.location!==l.location});h.push(l);var v=(0,Oe.getScenarioCalculatedData)(h,n.props.scenario);i[u]={},n.setState({adjustedData:i,fullData:v,disabledButtons:[],dirtyFullData:v},function(){n.addHistoryStep()})}).catch(function(){var r=(0,Oe.getNewCountryObject)(e,t,a,1===c.countries.length),l=o.filter(function(e){return"country"===e.type});l.push(r);var s=(0,Oe.getScenarioCalculatedData)(l,n.props.scenario);i[u]={},n.setState({adjustedData:i,fullData:s,disabledButtons:[],dirtyFullData:s},function(){n.addHistoryStep()})})}},{key:"addScenarioRegion",value:function(e,t,a){var n=this,r=this.props.platformRegions.find(function(e){return e.name===a}),l="Unspecified country";1===r.countries.length&&(l=r.countries[0].name),this.setState({addedCountry:l+"-"+a},function(){n.addScenarioCountry(l,a,a)})}},{key:"removeScenarioRegion",value:function(e){var t=this,a=this.state,n=a.adjustedData,r=void 0===n?{}:n,l=a.dirtyFullData,i=a.deleteCountries,o=a.disabledButtons,s=a.filter,u=l.filter(function(e){return"country"===e.type}).reduce(function(t,a){var n=t;if(a.region_id!==e)n.push(a);else if(void 0===a.id&&a.country_id.indexOf("-")>0){var l=a.country_name+"-"+e+"-"+a.region_name;delete r[l],i.push(a)}else delete r[a.id],i.push(a);return n},[]),c=(0,Oe.getScenarioCalculatedData)(u,this.props.scenario),f={deleteCountries:i,disabledButtons:o.filter(function(e){return e!==xe.SIDEBAR_BUTTONS.SAVE}),adjustedData:r,dirtyFullData:c};if(void 0===c.find(function(e){return e.location===s.name})){var p={filter:{name:ke.default,type:xe.ROLLUP,subject:null}};f=d({},f,p)}this.setState(f,function(){t.addHistoryStep()})}},{key:"removeScenarioCountry",value:function(e,t){var a=this,n=this.state,r=n.adjustedData,l=void 0===r?{}:r,i=n.dirtyFullData,o=n.deleteCountries,s=n.disabledButtons,u=n.filter,c=i.filter(function(e){return"country"===e.type}).reduce(function(a,n){var r=a;if(n.country_name!==e||n.region_id!==t)r.push(n);else{if(void 0===n.id){var i=[];Object.keys(l).forEach(function(a){var n=a.split("-");3===n.length&&n[0]===e&&n[2]===t&&i.push(a)}),i.forEach(function(e){delete l[e]}),delete l[n.country_id]}delete l[n.id],o.push(n)}return r},[]),f=(0,Oe.getScenarioCalculatedData)(c,this.props.scenario),p={deleteCountries:o,disabledButtons:s.filter(function(e){return e!==xe.SIDEBAR_BUTTONS.SAVE}),adjustedData:l,dirtyFullData:f};if(void 0===f.find(function(e){return e.location===u.name})){var m={filter:{name:ke.default,type:xe.ROLLUP,subject:null}};p=d({},p,m)}this.setState(p,function(){a.addHistoryStep()})}},{key:"handleCloseScenarioDialog",value:function(){this.setState({isFailedDialogClose:!0})}},{key:"toggleEvents",value:function(e){e.stopPropagation();var t=e.currentTarget.dataset.region,a=e.currentTarget.dataset.loc,n=this.state,r=n.currentRegion,l=n.currentLocation;if(t&&a&&t===r&&a===l)return void this.setState({eventsPanelOpen:!1,currentRegion:"",currentLocation:"",currentEvents:[]});this.setState({eventsPanelOpen:!0,currentRegion:t,currentLocation:a,currentEvents:(0,De.sortEventsByField)(this.getCurrentEvents(t,a),"start_date","ASC",!0)})}},{key:"closeEventsPanel",value:function(){this.setState({eventsPanelOpen:!1})}},{key:"navigateToEvents",value:function(){this.props.navigateToEvents(this.props.studyId,this.props.scenarioId)}},{key:"saveOverrides",value:function(){var e=this,t=this.state,a=t.adjustedData,n=void 0===a?{}:a,i=t.deleteCountries,o=void 0===i?[]:i,s=this.props.platformRegions,u=o.reduce(function(e,t){return e.push(t.country_id),e},[]);return new Promise(function(t){u.length>0&&t(e.props.removeScenarioCountry(e.props.scenario.id,u)),t()}).then(function(){var t=Object.keys(n);(0,Pe.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-"+e.props.scenarioId);var a=t.map(function(t){var a=t,i=e.props.countries.find(function(e){return e.country_id===+a});if(!i)for(var o=0;o<s.length;o+=1){var u=s[o].countries.find(function(e){return e.name===a.substr(0,a.indexOf("-"))});if(u){i={country_name:u.name,override_id:null,countryPlatformId:u.id,region_name:s[o].name};break}}if(!i){var c=a.split("-");i={country_name:c&&c[0],override_id:null,countryPlatformId:null,region_name:c&&c[1]}}var f=n[t];f=Object.keys(f).reduce(function(e,t){return[].concat(r(e),[l({},t,f[t].value)])},[]);var p=["fsiv","25_si","50_si","90_si","fpfv"];return f=f.map(function(t){var a=d({},t),n=Object.keys(t)[0],r=Object.values(t)[0];return-1!==p.indexOf(n)&&(a[n]=(0,S.default)(r).diff(e.props.scenario.fp,"d")),a}),{countryPlatformId:i.countryPlatformId,countryName:i.country_name,overrideId:i.override_id,regionName:i.region_name,values:f}});return e.props.saveOverrides(a,e.props.studyId,e.props.scenario.id).then(function(){return e.dataHistory=[],e.setState({isIncompleteDataDialogShown:!1,adjustedData:void 0,deleteCountries:[],disabledButtons:[].concat(r(e.state.disabledButtons),[xe.SIDEBAR_BUTTONS.SAVE]),dataHistoryPointer:-1}),!0})})}},{key:"applyRestoredData",value:function(){var e=this.props,t=e.valuesToSave,a=e.deleteCountries,n=e.platformRegions;(0,Pe.removeParamItemStorage)("fpo-dirty-data",this.props.activeUser.id+"-"+this.props.studyId+"-"+this.props.scenarioId);var r=this.props.countries;t&&Object.keys(t).forEach(function(e){var a=t[e],l=r.find(function(t){return t.id===+e});if(l&&a)Object.keys(a).forEach(function(e){l["adjusted_"+e]=a[e].value});else if(n&&n.length>0){var i=e.split("-"),o=i&&i[0],s=r.find(function(e){return e.country_name===o&&e.region_name===i[1]});if(!s){var u=i&&i[2],d=n.find(function(e){return e.name===u});if(d){var c=(0,Oe.getNewCountryObject)(o,u,u,d&&1===d.countries.length,!0);Object.keys(a).forEach(function(e){c["adjusted_"+e]=a[e].value}),r.push(c)}}}});var l=(0,Oe.getScenarioCalculatedData)(r,this.props.scenario);this.setState({isRestoredDialogShown:!1,deleteCountries:a,adjustedData:t,fullData:l,dirtyFullData:l,disabledButtons:[]})}},{key:"submitApproveDialog",value:function(){var e=this,t=this.props,a=t.study,n=t.scenario;this.setState({showLoader:!0},function(){e.props.approveScenario(a.id,n.id,(0,Le.serializeScenarioData)(a,n,e.state.dirtyFullData))})}},{key:"render",value:function(){var e=this,t=this.props,a=t.scenario,n=t.study,r=t.platformRegions,l=t.activeUser,i=t.notes,o=t.countries,s=t.requirePageRefresh,u=t.navigateToViewSites,d=this.state,c=d.fullData,f=d.filter,m=d.isDuplicateScenarioDialogShown,v=d.isApproveScenarioDialogShown,_=d.isIncompleteDataDialogShown,E=d.isSaveChangesDialogShown,g=d.saveChangesActionType,y=d.disabledButtons,S=d.dirtyFullData,b=d.tableFilter,O=d.dataHistoryPointer,T=d.chartCollapsed,R=d.showLoader;if(!a||!n||!r.length)return null;var w=Be(l,n,a),A=w.isDuplicateAvailable,I=w.isEditable,N=w.isAdjusted,L=w.isApprovable,x=w.isAdmin,j=w.isUserHasScenarioFullControl,U=(!y.includes(xe.SIDEBAR_BUTTONS.SAVE)||o.some(function(e){return null===e.override_id&&!e.onlyActuals}))&&!s,B=He(S,f),q=qe(S);q.parameter_uncertainty=a.parameter_uncertainty;var W=Ge(S,q,f,!1,null),J=B&&void 0!==B.actual_overallocation&&0!==B.actual_overallocation,$=B&&B.ignore_aggregation,te=J,ne=Ye(this.tableHeaderPosition,te,this.alertsHeight),le=N?a.adjusted_events:a.events,oe="scenario-viewer__tracking--";return a.source_scenario_id?oe+=a.exact_copy?"adjusted-exact":"adjusted-weighted":oe+="approved",p.default.createElement("div",{className:(0,C.default)("scenario-page-container","screenshot-container",{overallocated:J})},p.default.createElement(de.default,{canBeOptimised:!1,dataHistory:this.dataHistory,dataHistoryPointer:O,disabledButtons:y,eventsCount:le,exportToExcel:this.exportToExcel,getOnClickAction:this.getOnClickAction,globalRollupData:q,handleBackClick:this.handleBackClick,handleDuplicateScenarioClick:this.handleDuplicateScenarioClick,handlerApproveScenario:this.handlerApproveScenario,handlerEditScenarioClick:this.handlerEditScenarioClick,handleRedoAction:this.handleRedoAction,handleSaveData:this.handleSaveData,handleUndoAction:this.handleUndoAction,isApprovable:L,isDuplicateAvailable:A,isEditable:I,navigateToEvents:this.navigateToEvents,notes:i,toggleNotes:this.toggleNotes,study:n,scenario:a,filter:f.name}),p.default.createElement(P.Grid,null,p.default.createElement(P.Row,null,p.default.createElement(P.Col,{offset:8,width:4},p.default.createElement(Q.default,{isEditable:!0,scenarioId:a.id,onSubmitNote:this.props.addScenarioNote,onClose:this.toggleNotes,expanded:this.state.notesPanelOpen}),p.default.createElement(ee.default,{onClose:this.closeEventsPanel,currentRegion:this.state.currentRegion,currentLocation:this.state.currentLocation,currentEvents:this.state.currentEvents,eventTrackingStatus:!0,expanded:this.state.eventsPanelOpen})))),p.default.createElement(re.default,{style:{zIndex:4}},p.default.createElement("div",{className:(0,C.default)("scenario__title-bar",{approved:a.status===xe.SCENARIO_STATUS.APPROVED})},p.default.createElement(P.Grid,null,p.default.createElement(P.Row,{style:{height:"87px"}},p.default.createElement(P.Col,{offset:1,width:6},p.default.createElement(me.default,null,p.default.createElement(M.default,{adjusted:a.adjusted_createdAt,exactCopy:!!a.exact_copy,isAdjusted:N,approvedAt:a.approvedAt,modified:a.updated,name:a.name,optimised:a.last_optimisation_date,originScenario:a.originScenario,optimisationWarning:c.some(function(e){return e.unlock&&e.unlock.length>0}),status:a.status,studyId:n.study_id}))),p.default.createElement(P.Col,{width:5},p.default.createElement("div",{className:"scenario-alerts-wrapper"},p.default.createElement(me.default,null,p.default.createElement(ae.default,{scenario:a,globalData:q,study:n})))))))),J&&p.default.createElement(F.default,{topOffset:this.alertsPosition,type:B.type,isRegionCountry:B.isRegionCountry,overallocation:B.actual_overallocation,location:B.location,originalLpft:B.original_f_lpft}),p.default.createElement(re.default,{key:te?this.locationsFilterPosition+this.alertsHeight:this.locationsFilterPosition,style:te?{top:this.locationsFilterPosition+this.alertsHeight+"px",zIndex:4}:{top:this.locationsFilterPosition+"px",zIndex:4}},p.default.createElement("div",{className:"filters-container"},p.default.createElement(P.Grid,null,p.default.createElement(P.Row,null,p.default.createElement(P.Col,{offset:1,width:11},p.default.createElement(me.default,null,p.default.createElement(k.default,{activeFilter:f,data:S,platformRegions:r,onFilterSelect:this.handleFilterSelect}))))))),p.default.createElement(P.Grid,null,p.default.createElement(P.Row,{className:"scenario-highlights-bar"},p.default.createElement(me.default,null,p.default.createElement(H.default,{target:null!==a.source_scenario_id&&B?B.lpft:a.end_date,predicted:B.overallocatedData?B.overallocatedData.lpft:B.lpft,fpfv_lpfv:B.overallocatedData?B.overallocatedData.fpfv_lpfv:B.fpfv_lpfv,fpp_fpfv:B.fpp_fpfv,actual_date:B.actual_date,startDate:a.fp,actual_fpfv_lpfv:B.actual_fpfv_lpfv,actual_fpp_fpfv:B.actual_fpp_fpfv,actual_f_lpft:B.actual_f_lpft,adjusted_fpfv_lpfv:B.adjusted_fpfv_lpfv,adjusted_fpp_fpfv:a.exact_copy?B.adjusted_fpp_fpfv:null,adjustedLpft:(0,Ve.getPredictedDate)(q,N),showAdjusted:null!==a.source_scenario_id,showActual:!(a.status!==xe.SCENARIO_STATUS.APPROVED&&a.status!==xe.SCENARIO_STATUS.PREV_APPROVED&&null===a.source_scenario_id||"ACTIVE"!==n.state.status&&n.state.status!==Ue.default.COMPLETED),isIgnored:$,globalData:q,isOverallocated:J})),p.default.createElement(P.Col,{width:2},p.default.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"flex-end"}},p.default.createElement(D.default,{canChangeStatus:x||j,studyId:n.id,scenarioId:a.id}),p.default.createElement(G.ChartCollapseControl,{isCollapsed:T,onOptionSelect:this.handleChartCollapse})))),p.default.createElement(P.Row,null,p.default.createElement(P.Col,{className:"highlights-bar-separator",offset:1},p.default.createElement("div",null)))),!T&&p.default.createElement(ge.default,{scenario:a,isImpact:!1,showOverallocation:this.state.showOverallocationOnChart,studyStatus:n.state.status,data:B},p.default.createElement("div",{ref:function(t){e.chartContainer=t},className:"chart-container"},p.default.createElement(P.Grid,null,p.default.createElement(P.Row,null,p.default.createElement(P.Col,{offset:1,width:11},p.default.createElement("div",{className:"full-chart"},p.default.createElement(me.default,null,p.default.createElement(Y.default,{onToggleOverallocation:this.handleOverallocationChartState}))))))),p.default.createElement("div",{ref:function(t){e.miniChartContainer=t},style:{top:(te?this.miniChartPosition+this.alertsHeight:this.miniChartPosition)+"px"},className:"minimised-chart-container exclude-from-screenshot"},p.default.createElement(P.Grid,null,p.default.createElement(P.Row,null,p.default.createElement(P.Col,{offset:1,width:11},p.default.createElement("div",{className:"minimised-chart"},p.default.createElement(me.default,null,p.default.createElement(G.MinimisedEnrolmentChart,null)))))))),p.default.createElement(re.default,{key:te?this.tableFilterPosition+this.alertsHeight:this.tableFilterPosition,className:"exclude-from-screenshot",style:{top:(te?this.tableFilterPosition+this.alertsHeight:this.tableFilterPosition)+"px",backgroundColor:"white",height:"50px",zIndex:2}},p.default.createElement(P.Grid,null,p.default.createElement(P.Row,null,p.default.createElement(P.Col,{offset:1,width:11},p.default.createElement("div",{className:"tracking-scenario__table-filter"},p.default.createElement(me.default,null,p.default.createElement(fe.default,{showOverallocation:!!q.overallocatedData||!!q.adjusted_overallocatedData,onChange:this.handleTableFilterChange,actualData:b&&b.actualData,overallocated:b&&b.overallocated}))))))),p.default.createElement(P.Grid,null,p.default.createElement(P.Row,{className:"exclude-from-screenshot"},p.default.createElement(P.Col,{offset:1,width:11},p.default.createElement(me.default,null,p.default.createElement(V.default,{handleAddRegion:this.addScenarioRegion,handleAddCountry:this.addScenarioCountry,handleDeleteCountry:this.removeScenarioCountry,handleDeleteRegion:this.removeScenarioRegion,onCopy:Ne.noop,onPaste:Ne.noop,onMultiCheck:Ne.noop,onMultiEditingApply:Ne.noop,onMultiEditingCancel:Ne.noop,onMultiEditingCellChange:Ne.noop,isAdjusted:N,isTracking:!0,data:W,fullData:S,historicalEnabled:!1,tableFilter:b,tableHeaderPosition:ne,onDataChange:this.handleDataChange,batchUpdate:this.handleBatchDataChange,navigateToViewSites:u,isEditable:I,resetCountryData:this.resetCountryData,platformRegions:r,onToggleEvents:this.toggleEvents,study:n,scenario:a}))))),E&&p.default.createElement(me.default,{hidden:!0},p.default.createElement(X.SaveChangesDialog,{isShown:E,onSubmit:this.saveOverrides,actionType:g,callbackActions:[{type:xe.SIDEBAR_BUTTONS.DUPLICATE,action:this.handleDuplicateScenarioClick},{type:xe.SIDEBAR_BUTTONS.EXPORT,action:this.exportToExcel},{type:xe.SIDEBAR_BUTTONS.EDIT,action:this.handlerEditScenarioClick},{type:xe.SIDEBAR_BUTTONS.APPROVE,action:this.handlerApproveScenario},{type:xe.SIDEBAR_BUTTONS.OPTIMISE,action:Ne.noop}],onClose:function(){return e.setState({isSaveChangesDialogShown:!1})}})),m&&p.default.createElement(me.default,{hidden:!0},p.default.createElement(z.default,{study:n,scenario:a,isAdjusted:N,isApproved:a.status===xe.SCENARIO_STATUS.APPROVED,isPrevApproved:a&&a.status===xe.SCENARIO_STATUS.PREV_APPROVED,isShown:m,onClose:this.handleDuplicateScenarioDialogClose,onSubmit:this.handleDuplicateScenarioDialogSubmit,showCreateAdjustedOption:(a.status===xe.SCENARIO_STATUS.APPROVED||a.status===xe.SCENARIO_STATUS.PREV_APPROVED)&&n.state.status===Ue.default.ACTIVE})),p.default.createElement(se.default,{isShown:this.state.isRestoredDialogShown,onSubmit:this.applyRestoredData,onClose:function(){(0,Pe.removeParamItemStorage)("fpo-dirty-data",e.props.activeUser.id+"-"+e.props.studyId+"-"+e.props.scenarioId),e.setState({disabledButtons:[xe.SIDEBAR_BUTTONS.SAVE],isRestoredDialogShown:!1})}}),_&&p.default.createElement(ie.default,{isShown:_,onClose:this.handleSaveDataDialogClose,onSubmit:this.saveOverrides}),p.default.createElement(Z.default,{removeStoredData:this.props.activeUser.id+"-"+this.props.studyId+"-"+this.props.scenarioId,hasUnsaved:U}),v&&p.default.createElement(me.default,{hidden:!0},p.default.createElement(K.default,{fullData:c,willOverride:n.scenarios.some(function(e){return e.status===xe.SCENARIO_STATUS.APPROVED}),isAdjusted:N,predictedPatients:(N?q.adjusted_patient_allocation:q.patient_allocation)||0,targetPatients:a.target_num_patients||0,targetDate:a.end_date,predictedDate:(0,Ve.getPredictedDate)(q,N),isShown:v,onClose:this.closeApproveDialog,onSubmit:this.submitApproveDialog})),p.default.createElement(he.ContextHelpButton,{page:oe}),R&&h.default.createPortal(p.default.createElement(_e.default,null),document.body))}}]),t}(f.Component),We=function(){var e=this;this.getOnClickAction=function(t){var a=e.state.disabledButtons,n=e.props,r=n.countries,l=n.requirePageRefresh;return a.includes(xe.SIDEBAR_BUTTONS.SAVE)&&!r.some(function(e){return null===e.override_id&&!e.onlyActuals})||l?t:e.handleUnsavedAction},this.addHistoryStep=function(){e.dataHistory.length===xe.UNDO_HISTORY_LENGTH&&e.dataHistory.shift();var t={filter:(0,T.default)(e.state.filter),disabledButtons:(0,T.default)(e.state.disabledButtons),adjustedData:(0,T.default)(e.state.adjustedData),dirtyFullData:(0,T.default)(e.state.dirtyFullData),deleteCountries:(0,T.default)(e.state.deleteCountries)},a=e.state.dataHistoryPointer;a<xe.UNDO_HISTORY_LENGTH-1&&(a+=1),e.dataHistory.splice(a),e.dataHistory.push(t),e.setState({dataHistoryPointer:a})},this.handleUndoAction=function(){if(e.state.dataHistoryPointer>=0){var t=e.dataHistory[e.state.dataHistoryPointer-1];if(t){var a=e.state.dataHistoryPointer;a>0&&(a-=1,t.dataHistoryPointer=a),e.setState(t)}}},this.handleRedoAction=function(){var t=e.dataHistory[e.state.dataHistoryPointer+1];if(t){var a=e.state.dataHistoryPointer;a<e.dataHistory.length&&(a+=1,t.dataHistoryPointer=a),e.setState(t)}},this.handleMiniChart=function(t){t.forEach(function(t){t.boundingClientRect.top<=-150&&!e.state.fixedChart?(e.miniChartContainer.style.visibility="visible",e.chartContainer.style.visibility="hidden",e.setState({fixedChart:!0})):e.state.fixedChart&&(e.miniChartContainer.style.visibility="hidden",e.chartContainer.style.visibility="visible",e.setState({fixedChart:!1}))})},this.handleChartCollapse=function(t){e.tableHeaderPosition=t?196:398,e.tableFilterPosition=t?146:348,null===e.state.chartCollapsed?(0,Pe.addToStorage)("fpo-ui-settings",{id:"chartState",selected:t}):(0,Pe.setParamItemStorage)("fpo-ui-settings","chartState","collapsed",t),e.setState({chartCollapsed:t})},this.handleOverallocationChartState=function(t){null===e.state.showOverallocationOnChart?(0,Pe.addToStorage)("fpo-ui-settings",{id:"chartViewMode",showOverallocationOnChart:t}):(0,Pe.setParamItemStorage)("fpo-ui-settings","chartViewMode","showOverallocationOnChart",t),e.setState({showOverallocationOnChart:t})},this.handleTableFilterChange=function(t){var a=d({},e.state.tableFilter,l({},t,!e.state.tableFilter[t]));(0,Pe.getParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter")?(0,Pe.setParamItemStorage)("fpo-ui-settings","tableFilter","tableFilter",a):(0,Pe.addToStorage)("fpo-ui-settings",{id:"tableFilter",tableFilter:a}),e.setState({tableFilter:a})},this.closeApproveDialog=function(){e.setState({isApproveScenarioDialogShown:!1,showLoader:!1})}};ze.propTypes={activeUser:_.default.object.isRequired,countries:_.default.array,scenario:_.default.object,scenarioId:_.default.string.isRequired,study:_.default.object,studyId:_.default.string.isRequired,platformRegions:_.default.array.isRequired,goToStudy:_.default.func.isRequired,duplicateScenario:_.default.func.isRequired,saveOverrides:_.default.func.isRequired,createAdjustmentScenario:_.default.func.isRequired,goToScenario:_.default.func.isRequired,goToScenarioEdit:_.default.func.isRequired,approveScenario:_.default.func.isRequired,addScenarioNote:_.default.func.isRequired,notes:_.default.number,navigateToEvents:_.default.func.isRequired,navigateToViewSites:_.default.func.isRequired,removeScenarioCountry:_.default.func.isRequired,getParametersByScenarioAndCountry:_.default.func.isRequired,requirePageRefresh:_.default.bool,valuesToSave:_.default.object,deleteCountries:_.default.array,actuals:_.default.object},ze.defaultProps={countries:[],scenario:void 0,study:void 0,notes:0,requirePageRefresh:!1,valuesToSave:null,deleteCountries:null,actuals:{}};var Ke={removeScenarioCountry:ye.removeScenarioCountry,getPlatformRegions:be.getPlatformRegions,duplicateScenario:ye.duplicateScenario,createAdjustmentScenario:ye.createAdjustmentScenario,getPlainStudy:Se.getPlainStudy,approveScenario:ye.approveScenario,saveOverrides:ye.saveOverrides,removeCountryFromCountriesList:ye.removeCountryFromCountriesList,addPlayGroundCountry:ye.addCountryToTheCountryList,addScenarioNote:Ce.addScenarioNote,getScenarioNotes:Ce.getScenarioNotes,getParametersByScenarioAndCountry:ye.getParametersByScenarioAndCountry,push:g.push,goToScenario:function(e,t){return(0,g.push)("/studies/"+e+"/scenarios/"+t)},goToScenarioEdit:function(e,t){return(0,g.push)("/studies/"+e+"/scenarios/"+t+"/edit")},navigateToEvents:function(e,t){return(0,g.push)("/studies/"+e+"/scenarios/"+t+"/events")},navigateToViewSites:function(e,t,a){return(0,g.push)("/studies/"+e+"/scenarios/"+t+"/sites/"+a)}};t.default=(0,E.connect)(u,Ke)(ze)},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t){var a=void 0;try{a=0===t.length?[].concat(n(e)):e.reduce(function(e,t,a){var n=e;return n[a]?n[a]=[n[a][0],n[a][1]+t[1]]:n.push([t[0],n[a-1][1]+t[1]]),n},t)}catch(e){return console.error(e),a}return a}function l(e,t,a,r){var l=e.slice(0);t&&(l=l.map(function(e,t){var l=e.slice(0),i=r[t],o=i.diff(a,"d");if(o<=0||isNaN(o)||0===l.length)return l;for(var s=new Array(o),u=0;u<s.length;u+=1)s[u]=[u+1,0];for(var d=0;d<l.length;d+=1){var c=l[d][0]+o,f=l[d][1];l[d]=[c,f]}return[].concat(s,n(l))})),l.sort(function(e,t){return e.length>t.length?-1:e.length<t.length?1:0});var i=l[0].length;return l.filter(function(e){return e.length>0}).map(function(e){if(e.length<i){var t=e.slice();do{var a=e[e.length-1]||0;t.push(a)}while(t.length<i);return t}return e})}function i(e,t){return!(null===e[t+"curves"]||void 0===e[t+"curves"]||e[t+"curves"].length<3||0===e[t+"curves"][0].length||0===e[t+"curves"][1].length||0===e[t+"curves"][2].length)}function o(e){var t=e.reduce(function(e,t){var a=e,n=t[t.length-1];return n[0]>e&&(a=n[0]),a},0),a=e.map(function(e){for(var a=e.slice(),n=0;a[a.length-1][0]<t&&!(n>=1e4);){var r=e[e.length-1][1],l=a[a.length-1][0]+1;a.push([l,r]),n+=1}return a.reduce(function(e,t){return e[t[0]]?e[t[0]].length<=2&&e[t[0]].push(t[1]):e[t[0]]=[t[1]],e},{})}).reduce(function(e,t){return Object.keys(t).forEach(function(a){var r=t[a],l=e[a];if(l){var i=[l,r];i.sort(function(e,t){return e.length>t.length?-1:e.length<t.length?1:0});for(var o=i[0].length,s=[],u=0;u<o;u+=1){var d=void 0!==i[0][u]?i[0][u]:0,c=void 0!==i[1][u]?i[1][u]:i[1][0];s.push(d+c)}e[a]=s}else e[a]=[].concat(n(r))}),e},{}),r=Object.keys(a).reduce(function(e,t){var r=a[t].sort(function(e,t){return e<t?-1:e>t?1:0}).map(function(e){return[+t,e]});return[].concat(n(e),n(r))},[]),l=e.reduce(function(e,t){var a=t[t.length-1],n=a[0];return n>e?n:e},0),i=(0,d.default)(r,function(e){return e[0]===l});return i>-1?r.slice(0,i+1):r}function s(e,t,a,s,u){var d=e,f=[],p=[],m=[],h=[],v=[],_=[];if(t.forEach(function(e){if(i(e,"")){a&&_.push(e.fp);var t=e.curves[0];f.push(t);var n=e.curves[1];p.push(n);var r=e.curves[2];if(m.push(r),"actual"===e.valuesType&&e.curves[3]&&e.curves[4]){var l=e.curves[3];h.push(l);var o=e.curves[4];v.push(o)}}}),0===f.length||0===p.length||0===m.length)return d;var E=l(f,a,s,_);if("actual"===e.valuesType)E.forEach(function(t){d.curves[0]=r(t,e.curves[0])});else{var g=o(E);d.curves[0]=[].concat(n(g))}return l(p,a,s,_).forEach(function(t){"adjusted"===e.valuesType||u?d.curves[1]=r(t,e.curves[1]):d.curves[1]=(0,c.updateCurveWithZeroToOne)(r(t,e.curves[1]),e.fsiv,e.fpfv,s)}),l(m,a,s,_).forEach(function(t){"adjusted"===e.valuesType||u?d.curves[2]=r(t,e.curves[2]):d.curves[2]=(0,c.updateCurveWithZeroToOne)(r(t,e.curves[2]),e.fpfv,e.fpft,s)}),0===h.length||0===v.length?d:("actual"===e.valuesType&&(l(h).forEach(function(t){t.length>0&&(d.curves[3]=r(t,e.curves[3]))}),l(v).forEach(function(t){t.length>0&&(d.curves[4]=r(t,e.curves[4]))})),d)}Object.defineProperty(t,"__esModule",{value:!0}),t.aggregateCurveData=r,t.prepareCurvesForAggregation=l,t.aggregateCurvesData=s;var u=a(1935),d=function(e){return e&&e.__esModule?e:{default:e}}(u),c=a(116)},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=function(e){return e.reduce(function(e,t){var a=t.curves,n=t.patient_allocation,i=t.patient_allocation_min,o=t.patient_allocation_max,s=t.num_sites,u=t.fsiv,d=t.sas,c=t["25_si"],f=t["50_si"],p=t["90_si"],m=t.fpfv,h=t.fpfv_lpfv,v=t.fpfv_fpft,_=t.randomisation_rate,E=t.screening_failure,g=t.sr,y=t.lpft,S=t.fpft,b=t.fpp_fpfv,C=t.invalidFields,O=t.generatedFields,T=t.actual_curves,R=t.actual_patient_allocation,w=t.actual_num_sites,A=t.actual_fsiv,I=t.actual_sas,N=t.actual_25_si,D=t.actual_50_si,P=t.actual_90_si,L=t.actual_fpfv,M=t.actual_fpfv_lpfv,x=t.actual_randomisation_rate,k=t.actual_screening_failure,j=t.actual_screening_rate,F=t.actual_f_lpft,U=t.actual_date,V=t.actual_fpft,B=t.actual_fpp_fpfv,H=t.actual_lpfv,G=t.actual_overallocation,Y=t.actual_randomized,q=t.actual_screened,z=t.actual_siv,W=t.q25_actual_randomized,K=t.q75_actual_randomized,X=t.adjusted_curves,Z=t.adjusted_patient_allocation,J=t.adjusted_patient_allocation_min,Q=t.adjusted_patient_allocation_max,$=t.adjusted_num_sites,ee=t.adjusted_fsiv,te=t.adjusted_sas,ae=t.adjusted_25_si,ne=t.adjusted_50_si,re=t.adjusted_90_si,le=t.adjusted_fpfv,ie=t.adjusted_fpfv_lpfv,oe=t.adjusted_fpfv_fpft,se=t.adjusted_fpp_fpfv,ue=t.adjusted_fpft,de=t.adjusted_unlock,ce=t.adjusted_randomisation_rate,fe=t.adjusted_screening_failure,pe=t.adjusted_sr,me=t.adjusted_lpft,he=(t.adjusted_invalids,t.adjusted_invalidFields),ve=t.adjusted_overrideList,_e=t.adjusted_errorMessages,Ee=r(t,["curves","patient_allocation","patient_allocation_min","patient_allocation_max","num_sites","fsiv","sas","25_si","50_si","90_si","fpfv","fpfv_lpfv","fpfv_fpft","randomisation_rate","screening_failure","sr","lpft","fpft","fpp_fpfv","invalidFields","generatedFields","actual_curves","actual_patient_allocation","actual_num_sites","actual_fsiv","actual_sas","actual_25_si","actual_50_si","actual_90_si","actual_fpfv","actual_fpfv_lpfv","actual_randomisation_rate","actual_screening_failure","actual_screening_rate","actual_f_lpft","actual_date","actual_fpft","actual_fpp_fpfv","actual_lpfv","actual_overallocation","actual_randomized","actual_screened","actual_siv","q25_actual_randomized","q75_actual_randomized","adjusted_curves","adjusted_patient_allocation","adjusted_patient_allocation_min","adjusted_patient_allocation_max","adjusted_num_sites","adjusted_fsiv","adjusted_sas","adjusted_25_si","adjusted_50_si","adjusted_90_si","adjusted_fpfv","adjusted_fpfv_lpfv","adjusted_fpfv_fpft","adjusted_fpp_fpfv","adjusted_fpft","adjusted_unlock","adjusted_randomisation_rate","adjusted_screening_failure","adjusted_sr","adjusted_lpft","adjusted_invalids","adjusted_invalidFields","adjusted_overrideList","adjusted_errorMessages"]),ge={ignoreGenericData:Ee.ignoreGenericData,fp:Ee.fp,constraint:Ee.constraint,country_id:Ee.country_id,country_name:Ee.country_name,events:Ee.events,adjusted_events:Ee.adjusted_events,id:Ee.id,location:Ee.location,lockedFields:Ee.lockedFields,name:Ee.name,overrideList:Ee.overrideList,override_id:Ee.override_id,platform_country_id:Ee.platform_country_id,region:Ee.region,region_id:Ee.region_id,region_name:Ee.region_name,scenario_id:Ee.scenario_id,regionHasSingleCountry:Ee.regionHasSingleCountry,unlock:Ee.unlock,actualTimeseriesSnapshot:Ee.actualTimeseriesSnapshot,errorMessages:Ee.errorMessages,hasActuals:Ee.hasActuals,canBeIgnored:Ee.canBeIgnored,onlyActuals:Ee.onlyActuals,ignoreAdjustedData:Ee.ignoreAdjustedData,country_sites_approval_status:Ee.country_sites_approval_status};return e.genericDataRows.push(l({},ge,{valuesType:"generic",curves:a,patient_allocation:n,patient_allocation_min:i,patient_allocation_max:o,num_sites:s,fsiv:u,sas:d,"25_si":c,"50_si":f,"90_si":p,fpfv:m,fpfv_lpfv:h,fpfv_fpft:v,randomisation_rate:_,screening_failure:E,sr:g,lpft:y,fpft:S,fpp_fpfv:b,invalidFields:C,uncertainty:Ee.uncertainty,historical_reference_data_by_indication:Ee.historical_reference_data_by_indication,historical_reference_data_by_studies:Ee.historical_reference_data_by_studies,generatedFields:O,ignore_aggregation:Ee.ignore_aggregation})),e.actualDataRows.push(l({},ge,{valuesType:"actual",curves:T,patient_allocation:R,num_sites:w,fsiv:A,sas:I,"25_si":N,"50_si":D,"90_si":P,fpfv:L,fpfv_lpfv:M,randomisation_rate:x,screening_failure:k,sr:j||Ee.actual_sr,lpft:F,actual_date:U,fpft:V,fpp_fpfv:B,lpfv:H,overallocation:G,actual_siv:z,actual_randomized:Y,actual_screened:q,q75_actual_randomized:K,q25_actual_randomized:W,original_f_lpft:Ee.original_f_lpft,planned_num_sites:s})),e.adjustedDataRows.push(l({},ge,{valuesType:"adjusted",curves:X,patient_allocation:Z,patient_allocation_min:J,patient_allocation_max:Q,num_sites:$,fsiv:ee,sas:te,"25_si":ae,"50_si":ne,"90_si":re,fpfv:le,fpfv_lpfv:ie,randomisation_rate:ce,screening_failure:fe,sr:pe,lpft:me,fpfv_fpft:oe,fpp_fpfv:se,fpft:ue,invalidFields:he,ignore_aggregation:Ee.ignore_aggregation,overrideList:ve,unlock:de,errorMessages:_e})),e},{genericDataRows:[],actualDataRows:[],adjustedDataRows:[]})},o=function(e,t,a){var n={valuesType:a,location:e,type:t,patient_allocation:0,num_sites:0,fsiv:null,sas:0,"25_si":null,"50_si":null,"90_si":null,fpfv_fpft:null,randomisation_rate:0,screening_failure:0,overrideList:[],sr:0,amount_countries:0,fpfv:null,fpfv_lpfv:0,lpft:null,fpft:null,fpp_fpfv:0,unlock:[],generatedFields:[],errorMessages:{}},r={};return"actual"===a&&(r={actual_date:null,lpfv:null,overallocation:0,planned_num_sites:0}),l({},n,r)},s=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.valuesType+"_",r=(e={},n(e,a+"curves",t.curves),n(e,a+"lpft",t.lpft),n(e,a+"fpfv_lpfv",t.fpfv_lpfv),n(e,a+"fpp_fpfv",t.fpp_fpfv),n(e,a+"fpfv",t.fpfv),n(e,a+"fpft",t.fpft),n(e,a+"fsiv",t.fsiv),n(e,a+"fpfv_fpft",t.fpfv_fpft),n(e,a+"25_si",t["25_si"]),n(e,a+"50_si",t["50_si"]),n(e,a+"90_si",t["90_si"]),n(e,a+"num_sites",t.num_sites),n(e,a+"patient_allocation",t.patient_allocation),n(e,a+"patient_allocation_min",t.patient_allocation_min),n(e,a+"patient_allocation_max",t.patient_allocation_max),n(e,a+"sas",t.sas),n(e,a+"screening_failure",t.screening_failure),n(e,a+"sr",t.sr),n(e,a+"randomisation_rate",t.randomisation_rate),n(e,a+"invalids",t.invalidFields),n(e,a+"errorMessages",t.errorMessages),n(e,a+"overrideList",t.overrideList),n(e,a+"unlock",t.unlock),e);return"actual"===t.valuesType&&(r=l({},r,{actual_date:t.actual_date,actual_f_lpft:t.lpft,actual_overallocation:t.overallocation,actual_siv:t.actual_siv,actual_screened:t.actual_screened,actual_randomized:t.actual_randomized,q75_actual_randomized:t.q75_actual_randomized,q25_actual_randomized:t.q25_actual_randomized,original_f_lpft:t.original_f_lpft})),r};t.rowDataTemplate=o,t.getPrefixedData=s,t.default=i},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t){var a=["sas","fpfv_lpfv","sr","screening_failure","randomisation_rate","25_si","50_si","90_si"],r=[].concat(n(e.generatedFields),a),l=["fsiv","fpfv","lpft"];return t.forEach(function(t){t.generatedFields&&(t.generatedFields.includes("num_sites")&&r.push("num_sites"),l.forEach(function(a){t.generatedFields.includes(a)&&e[a]&&t[a]&&e[a].isSame(t[a])&&r.push(a)}))}),r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,a){"use strict";function n(e,t){var a=t.cohorts&&t.cohorts.length>0,n=a?{"_Global Rollup":t.approvedData.aggregatedGlobalData}:t.approvedData.fullData;return e.map(function(e){var t=r({},e),a=(void 0!==t.country_name?t.region_name:"")+"_"+t.location,i=n[a];return i&&l.APPROVED_COUNTRY_DATA_FIELDS.filter(function(e){return"override_id"!==e}).forEach(function(e){t[e]=i[e]}),t.sr=t.randomisation_rate/(1-t.screening_failure),t})}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=n;var l=a(14)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a,n){(t||0===t)&&(e.GR[a]+=t,n&&(e[n][a]+=t))}function l(e,t,a,n){t&&(e.GR[a]=e.GR[a]?Math.min(t,e.GR[a]):t,n&&(e[n][a]=e[n][a]?Math.min(t,e[n][a]):t))}function i(e,t,a,n){if(t){var r=(0,d.default)(e.GR,a);if((0,f.default)(e.GR,a,r?m.default.min(t,r):t),n){var l=(0,d.default)(e,n+"."+a);(0,f.default)(e,n+"."+a,l?m.default.min(t,l):t)}}}function o(e,t,a,n){if(t){var r=(0,d.default)(e.GR,a);if((0,f.default)(e.GR,a,r?m.default.max(t,r):t),n){var l=(0,d.default)(e,n+"."+a);(0,f.default)(e,n+"."+a,l?m.default.max(t,l):t)}}}function s(e,t,a,n,r){return(r?a.filter(function(e){return!e.ignoreGenericData}):a).filter(function(e){return e[t]}).reduce(function(a,r){var l=r[t]/n,i=r[e];return void 0===i||null===i?(i=0,a):a+ +i*l},null)}Object.defineProperty(t,"__esModule",{value:!0}),t.aggregateNumValue=r,t.aggregateNumValueMin=l,t.aggregateDateValueMin=i,t.aggregateDateValueMax=o,t.getWeightedBySitesValue=s;var u=a(11),d=n(u),c=a(1939),f=n(c),p=a(10),m=n(p)},function(e,t,a){"use strict";function n(e){return function(t,a,n){var r=e.getState();r.auth.user&&r.auth.user.id?n():e.dispatch((0,l.default)())}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=a(492),l=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,a){"use strict";function n(e,t){var a=null,n=null,r=null,o=null,s=e.actual_fpfv_lpfv;if(e.actual_siv&&e.actual_siv.length>0&&e.actual_screened&&e.actual_screened.length>0&&e.actual_randomized&&e.actual_randomized.length>0){var u=e.actual_screened.find(function(e){return e[1]>0&&"ACTUALS"===e[2]});u&&(r=u[0]?(0,i.getMomentDate)(u[0]):null,a=s&&r?r.clone().add(s,"d"):null,o=r?Math.ceil(r.diff(t,"day",!0)):null);var d=(0,l.default)(e.actual_randomized,function(e){return 0===e[1]});n=d?(0,i.getMomentDate)(d[0]):null}var c=e.actual_fsiv,f=e.actual_sr||e.actual_screening_rate;return{actual_siv:e.actual_siv,actual_screened:e.actual_screened,actual_randomized:e.actual_randomized,actual_curves:e.actual_curves?e.actual_curves:[e.actual_siv||[],e.actual_screened||[],e.actual_randomized||[],e.q75_actual_randomized||[],e.q25_actual_randomized||[]],actual_fsiv:c,actual_fpfv:r,actual_fpft:n,actual_lpfv:a,actual_fpp_fpfv:o,actual_fpfv_lpfv:s,actual_sr:f}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(699),l=function(e){return e&&e.__esModule?e:{default:e}}(r),i=a(7);t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(7),l=function(e,t,a,l){var i=t.aggregatedHistoricalDataByIndication,o=t.aggregatedHistoricalDataByStudy,s=t.approvedData,u=t.exact_copy,d=t.hasAdjustedOrigin,c=t.source_scenario_id,f=t.state,p=n({},(0,r.prepareScenarioObject)(e),{aggregatedHistoricalDataByIndication:i,aggregatedHistoricalDataByStudy:o,exact_copy:u,hasAdjustedOrigin:d,source_scenario_id:c,state:f});if(p.countries=a?p.countries:(0,r.prepareScenarioCountriesObject)(p,!1),s&&s.cohorts){var m=s.cohorts.find(function(e){return e[l]===p[l]});m&&m.fullData&&(p.approvedData={fullData:m.fullData,fp:m.fp})}return n({},p,{fullData:(0,r.getScenarioCalculatedData)(p.countries,p,!0)})};t.default=l},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t,a,n,i,o,f,m,v,E,S,b,C,O){var T=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[],R=(arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]),w=arguments[20],A=arguments[21],I=C?C/(365/12):C,N=(0,u.validateCurvesCalcArguments)(e,t,n,i,o,f,m,v,E,S,b,I,a,null,w,A),D=N.invalidFields,P=N.skipCalculation,L=N.errorMessages;if(P)return(0,d.getErrorCalculationResultObject)({invalidFields:D,fpfv:i,fsiv:n,fpfvFpft:a,si25:o,si50:f,si90:m,nSites:v,patientAllocation:E,randomisationRate:C,SAS:S,SF:b,prefix:O,events:T,errorMessages:L});try{var M,x,k=T.reduce(function(e,t){switch(t.event_type){case y.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE:e.type3Events.push(t);break;case y.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE:e.type4Events.push(t);break;case y.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE:e.type1Events.push(t);break;case y.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS:e.type2Events.push(t)}return e},{type3Events:[],type4Events:[],type1Events:[],type2Events:[]}),j=k.type3Events,F=k.type4Events,U=k.type1Events,V=k.type2Events,B=(0,d.prepareCountryEventsForCalculation)(j,e),H=(0,d.prepareCountryEventsForCalculation)(F,e),G=(0,d.prepareCountryEventsForCalculation)(U,e),Y=V,q=a,z=n.diff(e,"d"),W=i.diff(n,"d"),K=z+W,X=z+W+q,Z=+E,J=i.clone().add(a,"d"),Q=Math.ceil(s.default.duration(t.diff(e)).asDays()),$=Q>d.MAX_CALCULATION_PERIOD?Q:d.MAX_CALCULATION_PERIOD,ee=(0,p.default)({startDate:e,FPP_FSIV:z,fsiv:n,si25:o,si50:f,si90:m,nSites:v}),te=ee.sivCurve,ae=void 0===te?[]:te,ne=ee.siteInitiated,re=void 0===ne?[]:ne,le=z+W+q+1+(re.length-1),ie=new Array(le>$?le:$+W).fill(0);(M=ie).splice.apply(M,[W,re.length].concat(l(re))),ie.fill(re[re.length-1],W+re.length),ie=!R&&(G.length>0||Y.length>0||B.length>0||H.length>0)?(0,c.applySiteTerminationWithEvents)(ie,H,B,Y,G,Z/(v*S)*1.1,S,I,b,z,W,q,$,O,e,t,i,K):(0,c.applySiteTerminationUpdate)(ie,B,G,Z,v,S,I);var oe=(0,h.default)(ie,[],B,G,b,I,R);0===oe.length&&(oe=[0]);var se=(0,_.default)({countryScreeningRate:oe,nPatients:Z,SF:b,fpfvInd:K});if(se.length===d.MAX_CURVE_LENGTH)return(0,d.getErrorCalculationResultObject)({invalidFields:["patient_allocation","num_sites","randomisation_rate","screening_failure"],fpfv:i,fsiv:n,fpfvFpft:a,si25:o,si50:f,si90:m,nSites:v,patientAllocation:E,randomisationRate:C,SAS:S,SF:b,prefix:O,events:T,errorMessages:{patient_allocation:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,num_sites:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,randomisation_rate:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,screening_failure:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE}});oe=(0,h.default)(ie,[],B,[],b,I,R);var ue=(0,g.default)({FPP_FSIV:z,FSIV_FPFV:W,FPFV_FPFT:q,countryScreeningRate:oe,totalDuration:$,SF:b,nPatients:Z,preparedType1Events:G,preparedType2Events:Y,screeningCurve:se,prefix:O,startDate:e,endDate:t,preparedType4Events:H,protectedScenario:R,fpft:J,fpftInd:X});if(ue.length===d.MAX_CURVE_LENGTH)return(0,d.getErrorCalculationResultObject)({invalidFields:["patient_allocation","num_sites","randomisation_rate","screening_failure"],fpfv:i,fsiv:n,fpfvFpft:a,si25:o,si50:f,si90:m,nSites:v,patientAllocation:E,randomisationRate:C,SAS:S,SF:b,prefix:O,events:T,errorMessages:{patient_allocation:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,num_sites:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,randomisation_rate:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,screening_failure:d.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE}});var de=ue.length;se=se.length>de?se.slice(0,de):se;var ce=ue.map(function(e){return e[1]}),fe=ce.indexOf(Math.max.apply(Math,l(ce))),pe=fe>-1?e.clone().add(fe+1,"d"):null,me=se.map(function(e){return e[1]}),he=me.indexOf(Math.max.apply(Math,l(me))),ve=he-K+1;se=se.slice(0,he+1),he>fe&&(se=se.map(function(e,t){var a=e.slice();return t>=fe-q&&(a[1]=me[fe-q]),a}),me=se.map(function(e){return e[1]}),he=me.indexOf(Math.max.apply(Math,l(me))),ve=he-K+1);var _e=he>-1?e.clone().add(he+1,"d"):null;ae.length>fe&&(ae=ae.slice(0,fe));var Ee=ae.find(function(e){return e[0]===z});return Ee&&(Ee[1]=1),se=(0,d.updateCurveWithZeroToOne)(se,n,i,e),ue=(0,d.updateCurveWithZeroToOne)(ue,i,J,e),x={},r(x,O+"curves",[ae,se,ue]),r(x,O+"lpft",pe),r(x,O+"lpfv",_e),r(x,O+"fpfv_lpfv",ve<0?null:ve),r(x,O+"fpp_fpfv",K),r(x,O+"fpfv",i),r(x,O+"fpft",J),r(x,O+"fsiv",n),r(x,O+"fpfv_fpft",q),r(x,O+"25_si",o),r(x,O+"50_si",f),r(x,O+"90_si",m),r(x,O+"num_sites",v),r(x,O+"patient_allocation",Z),r(x,O+"sas",S),r(x,O+"randomisation_rate",C),r(x,O+"screening_failure",b),r(x,O+"sr",C/(1-b)),r(x,"prefix",O),r(x,O+"events",T),r(x,"errorMessages",L),x}catch(e){return(0,d.getErrorCalculationResultObject)({invalidFields:D,fpfv:i,fsiv:n,fpfvFpft:a,si25:o,si50:f,si90:m,nSites:v,patientAllocation:E,randomisationRate:C,SAS:S,SF:b,prefix:O,events:T,errorMessages:L})}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(10),s=n(o),u=a(272),d=a(116),c=a(558),f=a(557),p=n(f),m=a(364),h=n(m),v=a(365),_=n(v),E=a(363),g=n(E),y=a(41);t.default=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t,a,n,i,s,p,_,E,g,y,S,b,C){var O=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[],T=arguments[15],R=arguments[16],w=arguments[17],A=arguments[18],I=arguments[19],N=arguments[20],D=arguments[21],P=b?b/(365/12):b,L=(0,d.validateCurvesCalcArguments)(e,t,n,i,s,p,_,E,g,y,S,P,a,null,N,D),M=L.invalidFields,x=L.skipCalculation,k=L.errorMessages;if(R&&T||M.push("latest_actual"),x){var j;return j={error:!0},l(j,C+"invalidFields",M),l(j,C+"curves",[[],[],[]]),l(j,C+"lpft",null),l(j,C+"fpfv_lpfv",null),l(j,C+"fpp_fpfv",null),l(j,C+"fpfv",i),l(j,C+"fpft",null),l(j,C+"fsiv",n),l(j,C+"fpfv_fpft",a),l(j,C+"25_si",s),l(j,C+"50_si",p),l(j,C+"90_si",_),l(j,C+"num_sites",E),l(j,C+"patient_allocation",g),l(j,C+"randomisation_rate",b),l(j,C+"sas",y),l(j,C+"screening_failure",S),l(j,C+"sr",b/(1-S)),l(j,"prefix",C),l(j,C+"events",O),l(j,C+"errorMessages",k),j}try{var F,U,V,B=O.reduce(function(e,t){switch(t.event_type){case v.SCENARIO_EVENT_TYPES.SCREENING_RATE_BY_DATE:e.type3Events.push(t);break;case v.SCENARIO_EVENT_TYPES.SCREENING_FAILURE_BY_DATE:e.type4Events.push(t);break;case v.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_DATE:e.type1Events.push(t);break;case v.SCENARIO_EVENT_TYPES.SCREENING_RANDOMIZATION_PAUSE_BY_PATIENTS:e.type2Events.push(t)}return e},{type3Events:[],type4Events:[],type1Events:[],type2Events:[]}),H=B.type3Events,G=B.type4Events,Y=B.type1Events,q=B.type2Events,z=(0,c.prepareCountryEventsForCalculation)(H,e),W=(0,c.prepareCountryEventsForCalculation)(G,e),K=(0,c.prepareCountryEventsForCalculation)(Y,e),X=q,Z=i.diff(n,"d"),J=n.diff(e,"d"),Q=i.diff(n,"d"),$=J+Q,ee=J+Q+a,te=i.clone().add(a,"d"),ae=T.diff(e,"d"),ne=+g,re=+E,le=[],ie=[],oe=[],se=R,ue=25*re/100,de=50*re/100,ce=90*re/100,fe=0,pe=0,me=0,he=0;se>0&&se<=ue?(fe=ue-se,pe=.25*re,me=.4*re,he=.1*re):se>ue&&se<=de?(fe=0,pe=de-se,me=.4*re,he=.1*re):se>de&&se<=ce?(fe=0,pe=0,me=ce-se,he=.1*re):(fe=.25*re,pe=.25*re,me=.4*re,he=.1*re);var ve=Math.ceil(u.default.duration(t.diff(e)).asDays()),_e=s.diff(e,"d")-J,Ee=p.diff(e,"d")-J,ge=_.diff(e,"d")-J,ye=ge+(ge-Ee)/4*2;0===ye&&(ye=1);var Se=a,be=Array(J+Math.ceil(ye)).fill(0);be.fill(fe/(0===_e?1:_e),J,J+(0===_e?1:_e));var Ce=Ee-_e==0?1:Ee-_e;be.fill(pe/Ce,J+_e,J+Ee);var Oe=ge-Ee==0?1:ge-Ee;be.fill(me/Oe,J+Ee,J+ge);var Te=Math.ceil(ye-ge==0?1:ye-ge);be.fill(he/Te,J+ge,J+Math.ceil(ye));var Re=be.reduce(function(e,t,a){var n=t;return 0!==a&&(n+=e[e.length-1]),e.push(n),e},[]),we=[],Ae=Re.reduce(function(e,t,a){var n=Math.ceil(t.toFixed(6));return a+1===ae?(e[0].push([a+1,+se]),e[1].push(+se)):a+1>ae?n>0?(n+=+se,n=n>re?re:n,e[0].push([a+1,+n]),e[1].push(+n)):(e[0].push([a+1,+se]),e[1].push(+se)):e[1].push(0),e},[[],[]]),Ie=o(Ae,2);le=Ie[0],we=Ie[1],0===le.length&&(le.push([ae,re]),we[we.length-1]=re);var Ne=Array(ve+Z).fill(0);(F=Ne).splice.apply(F,[Z,we.length].concat(r(we))),Ne.fill(we[we.length-1],Z+we.length),Ne=!I&&(K.length>0||X.length>0||z.length>0||W.length>0)?(0,f.applySiteTerminationWithEvents)(Ne,W,z,X,K,ne/(re*y)*1.1,y,P,S,J,Q,Se,ve,C,e,t,$):(0,f.applySiteTerminationUpdate)(Ne,z,K,ne,re,y,P);var De=(0,m.default)(Ne,[],z,K,S,P,I);0===De.length&&(De=[0]);var Pe=Math.max.apply(Math,r(De));if(Pe&&0!==Pe){var Le=void 0,Me=0,xe=ne/(1-S);do{Le=void 0!==De[Me]?De[Me]:Pe,0!==Me&&ie[ie.length-1]&&($===Me+1&&(Le+=1),Le+=ie[ie.length-1][1]),Me+1>=ae&&0===ie.length?ie.push([Me+1,w]):Me+1>ae&&ie.push([Me+1,Le>xe?xe:Le]),Me+=1}while(Le<=xe&&ie.length<c.MAX_CURVE_LENGTH)}if(0===ie.length&&ie.push([1,0]),ie.length===c.MAX_CURVE_LENGTH)return(0,c.getErrorCalculationResultObject)({invalidFields:["patient_allocation","num_sites","randomisation_rate","screening_failure"],fpfv:i,fsiv:n,fpfvFpft:a,si25:s,si50:p,si90:_,nSites:re,nPatients:ne,randomisationRate:b,SAS:y,SF:S,prefix:C,events:O,errorMessages:{patient_allocation:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,num_sites:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,randomisation_rate:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,screening_failure:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE},actualTimeseriesSnapshot:{actual_date:T,sites_initiated:R,patients_screened:w,patients_randomized:A}});De=(0,m.default)(Ne,[],z,[],S,P,I);var ke=J+Z+Se+1+De.indexOf(Math.max.apply(Math,r(De))),je=Array(ke>ve?ke:ve).fill(0);(U=je).splice.apply(U,[Se,De.length].concat(r(De))),je.fill(Math.max.apply(Math,r(De)),Se+De.length),je=(0,h.getEnrolmentRateWithType4EventsApplied)(je,W,S),0===je.length&&(je=[0]),je=je.map(function(e,t){var a=e;return I?K.forEach(function(e){t>=e.startWeek&&t<e.endWeek&&(a=0)}):K.forEach(function(e){t>e.startWeek&&t-Se<=e.endWeek&&(a=0)}),a});var Fe=Math.max.apply(Math,r(je));if(Fe&&0!==Fe){var Ue=0,Ve=0;do{Ue=void 0!==je[Ve]?je[Ve]:Fe,0!==Ve&&oe[oe.length-1]&&(Ve+1===ee&&(Ue+=1),Ue+=oe[oe.length-1][1]),Ve+1>=ae&&0===oe.length?oe.push([Ve+1,A]):Ve+1>ae&&oe.push([Ve+1,Ue>ne?ne:Ue]),Ve+=1}while(Ue<=ne&&oe.length<c.MAX_CURVE_LENGTH);if(oe.length===c.MAX_CURVE_LENGTH)return(0,c.getErrorCalculationResultObject)({invalidFields:["patient_allocation","num_sites","randomisation_rate","screening_failure"],fpfv:i,fsiv:n,fpfvFpft:a,si25:s,si50:p,si90:_,nSites:re,nPatients:ne,randomisationRate:b,SAS:y,SF:S,prefix:C,events:O,errorMessages:{patient_allocation:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,num_sites:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,randomisation_rate:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,screening_failure:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE},actualTimeseriesSnapshot:{actual_date:T,sites_initiated:R,patients_screened:w,patients_randomized:A}});var Be=X.reduce(function(e,t){var a=oe.findIndex(function(e){return e[1]>=t.patients});if(-1!==a){var n=a+t.start_after,r=t.duration;return e[n]?e[n]=r>e[n]?r:e[n]:e[n]=r,e}},{});X.sort(function(e,t){var a=oe.findIndex(function(t){return t[1]>=e.patients}),n=oe.findIndex(function(e){return e[1]>=t.patients});if(-1!==a&&-1!==n){var r=a+e.start_after,l=n+t.start_after;return r<l?-1:r>l?1:0}return 0}),X.forEach(function(e,t){var a=oe.findIndex(function(t){return t[1]>=e.patients});if(-1!==a){var n=a+e.start_after,r=e.duration,l=ie[n],i=void 0;if(l){i=l[2];var o=Be[n];void 0!==o&&(r=o)}if(l&&!i){for(var s=[],u=0;u<r;u+=1)s.push([l[0]+u,l[1],"pause"]);ie.splice.apply(ie,[n,0].concat(s)),ie.forEach(function(e,t){t>=n+r&&(e[0]+=r)})}var d=oe[n];if(d&&!i){for(var c=[],f=0;f<r;f+=1)c.push([d[0]+f,d[1],"pause"]);oe.splice.apply(oe,[n,0].concat(c)),oe.forEach(function(e,t){t>=n+r&&(e[0]+=r)})}}})}le=(0,c.unshiftElementsToCurve)(le),ie=(0,c.unshiftElementsToCurve)(ie),oe=(0,c.unshiftElementsToCurve)(oe);var He=oe.length;ie=ie.length>He?ie.slice(0,He):ie;var Ge=oe.map(function(e){return e[1]}),Ye=Ge.indexOf(Math.max.apply(Math,r(Ge))),qe=oe[Ye]?oe[Ye][0]:null,ze=Ye>-1&&null!==qe?e.clone().add(qe,"d"):null,We=ie.map(function(e){return e[1]}),Ke=We.indexOf(Math.max.apply(Math,r(We))),Xe=ie[Ke]&&ie[Ke][0],Ze=i.diff(e,"d"),Je=Xe-Ze;Ke>Ye&&(ie=ie.map(function(e,t){var a=e.slice();return t>=Ye&&(a[1]=We[Ye]),a}),We=ie.map(function(e){return e[1]}),Ke=We.indexOf(Math.max.apply(Math,r(We))),Xe=ie[Ke][0],Ze=i.diff(e,"d"),Je=Xe-Ze);var Qe=Ke>-1?e.clone().add(Ke+1,"d"):null;return V={},l(V,C+"curves",[le,ie,oe]),l(V,C+"lpft",ze),l(V,C+"lpfv",Qe),l(V,C+"fpfv_lpfv",Je<0?null:Je),l(V,C+"fpp_fpfv",$),l(V,C+"fpfv",i),l(V,C+"fpft",te),l(V,C+"fsiv",n),l(V,C+"fpfv_fpft",Se),l(V,C+"25_si",s),l(V,C+"50_si",p),l(V,C+"90_si",_),l(V,C+"num_sites",re),l(V,C+"patient_allocation",ne),l(V,C+"randomisation_rate",b),l(V,C+"sas",y),l(V,C+"screening_failure",S),l(V,C+"sr",b/(1-S)),l(V,"prefix",C),l(V,C+"events",O),l(V,"actualTimeseriesSnapshot",{actual_date:T,sites_initiated:R,patients_screened:w,patients_randomized:A}),V}catch(e){return console.error(e),(0,c.getErrorCalculationResultObject)({invalidFields:[],fpfv:i,fsiv:n,fpfvFpft:a,si25:s,si50:p,si90:_,nSites:E,patientAllocation:g,randomisationRate:b,SAS:y,SF:S,prefix:C,events:O,errorMessages:{patient_allocation:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,num_sites:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,randomisation_rate:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE,screening_failure:c.MAX_CURVE_LENGTH_EXCEEDED_MESSAGE},actualTimeseriesSnapshot:{actual_date:T,sites_initiated:R,patients_screened:w,patients_randomized:A}})}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=a(10),u=n(s),d=a(272),c=a(116),f=a(558),p=a(364),m=n(p),h=a(363),v=a(41);t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(50),r=function(e){return e&&e.__esModule?e:{default:e}}(n),l=function(e){var t={};return function(){for(var a=arguments.length,n=Array(a),l=0;l<a;l++)n[l]=arguments[l];try{var i=n[5];if(i in t){var o=t[i],s={fp:n[0],endDate:n[1],country:n[2],fpfvFpft:n[3],isAdjusted:n[4]};if(o.fp.isSame(s.fp,"day")&&o.endDate.isSame(s.endDate,"day")&&o.fpfvFpft===s.fpfvFpft&&o.isAdjusted===s.isAdjusted){var u=o.country,d=s.country,c="";if(s.isAdjusted&&(c="adjusted_"),u[c+"patient_allocation"]===d[c+"patient_allocation"]&&u[c+"num_sites"]===d[c+"num_sites"]&&u[c+"fsiv"]&&u[c+"fsiv"].isSame(d[c+"fsiv"])&&u[c+"sas"]===d[c+"sas"]&&u[c+"25_si"]&&u[c+"25_si"].isSame(d[c+"25_si"])&&u[c+"50_si"]&&u[c+"50_si"].isSame(d[c+"50_si"])&&u[c+"90_si"]&&u[c+"90_si"].isSame(d[c+"90_si"])&&u[c+"fpfv"]&&u[c+"fpfv"].isSame(d[c+"fpfv"])&&+u[c+"screening_failure"]==+d[c+"screening_failure"]&&+u[c+"randomisation_rate"]==+d[c+"randomisation_rate"]&&(0,r.default)(u[c+"events"],d[c+"events"])&&(0,r.default)(o.unlock,d.unlock)&&u.actual_siv&&d.actual_siv&&u.actual_siv.length===d.actual_siv.length&&u.actual_screened&&d.actual_screened&&u.actual_screened.length===d.actual_screened.length&&u.actual_randomized&&d.actual_randomized&&u.actual_randomized.length===d.actual_randomized.length)return o.country}}var f=e.apply(void 0,n);return Object.keys(t).length>=500&&(t={}),n[0]&&n[1]&&(t[i]={fp:n[0],endDate:n[1],country:f,fpfvFpft:n[3],isAdjusted:n[4],unlock:n[2]&&n[2].unlock}),f}catch(t){return console.log("Failed to cache calculated data - ",n,t),e.apply(void 0,n)}}};t.default=l},function(e,t,a){"use strict";function n(e,t,a,n){var r=[],l=void 0;switch(t){case o.default.LPFT_EARLY:l="isSameOrBefore";break;case o.default.LPFT_LATE:l="isAfter";break;default:l=null}return r=null!==l?e.map(function(e){var t=e.fullData.filter(function(t){return t.type===s.SCENARIO_DATA_TYPE.REGION&&!t.isRegionCountry&&t.lpft&&t.lpft[l](e.end_date)||t.type===s.SCENARIO_DATA_TYPE.ROLLUP||t.type===s.SCENARIO_DATA_TYPE.COUNTRY&&t.lpft&&t.lpft[l](e.end_date)});return Object.assign({},e,{fullData:t})}):e.map(function(e){var t=e.fullData.filter(function(e){return e.type===s.SCENARIO_DATA_TYPE.REGION&&!e.isRegionCountry||e.type===s.SCENARIO_DATA_TYPE.ROLLUP||e.type===s.SCENARIO_DATA_TYPE.COUNTRY});return Object.assign({},e,{fullData:t})}),r=r.map(function(e){var t=e.fullData.filter(function(e){return e.type===s.SCENARIO_DATA_TYPE.ROLLUP||e.type===s.SCENARIO_DATA_TYPE.REGION&&(a===e.location||a===i.LOCATION_FILTER_OPTIONS.ALL_REGIONS)||!(e.type!==s.SCENARIO_DATA_TYPE.COUNTRY||e.region!==e.location&&!e.regionHasSingleCountry||a!==i.LOCATION_FILTER_OPTIONS.ALL_REGIONS)||e.type===s.SCENARIO_DATA_TYPE.COUNTRY&&a===i.LOCATION_FILTER_OPTIONS.ALL_REGIONS&&n===i.LOCATION_FILTER_OPTIONS.ALL||e.type===s.SCENARIO_DATA_TYPE.COUNTRY&&a===e.region&&(null===n||n===e.location||n===i.LOCATION_FILTER_OPTIONS.ALL)});return Object.assign({},e,{fullData:t})})}function r(e){var t=void 0,a=void 0;return e.forEach(function(e){t?t.isAfter(e.fp)&&(t=e.fp):t=e.fp,a||(a=e.end_date),e.fullData.forEach(function(e){var t=(0,u.getPredictedDate)(e,!1);t&&t.isAfter(a)&&(a=t)})}),[t,a]}function l(){var e=document.createEvent("Event");e.initEvent("resize",!0,!0),window.dispatchEvent(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.filterSelectedScenarios=n,t.getMinMaxDates=r,t.fireResize=l;var i=a(215),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s=a(14),u=a(221)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return"function"==typeof e?e():e},r=t.switchCase=function(e){return function(t){return function(a){return a in e?e[a]:t}}};t.switchCaseF=function(e){return function(t){return function(a,l){return n(r(e)(t)(a)(l))}}}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n(this,e),this.curves=t[a+"curves"],this.type=t.type,this.location=t.location,this.patient_allocation=t[a+"patient_allocation"],this.patient_allocation_min=t[a+"patient_allocation_min"],this.num_sites=t[a+"num_sites"],this.fsiv=t[a+"fsiv"],this["25_si"]=null,this["50_si"]=null,this["90_si"]=null,this.fpfv=t[a+"fpfv"],this.fpfv_fpft=t[a+"fpfv_fpft"],this.fpfv_lpfv=t[a+"fpfv_lpfv"],this.sas=t[a+"sas"],this.screening_failure=t[a+"screening_failure"],this.sr=t[a+"sr"],this.randomisation_rate=t[a+"randomisation_rate"],this.lpft=t[a+"lpft"],this.overrideList=[]};t.default=r},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1248),l=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function e(){var t=this;n(this,e),this.size=navigator.hardwareConcurrency||4,this.workers=0,this.jobs=[],this.queueJob=function(e,a,n){var r={msg:e,cb:a,ctx:n};t.jobs.push(r),t.workers<t.size&&t.nextJob()},this.getJobsQueue=function(){return t.jobs.length},this.nextJob=function(){t.jobs.length&&function(){var e=t.jobs.shift(),a=new l.default;t.workers+=1,a.onmessage=function(n){e.cb.call(e.ctx,n.data,a)&&(a.terminate(),t.workers-=1,t.nextJob())},a.postMessage(e.msg)}()}};t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(15),r=function(e){var t=e.dispatch;return function(e){return function(a){if(a.type===n.CHANGE_COHORT_COUNTRY||a.type===n.CHANGE_COHORT_COUNTRIES||a.type===n.ADD_COHORT_COUNTRY||a.type===n.DELETE_COHORT_COUNTRY||a.type===n.PASTE_COUNTRY_DATA){var r=a.scenarioId;t({type:n.ADD_HISTORY_STEP,scenarioId:r})}return e(a)}}};t.default=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(15),r=a(366),l=function(e){return e&&e.__esModule?e:{default:e}}(r),i=a(147),o=a(7),s=a(130),u=a(183),d=a(63),c=a(271),f=a(270),p=function(e){var t=e.dispatch,a=e.getState;return function(e){return function(p){if(p.type===n.EXPORT_SCENARIO_DATA||p.type===n.EXPORT_COUNTRY_SITES_SELECTION){var m=p.studyId,h=p.scenarioId,v=p.countryId,_=a(),E=_.auth&&_.auth.user&&_.auth.user.id;(h?l.default:r.getImpactScenarioData)(m,h,E,_,t).then(function(e){var t=(0,d.extractApprovedData)(e.scenario);if(p.type===n.EXPORT_SCENARIO_DATA)t&&t.cohorts&&t.cohorts.length>0?(t=(0,s.calculateCohorts)(t),(0,i.exportToExcelCohorts)(e.study,t)):t&&(t.fullData=(0,o.getScenarioCalculatedData)(t.countries,t),(0,i.exportToExcel)(e.study,t,t.fullData));else if(p.type===n.EXPORT_COUNTRY_SITES_SELECTION){var a=(0,u.getSelectedSites)(_,{scenarioId:h,countryId:v}),r=(0,c.getOtherSites)(_,{scenarioId:h,countryId:v}),l=(0,f.getExternalSites)(_,{scenarioId:h,countryId:v}),m=_.sites.siteEditReasons,E=t.countries.find(function(e){return e.platform_country_id===v});(0,i.exportToExcelCountrySitesSelection)(e.study,t,a,r,l,E,m)}}).catch(function(e){t({type:"ERROR_"+p.type,payload:e})})}return e(p)}}};t.default=p},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(11),l=n(r),i=a(67),o=n(i),s=a(15),u=function(e){var t=e.dispatch;return function(e){return function(a){var n=(0,l.default)(a,"meta.notification");return n?((Array.isArray(n)?n:[n]).forEach(function(e){var n=o.default.generate(),r=(0,l.default)(e,"trigger");r&&0===a.type.indexOf(r)&&(t({type:s.SHOW_NOTIFICATION,id:n,notificationType:r,message:(0,l.default)(e,"message"),link:(0,l.default)(e,"link")}),setTimeout(function(){t({type:s.HIDE_NOTIFICATION,id:n})},(0,l.default)(e,"timeout",3e3)))}),e(a)):e(a)}}};t.default=u},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(15),r=a(366),l=function(e){return e&&e.__esModule?e:{default:e}}(r),i=null,o=function(e){var t=e.dispatch,a=e.getState;return function(e){return function(r){if(r.type===n.GET_SCENARIO_VIEWER_DATA||r.type==="SUCCESS_"+n.UPDATE_SCENARIO||r.type==="SUCCESS_"+n.BATCH_OVERRIDE_FIELD_UPDATE){var o=r.studyId,s=r.scenarioId,u=r.fetchFullStudyData,d=r.refreshScenarioCache,c=r.clearScenarioCache,f=r.allConstraints,p=(new Date).getTime();(!i||i<p)&&(i=p);var m=a(),h=m.auth&&m.auth.user&&m.auth.user.id;(0,l.default)(o,s,h,m,t,u,d,c,f).then(function(e){i===p&&t({type:"SUCCESS_"+n.GET_SCENARIO,studyId:o,scenarioId:s,payload:e.scenario})}).catch(function(e){t({type:"ERROR_"+n.GET_SCENARIO_VIEWER_DATA,payload:e})})}return e(r)}}};t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(15),r=function(e){var t=e.dispatch;return function(e){return function(a){if(a.type===n.SITE_ACTION||"[SITES.MULTI-EDIT] SUBMIT_MULTIEDIT"===a.type){var r=a.scenarioId;t({type:n.ADD_SITE_HISTORY_STEP,scenarioId:r})}return e(a)}}};t.default=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(15),r=a(561),l=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(e){var t=e.dispatch,a=e.getState;return function(e){return function(r){switch(r.type){case n.GET_STUDY_DASHBOARD_DATA:case"SUCCESS_"+n.UPDATE_STUDY:case"SUCCESS_"+n.UPDATE_STUDY_OWNER:case"SUCCESS_"+n.APPLY_HISTORICAL_STUDIES_CHANGES:var i=r.studyId,o=r.isArchived,s=r.forceUpdate,u=a(),d=u.auth&&u.auth.user&&u.auth.user.id,c=s||r.type==="SUCCESS_"+n.UPDATE_STUDY;return(0,l.default)(i,d,a,t,o,c).catch(function(e){t({type:"ERROR_"+n.GET_STUDY_DASHBOARD_DATA,payload:e})}),e(r);default:return e(r)}}}};t.default=i},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case"SUCCESS_"+l.FETCH_ACTUALS_DATA:return r({},e,n({},t.studyId,r({},e[t.studyId],t.payload)));default:return e}};var l=a(15),i={}},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case"SUCCESS_"+l.FETCH_AGGREGATED_ACTUALS_DATA:return r({},e,n({},t.studyId,r({},e[t.studyId],t.payload)));default:return e}};var l=a(15),i={}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case"REQUEST_"+r.LOGIN:return n({},l);case"SUCCESS_"+r.LOGIN:return n({},t.payload);default:return e}};var r=a(15),l={user:void 0,autoLoginUser:void 0}},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case l.ADD_SCENARIO_TO_CACHE:return r({},e,n({},t.scenarioId,t.payload));case l.CLEAR_SCENARIO_CACHE:return i;default:return e}};var l=a(15),i={}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1];switch(t.type){case"SUCCESS_"+d.GET_STUDY_SCENARIOS_TO_COMPARE:var a=[];return t.payload.forEach(function(e){if(e&&e.id||e&&"IMPACT plan"===e.name)if(e.approved_data_snapshot){var t=(0,o.default)(e);t=(0,f.prepareScenarioObject)(t);var n=(0,c.deserializeScenarioData)(t);n&&(t=l({},(0,u.default)(t,"approved_data_snapshot"),{approvedData:n,fp:n.fp,end_date:n.target_lpft,fpfv_fpft:n.fpfv_fpft}),t.countries=(0,f.prepareScenarioCountriesObject)(t,t.isImpact),t=l({},t,{fullData:(0,f.getScenarioCalculatedData)(t.countries,t)})),a.push(t)}else a.push(e)}),{scenarios:a};case"ERROR_"+d.GET_STUDY_SCENARIOS_TO_COMPARE:return l({},e,{scenarios:[],error:!0});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=r;var i=a(31),o=n(i),s=a(83),u=n(s),d=a(15),c=a(63),f=a(7),p={scenarios:[],error:!1}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case"SUCCESS_"+r.CONTEXT_HELP_PAGE_LIST:return n({},e,{pageList:t.payload});case r.CONTEXT_HELP_PAGE:return n({},e,{page:t.page});case r.IS_SHOW_CONTEXT_HELP:return n({},e,{isShow:t.val});default:return e}};var r=a(15),l={pageList:[],isShow:!1,page:""}},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case"REQUEST_"+o.GET_CSMS:return r({},e,{isLoading:!0});case"SUCCESS_"+o.GET_CSMS:var a,l=t.payload,u=Object.keys(l).sort(),d=e.selectedUser?null:(0,i.default)(l,"["+u[0]+"][0].id",null);return r({},e,(a={},n(a,t.studyId,l),n(a,"isLoading",!1),n(a,"selectedUser",d),a));case"ERROR_"+o.GET_CSMS:return r({},e,{isLoading:!1,error:!0});case"SUCCESS_"+o.GET_CSM_SCENARIOS:return r({},e,{userScenarios:n({},t.userId,t.payload)});case"SUCCESS_"+o.GET_STUDY_SCENARIOS_LIST:return r({},e,{studyScenarios:t.payload});case"SUCCESS_"+o.SHARE_SCENARIO:if(!t.userId)return e;var c=e.userScenarios[t.userId];return r({},e,{userScenarios:n({},t.userId,c.map(function(e){return+e.id==+t.scenarioId?r({},e,{shared:!t.unshare}):e}))});case o.CSM_USER_SELECT:return r({},e,{selectedUser:t.userId});default:return e}};var l=a(11),i=function(e){return e&&e.__esModule?e:{default:e}}(l),o=a(15),s={isLoading:!1,error:null,selectedUser:null,userScenarios:{}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case r.ROUTER_LOCATION_CHANGE:return l;case r.FORBIDDEN_ERROR:return n({},e,{forbidden:t.payload.message});case r.INTERNAL_SERVER_ERROR:return n({},e,{internalServer:t.payload.message});case r.NOT_FOUND_ERROR:return n({},e,{notFound:t.payload.message});case r.ODA_API_ERROR:return n({},e,{approveODA:t.payload.message});case r.SESSION_EXPIRED:return n({},e,{sessionExpired:!0});case r.BAD_REQUEST:return n({},e,{badRequest:t.payload.message});default:return e}};var r=a(15),l={forbidden:void 0,internalServer:void 0,notFound:void 0,sessionExpired:!1,badRequest:void 0}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments[1];switch(t.type){case"ERROR_"+p.GET_SCENARIO_EVENTS:return i({},e,l({},t.scenarioId,[]));case"SUCCESS_"+p.GET_SCENARIO_EVENTS:var a=t.payload,n=e.groupByType;return i({},e,l({},t.scenarioId,(0,c.sortEventsByField)(a,"start_date","ASC",n)));case p.ADD_NEW_EVENT:var o=e[t.scenarioId];return i({},e,l({},t.scenarioId,[].concat(r(o),[t.payload])));case p.UPDATE_EVENT:var u=e[t.scenarioId].map(function(e){var a=e;return a.id===t.id&&(a[t.field]=t.value,a.state!==f.EVENT_STATE.NEW&&(a.state=f.EVENT_STATE.UPDATED)),a});return i({},e,l({},t.scenarioId,u));case p.DUPLICATE_EVENT:var h=e[t.scenarioId],v=h.find(function(e){return e.id===t.id}),_=i({},(0,s.default)(v),t.defaultValues);return _.id=d.default.generate(),_.state=f.EVENT_STATE.NEW,_.status=f.EVENT_STATUS.PENDING,_.name="(Copy) "+_.name,i({},e,l({},t.scenarioId,[].concat(r(h),[_])));case p.REMOVE_EVENT:var E=e[t.scenarioId].reduce(function(e,a){var n=a;return n.id!==t.id?e.push(n):n.id===t.id&&n.state!==f.EVENT_STATE.NEW&&(n.state=f.EVENT_STATE.DELETED,n.isValid=!0,e.push(n)),e},[]);return i({},e,l({},t.scenarioId,E));case p.SORT_EVENTS:var g=t.field,y=t.sortOrder?"ASC":"DESC",S=e[t.scenarioId],b=e.groupByType;return i({},e,l({},t.scenarioId,(0,c.sortEventsByField)(S,g,y,b)));case p.TOGGLE_GROUP_EVENTS_BY_TYPE:return i({},e,{groupByType:!e.groupByType});case"SUCCESS_"+p.APPLY_DISABLE_EVENT:var C=e[t.scenarioId],O=C.map(function(e){return e.id===t.eventId&&(e.disabled=t.isDisabled),e});return i({},e,l({},t.scenarioId,O));default:return e}};var o=a(31),s=n(o),u=a(67),d=n(u),c=a(70),f=a(41),p=a(15),m={groupByType:!0}},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case"SUCCESS_"+i.GET_HISTORICAL_STUDIES:return l({},e,{historicalStudies:r({},t.studyId,t.payload.map(function(e){return l({},e,{therapeutic_area:e.therapeutic_area||"-",indication:e.indication||"-",fpfv:e.fpfv||"-",screen_failure_rate:e.screen_failure_rate||0===e.screen_failure_rate?e.screen_failure_rate:null,enrollment_rate:e.enrollment_rate||0===e.enrollment_rate?e.enrollment_rate:null})}).sort((0,s.default)("indication","ASC")))});case"SUCCESS_"+i.APPLY_HISTORICAL_STUDIES_CHANGES:return l({},e,{historicalStudies:r({},t.studyId,t.payload.sort((0,s.default)("indication","ASC")))});case i.TOGGLE_HISTORICAL_STUDY:return l({},e,{historicalStudies:r({},t.studyId,e.historicalStudies[t.studyId].map(function(e){var a=e;return a.study_id===t.study_id&&(a.selected=!e.selected),a}))});case i.SORT_HISTORICAL_DATA:var a=[].concat(n(e.historicalStudies[t.studyId])),o=a.reduce(function(e,a){return null===a[t.columnName]?e.nullValues.push(a):0===a[t.columnName]?e.zeroValues.push(a):e.rest.push(a),e},{nullValues:[],zeroValues:[],rest:[]}),d=void 0;return d="ASC"===t.sortDirection?[].concat(n(o.nullValues),n(o.zeroValues),n(o.rest.sort((0,s.default)(t.columnName,t.sortDirection)))):[].concat(n(o.rest.sort((0,s.default)(t.columnName,t.sortDirection))),n(o.zeroValues),n(o.nullValues)),l({},e,{historicalStudies:r({},t.studyId,d)});case i.FILTER_HISTORICAL_DATA:return l({},e,{filterValue:t.pattern});case i.CLEAR_HISTORICAL_DATA:return l({},e,{historicalStudies:r({},t.studyId,[])});case"SUCCESS_"+i.GET_HISTORICAL_DATA:return l({},e,{data:l({},e.data,r({},t.studyId,l({},t.payload)))});default:return e}};var i=a(15),o=a(49),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u={historicalStudies:[],filterValue:"",data:{}}},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case"SUCCESS_"+o.GET_IMPACT_SCENARIO_NOTES:return n({},t.impactScenarioId,t.payload);case"SUCCESS_"+o.ADD_IMPACT_SCENARIO_NOTE:var a=e[t.impactScenarioId];if(a){var l=a.slice(),u=(0,i.default)(a,function(e){return e.id===t.payload.id});return-1!==u&&l.splice(u,1),l.unshift(t.payload),r({},e,n({},t.impactScenarioId,l))}return n({},t.impactScenarioId,t.payload);default:return e}};var l=a(698),i=function(e){return e&&e.__esModule?e:{default:e}}(l),o=a(15),s={}},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case"SUCCESS_"+l.GET_IMPACT_SCENARIO:var a=(0,i.prepareScenarioObject)(t.payload);return a.countries=(0,i.prepareScenarioCountriesObject)(a,!0),n({},t.studyId,r({},a,{fullData:(0,i.getScenarioCalculatedData)(a.countries,a)}));default:return e}};var l=a(15),i=a(7),o={}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(211),l=a(18),i=a(75),o=a(1244),s=n(o),u=a(1225),d=n(u),c=a(1243),f=n(c),p=a(1238),m=n(p),h=a(1239),v=n(h),_=a(1234),E=n(_),g=a(1227),y=n(g),S=a(1245),b=n(S),C=a(1230),O=n(C),T=a(1236),R=n(T),w=a(1233),A=n(w),I=a(1231),N=n(I),D=a(1232),P=n(D),L=a(1242),M=n(L),x=a(1240),k=n(x),j=a(1223),F=n(j),U=a(1226),V=n(U),B=a(1224),H=n(B),G=a(1228),Y=n(G),q=a(1237),z=n(q),W=a(1229),K=n(W),X=a(1241),Z=n(X),J=(0,r.combineReducers)({auth:d.default,study:s.default,studies:f.default,platform:m.default,scenarios:v.default,impactScenarios:E.default,impactNotes:A.default,comparator:y.default,users:b.default,notes:R.default,errors:O.default,events:N.default,historical:P.default,sites:M.default,site:k.default,actuals:F.default,cache:V.default,aggregatedActuals:H.default,routing:l.routerReducer,form:i.reducer,contextHelp:Y.default,notification:z.default,csms:K.default,sitesSearch:Z.default});t.default=J},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case"SUCCESS_"+o.GET_SCENARIO_NOTES:return n({},t.scenarioId,t.payload);case"SUCCESS_"+o.ADD_SCENARIO_NOTE:var a=e[t.scenarioId];if(a){var l=a.slice(),u=(0,i.default)(a,function(e){return e.id===t.payload.id});return-1!==u&&l.splice(u,1),l.unshift(t.payload),r({},e,n({},t.scenarioId,l))}return r({},e,n({},t.scenarioId,[t.payload]));default:return e}};var l=a(698),i=function(e){return e&&e.__esModule?e:{default:e}}(l),o=a(15),s={}},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case l.SHOW_NOTIFICATION:var a=t.message,o=t.notificationType,s=t.id,u=t.link;return r({},e,{notifications:[].concat(n(e.notifications.filter(function(e){return e.animateIn}).map(function(t,a){return 0===a&&e.notifications.length>=3?r({},t,{animateIn:!1}):t})),[{id:s,animateIn:!0,notificationType:o,message:a,link:u}])});case l.HIDE_NOTIFICATION:var d=t.id;return r({},e,{notifications:e.notifications.filter(function(e){return e.animateIn}).map(function(e){return e.id===d?r({},e,{animateIn:!1}):e})});default:return e}};var l=a(15),i={notifications:[]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case"REQUEST_"+r.GET_PLATFORM_STUDIES:return n({},e,{isStudiesLoading:!0,studiesError:null});case"SUCCESS_"+r.GET_PLATFORM_STUDIES:return n({},e,{studies:t.payload,isStudiesLoading:!1});case"ERROR_"+r.GET_PLATFORM_STUDIES:return n({},e,{isStudiesLoading:!1,studiesError:!0});case"REQUEST_"+r.GET_PLATFOTM_REGIONS:return n({},e,{isRegionsLoading:!0});case"SUCCESS_"+r.GET_PLATFOTM_REGIONS:return n({},e,{regions:t.payload,isRegionsLoading:!1});case"ERROR_"+r.GET_PLATFOTM_REGIONS:return n({},e,{isRegionsLoading:!1,regionsError:!0});case"REQUEST_"+r.GET_STUDY_OPTIONS:return n({},e,{isStudyOptionsLoading:!0,studyOptionsError:null});case"SUCCESS_"+r.GET_STUDY_OPTIONS:return n({},e,{studyOptions:t.payload,isStudyOptionsLoading:!1});case"ERROR_"+r.GET_STUDY_OPTIONS:return n({},e,{isStudyOptionsLoading:!1,studyOptionsError:!0});default:return e}};var r=a(15),l={studies:[],regions:[],studyOptions:{},historicalStudies:[],isStudiesLoading:!1,isRegionsLoading:!1,isStudyOptionsLoading:!1,studiesError:null,regionsError:null,studyOptionsError:null}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments[1];switch(t.type){case"SUCCESS_"+c.GET_SCENARIO:var a=(0,h.extractApprovedData)(t.payload);return t.payload.cohorts&&t.payload.cohorts.length>0?l({clipboard:(0,s.default)(e.clipboard)},t.scenarioId,(0,p.calculateCohorts)(a)):l({},t.scenarioId,a);case"SUCCESS_"+c.APPLY_SCENARIO_EVENTS_CHANGES:var n=(0,s.default)(e[t.scenarioId]);return n.events=t.payload,i({},e,l({},t.scenarioId,n));case c.CHANGE_COHORT_SAVE:return i({},e,{enableSave:t.payload});case c.CHANGE_COHORT_COUNTRY:var o,u=t.scenarioId,_=t.cohortId,E=t.countryId,g=t.payload,y=e.dataToSave?[].concat(r(e.dataToSave)):[],S=e.deleteCountries?[].concat(r(e.deleteCountries)):[],b=i({},e[u]),C=(0,m.updateCohortCountriesData)(_,b.cohorts,l({},E,g instanceof Array?g:[g]),y),O=C.dataToSave,T=C.cohorts;b.cohorts=T,b=(0,p.calculateCohorts)(b,!0);var R=O.length>0||S.length>0;return i({},e,(o={},l(o,u,b),l(o,"enableSave",R),l(o,"dataToSave",O),o));case c.CHANGE_COHORT_COUNTRIES:var w,A=t.scenarioId,I=t.cohortId,N=t.payload,D=e.dataToSave?[].concat(r(e.dataToSave)):[],P=e.deleteCountries?[].concat(r(e.deleteCountries)):[],L=i({},e[A]),M=(0,m.updateCohortCountriesData)(I,L.cohorts,N,D),x=M.dataToSave,k=M.cohorts;L.cohorts=k,L=(0,p.calculateCohorts)(L,!0);var j=x.length>0||P.length>0;return i({},e,(w={},l(w,A,L),l(w,"enableSave",j),l(w,"dataToSave",x),w));case c.REVERT_COHORT_CONTRY:var F,U=t.scenarioId,V=t.cohortId,B=t.countryId,H=t.fieldName,G=e.dataToSave?[].concat(r(e.dataToSave)):[],Y=e.deleteCountries?[].concat(r(e.deleteCountries)):[],q=i({},e[U]),z=(0,m.revertCohortCountriesData)(V,q.cohorts,[B],H,G),W=z.dataToSave,K=z.cohorts;q.cohorts=K,q=(0,p.calculateCohorts)(q,!0);var X=W.length>0||Y.length>0;return i({},e,(F={},l(F,U,q),l(F,"enableSave",X),l(F,"dataToSave",W),F));case c.ADD_COHORT_COUNTRY:var Z,J=t.scenarioId,Q=t.cohortId,$=i({},e[J]),ee=e.dataToSave?[].concat(r(e.dataToSave)):[],te=e.deleteCountries?[].concat(r(e.deleteCountries)):[];$.cohorts=$.cohorts.map(function(e){return e.id!==Q?e:(e.countries.push(t.payload),ee.push({countryName:t.payload.country_name,overrideId:null,regionName:t.payload.region_name,cohortId:Q}),i({},e,{state:i({},e.state,{isDirty:!0})}))}),$=(0,p.calculateCohorts)($,!0);var ae=ee.length>0||te.length>0;return i({},e,(Z={},l(Z,J,$),l(Z,"enableSave",ae),l(Z,"dataToSave",ee),Z));case c.DELETE_COHORT_COUNTRY:var ne,re=t.scenarioId,le=t.cohortId,ie=t.payload,oe=ie.countryName,se=ie.regionId,ue=ie.regionName,de=i({},e[re]),ce=e.dataToSave?[].concat(r(e.dataToSave)):[],fe=e.deleteCountries?[].concat(r(e.deleteCountries)):[];de.cohorts=de.cohorts.map(function(e){if(e.id!==le)return e;var t=e.countries.reduce(function(e,t){var a=e;return void 0!==oe&&(t.country_name!==oe||t.region_id!==se)||!oe&&t.region_id!==se?a.push(t):(ce=ce.filter(function(e){if(e.cohortId!==le)return!0;if("Unspecified country"===e.countryName){if(e.regionName!==se)return!0;if(!oe&&e.regionName===se)return!1}else{if(e.regionName!==ue)return!0;if(!oe&&e.regionName===ue)return!1}return e.countryName!==oe}),t.override_id&&fe.push(t)),a},[]);return i({},e,{countries:t,state:i({},e.state,{isDirty:!0})})}),de=(0,p.calculateCohorts)(de,!0);var pe=ce.length>0||fe.length>0;return i({},e,(ne={},l(ne,re,de),l(ne,"enableSave",pe),l(ne,"dataToSave",ce),l(ne,"deleteCountries",fe),ne));case c.ADD_COUNTRY_TO_THE_REDUX_COUNTRY_LIST:var me=(0,s.default)(e[t.scenarioId]);return me.countries.push(t.country),me.countries=(0,m.prepareScenarioCountriesObject)(me),i({},e,l({},t.scenarioId,me));case c.REMOVE_COUNTRY_FROM_THE_REDUX_COUNTRY_LIST:var he=(0,s.default)(e[t.scenarioId]);if(t.country){var ve=he.countries.findIndex(function(e){return t.country===e.country_name&&e.region_id===t.regionId});-1!==ve&&he.countries.splice(ve,1)}else he.countries=he.countries.filter(function(e){return e.region_id!==t.regionId});return i({},e,l({},t.scenarioId,he));case c.UPDATE_SCENARIO_JOB_STATUS:var _e=(0,s.default)(e[t.scenarioId]);return _e&&(_e.nerve_job_status=t.jobStatus),i({},e,l({},t.scenarioId,_e));case c.RESTORE_UNSAVED_DATA:var Ee=t.payload,ge=Ee.valuesToSave,ye=Ee.deleteCountries,Se=Ee.scenario,be=ge;Se.cohorts.forEach(function(e){var t=(0,s.default)(e.countries);t=t.reduce(function(t,a){var n=ye.find(function(t){return t.country_id===a.country_id&&t.cohort_id===e.id});return n?be=be.filter(function(e){return e.overrideId!==n.override_id||!(null===e.overrideId&&e.cohortId===n.cohort_id&&e.countryName===n.country_name&&e.regionName===n.region_name)}):t.push(a),t},[]),e.countries=(0,s.default)(t)});var Ce=(0,m.getDateFields)();return Se.cohorts.forEach(function(e){var t=(0,s.default)(e.countries);be.forEach(function(a){var n=t.find(function(e){return a.countryName===e.country_name&&a.regionName===e.region_name&&a.overrideId===e.override_id});if(n)Ce.has(a.fieldName)?n[a.fieldName]=a.fieldValue&&d.default.isMoment(a.fieldValue)?a.fieldValue.diff((0,m.getMomentDate)(e.fp),"d"):null:n[a.fieldName]=a.fieldValue;else if(a.cohortId===e.id){var r=(0,m.getNewCountryObject)(a.countryName,a.regionName,a.regionName,(0,m.isSingleCountry)(a.regionName),null!==Se.source_scenario_id);r[a.fieldName]=a.fieldValue,t.push(r)}}),e.countries=(0,s.default)(t)}),l({enableSave:be.length>0||ye.length>0,dataToSave:be,deleteCountries:ye},Se.id,(0,p.calculateCohorts)(Se,!1));case c.RESET_UNSAVED_DATA:return i({},e,{enableSave:!1,dataToSave:[],deleteCountries:[]});case c.ADD_HISTORY_STEP:var Oe=e.past?[].concat(r(e.past)):[];Oe.length===f.UNDO_HISTORY_LENGTH&&Oe.shift();var Te=l({enableSave:e.enableSave,dataToSave:e.dataToSave,deleteCountries:e.deleteCountries},t.scenarioId,e[t.scenarioId]);return Oe.push(Te),i({},e,{past:Oe,future:[]});case c.UNDO_LAST_ACTION:var Re=e.past?[].concat(r(e.past)):[];if(0===Re.length)return e;var we=l({enableSave:e.enableSave,dataToSave:e.dataToSave,deleteCountries:e.deleteCountries},t.scenarioId,e[t.scenarioId]);return i({},e,Re.pop(),{past:Re,future:[we].concat(r(e.future))});case c.REDO_LAST_ACTION:var Ae=e.future[0],Ie=e.future.slice(1),Ne=l({enableSave:e.enableSave,dataToSave:e.dataToSave,deleteCountries:e.deleteCountries},t.scenarioId,e[t.scenarioId]);return i({},e,Ae,{past:[].concat(r(e.past),[Ne]),future:Ie});case c.RESTORE_SCENARIO_DATA:return i({},e,l({},t.payload.id,t.payload));case c.COPY_COUNTRY_DATA:var De=t.scenarioId,Pe=t.cohortId,Le=t.countryId,Me=e[De];if(!Me)return e;var xe=Me.cohorts.find(function(e){return e.id===+Pe});if(!xe)return e;var ke=xe.countries,je=ke.find(function(e){return e.country_id===Le});if(!je)return e;var Fe=Object.keys(f.ENROLMENT_TABLE_FIELDS_LIST).reduce(function(e,t){var a=f.ENROLMENT_TABLE_FIELDS_LIST[t];if(a===f.ENROLMENT_TABLE_FIELDS_LIST.UNLOCK)return e;var n=je[a];return e[a]=n instanceof d.default?n.clone():n,e},{});return i({},e,{clipboard:Fe});case c.PASTE_COUNTRY_DATA:var Ue,Ve=t.scenarioId,Be=t.cohortId,He=t.countryId,Ge=e.clipboard,Ye=Object.keys(Ge).map(function(e){return{fieldName:e,newValue:Ge[e],oldValue:null}}),qe=l({},He,Ye),ze=e.dataToSave?[].concat(r(e.dataToSave)):[],We=e.deleteCountries?[].concat(r(e.deleteCountries)):[],Ke=i({},e[Ve]),Xe=(0,m.updateCohortCountriesData)(+Be,Ke.cohorts,qe,ze),Ze=Xe.dataToSave,Je=Xe.cohorts;Ke.cohorts=Je,Ke=(0,p.calculateCohorts)(Ke,!0);var Qe=Ze.length>0||We.length>0;return i({},e,(Ue={},l(Ue,Ve,Ke),l(Ue,"enableSave",Qe),l(Ue,"dataToSave",Ze),Ue));case c.CLEAR_SCENARIO_CACHE:return v;case"SUCCESS_"+c.CHANGE_COUNTRY_SITES_STATUS:var $e=e[t.scenarioId];return i({},e,l({},t.scenarioId,i({},$e,{countries:$e.countries.map(function(e){return e.override_id===t.overrideId&&(e.country_sites_approval_status=t.payload),e})})));case"SUCCESS_"+c.GET_USER_DETAILS:var et=e[t.scenarioId];return i({},e,l({},t.scenarioId,i({},et,{countries:et.countries.map(function(e){return e.override_id===t.overrideId&&(e.country_sites_approval_status=i({},e.country_sites_approval_status,{approverDetails:t.payload})),e})})));case"SUCCESS_"+c.GET_COUNTRY_MANAGER:var tt=e[t.scenarioId];return i({},e,l({},t.scenarioId,i({},tt,{countries:tt.countries.map(function(e){return e.platform_country_id===t.countryId?i({},e,{countrySitesManager:t.payload}):e})})));case"SUCCESS_"+c.SCENARIO_SITE_SELECTION_STATUS:var at=e[t.scenarioId];return i({},e,l({},t.scenarioId,i({},at,{site_selection_required:t.payload.value})));default:return e}};var o=a(31),s=n(o),u=a(10),d=n(u),c=a(15),f=a(14),p=a(130),m=a(7),h=a(63),v={enableSave:!1,dataToSave:[],deleteCountries:[],past:[],future:[],clipboard:{}}},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case"SUCCESS_"+l.GET_COUNTRY_SITE:return r({},e,n({},t.siteId,t.payload));case l.SET_SITE_METRICS_FILTER:return r({},e,{metricsFilter:t.payload});case l.SET_SITE_MILESTONES_FILTER:return r({},e,{milestonesFilter:t.payload});default:return e}};var l=a(15),i={metricsFilter:"median_time_to_query",milestonesFilter:"fp_siv"}},function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case"ERROR_"+l.SEARCH_FOR_SITES:return r({},e,{loading:!1,error:!0});case"REQUEST_"+l.SEARCH_FOR_SITES:var a=t.requestId;return r({},e,{loading:!0,error:!1,requestId:a});case"SUCCESS_"+l.SEARCH_FOR_SITES:var o=t.dataType,s=t.requestId,u=t.existingSites||[];return e.requestId===s?r({},e,n({loading:!1,error:!1},o,t.payload.map(function(e){return u.some(function(t){return t.investigator_center_id===e.investigator_center_id})?r({},e,{exist:!0}):e}))):e;case"REQUEST_"+l.GET_COUNTRY_SITES:return i;default:return e}};var l=a(15),i={loading:!1,error:!1,RAW:null,EXTERNAL:null}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments[1];switch(t.type){case"ERROR_"+u.GET_COUNTRY_SITES:return i({},e,{loadingSites:!1,errorLoadingSites:!0});case"REQUEST_"+u.GET_COUNTRY_SITES:return i({},e,{loadingSites:!0,errorLoadingSites:!1});case"SUCCESS_"+u.GET_COUNTRY_SITES:var a=t.payload.map(function(e){return 0===Object.keys(e.state).length?i({},e,{country_id:t.countryId,state:{status:null,reason_id:null,comment:null,dirty:!1,randomization_rate:null}}):e.state.randomization_rate||0===e.state.randomization_rate?i({},e,{hasOverrodeRR:!0}):e}),n=e.sortData,o=n.active,d=n.direction,f=(0,p.default)(o);return i({},e,l({loadingSites:!1,errorLoadingSites:!1,sitesDataAvailable:!e.sitesDataAvailable&&a.length>0||e.sitesDataAvailable},t.scenarioId,i({},e[t.scenarioId],l({},t.countryId,a.sort(f(o,d))))));case"SUCCESS_"+u.BATCH_OVERRIDE_FIELD_UPDATE:return t.refreshSitesData?i({},e,{past:[],future:[],hasChanges:!1,dirtyDataFor:null}):e;case"SUCCESS_"+u.UPDATE_SITES:return t.skipDataRefresh?e:i({},e,{past:[],future:[],hasChanges:!1,dirtyDataFor:null});case u.SORT_SITES_DATA:return i({},e,{sortData:{direction:t.sortDirection,active:t.columnName}});case u.TOGGLE_TABLE_VIEW:return i({},e,{tableView:t.payload});case u.TOGGLE_INTERNAL_SITES_VIEW:return i({},e,{showInternalSites:!e.showInternalSites});case u.TOGGLE_EXTERNAL_SITES_VIEW:return i({},e,{showExternalSites:!e.showExternalSites});case u.SITE_ACTION:var h=e[t.scenarioId][t.countryId],v=h.map(function(e){if(e.investigator_center_id===t.id){if(t.field)return i({},e,{hasOverrodeRR:!0,state:i({},e.state,{randomization_rate:t.value,dirty:!0})});var a=e.state.dirty;return i({},e,{state:{status:a?null:t.status,reason_id:a?null:t.reason_id,comment:a?null:t.comment,dirty:!a}})}return i({},e)}),_=v.filter(function(e){return e.state.dirty}).length>0;return i({},e,l({hasChanges:_,dirtyDataFor:{scenarioId:t.scenarioId,countryId:e.dirtyDataFor?(0,s.default)([].concat(r(e.dirtyDataFor.countryId),[t.countryId])):[t.countryId]}},t.scenarioId,i({},e[t.scenarioId],l({},t.countryId,v))));case u.ADD_SITE_HISTORY_STEP:var E=e.past?[].concat(r(e.past)):[];E.length===c.UNDO_HISTORY_LENGTH&&E.shift();var g=l({hasChanges:e.hasChanges},t.scenarioId,i({},e[t.scenarioId]));return E.push(g),i({},e,{past:E,future:[]});case u.UNDO_SITE_ACTION:var y=e.past?[].concat(r(e.past)):[];if(0===y.length)return e;var S=l({hasChanges:e.hasChanges},t.scenarioId,i({},e[t.scenarioId]));return i({},e,y.pop(),{past:y,future:[S].concat(r(e.future))});case u.REDO_SITE_ACTION:var b=e.future[0],C=e.future.slice(1),O=l({hasChanges:e.hasChanges},t.scenarioId,i({},e[t.scenarioId]));return i({},e,b,{past:[].concat(r(e.past),[O]),future:C});case u.RESET_SITES:return i({},m,{siteEditReasons:e.siteEditReasons,editableCountriesIds:e.editableCountriesIds,showInitialSelection:e.showInitialSelection,showInternalSites:e.showInternalSites,showExternalSites:e.showExternalSites,sitesFilter:e.sitesFilter,studiesFilter:e.studiesFilter,metricsFilter:e.metricsFilter,sortData:e.sortData,tableView:e.tableView});case u.TOGGLE_INITIAL_SITES_SELECTION:return i({},e,{showInitialSelection:!e.showInitialSelection});case"SUCCESS_"+u.GET_EDITABLE_SITES_COUNTRIES:return i({},e,{editableCountriesIds:t.payload});case u.SET_STUDIES_FILTER:return i({},e,{studiesFilter:t.payload});case u.SET_METRICS_FILTER:return i({},e,{metricsFilter:t.payload});case"TOGGLE_SITES_FILTER_PANEL":return i({},e,{showFilterPanel:!e.showFilterPanel});case"TOGGLE_SITES_FILTERED_DATA_VIEW":return i({},e,l({},t.payload,!e[t.payload]));case"[SITES.MULTI-EDIT] SET_SITES_MULTIEDIT_VIEW":return"NONE"===t.payload?i({},e,l({multieditView:t.payload},t.scenarioId,i({},e[t.scenarioId],l({},t.countryId,e[t.scenarioId][t.countryId].map(function(e){return e.multiSelected?i({},e,{multiSelected:!1}):e}))))):i({},e,{multieditView:t.payload});case"[SITES.MULTI-EDIT] SELECT_ALL_SITES":return i({},e,l({},t.scenarioId,i({},e[t.scenarioId],l({},t.countryId,e[t.scenarioId][t.countryId].map(function(e){return t.sitesIds.includes(e.investigator_center_id)?i({},e,{multiSelected:t.payload}):e})))));case"[SITES.MULTI-EDIT] SELECT_SITE":return i({},e,l({},t.scenarioId,i({},e[t.scenarioId],l({},t.countryId,e[t.scenarioId][t.countryId].map(function(e){return t.siteId===e.investigator_center_id?i({},e,{multiSelected:!e.multiSelected}):e})))));case"[SITES.MULTI-EDIT] SUBMIT_MULTIEDIT":var T=[].concat(r(e[t.scenarioId][t.countryId])),R=T.map(function(e){if(e.multiSelected){var a=e.state.dirty;return i({},e,{multiSelected:!1,state:{status:a?null:t.status,reason_id:a?null:t.reason_id,comment:a?null:t.comment,dirty:!a}})}return i({},e)}),w=R.filter(function(e){return e.state.dirty}).length>0;return i({},e,l({hasChanges:w,multieditView:"NONE",dirtyDataFor:{scenarioId:t.scenarioId,countryId:e.dirtyDataFor?(0,s.default)([].concat(r(e.dirtyDataFor.countryId),[t.countryId])):[t.countryId]}},t.scenarioId,i({},e[t.scenarioId],l({},t.countryId,R))));case"SUCCESS_"+u.SITE_EDIT_REASON:return i({},e,{siteEditReasons:t.payload});case"UPDATE_SITE_VALUE":return e;case"TOGGLE_VIEW_FORECAST_AS_DECILE":return i({},e,{viewForecastAsDecile:!e.viewForecastAsDecile});case u.TOGGLE_OTHER_TABLE_VIEW_STATE:return i({},e,{otherTableExpanded:!e.otherTableExpanded});case u.TOGGLE_EXTERNAL_TABLE_VIEW_STATE:return i({},e,{externalTableExpanded:!e.externalTableExpanded});case u.TOGGLE_RAW_TABLE_VIEW_STATE:return i({},e,{rawTableExpanded:!e.rawTableExpanded});case u.TOGGLE_SELECTED_TABLE_VIEW_STATE:return i({},e,{selectedTableExpanded:!e.selectedTableExpanded});case u.SEARCH_SITES_VALUE_ACTION:return i({},e,{searchSitesValue:t.payload});case u.SET_ACTIVE_SITES_PAGE:return i({},e,{activePages:i({},e.activePages,l({},t.section,t.page))});case u.SET_ACTIVE_PAGES:return i({},e,{activePages:i({},e.activePages,t.payload)});case u.ADD_SELECTED_SITE:var A=e[t.scenarioId][t.countryId],I=t.payload;return I.state&&0!==Object.keys(I.state).length||(I=i({},I,{country_id:t.countryId,state:{status:null,reason_id:null,comment:null,dirty:!1,randomization_rate:null}})),(I.state.randomization_rate||0===I.state.randomization_rate)&&(I=i({},I,{hasOverrodeRR:!0})),I.addedViaSearch=!0,i({},e,l({},t.scenarioId,i({},e[t.scenarioId],l({},t.countryId,[I].concat(r(A))))));case"SUCCESS_"+u.GET_SITES_HEALTH:return i({},e,t.payload);default:return e}};var o=a(200),s=n(o),u=a(15),d=a(114),c=a(14),f=a(224),p=n(f),m={sitesDataAvailable:!0,sitesFilter:d.SITES_FILTER_KEYS.ALL,studiesFilter:d.STUDIES_FILTER_KEYS.COMPLETED,metricsFilter:d.METRICS_FILTER_KEYS.MEDIAN_TIME_TO_QUERY,sortData:{direction:"ASC",active:"ranking"},tableView:d.TABLE_VIEW.HISTORICAL,showInternalSites:!1,showExternalSites:!1,past:[],future:[],hasChanges:!1,showInitialSelection:!1,multieditView:"NONE",editableCountriesIds:null,piPediatric:!1,piAdolescence:!1,piPhase:!1,pcPediatric:!1,pcAdolescence:!1,pcPhase:!1,viewForecastAsDecile:!0,loadingSites:!1,errorLoadingSites:!1,otherTableExpanded:!0,rawTableExpanded:!1,selectedTableExpanded:!0,searchSitesValue:"",activePages:{SELECTED:0,OTHER:0,EXTERNAL:0,RAW:0}}},function(e,t,a){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];switch(t.type){case"SUCCESS_"+s.GET_STUDIES:return o({},e,t.payload,{TAFilterValue:e.TAFilterValue,collapsedSections:e.collapsedSections,sorting:e.sorting});case"SUCCESS_"+s.IMPORT_PLATFORM_STUDY:return o({},e,{isLoading:!1});case"REQUEST_"+s.IMPORT_PLATFORM_STUDY:return o({},e,{isLoading:!0});case"ERROR_"+s.IMPORT_PLATFORM_STUDY:return t.payload&&452===t.payload.status?o({},e,{error:!0,isLoading:!1,missingIndicationStudy:!0}):o({},e,{isLoading:!1,error:!0});case"SUCCESS_"+s.CREATE_NEW_STUDY:var a=o({},t.payload);return o({},e,{studies:[].concat(n(e.studies),[a]),isLoading:!1});case"REQUEST_"+s.DELETE_STUDY:return o({},e,{isLoading:!0});case"SUCCESS_"+s.DELETE_STUDY:return o({},e,{studies:[].concat(n(e.studies.filter(function(e){return e.id!==t.id}))),isLoading:!1});case"ERROR_"+s.DELETE_STUDY:return o({},e,{isLoading:!1,error:!0});case s.CLOSE_MISSING_INDICATOR_DIALOG:return o({},e,{missingIndicationStudy:!1});case s.STUDIES_SET_FILTER_VALUE:return o({},e,{TAFilterValue:t.filterValue});case s.STUDIES_COLLAPSE_SECTIONS:var l=t.section,i=e.collapsedSections.indexOf(l),d=[].concat(n(e.collapsedSections));return-1===i?d.push(l):d.splice(i,1),o({},e,{collapsedSections:d});case s.STUDIES_SET_SORTING_ORDER:var f=t.section+"_sorting",p=o({},e.sorting[f]),m=null;if(p.column===t.column){var h=u.SORTING_ORDER.ASC;p.order===u.SORTING_ORDER.ASC&&(h=u.SORTING_ORDER.DESC),m=o({},e.sorting,r({},f,{column:t.column,order:h}))}else m=o({},e.sorting,r({},f,{column:t.column,order:u.SORTING_ORDER.DESC}));return o({},e,{sorting:m});case"SUCCESS_"+s.REMOVE_SCENARIO:return o({},e,{studies:[]});case"SUCCESS_"+s.GET_UNKNOWN_STUDIES:return o({},e,{unknownStudies:Array.isArray(t.payload)?t.payload:[]});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=l;var s=a(15),u=a(361),d={column:u.COLUMN_NAMES.STUDY_NAME,order:u.SORTING_ORDER.ASC},c={isLoading:!1,error:null,missingIndicationStudy:!1,TAFilterValue:"",collapsedSections:[],sorting:(i={},r(i,u.SECTIONS.TRACKING+"_sorting",d),r(i,u.SECTIONS.PLANNING+"_sorting",d),r(i,u.SECTIONS.PLAYGROUND+"_sorting",d),r(i,u.SECTIONS.UNKNOWN+"_sorting",d),i),unknownStudies:[]}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments[1];switch(t.type){case"REQUEST_"+c.GET_STUDY_BY_ID:return i({},e,{isLoading:!0});case"SUCCESS_"+c.GET_STUDY_BY_ID:var a,n=i({},t.payload,{isArchivedScenarios:t.isArchivedScenarios});if(n&&n.scenarios){var o=n.scenarios.map(function(e){try{if(e&&e.cohorts&&e.cohorts.length>0){var t=(0,p.prepareScenarioObject)(e);t.end_date=(0,p.getMomentDate)(e.end_date),t.updated=(0,p.getMomentDate)(e.updated);var a=void 0;if(t.approved_data_snapshot&&(a=(0,f.deserializeScenarioData)(t))){t=i({},(0,s.default)(t,"approved_data_snapshot"),{approvedData:a,fp:a.fp,end_date:a.target_lpft,fpfv_fpft:a.fpfv_fpft}),t.cohorts=(0,E.calculateCohortsData)(e);var r=(0,_.getAggregatedGlobalRow)(t.cohorts.filter(function(e){return e.countries.length>0&&e.fp}).map(function(e){return e.fullData.find(function(e){return"rollup"===e.type})}),t.cohorts.map(function(e){return e.aggregatedActuals})[0],(0,p.getMomentDate)(t.fp),e);t.approvedData&&t.approvedData.aggregatedGlobalData&&y.APPROVED_COUNTRY_DATA_FIELDS.forEach(function(e){r[0][e]=t.approvedData.aggregatedGlobalData[e]}),t=i({},t,{fullData:r})}var l=(0,g.getUniqueCohortsCountries)(t.cohorts),o=(0,m.getStudyParamsWarning)(n,t);return i({},t,{studyParamsWarning:o,calculating:!t.fullData&&!t.failedFetch,countries:new Array(l.length),fullData:t.fullData?t.fullData:[{}]})}var u=(0,d.default)(e);u=(0,p.prepareScenarioObject)(u);var c=void 0;u.approved_data_snapshot&&(c=(0,f.deserializeScenarioData)(u))&&(u=i({},(0,s.default)(u,"approved_data_snapshot"),{approvedData:c,fp:c.fp,end_date:c.target_lpft,fpfv_fpft:c.fpfv_fpft}),u.countries=(0,p.prepareScenarioCountriesObject)(u,u.isImpact),u=i({},u,{fullData:(0,p.getScenarioCalculatedData)(u.countries,u)}));var h=(0,m.getStudyParamsWarning)(n,u);return u=i({},u,{studyParamsWarning:h,calculating:!u.fullData&&!u.failedFetch,fullData:u.fullData?u.fullData:[{}]})}catch(e){console.log(e)}return e}).sort((0,v.default)("updatedAt"));n=i({},n,{scenarios:o})}return i({},e,(a={},l(a,n.id,n),l(a,"isLoading",!1),a));case"ERROR_"+c.GET_STUDY_BY_ID:return i({},e,{isLoading:!1,error:!0});case"SUCCESS_"+c.ARCHIVE_SCENARIO:var u=e[t.studyId].scenarios.filter(function(e){return e.id!==t.scenarioId}),h=e[t.studyId].archivedCount+1;return i({},e,l({},t.studyId,i({},e[t.studyId],{scenarios:u,archivedCount:h})));case"SUCCESS_"+c.UNARCHIVE_SCENARIO:var b=e[t.studyId].scenarios.filter(function(e){return e.id!==t.scenarioId}),C=e[t.studyId].archivedCount-1;return i({},e,l({},t.studyId,i({},e[t.studyId],{scenarios:b,archivedCount:C})));case c.UPDATE_STUDY_SCENARIO_JOB_STATUS:return i({},e,l({},t.studyId,i({},e[t.studyId],{scenarios:e[t.studyId].scenarios.map(function(e){return+e.id==+t.scenarioId&&(e.nerve_job_status=t.jobStatus),e})})));case"REQUEST_"+c.UPDATE_STUDY_OWNER:return i({},e,{isLoading:!0});case"SUCCESS_"+c.REMOVE_SCENARIO:var O=e[t.studyId].scenarios.filter(function(e){return e.id!==t.scenarioId});return i({},e,l({},t.studyId,i({},e[t.studyId],{scenarios:O})));case c.UPDATE_STUDY_SCENARIO_FULL_DATA:var T=i({},e[t.studyId]);return+t.studyId==+T.id&&(T.scenarios=T.scenarios.map(function(a){if(+a.id==+t.scenarioId){var n=(0,m.getStudyParamsWarning)(e[t.studyId],t);return i({},a,(0,s.default)(t,"type"),{calculating:!1,studyParamsWarning:n})}return a})),i({},e,l({},t.studyId,T));case c.ADD_STUDY_SCENARIO:var R=i({},e[t.studyId]);return+t.studyId==+R.id&&(R.scenarios=[].concat(r(R.scenarios),[t.payload]).sort((0,v.default)("updatedAt"))),i({},e,l({},t.studyId,R));case"SUCCESS_"+c.GET_IMPACT_SCENARIO:var w=(0,p.prepareScenarioObject)(t.payload);w.countries=(0,p.prepareScenarioCountriesObject)(w,!0);var A=i({},e[t.studyId]);return A.scenarios=[].concat(r(A.scenarios.filter(function(e){return!e.isImpact})),[i({},w,{fullData:(0,p.getScenarioCalculatedData)(w.countries,w)})]),i({},e,l({},t.studyId,A));default:return e}};var o=a(83),s=n(o),u=a(31),d=n(u),c=a(15),f=a(63),p=a(7),m=a(64),h=a(49),v=n(h),_=a(223),E=a(130),g=a(116),y=a(14),S={isLoading:!1,error:null}},function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case"SUCCESS_"+l.GET_AVAILABLE_USERS:return r({},e,{isLoading:!1,error:null,availableUsers:t.payload});case"REQUEST_"+l.GET_AVAILABLE_USERS:return r({},e,{isLoading:!0});case"ERROR_"+l.GET_AVAILABLE_USERS:return r({},e,{isLoading:!1,error:!0});case"SUCCESS_"+l.GET_COUNTRY_USERS:return r({},e,{isLoading:!1,countryUsers:t.payload});case"REQUEST_"+l.GET_COUNTRY_USERS:return r({},e,{isLoading:!0});case"ERROR_"+l.GET_COUNTRY_USERS:return r({},e,{isLoading:!1,error:!0});case"SUCCESS_"+l.SET_COUNTRY_TO_USER:var a=t.payload,n=a.userId,o=a.country,s=e.countryUsers.findIndex(function(e){return e.id===n}),u=r({},e.countryUsers[s]);return u.countries.push(o),e.countryUsers.splice(s,1,u),r({},e);case"SUCCESS_"+l.REMOVE_COUNTRY_FROM_USER:var d=t.payload,c=d.userId,f=d.countryId,p=e.countryUsers.findIndex(function(e){return e.id===c}),m=r({},e.countryUsers[p]),h=m.countries.filter(function(e){return e.id!==f});return m.countries=h,e.countryUsers.splice(p,1,m),r({},e);default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=n;var l=a(15),i={availableUsers:[],isLoading:!1,error:null}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),l=n(r),i=a(59),o=a(1175),s=n(o),u=a(1164),d=n(u),c=a(1155),f=n(c),p=a(1166),m=n(p),h=a(1157),v=n(h),_=a(1193),E=n(_),g=a(1185),y=n(g),S=a(1180),b=n(S),C=a(1163),O=n(C),T=a(1113),R=n(T),w=a(1100),A=n(w),I=a(1178),N=n(I),D=a(1105),P=n(D),L=a(1145),M=n(L),x=a(1115),k=n(x),j=a(1161),F=a(1111),U=n(F),V=a(1109),B=n(V),H=a(1107),G=n(H),Y=a(1150),q=n(Y),z=a(1191),W=n(z),K=a(1183),X=n(K),Z=a(959),J=n(Z),Q=a(1197),$=n(Q),ee=a(1207),te=n(ee),ae=a(837),ne=n(ae),re=a(182),le=n(re),ie=(0,ne.default)(v.default,[le.default.ADMIN,le.default.USER,le.default.PLAYGROUND]),oe=(0,ne.default)(f.default,[le.default.ADMIN,le.default.USER,le.default.PLAYGROUND,le.default.READONLY]),se=(0,ne.default)(m.default,[le.default.ADMIN,le.default.USER,le.default.PLAYGROUND]),ue=(0,ne.default)(d.default,[le.default.ADMIN,le.default.USER,le.default.PLAYGROUND]);t.default=function(e){return l.default.createElement(i.Route,{path:"/",component:s.default,onEnter:(0,te.default)(e)},l.default.createElement(i.IndexRedirect,{to:"/studies"}),l.default.createElement(i.Route,{component:A.default},l.default.createElement(i.Route,{path:"studies"},l.default.createElement(i.IndexRoute,{component:y.default}),l.default.createElement(i.Route,{path:"new",component:se}),l.default.createElement(i.Route,{path:":id",components:W.default},l.default.createElement(i.IndexRoute,{component:E.default}),l.default.createElement(i.Route,{path:"archived",component:E.default}),l.default.createElement(i.Route,{path:"edit",component:ie}),l.default.createElement(i.Route,{path:"scenarios"},l.default.createElement(i.Route,{path:"new",component:ue}),l.default.createElement(i.Route,{path:"impact"},l.default.createElement(i.Route,{path:":siteId"},l.default.createElement(i.IndexRoute,{component:O.default}))),l.default.createElement(i.Route,{path:":scenarioId"},l.default.createElement(i.IndexRoute,{component:b.default}),l.default.createElement(i.Route,{path:"edit",component:oe}),l.default.createElement(i.Route,{path:"events",component:N.default}),l.default.createElement(i.Route,{path:"sites",component:X.default},l.default.createElement(i.Route,{path:":countryId"},l.default.createElement(i.IndexRoute,{component:M.default}),l.default.createElement(i.Route,{path:"site"},l.default.createElement(i.Route,{path:":siteId"},l.default.createElement(i.IndexRoute,{component:k.default}))))),l.default.createElement(i.Route,{path:"cohorts",component:B.default},l.default.createElement(i.IndexRoute,{component:U.default}),l.default.createElement(i.Route,{path:":cohortId",component:G.default})),l.default.createElement(i.Route,{path:"cohorts-events/:cohortId",component:P.default}))),l.default.createElement(i.Route,{path:"compare",component:R.default}),l.default.createElement(i.Route,{component:j.HistoricalDataPreloader},l.default.createElement(i.Route,{path:"historical"},l.default.createElement(i.IndexRoute,{component:j.HistoricalReferenceTrials}),l.default.createElement(i.Route,{path:"summary",component:j.HistoricalReferenceSummary}))),l.default.createElement(i.Route,{path:"csms",component:q.default}))),l.default.createElement(i.Route,{path:"tests",component:$.default})),l.default.createElement(i.Route,{path:"*",component:function(){return l.default.createElement(J.default,{title:"Oops! The page you are trying to reach does not exist (404)"})}}))}},function(e,t,a){"use strict";e.exports=function(){return new Worker(a.p+"1b36ed3c0594a6ff17d1.worker.js")}},function(e,t,a){"use strict";e.exports=function(){return new Worker(a.p+"7c586279db2592e007d7.worker.js")}},function(e,t){const a={1:"I",2:"II",3:"III",4:"IV",5:"NA",6:"UD"};e.exports={PHASE:a}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},function(e,t,a){t=e.exports=a(3)(void 0),t.push([e.i,"",""])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,function(e,t,a){e.exports=a.p+"assets/images/novartis-logo-pos-rgb@3x.c827ed.jpg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n=a(1503);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1504);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1505);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1506);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1507);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1508);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1509);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1510);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1511);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1512);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1513);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1514);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1515);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1516);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1518);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1519);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1521);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1522);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1523);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1524);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1525);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1526);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1527);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1528);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1529);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1530);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1532);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1533);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1534);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1535);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1536);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1537);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1539);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1540);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1543);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1544);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1545);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1546);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1547);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1548);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1549);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1550);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1551);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1552);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1553);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1554);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1555);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1556);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1557);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1558);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1559);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1560);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1563);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1564);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1565);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1566);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1567);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1568);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1569);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1570);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1571);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1572);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1573);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1574);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1575);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1576);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1577);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1578);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1579);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1580);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1581);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1582);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1583);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1584);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1585);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1587);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1588);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1589);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1591);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1592);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1593);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1594);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1596);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1597);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1598);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1599);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1600);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1601);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1602);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1604);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1606);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1607);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1608);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1609);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1610);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1611);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1612);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1613);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1614);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1615);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1616);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1617);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1618);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1619);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1620);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1621);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1622);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1623);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1624);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1625);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1626);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1627);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1628);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1629);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1630);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1631);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1632);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1633);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1634);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1635);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1636);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1637);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1638);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1640);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1641);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1642);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1643);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1644);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1645);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1647);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1648);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1650);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1651);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1652);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1654);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1655);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1656);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,a){var n=a(1657);"string"==typeof n&&(n=[[e.i,n,""]]);var r={singleton:!0};r.transform=void 0,a(4)(n,r),n.locals&&(e.exports=n.locals)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){a(814),e.exports=a(813)}],[2479]);